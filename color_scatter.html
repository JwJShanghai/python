<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>color_scatter.py example</title>
        
        <style>
            /* BEGIN /Users/davekensinger/miniconda3/lib/python3.4/site-packages/bokeh/server/static/css/bokeh.css */
                /*! jQuery UI - v1.10.0 - 2013-01-17
                * http://jqueryui.com
                * Includes: jquery.ui.core.css, jquery.ui.accordion.css, jquery.ui.autocomplete.css, jquery.ui.button.css, jquery.ui.datepicker.css, jquery.ui.dialog.css, jquery.ui.menu.css, jquery.ui.progressbar.css, jquery.ui.resizable.css, jquery.ui.selectable.css, jquery.ui.slider.css, jquery.ui.spinner.css, jquery.ui.tabs.css, jquery.ui.tooltip.css, jquery.ui.theme.css
                * Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
                
                /* Layout helpers
                ----------------------------------*/
                .ui-helper-hidden {
                	display: none;
                }
                .ui-helper-hidden-accessible {
                	border: 0;
                	clip: rect(0 0 0 0);
                	height: 1px;
                	margin: -1px;
                	overflow: hidden;
                	padding: 0;
                	position: absolute;
                	width: 1px;
                }
                .ui-helper-reset {
                	margin: 0;
                	padding: 0;
                	border: 0;
                	outline: 0;
                	line-height: 1.3;
                	text-decoration: none;
                	font-size: 100%;
                	list-style: none;
                }
                .ui-helper-clearfix:before,
                .ui-helper-clearfix:after {
                	content: "";
                	display: table;
                }
                .ui-helper-clearfix:after {
                	clear: both;
                }
                .ui-helper-clearfix {
                	min-height: 0; /* support: IE7 */
                }
                .ui-helper-zfix {
                	width: 100%;
                	height: 100%;
                	top: 0;
                	left: 0;
                	position: absolute;
                	opacity: 0;
                	filter:Alpha(Opacity=0);
                }
                
                .ui-front {
                	z-index: 100;
                }
                
                
                /* Interaction Cues
                ----------------------------------*/
                .ui-state-disabled {
                	cursor: default !important;
                }
                
                
                /* Icons
                ----------------------------------*/
                
                /* states and images */
                .ui-icon {
                	display: block;
                	text-indent: -99999px;
                	overflow: hidden;
                	background-repeat: no-repeat;
                }
                
                
                /* Misc visuals
                ----------------------------------*/
                
                /* Overlays */
                .ui-widget-overlay {
                	position: fixed;
                	top: 0;
                	left: 0;
                	width: 100%;
                	height: 100%;
                }
                
                .ui-accordion .ui-accordion-header {
                	display: block;
                	cursor: pointer;
                	position: relative;
                	margin-top: 2px;
                	padding: .5em .5em .5em .7em;
                	min-height: 0; /* support: IE7 */
                }
                .ui-accordion .ui-accordion-icons {
                	padding-left: 2.2em;
                }
                .ui-accordion .ui-accordion-noicons {
                	padding-left: .7em;
                }
                .ui-accordion .ui-accordion-icons .ui-accordion-icons {
                	padding-left: 2.2em;
                }
                .ui-accordion .ui-accordion-header .ui-accordion-header-icon {
                	position: absolute;
                	left: .5em;
                	top: 50%;
                	margin-top: -8px;
                }
                .ui-accordion .ui-accordion-content {
                	padding: 1em 2.2em;
                	border-top: 0;
                	overflow: auto;
                }
                
                .ui-autocomplete {
                	position: absolute;
                	top: 0;
                	left: 0;
                	cursor: default;
                }
                
                .ui-button {
                	display: inline-block;
                	position: relative;
                	padding: 0;
                	line-height: normal;
                	margin-right: .1em;
                	cursor: pointer;
                	vertical-align: middle;
                	text-align: center;
                	overflow: visible; /* removes extra width in IE */
                }
                .ui-button,
                .ui-button:link,
                .ui-button:visited,
                .ui-button:hover,
                .ui-button:active {
                	text-decoration: none;
                }
                /* to make room for the icon, a width needs to be set here */
                .ui-button-icon-only {
                	width: 2.2em;
                }
                /* button elements seem to need a little more width */
                button.ui-button-icon-only {
                	width: 2.4em;
                }
                .ui-button-icons-only {
                	width: 3.4em;
                }
                button.ui-button-icons-only {
                	width: 3.7em;
                }
                
                /* button text element */
                .ui-button .ui-button-text {
                	display: block;
                	line-height: normal;
                }
                .ui-button-text-only .ui-button-text {
                	padding: .4em 1em;
                }
                .ui-button-icon-only .ui-button-text,
                .ui-button-icons-only .ui-button-text {
                	padding: .4em;
                	text-indent: -9999999px;
                }
                .ui-button-text-icon-primary .ui-button-text,
                .ui-button-text-icons .ui-button-text {
                	padding: .4em 1em .4em 2.1em;
                }
                .ui-button-text-icon-secondary .ui-button-text,
                .ui-button-text-icons .ui-button-text {
                	padding: .4em 2.1em .4em 1em;
                }
                .ui-button-text-icons .ui-button-text {
                	padding-left: 2.1em;
                	padding-right: 2.1em;
                }
                /* no icon support for input elements, provide padding by default */
                input.ui-button {
                	padding: .4em 1em;
                }
                
                /* button icon element(s) */
                .ui-button-icon-only .ui-icon,
                .ui-button-text-icon-primary .ui-icon,
                .ui-button-text-icon-secondary .ui-icon,
                .ui-button-text-icons .ui-icon,
                .ui-button-icons-only .ui-icon {
                	position: absolute;
                	top: 50%;
                	margin-top: -8px;
                }
                .ui-button-icon-only .ui-icon {
                	left: 50%;
                	margin-left: -8px;
                }
                .ui-button-text-icon-primary .ui-button-icon-primary,
                .ui-button-text-icons .ui-button-icon-primary,
                .ui-button-icons-only .ui-button-icon-primary {
                	left: .5em;
                }
                .ui-button-text-icon-secondary .ui-button-icon-secondary,
                .ui-button-text-icons .ui-button-icon-secondary,
                .ui-button-icons-only .ui-button-icon-secondary {
                	right: .5em;
                }
                
                /* button sets */
                .ui-buttonset {
                	margin-right: 7px;
                }
                .ui-buttonset .ui-button {
                	margin-left: 0;
                	margin-right: -.3em;
                }
                
                /* workarounds */
                /* reset extra padding in Firefox, see h5bp.com/l */
                input.ui-button::-moz-focus-inner,
                button.ui-button::-moz-focus-inner {
                	border: 0;
                	padding: 0;
                }
                
                .ui-datepicker {
                	width: 17em;
                	padding: .2em .2em 0;
                	display: none;
                }
                .ui-datepicker .ui-datepicker-header {
                	position: relative;
                	padding: .2em 0;
                }
                .ui-datepicker .ui-datepicker-prev,
                .ui-datepicker .ui-datepicker-next {
                	position: absolute;
                	top: 2px;
                	width: 1.8em;
                	height: 1.8em;
                }
                .ui-datepicker .ui-datepicker-prev-hover,
                .ui-datepicker .ui-datepicker-next-hover {
                	top: 1px;
                }
                .ui-datepicker .ui-datepicker-prev {
                	left: 2px;
                }
                .ui-datepicker .ui-datepicker-next {
                	right: 2px;
                }
                .ui-datepicker .ui-datepicker-prev-hover {
                	left: 1px;
                }
                .ui-datepicker .ui-datepicker-next-hover {
                	right: 1px;
                }
                .ui-datepicker .ui-datepicker-prev span,
                .ui-datepicker .ui-datepicker-next span {
                	display: block;
                	position: absolute;
                	left: 50%;
                	margin-left: -8px;
                	top: 50%;
                	margin-top: -8px;
                }
                .ui-datepicker .ui-datepicker-title {
                	margin: 0 2.3em;
                	line-height: 1.8em;
                	text-align: center;
                }
                .ui-datepicker .ui-datepicker-title select {
                	font-size: 1em;
                	margin: 1px 0;
                }
                .ui-datepicker select.ui-datepicker-month-year {
                	width: 100%;
                }
                .ui-datepicker select.ui-datepicker-month,
                .ui-datepicker select.ui-datepicker-year {
                	width: 49%;
                }
                .ui-datepicker table {
                	width: 100%;
                	font-size: .9em;
                	border-collapse: collapse;
                	margin: 0 0 .4em;
                }
                .ui-datepicker th {
                	padding: .7em .3em;
                	text-align: center;
                	font-weight: bold;
                	border: 0;
                }
                .ui-datepicker td {
                	border: 0;
                	padding: 1px;
                }
                .ui-datepicker td span,
                .ui-datepicker td a {
                	display: block;
                	padding: .2em;
                	text-align: right;
                	text-decoration: none;
                }
                .ui-datepicker .ui-datepicker-buttonpane {
                	background-image: none;
                	margin: .7em 0 0 0;
                	padding: 0 .2em;
                	border-left: 0;
                	border-right: 0;
                	border-bottom: 0;
                }
                .ui-datepicker .ui-datepicker-buttonpane button {
                	float: right;
                	margin: .5em .2em .4em;
                	cursor: pointer;
                	padding: .2em .6em .3em .6em;
                	width: auto;
                	overflow: visible;
                }
                .ui-datepicker .ui-datepicker-buttonpane button.ui-datepicker-current {
                	float: left;
                }
                
                /* with multiple calendars */
                .ui-datepicker.ui-datepicker-multi {
                	width: auto;
                }
                .ui-datepicker-multi .ui-datepicker-group {
                	float: left;
                }
                .ui-datepicker-multi .ui-datepicker-group table {
                	width: 95%;
                	margin: 0 auto .4em;
                }
                .ui-datepicker-multi-2 .ui-datepicker-group {
                	width: 50%;
                }
                .ui-datepicker-multi-3 .ui-datepicker-group {
                	width: 33.3%;
                }
                .ui-datepicker-multi-4 .ui-datepicker-group {
                	width: 25%;
                }
                .ui-datepicker-multi .ui-datepicker-group-last .ui-datepicker-header,
                .ui-datepicker-multi .ui-datepicker-group-middle .ui-datepicker-header {
                	border-left-width: 0;
                }
                .ui-datepicker-multi .ui-datepicker-buttonpane {
                	clear: left;
                }
                .ui-datepicker-row-break {
                	clear: both;
                	width: 100%;
                	font-size: 0;
                }
                
                /* RTL support */
                .ui-datepicker-rtl {
                	direction: rtl;
                }
                .ui-datepicker-rtl .ui-datepicker-prev {
                	right: 2px;
                	left: auto;
                }
                .ui-datepicker-rtl .ui-datepicker-next {
                	left: 2px;
                	right: auto;
                }
                .ui-datepicker-rtl .ui-datepicker-prev:hover {
                	right: 1px;
                	left: auto;
                }
                .ui-datepicker-rtl .ui-datepicker-next:hover {
                	left: 1px;
                	right: auto;
                }
                .ui-datepicker-rtl .ui-datepicker-buttonpane {
                	clear: right;
                }
                .ui-datepicker-rtl .ui-datepicker-buttonpane button {
                	float: left;
                }
                .ui-datepicker-rtl .ui-datepicker-buttonpane button.ui-datepicker-current,
                .ui-datepicker-rtl .ui-datepicker-group {
                	float: right;
                }
                .ui-datepicker-rtl .ui-datepicker-group-last .ui-datepicker-header,
                .ui-datepicker-rtl .ui-datepicker-group-middle .ui-datepicker-header {
                	border-right-width: 0;
                	border-left-width: 1px;
                }
                
                .ui-dialog {
                	position: absolute;
                	top: 0;
                	left: 0;
                	padding: .2em;
                	outline: 0;
                }
                .ui-dialog .ui-dialog-titlebar {
                	padding: .4em 1em;
                	position: relative;
                }
                .ui-dialog .ui-dialog-title {
                	float: left;
                	margin: .1em 0;
                	white-space: nowrap;
                	width: 90%;
                	overflow: hidden;
                	text-overflow: ellipsis;
                }
                .ui-dialog .ui-dialog-titlebar-close {
                	position: absolute;
                	right: .3em;
                	top: 50%;
                	width: 21px;
                	margin: -10px 0 0 0;
                	padding: 1px;
                	height: 20px;
                }
                .ui-dialog .ui-dialog-content {
                	position: relative;
                	border: 0;
                	padding: .5em 1em;
                	background: none;
                	overflow: auto;
                }
                .ui-dialog .ui-dialog-buttonpane {
                	text-align: left;
                	border-width: 1px 0 0 0;
                	background-image: none;
                	margin-top: .5em;
                	padding: .3em 1em .5em .4em;
                }
                .ui-dialog .ui-dialog-buttonpane .ui-dialog-buttonset {
                	float: right;
                }
                .ui-dialog .ui-dialog-buttonpane button {
                	margin: .5em .4em .5em 0;
                	cursor: pointer;
                }
                .ui-dialog .ui-resizable-se {
                	width: 12px;
                	height: 12px;
                	right: -5px;
                	bottom: -5px;
                	background-position: 16px 16px;
                }
                .ui-draggable .ui-dialog-titlebar {
                	cursor: move;
                }
                
                .ui-menu {
                	list-style: none;
                	padding: 2px;
                	margin: 0;
                	display: block;
                	outline: none;
                }
                .ui-menu .ui-menu {
                	margin-top: -3px;
                	position: absolute;
                }
                .ui-menu .ui-menu-item {
                	margin: 0;
                	padding: 0;
                	width: 100%;
                }
                .ui-menu .ui-menu-divider {
                	margin: 5px -2px 5px -2px;
                	height: 0;
                	font-size: 0;
                	line-height: 0;
                	border-width: 1px 0 0 0;
                }
                .ui-menu .ui-menu-item a {
                	text-decoration: none;
                	display: block;
                	padding: 2px .4em;
                	line-height: 1.5;
                	min-height: 0; /* support: IE7 */
                	font-weight: normal;
                }
                .ui-menu .ui-menu-item a.ui-state-focus,
                .ui-menu .ui-menu-item a.ui-state-active {
                	font-weight: normal;
                	margin: -1px;
                }
                
                .ui-menu .ui-state-disabled {
                	font-weight: normal;
                	margin: .4em 0 .2em;
                	line-height: 1.5;
                }
                .ui-menu .ui-state-disabled a {
                	cursor: default;
                }
                
                /* icon support */
                .ui-menu-icons {
                	position: relative;
                }
                .ui-menu-icons .ui-menu-item a {
                	position: relative;
                	padding-left: 2em;
                }
                
                /* left-aligned */
                .ui-menu .ui-icon {
                	position: absolute;
                	top: .2em;
                	left: .2em;
                }
                
                /* right-aligned */
                .ui-menu .ui-menu-icon {
                	position: static;
                	float: right;
                }
                
                .ui-progressbar {
                	height: 2em;
                	text-align: left;
                	overflow: hidden;
                }
                .ui-progressbar .ui-progressbar-value {
                	margin: -1px;
                	height: 100%;
                }
                .ui-progressbar .ui-progressbar-overlay {
                	background: url("images/animated-overlay.gif");
                	height: 100%;
                	filter: alpha(opacity=25);
                	opacity: 0.25;
                }
                .ui-progressbar-indeterminate .ui-progressbar-value {
                	background-image: none;
                }
                
                .ui-resizable {
                	position: relative;
                }
                .ui-resizable-handle {
                	position: absolute;
                	font-size: 0.1px;
                	display: block;
                }
                .ui-resizable-disabled .ui-resizable-handle,
                .ui-resizable-autohide .ui-resizable-handle {
                	display: none;
                }
                .ui-resizable-n {
                	cursor: n-resize;
                	height: 7px;
                	width: 100%;
                	top: -5px;
                	left: 0;
                }
                .ui-resizable-s {
                	cursor: s-resize;
                	height: 7px;
                	width: 100%;
                	bottom: -5px;
                	left: 0;
                }
                .ui-resizable-e {
                	cursor: e-resize;
                	width: 7px;
                	right: -5px;
                	top: 0;
                	height: 100%;
                }
                .ui-resizable-w {
                	cursor: w-resize;
                	width: 7px;
                	left: -5px;
                	top: 0;
                	height: 100%;
                }
                .ui-resizable-se {
                	cursor: se-resize;
                	width: 12px;
                	height: 12px;
                	right: 1px;
                	bottom: 1px;
                }
                .ui-resizable-sw {
                	cursor: sw-resize;
                	width: 9px;
                	height: 9px;
                	left: -5px;
                	bottom: -5px;
                }
                .ui-resizable-nw {
                	cursor: nw-resize;
                	width: 9px;
                	height: 9px;
                	left: -5px;
                	top: -5px;
                }
                .ui-resizable-ne {
                	cursor: ne-resize;
                	width: 9px;
                	height: 9px;
                	right: -5px;
                	top: -5px;
                }
                
                .ui-selectable-helper {
                	position: absolute;
                	z-index: 100;
                	border: 1px dotted black;
                }
                
                .ui-slider {
                	position: relative;
                	text-align: left;
                }
                .ui-slider .ui-slider-handle {
                	position: absolute;
                	z-index: 2;
                	width: 1.2em;
                	height: 1.2em;
                	cursor: default;
                }
                .ui-slider .ui-slider-range {
                	position: absolute;
                	z-index: 1;
                	font-size: .7em;
                	display: block;
                	border: 0;
                	background-position: 0 0;
                }
                
                /* For IE8 - See #6727 */
                .ui-slider.ui-state-disabled .ui-slider-handle,
                .ui-slider.ui-state-disabled .ui-slider-range {
                	filter: inherit;
                }
                
                .ui-slider-horizontal {
                	height: .8em;
                }
                .ui-slider-horizontal .ui-slider-handle {
                	top: -.3em;
                	margin-left: -.6em;
                }
                .ui-slider-horizontal .ui-slider-range {
                	top: 0;
                	height: 100%;
                }
                .ui-slider-horizontal .ui-slider-range-min {
                	left: 0;
                }
                .ui-slider-horizontal .ui-slider-range-max {
                	right: 0;
                }
                
                .ui-slider-vertical {
                	width: .8em;
                	height: 100px;
                }
                .ui-slider-vertical .ui-slider-handle {
                	left: -.3em;
                	margin-left: 0;
                	margin-bottom: -.6em;
                }
                .ui-slider-vertical .ui-slider-range {
                	left: 0;
                	width: 100%;
                }
                .ui-slider-vertical .ui-slider-range-min {
                	bottom: 0;
                }
                .ui-slider-vertical .ui-slider-range-max {
                	top: 0;
                }
                
                .ui-spinner {
                	position: relative;
                	display: inline-block;
                	overflow: hidden;
                	padding: 0;
                	vertical-align: middle;
                }
                .ui-spinner-input {
                	border: none;
                	background: none;
                	color: inherit;
                	padding: 0;
                	margin: .2em 0;
                	vertical-align: middle;
                	margin-left: .4em;
                	margin-right: 22px;
                }
                .ui-spinner-button {
                	width: 16px;
                	height: 50%;
                	font-size: .5em;
                	padding: 0;
                	margin: 0;
                	text-align: center;
                	position: absolute;
                	cursor: default;
                	display: block;
                	overflow: hidden;
                	right: 0;
                }
                /* more specificity required here to overide default borders */
                .ui-spinner a.ui-spinner-button {
                	border-top: none;
                	border-bottom: none;
                	border-right: none;
                }
                /* vertical centre icon */
                .ui-spinner .ui-icon {
                	position: absolute;
                	margin-top: -8px;
                	top: 50%;
                	left: 0;
                }
                .ui-spinner-up {
                	top: 0;
                }
                .ui-spinner-down {
                	bottom: 0;
                }
                
                /* TR overrides */
                .ui-spinner .ui-icon-triangle-1-s {
                	/* need to fix icons sprite */
                	background-position: -65px -16px;
                }
                
                .ui-tabs {
                	position: relative;/* position: relative prevents IE scroll bug (element with position: relative inside container with overflow: auto appear as "fixed") */
                	padding: .2em;
                }
                .ui-tabs .ui-tabs-nav {
                	margin: 0;
                	padding: .2em .2em 0;
                }
                .ui-tabs .ui-tabs-nav li {
                	list-style: none;
                	float: left;
                	position: relative;
                	top: 0;
                	margin: 1px .2em 0 0;
                	border-bottom: 0;
                	padding: 0;
                	white-space: nowrap;
                }
                .ui-tabs .ui-tabs-nav li a {
                	float: left;
                	padding: .5em 1em;
                	text-decoration: none;
                }
                .ui-tabs .ui-tabs-nav li.ui-tabs-active {
                	margin-bottom: -1px;
                	padding-bottom: 1px;
                }
                .ui-tabs .ui-tabs-nav li.ui-tabs-active a,
                .ui-tabs .ui-tabs-nav li.ui-state-disabled a,
                .ui-tabs .ui-tabs-nav li.ui-tabs-loading a {
                	cursor: text;
                }
                .ui-tabs .ui-tabs-nav li a, /* first selector in group seems obsolete, but required to overcome bug in Opera applying cursor: text overall if defined elsewhere... */
                .ui-tabs-collapsible .ui-tabs-nav li.ui-tabs-active a {
                	cursor: pointer;
                }
                .ui-tabs .ui-tabs-panel {
                	display: block;
                	border-width: 0;
                	padding: 1em 1.4em;
                	background: none;
                }
                
                .ui-tooltip {
                	padding: 8px;
                	position: absolute;
                	z-index: 9999;
                	max-width: 300px;
                	-webkit-box-shadow: 0 0 5px #aaa;
                	box-shadow: 0 0 5px #aaa;
                }
                body .ui-tooltip {
                	border-width: 2px;
                }
                
                /* Component containers
                ----------------------------------*/
                .ui-widget {
                	font-family: Verdana,Arial,sans-serif/*{ffDefault}*/;
                	font-size: 1.1em/*{fsDefault}*/;
                }
                .ui-widget .ui-widget {
                	font-size: 1em;
                }
                .ui-widget input,
                .ui-widget select,
                .ui-widget textarea,
                .ui-widget button {
                	font-family: Verdana,Arial,sans-serif/*{ffDefault}*/;
                	font-size: 1em;
                }
                .ui-widget-content {
                	border: 1px solid #aaaaaa/*{borderColorContent}*/;
                	background: #ffffff/*{bgColorContent}*/ url(images/ui-bg_flat_75_ffffff_40x100.png)/*{bgImgUrlContent}*/ 50%/*{bgContentXPos}*/ 50%/*{bgContentYPos}*/ repeat-x/*{bgContentRepeat}*/;
                	color: #222222/*{fcContent}*/;
                }
                .ui-widget-content a {
                	color: #222222/*{fcContent}*/;
                }
                .ui-widget-header {
                	border: 1px solid #aaaaaa/*{borderColorHeader}*/;
                	background: #cccccc/*{bgColorHeader}*/ url(images/ui-bg_highlight-soft_75_cccccc_1x100.png)/*{bgImgUrlHeader}*/ 50%/*{bgHeaderXPos}*/ 50%/*{bgHeaderYPos}*/ repeat-x/*{bgHeaderRepeat}*/;
                	color: #222222/*{fcHeader}*/;
                	font-weight: bold;
                }
                .ui-widget-header a {
                	color: #222222/*{fcHeader}*/;
                }
                
                /* Interaction states
                ----------------------------------*/
                .ui-state-default,
                .ui-widget-content .ui-state-default,
                .ui-widget-header .ui-state-default {
                	border: 1px solid #d3d3d3/*{borderColorDefault}*/;
                	background: #e6e6e6/*{bgColorDefault}*/ url(images/ui-bg_glass_75_e6e6e6_1x400.png)/*{bgImgUrlDefault}*/ 50%/*{bgDefaultXPos}*/ 50%/*{bgDefaultYPos}*/ repeat-x/*{bgDefaultRepeat}*/;
                	font-weight: normal/*{fwDefault}*/;
                	color: #555555/*{fcDefault}*/;
                }
                .ui-state-default a,
                .ui-state-default a:link,
                .ui-state-default a:visited {
                	color: #555555/*{fcDefault}*/;
                	text-decoration: none;
                }
                .ui-state-hover,
                .ui-widget-content .ui-state-hover,
                .ui-widget-header .ui-state-hover,
                .ui-state-focus,
                .ui-widget-content .ui-state-focus,
                .ui-widget-header .ui-state-focus {
                	border: 1px solid #999999/*{borderColorHover}*/;
                	background: #dadada/*{bgColorHover}*/ url(images/ui-bg_glass_75_dadada_1x400.png)/*{bgImgUrlHover}*/ 50%/*{bgHoverXPos}*/ 50%/*{bgHoverYPos}*/ repeat-x/*{bgHoverRepeat}*/;
                	font-weight: normal/*{fwDefault}*/;
                	color: #212121/*{fcHover}*/;
                }
                .ui-state-hover a,
                .ui-state-hover a:hover,
                .ui-state-hover a:link,
                .ui-state-hover a:visited {
                	color: #212121/*{fcHover}*/;
                	text-decoration: none;
                }
                .ui-state-active,
                .ui-widget-content .ui-state-active,
                .ui-widget-header .ui-state-active {
                	border: 1px solid #aaaaaa/*{borderColorActive}*/;
                	background: #ffffff/*{bgColorActive}*/ url(images/ui-bg_glass_65_ffffff_1x400.png)/*{bgImgUrlActive}*/ 50%/*{bgActiveXPos}*/ 50%/*{bgActiveYPos}*/ repeat-x/*{bgActiveRepeat}*/;
                	font-weight: normal/*{fwDefault}*/;
                	color: #212121/*{fcActive}*/;
                }
                .ui-state-active a,
                .ui-state-active a:link,
                .ui-state-active a:visited {
                	color: #212121/*{fcActive}*/;
                	text-decoration: none;
                }
                
                /* Interaction Cues
                ----------------------------------*/
                .ui-state-highlight,
                .ui-widget-content .ui-state-highlight,
                .ui-widget-header .ui-state-highlight {
                	border: 1px solid #fcefa1/*{borderColorHighlight}*/;
                	background: #fbf9ee/*{bgColorHighlight}*/ url(images/ui-bg_glass_55_fbf9ee_1x400.png)/*{bgImgUrlHighlight}*/ 50%/*{bgHighlightXPos}*/ 50%/*{bgHighlightYPos}*/ repeat-x/*{bgHighlightRepeat}*/;
                	color: #363636/*{fcHighlight}*/;
                }
                .ui-state-highlight a,
                .ui-widget-content .ui-state-highlight a,
                .ui-widget-header .ui-state-highlight a {
                	color: #363636/*{fcHighlight}*/;
                }
                .ui-state-error,
                .ui-widget-content .ui-state-error,
                .ui-widget-header .ui-state-error {
                	border: 1px solid #cd0a0a/*{borderColorError}*/;
                	background: #fef1ec/*{bgColorError}*/ url(images/ui-bg_glass_95_fef1ec_1x400.png)/*{bgImgUrlError}*/ 50%/*{bgErrorXPos}*/ 50%/*{bgErrorYPos}*/ repeat-x/*{bgErrorRepeat}*/;
                	color: #cd0a0a/*{fcError}*/;
                }
                .ui-state-error a,
                .ui-widget-content .ui-state-error a,
                .ui-widget-header .ui-state-error a {
                	color: #cd0a0a/*{fcError}*/;
                }
                .ui-state-error-text,
                .ui-widget-content .ui-state-error-text,
                .ui-widget-header .ui-state-error-text {
                	color: #cd0a0a/*{fcError}*/;
                }
                .ui-priority-primary,
                .ui-widget-content .ui-priority-primary,
                .ui-widget-header .ui-priority-primary {
                	font-weight: bold;
                }
                .ui-priority-secondary,
                .ui-widget-content .ui-priority-secondary,
                .ui-widget-header .ui-priority-secondary {
                	opacity: .7;
                	filter:Alpha(Opacity=70);
                	font-weight: normal;
                }
                .ui-state-disabled,
                .ui-widget-content .ui-state-disabled,
                .ui-widget-header .ui-state-disabled {
                	opacity: .35;
                	filter:Alpha(Opacity=35);
                	background-image: none;
                }
                .ui-state-disabled .ui-icon {
                	filter:Alpha(Opacity=35); /* For IE8 - See #6059 */
                }
                
                /* Icons
                ----------------------------------*/
                
                /* states and images */
                .ui-icon {
                	width: 16px;
                	height: 16px;
                	background-position: 16px 16px;
                }
                .ui-icon,
                .ui-widget-content .ui-icon {
                	background-image: url(images/ui-icons_222222_256x240.png)/*{iconsContent}*/;
                }
                .ui-widget-header .ui-icon {
                	background-image: url(images/ui-icons_222222_256x240.png)/*{iconsHeader}*/;
                }
                .ui-state-default .ui-icon {
                	background-image: url(images/ui-icons_888888_256x240.png)/*{iconsDefault}*/;
                }
                .ui-state-hover .ui-icon,
                .ui-state-focus .ui-icon {
                	background-image: url(images/ui-icons_454545_256x240.png)/*{iconsHover}*/;
                }
                .ui-state-active .ui-icon {
                	background-image: url(images/ui-icons_454545_256x240.png)/*{iconsActive}*/;
                }
                .ui-state-highlight .ui-icon {
                	background-image: url(images/ui-icons_2e83ff_256x240.png)/*{iconsHighlight}*/;
                }
                .ui-state-error .ui-icon,
                .ui-state-error-text .ui-icon {
                	background-image: url(images/ui-icons_cd0a0a_256x240.png)/*{iconsError}*/;
                }
                
                /* positioning */
                .ui-icon-carat-1-n { background-position: 0 0; }
                .ui-icon-carat-1-ne { background-position: -16px 0; }
                .ui-icon-carat-1-e { background-position: -32px 0; }
                .ui-icon-carat-1-se { background-position: -48px 0; }
                .ui-icon-carat-1-s { background-position: -64px 0; }
                .ui-icon-carat-1-sw { background-position: -80px 0; }
                .ui-icon-carat-1-w { background-position: -96px 0; }
                .ui-icon-carat-1-nw { background-position: -112px 0; }
                .ui-icon-carat-2-n-s { background-position: -128px 0; }
                .ui-icon-carat-2-e-w { background-position: -144px 0; }
                .ui-icon-triangle-1-n { background-position: 0 -16px; }
                .ui-icon-triangle-1-ne { background-position: -16px -16px; }
                .ui-icon-triangle-1-e { background-position: -32px -16px; }
                .ui-icon-triangle-1-se { background-position: -48px -16px; }
                .ui-icon-triangle-1-s { background-position: -64px -16px; }
                .ui-icon-triangle-1-sw { background-position: -80px -16px; }
                .ui-icon-triangle-1-w { background-position: -96px -16px; }
                .ui-icon-triangle-1-nw { background-position: -112px -16px; }
                .ui-icon-triangle-2-n-s { background-position: -128px -16px; }
                .ui-icon-triangle-2-e-w { background-position: -144px -16px; }
                .ui-icon-arrow-1-n { background-position: 0 -32px; }
                .ui-icon-arrow-1-ne { background-position: -16px -32px; }
                .ui-icon-arrow-1-e { background-position: -32px -32px; }
                .ui-icon-arrow-1-se { background-position: -48px -32px; }
                .ui-icon-arrow-1-s { background-position: -64px -32px; }
                .ui-icon-arrow-1-sw { background-position: -80px -32px; }
                .ui-icon-arrow-1-w { background-position: -96px -32px; }
                .ui-icon-arrow-1-nw { background-position: -112px -32px; }
                .ui-icon-arrow-2-n-s { background-position: -128px -32px; }
                .ui-icon-arrow-2-ne-sw { background-position: -144px -32px; }
                .ui-icon-arrow-2-e-w { background-position: -160px -32px; }
                .ui-icon-arrow-2-se-nw { background-position: -176px -32px; }
                .ui-icon-arrowstop-1-n { background-position: -192px -32px; }
                .ui-icon-arrowstop-1-e { background-position: -208px -32px; }
                .ui-icon-arrowstop-1-s { background-position: -224px -32px; }
                .ui-icon-arrowstop-1-w { background-position: -240px -32px; }
                .ui-icon-arrowthick-1-n { background-position: 0 -48px; }
                .ui-icon-arrowthick-1-ne { background-position: -16px -48px; }
                .ui-icon-arrowthick-1-e { background-position: -32px -48px; }
                .ui-icon-arrowthick-1-se { background-position: -48px -48px; }
                .ui-icon-arrowthick-1-s { background-position: -64px -48px; }
                .ui-icon-arrowthick-1-sw { background-position: -80px -48px; }
                .ui-icon-arrowthick-1-w { background-position: -96px -48px; }
                .ui-icon-arrowthick-1-nw { background-position: -112px -48px; }
                .ui-icon-arrowthick-2-n-s { background-position: -128px -48px; }
                .ui-icon-arrowthick-2-ne-sw { background-position: -144px -48px; }
                .ui-icon-arrowthick-2-e-w { background-position: -160px -48px; }
                .ui-icon-arrowthick-2-se-nw { background-position: -176px -48px; }
                .ui-icon-arrowthickstop-1-n { background-position: -192px -48px; }
                .ui-icon-arrowthickstop-1-e { background-position: -208px -48px; }
                .ui-icon-arrowthickstop-1-s { background-position: -224px -48px; }
                .ui-icon-arrowthickstop-1-w { background-position: -240px -48px; }
                .ui-icon-arrowreturnthick-1-w { background-position: 0 -64px; }
                .ui-icon-arrowreturnthick-1-n { background-position: -16px -64px; }
                .ui-icon-arrowreturnthick-1-e { background-position: -32px -64px; }
                .ui-icon-arrowreturnthick-1-s { background-position: -48px -64px; }
                .ui-icon-arrowreturn-1-w { background-position: -64px -64px; }
                .ui-icon-arrowreturn-1-n { background-position: -80px -64px; }
                .ui-icon-arrowreturn-1-e { background-position: -96px -64px; }
                .ui-icon-arrowreturn-1-s { background-position: -112px -64px; }
                .ui-icon-arrowrefresh-1-w { background-position: -128px -64px; }
                .ui-icon-arrowrefresh-1-n { background-position: -144px -64px; }
                .ui-icon-arrowrefresh-1-e { background-position: -160px -64px; }
                .ui-icon-arrowrefresh-1-s { background-position: -176px -64px; }
                .ui-icon-arrow-4 { background-position: 0 -80px; }
                .ui-icon-arrow-4-diag { background-position: -16px -80px; }
                .ui-icon-extlink { background-position: -32px -80px; }
                .ui-icon-newwin { background-position: -48px -80px; }
                .ui-icon-refresh { background-position: -64px -80px; }
                .ui-icon-shuffle { background-position: -80px -80px; }
                .ui-icon-transfer-e-w { background-position: -96px -80px; }
                .ui-icon-transferthick-e-w { background-position: -112px -80px; }
                .ui-icon-folder-collapsed { background-position: 0 -96px; }
                .ui-icon-folder-open { background-position: -16px -96px; }
                .ui-icon-document { background-position: -32px -96px; }
                .ui-icon-document-b { background-position: -48px -96px; }
                .ui-icon-note { background-position: -64px -96px; }
                .ui-icon-mail-closed { background-position: -80px -96px; }
                .ui-icon-mail-open { background-position: -96px -96px; }
                .ui-icon-suitcase { background-position: -112px -96px; }
                .ui-icon-comment { background-position: -128px -96px; }
                .ui-icon-person { background-position: -144px -96px; }
                .ui-icon-print { background-position: -160px -96px; }
                .ui-icon-trash { background-position: -176px -96px; }
                .ui-icon-locked { background-position: -192px -96px; }
                .ui-icon-unlocked { background-position: -208px -96px; }
                .ui-icon-bookmark { background-position: -224px -96px; }
                .ui-icon-tag { background-position: -240px -96px; }
                .ui-icon-home { background-position: 0 -112px; }
                .ui-icon-flag { background-position: -16px -112px; }
                .ui-icon-calendar { background-position: -32px -112px; }
                .ui-icon-cart { background-position: -48px -112px; }
                .ui-icon-pencil { background-position: -64px -112px; }
                .ui-icon-clock { background-position: -80px -112px; }
                .ui-icon-disk { background-position: -96px -112px; }
                .ui-icon-calculator { background-position: -112px -112px; }
                .ui-icon-zoomin { background-position: -128px -112px; }
                .ui-icon-zoomout { background-position: -144px -112px; }
                .ui-icon-search { background-position: -160px -112px; }
                .ui-icon-wrench { background-position: -176px -112px; }
                .ui-icon-gear { background-position: -192px -112px; }
                .ui-icon-heart { background-position: -208px -112px; }
                .ui-icon-star { background-position: -224px -112px; }
                .ui-icon-link { background-position: -240px -112px; }
                .ui-icon-cancel { background-position: 0 -128px; }
                .ui-icon-plus { background-position: -16px -128px; }
                .ui-icon-plusthick { background-position: -32px -128px; }
                .ui-icon-minus { background-position: -48px -128px; }
                .ui-icon-minusthick { background-position: -64px -128px; }
                .ui-icon-close { background-position: -80px -128px; }
                .ui-icon-closethick { background-position: -96px -128px; }
                .ui-icon-key { background-position: -112px -128px; }
                .ui-icon-lightbulb { background-position: -128px -128px; }
                .ui-icon-scissors { background-position: -144px -128px; }
                .ui-icon-clipboard { background-position: -160px -128px; }
                .ui-icon-copy { background-position: -176px -128px; }
                .ui-icon-contact { background-position: -192px -128px; }
                .ui-icon-image { background-position: -208px -128px; }
                .ui-icon-video { background-position: -224px -128px; }
                .ui-icon-script { background-position: -240px -128px; }
                .ui-icon-alert { background-position: 0 -144px; }
                .ui-icon-info { background-position: -16px -144px; }
                .ui-icon-notice { background-position: -32px -144px; }
                .ui-icon-help { background-position: -48px -144px; }
                .ui-icon-check { background-position: -64px -144px; }
                .ui-icon-bullet { background-position: -80px -144px; }
                .ui-icon-radio-on { background-position: -96px -144px; }
                .ui-icon-radio-off { background-position: -112px -144px; }
                .ui-icon-pin-w { background-position: -128px -144px; }
                .ui-icon-pin-s { background-position: -144px -144px; }
                .ui-icon-play { background-position: 0 -160px; }
                .ui-icon-pause { background-position: -16px -160px; }
                .ui-icon-seek-next { background-position: -32px -160px; }
                .ui-icon-seek-prev { background-position: -48px -160px; }
                .ui-icon-seek-end { background-position: -64px -160px; }
                .ui-icon-seek-start { background-position: -80px -160px; }
                /* ui-icon-seek-first is deprecated, use ui-icon-seek-start instead */
                .ui-icon-seek-first { background-position: -80px -160px; }
                .ui-icon-stop { background-position: -96px -160px; }
                .ui-icon-eject { background-position: -112px -160px; }
                .ui-icon-volume-off { background-position: -128px -160px; }
                .ui-icon-volume-on { background-position: -144px -160px; }
                .ui-icon-power { background-position: 0 -176px; }
                .ui-icon-signal-diag { background-position: -16px -176px; }
                .ui-icon-signal { background-position: -32px -176px; }
                .ui-icon-battery-0 { background-position: -48px -176px; }
                .ui-icon-battery-1 { background-position: -64px -176px; }
                .ui-icon-battery-2 { background-position: -80px -176px; }
                .ui-icon-battery-3 { background-position: -96px -176px; }
                .ui-icon-circle-plus { background-position: 0 -192px; }
                .ui-icon-circle-minus { background-position: -16px -192px; }
                .ui-icon-circle-close { background-position: -32px -192px; }
                .ui-icon-circle-triangle-e { background-position: -48px -192px; }
                .ui-icon-circle-triangle-s { background-position: -64px -192px; }
                .ui-icon-circle-triangle-w { background-position: -80px -192px; }
                .ui-icon-circle-triangle-n { background-position: -96px -192px; }
                .ui-icon-circle-arrow-e { background-position: -112px -192px; }
                .ui-icon-circle-arrow-s { background-position: -128px -192px; }
                .ui-icon-circle-arrow-w { background-position: -144px -192px; }
                .ui-icon-circle-arrow-n { background-position: -160px -192px; }
                .ui-icon-circle-zoomin { background-position: -176px -192px; }
                .ui-icon-circle-zoomout { background-position: -192px -192px; }
                .ui-icon-circle-check { background-position: -208px -192px; }
                .ui-icon-circlesmall-plus { background-position: 0 -208px; }
                .ui-icon-circlesmall-minus { background-position: -16px -208px; }
                .ui-icon-circlesmall-close { background-position: -32px -208px; }
                .ui-icon-squaresmall-plus { background-position: -48px -208px; }
                .ui-icon-squaresmall-minus { background-position: -64px -208px; }
                .ui-icon-squaresmall-close { background-position: -80px -208px; }
                .ui-icon-grip-dotted-vertical { background-position: 0 -224px; }
                .ui-icon-grip-dotted-horizontal { background-position: -16px -224px; }
                .ui-icon-grip-solid-vertical { background-position: -32px -224px; }
                .ui-icon-grip-solid-horizontal { background-position: -48px -224px; }
                .ui-icon-gripsmall-diagonal-se { background-position: -64px -224px; }
                .ui-icon-grip-diagonal-se { background-position: -80px -224px; }
                
                
                /* Misc visuals
                ----------------------------------*/
                
                /* Corner radius */
                .ui-corner-all,
                .ui-corner-top,
                .ui-corner-left,
                .ui-corner-tl {
                	border-top-left-radius: 4px/*{cornerRadius}*/;
                }
                .ui-corner-all,
                .ui-corner-top,
                .ui-corner-right,
                .ui-corner-tr {
                	border-top-right-radius: 4px/*{cornerRadius}*/;
                }
                .ui-corner-all,
                .ui-corner-bottom,
                .ui-corner-left,
                .ui-corner-bl {
                	border-bottom-left-radius: 4px/*{cornerRadius}*/;
                }
                .ui-corner-all,
                .ui-corner-bottom,
                .ui-corner-right,
                .ui-corner-br {
                	border-bottom-right-radius: 4px/*{cornerRadius}*/;
                }
                
                /* Overlays */
                .ui-widget-overlay {
                	background: #aaaaaa/*{bgColorOverlay}*/ url(images/ui-bg_flat_0_aaaaaa_40x100.png)/*{bgImgUrlOverlay}*/ 50%/*{bgOverlayXPos}*/ 50%/*{bgOverlayYPos}*/ repeat-x/*{bgOverlayRepeat}*/;
                	opacity: .3/*{opacityOverlay}*/;
                	filter: Alpha(Opacity=30)/*{opacityFilterOverlay}*/;
                }
                .ui-widget-shadow {
                	margin: -8px/*{offsetTopShadow}*/ 0 0 -8px/*{offsetLeftShadow}*/;
                	padding: 8px/*{thicknessShadow}*/;
                	background: #aaaaaa/*{bgColorShadow}*/ url(images/ui-bg_flat_0_aaaaaa_40x100.png)/*{bgImgUrlShadow}*/ 50%/*{bgShadowXPos}*/ 50%/*{bgShadowYPos}*/ repeat-x/*{bgShadowRepeat}*/;
                	opacity: .3/*{opacityShadow}*/;
                	filter: Alpha(Opacity=30)/*{opacityFilterShadow}*/;
                	border-radius: 8px/*{cornerRadiusShadow}*/;
                }
                
                .jstree-node,.jstree-children,.jstree-container-ul{display:block;margin:0;padding:0;list-style-type:none;list-style-image:none}.jstree-node{white-space:nowrap}.jstree-anchor{display:inline-block;color:#000;white-space:nowrap;padding:0 4px 0 1px;margin:0;vertical-align:top}.jstree-anchor:focus{outline:0}.jstree-anchor,.jstree-anchor:link,.jstree-anchor:visited,.jstree-anchor:hover,.jstree-anchor:active{text-decoration:none;color:inherit}.jstree-icon{display:inline-block;text-decoration:none;margin:0;padding:0;vertical-align:top;text-align:center}.jstree-icon:empty{display:inline-block;text-decoration:none;margin:0;padding:0;vertical-align:top;text-align:center}.jstree-ocl{cursor:pointer}.jstree .jstree-open>.jstree-children{display:block}.jstree .jstree-closed>.jstree-children,.jstree .jstree-leaf>.jstree-children{display:none}.jstree-anchor>.jstree-themeicon{margin-right:2px}.jstree-no-icons .jstree-themeicon,.jstree-anchor>.jstree-themeicon-hidden{display:none}.jstree-rtl .jstree-anchor{padding:0 1px 0 4px}.jstree-rtl .jstree-anchor>.jstree-themeicon{margin-left:2px;margin-right:0}.jstree-rtl .jstree-node{margin-left:0}.jstree-rtl .jstree-container-ul>.jstree-node{margin-right:0}.jstree-wholerow-ul{position:relative;display:inline-block;min-width:100%}.jstree-wholerow-ul .jstree-anchor,.jstree-wholerow-ul .jstree-icon{position:relative}.jstree-wholerow-ul .jstree-wholerow{width:100%;cursor:pointer;position:absolute;left:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.vakata-context{display:none}.vakata-context,.vakata-context ul{margin:0;padding:2px;position:absolute;background:#f5f5f5;border:1px solid #979797;-moz-box-shadow:5px 5px 4px -4px #666;-webkit-box-shadow:2px 2px 2px #999;box-shadow:2px 2px 2px #999}.vakata-context ul{list-style:none;left:100%;margin-top:-2.7em;margin-left:-4px}.vakata-context .vakata-context-right ul{left:auto;right:100%;margin-left:auto;margin-right:-4px}.vakata-context li{list-style:none;display:inline}.vakata-context li>a{display:block;padding:0 2em;text-decoration:none;width:auto;color:#000;white-space:nowrap;line-height:2.4em;-moz-text-shadow:1px 1px 0 #fff;-webkit-text-shadow:1px 1px 0 #fff;text-shadow:1px 1px 0 #fff;-moz-border-radius:1px;-webkit-border-radius:1px;border-radius:1px}.vakata-context li>a:hover{position:relative;background-color:#e8eff7;-moz-box-shadow:0 0 2px #0a6aa1;-webkit-box-shadow:0 0 2px #0a6aa1;box-shadow:0 0 2px #0a6aa1}.vakata-context li>a.vakata-context-parent{background-image:url(data:image/gif;base64,R0lGODlhCwAHAIAAACgoKP///yH5BAEAAAEALAAAAAALAAcAAAIORI4JlrqN1oMSnmmZDQUAOw==);background-position:right center;background-repeat:no-repeat}.vakata-context li>a:focus{outline:0}.vakata-context .vakata-context-hover>a{position:relative;background-color:#e8eff7;-moz-box-shadow:0 0 2px #0a6aa1;-webkit-box-shadow:0 0 2px #0a6aa1;box-shadow:0 0 2px #0a6aa1}.vakata-context .vakata-context-separator a,.vakata-context .vakata-context-separator a:hover{background:#fff;border:0;border-top:1px solid #e2e3e3;height:1px;min-height:1px;max-height:1px;padding:0;margin:0 0 0 2.4em;border-left:1px solid #e0e0e0;-moz-text-shadow:0 0 0 transparent;-webkit-text-shadow:0 0 0 transparent;text-shadow:0 0 0 transparent;-moz-box-shadow:0 0 0 transparent;-webkit-box-shadow:0 0 0 transparent;box-shadow:0 0 0 transparent;-moz-border-radius:0;-webkit-border-radius:0;border-radius:0}.vakata-context .vakata-contextmenu-disabled a,.vakata-context .vakata-contextmenu-disabled a:hover{color:silver;background-color:transparent;border:0;box-shadow:0 0 0}.vakata-context li>a>i{text-decoration:none;display:inline-block;width:2.4em;height:2.4em;background:0 0;margin:0 0 0 -2em;vertical-align:top;text-align:center;line-height:2.4em}.vakata-context li>a>i:empty{width:2.4em;line-height:2.4em}.vakata-context li>a .vakata-contextmenu-sep{display:inline-block;width:1px;height:2.4em;background:#fff;margin:0 .5em 0 0;border-left:1px solid #e2e3e3}.vakata-context .vakata-contextmenu-shortcut{font-size:.8em;color:silver;opacity:.5;display:none}.vakata-context-rtl ul{left:auto;right:100%;margin-left:auto;margin-right:-4px}.vakata-context-rtl li>a.vakata-context-parent{background-image:url(data:image/gif;base64,R0lGODlhCwAHAIAAACgoKP///yH5BAEAAAEALAAAAAALAAcAAAINjI+AC7rWHIsPtmoxLAA7);background-position:left center;background-repeat:no-repeat}.vakata-context-rtl .vakata-context-separator>a{margin:0 2.4em 0 0;border-left:0;border-right:1px solid #e2e3e3}.vakata-context-rtl .vakata-context-left ul{right:auto;left:100%;margin-left:-4px;margin-right:auto}.vakata-context-rtl li>a>i{margin:0 -2em 0 0}.vakata-context-rtl li>a .vakata-contextmenu-sep{margin:0 0 0 .5em;border-left-color:#fff;background:#e2e3e3}#jstree-marker{position:absolute;top:0;left:0;margin:0;padding:0;border-right:0;border-top:5px solid transparent;border-bottom:5px solid transparent;border-left:5px solid;width:0;height:0;font-size:0;line-height:0}#jstree-dnd{line-height:16px;margin:0;padding:4px}#jstree-dnd .jstree-icon,#jstree-dnd .jstree-copy{display:inline-block;text-decoration:none;margin:0 2px 0 0;padding:0;width:16px;height:16px}#jstree-dnd .jstree-ok{background:green}#jstree-dnd .jstree-er{background:red}#jstree-dnd .jstree-copy{margin:0 2px}.jstree-default .jstree-node,.jstree-default .jstree-icon{background-repeat:no-repeat;background-color:transparent}.jstree-default .jstree-anchor,.jstree-default .jstree-wholerow{transition:background-color .15s,box-shadow .15s}.jstree-default .jstree-hovered{background:#e7f4f9;border-radius:2px;box-shadow:inset 0 0 1px #ccc}.jstree-default .jstree-clicked{background:#beebff;border-radius:2px;box-shadow:inset 0 0 1px #999}.jstree-default .jstree-no-icons .jstree-anchor>.jstree-themeicon{display:none}.jstree-default .jstree-disabled{background:0 0;color:#666}.jstree-default .jstree-disabled.jstree-hovered{background:0 0;box-shadow:none}.jstree-default .jstree-disabled.jstree-clicked{background:#efefef}.jstree-default .jstree-disabled>.jstree-icon{opacity:.8;filter:url("data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\'><filter id=\'jstree-grayscale\'><feColorMatrix type=\'matrix\' values=\'0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0\'/></filter></svg>#jstree-grayscale");filter:gray;-webkit-filter:grayscale(100%)}.jstree-default .jstree-search{font-style:italic;color:#8b0000;font-weight:700}.jstree-default .jstree-no-checkboxes .jstree-checkbox{display:none!important}.jstree-default.jstree-checkbox-no-clicked .jstree-clicked{background:0 0;box-shadow:none}.jstree-default.jstree-checkbox-no-clicked .jstree-clicked.jstree-hovered{background:#e7f4f9}.jstree-default.jstree-checkbox-no-clicked>.jstree-wholerow-ul .jstree-wholerow-clicked{background:0 0}.jstree-default.jstree-checkbox-no-clicked>.jstree-wholerow-ul .jstree-wholerow-clicked.jstree-wholerow-hovered{background:#e7f4f9}#jstree-dnd.jstree-default .jstree-ok,#jstree-dnd.jstree-default .jstree-er{background-image:url(32px.png);background-repeat:no-repeat;background-color:transparent}#jstree-dnd.jstree-default i{background:0 0;width:16px;height:16px}#jstree-dnd.jstree-default .jstree-ok{background-position:-9px -71px}#jstree-dnd.jstree-default .jstree-er{background-position:-39px -71px}.jstree-default>.jstree-striped{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAkCAMAAAB/qqA+AAAABlBMVEUAAAAAAAClZ7nPAAAAAnRSTlMNAMM9s3UAAAAXSURBVHjajcEBAQAAAIKg/H/aCQZ70AUBjAATb6YPDgAAAABJRU5ErkJggg==) left top repeat}.jstree-default>.jstree-wholerow-ul .jstree-hovered,.jstree-default>.jstree-wholerow-ul .jstree-clicked{background:0 0;box-shadow:none;border-radius:0}.jstree-default .jstree-wholerow{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}.jstree-default .jstree-wholerow-hovered{background:#e7f4f9}.jstree-default .jstree-wholerow-clicked{background:#beebff;background:-moz-linear-gradient(top,#beebff 0,#a8e4ff 100%);background:-webkit-gradient(linear,left top,left bottom,color-stop(0,#beebff),color-stop(100%,#a8e4ff));background:-webkit-linear-gradient(top,#beebff 0,#a8e4ff 100%);background:-o-linear-gradient(top,#beebff 0,#a8e4ff 100%);background:-ms-linear-gradient(top,#beebff 0,#a8e4ff 100%);background:linear-gradient(to bottom,#beebff 0,#a8e4ff 100%)}.jstree-default .jstree-node{min-height:24px;line-height:24px;margin-left:24px;min-width:24px}.jstree-default .jstree-anchor{line-height:24px;height:24px}.jstree-default .jstree-icon{width:24px;height:24px;line-height:24px}.jstree-default .jstree-icon:empty{width:24px;height:24px;line-height:24px}.jstree-default.jstree-rtl .jstree-node{margin-right:24px}.jstree-default .jstree-wholerow{height:24px}.jstree-default .jstree-node,.jstree-default .jstree-icon{background-image:url(32px.png)}.jstree-default .jstree-node{background-position:-292px -4px;background-repeat:repeat-y}.jstree-default .jstree-last{background:0 0}.jstree-default .jstree-open>.jstree-ocl{background-position:-132px -4px}.jstree-default .jstree-closed>.jstree-ocl{background-position:-100px -4px}.jstree-default .jstree-leaf>.jstree-ocl{background-position:-68px -4px}.jstree-default .jstree-anchor>.jstree-themeicon{background-position:-260px -4px}.jstree-default>.jstree-no-dots .jstree-node,.jstree-default>.jstree-no-dots .jstree-leaf>.jstree-ocl{background:0 0}.jstree-default>.jstree-no-dots .jstree-open>.jstree-ocl{background-position:-36px -4px}.jstree-default>.jstree-no-dots .jstree-closed>.jstree-ocl{background-position:-4px -4px}.jstree-default .jstree-disabled{background:0 0}.jstree-default .jstree-disabled.jstree-hovered{background:0 0}.jstree-default .jstree-disabled.jstree-clicked{background:#efefef}.jstree-default .jstree-checkbox{background-position:-164px -4px}.jstree-default .jstree-checkbox:hover{background-position:-164px -36px}.jstree-default .jstree-clicked>.jstree-checkbox{background-position:-228px -4px}.jstree-default .jstree-clicked>.jstree-checkbox:hover{background-position:-228px -36px}.jstree-default .jstree-anchor>.jstree-undetermined{background-position:-196px -4px}.jstree-default .jstree-anchor>.jstree-undetermined:hover{background-position:-196px -36px}.jstree-default>.jstree-striped{background-size:auto 48px}.jstree-default.jstree-rtl .jstree-node{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAACAQMAAAB49I5GAAAABlBMVEUAAAAdHRvEkCwcAAAAAXRSTlMAQObYZgAAAAxJREFUCNdjAAMOBgAAGAAJMwQHdQAAAABJRU5ErkJggg==);background-position:100% 1px;background-repeat:repeat-y}.jstree-default.jstree-rtl .jstree-last{background:0 0}.jstree-default.jstree-rtl .jstree-open>.jstree-ocl{background-position:-132px -36px}.jstree-default.jstree-rtl .jstree-closed>.jstree-ocl{background-position:-100px -36px}.jstree-default.jstree-rtl .jstree-leaf>.jstree-ocl{background-position:-68px -36px}.jstree-default.jstree-rtl>.jstree-no-dots .jstree-node,.jstree-default.jstree-rtl>.jstree-no-dots .jstree-leaf>.jstree-ocl{background:0 0}.jstree-default.jstree-rtl>.jstree-no-dots .jstree-open>.jstree-ocl{background-position:-36px -36px}.jstree-default.jstree-rtl>.jstree-no-dots .jstree-closed>.jstree-ocl{background-position:-4px -36px}.jstree-default .jstree-themeicon-custom{background-color:transparent;background-image:none}.jstree-default>.jstree-container-ul .jstree-loading>.jstree-ocl{background:url(throbber.gif) center center no-repeat}.jstree-default.jstree-rtl .jstree-node{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAACAQMAAAB49I5GAAAABlBMVEUAAAAdHRvEkCwcAAAAAXRSTlMAQObYZgAAAAxJREFUCNdjAAMOBgAAGAAJMwQHdQAAAABJRU5ErkJggg==)}.jstree-default.jstree-rtl .jstree-last{background:0 0}.jstree-default-small .jstree-node{min-height:18px;line-height:18px;margin-left:18px;min-width:18px}.jstree-default-small .jstree-anchor{line-height:18px;height:18px}.jstree-default-small .jstree-icon{width:18px;height:18px;line-height:18px}.jstree-default-small .jstree-icon:empty{width:18px;height:18px;line-height:18px}.jstree-default-small.jstree-rtl .jstree-node{margin-right:18px}.jstree-default-small .jstree-wholerow{height:18px}.jstree-default-small .jstree-node,.jstree-default-small .jstree-icon{background-image:url(32px.png)}.jstree-default-small .jstree-node{background-position:-295px -7px;background-repeat:repeat-y}.jstree-default-small .jstree-last{background:0 0}.jstree-default-small .jstree-open>.jstree-ocl{background-position:-135px -7px}.jstree-default-small .jstree-closed>.jstree-ocl{background-position:-103px -7px}.jstree-default-small .jstree-leaf>.jstree-ocl{background-position:-71px -7px}.jstree-default-small .jstree-anchor>.jstree-themeicon{background-position:-263px -7px}.jstree-default-small>.jstree-no-dots .jstree-node,.jstree-default-small>.jstree-no-dots .jstree-leaf>.jstree-ocl{background:0 0}.jstree-default-small>.jstree-no-dots .jstree-open>.jstree-ocl{background-position:-39px -7px}.jstree-default-small>.jstree-no-dots .jstree-closed>.jstree-ocl{background-position:-7px -7px}.jstree-default-small .jstree-disabled{background:0 0}.jstree-default-small .jstree-disabled.jstree-hovered{background:0 0}.jstree-default-small .jstree-disabled.jstree-clicked{background:#efefef}.jstree-default-small .jstree-checkbox{background-position:-167px -7px}.jstree-default-small .jstree-checkbox:hover{background-position:-167px -39px}.jstree-default-small .jstree-clicked>.jstree-checkbox{background-position:-231px -7px}.jstree-default-small .jstree-clicked>.jstree-checkbox:hover{background-position:-231px -39px}.jstree-default-small .jstree-anchor>.jstree-undetermined{background-position:-199px -7px}.jstree-default-small .jstree-anchor>.jstree-undetermined:hover{background-position:-199px -39px}.jstree-default-small>.jstree-striped{background-size:auto 36px}.jstree-default-small.jstree-rtl .jstree-node{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAACAQMAAAB49I5GAAAABlBMVEUAAAAdHRvEkCwcAAAAAXRSTlMAQObYZgAAAAxJREFUCNdjAAMOBgAAGAAJMwQHdQAAAABJRU5ErkJggg==);background-position:100% 1px;background-repeat:repeat-y}.jstree-default-small.jstree-rtl .jstree-last{background:0 0}.jstree-default-small.jstree-rtl .jstree-open>.jstree-ocl{background-position:-135px -39px}.jstree-default-small.jstree-rtl .jstree-closed>.jstree-ocl{background-position:-103px -39px}.jstree-default-small.jstree-rtl .jstree-leaf>.jstree-ocl{background-position:-71px -39px}.jstree-default-small.jstree-rtl>.jstree-no-dots .jstree-node,.jstree-default-small.jstree-rtl>.jstree-no-dots .jstree-leaf>.jstree-ocl{background:0 0}.jstree-default-small.jstree-rtl>.jstree-no-dots .jstree-open>.jstree-ocl{background-position:-39px -39px}.jstree-default-small.jstree-rtl>.jstree-no-dots .jstree-closed>.jstree-ocl{background-position:-7px -39px}.jstree-default-small .jstree-themeicon-custom{background-color:transparent;background-image:none}.jstree-default-small>.jstree-container-ul .jstree-loading>.jstree-ocl{background:url(throbber.gif) center center no-repeat}.jstree-default-small.jstree-rtl .jstree-node{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAACAQMAAABv1h6PAAAABlBMVEUAAAAdHRvEkCwcAAAAAXRSTlMAQObYZgAAAAxJREFUCNdjAAMHBgAAiABBI4gz9AAAAABJRU5ErkJggg==)}.jstree-default-small.jstree-rtl .jstree-last{background:0 0}.jstree-default-large .jstree-node{min-height:32px;line-height:32px;margin-left:32px;min-width:32px}.jstree-default-large .jstree-anchor{line-height:32px;height:32px}.jstree-default-large .jstree-icon{width:32px;height:32px;line-height:32px}.jstree-default-large .jstree-icon:empty{width:32px;height:32px;line-height:32px}.jstree-default-large.jstree-rtl .jstree-node{margin-right:32px}.jstree-default-large .jstree-wholerow{height:32px}.jstree-default-large .jstree-node,.jstree-default-large .jstree-icon{background-image:url(32px.png)}.jstree-default-large .jstree-node{background-position:-288px 0;background-repeat:repeat-y}.jstree-default-large .jstree-last{background:0 0}.jstree-default-large .jstree-open>.jstree-ocl{background-position:-128px 0}.jstree-default-large .jstree-closed>.jstree-ocl{background-position:-96px 0}.jstree-default-large .jstree-leaf>.jstree-ocl{background-position:-64px 0}.jstree-default-large .jstree-anchor>.jstree-themeicon{background-position:-256px 0}.jstree-default-large>.jstree-no-dots .jstree-node,.jstree-default-large>.jstree-no-dots .jstree-leaf>.jstree-ocl{background:0 0}.jstree-default-large>.jstree-no-dots .jstree-open>.jstree-ocl{background-position:-32px 0}.jstree-default-large>.jstree-no-dots .jstree-closed>.jstree-ocl{background-position:0 0}.jstree-default-large .jstree-disabled{background:0 0}.jstree-default-large .jstree-disabled.jstree-hovered{background:0 0}.jstree-default-large .jstree-disabled.jstree-clicked{background:#efefef}.jstree-default-large .jstree-checkbox{background-position:-160px 0}.jstree-default-large .jstree-checkbox:hover{background-position:-160px -32px}.jstree-default-large .jstree-clicked>.jstree-checkbox{background-position:-224px 0}.jstree-default-large .jstree-clicked>.jstree-checkbox:hover{background-position:-224px -32px}.jstree-default-large .jstree-anchor>.jstree-undetermined{background-position:-192px 0}.jstree-default-large .jstree-anchor>.jstree-undetermined:hover{background-position:-192px -32px}.jstree-default-large>.jstree-striped{background-size:auto 64px}.jstree-default-large.jstree-rtl .jstree-node{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAACAQMAAAB49I5GAAAABlBMVEUAAAAdHRvEkCwcAAAAAXRSTlMAQObYZgAAAAxJREFUCNdjAAMOBgAAGAAJMwQHdQAAAABJRU5ErkJggg==);background-position:100% 1px;background-repeat:repeat-y}.jstree-default-large.jstree-rtl .jstree-last{background:0 0}.jstree-default-large.jstree-rtl .jstree-open>.jstree-ocl{background-position:-128px -32px}.jstree-default-large.jstree-rtl .jstree-closed>.jstree-ocl{background-position:-96px -32px}.jstree-default-large.jstree-rtl .jstree-leaf>.jstree-ocl{background-position:-64px -32px}.jstree-default-large.jstree-rtl>.jstree-no-dots .jstree-node,.jstree-default-large.jstree-rtl>.jstree-no-dots .jstree-leaf>.jstree-ocl{background:0 0}.jstree-default-large.jstree-rtl>.jstree-no-dots .jstree-open>.jstree-ocl{background-position:-32px -32px}.jstree-default-large.jstree-rtl>.jstree-no-dots .jstree-closed>.jstree-ocl{background-position:0 -32px}.jstree-default-large .jstree-themeicon-custom{background-color:transparent;background-image:none}.jstree-default-large>.jstree-container-ul .jstree-loading>.jstree-ocl{background:url(throbber.gif) center center no-repeat}.jstree-default-large.jstree-rtl .jstree-node{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAACAQMAAAAD0EyKAAAABlBMVEUAAAAdHRvEkCwcAAAAAXRSTlMAQObYZgAAAAxJREFUCNdjgIIGBgABCgCBvVLXcAAAAABJRU5ErkJggg==)}.jstree-default-large.jstree-rtl .jstree-last{background:0 0}@media (max-width:768px){.jstree-default-responsive .jstree-icon{background-image:url(40px.png)}.jstree-default-responsive .jstree-node,.jstree-default-responsive .jstree-leaf>.jstree-ocl{background:0 0}.jstree-default-responsive .jstree-node{min-height:40px;line-height:40px;margin-left:40px;min-width:40px;white-space:nowrap}.jstree-default-responsive .jstree-anchor{line-height:40px;height:40px}.jstree-default-responsive .jstree-icon,.jstree-default-responsive .jstree-icon:empty{width:40px;height:40px;line-height:40px}.jstree-default-responsive>.jstree-container-ul>.jstree-node{margin-left:0}.jstree-default-responsive.jstree-rtl .jstree-node{margin-left:0;margin-right:40px}.jstree-default-responsive.jstree-rtl .jstree-container-ul>.jstree-node{margin-right:0}.jstree-default-responsive .jstree-ocl,.jstree-default-responsive .jstree-themeicon,.jstree-default-responsive .jstree-checkbox{background-size:120px 200px}.jstree-default-responsive .jstree-leaf>.jstree-ocl{background:0 0}.jstree-default-responsive .jstree-open>.jstree-ocl{background-position:0 0!important}.jstree-default-responsive .jstree-closed>.jstree-ocl{background-position:0 -40px!important}.jstree-default-responsive.jstree-rtl .jstree-closed>.jstree-ocl{background-position:-40px 0!important}.jstree-default-responsive .jstree-anchor>.jstree-themeicon{background-position:-40px -40px}.jstree-default-responsive .jstree-checkbox,.jstree-default-responsive .jstree-checkbox:hover{background-position:-40px -80px}.jstree-default-responsive .jstree-clicked>.jstree-checkbox,.jstree-default-responsive .jstree-clicked>.jstree-checkbox:hover{background-position:0 -80px}.jstree-default-responsive .jstree-anchor>.jstree-undetermined,.jstree-default-responsive .jstree-anchor>.jstree-undetermined:hover{background-position:0 -120px}.jstree-default-responsive .jstree-anchor{font-weight:700;font-size:1.1em;text-shadow:1px 1px #fff}.jstree-default-responsive>.jstree-striped{background:0 0}.jstree-default-responsive .jstree-wholerow{border-top:1px solid rgba(255,255,255,.7);border-bottom:1px solid rgba(64,64,64,.2);background:#ebebeb;height:40px}.jstree-default-responsive .jstree-wholerow-hovered{background:#e7f4f9}.jstree-default-responsive .jstree-wholerow-clicked{background:#beebff}.jstree-default-responsive .jstree-children .jstree-last>.jstree-wholerow{box-shadow:inset 0 -6px 3px -5px #666}.jstree-default-responsive .jstree-children .jstree-open>.jstree-wholerow{box-shadow:inset 0 6px 3px -5px #666;border-top:0}.jstree-default-responsive .jstree-children .jstree-open+.jstree-open{box-shadow:none}.jstree-default-responsive .jstree-node,.jstree-default-responsive .jstree-icon,.jstree-default-responsive .jstree-node>.jstree-ocl,.jstree-default-responsive .jstree-themeicon,.jstree-default-responsive .jstree-checkbox{background-image:url(40px.png);background-size:120px 200px}.jstree-default-responsive .jstree-node{background-position:-80px 0;background-repeat:repeat-y}.jstree-default-responsive .jstree-last{background:0 0}.jstree-default-responsive .jstree-leaf>.jstree-ocl{background-position:-40px -120px}.jstree-default-responsive .jstree-last>.jstree-ocl{background-position:-40px -160px}.jstree-default-responsive .jstree-themeicon-custom{background-color:transparent;background-image:none}}.jstree-default>.jstree-container-ul>.jstree-node{margin-left:0;margin-right:0}
                /**
                 * Handsontable 0.10.5
                 * Handsontable is a simple jQuery plugin for editable tables with basic copy-paste compatibility with Excel and Google Docs
                 *
                 * Copyright 2012, Marcin Warpechowski
                 * Licensed under the MIT license.
                 * http://handsontable.com/
                 *
                 * Date: Mon Mar 31 2014 14:19:47 GMT+0200 (CEST)
                 */
                
                .handsontable {
                  position: relative;
                }
                
                .handsontable.htAutoColumnSize {
                  visibility: hidden;
                  left: 0;
                  position: absolute;
                  top: 0;
                }
                
                .handsontable table,
                .handsontable tbody,
                .handsontable thead,
                .handsontable td,
                .handsontable th,
                .handsontable div {
                  box-sizing: content-box;
                  -webkit-box-sizing: content-box;
                  -moz-box-sizing: content-box;
                }
                
                .handsontable table.htCore {
                  border-collapse: separate;
                  /*it must be separate, otherwise there are offset miscalculations in WebKit: http://stackoverflow.com/questions/2655987/border-collapse-differences-in-ff-and-webkit*/
                  position: relative;
                  /*this actually only changes appearance of user selection - does not make text unselectable
                  -webkit-user-select: none;
                  -khtml-user-select: none;
                  -moz-user-select: none;
                  -o-user-select: none;
                  -ms-user-select: none;
                  /*user-select: none; /*no browser supports unprefixed version*/
                  border-spacing: 0;
                  margin: 0;
                  border-width: 0;
                  table-layout: fixed;
                  width: 0;
                  outline-width: 0;
                  /* reset bootstrap table style. for more info see: https://github.com/warpech/jquery-handsontable/issues/224 */
                  max-width: none;
                  max-height: none;
                }
                
                .handsontable col {
                  width: 50px;
                }
                
                .handsontable col.rowHeader {
                  width: 50px;
                }
                
                .handsontable th,
                .handsontable td {
                  border-right: 1px solid #CCC;
                  border-bottom: 1px solid #CCC;
                  height: 22px;
                  empty-cells: show;
                  line-height: 21px;
                  padding: 0 4px 0 4px;
                  /* top, bottom padding different than 0 is handled poorly by FF with HTML5 doctype */
                  background-color: #FFF;
                  vertical-align: top;
                  overflow: hidden;
                  outline-width: 0;
                  white-space: pre-line;
                  /* preserve new line character in cell */
                }
                
                .handsontable td.htInvalid {
                  -webkit-transition: background 0.75s ease;
                  transition: background 0.75s ease;
                  background-color: #ff4c42;
                }
                
                .handsontable th:last-child {
                  /*Foundation framework fix*/
                  border-right: 1px solid #CCC;
                  border-bottom: 1px solid #CCC;
                }
                
                .handsontable tr:first-child th.htNoFrame,
                .handsontable th:first-child.htNoFrame,
                .handsontable th.htNoFrame {
                  border-left-width: 0;
                  background-color: white;
                  border-color: #FFF;
                }
                
                .handsontable th:first-child,
                .handsontable td:first-child,
                .handsontable .htNoFrame + th,
                .handsontable .htNoFrame + td {
                  border-left: 1px solid #CCC;
                }
                
                .handsontable tr:first-child th,
                .handsontable tr:first-child td {
                  border-top: 1px solid #CCC;
                }
                
                .handsontable thead tr:last-child th {
                  border-bottom-width: 0;
                }
                
                .handsontable thead tr.lastChild th {
                  border-bottom-width: 0;
                }
                
                .handsontable th {
                  background-color: #EEE;
                  color: #222;
                  text-align: center;
                  font-weight: normal;
                  white-space: nowrap;
                }
                
                .handsontable thead th {
                  padding: 0;
                }
                
                .handsontable th.active {
                  background-color: #CCC;
                }
                
                .handsontable thead th .relative {
                  position: relative;
                  padding: 2px 4px;
                }
                
                /* plugins */
                
                .handsontable .manualColumnMover {
                  position: absolute;
                  left: 0;
                  top: 0;
                  background-color: transparent;
                  width: 5px;
                  height: 25px;
                  z-index: 999;
                  cursor: move;
                }
                
                .handsontable th .manualColumnMover:hover,
                .handsontable th .manualColumnMover.active {
                  background-color: #88F;
                }
                
                .handsontable .manualColumnResizer {
                  position: absolute;
                  top: 0;
                  cursor: col-resize;
                }
                
                .handsontable .manualColumnResizerHandle {
                  background-color: transparent;
                  width: 5px;
                  height: 25px;
                }
                
                .handsontable .manualColumnResizer:hover .manualColumnResizerHandle,
                .handsontable .manualColumnResizer.active .manualColumnResizerHandle {
                  background-color: #AAB;
                }
                
                .handsontable .manualColumnResizerLine {
                  position: absolute;
                  right: 0;
                  top: 0;
                  background-color: #AAB;
                  display: none;
                  width: 0;
                  border-right: 1px dashed #777;
                }
                
                .handsontable .manualColumnResizer.active .manualColumnResizerLine {
                  display: block;
                }
                
                .handsontable .columnSorting:hover {
                  text-decoration: underline;
                  cursor: pointer;
                }
                
                /* border line */
                
                .handsontable .wtBorder {
                  position: absolute;
                  font-size: 0;
                }
                
                .handsontable td.area {
                  background-color: #EEF4FF;
                }
                
                /* fill handle */
                
                .handsontable .wtBorder.corner {
                  font-size: 0;
                  cursor: crosshair;
                }
                
                .handsontable .htBorder.htFillBorder {
                  background: red;
                  width: 1px;
                  height: 1px;
                }
                
                .handsontableInput {
                  border: 2px solid #5292F7;
                  outline-width: 0;
                  margin: 0;
                  padding: 1px 4px 0 2px;
                  font-family: Arial, Helvetica, sans-serif;
                  /*repeat from .handsontable (inherit doesn't work with IE<8) */
                  line-height: 1.3em;
                  /*repeat from .handsontable (inherit doesn't work with IE<8) */
                  font-size: inherit;
                  -webkit-box-shadow: 1px 2px 5px rgba(0, 0, 0, 0.4);
                  box-shadow: 1px 2px 5px rgba(0, 0, 0, 0.4);
                  resize: none;
                  /*below are needed to overwrite stuff added by jQuery UI Bootstrap theme*/
                  display: inline-block;
                  color: #000;
                  border-radius: 0;
                  background-color: #FFF;
                  /*overwrite styles potentionally made by a framework*/
                }
                
                .handsontableInputHolder {
                  position: absolute;
                  top: 0;
                  left: 0;
                  z-index: 100;
                }
                
                .htSelectEditor {
                  -webkit-appearance: menulist-button !important;
                  position: absolute;
                }
                
                /*
                TextRenderer readOnly cell
                */
                
                .handsontable .htDimmed {
                  color: #777;
                }
                
                /*
                TextRenderer placeholder value
                */
                
                .handsontable .htPlaceholder {
                  color: #999;
                }
                
                /*
                AutocompleteRenderer down arrow
                */
                
                .handsontable .htAutocompleteArrow {
                  float: right;
                  font-size: 10px;
                  color: #EEE;
                  cursor: default;
                  width: 16px;
                  text-align: center;
                }
                
                .handsontable td .htAutocompleteArrow:hover {
                  color: #777;
                }
                
                /*
                CheckboxRenderer
                */
                
                .handsontable .htCheckboxRendererInput.noValue {
                  opacity: 0.5;
                }
                
                /*
                NumericRenderer
                */
                
                .handsontable .htNumeric {
                  text-align: right;
                }
                
                /*context menu rules*/
                
                ul.context-menu-list {
                  color: black;
                }
                
                ul.context-menu-list li {
                  margin-bottom: 0;
                  /*Foundation framework fix*/
                }
                
                /**
                 * dragdealer
                 */
                
                .handsontable .dragdealer {
                  position: relative;
                  width: 9px;
                  height: 9px;
                  background: #F8F8F8;
                  border: 1px solid #DDD;
                }
                
                .handsontable .dragdealer .handle {
                  position: absolute;
                  width: 9px;
                  height: 9px;
                  background: #C5C5C5;
                }
                
                .handsontable .dragdealer .disabled {
                  background: #898989;
                }
                
                /**
                 * Handsontable in Handsontable
                 */
                
                .handsontable .handsontable .wtHider {
                  padding: 0 0 5px 0;
                }
                
                .handsontable .handsontable table {
                  -webkit-box-shadow: 1px 2px 5px rgba(0, 0, 0, 0.4);
                  box-shadow: 1px 2px 5px rgba(0, 0, 0, 0.4);
                }
                
                /**
                 * Handsontable listbox theme
                 */
                
                .handsontable.listbox {
                  margin: 0;
                }
                
                .handsontable.listbox table {
                  border: 1px solid #ccc;
                  border-collapse: separate;
                  background: white;
                }
                
                .handsontable.listbox th,
                .handsontable.listbox tr:first-child th,
                .handsontable.listbox tr:last-child th,
                .handsontable.listbox tr:first-child td,
                .handsontable.listbox td {
                  border-width: 0;
                }
                
                .handsontable.listbox th,
                .handsontable.listbox td {
                  white-space: nowrap;
                  text-overflow: ellipsis;
                }
                
                .handsontable.listbox td.htDimmed {
                  cursor: default;
                  color: inherit;
                  font-style: inherit;
                }
                
                .handsontable.listbox .wtBorder {
                  visibility: hidden;
                }
                
                .handsontable.listbox tr td.current,
                .handsontable.listbox tr:hover td {
                  background: #eee;
                }
                
                .htContextMenu {
                  display: none;
                  position: absolute;
                }
                
                .htContextMenu table.htCore {
                  outline: 1px solid #bbb;
                }
                
                .htContextMenu .wtBorder {
                  visibility: hidden;
                }
                
                .htContextMenu table tbody tr td {
                  background: white;
                  border-width: 0;
                  padding: 4px 6px 0px 6px;
                  cursor: pointer;
                  overflow: hidden;
                  white-space: nowrap;
                  text-overflow: ellipsis;
                }
                
                .htContextMenu table tbody tr td:first-child {
                  border: 0;
                }
                
                .htContextMenu table tbody tr td.htDimmed{
                  font-style: normal;
                  color: #323232;
                }
                
                .htContextMenu table tbody tr td.current{
                  background: rgb(233, 233, 233);
                }
                
                .htContextMenu table tbody tr td.htSeparator {
                  border-top: 1px solid #bbb;
                  height: 0;
                  padding: 0;
                }
                
                .htContextMenu table tbody tr td.htDisabled {
                  color: #999;
                }
                
                .htContextMenu table tbody tr td.htDisabled:hover {
                  background: white;
                  color: #999;
                  cursor: default;
                }
                
                .handsontable td.htSearchResult {
                  background: #fcedd9;
                  color: #583707;
                }
                
                /*WalkontableDebugOverlay*/
                
                .wtDebugHidden {
                  display: none;
                }
                
                .wtDebugVisible {
                  display: block;
                  -webkit-animation-duration: 0.5s;
                  -webkit-animation-name: wtFadeInFromNone;
                  animation-duration: 0.5s;
                  animation-name: wtFadeInFromNone;
                }
                
                @keyframes wtFadeInFromNone {
                  0% {
                    display: none;
                    opacity: 0;
                  }
                
                  1% {
                    display: block;
                    opacity: 0;
                  }
                
                  100% {
                    display: block;
                    opacity: 1;
                  }
                }
                
                @-webkit-keyframes wtFadeInFromNone {
                  0% {
                    display: none;
                    opacity: 0;
                  }
                
                  1% {
                    display: block;
                    opacity: 0;
                  }
                
                  100% {
                    display: block;
                    opacity: 1;
                  }
                }
                /**
                 * default development theme for jQRangeSlider
                 * Using fam fam icon set from Mark James, http://www.famfamfam.com/lab/icons/silk/ (Creative Commons Attribution 2.5 License)
                 */
                
                .ui-rangeSlider{
                	height:22px;
                }
                
                .ui-rangeSlider .ui-rangeSlider-innerBar{
                	height:16px;
                	margin:3px 6px;
                	background:#DDD;
                }
                
                .ui-rangeSlider .ui-rangeSlider-handle{
                	width:6px;
                	height:22px;
                	background:#AAA;
                	background:rgba(100,100,100, 0.3);
                	cursor:col-resize;
                }
                
                .ui-rangeSlider .ui-rangeSlider-bar{
                	margin: 1px 0;
                	background:#CCC;
                	background:rgba(100,100,150, 0.2);
                	height:20px;
                	cursor:move;
                	cursor:grab;
                	cursor: -moz-grab;
                }
                
                .ui-rangeSlider .ui-rangeSlider-bar.ui-draggable-dragging{
                	cursor:	-moz-grabbing;
                	cursor:grabbing;
                }
                
                .ui-rangeSlider-arrow{
                	height:16px;
                	margin:2px 0;
                	width:16px;
                	background-repeat:no-repeat;
                }
                
                .ui-rangeSlider-arrow.ui-rangeSlider-leftArrow{
                	background-image: url('icons-classic/resultset_previous.png');
                	background-position:center left;
                }
                
                .ui-rangeSlider-arrow.ui-rangeSlider-rightArrow{
                	background-image: url('icons-classic/resultset_next.png');
                	background-position:center right;
                }
                
                .ui-rangeSlider-arrow-inner{
                	display: none;
                }
                
                .ui-rangeSlider-container{
                	height:22px;
                }
                
                .ui-rangeSlider-withArrows .ui-rangeSlider-container{
                	margin:0 11px;
                }
                
                .ui-rangeSlider-noArrow .ui-rangeSlider-container{
                	margin:0;
                }
                
                .ui-rangeSlider-label{
                	margin:0 2px 2px;
                	background-image:url('icons-classic/label.png');
                	background-position:bottom center;
                	background-repeat:no-repeat;
                  white-space: nowrap;
                  bottom:20px;
                  padding:3px 6px 7px;
                  cursor:col-resize;
                }
                
                .ui-rangeSlider-label-inner{
                	display:none;
                }
                
                /*
                 * Edit slider
                 */
                
                input.ui-editRangeSlider-inputValue{
                	width:3em;
                	vertical-align: middle;
                	text-align:center;
                }
                
                .jstree-default .jstree-node,
                .jstree-default .jstree-icon {
                  background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUAAAABgCAMAAABblVsaAAADAFBMVEUAAABaoVUEYBipAAA5OTkEBAQAAACFZUcJAAAECgLirGt+fn6lpaalpaW5GBhbolUGYhmqAACop6n5+fnBAgKmAQEAWxrfn2UCXhkIDQZ1d3wWhwSlAAAPcRu+EhL3qamnBQWlpaVYuC6xEBD//f+yCQl2d3wvkCQVhQbJLS3BISEqhyxVrz10x00fjwarBQUAWRMrmgyoAgLng4OtCAjvk5MPfAelBwf18/VhuUHLDAz1k5NmukkHYRaKz2t0wVmb23pesUqP1W+P0nDsZ2fUSUm1FxfnWVnqY2O0BASNAADq2p2+GxuwVzj8+PIdHRukpKThq2n////s7O0mJib+/P3enWP67uFVV1uop6kkmwD459b99tVcY3D29fb9+O3x8vHf3+Dp6Oj78ungyI337caYmZihjFU1rwACNrDx8vHT09Tw0rfz3Lv03cbp157Js3u3oWfOwJLdzKdGbUOAgonw8O82rgb35dSluaX67uDq6+ua5mfO48Ph4uJ0dnstowAyqwD78uhdxCovpgB910i38YzP9q9arkL8+/vSAADoAADr7O3S58Y5sAbn5+f249DjAADtAQGpy6JAtwU1lxuC2E2z74hPvxbV1NX99+uvr+NKvQ/36tmy6JHFwJ0ilgR41ELl5eXy9PLd3t7U1dbKAQHC1Meg3oCR1nBozDFerUYnngBgxywjihLV09X/mJjZBQX24MrxAAD+Zmb9+Oz7i4sqiR1uwku4zL2c427W+Lrs7+x7x1r58+Sv3JmOy213vlpxu1d/f7iwxbXW1tn/tLTdAAD9d3f4Jibx1rrwPT3rEBBRxBRlxDeH0mGI02KJ1WCo34qs8HhvzjjJz7iwza337d62FBRiuUP2MTHezKn/q6uDloeguqRRozrM1b6Lz2yi2IeGvm4/ohyrmVWV416c1Xui6W+/0bU7jjS98ZUxjSm5vJaXsZ8slBFSvh7/3t7/ycn/fHzdzqmww7bL2cO3nFnodXV1mHacnFB4kX+kvKuq7HuwuY6orohs99ZiAAAA7XRSTlMA/S4cWkEmAQkW/YD+/1v+NSL+/v5cR/k5F/3prEVM9qH9+27//fzZ2ayEYN3t2LQZ6avdnPrZg/ro8/rVIunV66/o0PLQV/v50hJqkwX9/////////v////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////m1ZoxUAAAH80lEQVR42u2ceVjTZhzHCwXaeiAoc865TSbqDq8d7r7v4w9bwmjLUZ6uUFlKW8BRIqgoOEZBiYgKniBT0LlNcYrXnAdem+50uts5dzvdfd/vm7RMHn5JWUInxvcDNDzPm7xpPnyTvG/4gUrVtYwLcvvppru/PwJJIIEkkCSQJJAkkKDEBGq4z4BoJL/5CRy5ubnZDyowgXZ9716xsb166WN76/V2qB0Ti9YRa/dhB/2l+UhJyVFgAvVWDwftoWlWD7TTFo/nOYTHY6HBdq+PpmOH9bBAozGNT2B2jvISqC+kKQrJs1gsXgsoaPK2yTNnzpyMgAVSGNpSvWLLkl9BgSkpxglcACVHUN+JdRJkJEzfiQQK9K+JbZjBsjOwQhpMWF/qs5rSxxFfPr5thhnY96aPDrNIYPXKJSteX3kBsItcJG4Cpy8jQ2IC9ebA/hLkpEhG/7EN7JQpbCEXIlBg4fZJn9eUlpbW1GwvBPbz/taDW49QVPWHm1975dVVoaDAjJTcNKxPWGCgA6QCZTDBJCuBMvqPbbBarVMaHkYKaQ8ocMe8TychNs/bUdi3Q3PUxUvfmLfxSPXGJ0tKXv7gfRUsMAOnMENGAr2UPcDxmWQlUEb/WOAyZBCFkIYSaC7c+Rhm6ZPfrAIEDvi4dtGcl8reXpSZmTm3Cfw5ZiNx2XwAM8ZLPUAvmyd+fAET2P4D6l+4ne8fbkcCl+9GBqewLOWBBdaWPF1SUjunchV0Cv8+F6mbUzlt2rS5TTQsMMPJCXQixgclgQkcwUugaP961upw7F6GFLIUnMCy/PzKysr8/Pwy8Cay6+vp06dPnTp1QxO4PfLnznJmY39ut3t8sK6BMociMvrXsw6HY/5qFEIrCwqk+iQlJT2FvpLKKEgg/dUzuHXDJnB7rSonA4lzZ6e43enp6VITaFYFV6CM/jmB2CG6l8ACQ5J8hMACHV89U1+/4Ud4e50ux4nEuXPEBXbBOFCWQJVcgauXr57vsMID5YkhIX3QR0jILnCgbXE4/jhxfBPyxwLtuvAcd3ZubnpOSnq69AR265kIZeFBkzFQEMtPNfBAEZzqWVm2YVMTi7ECpzAWiAgg8AzGrjdj+uIXgYcFZh+SHiZoI8ZzKDaB/xe8RuLhND1tIhBIAgkkgQQCSSD5EQWpnSSQQBJIIAkkCSSQBBJIAjug4SAJBElsB9BuMBh6cKBvBNrbSBTeT5E5LzUvz6S8BCa6bG0wgACDbX3B84jiBcVpNgPU7q8PPHqs2iD8BuypeQ6TKVWBCSwwImy4gtSbBgks5usDcYFgMSjQyHeA6wN/g/aQymEyIYFoKf2div3yNqELEijev3ACGWMyk1zAOVwPCSzw1wdu2VYACfzio5MMMihcH5gaj/FSeQtN8UIR7EQCzaIHmCA7SRL71yQyyQzjMwgKfNNXH1hasx0S+MnWg1vrjMY64frA1PhHMPFiAjuRP9HylYSA1W3jgtS/5txZzFokMLmgwGgrBgT2WOyrD/xz3k5AIF8fWFfH1wf+rJIoMGAC7ZRX/ABN8jIouX8s0OWahRUajQICl/L1gbVlxo4C29UH/mRQBSmBeaw30AF2OELxksD27VD/p7YLFyBqzl3retHpWjsLGwQEanos3vnN04jaykxIoOqTf+sDj6YZTlsC5VYISu4fJdCV5TNYACbwzVX5HJmwQMNhX33g3ENGW9AS2H1LBJFAZ1ZWltPpcjFMMXgT6eMvb4MF2v7i6wMPMYyQQJ6iIN6FuwCJ/aO7cBYHNmgDhzFtAkNggVl/4/rAOrw9PJDmB4KpRQsT0EtwxoFdkkGJA2km6913f+AcukCBtolccSCuD4SucYY0p/PkieN1aCzEwNdAlRWD/C1sNdkpBc5E0hasX4BAkzFwJsIY/dgYSCA69ZkvDmF/jEtkKmdqbS1qbTWZVUoj8ZSnAYkSHhZ09mHCLnwSm1Lt5HkgoTtCEkggCSSQBBIIJIEEkkACgSSQQBJIIJAEnjU8wC+0JIHSGHJVJF5EXnWhwApahMj2up4cYYq3HHXn5aC/X94biwxGXvTtRbBBrS4iQidiMIz7rauF7anwBIbetmUJYHBI+YH9LWMjI2/cs+c72KA2gqLCI7TiAr2UI76nMoN3we03c/m7A66fu7q8quLAupaWljVr3ttzGXiKhlMTxQzyCaQdtLenEhM4YOTBW8eg/N2C6+dGdKif06gHlVdUPLt/377vW9ZcqhYQ+KiYQV6gl3Y4HOEKvPDh+rmbxoSOxPVzw4H6Q436yvKK2c++sG7dvkvVGiGB2KDQdZAXGOelKTpMeQkccAWunxtxPa6fGxUFrqK+v4ozeLda4C6LBSKDEaICcQi9SrwT97/CXz83KhRe45wb9nIG74qUKPAhv8E4BSYQGTyfr5+7JErAX0x5MzY4+537IlWSTmFOYFwcelHmWLD/+bh+7hKh/A1tbCxvbt5bUTH7nXvvkXQT8cY95PWizzNY4LgABuvrrxHIn+rat2IayxtHjy6vqjqwX8owRhPWz/+nLvFKnY30PzE8VOjw1YPfiom5Mjp6UGNV89VqSQPp6yz+/2Cn0ASqNAOihNvUg4cOQuLUg2IGw8OYgFM5zxMY/J+0lT8fhgxGnxOtaVtIeJgQ1q8fSl+/M/oUlvvHpKcs/jvhRQMHDhs2sAgRriL8d7Q6ne48BFpoz8oEEggkgQSSQAKBJLAb8Q85csYKBm7vjAAAAABJRU5ErkJggg==");
                }
                .jstree-default .jstree-last {
                  background: none;
                }
                .ui-rangeSlider-arrow.ui-rangeSlider-leftArrow {
                  background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAAPpJREFUeNrE0zFqhVAUBFCL7ElEEBQsXmErWtnZWImF2Gih6FNEfKCoBGMMUQhEULKjrCF1JjsI+j8kxbSnuDOXA8DdE+5PgLIsM0rp100ApTRL0/Q7DENcBpIkqfq+x3Ec8DzvGhBF0VPTNNj3Hdu2wbbt80AQBK+MMez7jnmesa4rTNM8B/i+/1mWJbZtwziOYIxhmiZomnYOcBznI45jLMuCtm2R5zm6rgMh5BxgGMaDruvvrutiGAZkWYa6rqGq6rUjEkLebNtGVVUoigKyLF+vUVGUF8uykCQJJEnCTUMSRfHZMAyIooibp8zz/KMgCPi/Z/otPwMAtKTYr7dLeeEAAAAASUVORK5CYII=");
                }
                .ui-rangeSlider-arrow.ui-rangeSlider-rightArrow {
                  background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAAPlJREFUeNrE0ztqhlAUBOC/yLoUfKBga2WpKBYKgp21+ncRuYrPK0FtxBRCQCwsXEvWkDqTLagJpJj2K+aceQB4/CaPPwcopV9t2z5vA13XoWmab0LI8xZQliWO48AwDAjD8PUykCQJ9n3Htm3Isgye53WXgDiOsa4r5nnGsiyIogiapo2ngSAIsCwL2rYFpRTjOML3fSiK8nkKcF0X0zSBEII8z0EpheM4kGX54xSg6zr6vkeapqiqCrZtQxTFd5ZlX04BqqqirmsURQHLsiAIwnSpREVRQAiBaZrgOK6/fEZJkmAYBliWfbv1SDzPg2GY5v/GdDU/AwDyYNzeUSg0WgAAAABJRU5ErkJggg==");
                }
                .ui-rangeSlider-label {
                  background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARcAAAAwCAYAAAA7DT7uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAGapJREFUeNrsXUuuJNdxjTB6M1qCliGJ1B4FCvYyPPaIhgUQBASINkSZI0MjxvGg7ufE72ZW9SMly5WTfl2VlXk/8T0RN0J/+OEHyPt6X+/rfX3w9U/vJXhf7+t9vYXL+3pf7+stXN7X+3pfb+Hyvt7X+3pfb+Hyvt7X+3oLl/f1vt7X/+Prk0AE0kSjVYS/mv/lj1XH3xifq4hCBHwX/VDH7wD/8PAq+nR+h3ocxWvSFLQa3+FSFQHPoHjyuKceMa3PHOu6/fFJOd85zuLRh1+VP+axK63eXrvx6dgTtx86/kZDCrye1aRv0NLd7x97Vq91vRXVBl+tRk8zxwVIz2sIQAoaDcPc+ysFl+37xY0t31+NfXIRinV5jH7/e6Sv9TVubZ/+5S//DaaUNRBiK0lMvIcibuCHwWn4T0ksOgilompdQiYJN3TEOhZcJ/Pwdwg8qfTeiluCMJzvTVNO7NtvmSMS+PcqEQtOu+g5vSKkLSvyvdX4NInzYv5O2GkSp/W+xP1A+cb5bBUEZRClmniNIdV6ohTOji15fRRSy4rNGUy+3RqudZ/7pzoeDUc/jtKUSDMpTbcqXthERS9Ri+bRrbFJM/BEdLKe18jZtJf6/fffo6AuybJCk4Tkze4Y3PNxEA+VQdDYM5UFwtYQwkao4syUSbqfZHe5IK/IioPIqhlfWi3HP9He+rw0O+TCNI2386SK/ejYzT2ns7K2paJj8+pH8u8zd3jroFobz5kVZVemGAuaSF9RVKK1Q9QruGpdCn0crc2Kb8QJQlaESmOdEu2xxqhFl+cLVlRhhKUCnXP68/d/xpnBr5XmiV7lpiVc8ONxQM++qxdb93/piOvMzovjtHDobq/vEz7EDYfpvIfdfY2JdpJNtZV3dDLvz/rgPklyLTqp/8qLz79nSwRPuoKXowqWROViywv0LC/Q/zO/+wQzAXSZSdUg2web/wLEggBE14qrf9C6e7900i/SW+sZuY+iO6PVVHF+JI8zjAHpnUGwoHgnivsE4dfq3g/Vi4eGudAjEG6HVD76+Lt5Beizreis3P211+PFUH4U3MOBub5+Pdu5zQFouaSlFoLW1MvrcGaNZr3dOueXLxs+WqUotFLDPziNxU+A1nN/DnefNpw7fT+yRFSvB4u9thh/623hMpkAxEogN2C808iUUyX3xkQ0ugz6ID0Mk9eNim1JwA3W0/E2XbUSACwrlAh9riGwHDG/XSeq3QTjga6wbxU0E1T+Y+/gwO7oJz0EMIkbwE9Fec5jvcdvFpw4/PiH+b/nOP18dhcFWwqBLXPyzUFA5b7JHDYhZIk8cBEQiL83B857eYwxCnmniNZKjCdZAQ6Md2slUYkbtvXgGRVR/zDDLPphIYjlVmyWAAlVrFV70InuxZ7jt+2/T6rySkJpDcZzYY/7dK7DXlOd/GlMpXO6KHBFbBoZe7VoZNCXio3FsaRkFx8PKQ5eZ6XnBsBEv/vuPzFBVBdNWf+hAUeZGMw1HHBoGX7qlhEDQNWgF4crsQh44Q2F/8ULTejcBGY9MyxXU5z8pGcuTAgMMHsBgdpESVhBBAHZT4+40AbNdREIFl4gJUDscC7aq/X7uBMekzuaycoAHgtyJ/T8WkbsRR1OxbaOOustR/AiieZIIVtrTt86ga2bpktEgty0RWsIigAZ/3GwjUPRB+NtwHrjMkRj0LFG8HuDrFgdzsb8gsiDcY08NqMn3IqQ4G3RkEs/gOhpMHBkUZeSGvdJwKH+9Kc/4ZZ5ePoKAae6Zdp7sBOvvLdzZ8ZiaGGC3xsfCH5+9urN+ttr4hhBvWGlzw/l+nM8+eDGab5rM1cmfGkeam2f6/m5ypaZe1SgCZC0bVzici9eWLMVDZsKc8mX+8/p6fHg0ukVzff0quTIl/sSYI6I2n0CbNsXZCtPzcM6UyHZVwPFwACxFQGYmgDJnVsfTWlnLPFlWTh73ipqHqAjetlRnokdgc1y70/CadCApqhu92RYcwjh6m3GxxgiXDRI9TGvaVZL8PunlthW/9CQ6uctsKDLEc3LMudICk0iw52AQtTIfI+41ZIVYx8BZx3E0OCyUNUeVrV4jcumIsbmPayrbbku9Y0dRWJsatGE4LHPQIrdgtynqU2Xth8ut003ILpUhu3ykLvIlpqxQ6kigK0Q83R5tqXgGdCWW2gLbpl/qLMgppVLcx0PsU3wK4qjoNSDsc7q0EIKKSCG48m1Q7TuIbasM/L9g2eLtZ6yXSqIQEz0j3/8I6J01RZ06wCjC+kabtOalq+TcqQBv9jPvTOe1nrqwbz23UH7qkaWu2f9OA+i+OwY8bmp/FSSjBtun957RrdOp8jUNck8vV/lcwuVES2XS6t14B5o6EicinJZXiVQndzNBNofgNfDItUWRQfqHtb2OSO6gDAKvqbvPpklVTM0HlxuhkPIlybHjorohuyV75ufWEj8HBTC+MuOeqpPA1jWFFktTgrDRQQ4Z2GCzfxOxoOENJVIxhGWD8t+raqzbnbmsQoM29oCxGImZ5Or89DmQ7tD91rMXIRl6VCyXxwrYR1b427StzgOGRqdgdKJL2gAgudnxqjJxAbUAY6O/cCsqNtKkO3Tz8Vf2OWkBwYYgmckZL2wfW2CYGmoA5g3/6mz2uZHZqCEPuKmqd3nkGiNAXHsPpNBbfHQ4yGWghMMomM9l6OvWsSsoYQcEWi3sMEMRo312GDyskoN5A1M3lf62Zz3w3uAy/XZXoKIjucTRPLtt99CigkfoyqqNQjAv08hPG21RVINblMrK6UZm0bksZiLC+1pY4yBgDfWBvDjS3MgxBPiI24lLkNriZBercH3u6HRnAtYhv+rR/URFz9+9JkP8ExYAiPxfdGkcGODR25bnA0+CztiAT4k1q+911gBfzmsD9M3qnnwMyWkA4fETJVMW23qb8NHnJOkd7BA0hpa8ONpLVKCWoFRffPNNzjhY3U04WzY3TFxtY5KeqtjaUc5ny25GG9nsjtNc5UUF6M15byLzOB2DJspBNdj77/LubOdod2uQ5GKfkxrbwMPOVFOezjwmIxYnyrL9FPRTU51V2ddnOjlLl10CaBdFvWJIEKw02MazbpnHvVnplRwwRP5nmqN8zEHDcc0etr4BJgYfOC4cw9cqLLIRzdO8KdQsnM9RsjXsF0dc2DhzKkZT4NlTzMATcbgpbqof0p04vyTFS4Ucil46XSHdbfXpw9zl0KtNnMhxDboHUzqTTDkkkVB5FIAZh4BEx/lx6zQt7mwt1DOyRKG6pPdhFxeqI4F3xkmMzy68jYc0qDk6tHCYPhYiApC8jsDalAxprHhBCUQfApwde6MUJo/AkhsGo1Pda6gOwqgSnlDlvDrnAm8KQZNXInDxs7VoUTLFI5XbI+F9sonL/qzf9twZBd8umSet4Hi4G84oqIFCguXIhKVrbq10D/8xx+Ks0XwYlTEuyPR9K9cjmhSVRRUhS/TfdEVKWRxyjeoXCu/KQuPEe2zc93YTq5V4d4UWbRJvpch0DBHlIjiBdZeJJ/owTZF4L7q35gpCj2juOzWIeYrBBPdh/6KMyCarPetqWIYMuTha05Yq1UtMZE71BVdzuCasMkX3b2V/xFcZ5HCfQ7Yitv7wFPgJEwtXKOY0FTwjpOYWrsrUsgFt5Ma3HhvmHwy2M4AnGHC9RtjJI8yc2mxQIlJgcDTaVb4wSw5bIRvJP+T9CDzK/jAJHwmIzHvCpchgIMrTDtjlOYSqh5rYHscGy1ziWErJGh8qjYY1RYS8hzPnfIr4KNGEEqI0xzhQxHvt0GAFgDkRStk0VCI0iUtQvIhQRJIaoPYOVMY5pMRyTbKpzgxTJVA0E5Y7HvcfCMeNHPjbeyhRbMDBcY1o6gmRuvnD/zJGsd6Nz+DhO8O0c4Qt9+Xpd+xgx3xIKOz6di8M6ysaREC9wlv25UFdE8OfJzSUvTCgdiIRJeP8SAehyBgWAY96L9//TXkBubi3Zoa4/X+YcC6g5bSI7YTkse0PrpzCt4hhP9U7uAadTjTGzIImcM8vphdoNc4SIe/Jc9WgwC/F67UE0ZbKScOoldnj5rkMh98v5tGcP4870wMAe9ckHIPHBNoi41C76U8ME2q+gMlPpTt3ykXaQwaI2FNqsJVxgCOdJBTDvQI03tLXfXEc8VayAhFowEbyxg/xIXUIMWRofBXAs5DCvrcBnOnU4og1jU2loSVDQFjcj55zR50nF86rS4bQ8mFstg6yWCg0bhEsgeVhS3En7ph4w7l8f423rczB8rzf16RI8yZrXKkvA+h3+kNBYALgWgiTTmNokTDsGotkLg5WuvXqAKGKzUZabLKmjEgKMlK3ea0CeelBkA1jhNJFfQAs4WZiOTT23yvM8To2QYPQMd7K7D8keciRRw+MEQUObgi5FgfRSkknhhaZRqkFcIeU228BdkXAJpEaSKVDeCL/oS/DTmqwYCWBuKwq0hCjAq54lR5PViYpMiIanALgyPT1H/pK9z56IE/mBis8kL1xAognO9gFViuWWl0ghcFhGAp0rLfidrWaA+uV7CYZ17r4ccI8RUeQsUnLm9JqioEoZSC5rVy+THhGe68pHeOWuHeAetSRJlQgPHr3YQSD+GS0ziqGoxg5LjAU6FXloYHXhHimVYYV/HgGNeygPq0ZiUg2vnaC1wLc7TapCyJXCQxryeufUQiZNyv5DrEja6EqO4ImTsESOYRVlwumxaQnOqDSKS6Iy2uYFPBQHwPCmVTx13HCF1CGKer76iYSj5mUIVh0QQ+l9sDLPWkFR1Smr4EeuIyBH5vs2WgURHTsGyslS905R0TKeIAPuWG9t8tqY61QUozA1UcqMq/JtgwmUXqDrY6y28pU2RHj6LEa92NLReYz4fKx76S5F+hvTATmD8TkQRJGfTwK5WMPMoLYm3awp8jjoniLKy2tVU1JeDFcKkwEZo8wt/gEgCQeDYVIWNxAnDwNEPh3ogOBKE4Qs8oCNupchQCpXA4r1LzKrvKCYjwdQqcWEayrDj+V2lSHzodD2uSb/KRQm+Zbucxl8hk8s8CyyuJdLJeQnWAR4rvVjaUVZ5Mdqvq55b1LdPiIOx1Ve4jxlHUKByOnAMjjYEAOmEuXelStcUbjCN+sh+t1uIF4ULq8go7dGZeQ0V/QRqtDvHm6zE7h6IEyOZeucjO9AuQ4ynBIuYqDFtTJxGR7elM6Ynmh6P8rOFnzsqDyKwhjhChWXP3QqqHQhEsUjoYl3IzgiBoq5jTUQpBQyPZbt22lnWVU0lAPQ5BaioNQICHi2TYjqBV5eDUKLg5LW/y2RoTv4I9W7ddd8TR5bUU2YnrQGuHP/H5BamtqdIbsD61DQ4FguNbRL+z4Z8efZ/1Z3x+1ScDAvLFEvHaA8to6ta2sHhSgM6MBLQCDv8v4NY4+Si02qHSeZ345PQczU6RC4tbSiws01BUjmOtCASphslwFFO5+JDkGGBO3obEnCF2cIwStummdo4qalz3qdltnRtK/neJsdVWbIqQB2G63YYwgaIgVlU3MwU0qrq9JlLXXY1wrfVMWVkButM+auHgv5spjRn0ax/exKoQjATJh+26qAmZVxh+kTnLJR75VjpantITG1TQPAO6BYzM2fUs6T5wFsVFuCi2XCB5ga6aHA49VEwuAqjz+P12r2AMq586IniVjaI0RdJMqa+KuU3ncGPKVZELl5AFk11PWwpsQorDriCUZqEVbcHzK80cMRcr3IYgiJ+tzNMekceB3roK9dg+lZz64BT0fYzTc1mKLhaHQmkiZN/HvdAQo7fGzPT4kN8f3aHoUPJqnFq9tQtt9sPV/Zl4zr1pHPx9K7BZCT+5ddZD7GpDqb4I7mXQtBX4T8NnkM8CeBt9QZMnLipnCOsFxYVAvV+R+qK9RNmA6k6DqUrro7e2Up+cQsixe9M3AXKJlL2CtC6JpNdiPPeTxVuBW3f573bF7cMeNJCHkiXzyezHQMT2nGw4IvqFf3BnQker5oXrlVL/He7RZrB0B+cO8zmO6/bRuJrw8ErN9kIKq3hEsOeU8/DlGAf/mE1tG1p1ZfbPvX1aS6+0ZGLqvnW4QdNnhi1de5I+pN6z1nUrBL00SuKUx3AMAiil/1/SzMXiayNBLwHTq94Wcugp0fvVTwmoo3n7hAYtG3R9lNR75jd605R5sifM1TF3iJzP8+KsiU99Q/DsGtnHCKwnr4WDfO7zX5nCHcV1qwrbzR9fHOEfmMuTD/kcS+CV/Ta5Byr/HNepfWLrMz9bSOGK6c+J23eggOuOax9lNXZme9DQ1kS75K7AebFf7JXv/ILghTxDrzdfcLtE3xM/eElo3//BTqL7HC57euLv63XNeMa2nihy+KR6/DzzxrcmuYET/MSE74Xfz0GYrzLJDfzlZxnb8494Wbj8Y8mKJ81V/G1X6apvIX6uZfksK/+nWZu3DvuYFSoNwyeJ6zMsl59ZJf892Q7PtJ37vylCP29jLn9ydbZX/xEJ5++OFn5qgOEgXH6eTasq0t8Zzv3uAD+FVsOHBLSeL2n5IqM9sZW9U/OSeXXjhrYX7hNj7CJ3zzmJH8eIr/Q0unQqP4S+2s/KDgmfx0sXlgs+VGlUx+/tmYniJxJqLcE+q7HRVJab70A4QxLf/blW0WHMrpBWL7Dt5mPrfM9XmQo/oX77WzlJeFpIrdIGx6qB0tZjuVrAHmFLjdqfEyQFv2olXJ6WXLgvUKzwwdv3fSbQ3RVs/BCiPxC+b6V6pbGvraIPJepqw3AzqHS5H2jrenyWFfcBkeljhsOLNPKK8rKbmFSVyVD2nLqxb9eFuk9l0Ps1jCql+rnrW8TFl58y4Ysq4fz3R2RynI7rnFIknjVvT7VZOsLvik89G72/LTCr83kfbrm9tlFHgj9E69O/el0k7K5QuNPb4SXFeve+QzRdRJ6q0NfdcIoF3qErub2W5xMx/PtPZqZeEFy3JWil4GqeXrS6eIKau0W/amvQMeKqF9OVC7jYOU8kOwlQU4t0pE2VZtMlaQIS7F3z8+I9qa6zdEf55Zg9UHUP7s6ApVzVUM2iy1RJ7UhIUxu1q40NuK7G7mrS3CD6qBCZtu6W3Cyr+IUxWjf2KoufuK4sMtXkcnY8Ua75QdjHNvaPfdVU4d+Kde1kwieYBRzAenjNaZPJDKEaBbV5KA4Up82tqsLtSW7qw3EiXJi4ltyzgJQG9KNuWWKuD5HhpvWjm1HmET2hei1x/rG2sVBZAlsPlFDpXlLBJVSuCDGcyOlEgy+6xT+lGkqJy3bqhaq4asGhTOgo0gQqO6GuFxeXj5gFw6yoOTO6O4qvaKh0ZMUaM7Ys6UjEqdTeg6X1bN/CgotpxnQXjrckODUXao/MWwqvURcF1+7UqtTHVQMHvVmJ7tF8ijOEeEK5C72n0nSqIp/MsE6tLsYLzZxDo8pVzXzXYdknYkPtqdUXZ9bQiNXa/L8kLmjRZLGcUHlA3e0p1bxgGpu7W5P6uivrJC0RwSqhsVpZYvdiWputofA2AgPNMif2IDxqUZsq6rG3u6qymS82tWqaiKvoxocGNZQ3iNLbYv8igTw8YX8CkntNUS+n5E9w7525bLMVKPtqi/FGYa1dtV5XFwMu5sTlImydZR3jTXVOQbW9fD0gB527introOP4DlduloCSWiifuqswCtcqgi9V6jtmgeJVu+yH+B3Z83ZC0X+L0IZVXNG0rZxnPy1zjea3YMaksaU9kJrUlSVjlzFhziVQWIG6bcVKgO4kRAvtXkIp5knEGIu0Ks8RwSo12BotJlb/31ksu6xJOgtNbQHGBLvH9ShO86jqb9mxnZYCLx73czEub22rs4hy8RwKs4BObu9iTRR9WdXHBum4XsJcFNk3wtoSLVg21N9aU+8hBAtMHmahyWpyrq5HDpHamCQE3peZLZzTAWmVX//mN7/659///l9WSYfR3uNXj8+DsJtzYUvlIWBcq1FmeJBymKUo2QZy/XkslaJkxkk1cZQMfi6fSF3S9l5bMCuNLDvbDeKcdRyLifne00K0umkHIWg3lCRcfRLa21HCcyqwJYxiwTBdvZcmzzhH0YgWZougMR/jwvNjL21ZiurbDFF/Lh/JnbRlq4kdAbpURIjn6YrgmNMecJtGSm7B3rYmC2ps9WAQcUyzqnaCa40itH7YnfY2s88hWV2Z2tUunS8yImoavyH38mUT2fDQ6qsCslDdkN1YfbscZE1g1B5xzcCmBWDiGlfRWJ0VabT2zGEGsirE/y42cDN4QQmvtZ0uezz33379xRe//P1XX/3rDLV/8cWXvxSR/wIQiowXJSHA/ZmQm+uJcHHfvVdcCBfEuLR9650mrmHXEnS852rsI4/KjE39OUMoeyp7DKn1RWhgl1tP7Pev7c31XbAqq8XQMNdOZvLYi/AYplH9H/HFi1zxXOoRtaxfiKWT64P+uDdU7HXt9ny7LVPJ7Rq6JH1o3LQJwcyCi2+6viFKfWN2UHcLHrYAVxvWptsvCxd1ElmWyF10NBeL006o2QU5UiTghpu1ijUhES3r/1VUmpvCuU6T+/CbuvQBrMZbEhqYLcMXvi/R6pEk3KOHvo8An5lvQC9MQx6ZUaO1cIXOk0b+HxH57osvv/zFV7/73ddf/va3vxCRv4rIX+1Hc/3YU9sTkGWg1J4jxS7haSk2GJNNK8L9rIpQaJRb6tZs06Q5/jSJTYBl7YUXasuIhddlnraYjLBogXtyiecKuje4SyJUvTGGo5FLQK9ibyKx1hJbaQq/jkvpSujUEHqSaRL2vh4O0+z/DgDf5xFKOa+IogAAAABJRU5ErkJggg==");
                }
                .tableelem {
                  padding: 2px 10px;
                  border: 2px white;
                  background-color: #E0E0E0;
                }
                .tableheader {
                  background-color: #C0C0C0;
                }
                .bokehtable table tr td {
                  padding: 2px;
                }
                .bokehtable form table tr td {
                  padding: 2px;
                }
                .bokehtable form table tr td input {
                  padding: 0px;
                }
                .plotarea:after,
                .bokeh_canvas_wrapper_outer:after,
                .bokeh_canvas_wrapper:after {
                  content: " ";
                  height: 0;
                  display: block;
                  clear: both;
                }
                .bokeh_canvas_wrapper .resize_bokeh_plot {
                  position: absolute;
                  right: 40px;
                  bottom: 40px;
                  width: 40px;
                  height: 40px;
                  padding: 10px 0 0 10px;
                  overflow: hidden;
                  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNui8sowAAAEnSURBVEiJzZXBioQwDIb/XQuF6U3wCRSEvv8zeFOoB2++QD14aqHSOntYtthxdHesDptTk4Z+hKR/PqqquuNi+7wa8DYIWTplWSJN0yDBGAMhBJxzhyFBJY8AACCErGKv2u4L1lp0XRdVBfBLTwghuN1uUYBNiDHGn4uiQJZl50GmaYJSCm3bou/700BBT4QQAL57IaUEAOR57kEAMAxDHMRaG1wuQc45aK1fBqwgz+wHpJSCUuoayBJ01P6/djHG/jR1hzWDMQbOuZedvak7XAljzAMe/xGlFEmSeP9wJVv/SGsNzjmcc2iaJg6yBbLWghASqHf0dEkpAwl6thpOGWGl1O46iIZQSsE5Dxp9OsQ5h3meV/FxHP05erdaa1HX9W7OW2TlC31ceRWbb5+AAAAAAElFTkSuQmCC);
                  background-position: bottom right;
                  background-repeat: no-repeat;
                  cursor: se-resize;
                }
                .bokeh_canvas_wrapper:hover .resize_bokeh_plot {
                  display: block;
                }
                .bk-sidebar {
                  float: left;
                  padding: 0;
                  position: relative;
                }
                .bk-sidebar .bk-logo {
                  margin: 0 auto;
                  float: none;
                  clear: both;
                }
                .bk-logo {
                  display: block;
                  float: left;
                  background-repeat: no-repeat;
                }
                .bk-logo-notebook {
                  margin-right: 10px;
                }
                .bk-logo-small {
                  width: 20px;
                  height: 20px;
                  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAKwwAACsMBNCkkqwAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNui8sowAAAPDSURBVDiNjZRbbFRVFIa/tc+ZOQM9pRe5VKoUQbBcDBchIkFKCJZEGy2EENSY+KBp4UEND5p4xUAiEp80MWo0gmLFiFI0RhMChoQoGiJyE01UelHahplymWnPnJlz9vKhTKOBgvtpJ3utb/97rX8vuN6yR4W25ndpa+6mrXnJ9cLlmqfPzKthes2bjE6tQhXgLPAkD7Xv/l/AL45RDbQYYbqfIP/wN3c0/F0+cQZ+AqwFFEwccnb2ZqKbO5hck8Z1D7H6gYESwy1t9v3C6KBIO3A3QDFmMCZ5noQDqiAKJjhM75wspm4LN1YOJRaLP7FrdxPr1vQAmBIwjFkgMgRTIAHf90Zlx4eutEDwBl2Ne0jNXUzteBjlcbkM8xGeukLhoS6q5k8A34PIgi+cxCubgpBHBh8jvfEvarJfMsotw1qwerloCnBLiTOscErWqevMDKkTgayaLrzUQQwNrNv3EWPtKcaklhLbe7HRBjTchkZfo5pB4ux/mlLY7t/jqLR9ksqfTE8qLppWQSqMZHXzXN1ztU7O+KBnQxjkG/MD+VEFG84sxnEYnAuXF15b3CWF7f4c4CuBWjeSw1uqc+231ummcWU0rKjnx6sB63d33a6qR1EcjSEKY1TtATdlmgywA6hVIHZ10fMZv+6UZVUuoOdqMIBf10w60V87rgkRjAOe7+L5yeXGmD0GOIgMVdMKRAldv/nomMrmeXSPBNy64PUbnl28nsHKsletMdjYoqogstKQZ6MGtl3zMVhFBYqe/biww79zJKDnemMHZ9a3Nz364sBAlX9AHQegH3SFSbbm4uKxsDXu0hNxd9xn04X95It7xS0uHwlYCHO1iTLfm2DKX1q4+R2Jk4lLakzLb2sn7x/+eufXTNsqjm3VmB+I5DiGP8WznZJwe9Cgp+LD7t5M1fpZftB337ZZS9OO8p7jOPT2ddB5U+XLn3/3wib4l7HFteVAhSS0kYQ2AmAEWwhCm+xb25/aCAzsDDV3JHDkkB8pqKW6agKc/r2jxBk2NqIdl10/5GwR4kI2X0wHr/Bp6114ub2ilIfxOU3F0TwVwVpLwk1SM3X2hRJmWKGqvi8i9yOyRKOYODuI7R17xD3duAwvWIYANiQntt5RqSjNKVU9ZoRvrwBW7TqTvvjI1BUasTS6eGm8Zqomun80PIcXVCAWERcbDxCKLcQmudPROAV0gr719JEnLg4/dKROAvSPaVmJsW8DdSKGQjGz70LuQMtt9J8ZKefaExvIVD4+V+AzVH8eXb3wwdSZlsK14v8BfriiZcJWbEcAAAAASUVORK5CYII=);
                }
                .bk-logo-medium {
                  width: 35px;
                  height: 35px;
                  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAjCAYAAAAe2bNZAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAK6wAACusBgosNWgAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNui8sowAAAf9SURBVFiFvZh7cFTVHcc/59y7793sJiFAwkvAYDRqFWwdraLVlj61diRYsDjqCFbFKrYo0CltlSq1tLaC2GprGIriGwqjFu10OlrGv8RiK/IICYECSWBDkt3s695zTv9IAtlHeOn0O7Mzu797z+/3Ob/z+p0VfBq9doNFljuABwAXw2PcvGHt6bgwxhz7Ls4YZNVXxxANLENwE2D1W9PAGmAhszZ0/X9gll5yCbHoOirLzmaQs0F6F8QMZq1v/8xgNm7DYwwjgXJLYL4witQ16+sv/U9HdDmV4WrKw6B06cZC/RMrM4MZ7xz61DAbtzEXmAvUAX4pMOVecg9/MFFu3j3Gz7gQBLygS2RGumBkL0cubiFRsR3LzVBV1UMk3IrW73PT9C2lYOwhQB4ClhX1AuKpjLcV27oEjyUpNUJCg1CvcejykWTCXyQgzic2HIIBjg3pS6+uRLKAhumZvD4U+tq0jTrgkVKQQtLekfTtxIPAkhTNF6G7kZm7aPp6M9myKVQEoaYaIhEQYvD781DML/RfBGNZXAl4irJiwBa07e/y7cQnBaJghIX6ENl2GR/fGCBoz6cm5qeyEqQA5ZYA5x5eeiV0Qph4gjFAUSwAr6QllQgcxS/Jm25Cr2Tmpsk03XI9NfI31FTZBEOgVOk51adqDBNPCNPSRlkiDXbBEwOU2WxH+I7itQZ62g56OjM33suq1YsZHVtGZSUI2QdyYgkgOthQNIF7BIGDnRAJgJSgj69cUx1gB8PkOGwL4E1gPrM27gIg7NlGKLQApc7BmEnAxP5g/rw4YqBrCDB5xHkw5rdR/1qTrN/hKNo6YUwVDNpFsnjYS8RbidBPcPXFP6R6yfExuOXmN4A3jv1+8ZUwgY9D2OWjUZE6lO88jDwHI8ZixGiMKSeYTBamCoDk6kDAb6y1OcH1a6KpD/fZesoFw5FlIXAVCIiH4PxrV+p2npVDToTBmtjY8t1swh2V61E9KqWiyuPEjM8dbfxuvfa49Zayf9R136Wr8mBSf/T7bNteA8zwaGEUbFpckWwq95n59dUIywKl2fbOIS5e8bWSu0tJ1a5redAYfqkdjesodFajcgaVNWhXo1C9SrkN3Usmv3UMJrc6/DDwkwEntkEJLe67tSLhvyzK8rHDQWleve5CGk4VZEB1r+5bg2E2si+Y0QatDK6jUVkX5eg2YYlp++ZM+rfMNYamAj8Y7MAVWFqaR1f/t2xzU4IHjybBtthzuiAASqv7jTF7jOqDMAakFHgDNsFyP+FhwZHBmH9F7cutIYkQCylYYv1AZSqsn1/+bX51OMMjPSl2nAnM7hnjOx2v53YgNWAzHM9Q/9l0lQWPSCBSyokAtOBC1Rj+w/1Xs+STDp4/E5g7Rs2zm2+oeVd7PUuHKDf6A4r5EsPT5K3gfCnBXNUYnvGzb+KcCczYYWOnLpy4eOXuG2oec0PBN8XQQAnpvS35AvAykr56rWhPBiV4MvtceGLxk5Mr6A1O8IfK7rl7xJ0r9kyumuP4fa0lMqTBLJIAJqEf1J3qE92lMBndlyfRD2YBghHC4hlny7ASqCeWo5zaoDdIWfnIefNGTb9fC73QDfhyBUCNOxrGPSUBfPem9us253YTV+3mcBbdkUYfzmHiLqZbYdIGHHON2ZlemXouaJUOO6TqtdHEQuXYY8Yt+EbDgmlS6RdzkaDTv2P9A3gICiq93sWhb5mc5wVhuU3Y7m5hOc3So7qFT3SLgOXHb/cyOfMn7xROegoC/PTcn3v8gbKPgDopJFk3R/uBPWQiwQ+2/GJevRMObLUzqe/saJjQUQTTftEVMW9tWxPgAocwcj9abNcZe7s+6t2R2xXZG7zyYLp8Q1PiRBBHym5bYuXi8Qt+/LvGu9f/5YDAxABsaRNPH6Xr4D4Sk87a897SOy9v/fKwjoF2eQel95yDESGEF6gEMwKhLwKus3wOVjTtes7qzgLdXTMnNCNoEpbcrtNuq6N7Xh/+eqcbj94xQkp7mdKpW5XbtbR8Z26kgMCAf2UU5YEovRUVRHbu2b3vK1UdDFkDCyMRQxbpdv8nhKAGIa7QaQedzT07fFPny53R738JoVYBdVrnsNx9XZ9v33UeGO+AA2MMUkgqQ5UcdDLZSFeVgONnXeHqSAC5Ew1BXwko0D1Zct3dT1duOjS3MzZnEUJtBuoQAq3SGOLR4ekjn9NC5nVOaYXf9lETrUkmOJy3pOz8OKIb2A1cWhJCCEzOxU2mUPror+2/L3yyM3pkM7jTjr1nBOgkGeyQ7erxpdJsMAS9wb2F9rzMxNY1K2PMU0WtZV82VU8Wp6vbKJVo9Lx/+4cydORdxCCQ/kDGTZCWsRpLu7VD7bfKqL8V2orKTp/PtzaXy42jr6TwAuisi+7JolUG4wY+8vyrISCMtRrLKWpvjAOqx/QGhp0rjRo5xD3x98CWQuOQN8qumRMmI7jKZPUEpzNVZsj4Zbaq1to5tZZsKIydLWojhIXrJnES79EaOzv3du2NytKuxzJKAA6wF8xqEE8s2jo/1wd/khslQGxd81Zg62Bbp31XBH+iETt7Y3ELA0iU6iGDlQ5mexe0VEx4a3x8V1AaYwFJgTiwaOsDmeK2J8nMUOqsnB1A+dcA04ucCYt0urkjmflk9iT2v30q/gZn5rQPvor4n9Ou634PeBzoznes/iot/7WnClKoM/+zCIjH5kwT8ChQjTHPIPTjFV3PpU/Hx+DM/A9U3IXI4SPCYAAAAABJRU5ErkJggg==);
                }
                .bk-logo-large {
                  width: 75px;
                  height: 75px;
                  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEsAAABLCAYAAAA4TnrqAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNui8sowAABNHSURBVHiczZx5nFxVlce/576q6uqq6q7e0t0habIRgQScfEBAJ4MLo4gogY9CAkkIApElCqOCI8IAKriMg6MwoqiBgERMIJEECCoIKKIYWcImS9KEJCxJOr2kt1rfu2f+eN2d7qS7tu4Efp9Pf7rqvvvOOfV759577r3nPuG9hF/PmQXmZEQ/CkwEtqLyV8Q+yPz7nn03TFLVgc/ybhiwD+469WiQLwOfAmqHqbEb1bWo/JCFa148kKa9t8hafuqVGLkWCBVQuxvVy1mw9hf726x+vDfIOqMxzCdm3U4sPK/oe1V/wIK1X98PVg2j6t0m63uzx2O95YyLn0BlFKwtRcrPmb/morE2bW8MJsvsb2X74PsfmoToAwScEwgFAM17ywi4kLtO+78xtCwvDixZPzjuGMQ8CRxFwIFgALRksgC+xF2n/WyMrMuLMWmG9zxLRQjGIYxjGFc5tJLsOX8+/Ij1LbX/g2gDVqE8BI3VYEdFVj9uYf6ai8dC0N4Y3AwDpQpZs4GZYjgVmCNwEBAFIsPV3ZXFa4wmo2QDEMr6hcGSVe8L8S7il0sitM66l2Ci1S/UXqz2kEgYKmKdTJray+lzukejpmiLVz9NNBjgOoRLASdffQGs0tOTDbyO0WkDF8rGiCwnk6FnQged0xcRTC4aKPcdopfaWkNNdRtepouVq5pRfQbVFZw1d2Oxqorqs377DNXBIL9H+AoFENVvc9CwvTVV9iLSN+oZ6euvijV3L5hsM11Nt9F+pIs6DAi0FkSgujpK/bhygsGJwAxgDiLfwpiXWLnqTn5z96Si1BVacd0GAo7DauDfilEAINDd3FnxGkb9Dj3ggFMQ1yPDZO6h9cjraX//SYidgFhftrVQXg4NDVAV90nbdxAJAgsx5klWrPpowSoLregKF4vwsULrD4Zj2NKbLOtA1H/4AQeMKXUk9Ah2XcimT19BYuJ1ONnJgE+SMVBTA/XjIFzml+XWMR7ht6y458hCFBdE1r0bKBfhskLqDocywyuo+LpUIRQAp6SBeBOBnuP5+9V3E3bvx7hNA94UiUBjA8QrfW8qPNCtRmQZd63MO90qiCwHPgYU1b4HI2R4hUxwC4r/9EuJr1RvoXzzUTx30RYan38O0RkD3lTb503BYCHeNByOxphT8lUqrBkaPl2s9sEYF2ETGccftgUIOsV07i2ozmfB2ot5+gaoeesh0ElDvKmy0q85qgBXFuarURBZIkwZhRWp2nq2EvKCoOAU41n6R6x+hAVrf8MNP6qi+uUHsfYIHGcsvGkohKNZsbw8V5W8ZH34mwQzLvVSeqy/E2gj4AZR/P4qv7As8A3a3E+ycO2r/PDGCpQ/YPV4YrE93qQ6epL2oAYNTc9VIW9kOLOJirdaiU+q952iBNteF8Hlu24YFEJBvymOLOdFVJewYO0TACy5KkA2u5RQ6FiqqiAW9WuVtlKRC2WINOSqkNezGuLYzl681i4/liwWqmz1NXm9gBJ0GHlKqrcAsweIOuPcIJNqfkUsNpfGBqiIjbU3DUYAqMlXISdCIeJA3a5OqIxAtAy8Ih6qgL8M7Ho7CQVdAk5wnx+r+g7IpSxYu3qg7MabY4isJBY9mVjMLxt7b9obORXk9SwRykWIWgs7OsDT4pYqFPw5mKcOASME9oncH/Y78TWrh5QKh1MVL6eiYiOqqf3kTUUhr2dpX3dsDHQloLUTGqvALewhewov+Z8sOI7imP5lmTToNSTlBs6/b19pl37xKeAElq+qxrF1iEwGZoAciXA40AjUAZUFWTIGyEvWG0HKJmcJO/h9VstuiIUhEs7fKlR5Wyy7AD9iLws6fReeBZawYO36vBYuPL0D6AA2AQ8PlC//dTmB0DRgKiJTQN8HchjooSCNFDjRLwZ5yTq/I3Tc47EMGfG1uxa2d8DUhpHmqHsgwitzjiLha3KEsqBB9Zdk7OWce3/XqCxfuCCJ77UvDZQtXSZURCpQUw8cBnIEwmHAwYP+giMLzd3Wc5KVWhaZH0o5N0UwyTWxlDUQdQx0JWFXFzRUg+flUN3fXwGEAq9izGc4a826XDpHhcXnKtDV99cMPDDk+jNX19E2oZHuimNxAx9AZCb+wmUVSB0BN5NL/IhkpZZFFojIHR7qHJkKJjyrq1dVpY+PWaYYgZZOqCz3V4e9kZ/HawOfvvbEDmC/EHXQT1+emOnNzPLSWqtWRVURI2qMGHHMeFQCoiYrv5OsqHFVbJ2KdYCXbTDb7oYyh9hAts64gY92wX0j6RmWrNSyyJlGzJ2AKJAVjcxKBz+yrce7fkPEvb5MaHA92L4bJtePGGMqyhtjQ0duROJl4Ug8fKebtlVu2sXLeHiuxctarKeIKCoW6V/pGDSciw0QSgZADYj9cu33n9vYdsWsW4bTs0/okFoWWdBP1ODyrGHSnN7yU7Ien3LhZcdAZy+0dvmR/TDoPlBkNS+Y1uyEnEvClSFi4yLEJ1RQNaGCqgkx4uOjRGvKCUWCmIAgBtQq1lPUKqqKiqLGQ0UF5KfV39swZzg9QwhJLYvMM2LuIkf8FczKFytmdq+8so1/oEw1BqaPh7LQPqPj5myGmZ87htRYEFIIDl259XaEc6Av3hEZcHtVnxwvY3EzLm7a4mU9vIz/fwiEXuvZE3f/11F/G3ZHOn179GhB/gLknHkDGsw4x5w+uXPnB9I86lmmxyMwpWHorpYqT5w6i+NH+fuLwrTlr9cEQoH1wCEj1RERMH0bKZ5irWJdi5tyyaY9vIyHdS3W1R29HcmTkv993PP99xqA5K3hqKgsIz9RAJINeatXvVjX3g3HO8ITnYl9m6MIL5T6o0vF6wuntVu155Njmq6qqOc3QwQcxxAMByivClPZGKW6qZKqCRXED4o1jp9R99tD79l2UP+9BsAxznkIBa1D92FStib1s++ewk5VTjPCUzt3QzLjR/q+VRS91TQW2DRvyuOKfqegyoOap1qfRLWKE3QIRYOUxUJTQX/aX92kbi2vQuS8oq0SFqWXRRddeSptBj6RdvndO+0MPFPlwHtWP1Kkvqmqfyn1/sEECnLqoXdvXQhgjGOOB95filARuTF1W2z6FXPo3LaLOZ29rGjtBseQQXmrVGNHi21zD/Osp58Hdo+FPBG57JCVWyoMyL9SeoJIlRGWJW6NOUu/gHv1HSxo6+bB7iTJujitY2FoqWieP2Wzqn51jMTNckTOMKo0jUqMMNsxXAvAvdi3Wjm9tZPzurpIjoWVo8HGeZOXKXrnGImbJ+llsZtFWDIqMUpW0U+Undv75zEybMww7e7N1QGcZ2BUmy4Au4zAk6O2SAiKyM2p2yoO2NpSLnx1+lUnXdB0aRPA63OndljPfp48q6AFYJxR1T8B20YpCGCmiD2gmXgjoSZas7giXPH4/PrzDgfYdNaUx1X1+tFJ1S2m7LzetzTHTLsYiMiizO2x+WMhq1R8+7DrTNAJ1MXL45MrwhX3LWq8cBpAWtPXKTxRqlyFJ/rzD24CesfEWuVHqdvKp46JrBIQCEerrdpJZaEyqiPVh4QCwYcumHjJkVvPPNRV9EL8ta5i4aGy3ACUndu7yaq9CsEPIkaTPCnUG+Ms7bmtesyXdQs0oB5ostZSFa0iWhadaoXHvtB0yfGb5k5+2ap+pViJCus8Yx4ZiK/C5yZu1KS9R3usvx/cT1z/n1AMiR8LSuaA5KnvDRXbRN/6uyDUxGpwjKkVZM1F4y/60KZ5k29TkbuLEJlVa7/VfPpEd0gwmlqX+LzX4v7R25HFbs9iW1x0t4cmFXXVH0+MFESeiHw7fXvsgK469On9YP9nq5ZwIEx1eTWK1miw7KEl9ReeuvGMg+epSHMh8hS9fOO8yc/CXpF7/H4S6tqFePYFTSnaY7HtHnaAvCy21UW7PDRpwWMPaYM90Icjyi8SS8MHNJwQlSH5CopSFamiPFSOVRvzwuFV/xmcd+LbH2yai0g2j7ibXjtj0k39X/aZ5kSvd3ci+jkMu4YQ4OF7WKeLbfWwLS7eO1mfyA4P7bJoSsFlMHmHOcHATXvr2K8Qjhj8VVUREWqiNRg/ny7Q2djw4JKDP9vYW199lY6Qk6Dw89fmTvqPwWXDzgnLr3GbrbWfVHQXjgWjezzHkT13eYqmFN3tYXe52B1ZvB1ZvO1ZbKuH9lhI23NSS6N5c5/GAtf8y3fiDHOqzKqlPFhOdaQaqxZEnJ7xB635zJnfkGyk/A9qhtKg6E82zp20z1GXEXd3ot90N/ReFb5I02W/wrFtUpZ9XkLuDsAiqhjdLtCDNSG1EkQlgJIm472JxdFeD/XJDWrUvD56KvIj7JS/D6gf7pqqEo/ESWQSJLNJCARCgXTmO8f+4Pa7/vG1c94MpDNNxvUAfr5x7uRLhpORc9+w9+EjHg5N6ehEqEKZoWg9Vl5Q2KiJsiczOyu2jn96/bu2FNMSO3OWZ3sC4xMPPA0gKk0IZcPVVRQjhppYDdt3b0dR3HAoMO6lTXNnLF+3c9PnPo4XcH7W/NmJI86Tc5IVnLIrjHEEqESoFJiG0eMEoDJFeWWK3YdMfRNhm8JWVDcBL4C+qso7mUymu/Hed3Jsw5aO9qoLL7Re7w3JTMs3gacBVPRQyTFE9zfHqkgV7T3tiBGy5eHwwX96elKoJ3H/vfd/MeeCQu7teykguhKagCaB2Xsy+sSCdoTD4X/uPmtKM8g/VfUtYKOqt6Vm5baSF+VaK89vMMb8WOBMqxlct71i0OWcmXvge1g8EieRTpByUxgx2GCApseeeizfvWN4gGYIjIjUAh8G+TD07apAj0igveOsqTtR3Qg8L8Ir1upWYGfNyi0tuYS2Vy4+ESO3AFMQg+t1ASoA35v1Y+MnheSGquKIQ02shh2dO1AUQUhVV7bTk/ve/UXWSIgBMYGDETkGWABgjICwbffcKW96vdk7ate99cvBN7VULg4GhOsR+RoDni5Ym0Dpa+WiFcBhhRhh1RItixIvj9OeaMcRBwrg4kCTNTyMoGnvYLc3Hde099TgS23xxYeLyE+AE/aUCqoWz0tC3xaJhzvBIZAzzXEwrPpzx0QmQdpNI8g7ec3Mc33/Hgvu6+O8rjSZtsTr6fbEcfWPtjzXf7ktvvhiEfk7Q4jym7S1CaxNIQSMX2ZmFaNaVXGMQ22sFhFB0bz9aD7PSgBjP5r1ba1rxsXrzOBl3Dc81z1p4vrOZoC2qsUHifK/iIxw2NzB2hTWpkCc8SgIganFLoZaa4mEIsTL49rS1ZJ30yZnheoVW7sZo+2kAYiAgtedJtuWxGay3cDZBz3R4RNVef6JgvxpZKIAFGsT+ORI2JfLzFLMsWqpjlRnmmoO7shXt4CcUn1VkJIMGYI+b7IpF68ng2ZcUDoQTmt4bNdf34wsCkWCoWtF5Mr8wiyu1wsYHPUyAKo6odQ+w4jpriyL5T3lWsh+4SMl2jDYGt+butK47UmfKJGUBjKfqX+s9fG2qsVHRUNljxZGlN/feF4XIDh42VPmrI+P5siMopvTmeSOvD8jryTLOqC0s8VC30jnkm1L4HWn+z3Mw0kvaPhj59/a4ouX9GXvzC5UqGra79xFcHDTkzvfrkMZV5KNgCrPXv3SFfmWa/KTVb3yjW2qOmwmXE70901dKbJtCTTr9R/RyGhFy8k8vHtde+UF94jIzYxwEH14sQbP60HV9b+j1Q3d22YiMuycsDCZ+qtC6hW0be9lvWsV/WthmgEj2Ey/N2X6ksoEjEUj7fND913dFohf8AJGTy9I5hDxBtfrHSDLwxkX8tIfKPlIgfKHbzz71YL2Tgsiq271tqRm9GRFH80tTcAqbmfK75v2eBM4bkKtXBt85OIZWrlzPcL7CtE9FIJisV7vwHeLMSpOMelSg9FmxSs4H6LghJCa1Vu6rJc9GfQaVPdN+hDBJl0/HOjJDJQB4GRTdDTeF1w/bzah9LcRLXHnR7CaxbMp+s8EKMb05boXizbgs1c9e/nLhWsvAe1nTKoXx5wuIv8OTEWp83rStV5v1oJGh5wnFIvZNSVhNh/biZMd7+c/lwa/v0rR1f0U4GFU6Q3FNj4wc/5E1wQjRgsLSlV5CLVXXPncZRvy1x3Dtxy1njW13HSn49nWRFzKjMWYGCJRQGwo3eC0Ns1wmj/0rb7U6VHpEnHIZHbR0/s8IgEC6tISG88j00/rdU3AGLXD/R5L/0EC1ccVXX3lhst+X6jOMXm9Sj/qfrM5CSSBEeKUTtoqZjeL4y0v5Ahrbgie103/M/bEIZxJfNfDrnUFDQxHluJa67599fNf3zk63ft7ojwIbfHF80XkDkbxgESC9PQ+TyazE5GAp/Clafpq8WFNEXhX3p9V27n0LlV7dukSBNUsnpcASKnaM/Y3UXvjgL4/q7bz1hVW9WxKWMnoD0atzWxX7EnT2HjvfjAxJw74m9nqOpcuV9VFQLq4OxVV3exp4tOHsPldyTA88K+xw2+SKB/HP+ZWEKz1VgSdcbOn80be4X5/4V199eau+OJaB5YgcjbD78x4oH9W1VtqO2+950DbB++Ft0nuhfbKL0yyhk8JepIohwApFZ5BdVUy2f34xMzdRTbZscNgsv4fCI1BY5O1DJEAAAAASUVORK5CYII=);
                }
                .bk-button-bar > .bk-toolbar-button {
                  width: 48px;
                  height: 40px;
                  margin: 8px 0 !important;
                  position: relative;
                  display: block;
                  overflow: visible;
                  clear: both;
                  border-radius: 3px !important;
                  -moz-border-radius: 3px !important;
                  -webkit-border-radius: 3px !important;
                  background-color: #C6C6C6;
                }
                .bk-button-bar > .bk-toolbar-button:hover {
                  background-color: #A8A8A8;
                  cursor: pointer;
                }
                .bk-button-bar > .bk-toolbar-button.active {
                  background-color: #A8A8A8;
                }
                .bk-toolbar-button > .bk-btn-icon {
                  width: 28px;
                  height: 28px;
                  margin: 0 !important;
                  border: none !important;
                  background: transparent !important;
                  display: block;
                  position: relative;
                  z-index: 10;
                }
                .bk-toolbar-button > span.tip {
                  position: absolute;
                  top: 0;
                  left: 100%;
                  transition: all 0.6s ease;
                  -webkit-transition: all 0.6s ease;
                  -moz-transition: all 0.6s ease;
                  -o-transition: all 0.6s ease;
                  height: inherit;
                  z-index: -1;
                  line-height: 36px;
                  font-family: Helvetica, sans-serif;
                  font-size: 0;
                  white-space: nowrap;
                }
                .bk-toolbar-button:hover > span.tip {
                  left: 60px;
                  z-index: 20;
                  font-size: 125%;
                }
                .slides .bokeh_canvas_wrapper_outer {
                  overflow: visible;
                }
                .slides canvas {
                  left: 0;
                  top: 0;
                }
                .slides .bk-sidebar {
                  float: right;
                }
                .slides .bk-toolbar-button > span.tip {
                  color: #fff;
                }
                .bk-bs-container {
                  margin-right: auto;
                  margin-left: auto;
                  padding-left: 15px;
                  padding-right: 15px;
                }
                @media (min-width: 768px) {
                  .bk-bs-container {
                    width: 750px;
                  }
                }
                @media (min-width: 992px) {
                  .bk-bs-container {
                    width: 970px;
                  }
                }
                @media (min-width: 1200px) {
                  .bk-bs-container {
                    width: 1170px;
                  }
                }
                .bk-bs-container-fluid {
                  margin-right: auto;
                  margin-left: auto;
                  padding-left: 15px;
                  padding-right: 15px;
                }
                .bk-bs-row {
                  margin-left: -15px;
                  margin-right: -15px;
                }
                .bk-bs-col-xs-1, .bk-bs-col-sm-1, .bk-bs-col-md-1, .bk-bs-col-lg-1, .bk-bs-col-xs-2, .bk-bs-col-sm-2, .bk-bs-col-md-2, .bk-bs-col-lg-2, .bk-bs-col-xs-3, .bk-bs-col-sm-3, .bk-bs-col-md-3, .bk-bs-col-lg-3, .bk-bs-col-xs-4, .bk-bs-col-sm-4, .bk-bs-col-md-4, .bk-bs-col-lg-4, .bk-bs-col-xs-5, .bk-bs-col-sm-5, .bk-bs-col-md-5, .bk-bs-col-lg-5, .bk-bs-col-xs-6, .bk-bs-col-sm-6, .bk-bs-col-md-6, .bk-bs-col-lg-6, .bk-bs-col-xs-7, .bk-bs-col-sm-7, .bk-bs-col-md-7, .bk-bs-col-lg-7, .bk-bs-col-xs-8, .bk-bs-col-sm-8, .bk-bs-col-md-8, .bk-bs-col-lg-8, .bk-bs-col-xs-9, .bk-bs-col-sm-9, .bk-bs-col-md-9, .bk-bs-col-lg-9, .bk-bs-col-xs-10, .bk-bs-col-sm-10, .bk-bs-col-md-10, .bk-bs-col-lg-10, .bk-bs-col-xs-11, .bk-bs-col-sm-11, .bk-bs-col-md-11, .bk-bs-col-lg-11, .bk-bs-col-xs-12, .bk-bs-col-sm-12, .bk-bs-col-md-12, .bk-bs-col-lg-12 {
                  position: relative;
                  min-height: 1px;
                  padding-left: 15px;
                  padding-right: 15px;
                }
                .bk-bs-col-xs-1, .bk-bs-col-xs-2, .bk-bs-col-xs-3, .bk-bs-col-xs-4, .bk-bs-col-xs-5, .bk-bs-col-xs-6, .bk-bs-col-xs-7, .bk-bs-col-xs-8, .bk-bs-col-xs-9, .bk-bs-col-xs-10, .bk-bs-col-xs-11, .bk-bs-col-xs-12 {
                  float: left;
                }
                .bk-bs-col-xs-12 {
                  width: 100%;
                }
                .bk-bs-col-xs-11 {
                  width: 91.66666667%;
                }
                .bk-bs-col-xs-10 {
                  width: 83.33333333%;
                }
                .bk-bs-col-xs-9 {
                  width: 75%;
                }
                .bk-bs-col-xs-8 {
                  width: 66.66666667%;
                }
                .bk-bs-col-xs-7 {
                  width: 58.33333333%;
                }
                .bk-bs-col-xs-6 {
                  width: 50%;
                }
                .bk-bs-col-xs-5 {
                  width: 41.66666667%;
                }
                .bk-bs-col-xs-4 {
                  width: 33.33333333%;
                }
                .bk-bs-col-xs-3 {
                  width: 25%;
                }
                .bk-bs-col-xs-2 {
                  width: 16.66666667%;
                }
                .bk-bs-col-xs-1 {
                  width: 8.33333333%;
                }
                .bk-bs-col-xs-pull-12 {
                  right: 100%;
                }
                .bk-bs-col-xs-pull-11 {
                  right: 91.66666667%;
                }
                .bk-bs-col-xs-pull-10 {
                  right: 83.33333333%;
                }
                .bk-bs-col-xs-pull-9 {
                  right: 75%;
                }
                .bk-bs-col-xs-pull-8 {
                  right: 66.66666667%;
                }
                .bk-bs-col-xs-pull-7 {
                  right: 58.33333333%;
                }
                .bk-bs-col-xs-pull-6 {
                  right: 50%;
                }
                .bk-bs-col-xs-pull-5 {
                  right: 41.66666667%;
                }
                .bk-bs-col-xs-pull-4 {
                  right: 33.33333333%;
                }
                .bk-bs-col-xs-pull-3 {
                  right: 25%;
                }
                .bk-bs-col-xs-pull-2 {
                  right: 16.66666667%;
                }
                .bk-bs-col-xs-pull-1 {
                  right: 8.33333333%;
                }
                .bk-bs-col-xs-pull-0 {
                  right: 0%;
                }
                .bk-bs-col-xs-push-12 {
                  left: 100%;
                }
                .bk-bs-col-xs-push-11 {
                  left: 91.66666667%;
                }
                .bk-bs-col-xs-push-10 {
                  left: 83.33333333%;
                }
                .bk-bs-col-xs-push-9 {
                  left: 75%;
                }
                .bk-bs-col-xs-push-8 {
                  left: 66.66666667%;
                }
                .bk-bs-col-xs-push-7 {
                  left: 58.33333333%;
                }
                .bk-bs-col-xs-push-6 {
                  left: 50%;
                }
                .bk-bs-col-xs-push-5 {
                  left: 41.66666667%;
                }
                .bk-bs-col-xs-push-4 {
                  left: 33.33333333%;
                }
                .bk-bs-col-xs-push-3 {
                  left: 25%;
                }
                .bk-bs-col-xs-push-2 {
                  left: 16.66666667%;
                }
                .bk-bs-col-xs-push-1 {
                  left: 8.33333333%;
                }
                .bk-bs-col-xs-push-0 {
                  left: 0%;
                }
                .bk-bs-col-xs-offset-12 {
                  margin-left: 100%;
                }
                .bk-bs-col-xs-offset-11 {
                  margin-left: 91.66666667%;
                }
                .bk-bs-col-xs-offset-10 {
                  margin-left: 83.33333333%;
                }
                .bk-bs-col-xs-offset-9 {
                  margin-left: 75%;
                }
                .bk-bs-col-xs-offset-8 {
                  margin-left: 66.66666667%;
                }
                .bk-bs-col-xs-offset-7 {
                  margin-left: 58.33333333%;
                }
                .bk-bs-col-xs-offset-6 {
                  margin-left: 50%;
                }
                .bk-bs-col-xs-offset-5 {
                  margin-left: 41.66666667%;
                }
                .bk-bs-col-xs-offset-4 {
                  margin-left: 33.33333333%;
                }
                .bk-bs-col-xs-offset-3 {
                  margin-left: 25%;
                }
                .bk-bs-col-xs-offset-2 {
                  margin-left: 16.66666667%;
                }
                .bk-bs-col-xs-offset-1 {
                  margin-left: 8.33333333%;
                }
                .bk-bs-col-xs-offset-0 {
                  margin-left: 0%;
                }
                @media (min-width: 768px) {
                  .bk-bs-col-sm-1, .bk-bs-col-sm-2, .bk-bs-col-sm-3, .bk-bs-col-sm-4, .bk-bs-col-sm-5, .bk-bs-col-sm-6, .bk-bs-col-sm-7, .bk-bs-col-sm-8, .bk-bs-col-sm-9, .bk-bs-col-sm-10, .bk-bs-col-sm-11, .bk-bs-col-sm-12 {
                    float: left;
                  }
                  .bk-bs-col-sm-12 {
                    width: 100%;
                  }
                  .bk-bs-col-sm-11 {
                    width: 91.66666667%;
                  }
                  .bk-bs-col-sm-10 {
                    width: 83.33333333%;
                  }
                  .bk-bs-col-sm-9 {
                    width: 75%;
                  }
                  .bk-bs-col-sm-8 {
                    width: 66.66666667%;
                  }
                  .bk-bs-col-sm-7 {
                    width: 58.33333333%;
                  }
                  .bk-bs-col-sm-6 {
                    width: 50%;
                  }
                  .bk-bs-col-sm-5 {
                    width: 41.66666667%;
                  }
                  .bk-bs-col-sm-4 {
                    width: 33.33333333%;
                  }
                  .bk-bs-col-sm-3 {
                    width: 25%;
                  }
                  .bk-bs-col-sm-2 {
                    width: 16.66666667%;
                  }
                  .bk-bs-col-sm-1 {
                    width: 8.33333333%;
                  }
                  .bk-bs-col-sm-pull-12 {
                    right: 100%;
                  }
                  .bk-bs-col-sm-pull-11 {
                    right: 91.66666667%;
                  }
                  .bk-bs-col-sm-pull-10 {
                    right: 83.33333333%;
                  }
                  .bk-bs-col-sm-pull-9 {
                    right: 75%;
                  }
                  .bk-bs-col-sm-pull-8 {
                    right: 66.66666667%;
                  }
                  .bk-bs-col-sm-pull-7 {
                    right: 58.33333333%;
                  }
                  .bk-bs-col-sm-pull-6 {
                    right: 50%;
                  }
                  .bk-bs-col-sm-pull-5 {
                    right: 41.66666667%;
                  }
                  .bk-bs-col-sm-pull-4 {
                    right: 33.33333333%;
                  }
                  .bk-bs-col-sm-pull-3 {
                    right: 25%;
                  }
                  .bk-bs-col-sm-pull-2 {
                    right: 16.66666667%;
                  }
                  .bk-bs-col-sm-pull-1 {
                    right: 8.33333333%;
                  }
                  .bk-bs-col-sm-pull-0 {
                    right: 0%;
                  }
                  .bk-bs-col-sm-push-12 {
                    left: 100%;
                  }
                  .bk-bs-col-sm-push-11 {
                    left: 91.66666667%;
                  }
                  .bk-bs-col-sm-push-10 {
                    left: 83.33333333%;
                  }
                  .bk-bs-col-sm-push-9 {
                    left: 75%;
                  }
                  .bk-bs-col-sm-push-8 {
                    left: 66.66666667%;
                  }
                  .bk-bs-col-sm-push-7 {
                    left: 58.33333333%;
                  }
                  .bk-bs-col-sm-push-6 {
                    left: 50%;
                  }
                  .bk-bs-col-sm-push-5 {
                    left: 41.66666667%;
                  }
                  .bk-bs-col-sm-push-4 {
                    left: 33.33333333%;
                  }
                  .bk-bs-col-sm-push-3 {
                    left: 25%;
                  }
                  .bk-bs-col-sm-push-2 {
                    left: 16.66666667%;
                  }
                  .bk-bs-col-sm-push-1 {
                    left: 8.33333333%;
                  }
                  .bk-bs-col-sm-push-0 {
                    left: 0%;
                  }
                  .bk-bs-col-sm-offset-12 {
                    margin-left: 100%;
                  }
                  .bk-bs-col-sm-offset-11 {
                    margin-left: 91.66666667%;
                  }
                  .bk-bs-col-sm-offset-10 {
                    margin-left: 83.33333333%;
                  }
                  .bk-bs-col-sm-offset-9 {
                    margin-left: 75%;
                  }
                  .bk-bs-col-sm-offset-8 {
                    margin-left: 66.66666667%;
                  }
                  .bk-bs-col-sm-offset-7 {
                    margin-left: 58.33333333%;
                  }
                  .bk-bs-col-sm-offset-6 {
                    margin-left: 50%;
                  }
                  .bk-bs-col-sm-offset-5 {
                    margin-left: 41.66666667%;
                  }
                  .bk-bs-col-sm-offset-4 {
                    margin-left: 33.33333333%;
                  }
                  .bk-bs-col-sm-offset-3 {
                    margin-left: 25%;
                  }
                  .bk-bs-col-sm-offset-2 {
                    margin-left: 16.66666667%;
                  }
                  .bk-bs-col-sm-offset-1 {
                    margin-left: 8.33333333%;
                  }
                  .bk-bs-col-sm-offset-0 {
                    margin-left: 0%;
                  }
                }
                @media (min-width: 992px) {
                  .bk-bs-col-md-1, .bk-bs-col-md-2, .bk-bs-col-md-3, .bk-bs-col-md-4, .bk-bs-col-md-5, .bk-bs-col-md-6, .bk-bs-col-md-7, .bk-bs-col-md-8, .bk-bs-col-md-9, .bk-bs-col-md-10, .bk-bs-col-md-11, .bk-bs-col-md-12 {
                    float: left;
                  }
                  .bk-bs-col-md-12 {
                    width: 100%;
                  }
                  .bk-bs-col-md-11 {
                    width: 91.66666667%;
                  }
                  .bk-bs-col-md-10 {
                    width: 83.33333333%;
                  }
                  .bk-bs-col-md-9 {
                    width: 75%;
                  }
                  .bk-bs-col-md-8 {
                    width: 66.66666667%;
                  }
                  .bk-bs-col-md-7 {
                    width: 58.33333333%;
                  }
                  .bk-bs-col-md-6 {
                    width: 50%;
                  }
                  .bk-bs-col-md-5 {
                    width: 41.66666667%;
                  }
                  .bk-bs-col-md-4 {
                    width: 33.33333333%;
                  }
                  .bk-bs-col-md-3 {
                    width: 25%;
                  }
                  .bk-bs-col-md-2 {
                    width: 16.66666667%;
                  }
                  .bk-bs-col-md-1 {
                    width: 8.33333333%;
                  }
                  .bk-bs-col-md-pull-12 {
                    right: 100%;
                  }
                  .bk-bs-col-md-pull-11 {
                    right: 91.66666667%;
                  }
                  .bk-bs-col-md-pull-10 {
                    right: 83.33333333%;
                  }
                  .bk-bs-col-md-pull-9 {
                    right: 75%;
                  }
                  .bk-bs-col-md-pull-8 {
                    right: 66.66666667%;
                  }
                  .bk-bs-col-md-pull-7 {
                    right: 58.33333333%;
                  }
                  .bk-bs-col-md-pull-6 {
                    right: 50%;
                  }
                  .bk-bs-col-md-pull-5 {
                    right: 41.66666667%;
                  }
                  .bk-bs-col-md-pull-4 {
                    right: 33.33333333%;
                  }
                  .bk-bs-col-md-pull-3 {
                    right: 25%;
                  }
                  .bk-bs-col-md-pull-2 {
                    right: 16.66666667%;
                  }
                  .bk-bs-col-md-pull-1 {
                    right: 8.33333333%;
                  }
                  .bk-bs-col-md-pull-0 {
                    right: 0%;
                  }
                  .bk-bs-col-md-push-12 {
                    left: 100%;
                  }
                  .bk-bs-col-md-push-11 {
                    left: 91.66666667%;
                  }
                  .bk-bs-col-md-push-10 {
                    left: 83.33333333%;
                  }
                  .bk-bs-col-md-push-9 {
                    left: 75%;
                  }
                  .bk-bs-col-md-push-8 {
                    left: 66.66666667%;
                  }
                  .bk-bs-col-md-push-7 {
                    left: 58.33333333%;
                  }
                  .bk-bs-col-md-push-6 {
                    left: 50%;
                  }
                  .bk-bs-col-md-push-5 {
                    left: 41.66666667%;
                  }
                  .bk-bs-col-md-push-4 {
                    left: 33.33333333%;
                  }
                  .bk-bs-col-md-push-3 {
                    left: 25%;
                  }
                  .bk-bs-col-md-push-2 {
                    left: 16.66666667%;
                  }
                  .bk-bs-col-md-push-1 {
                    left: 8.33333333%;
                  }
                  .bk-bs-col-md-push-0 {
                    left: 0%;
                  }
                  .bk-bs-col-md-offset-12 {
                    margin-left: 100%;
                  }
                  .bk-bs-col-md-offset-11 {
                    margin-left: 91.66666667%;
                  }
                  .bk-bs-col-md-offset-10 {
                    margin-left: 83.33333333%;
                  }
                  .bk-bs-col-md-offset-9 {
                    margin-left: 75%;
                  }
                  .bk-bs-col-md-offset-8 {
                    margin-left: 66.66666667%;
                  }
                  .bk-bs-col-md-offset-7 {
                    margin-left: 58.33333333%;
                  }
                  .bk-bs-col-md-offset-6 {
                    margin-left: 50%;
                  }
                  .bk-bs-col-md-offset-5 {
                    margin-left: 41.66666667%;
                  }
                  .bk-bs-col-md-offset-4 {
                    margin-left: 33.33333333%;
                  }
                  .bk-bs-col-md-offset-3 {
                    margin-left: 25%;
                  }
                  .bk-bs-col-md-offset-2 {
                    margin-left: 16.66666667%;
                  }
                  .bk-bs-col-md-offset-1 {
                    margin-left: 8.33333333%;
                  }
                  .bk-bs-col-md-offset-0 {
                    margin-left: 0%;
                  }
                }
                @media (min-width: 1200px) {
                  .bk-bs-col-lg-1, .bk-bs-col-lg-2, .bk-bs-col-lg-3, .bk-bs-col-lg-4, .bk-bs-col-lg-5, .bk-bs-col-lg-6, .bk-bs-col-lg-7, .bk-bs-col-lg-8, .bk-bs-col-lg-9, .bk-bs-col-lg-10, .bk-bs-col-lg-11, .bk-bs-col-lg-12 {
                    float: left;
                  }
                  .bk-bs-col-lg-12 {
                    width: 100%;
                  }
                  .bk-bs-col-lg-11 {
                    width: 91.66666667%;
                  }
                  .bk-bs-col-lg-10 {
                    width: 83.33333333%;
                  }
                  .bk-bs-col-lg-9 {
                    width: 75%;
                  }
                  .bk-bs-col-lg-8 {
                    width: 66.66666667%;
                  }
                  .bk-bs-col-lg-7 {
                    width: 58.33333333%;
                  }
                  .bk-bs-col-lg-6 {
                    width: 50%;
                  }
                  .bk-bs-col-lg-5 {
                    width: 41.66666667%;
                  }
                  .bk-bs-col-lg-4 {
                    width: 33.33333333%;
                  }
                  .bk-bs-col-lg-3 {
                    width: 25%;
                  }
                  .bk-bs-col-lg-2 {
                    width: 16.66666667%;
                  }
                  .bk-bs-col-lg-1 {
                    width: 8.33333333%;
                  }
                  .bk-bs-col-lg-pull-12 {
                    right: 100%;
                  }
                  .bk-bs-col-lg-pull-11 {
                    right: 91.66666667%;
                  }
                  .bk-bs-col-lg-pull-10 {
                    right: 83.33333333%;
                  }
                  .bk-bs-col-lg-pull-9 {
                    right: 75%;
                  }
                  .bk-bs-col-lg-pull-8 {
                    right: 66.66666667%;
                  }
                  .bk-bs-col-lg-pull-7 {
                    right: 58.33333333%;
                  }
                  .bk-bs-col-lg-pull-6 {
                    right: 50%;
                  }
                  .bk-bs-col-lg-pull-5 {
                    right: 41.66666667%;
                  }
                  .bk-bs-col-lg-pull-4 {
                    right: 33.33333333%;
                  }
                  .bk-bs-col-lg-pull-3 {
                    right: 25%;
                  }
                  .bk-bs-col-lg-pull-2 {
                    right: 16.66666667%;
                  }
                  .bk-bs-col-lg-pull-1 {
                    right: 8.33333333%;
                  }
                  .bk-bs-col-lg-pull-0 {
                    right: 0%;
                  }
                  .bk-bs-col-lg-push-12 {
                    left: 100%;
                  }
                  .bk-bs-col-lg-push-11 {
                    left: 91.66666667%;
                  }
                  .bk-bs-col-lg-push-10 {
                    left: 83.33333333%;
                  }
                  .bk-bs-col-lg-push-9 {
                    left: 75%;
                  }
                  .bk-bs-col-lg-push-8 {
                    left: 66.66666667%;
                  }
                  .bk-bs-col-lg-push-7 {
                    left: 58.33333333%;
                  }
                  .bk-bs-col-lg-push-6 {
                    left: 50%;
                  }
                  .bk-bs-col-lg-push-5 {
                    left: 41.66666667%;
                  }
                  .bk-bs-col-lg-push-4 {
                    left: 33.33333333%;
                  }
                  .bk-bs-col-lg-push-3 {
                    left: 25%;
                  }
                  .bk-bs-col-lg-push-2 {
                    left: 16.66666667%;
                  }
                  .bk-bs-col-lg-push-1 {
                    left: 8.33333333%;
                  }
                  .bk-bs-col-lg-push-0 {
                    left: 0%;
                  }
                  .bk-bs-col-lg-offset-12 {
                    margin-left: 100%;
                  }
                  .bk-bs-col-lg-offset-11 {
                    margin-left: 91.66666667%;
                  }
                  .bk-bs-col-lg-offset-10 {
                    margin-left: 83.33333333%;
                  }
                  .bk-bs-col-lg-offset-9 {
                    margin-left: 75%;
                  }
                  .bk-bs-col-lg-offset-8 {
                    margin-left: 66.66666667%;
                  }
                  .bk-bs-col-lg-offset-7 {
                    margin-left: 58.33333333%;
                  }
                  .bk-bs-col-lg-offset-6 {
                    margin-left: 50%;
                  }
                  .bk-bs-col-lg-offset-5 {
                    margin-left: 41.66666667%;
                  }
                  .bk-bs-col-lg-offset-4 {
                    margin-left: 33.33333333%;
                  }
                  .bk-bs-col-lg-offset-3 {
                    margin-left: 25%;
                  }
                  .bk-bs-col-lg-offset-2 {
                    margin-left: 16.66666667%;
                  }
                  .bk-bs-col-lg-offset-1 {
                    margin-left: 8.33333333%;
                  }
                  .bk-bs-col-lg-offset-0 {
                    margin-left: 0%;
                  }
                }
                table {
                  max-width: 100%;
                  background-color: transparent;
                }
                th {
                  text-align: left;
                }
                .bk-bs-table {
                  width: 100%;
                  margin-bottom: 20px;
                }
                .bk-bs-table > thead > tr > th,
                .bk-bs-table > tbody > tr > th,
                .bk-bs-table > tfoot > tr > th,
                .bk-bs-table > thead > tr > td,
                .bk-bs-table > tbody > tr > td,
                .bk-bs-table > tfoot > tr > td {
                  padding: 8px;
                  line-height: 1.42857143;
                  vertical-align: top;
                  border-top: 1px solid #dddddd;
                }
                .bk-bs-table > thead > tr > th {
                  vertical-align: bottom;
                  border-bottom: 2px solid #dddddd;
                }
                .bk-bs-table > caption + thead > tr:first-child > th,
                .bk-bs-table > colgroup + thead > tr:first-child > th,
                .bk-bs-table > thead:first-child > tr:first-child > th,
                .bk-bs-table > caption + thead > tr:first-child > td,
                .bk-bs-table > colgroup + thead > tr:first-child > td,
                .bk-bs-table > thead:first-child > tr:first-child > td {
                  border-top: 0;
                }
                .bk-bs-table > tbody + tbody {
                  border-top: 2px solid #dddddd;
                }
                .bk-bs-table .bk-bs-table {
                  background-color: #ffffff;
                }
                .bk-bs-table-condensed > thead > tr > th,
                .bk-bs-table-condensed > tbody > tr > th,
                .bk-bs-table-condensed > tfoot > tr > th,
                .bk-bs-table-condensed > thead > tr > td,
                .bk-bs-table-condensed > tbody > tr > td,
                .bk-bs-table-condensed > tfoot > tr > td {
                  padding: 5px;
                }
                .bk-bs-table-bordered {
                  border: 1px solid #dddddd;
                }
                .bk-bs-table-bordered > thead > tr > th,
                .bk-bs-table-bordered > tbody > tr > th,
                .bk-bs-table-bordered > tfoot > tr > th,
                .bk-bs-table-bordered > thead > tr > td,
                .bk-bs-table-bordered > tbody > tr > td,
                .bk-bs-table-bordered > tfoot > tr > td {
                  border: 1px solid #dddddd;
                }
                .bk-bs-table-bordered > thead > tr > th,
                .bk-bs-table-bordered > thead > tr > td {
                  border-bottom-width: 2px;
                }
                .bk-bs-table-striped > tbody > tr:nth-child(odd) > td,
                .bk-bs-table-striped > tbody > tr:nth-child(odd) > th {
                  background-color: #f9f9f9;
                }
                .bk-bs-table-hover > tbody > tr:hover > td,
                .bk-bs-table-hover > tbody > tr:hover > th {
                  background-color: #f5f5f5;
                }
                table col[class*="col-"] {
                  position: static;
                  float: none;
                  display: table-column;
                }
                table td[class*="col-"],
                table th[class*="col-"] {
                  position: static;
                  float: none;
                  display: table-cell;
                }
                .bk-bs-table > thead > tr > td.active,
                .bk-bs-table > tbody > tr > td.active,
                .bk-bs-table > tfoot > tr > td.active,
                .bk-bs-table > thead > tr > th.active,
                .bk-bs-table > tbody > tr > th.active,
                .bk-bs-table > tfoot > tr > th.active,
                .bk-bs-table > thead > tr.active > td,
                .bk-bs-table > tbody > tr.active > td,
                .bk-bs-table > tfoot > tr.active > td,
                .bk-bs-table > thead > tr.active > th,
                .bk-bs-table > tbody > tr.active > th,
                .bk-bs-table > tfoot > tr.active > th {
                  background-color: #f5f5f5;
                }
                .bk-bs-table-hover > tbody > tr > td.active:hover,
                .bk-bs-table-hover > tbody > tr > th.active:hover,
                .bk-bs-table-hover > tbody > tr.active:hover > td,
                .bk-bs-table-hover > tbody > tr.active:hover > th {
                  background-color: #e8e8e8;
                }
                .bk-bs-table > thead > tr > td.success,
                .bk-bs-table > tbody > tr > td.success,
                .bk-bs-table > tfoot > tr > td.success,
                .bk-bs-table > thead > tr > th.success,
                .bk-bs-table > tbody > tr > th.success,
                .bk-bs-table > tfoot > tr > th.success,
                .bk-bs-table > thead > tr.success > td,
                .bk-bs-table > tbody > tr.success > td,
                .bk-bs-table > tfoot > tr.success > td,
                .bk-bs-table > thead > tr.success > th,
                .bk-bs-table > tbody > tr.success > th,
                .bk-bs-table > tfoot > tr.success > th {
                  background-color: #dff0d8;
                }
                .bk-bs-table-hover > tbody > tr > td.success:hover,
                .bk-bs-table-hover > tbody > tr > th.success:hover,
                .bk-bs-table-hover > tbody > tr.success:hover > td,
                .bk-bs-table-hover > tbody > tr.success:hover > th {
                  background-color: #d0e9c6;
                }
                .bk-bs-table > thead > tr > td.info,
                .bk-bs-table > tbody > tr > td.info,
                .bk-bs-table > tfoot > tr > td.info,
                .bk-bs-table > thead > tr > th.info,
                .bk-bs-table > tbody > tr > th.info,
                .bk-bs-table > tfoot > tr > th.info,
                .bk-bs-table > thead > tr.info > td,
                .bk-bs-table > tbody > tr.info > td,
                .bk-bs-table > tfoot > tr.info > td,
                .bk-bs-table > thead > tr.info > th,
                .bk-bs-table > tbody > tr.info > th,
                .bk-bs-table > tfoot > tr.info > th {
                  background-color: #d9edf7;
                }
                .bk-bs-table-hover > tbody > tr > td.info:hover,
                .bk-bs-table-hover > tbody > tr > th.info:hover,
                .bk-bs-table-hover > tbody > tr.info:hover > td,
                .bk-bs-table-hover > tbody > tr.info:hover > th {
                  background-color: #c4e3f3;
                }
                .bk-bs-table > thead > tr > td.warning,
                .bk-bs-table > tbody > tr > td.warning,
                .bk-bs-table > tfoot > tr > td.warning,
                .bk-bs-table > thead > tr > th.warning,
                .bk-bs-table > tbody > tr > th.warning,
                .bk-bs-table > tfoot > tr > th.warning,
                .bk-bs-table > thead > tr.warning > td,
                .bk-bs-table > tbody > tr.warning > td,
                .bk-bs-table > tfoot > tr.warning > td,
                .bk-bs-table > thead > tr.warning > th,
                .bk-bs-table > tbody > tr.warning > th,
                .bk-bs-table > tfoot > tr.warning > th {
                  background-color: #fcf8e3;
                }
                .bk-bs-table-hover > tbody > tr > td.warning:hover,
                .bk-bs-table-hover > tbody > tr > th.warning:hover,
                .bk-bs-table-hover > tbody > tr.warning:hover > td,
                .bk-bs-table-hover > tbody > tr.warning:hover > th {
                  background-color: #faf2cc;
                }
                .bk-bs-table > thead > tr > td.danger,
                .bk-bs-table > tbody > tr > td.danger,
                .bk-bs-table > tfoot > tr > td.danger,
                .bk-bs-table > thead > tr > th.danger,
                .bk-bs-table > tbody > tr > th.danger,
                .bk-bs-table > tfoot > tr > th.danger,
                .bk-bs-table > thead > tr.danger > td,
                .bk-bs-table > tbody > tr.danger > td,
                .bk-bs-table > tfoot > tr.danger > td,
                .bk-bs-table > thead > tr.danger > th,
                .bk-bs-table > tbody > tr.danger > th,
                .bk-bs-table > tfoot > tr.danger > th {
                  background-color: #f2dede;
                }
                .bk-bs-table-hover > tbody > tr > td.danger:hover,
                .bk-bs-table-hover > tbody > tr > th.danger:hover,
                .bk-bs-table-hover > tbody > tr.danger:hover > td,
                .bk-bs-table-hover > tbody > tr.danger:hover > th {
                  background-color: #ebcccc;
                }
                @media (max-width: 767px) {
                  .bk-bs-table-responsive {
                    width: 100%;
                    margin-bottom: 15px;
                    overflow-y: hidden;
                    overflow-x: scroll;
                    -ms-overflow-style: -ms-autohiding-scrollbar;
                    border: 1px solid #dddddd;
                    -webkit-overflow-scrolling: touch;
                  }
                  .bk-bs-table-responsive > .bk-bs-table {
                    margin-bottom: 0;
                  }
                  .bk-bs-table-responsive > .bk-bs-table > thead > tr > th,
                  .bk-bs-table-responsive > .bk-bs-table > tbody > tr > th,
                  .bk-bs-table-responsive > .bk-bs-table > tfoot > tr > th,
                  .bk-bs-table-responsive > .bk-bs-table > thead > tr > td,
                  .bk-bs-table-responsive > .bk-bs-table > tbody > tr > td,
                  .bk-bs-table-responsive > .bk-bs-table > tfoot > tr > td {
                    white-space: nowrap;
                  }
                  .bk-bs-table-responsive > .bk-bs-table-bordered {
                    border: 0;
                  }
                  .bk-bs-table-responsive > .bk-bs-table-bordered > thead > tr > th:first-child,
                  .bk-bs-table-responsive > .bk-bs-table-bordered > tbody > tr > th:first-child,
                  .bk-bs-table-responsive > .bk-bs-table-bordered > tfoot > tr > th:first-child,
                  .bk-bs-table-responsive > .bk-bs-table-bordered > thead > tr > td:first-child,
                  .bk-bs-table-responsive > .bk-bs-table-bordered > tbody > tr > td:first-child,
                  .bk-bs-table-responsive > .bk-bs-table-bordered > tfoot > tr > td:first-child {
                    border-left: 0;
                  }
                  .bk-bs-table-responsive > .bk-bs-table-bordered > thead > tr > th:last-child,
                  .bk-bs-table-responsive > .bk-bs-table-bordered > tbody > tr > th:last-child,
                  .bk-bs-table-responsive > .bk-bs-table-bordered > tfoot > tr > th:last-child,
                  .bk-bs-table-responsive > .bk-bs-table-bordered > thead > tr > td:last-child,
                  .bk-bs-table-responsive > .bk-bs-table-bordered > tbody > tr > td:last-child,
                  .bk-bs-table-responsive > .bk-bs-table-bordered > tfoot > tr > td:last-child {
                    border-right: 0;
                  }
                  .bk-bs-table-responsive > .bk-bs-table-bordered > tbody > tr:last-child > th,
                  .bk-bs-table-responsive > .bk-bs-table-bordered > tfoot > tr:last-child > th,
                  .bk-bs-table-responsive > .bk-bs-table-bordered > tbody > tr:last-child > td,
                  .bk-bs-table-responsive > .bk-bs-table-bordered > tfoot > tr:last-child > td {
                    border-bottom: 0;
                  }
                }
                fieldset {
                  padding: 0;
                  margin: 0;
                  border: 0;
                  min-width: 0;
                }
                legend {
                  display: block;
                  width: 100%;
                  padding: 0;
                  margin-bottom: 20px;
                  font-size: 21px;
                  line-height: inherit;
                  color: #333333;
                  border: 0;
                  border-bottom: 1px solid #e5e5e5;
                }
                label {
                  display: inline-block;
                  margin-bottom: 5px;
                  font-weight: bold;
                }
                input[type="search"] {
                  -webkit-box-sizing: border-box;
                  -moz-box-sizing: border-box;
                  box-sizing: border-box;
                }
                input[type="radio"],
                input[type="checkbox"] {
                  margin: 4px 0 0;
                  margin-top: 1px \9;
                  /* IE8-9 */
                  line-height: normal;
                }
                input[type="file"] {
                  display: block;
                }
                input[type="range"] {
                  display: block;
                  width: 100%;
                }
                select[multiple],
                select[size] {
                  height: auto;
                }
                input[type="file"]:focus,
                input[type="radio"]:focus,
                input[type="checkbox"]:focus {
                  outline: thin dotted;
                  outline: 5px auto -webkit-focus-ring-color;
                  outline-offset: -2px;
                }
                output {
                  display: block;
                  padding-top: 7px;
                  font-size: 14px;
                  line-height: 1.42857143;
                  color: #555555;
                }
                .bk-bs-form-control {
                  display: block;
                  width: 100%;
                  height: 34px;
                  padding: 6px 12px;
                  font-size: 14px;
                  line-height: 1.42857143;
                  color: #555555;
                  background-color: #ffffff;
                  background-image: none;
                  border: 1px solid #cccccc;
                  border-radius: 4px;
                  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
                  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
                  -webkit-transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;
                  transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;
                }
                .bk-bs-form-control:focus {
                  border-color: #66afe9;
                  outline: 0;
                  -webkit-box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(102, 175, 233, 0.6);
                  box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(102, 175, 233, 0.6);
                }
                .bk-bs-form-control::-moz-placeholder {
                  color: #999999;
                  opacity: 1;
                }
                .bk-bs-form-control:-ms-input-placeholder {
                  color: #999999;
                }
                .bk-bs-form-control::-webkit-input-placeholder {
                  color: #999999;
                }
                .bk-bs-form-control[disabled],
                .bk-bs-form-control[readonly],
                fieldset[disabled] .bk-bs-form-control {
                  cursor: not-allowed;
                  background-color: #eeeeee;
                  opacity: 1;
                }
                textarea.bk-bs-form-control {
                  height: auto;
                }
                input[type="search"] {
                  -webkit-appearance: none;
                }
                input[type="date"] {
                  line-height: 34px;
                }
                .bk-bs-form-group {
                  margin-bottom: 15px;
                }
                .bk-bs-radio,
                .bk-bs-checkbox {
                  display: block;
                  min-height: 20px;
                  margin-top: 10px;
                  margin-bottom: 10px;
                  padding-left: 20px;
                }
                .bk-bs-radio label,
                .bk-bs-checkbox label {
                  display: inline;
                  font-weight: normal;
                  cursor: pointer;
                }
                .bk-bs-radio input[type="radio"],
                .bk-bs-radio-inline input[type="radio"],
                .bk-bs-checkbox input[type="checkbox"],
                .bk-bs-checkbox-inline input[type="checkbox"] {
                  float: left;
                  margin-left: -20px;
                }
                .bk-bs-radio + .bk-bs-radio,
                .bk-bs-checkbox + .bk-bs-checkbox {
                  margin-top: -5px;
                }
                .bk-bs-radio-inline,
                .bk-bs-checkbox-inline {
                  display: inline-block;
                  padding-left: 20px;
                  margin-bottom: 0;
                  vertical-align: middle;
                  font-weight: normal;
                  cursor: pointer;
                }
                .bk-bs-radio-inline + .bk-bs-radio-inline,
                .bk-bs-checkbox-inline + .bk-bs-checkbox-inline {
                  margin-top: 0;
                  margin-left: 10px;
                }
                input[type="radio"][disabled],
                input[type="checkbox"][disabled],
                .bk-bs-radio[disabled],
                .bk-bs-radio-inline[disabled],
                .bk-bs-checkbox[disabled],
                .bk-bs-checkbox-inline[disabled],
                fieldset[disabled] input[type="radio"],
                fieldset[disabled] input[type="checkbox"],
                fieldset[disabled] .bk-bs-radio,
                fieldset[disabled] .bk-bs-radio-inline,
                fieldset[disabled] .bk-bs-checkbox,
                fieldset[disabled] .bk-bs-checkbox-inline {
                  cursor: not-allowed;
                }
                .bk-bs-input-sm {
                  height: 30px;
                  padding: 5px 10px;
                  font-size: 12px;
                  line-height: 1.5;
                  border-radius: 3px;
                }
                select.bk-bs-input-sm {
                  height: 30px;
                  line-height: 30px;
                }
                textarea.bk-bs-input-sm,
                select[multiple].bk-bs-input-sm {
                  height: auto;
                }
                .bk-bs-input-lg {
                  height: 46px;
                  padding: 10px 16px;
                  font-size: 18px;
                  line-height: 1.33;
                  border-radius: 6px;
                }
                select.bk-bs-input-lg {
                  height: 46px;
                  line-height: 46px;
                }
                textarea.bk-bs-input-lg,
                select[multiple].bk-bs-input-lg {
                  height: auto;
                }
                .bk-bs-has-feedback {
                  position: relative;
                }
                .bk-bs-has-feedback .bk-bs-form-control {
                  padding-right: 42.5px;
                }
                .bk-bs-has-feedback .bk-bs-form-control-feedback {
                  position: absolute;
                  top: 25px;
                  right: 0;
                  display: block;
                  width: 34px;
                  height: 34px;
                  line-height: 34px;
                  text-align: center;
                }
                .bk-bs-has-success .bk-bs-help-block,
                .bk-bs-has-success .bk-bs-control-label,
                .bk-bs-has-success .bk-bs-radio,
                .bk-bs-has-success .bk-bs-checkbox,
                .bk-bs-has-success .bk-bs-radio-inline,
                .bk-bs-has-success .bk-bs-checkbox-inline {
                  color: #3c763d;
                }
                .bk-bs-has-success .bk-bs-form-control {
                  border-color: #3c763d;
                  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
                  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
                }
                .bk-bs-has-success .bk-bs-form-control:focus {
                  border-color: #2b542c;
                  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 6px #67b168;
                  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 6px #67b168;
                }
                .bk-bs-has-success .bk-bs-input-group-addon {
                  color: #3c763d;
                  border-color: #3c763d;
                  background-color: #dff0d8;
                }
                .bk-bs-has-success .bk-bs-form-control-feedback {
                  color: #3c763d;
                }
                .bk-bs-has-warning .bk-bs-help-block,
                .bk-bs-has-warning .bk-bs-control-label,
                .bk-bs-has-warning .bk-bs-radio,
                .bk-bs-has-warning .bk-bs-checkbox,
                .bk-bs-has-warning .bk-bs-radio-inline,
                .bk-bs-has-warning .bk-bs-checkbox-inline {
                  color: #8a6d3b;
                }
                .bk-bs-has-warning .bk-bs-form-control {
                  border-color: #8a6d3b;
                  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
                  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
                }
                .bk-bs-has-warning .bk-bs-form-control:focus {
                  border-color: #66512c;
                  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 6px #c0a16b;
                  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 6px #c0a16b;
                }
                .bk-bs-has-warning .bk-bs-input-group-addon {
                  color: #8a6d3b;
                  border-color: #8a6d3b;
                  background-color: #fcf8e3;
                }
                .bk-bs-has-warning .bk-bs-form-control-feedback {
                  color: #8a6d3b;
                }
                .bk-bs-has-error .bk-bs-help-block,
                .bk-bs-has-error .bk-bs-control-label,
                .bk-bs-has-error .bk-bs-radio,
                .bk-bs-has-error .bk-bs-checkbox,
                .bk-bs-has-error .bk-bs-radio-inline,
                .bk-bs-has-error .bk-bs-checkbox-inline {
                  color: #a94442;
                }
                .bk-bs-has-error .bk-bs-form-control {
                  border-color: #a94442;
                  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
                  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
                }
                .bk-bs-has-error .bk-bs-form-control:focus {
                  border-color: #843534;
                  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 6px #ce8483;
                  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 6px #ce8483;
                }
                .bk-bs-has-error .bk-bs-input-group-addon {
                  color: #a94442;
                  border-color: #a94442;
                  background-color: #f2dede;
                }
                .bk-bs-has-error .bk-bs-form-control-feedback {
                  color: #a94442;
                }
                .bk-bs-form-control-static {
                  margin-bottom: 0;
                }
                .bk-bs-help-block {
                  display: block;
                  margin-top: 5px;
                  margin-bottom: 10px;
                  color: #737373;
                }
                @media (min-width: 768px) {
                  .bk-bs-form-inline .bk-bs-form-group {
                    display: inline-block;
                    margin-bottom: 0;
                    vertical-align: middle;
                  }
                  .bk-bs-form-inline .bk-bs-form-control {
                    display: inline-block;
                    width: auto;
                    vertical-align: middle;
                  }
                  .bk-bs-form-inline .bk-bs-input-group > .bk-bs-form-control {
                    width: 100%;
                  }
                  .bk-bs-form-inline .bk-bs-control-label {
                    margin-bottom: 0;
                    vertical-align: middle;
                  }
                  .bk-bs-form-inline .bk-bs-radio,
                  .bk-bs-form-inline .bk-bs-checkbox {
                    display: inline-block;
                    margin-top: 0;
                    margin-bottom: 0;
                    padding-left: 0;
                    vertical-align: middle;
                  }
                  .bk-bs-form-inline .bk-bs-radio input[type="radio"],
                  .bk-bs-form-inline .bk-bs-checkbox input[type="checkbox"] {
                    float: none;
                    margin-left: 0;
                  }
                  .bk-bs-form-inline .bk-bs-has-feedback .bk-bs-form-control-feedback {
                    top: 0;
                  }
                }
                .bk-bs-form-horizontal .bk-bs-control-label,
                .bk-bs-form-horizontal .bk-bs-radio,
                .bk-bs-form-horizontal .bk-bs-checkbox,
                .bk-bs-form-horizontal .bk-bs-radio-inline,
                .bk-bs-form-horizontal .bk-bs-checkbox-inline {
                  margin-top: 0;
                  margin-bottom: 0;
                  padding-top: 7px;
                }
                .bk-bs-form-horizontal .bk-bs-radio,
                .bk-bs-form-horizontal .bk-bs-checkbox {
                  min-height: 27px;
                }
                .bk-bs-form-horizontal .bk-bs-form-group {
                  margin-left: -15px;
                  margin-right: -15px;
                }
                .bk-bs-form-horizontal .bk-bs-form-control-static {
                  padding-top: 7px;
                }
                @media (min-width: 768px) {
                  .bk-bs-form-horizontal .bk-bs-control-label {
                    text-align: right;
                  }
                }
                .bk-bs-form-horizontal .bk-bs-has-feedback .bk-bs-form-control-feedback {
                  top: 0;
                  right: 15px;
                }
                .bk-bs-btn {
                  display: inline-block;
                  margin-bottom: 0;
                  font-weight: normal;
                  text-align: center;
                  vertical-align: middle;
                  cursor: pointer;
                  background-image: none;
                  border: 1px solid transparent;
                  white-space: nowrap;
                  padding: 6px 12px;
                  font-size: 14px;
                  line-height: 1.42857143;
                  border-radius: 4px;
                  -webkit-user-select: none;
                  -moz-user-select: none;
                  -ms-user-select: none;
                  user-select: none;
                }
                .bk-bs-btn:focus,
                .bk-bs-btn:active:focus,
                .bk-bs-btn.bk-bs-active:focus {
                  outline: thin dotted;
                  outline: 5px auto -webkit-focus-ring-color;
                  outline-offset: -2px;
                }
                .bk-bs-btn:hover,
                .bk-bs-btn:focus {
                  color: #333333;
                  text-decoration: none;
                }
                .bk-bs-btn:active,
                .bk-bs-btn.bk-bs-active {
                  outline: 0;
                  background-image: none;
                  -webkit-box-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);
                  box-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);
                }
                .bk-bs-btn.bk-bs-disabled,
                .bk-bs-btn[disabled],
                fieldset[disabled] .bk-bs-btn {
                  cursor: not-allowed;
                  pointer-events: none;
                  opacity: 0.65;
                  filter: alpha(opacity=65);
                  -webkit-box-shadow: none;
                  box-shadow: none;
                }
                .bk-bs-btn-default {
                  color: #333333;
                  background-color: #ffffff;
                  border-color: #cccccc;
                }
                .bk-bs-btn-default:hover,
                .bk-bs-btn-default:focus,
                .bk-bs-btn-default:active,
                .bk-bs-btn-default.bk-bs-active,
                .bk-bs-open .bk-bs-dropdown-toggle.bk-bs-btn-default {
                  color: #333333;
                  background-color: #ebebeb;
                  border-color: #adadad;
                }
                .bk-bs-btn-default:active,
                .bk-bs-btn-default.bk-bs-active,
                .bk-bs-open .bk-bs-dropdown-toggle.bk-bs-btn-default {
                  background-image: none;
                }
                .bk-bs-btn-default.bk-bs-disabled,
                .bk-bs-btn-default[disabled],
                fieldset[disabled] .bk-bs-btn-default,
                .bk-bs-btn-default.bk-bs-disabled:hover,
                .bk-bs-btn-default[disabled]:hover,
                fieldset[disabled] .bk-bs-btn-default:hover,
                .bk-bs-btn-default.bk-bs-disabled:focus,
                .bk-bs-btn-default[disabled]:focus,
                fieldset[disabled] .bk-bs-btn-default:focus,
                .bk-bs-btn-default.bk-bs-disabled:active,
                .bk-bs-btn-default[disabled]:active,
                fieldset[disabled] .bk-bs-btn-default:active,
                .bk-bs-btn-default.bk-bs-disabled.bk-bs-active,
                .bk-bs-btn-default[disabled].bk-bs-active,
                fieldset[disabled] .bk-bs-btn-default.bk-bs-active {
                  background-color: #ffffff;
                  border-color: #cccccc;
                }
                .bk-bs-btn-default .bk-bs-badge {
                  color: #ffffff;
                  background-color: #333333;
                }
                .bk-bs-btn-primary {
                  color: #ffffff;
                  background-color: #428bca;
                  border-color: #357ebd;
                }
                .bk-bs-btn-primary:hover,
                .bk-bs-btn-primary:focus,
                .bk-bs-btn-primary:active,
                .bk-bs-btn-primary.bk-bs-active,
                .bk-bs-open .bk-bs-dropdown-toggle.bk-bs-btn-primary {
                  color: #ffffff;
                  background-color: #3276b1;
                  border-color: #285e8e;
                }
                .bk-bs-btn-primary:active,
                .bk-bs-btn-primary.bk-bs-active,
                .bk-bs-open .bk-bs-dropdown-toggle.bk-bs-btn-primary {
                  background-image: none;
                }
                .bk-bs-btn-primary.bk-bs-disabled,
                .bk-bs-btn-primary[disabled],
                fieldset[disabled] .bk-bs-btn-primary,
                .bk-bs-btn-primary.bk-bs-disabled:hover,
                .bk-bs-btn-primary[disabled]:hover,
                fieldset[disabled] .bk-bs-btn-primary:hover,
                .bk-bs-btn-primary.bk-bs-disabled:focus,
                .bk-bs-btn-primary[disabled]:focus,
                fieldset[disabled] .bk-bs-btn-primary:focus,
                .bk-bs-btn-primary.bk-bs-disabled:active,
                .bk-bs-btn-primary[disabled]:active,
                fieldset[disabled] .bk-bs-btn-primary:active,
                .bk-bs-btn-primary.bk-bs-disabled.bk-bs-active,
                .bk-bs-btn-primary[disabled].bk-bs-active,
                fieldset[disabled] .bk-bs-btn-primary.bk-bs-active {
                  background-color: #428bca;
                  border-color: #357ebd;
                }
                .bk-bs-btn-primary .bk-bs-badge {
                  color: #428bca;
                  background-color: #ffffff;
                }
                .bk-bs-btn-success {
                  color: #ffffff;
                  background-color: #5cb85c;
                  border-color: #4cae4c;
                }
                .bk-bs-btn-success:hover,
                .bk-bs-btn-success:focus,
                .bk-bs-btn-success:active,
                .bk-bs-btn-success.bk-bs-active,
                .bk-bs-open .bk-bs-dropdown-toggle.bk-bs-btn-success {
                  color: #ffffff;
                  background-color: #47a447;
                  border-color: #398439;
                }
                .bk-bs-btn-success:active,
                .bk-bs-btn-success.bk-bs-active,
                .bk-bs-open .bk-bs-dropdown-toggle.bk-bs-btn-success {
                  background-image: none;
                }
                .bk-bs-btn-success.bk-bs-disabled,
                .bk-bs-btn-success[disabled],
                fieldset[disabled] .bk-bs-btn-success,
                .bk-bs-btn-success.bk-bs-disabled:hover,
                .bk-bs-btn-success[disabled]:hover,
                fieldset[disabled] .bk-bs-btn-success:hover,
                .bk-bs-btn-success.bk-bs-disabled:focus,
                .bk-bs-btn-success[disabled]:focus,
                fieldset[disabled] .bk-bs-btn-success:focus,
                .bk-bs-btn-success.bk-bs-disabled:active,
                .bk-bs-btn-success[disabled]:active,
                fieldset[disabled] .bk-bs-btn-success:active,
                .bk-bs-btn-success.bk-bs-disabled.bk-bs-active,
                .bk-bs-btn-success[disabled].bk-bs-active,
                fieldset[disabled] .bk-bs-btn-success.bk-bs-active {
                  background-color: #5cb85c;
                  border-color: #4cae4c;
                }
                .bk-bs-btn-success .bk-bs-badge {
                  color: #5cb85c;
                  background-color: #ffffff;
                }
                .bk-bs-btn-info {
                  color: #ffffff;
                  background-color: #5bc0de;
                  border-color: #46b8da;
                }
                .bk-bs-btn-info:hover,
                .bk-bs-btn-info:focus,
                .bk-bs-btn-info:active,
                .bk-bs-btn-info.bk-bs-active,
                .bk-bs-open .bk-bs-dropdown-toggle.bk-bs-btn-info {
                  color: #ffffff;
                  background-color: #39b3d7;
                  border-color: #269abc;
                }
                .bk-bs-btn-info:active,
                .bk-bs-btn-info.bk-bs-active,
                .bk-bs-open .bk-bs-dropdown-toggle.bk-bs-btn-info {
                  background-image: none;
                }
                .bk-bs-btn-info.bk-bs-disabled,
                .bk-bs-btn-info[disabled],
                fieldset[disabled] .bk-bs-btn-info,
                .bk-bs-btn-info.bk-bs-disabled:hover,
                .bk-bs-btn-info[disabled]:hover,
                fieldset[disabled] .bk-bs-btn-info:hover,
                .bk-bs-btn-info.bk-bs-disabled:focus,
                .bk-bs-btn-info[disabled]:focus,
                fieldset[disabled] .bk-bs-btn-info:focus,
                .bk-bs-btn-info.bk-bs-disabled:active,
                .bk-bs-btn-info[disabled]:active,
                fieldset[disabled] .bk-bs-btn-info:active,
                .bk-bs-btn-info.bk-bs-disabled.bk-bs-active,
                .bk-bs-btn-info[disabled].bk-bs-active,
                fieldset[disabled] .bk-bs-btn-info.bk-bs-active {
                  background-color: #5bc0de;
                  border-color: #46b8da;
                }
                .bk-bs-btn-info .bk-bs-badge {
                  color: #5bc0de;
                  background-color: #ffffff;
                }
                .bk-bs-btn-warning {
                  color: #ffffff;
                  background-color: #f0ad4e;
                  border-color: #eea236;
                }
                .bk-bs-btn-warning:hover,
                .bk-bs-btn-warning:focus,
                .bk-bs-btn-warning:active,
                .bk-bs-btn-warning.bk-bs-active,
                .bk-bs-open .bk-bs-dropdown-toggle.bk-bs-btn-warning {
                  color: #ffffff;
                  background-color: #ed9c28;
                  border-color: #d58512;
                }
                .bk-bs-btn-warning:active,
                .bk-bs-btn-warning.bk-bs-active,
                .bk-bs-open .bk-bs-dropdown-toggle.bk-bs-btn-warning {
                  background-image: none;
                }
                .bk-bs-btn-warning.bk-bs-disabled,
                .bk-bs-btn-warning[disabled],
                fieldset[disabled] .bk-bs-btn-warning,
                .bk-bs-btn-warning.bk-bs-disabled:hover,
                .bk-bs-btn-warning[disabled]:hover,
                fieldset[disabled] .bk-bs-btn-warning:hover,
                .bk-bs-btn-warning.bk-bs-disabled:focus,
                .bk-bs-btn-warning[disabled]:focus,
                fieldset[disabled] .bk-bs-btn-warning:focus,
                .bk-bs-btn-warning.bk-bs-disabled:active,
                .bk-bs-btn-warning[disabled]:active,
                fieldset[disabled] .bk-bs-btn-warning:active,
                .bk-bs-btn-warning.bk-bs-disabled.bk-bs-active,
                .bk-bs-btn-warning[disabled].bk-bs-active,
                fieldset[disabled] .bk-bs-btn-warning.bk-bs-active {
                  background-color: #f0ad4e;
                  border-color: #eea236;
                }
                .bk-bs-btn-warning .bk-bs-badge {
                  color: #f0ad4e;
                  background-color: #ffffff;
                }
                .bk-bs-btn-danger {
                  color: #ffffff;
                  background-color: #d9534f;
                  border-color: #d43f3a;
                }
                .bk-bs-btn-danger:hover,
                .bk-bs-btn-danger:focus,
                .bk-bs-btn-danger:active,
                .bk-bs-btn-danger.bk-bs-active,
                .bk-bs-open .bk-bs-dropdown-toggle.bk-bs-btn-danger {
                  color: #ffffff;
                  background-color: #d2322d;
                  border-color: #ac2925;
                }
                .bk-bs-btn-danger:active,
                .bk-bs-btn-danger.bk-bs-active,
                .bk-bs-open .bk-bs-dropdown-toggle.bk-bs-btn-danger {
                  background-image: none;
                }
                .bk-bs-btn-danger.bk-bs-disabled,
                .bk-bs-btn-danger[disabled],
                fieldset[disabled] .bk-bs-btn-danger,
                .bk-bs-btn-danger.bk-bs-disabled:hover,
                .bk-bs-btn-danger[disabled]:hover,
                fieldset[disabled] .bk-bs-btn-danger:hover,
                .bk-bs-btn-danger.bk-bs-disabled:focus,
                .bk-bs-btn-danger[disabled]:focus,
                fieldset[disabled] .bk-bs-btn-danger:focus,
                .bk-bs-btn-danger.bk-bs-disabled:active,
                .bk-bs-btn-danger[disabled]:active,
                fieldset[disabled] .bk-bs-btn-danger:active,
                .bk-bs-btn-danger.bk-bs-disabled.bk-bs-active,
                .bk-bs-btn-danger[disabled].bk-bs-active,
                fieldset[disabled] .bk-bs-btn-danger.bk-bs-active {
                  background-color: #d9534f;
                  border-color: #d43f3a;
                }
                .bk-bs-btn-danger .bk-bs-badge {
                  color: #d9534f;
                  background-color: #ffffff;
                }
                .bk-bs-btn-link {
                  color: #428bca;
                  font-weight: normal;
                  cursor: pointer;
                  border-radius: 0;
                }
                .bk-bs-btn-link,
                .bk-bs-btn-link:active,
                .bk-bs-btn-link[disabled],
                fieldset[disabled] .bk-bs-btn-link {
                  background-color: transparent;
                  -webkit-box-shadow: none;
                  box-shadow: none;
                }
                .bk-bs-btn-link,
                .bk-bs-btn-link:hover,
                .bk-bs-btn-link:focus,
                .bk-bs-btn-link:active {
                  border-color: transparent;
                }
                .bk-bs-btn-link:hover,
                .bk-bs-btn-link:focus {
                  color: #2a6496;
                  text-decoration: underline;
                  background-color: transparent;
                }
                .bk-bs-btn-link[disabled]:hover,
                fieldset[disabled] .bk-bs-btn-link:hover,
                .bk-bs-btn-link[disabled]:focus,
                fieldset[disabled] .bk-bs-btn-link:focus {
                  color: #999999;
                  text-decoration: none;
                }
                .bk-bs-btn-lg,
                .bk-bs-btn-group-lg > .bk-bs-btn {
                  padding: 10px 16px;
                  font-size: 18px;
                  line-height: 1.33;
                  border-radius: 6px;
                }
                .bk-bs-btn-sm,
                .bk-bs-btn-group-sm > .bk-bs-btn {
                  padding: 5px 10px;
                  font-size: 12px;
                  line-height: 1.5;
                  border-radius: 3px;
                }
                .bk-bs-btn-xs,
                .bk-bs-btn-group-xs > .bk-bs-btn {
                  padding: 1px 5px;
                  font-size: 12px;
                  line-height: 1.5;
                  border-radius: 3px;
                }
                .bk-bs-btn-block {
                  display: block;
                  width: 100%;
                  padding-left: 0;
                  padding-right: 0;
                }
                .bk-bs-btn-block + .bk-bs-btn-block {
                  margin-top: 5px;
                }
                input[type="submit"].bk-bs-btn-block,
                input[type="reset"].bk-bs-btn-block,
                input[type="button"].bk-bs-btn-block {
                  width: 100%;
                }
                .bk-bs-caret {
                  display: inline-block;
                  width: 0;
                  height: 0;
                  margin-left: 2px;
                  vertical-align: middle;
                  border-top: 4px solid;
                  border-right: 4px solid transparent;
                  border-left: 4px solid transparent;
                }
                .bk-bs-dropdown {
                  position: relative;
                }
                .bk-bs-dropdown-toggle:focus {
                  outline: 0;
                }
                .bk-bs-dropdown-menu {
                  position: absolute;
                  top: 100%;
                  left: 0;
                  z-index: 1000;
                  display: none;
                  float: left;
                  min-width: 160px;
                  padding: 5px 0;
                  margin: 2px 0 0;
                  list-style: none;
                  font-size: 14px;
                  background-color: #ffffff;
                  border: 1px solid #cccccc;
                  border: 1px solid rgba(0, 0, 0, 0.15);
                  border-radius: 4px;
                  -webkit-box-shadow: 0 6px 12px rgba(0, 0, 0, 0.175);
                  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.175);
                  background-clip: padding-box;
                }
                .bk-bs-dropdown-menu.bk-bs-pull-right {
                  right: 0;
                  left: auto;
                }
                .bk-bs-dropdown-menu .bk-bs-divider {
                  height: 1px;
                  margin: 9px 0;
                  overflow: hidden;
                  background-color: #e5e5e5;
                }
                .bk-bs-dropdown-menu > li > a {
                  display: block;
                  padding: 3px 20px;
                  clear: both;
                  font-weight: normal;
                  line-height: 1.42857143;
                  color: #333333;
                  white-space: nowrap;
                }
                .bk-bs-dropdown-menu > li > a:hover,
                .bk-bs-dropdown-menu > li > a:focus {
                  text-decoration: none;
                  color: #262626;
                  background-color: #f5f5f5;
                }
                .bk-bs-dropdown-menu > .bk-bs-active > a,
                .bk-bs-dropdown-menu > .bk-bs-active > a:hover,
                .bk-bs-dropdown-menu > .bk-bs-active > a:focus {
                  color: #ffffff;
                  text-decoration: none;
                  outline: 0;
                  background-color: #428bca;
                }
                .bk-bs-dropdown-menu > .bk-bs-disabled > a,
                .bk-bs-dropdown-menu > .bk-bs-disabled > a:hover,
                .bk-bs-dropdown-menu > .bk-bs-disabled > a:focus {
                  color: #999999;
                }
                .bk-bs-dropdown-menu > .bk-bs-disabled > a:hover,
                .bk-bs-dropdown-menu > .bk-bs-disabled > a:focus {
                  text-decoration: none;
                  background-color: transparent;
                  background-image: none;
                  filter: progid:DXImageTransform.bk-bs-Microsoft.bk-bs-gradient(enabled = false);
                  cursor: not-allowed;
                }
                .bk-bs-open > .bk-bs-dropdown-menu {
                  display: block;
                }
                .bk-bs-open > a {
                  outline: 0;
                }
                .bk-bs-dropdown-menu-right {
                  left: auto;
                  right: 0;
                }
                .bk-bs-dropdown-menu-left {
                  left: 0;
                  right: auto;
                }
                .bk-bs-dropdown-header {
                  display: block;
                  padding: 3px 20px;
                  font-size: 12px;
                  line-height: 1.42857143;
                  color: #999999;
                }
                .bk-bs-dropdown-backdrop {
                  position: fixed;
                  left: 0;
                  right: 0;
                  bottom: 0;
                  top: 0;
                  z-index: 990;
                }
                .bk-bs-pull-right > .bk-bs-dropdown-menu {
                  right: 0;
                  left: auto;
                }
                .bk-bs-dropup .bk-bs-caret,
                .bk-bs-navbar-fixed-bottom .bk-bs-dropdown .bk-bs-caret {
                  border-top: 0;
                  border-bottom: 4px solid;
                  content: "";
                }
                .bk-bs-dropup .bk-bs-dropdown-menu,
                .bk-bs-navbar-fixed-bottom .bk-bs-dropdown .bk-bs-dropdown-menu {
                  top: auto;
                  bottom: 100%;
                  margin-bottom: 1px;
                }
                @media (min-width: 768px) {
                  .bk-bs-navbar-right .bk-bs-dropdown-menu {
                    left: auto;
                    right: 0;
                  }
                  .bk-bs-navbar-right .bk-bs-dropdown-menu-left {
                    left: 0;
                    right: auto;
                  }
                }
                .bk-bs-btn-group,
                .bk-bs-btn-group-vertical {
                  position: relative;
                  display: inline-block;
                  vertical-align: middle;
                }
                .bk-bs-btn-group > .bk-bs-btn,
                .bk-bs-btn-group-vertical > .bk-bs-btn {
                  position: relative;
                  float: left;
                }
                .bk-bs-btn-group > .bk-bs-btn:hover,
                .bk-bs-btn-group-vertical > .bk-bs-btn:hover,
                .bk-bs-btn-group > .bk-bs-btn:focus,
                .bk-bs-btn-group-vertical > .bk-bs-btn:focus,
                .bk-bs-btn-group > .bk-bs-btn:active,
                .bk-bs-btn-group-vertical > .bk-bs-btn:active,
                .bk-bs-btn-group > .bk-bs-btn.bk-bs-active,
                .bk-bs-btn-group-vertical > .bk-bs-btn.bk-bs-active {
                  z-index: 2;
                }
                .bk-bs-btn-group > .bk-bs-btn:focus,
                .bk-bs-btn-group-vertical > .bk-bs-btn:focus {
                  outline: none;
                }
                .bk-bs-btn-group .bk-bs-btn + .bk-bs-btn,
                .bk-bs-btn-group .bk-bs-btn + .bk-bs-btn-group,
                .bk-bs-btn-group .bk-bs-btn-group + .bk-bs-btn,
                .bk-bs-btn-group .bk-bs-btn-group + .bk-bs-btn-group {
                  margin-left: -1px;
                }
                .bk-bs-btn-toolbar {
                  margin-left: -5px;
                }
                .bk-bs-btn-toolbar .bk-bs-btn-group,
                .bk-bs-btn-toolbar .bk-bs-input-group {
                  float: left;
                }
                .bk-bs-btn-toolbar > .bk-bs-btn,
                .bk-bs-btn-toolbar > .bk-bs-btn-group,
                .bk-bs-btn-toolbar > .bk-bs-input-group {
                  margin-left: 5px;
                }
                .bk-bs-btn-group > .bk-bs-btn:not(:first-child):not(:last-child):not(.bk-bs-dropdown-toggle) {
                  border-radius: 0;
                }
                .bk-bs-btn-group > .bk-bs-btn:first-child {
                  margin-left: 0;
                }
                .bk-bs-btn-group > .bk-bs-btn:first-child:not(:last-child):not(.bk-bs-dropdown-toggle) {
                  border-bottom-right-radius: 0;
                  border-top-right-radius: 0;
                }
                .bk-bs-btn-group > .bk-bs-btn:last-child:not(:first-child),
                .bk-bs-btn-group > .bk-bs-dropdown-toggle:not(:first-child) {
                  border-bottom-left-radius: 0;
                  border-top-left-radius: 0;
                }
                .bk-bs-btn-group > .bk-bs-btn-group {
                  float: left;
                }
                .bk-bs-btn-group > .bk-bs-btn-group:not(:first-child):not(:last-child) > .bk-bs-btn {
                  border-radius: 0;
                }
                .bk-bs-btn-group > .bk-bs-btn-group:first-child > .bk-bs-btn:last-child,
                .bk-bs-btn-group > .bk-bs-btn-group:first-child > .bk-bs-dropdown-toggle {
                  border-bottom-right-radius: 0;
                  border-top-right-radius: 0;
                }
                .bk-bs-btn-group > .bk-bs-btn-group:last-child > .bk-bs-btn:first-child {
                  border-bottom-left-radius: 0;
                  border-top-left-radius: 0;
                }
                .bk-bs-btn-group .bk-bs-dropdown-toggle:active,
                .bk-bs-btn-group.bk-bs-open .bk-bs-dropdown-toggle {
                  outline: 0;
                }
                .bk-bs-btn-group > .bk-bs-btn + .bk-bs-dropdown-toggle {
                  padding-left: 8px;
                  padding-right: 8px;
                }
                .bk-bs-btn-group > .bk-bs-btn-lg + .bk-bs-dropdown-toggle {
                  padding-left: 12px;
                  padding-right: 12px;
                }
                .bk-bs-btn-group.bk-bs-open .bk-bs-dropdown-toggle {
                  -webkit-box-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);
                  box-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);
                }
                .bk-bs-btn-group.bk-bs-open .bk-bs-dropdown-toggle.bk-bs-btn-link {
                  -webkit-box-shadow: none;
                  box-shadow: none;
                }
                .bk-bs-btn .bk-bs-caret {
                  margin-left: 0;
                }
                .bk-bs-btn-lg .bk-bs-caret {
                  border-width: 5px 5px 0;
                  border-bottom-width: 0;
                }
                .bk-bs-dropup .bk-bs-btn-lg .bk-bs-caret {
                  border-width: 0 5px 5px;
                }
                .bk-bs-btn-group-vertical > .bk-bs-btn,
                .bk-bs-btn-group-vertical > .bk-bs-btn-group,
                .bk-bs-btn-group-vertical > .bk-bs-btn-group > .bk-bs-btn {
                  display: block;
                  float: none;
                  width: 100%;
                  max-width: 100%;
                }
                .bk-bs-btn-group-vertical > .bk-bs-btn-group > .bk-bs-btn {
                  float: none;
                }
                .bk-bs-btn-group-vertical > .bk-bs-btn + .bk-bs-btn,
                .bk-bs-btn-group-vertical > .bk-bs-btn + .bk-bs-btn-group,
                .bk-bs-btn-group-vertical > .bk-bs-btn-group + .bk-bs-btn,
                .bk-bs-btn-group-vertical > .bk-bs-btn-group + .bk-bs-btn-group {
                  margin-top: -1px;
                  margin-left: 0;
                }
                .bk-bs-btn-group-vertical > .bk-bs-btn:not(:first-child):not(:last-child) {
                  border-radius: 0;
                }
                .bk-bs-btn-group-vertical > .bk-bs-btn:first-child:not(:last-child) {
                  border-top-right-radius: 4px;
                  border-bottom-right-radius: 0;
                  border-bottom-left-radius: 0;
                }
                .bk-bs-btn-group-vertical > .bk-bs-btn:last-child:not(:first-child) {
                  border-bottom-left-radius: 4px;
                  border-top-right-radius: 0;
                  border-top-left-radius: 0;
                }
                .bk-bs-btn-group-vertical > .bk-bs-btn-group:not(:first-child):not(:last-child) > .bk-bs-btn {
                  border-radius: 0;
                }
                .bk-bs-btn-group-vertical > .bk-bs-btn-group:first-child:not(:last-child) > .bk-bs-btn:last-child,
                .bk-bs-btn-group-vertical > .bk-bs-btn-group:first-child:not(:last-child) > .bk-bs-dropdown-toggle {
                  border-bottom-right-radius: 0;
                  border-bottom-left-radius: 0;
                }
                .bk-bs-btn-group-vertical > .bk-bs-btn-group:last-child:not(:first-child) > .bk-bs-btn:first-child {
                  border-top-right-radius: 0;
                  border-top-left-radius: 0;
                }
                .bk-bs-btn-group-justified {
                  display: table;
                  width: 100%;
                  table-layout: fixed;
                  border-collapse: separate;
                }
                .bk-bs-btn-group-justified > .bk-bs-btn,
                .bk-bs-btn-group-justified > .bk-bs-btn-group {
                  float: none;
                  display: table-cell;
                  width: 1%;
                }
                .bk-bs-btn-group-justified > .bk-bs-btn-group .bk-bs-btn {
                  width: 100%;
                }
                [data-toggle="buttons"] > .bk-bs-btn > input[type="radio"],
                [data-toggle="buttons"] > .bk-bs-btn > input[type="checkbox"] {
                  display: none;
                }
                .bk-bs-input-group {
                  position: relative;
                  display: table;
                  border-collapse: separate;
                }
                .bk-bs-input-group[class*="col-"] {
                  float: none;
                  padding-left: 0;
                  padding-right: 0;
                }
                .bk-bs-input-group .bk-bs-form-control {
                  position: relative;
                  z-index: 2;
                  float: left;
                  width: 100%;
                  margin-bottom: 0;
                }
                .bk-bs-input-group-lg > .bk-bs-form-control,
                .bk-bs-input-group-lg > .bk-bs-input-group-addon,
                .bk-bs-input-group-lg > .bk-bs-input-group-btn > .bk-bs-btn {
                  height: 46px;
                  padding: 10px 16px;
                  font-size: 18px;
                  line-height: 1.33;
                  border-radius: 6px;
                }
                select.bk-bs-input-group-lg > .bk-bs-form-control,
                select.bk-bs-input-group-lg > .bk-bs-input-group-addon,
                select.bk-bs-input-group-lg > .bk-bs-input-group-btn > .bk-bs-btn {
                  height: 46px;
                  line-height: 46px;
                }
                textarea.bk-bs-input-group-lg > .bk-bs-form-control,
                textarea.bk-bs-input-group-lg > .bk-bs-input-group-addon,
                textarea.bk-bs-input-group-lg > .bk-bs-input-group-btn > .bk-bs-btn,
                select[multiple].bk-bs-input-group-lg > .bk-bs-form-control,
                select[multiple].bk-bs-input-group-lg > .bk-bs-input-group-addon,
                select[multiple].bk-bs-input-group-lg > .bk-bs-input-group-btn > .bk-bs-btn {
                  height: auto;
                }
                .bk-bs-input-group-sm > .bk-bs-form-control,
                .bk-bs-input-group-sm > .bk-bs-input-group-addon,
                .bk-bs-input-group-sm > .bk-bs-input-group-btn > .bk-bs-btn {
                  height: 30px;
                  padding: 5px 10px;
                  font-size: 12px;
                  line-height: 1.5;
                  border-radius: 3px;
                }
                select.bk-bs-input-group-sm > .bk-bs-form-control,
                select.bk-bs-input-group-sm > .bk-bs-input-group-addon,
                select.bk-bs-input-group-sm > .bk-bs-input-group-btn > .bk-bs-btn {
                  height: 30px;
                  line-height: 30px;
                }
                textarea.bk-bs-input-group-sm > .bk-bs-form-control,
                textarea.bk-bs-input-group-sm > .bk-bs-input-group-addon,
                textarea.bk-bs-input-group-sm > .bk-bs-input-group-btn > .bk-bs-btn,
                select[multiple].bk-bs-input-group-sm > .bk-bs-form-control,
                select[multiple].bk-bs-input-group-sm > .bk-bs-input-group-addon,
                select[multiple].bk-bs-input-group-sm > .bk-bs-input-group-btn > .bk-bs-btn {
                  height: auto;
                }
                .bk-bs-input-group-addon,
                .bk-bs-input-group-btn,
                .bk-bs-input-group .bk-bs-form-control {
                  display: table-cell;
                }
                .bk-bs-input-group-addon:not(:first-child):not(:last-child),
                .bk-bs-input-group-btn:not(:first-child):not(:last-child),
                .bk-bs-input-group .bk-bs-form-control:not(:first-child):not(:last-child) {
                  border-radius: 0;
                }
                .bk-bs-input-group-addon,
                .bk-bs-input-group-btn {
                  width: 1%;
                  white-space: nowrap;
                  vertical-align: middle;
                }
                .bk-bs-input-group-addon {
                  padding: 6px 12px;
                  font-size: 14px;
                  font-weight: normal;
                  line-height: 1;
                  color: #555555;
                  text-align: center;
                  background-color: #eeeeee;
                  border: 1px solid #cccccc;
                  border-radius: 4px;
                }
                .bk-bs-input-group-addon.bk-bs-input-sm {
                  padding: 5px 10px;
                  font-size: 12px;
                  border-radius: 3px;
                }
                .bk-bs-input-group-addon.bk-bs-input-lg {
                  padding: 10px 16px;
                  font-size: 18px;
                  border-radius: 6px;
                }
                .bk-bs-input-group-addon input[type="radio"],
                .bk-bs-input-group-addon input[type="checkbox"] {
                  margin-top: 0;
                }
                .bk-bs-input-group .bk-bs-form-control:first-child,
                .bk-bs-input-group-addon:first-child,
                .bk-bs-input-group-btn:first-child > .bk-bs-btn,
                .bk-bs-input-group-btn:first-child > .bk-bs-btn-group > .bk-bs-btn,
                .bk-bs-input-group-btn:first-child > .bk-bs-dropdown-toggle,
                .bk-bs-input-group-btn:last-child > .bk-bs-btn:not(:last-child):not(.bk-bs-dropdown-toggle),
                .bk-bs-input-group-btn:last-child > .bk-bs-btn-group:not(:last-child) > .bk-bs-btn {
                  border-bottom-right-radius: 0;
                  border-top-right-radius: 0;
                }
                .bk-bs-input-group-addon:first-child {
                  border-right: 0;
                }
                .bk-bs-input-group .bk-bs-form-control:last-child,
                .bk-bs-input-group-addon:last-child,
                .bk-bs-input-group-btn:last-child > .bk-bs-btn,
                .bk-bs-input-group-btn:last-child > .bk-bs-btn-group > .bk-bs-btn,
                .bk-bs-input-group-btn:last-child > .bk-bs-dropdown-toggle,
                .bk-bs-input-group-btn:first-child > .bk-bs-btn:not(:first-child),
                .bk-bs-input-group-btn:first-child > .bk-bs-btn-group:not(:first-child) > .bk-bs-btn {
                  border-bottom-left-radius: 0;
                  border-top-left-radius: 0;
                }
                .bk-bs-input-group-addon:last-child {
                  border-left: 0;
                }
                .bk-bs-input-group-btn {
                  position: relative;
                  font-size: 0;
                  white-space: nowrap;
                }
                .bk-bs-input-group-btn > .bk-bs-btn {
                  position: relative;
                }
                .bk-bs-input-group-btn > .bk-bs-btn + .bk-bs-btn {
                  margin-left: -1px;
                }
                .bk-bs-input-group-btn > .bk-bs-btn:hover,
                .bk-bs-input-group-btn > .bk-bs-btn:focus,
                .bk-bs-input-group-btn > .bk-bs-btn:active {
                  z-index: 2;
                }
                .bk-bs-input-group-btn:first-child > .bk-bs-btn,
                .bk-bs-input-group-btn:first-child > .bk-bs-btn-group {
                  margin-right: -1px;
                }
                .bk-bs-input-group-btn:last-child > .bk-bs-btn,
                .bk-bs-input-group-btn:last-child > .bk-bs-btn-group {
                  margin-left: -1px;
                }
                .bk-bs-nav {
                  margin-bottom: 0;
                  padding-left: 0;
                  list-style: none;
                }
                .bk-bs-nav > li {
                  position: relative;
                  display: block;
                }
                .bk-bs-nav > li > a {
                  position: relative;
                  display: block;
                  padding: 10px 15px;
                }
                .bk-bs-nav > li > a:hover,
                .bk-bs-nav > li > a:focus {
                  text-decoration: none;
                  background-color: #eeeeee;
                }
                .bk-bs-nav > li.bk-bs-disabled > a {
                  color: #999999;
                }
                .bk-bs-nav > li.bk-bs-disabled > a:hover,
                .bk-bs-nav > li.bk-bs-disabled > a:focus {
                  color: #999999;
                  text-decoration: none;
                  background-color: transparent;
                  cursor: not-allowed;
                }
                .bk-bs-nav .bk-bs-open > a,
                .bk-bs-nav .bk-bs-open > a:hover,
                .bk-bs-nav .bk-bs-open > a:focus {
                  background-color: #eeeeee;
                  border-color: #428bca;
                }
                .bk-bs-nav .bk-bs-nav-divider {
                  height: 1px;
                  margin: 9px 0;
                  overflow: hidden;
                  background-color: #e5e5e5;
                }
                .bk-bs-nav > li > a > img {
                  max-width: none;
                }
                .bk-bs-nav-tabs {
                  border-bottom: 1px solid #dddddd;
                }
                .bk-bs-nav-tabs > li {
                  float: left;
                  margin-bottom: -1px;
                }
                .bk-bs-nav-tabs > li > a {
                  margin-right: 2px;
                  line-height: 1.42857143;
                  border: 1px solid transparent;
                  border-radius: 4px 4px 0 0;
                }
                .bk-bs-nav-tabs > li > a:hover {
                  border-color: #eeeeee #eeeeee #dddddd;
                }
                .bk-bs-nav-tabs > li.bk-bs-active > a,
                .bk-bs-nav-tabs > li.bk-bs-active > a:hover,
                .bk-bs-nav-tabs > li.bk-bs-active > a:focus {
                  color: #555555;
                  background-color: #ffffff;
                  border: 1px solid #dddddd;
                  border-bottom-color: transparent;
                  cursor: default;
                }
                .bk-bs-nav-tabs.bk-bs-nav-justified {
                  width: 100%;
                  border-bottom: 0;
                }
                .bk-bs-nav-tabs.bk-bs-nav-justified > li {
                  float: none;
                }
                .bk-bs-nav-tabs.bk-bs-nav-justified > li > a {
                  text-align: center;
                  margin-bottom: 5px;
                }
                .bk-bs-nav-tabs.bk-bs-nav-justified > .bk-bs-dropdown .bk-bs-dropdown-menu {
                  top: auto;
                  left: auto;
                }
                @media (min-width: 768px) {
                  .bk-bs-nav-tabs.bk-bs-nav-justified > li {
                    display: table-cell;
                    width: 1%;
                  }
                  .bk-bs-nav-tabs.bk-bs-nav-justified > li > a {
                    margin-bottom: 0;
                  }
                }
                .bk-bs-nav-tabs.bk-bs-nav-justified > li > a {
                  margin-right: 0;
                  border-radius: 4px;
                }
                .bk-bs-nav-tabs.bk-bs-nav-justified > .bk-bs-active > a,
                .bk-bs-nav-tabs.bk-bs-nav-justified > .bk-bs-active > a:hover,
                .bk-bs-nav-tabs.bk-bs-nav-justified > .bk-bs-active > a:focus {
                  border: 1px solid #dddddd;
                }
                @media (min-width: 768px) {
                  .bk-bs-nav-tabs.bk-bs-nav-justified > li > a {
                    border-bottom: 1px solid #dddddd;
                    border-radius: 4px 4px 0 0;
                  }
                  .bk-bs-nav-tabs.bk-bs-nav-justified > .bk-bs-active > a,
                  .bk-bs-nav-tabs.bk-bs-nav-justified > .bk-bs-active > a:hover,
                  .bk-bs-nav-tabs.bk-bs-nav-justified > .bk-bs-active > a:focus {
                    border-bottom-color: #ffffff;
                  }
                }
                .bk-bs-nav-pills > li {
                  float: left;
                }
                .bk-bs-nav-pills > li > a {
                  border-radius: 4px;
                }
                .bk-bs-nav-pills > li + li {
                  margin-left: 2px;
                }
                .bk-bs-nav-pills > li.bk-bs-active > a,
                .bk-bs-nav-pills > li.bk-bs-active > a:hover,
                .bk-bs-nav-pills > li.bk-bs-active > a:focus {
                  color: #ffffff;
                  background-color: #428bca;
                }
                .bk-bs-nav-stacked > li {
                  float: none;
                }
                .bk-bs-nav-stacked > li + li {
                  margin-top: 2px;
                  margin-left: 0;
                }
                .bk-bs-nav-justified {
                  width: 100%;
                }
                .bk-bs-nav-justified > li {
                  float: none;
                }
                .bk-bs-nav-justified > li > a {
                  text-align: center;
                  margin-bottom: 5px;
                }
                .bk-bs-nav-justified > .bk-bs-dropdown .bk-bs-dropdown-menu {
                  top: auto;
                  left: auto;
                }
                @media (min-width: 768px) {
                  .bk-bs-nav-justified > li {
                    display: table-cell;
                    width: 1%;
                  }
                  .bk-bs-nav-justified > li > a {
                    margin-bottom: 0;
                  }
                }
                .bk-bs-nav-tabs-justified {
                  border-bottom: 0;
                }
                .bk-bs-nav-tabs-justified > li > a {
                  margin-right: 0;
                  border-radius: 4px;
                }
                .bk-bs-nav-tabs-justified > .bk-bs-active > a,
                .bk-bs-nav-tabs-justified > .bk-bs-active > a:hover,
                .bk-bs-nav-tabs-justified > .bk-bs-active > a:focus {
                  border: 1px solid #dddddd;
                }
                @media (min-width: 768px) {
                  .bk-bs-nav-tabs-justified > li > a {
                    border-bottom: 1px solid #dddddd;
                    border-radius: 4px 4px 0 0;
                  }
                  .bk-bs-nav-tabs-justified > .bk-bs-active > a,
                  .bk-bs-nav-tabs-justified > .bk-bs-active > a:hover,
                  .bk-bs-nav-tabs-justified > .bk-bs-active > a:focus {
                    border-bottom-color: #ffffff;
                  }
                }
                .bk-bs-tab-content > .bk-bs-tab-pane {
                  display: none;
                }
                .bk-bs-tab-content > .bk-bs-active {
                  display: block;
                }
                .bk-bs-nav-tabs .bk-bs-dropdown-menu {
                  margin-top: -1px;
                  border-top-right-radius: 0;
                  border-top-left-radius: 0;
                }
                .bk-bs-label {
                  display: inline;
                  padding: .2em .6em .3em;
                  font-size: 75%;
                  font-weight: bold;
                  line-height: 1;
                  color: #ffffff;
                  text-align: center;
                  white-space: nowrap;
                  vertical-align: baseline;
                  border-radius: .25em;
                }
                .bk-bs-label[href]:hover,
                .bk-bs-label[href]:focus {
                  color: #ffffff;
                  text-decoration: none;
                  cursor: pointer;
                }
                .bk-bs-label:empty {
                  display: none;
                }
                .bk-bs-btn .bk-bs-label {
                  position: relative;
                  top: -1px;
                }
                .bk-bs-label-default {
                  background-color: #999999;
                }
                .bk-bs-label-default[href]:hover,
                .bk-bs-label-default[href]:focus {
                  background-color: #808080;
                }
                .bk-bs-label-primary {
                  background-color: #428bca;
                }
                .bk-bs-label-primary[href]:hover,
                .bk-bs-label-primary[href]:focus {
                  background-color: #3071a9;
                }
                .bk-bs-label-success {
                  background-color: #5cb85c;
                }
                .bk-bs-label-success[href]:hover,
                .bk-bs-label-success[href]:focus {
                  background-color: #449d44;
                }
                .bk-bs-label-info {
                  background-color: #5bc0de;
                }
                .bk-bs-label-info[href]:hover,
                .bk-bs-label-info[href]:focus {
                  background-color: #31b0d5;
                }
                .bk-bs-label-warning {
                  background-color: #f0ad4e;
                }
                .bk-bs-label-warning[href]:hover,
                .bk-bs-label-warning[href]:focus {
                  background-color: #ec971f;
                }
                .bk-bs-label-danger {
                  background-color: #d9534f;
                }
                .bk-bs-label-danger[href]:hover,
                .bk-bs-label-danger[href]:focus {
                  background-color: #c9302c;
                }
                .bk-bs-panel {
                  margin-bottom: 20px;
                  background-color: #ffffff;
                  border: 1px solid transparent;
                  border-radius: 4px;
                  -webkit-box-shadow: 0 1px 1px rgba(0, 0, 0, 0.05);
                  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.05);
                }
                .bk-bs-panel-body {
                  padding: 15px;
                }
                .bk-bs-panel-heading {
                  padding: 10px 15px;
                  border-bottom: 1px solid transparent;
                  border-top-right-radius: 3px;
                  border-top-left-radius: 3px;
                }
                .bk-bs-panel-heading > .bk-bs-dropdown .bk-bs-dropdown-toggle {
                  color: inherit;
                }
                .bk-bs-panel-title {
                  margin-top: 0;
                  margin-bottom: 0;
                  font-size: 16px;
                  color: inherit;
                }
                .bk-bs-panel-title > a {
                  color: inherit;
                }
                .bk-bs-panel-footer {
                  padding: 10px 15px;
                  background-color: #f5f5f5;
                  border-top: 1px solid #dddddd;
                  border-bottom-right-radius: 3px;
                  border-bottom-left-radius: 3px;
                }
                .bk-bs-panel > .bk-bs-list-group {
                  margin-bottom: 0;
                }
                .bk-bs-panel > .bk-bs-list-group .bk-bs-list-group-item {
                  border-width: 1px 0;
                  border-radius: 0;
                }
                .bk-bs-panel > .bk-bs-list-group:first-child .bk-bs-list-group-item:first-child {
                  border-top: 0;
                  border-top-right-radius: 3px;
                  border-top-left-radius: 3px;
                }
                .bk-bs-panel > .bk-bs-list-group:last-child .bk-bs-list-group-item:last-child {
                  border-bottom: 0;
                  border-bottom-right-radius: 3px;
                  border-bottom-left-radius: 3px;
                }
                .bk-bs-panel-heading + .bk-bs-list-group .bk-bs-list-group-item:first-child {
                  border-top-width: 0;
                }
                .bk-bs-panel > .bk-bs-table,
                .bk-bs-panel > .bk-bs-table-responsive > .bk-bs-table {
                  margin-bottom: 0;
                }
                .bk-bs-panel > .bk-bs-table:first-child,
                .bk-bs-panel > .bk-bs-table-responsive:first-child > .bk-bs-table:first-child {
                  border-top-right-radius: 3px;
                  border-top-left-radius: 3px;
                }
                .bk-bs-panel > .bk-bs-table:first-child > thead:first-child > tr:first-child td:first-child,
                .bk-bs-panel > .bk-bs-table-responsive:first-child > .bk-bs-table:first-child > thead:first-child > tr:first-child td:first-child,
                .bk-bs-panel > .bk-bs-table:first-child > tbody:first-child > tr:first-child td:first-child,
                .bk-bs-panel > .bk-bs-table-responsive:first-child > .bk-bs-table:first-child > tbody:first-child > tr:first-child td:first-child,
                .bk-bs-panel > .bk-bs-table:first-child > thead:first-child > tr:first-child th:first-child,
                .bk-bs-panel > .bk-bs-table-responsive:first-child > .bk-bs-table:first-child > thead:first-child > tr:first-child th:first-child,
                .bk-bs-panel > .bk-bs-table:first-child > tbody:first-child > tr:first-child th:first-child,
                .bk-bs-panel > .bk-bs-table-responsive:first-child > .bk-bs-table:first-child > tbody:first-child > tr:first-child th:first-child {
                  border-top-left-radius: 3px;
                }
                .bk-bs-panel > .bk-bs-table:first-child > thead:first-child > tr:first-child td:last-child,
                .bk-bs-panel > .bk-bs-table-responsive:first-child > .bk-bs-table:first-child > thead:first-child > tr:first-child td:last-child,
                .bk-bs-panel > .bk-bs-table:first-child > tbody:first-child > tr:first-child td:last-child,
                .bk-bs-panel > .bk-bs-table-responsive:first-child > .bk-bs-table:first-child > tbody:first-child > tr:first-child td:last-child,
                .bk-bs-panel > .bk-bs-table:first-child > thead:first-child > tr:first-child th:last-child,
                .bk-bs-panel > .bk-bs-table-responsive:first-child > .bk-bs-table:first-child > thead:first-child > tr:first-child th:last-child,
                .bk-bs-panel > .bk-bs-table:first-child > tbody:first-child > tr:first-child th:last-child,
                .bk-bs-panel > .bk-bs-table-responsive:first-child > .bk-bs-table:first-child > tbody:first-child > tr:first-child th:last-child {
                  border-top-right-radius: 3px;
                }
                .bk-bs-panel > .bk-bs-table:last-child,
                .bk-bs-panel > .bk-bs-table-responsive:last-child > .bk-bs-table:last-child {
                  border-bottom-right-radius: 3px;
                  border-bottom-left-radius: 3px;
                }
                .bk-bs-panel > .bk-bs-table:last-child > tbody:last-child > tr:last-child td:first-child,
                .bk-bs-panel > .bk-bs-table-responsive:last-child > .bk-bs-table:last-child > tbody:last-child > tr:last-child td:first-child,
                .bk-bs-panel > .bk-bs-table:last-child > tfoot:last-child > tr:last-child td:first-child,
                .bk-bs-panel > .bk-bs-table-responsive:last-child > .bk-bs-table:last-child > tfoot:last-child > tr:last-child td:first-child,
                .bk-bs-panel > .bk-bs-table:last-child > tbody:last-child > tr:last-child th:first-child,
                .bk-bs-panel > .bk-bs-table-responsive:last-child > .bk-bs-table:last-child > tbody:last-child > tr:last-child th:first-child,
                .bk-bs-panel > .bk-bs-table:last-child > tfoot:last-child > tr:last-child th:first-child,
                .bk-bs-panel > .bk-bs-table-responsive:last-child > .bk-bs-table:last-child > tfoot:last-child > tr:last-child th:first-child {
                  border-bottom-left-radius: 3px;
                }
                .bk-bs-panel > .bk-bs-table:last-child > tbody:last-child > tr:last-child td:last-child,
                .bk-bs-panel > .bk-bs-table-responsive:last-child > .bk-bs-table:last-child > tbody:last-child > tr:last-child td:last-child,
                .bk-bs-panel > .bk-bs-table:last-child > tfoot:last-child > tr:last-child td:last-child,
                .bk-bs-panel > .bk-bs-table-responsive:last-child > .bk-bs-table:last-child > tfoot:last-child > tr:last-child td:last-child,
                .bk-bs-panel > .bk-bs-table:last-child > tbody:last-child > tr:last-child th:last-child,
                .bk-bs-panel > .bk-bs-table-responsive:last-child > .bk-bs-table:last-child > tbody:last-child > tr:last-child th:last-child,
                .bk-bs-panel > .bk-bs-table:last-child > tfoot:last-child > tr:last-child th:last-child,
                .bk-bs-panel > .bk-bs-table-responsive:last-child > .bk-bs-table:last-child > tfoot:last-child > tr:last-child th:last-child {
                  border-bottom-right-radius: 3px;
                }
                .bk-bs-panel > .bk-bs-panel-body + .bk-bs-table,
                .bk-bs-panel > .bk-bs-panel-body + .bk-bs-table-responsive {
                  border-top: 1px solid #dddddd;
                }
                .bk-bs-panel > .bk-bs-table > tbody:first-child > tr:first-child th,
                .bk-bs-panel > .bk-bs-table > tbody:first-child > tr:first-child td {
                  border-top: 0;
                }
                .bk-bs-panel > .bk-bs-table-bordered,
                .bk-bs-panel > .bk-bs-table-responsive > .bk-bs-table-bordered {
                  border: 0;
                }
                .bk-bs-panel > .bk-bs-table-bordered > thead > tr > th:first-child,
                .bk-bs-panel > .bk-bs-table-responsive > .bk-bs-table-bordered > thead > tr > th:first-child,
                .bk-bs-panel > .bk-bs-table-bordered > tbody > tr > th:first-child,
                .bk-bs-panel > .bk-bs-table-responsive > .bk-bs-table-bordered > tbody > tr > th:first-child,
                .bk-bs-panel > .bk-bs-table-bordered > tfoot > tr > th:first-child,
                .bk-bs-panel > .bk-bs-table-responsive > .bk-bs-table-bordered > tfoot > tr > th:first-child,
                .bk-bs-panel > .bk-bs-table-bordered > thead > tr > td:first-child,
                .bk-bs-panel > .bk-bs-table-responsive > .bk-bs-table-bordered > thead > tr > td:first-child,
                .bk-bs-panel > .bk-bs-table-bordered > tbody > tr > td:first-child,
                .bk-bs-panel > .bk-bs-table-responsive > .bk-bs-table-bordered > tbody > tr > td:first-child,
                .bk-bs-panel > .bk-bs-table-bordered > tfoot > tr > td:first-child,
                .bk-bs-panel > .bk-bs-table-responsive > .bk-bs-table-bordered > tfoot > tr > td:first-child {
                  border-left: 0;
                }
                .bk-bs-panel > .bk-bs-table-bordered > thead > tr > th:last-child,
                .bk-bs-panel > .bk-bs-table-responsive > .bk-bs-table-bordered > thead > tr > th:last-child,
                .bk-bs-panel > .bk-bs-table-bordered > tbody > tr > th:last-child,
                .bk-bs-panel > .bk-bs-table-responsive > .bk-bs-table-bordered > tbody > tr > th:last-child,
                .bk-bs-panel > .bk-bs-table-bordered > tfoot > tr > th:last-child,
                .bk-bs-panel > .bk-bs-table-responsive > .bk-bs-table-bordered > tfoot > tr > th:last-child,
                .bk-bs-panel > .bk-bs-table-bordered > thead > tr > td:last-child,
                .bk-bs-panel > .bk-bs-table-responsive > .bk-bs-table-bordered > thead > tr > td:last-child,
                .bk-bs-panel > .bk-bs-table-bordered > tbody > tr > td:last-child,
                .bk-bs-panel > .bk-bs-table-responsive > .bk-bs-table-bordered > tbody > tr > td:last-child,
                .bk-bs-panel > .bk-bs-table-bordered > tfoot > tr > td:last-child,
                .bk-bs-panel > .bk-bs-table-responsive > .bk-bs-table-bordered > tfoot > tr > td:last-child {
                  border-right: 0;
                }
                .bk-bs-panel > .bk-bs-table-bordered > thead > tr:first-child > td,
                .bk-bs-panel > .bk-bs-table-responsive > .bk-bs-table-bordered > thead > tr:first-child > td,
                .bk-bs-panel > .bk-bs-table-bordered > tbody > tr:first-child > td,
                .bk-bs-panel > .bk-bs-table-responsive > .bk-bs-table-bordered > tbody > tr:first-child > td,
                .bk-bs-panel > .bk-bs-table-bordered > thead > tr:first-child > th,
                .bk-bs-panel > .bk-bs-table-responsive > .bk-bs-table-bordered > thead > tr:first-child > th,
                .bk-bs-panel > .bk-bs-table-bordered > tbody > tr:first-child > th,
                .bk-bs-panel > .bk-bs-table-responsive > .bk-bs-table-bordered > tbody > tr:first-child > th {
                  border-bottom: 0;
                }
                .bk-bs-panel > .bk-bs-table-bordered > tbody > tr:last-child > td,
                .bk-bs-panel > .bk-bs-table-responsive > .bk-bs-table-bordered > tbody > tr:last-child > td,
                .bk-bs-panel > .bk-bs-table-bordered > tfoot > tr:last-child > td,
                .bk-bs-panel > .bk-bs-table-responsive > .bk-bs-table-bordered > tfoot > tr:last-child > td,
                .bk-bs-panel > .bk-bs-table-bordered > tbody > tr:last-child > th,
                .bk-bs-panel > .bk-bs-table-responsive > .bk-bs-table-bordered > tbody > tr:last-child > th,
                .bk-bs-panel > .bk-bs-table-bordered > tfoot > tr:last-child > th,
                .bk-bs-panel > .bk-bs-table-responsive > .bk-bs-table-bordered > tfoot > tr:last-child > th {
                  border-bottom: 0;
                }
                .bk-bs-panel > .bk-bs-table-responsive {
                  border: 0;
                  margin-bottom: 0;
                }
                .bk-bs-panel-group {
                  margin-bottom: 20px;
                }
                .bk-bs-panel-group .bk-bs-panel {
                  margin-bottom: 0;
                  border-radius: 4px;
                  overflow: hidden;
                }
                .bk-bs-panel-group .bk-bs-panel + .bk-bs-panel {
                  margin-top: 5px;
                }
                .bk-bs-panel-group .bk-bs-panel-heading {
                  border-bottom: 0;
                }
                .bk-bs-panel-group .bk-bs-panel-heading + .bk-bs-panel-collapse .bk-bs-panel-body {
                  border-top: 1px solid #dddddd;
                }
                .bk-bs-panel-group .bk-bs-panel-footer {
                  border-top: 0;
                }
                .bk-bs-panel-group .bk-bs-panel-footer + .bk-bs-panel-collapse .bk-bs-panel-body {
                  border-bottom: 1px solid #dddddd;
                }
                .bk-bs-panel-default {
                  border-color: #dddddd;
                }
                .bk-bs-panel-default > .bk-bs-panel-heading {
                  color: #333333;
                  background-color: #f5f5f5;
                  border-color: #dddddd;
                }
                .bk-bs-panel-default > .bk-bs-panel-heading + .bk-bs-panel-collapse .bk-bs-panel-body {
                  border-top-color: #dddddd;
                }
                .bk-bs-panel-default > .bk-bs-panel-footer + .bk-bs-panel-collapse .bk-bs-panel-body {
                  border-bottom-color: #dddddd;
                }
                .bk-bs-panel-primary {
                  border-color: #428bca;
                }
                .bk-bs-panel-primary > .bk-bs-panel-heading {
                  color: #ffffff;
                  background-color: #428bca;
                  border-color: #428bca;
                }
                .bk-bs-panel-primary > .bk-bs-panel-heading + .bk-bs-panel-collapse .bk-bs-panel-body {
                  border-top-color: #428bca;
                }
                .bk-bs-panel-primary > .bk-bs-panel-footer + .bk-bs-panel-collapse .bk-bs-panel-body {
                  border-bottom-color: #428bca;
                }
                .bk-bs-panel-success {
                  border-color: #d6e9c6;
                }
                .bk-bs-panel-success > .bk-bs-panel-heading {
                  color: #3c763d;
                  background-color: #dff0d8;
                  border-color: #d6e9c6;
                }
                .bk-bs-panel-success > .bk-bs-panel-heading + .bk-bs-panel-collapse .bk-bs-panel-body {
                  border-top-color: #d6e9c6;
                }
                .bk-bs-panel-success > .bk-bs-panel-footer + .bk-bs-panel-collapse .bk-bs-panel-body {
                  border-bottom-color: #d6e9c6;
                }
                .bk-bs-panel-info {
                  border-color: #bce8f1;
                }
                .bk-bs-panel-info > .bk-bs-panel-heading {
                  color: #31708f;
                  background-color: #d9edf7;
                  border-color: #bce8f1;
                }
                .bk-bs-panel-info > .bk-bs-panel-heading + .bk-bs-panel-collapse .bk-bs-panel-body {
                  border-top-color: #bce8f1;
                }
                .bk-bs-panel-info > .bk-bs-panel-footer + .bk-bs-panel-collapse .bk-bs-panel-body {
                  border-bottom-color: #bce8f1;
                }
                .bk-bs-panel-warning {
                  border-color: #faebcc;
                }
                .bk-bs-panel-warning > .bk-bs-panel-heading {
                  color: #8a6d3b;
                  background-color: #fcf8e3;
                  border-color: #faebcc;
                }
                .bk-bs-panel-warning > .bk-bs-panel-heading + .bk-bs-panel-collapse .bk-bs-panel-body {
                  border-top-color: #faebcc;
                }
                .bk-bs-panel-warning > .bk-bs-panel-footer + .bk-bs-panel-collapse .bk-bs-panel-body {
                  border-bottom-color: #faebcc;
                }
                .bk-bs-panel-danger {
                  border-color: #ebccd1;
                }
                .bk-bs-panel-danger > .bk-bs-panel-heading {
                  color: #a94442;
                  background-color: #f2dede;
                  border-color: #ebccd1;
                }
                .bk-bs-panel-danger > .bk-bs-panel-heading + .bk-bs-panel-collapse .bk-bs-panel-body {
                  border-top-color: #ebccd1;
                }
                .bk-bs-panel-danger > .bk-bs-panel-footer + .bk-bs-panel-collapse .bk-bs-panel-body {
                  border-bottom-color: #ebccd1;
                }
                .bk-bs-close {
                  float: right;
                  font-size: 21px;
                  font-weight: bold;
                  line-height: 1;
                  color: #000000;
                  text-shadow: 0 1px 0 #ffffff;
                  opacity: 0.2;
                  filter: alpha(opacity=20);
                }
                .bk-bs-close:hover,
                .bk-bs-close:focus {
                  color: #000000;
                  text-decoration: none;
                  cursor: pointer;
                  opacity: 0.5;
                  filter: alpha(opacity=50);
                }
                button.bk-bs-close {
                  padding: 0;
                  cursor: pointer;
                  background: transparent;
                  border: 0;
                  -webkit-appearance: none;
                }
                .bk-bs-modal-open {
                  overflow: hidden;
                }
                .bk-bs-modal {
                  display: none;
                  overflow: auto;
                  overflow-y: scroll;
                  position: fixed;
                  top: 0;
                  right: 0;
                  bottom: 0;
                  left: 0;
                  z-index: 1050;
                  -webkit-overflow-scrolling: touch;
                  outline: 0;
                }
                .bk-bs-modal.bk-bs-fade .bk-bs-modal-dialog {
                  -webkit-transform: translate(0, -25%);
                  -ms-transform: translate(0, -25%);
                  transform: translate(0, -25%);
                  -webkit-transition: -webkit-transform 0.3s ease-out;
                  -moz-transition: -moz-transform 0.3s ease-out;
                  -o-transition: -o-transform 0.3s ease-out;
                  transition: transform 0.3s ease-out;
                }
                .bk-bs-modal.bk-bs-in .bk-bs-modal-dialog {
                  -webkit-transform: translate(0, 0);
                  -ms-transform: translate(0, 0);
                  transform: translate(0, 0);
                }
                .bk-bs-modal-dialog {
                  position: relative;
                  width: auto;
                  margin: 10px;
                }
                .bk-bs-modal-content {
                  position: relative;
                  background-color: #ffffff;
                  border: 1px solid #999999;
                  border: 1px solid rgba(0, 0, 0, 0.2);
                  border-radius: 6px;
                  -webkit-box-shadow: 0 3px 9px rgba(0, 0, 0, 0.5);
                  box-shadow: 0 3px 9px rgba(0, 0, 0, 0.5);
                  background-clip: padding-box;
                  outline: none;
                }
                .bk-bs-modal-backdrop {
                  position: fixed;
                  top: 0;
                  right: 0;
                  bottom: 0;
                  left: 0;
                  z-index: 1040;
                  background-color: #000000;
                }
                .bk-bs-modal-backdrop.bk-bs-fade {
                  opacity: 0;
                  filter: alpha(opacity=0);
                }
                .bk-bs-modal-backdrop.bk-bs-in {
                  opacity: 0.5;
                  filter: alpha(opacity=50);
                }
                .bk-bs-modal-header {
                  padding: 15px;
                  border-bottom: 1px solid #e5e5e5;
                  min-height: 16.42857143px;
                }
                .bk-bs-modal-header .bk-bs-close {
                  margin-top: -2px;
                }
                .bk-bs-modal-title {
                  margin: 0;
                  line-height: 1.42857143;
                }
                .bk-bs-modal-body {
                  position: relative;
                  padding: 20px;
                }
                .bk-bs-modal-footer {
                  margin-top: 15px;
                  padding: 19px 20px 20px;
                  text-align: right;
                  border-top: 1px solid #e5e5e5;
                }
                .bk-bs-modal-footer .bk-bs-btn + .bk-bs-btn {
                  margin-left: 5px;
                  margin-bottom: 0;
                }
                .bk-bs-modal-footer .bk-bs-btn-group .bk-bs-btn + .bk-bs-btn {
                  margin-left: -1px;
                }
                .bk-bs-modal-footer .bk-bs-btn-block + .bk-bs-btn-block {
                  margin-left: 0;
                }
                @media (min-width: 768px) {
                  .bk-bs-modal-dialog {
                    width: 600px;
                    margin: 30px auto;
                  }
                  .bk-bs-modal-content {
                    -webkit-box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
                    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
                  }
                  .bk-bs-modal-sm {
                    width: 300px;
                  }
                }
                @media (min-width: 992px) {
                  .bk-bs-modal-lg {
                    width: 900px;
                  }
                }
                .bk-bs-clearfix:before,
                .bk-bs-clearfix:after,
                .bk-bs-container:before,
                .bk-bs-container:after,
                .bk-bs-container-fluid:before,
                .bk-bs-container-fluid:after,
                .bk-bs-row:before,
                .bk-bs-row:after,
                .bk-bs-form-horizontal .bk-bs-form-group:before,
                .bk-bs-form-horizontal .bk-bs-form-group:after,
                .bk-bs-btn-toolbar:before,
                .bk-bs-btn-toolbar:after,
                .bk-bs-btn-group-vertical > .bk-bs-btn-group:before,
                .bk-bs-btn-group-vertical > .bk-bs-btn-group:after,
                .bk-bs-nav:before,
                .bk-bs-nav:after,
                .bk-bs-panel-body:before,
                .bk-bs-panel-body:after,
                .bk-bs-modal-footer:before,
                .bk-bs-modal-footer:after,
                .bk-crossfilter-row:before,
                .bk-crossfilter-row:after {
                  content: " ";
                  display: table;
                }
                .bk-bs-clearfix:after,
                .bk-bs-container:after,
                .bk-bs-container-fluid:after,
                .bk-bs-row:after,
                .bk-bs-form-horizontal .bk-bs-form-group:after,
                .bk-bs-btn-toolbar:after,
                .bk-bs-btn-group-vertical > .bk-bs-btn-group:after,
                .bk-bs-nav:after,
                .bk-bs-panel-body:after,
                .bk-bs-modal-footer:after,
                .bk-crossfilter-row:after {
                  clear: both;
                }
                .bk-bs-center-block {
                  display: block;
                  margin-left: auto;
                  margin-right: auto;
                }
                .bk-bs-pull-right {
                  float: right !important;
                }
                .bk-bs-pull-left {
                  float: left !important;
                }
                .bk-bs-hide {
                  display: none !important;
                }
                .bk-bs-show {
                  display: block !important;
                }
                .bk-bs-invisible {
                  visibility: hidden;
                }
                .bk-bs-text-hide {
                  font: 0/0 a;
                  color: transparent;
                  text-shadow: none;
                  background-color: transparent;
                  border: 0;
                }
                .bk-bs-hidden {
                  display: none !important;
                  visibility: hidden !important;
                }
                .bk-bs-affix {
                  position: fixed;
                }
                .bk-pivot {
                  font-family: arial;
                  font-size: 8pt;
                }
                .bk-wait {
                  font-weight: bold;
                  font-size: 18px;
                }
                .bk-pivot-toolbox {
                  min-width: 200px;
                  width: 250px;
                }
                .bk-pivot-toolbox ul {
                  padding: 0;
                }
                .bk-pivot-toolbox li {
                  padding: 5px;
                  list-style-type: none;
                }
                .bk-pivot-toolbox li:before,
                .bk-pivot-toolbox li:after {
                  content: " ";
                  display: table;
                }
                .bk-pivot-toolbox li:after {
                  clear: both;
                }
                .bk-pivot-toolbox li:before,
                .bk-pivot-toolbox li:after {
                  content: " ";
                  display: table;
                }
                .bk-pivot-toolbox li:after {
                  clear: both;
                }
                .bk-pivot-toolbox .bk-pivot-box {
                  border: 1px solid #cccccc;
                  border-radius: 5px;
                  margin-top: 5px;
                  background-color: white;
                }
                .bk-pivot-toolbox .bk-pivot-box > li:first-child {
                  background-color: #e6e6e6;
                }
                .bk-pivot-toolbox .bk-pivot-box .bk-pivot-box-header {
                  cursor: move;
                }
                .bk-pivot-toolbox .bk-pivot-box .bk-pivot-box-header .bk-field {
                  font-weight: bold;
                }
                .bk-pivot-toolbox .bk-pivot-box .bk-pivot-box-header .bk-dtype {
                  color: #999999;
                }
                .bk-pivot-toolbox .bk-pivot-box .bk-pivot-box-header .bk-bs-close {
                  font-size: 16px;
                }
                table.pvtTable {
                  text-align: left;
                  border-collapse: collapse;
                }
                table.pvtTable tr th {
                  background-color: #e6e6e6;
                  border: 1px solid #cccccc;
                  font-size: 8pt;
                  padding: 5px;
                }
                table.pvtTable .pvtColLabel {
                  text-align: center;
                }
                table.pvtTable .pvtTotalLabel {
                  text-align: right;
                }
                table.pvtTable tr td {
                  padding: 5px;
                  border: 1px solid #cccccc;
                  vertical-align: top;
                  text-align: right;
                }
                .pvtTotal,
                .pvtGrandTotal {
                  font-weight: bold;
                }
                .bk-hbox {
                  display: -webkit-box;
                  -webkit-box-orient: horizontal;
                  -webkit-box-align: stretch;
                  display: -moz-box;
                  -moz-box-orient: horizontal;
                  -moz-box-align: stretch;
                  display: box;
                  box-orient: horizontal;
                  box-align: stretch;
                  -webkit-box-flex: 0;
                  -moz-box-flex: 0;
                  box-flex: 0;
                }
                .bk-vbox {
                  display: -webkit-box;
                  -webkit-box-orient: vertical;
                  -webkit-box-align: stretch;
                  display: -moz-box;
                  -moz-box-orient: vertical;
                  -moz-box-align: stretch;
                  display: box;
                  box-orient: vertical;
                  box-align: stretch;
                  /* width must be 100% to force FF to behave like webkit */
                  width: 100%;
                  -webkit-box-flex: 0;
                  -moz-box-flex: 0;
                  box-flex: 0;
                }
                .bk-widget-form {
                  padding: 30px 30px 30px 30px;
                  overflow: hidden;
                }
                .bk-widget-form-group {
                  margin-bottom: 15px;
                }
                .bk-widget-form-input {
                  display: block;
                  width: 100%;
                  height: 34px;
                  padding: 6px 12px;
                  font-size: 14px;
                  line-height: 1.42857143;
                  color: #555555;
                  background-color: #ffffff;
                  background-image: none;
                  border: 1px solid #cccccc;
                  border-radius: 4px;
                  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
                  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
                  -webkit-transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;
                  transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;
                }
                .bk-widget-form-input:focus {
                  border-color: #66afe9;
                  outline: 0;
                  -webkit-box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(102, 175, 233, 0.6);
                  box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(102, 175, 233, 0.6);
                }
                .bk-widget-form-input::-moz-placeholder {
                  color: #999999;
                  opacity: 1;
                }
                .bk-widget-form-input:-ms-input-placeholder {
                  color: #999999;
                }
                .bk-widget-form-input::-webkit-input-placeholder {
                  color: #999999;
                }
                .bk-widget-form-input[disabled],
                .bk-widget-form-input[readonly],
                fieldset[disabled] .bk-widget-form-input {
                  cursor: not-allowed;
                  background-color: #eeeeee;
                  opacity: 1;
                }
                textarea.bk-widget-form-input {
                  height: auto;
                }
                .bk-slider-horizontal {
                  width: 100%;
                  height: 50px;
                  min-width: 200px;
                }
                .bk-slider-vertical {
                  height: 100%;
                  width: 50px;
                  min-height: 200px;
                }
                .bk-crossfilter-row {
                  margin-left: -15px;
                  margin-right: -15px;
                  height: 100%;
                  width: 100%;
                  margin: 0px;
                }
                .bk-crossfilter-panel-heading {
                  padding-top: 5px;
                  padding-bottom: 5px;
                }
                .aligntable {
                  vertical-align: top;
                }
                .bk-crossfilter-container {
                  height: 100%;
                  width: 100%;
                  whitespace: nowrap;
                  display: inline-block;
                  overflow: auto;
                }
                .bk-crossfilter-configuration {
                  overflow: auto;
                  float: left;
                  padding-right: 0px !important;
                  padding-left: 15px !important;
                  margin-left: 0px !important;
                  margin-right: 0px !important;
                }
                .bk-column-list {
                  overflow-y: auto;
                  height: 100%;
                  padding-right: 0px;
                  padding-left: 0px;
                }
                .bk-table {
                  width: 100%;
                  margin-bottom: 20px;
                  border-top: none;
                  margin-bottom: 0px;
                  text-algin: left;
                }
                .bk-table > thead > tr > th,
                .bk-table > tbody > tr > th,
                .bk-table > tfoot > tr > th,
                .bk-table > thead > tr > td,
                .bk-table > tbody > tr > td,
                .bk-table > tfoot > tr > td {
                  padding: 8px;
                  line-height: 1.42857143;
                  vertical-align: top;
                  border-top: 1px solid #dddddd;
                }
                .bk-table > thead > tr > th {
                  vertical-align: bottom;
                  border-bottom: 2px solid #dddddd;
                }
                .bk-table > caption + thead > tr:first-child > th,
                .bk-table > colgroup + thead > tr:first-child > th,
                .bk-table > thead:first-child > tr:first-child > th,
                .bk-table > caption + thead > tr:first-child > td,
                .bk-table > colgroup + thead > tr:first-child > td,
                .bk-table > thead:first-child > tr:first-child > td {
                  border-top: 0;
                }
                .bk-table > tbody + tbody {
                  border-top: 2px solid #dddddd;
                }
                .bk-table .bk-bs-table {
                  background-color: #ffffff;
                }
                .bk-table > thead > tr > th,
                .bk-table > tbody > tr > th,
                .bk-table > tfoot > tr > th,
                .bk-table > thead > tr > td,
                .bk-table > tbody > tr > td,
                .bk-table > tfoot > tr > td {
                  padding: 5px;
                }
                .bk-filters-facets {
                  height: 100%;
                  padding-left: 0px;
                  padding-right: 0px;
                }
                .bk-filters {
                  height: 45%;
                  overflow: hidden;
                  position: relative;
                }
                .bk-filters-selections {
                  position: absolute;
                  top: 30px;
                  left: 0px;
                  right: 0px;
                  bottom: 0px;
                  overflow-y: auto;
                  padding-top: 0px;
                  padding-bottom: 0px;
                  padding: 5px !important;
                }
                .bk-facet {
                  height: 14%;
                  position: relative;
                }
                .bk-facets-selections {
                  position: absolute;
                  top: 30px;
                  left: 0px;
                  right: 0px;
                  bottom: 0px;
                }
                .bk-plot-selection {
                  padding-right: 0px;
                  padding-left: 0px;
                }
                .bk-plot {
                  float: left;
                  display: inline-block;
                }
                .bk-facet-label {
                  display: inline;
                  padding: .2em .6em .3em;
                  font-size: 75%;
                  font-weight: bold;
                  line-height: 1;
                  color: #ffffff;
                  text-align: center;
                  white-space: nowrap;
                  vertical-align: baseline;
                  border-radius: .25em;
                  background-color: #5bc0de;
                  margin-left: 5px;
                  display: inline-block;
                  cursor: pointer;
                }
                .bk-facet-label[href]:hover,
                .bk-facet-label[href]:focus {
                  color: #ffffff;
                  text-decoration: none;
                  cursor: pointer;
                }
                .bk-facet-label:empty {
                  display: none;
                }
                .bk-bs-btn .bk-facet-label {
                  position: relative;
                  top: -1px;
                }
                .bk-facet-label[href]:hover,
                .bk-facet-label[href]:focus {
                  background-color: #31b0d5;
                }
                .bk-filters-selections .bk-sidebar {
                  -webkit-transform: scale(0.5, 0.5) !important;
                  transform: scale(0.5, 0.5) !important;
                }
                .bk-crossfilter .bk-widget-form {
                  padding: 5px;
                }
                svg {
                  font: 12px sans-serif;
                  margin: 0;
                }
                .ui-dialog-titlebar {
                  height: 16px;
                }
                .bk-button-bar {
                  margin-top: 0px;
                  margin-bottom: 0px;
                  padding-top: 0px;
                  padding-bottom: 2px;
                  position: relative;
                  display: inline-block;
                  vertical-align: middle;
                }
                .bk-button-bar > .bk-bs-btn {
                  position: relative;
                  float: left;
                }
                .bk-button-bar > .bk-bs-btn:hover,
                .bk-button-bar > .bk-bs-btn:focus,
                .bk-button-bar > .bk-bs-btn:active,
                .bk-button-bar > .bk-bs-btn.bk-bs-active {
                  z-index: 2;
                }
                .bk-button-bar > .bk-bs-btn:focus {
                  outline: none;
                }
                .bk-button-bar .bk-bs-btn + .bk-bs-btn,
                .bk-button-bar .bk-bs-btn + .bk-bs-btn-group,
                .bk-button-bar .bk-bs-btn-group + .bk-bs-btn,
                .bk-button-bar .bk-bs-btn-group + .bk-bs-btn-group {
                  margin-left: -1px;
                }
                .bk-toolbar-button {
                  display: inline-block;
                  margin-bottom: 0;
                  font-weight: normal;
                  text-align: center;
                  vertical-align: middle;
                  cursor: pointer;
                  background-image: none;
                  border: 1px solid transparent;
                  white-space: nowrap;
                  padding: 6px 12px;
                  font-size: 14px;
                  line-height: 1.42857143;
                  border-radius: 4px;
                  -webkit-user-select: none;
                  -moz-user-select: none;
                  -ms-user-select: none;
                  user-select: none;
                  padding: 5px 10px;
                  font-size: 12px;
                  line-height: 1.5;
                  border-radius: 3px;
                  color: #333333;
                  background-color: #ffffff;
                  border-color: #cccccc;
                }
                .bk-toolbar-button:focus,
                .bk-toolbar-button:active:focus,
                .bk-toolbar-button.bk-bs-active:focus {
                  outline: thin dotted;
                  outline: 5px auto -webkit-focus-ring-color;
                  outline-offset: -2px;
                }
                .bk-toolbar-button:hover,
                .bk-toolbar-button:focus {
                  color: #333333;
                  text-decoration: none;
                }
                .bk-toolbar-button:active,
                .bk-toolbar-button.bk-bs-active {
                  outline: 0;
                  background-image: none;
                  -webkit-box-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);
                  box-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);
                }
                .bk-toolbar-button.bk-bs-disabled,
                .bk-toolbar-button[disabled],
                fieldset[disabled] .bk-toolbar-button {
                  cursor: not-allowed;
                  pointer-events: none;
                  opacity: 0.65;
                  filter: alpha(opacity=65);
                  -webkit-box-shadow: none;
                  box-shadow: none;
                }
                .bk-toolbar-button:hover,
                .bk-toolbar-button:focus,
                .bk-toolbar-button:active,
                .bk-toolbar-button.bk-bs-active,
                .bk-bs-open .bk-bs-dropdown-toggle.bk-toolbar-button {
                  color: #333333;
                  background-color: #ebebeb;
                  border-color: #adadad;
                }
                .bk-toolbar-button:active,
                .bk-toolbar-button.bk-bs-active,
                .bk-bs-open .bk-bs-dropdown-toggle.bk-toolbar-button {
                  background-image: none;
                }
                .bk-toolbar-button.bk-bs-disabled,
                .bk-toolbar-button[disabled],
                fieldset[disabled] .bk-toolbar-button,
                .bk-toolbar-button.bk-bs-disabled:hover,
                .bk-toolbar-button[disabled]:hover,
                fieldset[disabled] .bk-toolbar-button:hover,
                .bk-toolbar-button.bk-bs-disabled:focus,
                .bk-toolbar-button[disabled]:focus,
                fieldset[disabled] .bk-toolbar-button:focus,
                .bk-toolbar-button.bk-bs-disabled:active,
                .bk-toolbar-button[disabled]:active,
                fieldset[disabled] .bk-toolbar-button:active,
                .bk-toolbar-button.bk-bs-disabled.bk-bs-active,
                .bk-toolbar-button[disabled].bk-bs-active,
                fieldset[disabled] .bk-toolbar-button.bk-bs-active {
                  background-color: #ffffff;
                  border-color: #cccccc;
                }
                .bk-toolbar-button .bk-bs-badge {
                  color: #ffffff;
                  background-color: #333333;
                }
                .grid_plot .button_bar {
                  display: none;
                }
                .grid_plot .bk-logo {
                  display: none;
                }
                .bokeh_canvas_wrapper {
                  position: relative;
                  font-size: 12pt;
                }
                .bokeh_canvas {
                  position: absolute;
                  font-size: 12pt;
                }
                .bokeh_canvas_wrapper .bokeh_gmap {
                  position: absolute !important;
                  z-index: -5;
                }
                .plotview {
                  clear: both;
                }
                .bokeh_canvas_wrapper {
                  position: relative;
                  font-size: 12pt;
                  float: left;
                }
                .bokeh_canvas {
                  position: absolute;
                  font-size: 12pt;
                }
                .bokeh_tooltip.left::before {
                  position: absolute;
                  top: 40%;
                  width: 0px;
                  height: 0px;
                  left: -9px;
                  border-style: solid;
                  border-width: 7px 10px 7px 0;
                  border-color: transparent #1e4B6c transparent transparent;
                  content: " ";
                  display: block;
                }
                .bokeh_tooltip.right::after {
                  position: absolute;
                  top: 40%;
                  width: 0px;
                  height: 0px;
                  right: -9px;
                  border-style: solid;
                  border-width: 7px 0 7px 10px;
                  border-color: transparent transparent transparent #1e4B6c;
                  content: " ";
                  display: block;
                }
                .bokeh_tooltip {
                  position: absolute;
                  padding: 5px;
                  background-color: #1e4B6c;
                  border-radius: 10px;
                  pointer-events: none;
                }
                .bokeh_tooltip_row_label {
                  color: #9ab9b1;
                  font-family: Helvetica, sans-serif;
                  text-align: right;
                }
                .bokeh_tooltip_row_value {
                  color: #e2ddbd;
                  font-family: Helvetica, sans-serif;
                }
                .bokeh_tooltip_color_block {
                  width: 12px;
                  height: 12px;
                  margin-left: 5px;
                  margin-right: 5px;
                  outline: #dddddd solid 1px;
                  display: inline-block;
                }
                .bokeh_gmap {
                  position: absolute;
                  border: 0;
                  z-index: -5;
                }
                .shading {
                  position: absolute;
                  display: block;
                  border: 1px dashed green;
                  z-index: 100;
                }
                .gridplot_container {
                  position: relative;
                }
                .gridplot_container .gp_plotwrapper {
                  position: absolute;
                }
                .table_wrap table {
                  display: block;
                  margin: 5px;
                  height: 300px;
                  overflow-y: scroll;
                }
                .plot_wrap .button_bar {
                  height: 30px;
                }
                .plot_wrap .button_bar * {
                  display: none;
                }
                .plot_wrap:hover .button_bar * {
                  display: inherit;
                }
                .maximize {
                  display: none;
                  float: right;
                }
                .plotclose {
                  float: right;
                }
                .plotsidebar {
                  float: left;
                  width: 350px;
                  overflow-x: auto;
                }
                .maxplot {
                  float: left;
                }
                .bokehtable {
                  overflow: auto;
                }
                .pandassize,
                .pandasoffset {
                  width: 30px !important;
                  height: 20px !important;
                  padding: 1px !important;
                }
                .hide {
                  display: none;
                }
                .pandasicons {
                  position: relative;
                  top: 5px;
                }
                .bokehdocheading {
                  background-color: #ccc;
                }
                .bokehdocheading:hover > .bokehdelete {
                  display: none;
                  float: right;
                }
                .bokehdelete {
                  float: right;
                }
                .pandasgroup {
                  width: auto;
                  height: 20px !important;
                  padding: 1px !important;
                }
                .pandasagg {
                  width: auto;
                  height: 20px !important;
                  padding: 1px !important;
                }
                .tablecontrolstate {
                  width: auto;
                  height: 20px !important;
                  padding: 1px !important;
                }
                .paginatedisplay {
                  overflow: hidden;
                }
                .pagination {
                  margin: 0 !important;
                }
                .tablecontrolform {
                  margin: 0;
                }
                .computedtxtbox,
                .computedname,
                .search {
                  height: 20px !important;
                  padding: 1px !important;
                }
                .plottitle {
                  padding-left: 50px;
                  padding-bottom: 10px;
                }
                .dataslider {
                  margin: 10px 5px;
                  width: 20px;
                }
                .maxlabel,
                .minlabel {
                  margin-top: 10px;
                  margin-bottom: 10px;
                }
                .jsp {
                  overflow: hidden;
                }
                
                /* END /Users/davekensinger/miniconda3/lib/python3.4/site-packages/bokeh/server/static/css/bokeh.css */
        </style>
        <script type="text/javascript">
            /* BEGIN /Users/davekensinger/miniconda3/lib/python3.4/site-packages/bokeh/server/static/js/bokeh.js */
                (function (root, factory) {
                  root.Bokeh = factory();
                }(this, function () {
                  //almond, and your modules will be inlined here
                
                /**
                 * @license almond 0.2.9 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
                 * Available via the MIT or new BSD license.
                 * see: http://github.com/jrburke/almond for details
                 */
                //Going sloppy to avoid 'use strict' string cost, but strict practices should
                //be followed.
                /*jslint sloppy: true */
                /*global setTimeout: false */
                
                var requirejs, require, define;
                (function (undef) {
                    var main, req, makeMap, handlers,
                        defined = {},
                        waiting = {},
                        config = {},
                        defining = {},
                        hasOwn = Object.prototype.hasOwnProperty,
                        aps = [].slice,
                        jsSuffixRegExp = /\.js$/;
                
                    function hasProp(obj, prop) {
                        return hasOwn.call(obj, prop);
                    }
                
                    /**
                     * Given a relative module name, like ./something, normalize it to
                     * a real name that can be mapped to a path.
                     * @param {String} name the relative name
                     * @param {String} baseName a real name that the name arg is relative
                     * to.
                     * @returns {String} normalized name
                     */
                    function normalize(name, baseName) {
                        var nameParts, nameSegment, mapValue, foundMap, lastIndex,
                            foundI, foundStarMap, starI, i, j, part,
                            baseParts = baseName && baseName.split("/"),
                            map = config.map,
                            starMap = (map && map['*']) || {};
                
                        //Adjust any relative paths.
                        if (name && name.charAt(0) === ".") {
                            //If have a base name, try to normalize against it,
                            //otherwise, assume it is a top-level require that will
                            //be relative to baseUrl in the end.
                            if (baseName) {
                                //Convert baseName to array, and lop off the last part,
                                //so that . matches that "directory" and not name of the baseName's
                                //module. For instance, baseName of "one/two/three", maps to
                                //"one/two/three.js", but we want the directory, "one/two" for
                                //this normalization.
                                baseParts = baseParts.slice(0, baseParts.length - 1);
                                name = name.split('/');
                                lastIndex = name.length - 1;
                
                                // Node .js allowance:
                                if (config.nodeIdCompat && jsSuffixRegExp.test(name[lastIndex])) {
                                    name[lastIndex] = name[lastIndex].replace(jsSuffixRegExp, '');
                                }
                
                                name = baseParts.concat(name);
                
                                //start trimDots
                                for (i = 0; i < name.length; i += 1) {
                                    part = name[i];
                                    if (part === ".") {
                                        name.splice(i, 1);
                                        i -= 1;
                                    } else if (part === "..") {
                                        if (i === 1 && (name[2] === '..' || name[0] === '..')) {
                                            //End of the line. Keep at least one non-dot
                                            //path segment at the front so it can be mapped
                                            //correctly to disk. Otherwise, there is likely
                                            //no path mapping for a path starting with '..'.
                                            //This can still fail, but catches the most reasonable
                                            //uses of ..
                                            break;
                                        } else if (i > 0) {
                                            name.splice(i - 1, 2);
                                            i -= 2;
                                        }
                                    }
                                }
                                //end trimDots
                
                                name = name.join("/");
                            } else if (name.indexOf('./') === 0) {
                                // No baseName, so this is ID is resolved relative
                                // to baseUrl, pull off the leading dot.
                                name = name.substring(2);
                            }
                        }
                
                        //Apply map config if available.
                        if ((baseParts || starMap) && map) {
                            nameParts = name.split('/');
                
                            for (i = nameParts.length; i > 0; i -= 1) {
                                nameSegment = nameParts.slice(0, i).join("/");
                
                                if (baseParts) {
                                    //Find the longest baseName segment match in the config.
                                    //So, do joins on the biggest to smallest lengths of baseParts.
                                    for (j = baseParts.length; j > 0; j -= 1) {
                                        mapValue = map[baseParts.slice(0, j).join('/')];
                
                                        //baseName segment has  config, find if it has one for
                                        //this name.
                                        if (mapValue) {
                                            mapValue = mapValue[nameSegment];
                                            if (mapValue) {
                                                //Match, update name to the new value.
                                                foundMap = mapValue;
                                                foundI = i;
                                                break;
                                            }
                                        }
                                    }
                                }
                
                                if (foundMap) {
                                    break;
                                }
                
                                //Check for a star map match, but just hold on to it,
                                //if there is a shorter segment match later in a matching
                                //config, then favor over this star map.
                                if (!foundStarMap && starMap && starMap[nameSegment]) {
                                    foundStarMap = starMap[nameSegment];
                                    starI = i;
                                }
                            }
                
                            if (!foundMap && foundStarMap) {
                                foundMap = foundStarMap;
                                foundI = starI;
                            }
                
                            if (foundMap) {
                                nameParts.splice(0, foundI, foundMap);
                                name = nameParts.join('/');
                            }
                        }
                
                        return name;
                    }
                
                    function makeRequire(relName, forceSync) {
                        return function () {
                            //A version of a require function that passes a moduleName
                            //value for items that may need to
                            //look up paths relative to the moduleName
                            return req.apply(undef, aps.call(arguments, 0).concat([relName, forceSync]));
                        };
                    }
                
                    function makeNormalize(relName) {
                        return function (name) {
                            return normalize(name, relName);
                        };
                    }
                
                    function makeLoad(depName) {
                        return function (value) {
                            defined[depName] = value;
                        };
                    }
                
                    function callDep(name) {
                        if (hasProp(waiting, name)) {
                            var args = waiting[name];
                            delete waiting[name];
                            defining[name] = true;
                            main.apply(undef, args);
                        }
                
                        if (!hasProp(defined, name) && !hasProp(defining, name)) {
                            throw new Error('No ' + name);
                        }
                        return defined[name];
                    }
                
                    //Turns a plugin!resource to [plugin, resource]
                    //with the plugin being undefined if the name
                    //did not have a plugin prefix.
                    function splitPrefix(name) {
                        var prefix,
                            index = name ? name.indexOf('!') : -1;
                        if (index > -1) {
                            prefix = name.substring(0, index);
                            name = name.substring(index + 1, name.length);
                        }
                        return [prefix, name];
                    }
                
                    /**
                     * Makes a name map, normalizing the name, and using a plugin
                     * for normalization if necessary. Grabs a ref to plugin
                     * too, as an optimization.
                     */
                    makeMap = function (name, relName) {
                        var plugin,
                            parts = splitPrefix(name),
                            prefix = parts[0];
                
                        name = parts[1];
                
                        if (prefix) {
                            prefix = normalize(prefix, relName);
                            plugin = callDep(prefix);
                        }
                
                        //Normalize according
                        if (prefix) {
                            if (plugin && plugin.normalize) {
                                name = plugin.normalize(name, makeNormalize(relName));
                            } else {
                                name = normalize(name, relName);
                            }
                        } else {
                            name = normalize(name, relName);
                            parts = splitPrefix(name);
                            prefix = parts[0];
                            name = parts[1];
                            if (prefix) {
                                plugin = callDep(prefix);
                            }
                        }
                
                        //Using ridiculous property names for space reasons
                        return {
                            f: prefix ? prefix + '!' + name : name, //fullName
                            n: name,
                            pr: prefix,
                            p: plugin
                        };
                    };
                
                    function makeConfig(name) {
                        return function () {
                            return (config && config.config && config.config[name]) || {};
                        };
                    }
                
                    handlers = {
                        require: function (name) {
                            return makeRequire(name);
                        },
                        exports: function (name) {
                            var e = defined[name];
                            if (typeof e !== 'undefined') {
                                return e;
                            } else {
                                return (defined[name] = {});
                            }
                        },
                        module: function (name) {
                            return {
                                id: name,
                                uri: '',
                                exports: defined[name],
                                config: makeConfig(name)
                            };
                        }
                    };
                
                    main = function (name, deps, callback, relName) {
                        var cjsModule, depName, ret, map, i,
                            args = [],
                            callbackType = typeof callback,
                            usingExports;
                
                        //Use name if no relName
                        relName = relName || name;
                
                        //Call the callback to define the module, if necessary.
                        if (callbackType === 'undefined' || callbackType === 'function') {
                            //Pull out the defined dependencies and pass the ordered
                            //values to the callback.
                            //Default to [require, exports, module] if no deps
                            deps = !deps.length && callback.length ? ['require', 'exports', 'module'] : deps;
                            for (i = 0; i < deps.length; i += 1) {
                                map = makeMap(deps[i], relName);
                                depName = map.f;
                
                                //Fast path CommonJS standard dependencies.
                                if (depName === "require") {
                                    args[i] = handlers.require(name);
                                } else if (depName === "exports") {
                                    //CommonJS module spec 1.1
                                    args[i] = handlers.exports(name);
                                    usingExports = true;
                                } else if (depName === "module") {
                                    //CommonJS module spec 1.1
                                    cjsModule = args[i] = handlers.module(name);
                                } else if (hasProp(defined, depName) ||
                                           hasProp(waiting, depName) ||
                                           hasProp(defining, depName)) {
                                    args[i] = callDep(depName);
                                } else if (map.p) {
                                    map.p.load(map.n, makeRequire(relName, true), makeLoad(depName), {});
                                    args[i] = defined[depName];
                                } else {
                                    throw new Error(name + ' missing ' + depName);
                                }
                            }
                
                            ret = callback ? callback.apply(defined[name], args) : undefined;
                
                            if (name) {
                                //If setting exports via "module" is in play,
                                //favor that over return value and exports. After that,
                                //favor a non-undefined return value over exports use.
                                if (cjsModule && cjsModule.exports !== undef &&
                                        cjsModule.exports !== defined[name]) {
                                    defined[name] = cjsModule.exports;
                                } else if (ret !== undef || !usingExports) {
                                    //Use the return value from the function.
                                    defined[name] = ret;
                                }
                            }
                        } else if (name) {
                            //May just be an object definition for the module. Only
                            //worry about defining if have a module name.
                            defined[name] = callback;
                        }
                    };
                
                    requirejs = require = req = function (deps, callback, relName, forceSync, alt) {
                        if (typeof deps === "string") {
                            if (handlers[deps]) {
                                //callback in this case is really relName
                                return handlers[deps](callback);
                            }
                            //Just return the module wanted. In this scenario, the
                            //deps arg is the module name, and second arg (if passed)
                            //is just the relName.
                            //Normalize module name, if it contains . or ..
                            return callDep(makeMap(deps, callback).f);
                        } else if (!deps.splice) {
                            //deps is a config object, not an array.
                            config = deps;
                            if (config.deps) {
                                req(config.deps, config.callback);
                            }
                            if (!callback) {
                                return;
                            }
                
                            if (callback.splice) {
                                //callback is an array, which means it is a dependency list.
                                //Adjust args if there are dependencies
                                deps = callback;
                                callback = relName;
                                relName = null;
                            } else {
                                deps = undef;
                            }
                        }
                
                        //Support require(['a'])
                        callback = callback || function () {};
                
                        //If relName is a function, it is an errback handler,
                        //so remove it.
                        if (typeof relName === 'function') {
                            relName = forceSync;
                            forceSync = alt;
                        }
                
                        //Simulate async callback;
                        if (forceSync) {
                            main(undef, deps, callback, relName);
                        } else {
                            //Using a non-zero value because of concern for what old browsers
                            //do, and latest browsers "upgrade" to 4 if lower value is used:
                            //http://www.whatwg.org/specs/web-apps/current-work/multipage/timers.html#dom-windowtimers-settimeout:
                            //If want a value immediately, use require('id') instead -- something
                            //that works in almond on the global level, but not guaranteed and
                            //unlikely to work in other AMD implementations.
                            setTimeout(function () {
                                main(undef, deps, callback, relName);
                            }, 4);
                        }
                
                        return req;
                    };
                
                    /**
                     * Just drops the config on the floor, but returns req in case
                     * the config return value is used.
                     */
                    req.config = function (cfg) {
                        return req(cfg);
                    };
                
                    /**
                     * Expose module registry for debugging and tooling
                     */
                    requirejs._defined = defined;
                
                    define = function (name, deps, callback) {
                
                        //This module may not have dependencies
                        if (!deps.splice) {
                            //deps is not an array, so probably means
                            //an object literal or factory function for
                            //the value. Adjust args.
                            callback = deps;
                            deps = [];
                        }
                
                        if (!hasProp(defined, name) && !hasProp(waiting, name)) {
                            waiting[name] = [name, deps, callback];
                        }
                    };
                
                    define.amd = {
                        jQuery: true
                    };
                }());
                
                define("vendor/almond/almond", function(){});
                
                //     Underscore.js 1.5.2
                //     http://underscorejs.org
                //     (c) 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
                //     Underscore may be freely distributed under the MIT license.
                
                (function() {
                
                  // Baseline setup
                  // --------------
                
                  // Establish the root object, `window` in the browser, or `exports` on the server.
                  var root = this;
                
                  // Save the previous value of the `_` variable.
                  var previousUnderscore = root._;
                
                  // Establish the object that gets returned to break out of a loop iteration.
                  var breaker = {};
                
                  // Save bytes in the minified (but not gzipped) version:
                  var ArrayProto = Array.prototype, ObjProto = Object.prototype, FuncProto = Function.prototype;
                
                  // Create quick reference variables for speed access to core prototypes.
                  var
                    push             = ArrayProto.push,
                    slice            = ArrayProto.slice,
                    concat           = ArrayProto.concat,
                    toString         = ObjProto.toString,
                    hasOwnProperty   = ObjProto.hasOwnProperty;
                
                  // All **ECMAScript 5** native function implementations that we hope to use
                  // are declared here.
                  var
                    nativeForEach      = ArrayProto.forEach,
                    nativeMap          = ArrayProto.map,
                    nativeReduce       = ArrayProto.reduce,
                    nativeReduceRight  = ArrayProto.reduceRight,
                    nativeFilter       = ArrayProto.filter,
                    nativeEvery        = ArrayProto.every,
                    nativeSome         = ArrayProto.some,
                    nativeIndexOf      = ArrayProto.indexOf,
                    nativeLastIndexOf  = ArrayProto.lastIndexOf,
                    nativeIsArray      = Array.isArray,
                    nativeKeys         = Object.keys,
                    nativeBind         = FuncProto.bind;
                
                  // Create a safe reference to the Underscore object for use below.
                  var _ = function(obj) {
                    if (obj instanceof _) return obj;
                    if (!(this instanceof _)) return new _(obj);
                    this._wrapped = obj;
                  };
                
                  // Export the Underscore object for **Node.js**, with
                  // backwards-compatibility for the old `require()` API. If we're in
                  // the browser, add `_` as a global object via a string identifier,
                  // for Closure Compiler "advanced" mode.
                  if (typeof exports !== 'undefined') {
                    if (typeof module !== 'undefined' && module.exports) {
                      exports = module.exports = _;
                    }
                    exports._ = _;
                  } else {
                    root._ = _;
                  }
                
                  // Current version.
                  _.VERSION = '1.5.2';
                
                  // Collection Functions
                  // --------------------
                
                  // The cornerstone, an `each` implementation, aka `forEach`.
                  // Handles objects with the built-in `forEach`, arrays, and raw objects.
                  // Delegates to **ECMAScript 5**'s native `forEach` if available.
                  var each = _.each = _.forEach = function(obj, iterator, context) {
                    if (obj == null) return;
                    if (nativeForEach && obj.forEach === nativeForEach) {
                      obj.forEach(iterator, context);
                    } else if (obj.length === +obj.length) {
                      for (var i = 0, length = obj.length; i < length; i++) {
                        if (iterator.call(context, obj[i], i, obj) === breaker) return;
                      }
                    } else {
                      var keys = _.keys(obj);
                      for (var i = 0, length = keys.length; i < length; i++) {
                        if (iterator.call(context, obj[keys[i]], keys[i], obj) === breaker) return;
                      }
                    }
                  };
                
                  // Return the results of applying the iterator to each element.
                  // Delegates to **ECMAScript 5**'s native `map` if available.
                  _.map = _.collect = function(obj, iterator, context) {
                    var results = [];
                    if (obj == null) return results;
                    if (nativeMap && obj.map === nativeMap) return obj.map(iterator, context);
                    each(obj, function(value, index, list) {
                      results.push(iterator.call(context, value, index, list));
                    });
                    return results;
                  };
                
                  var reduceError = 'Reduce of empty array with no initial value';
                
                  // **Reduce** builds up a single result from a list of values, aka `inject`,
                  // or `foldl`. Delegates to **ECMAScript 5**'s native `reduce` if available.
                  _.reduce = _.foldl = _.inject = function(obj, iterator, memo, context) {
                    var initial = arguments.length > 2;
                    if (obj == null) obj = [];
                    if (nativeReduce && obj.reduce === nativeReduce) {
                      if (context) iterator = _.bind(iterator, context);
                      return initial ? obj.reduce(iterator, memo) : obj.reduce(iterator);
                    }
                    each(obj, function(value, index, list) {
                      if (!initial) {
                        memo = value;
                        initial = true;
                      } else {
                        memo = iterator.call(context, memo, value, index, list);
                      }
                    });
                    if (!initial) throw new TypeError(reduceError);
                    return memo;
                  };
                
                  // The right-associative version of reduce, also known as `foldr`.
                  // Delegates to **ECMAScript 5**'s native `reduceRight` if available.
                  _.reduceRight = _.foldr = function(obj, iterator, memo, context) {
                    var initial = arguments.length > 2;
                    if (obj == null) obj = [];
                    if (nativeReduceRight && obj.reduceRight === nativeReduceRight) {
                      if (context) iterator = _.bind(iterator, context);
                      return initial ? obj.reduceRight(iterator, memo) : obj.reduceRight(iterator);
                    }
                    var length = obj.length;
                    if (length !== +length) {
                      var keys = _.keys(obj);
                      length = keys.length;
                    }
                    each(obj, function(value, index, list) {
                      index = keys ? keys[--length] : --length;
                      if (!initial) {
                        memo = obj[index];
                        initial = true;
                      } else {
                        memo = iterator.call(context, memo, obj[index], index, list);
                      }
                    });
                    if (!initial) throw new TypeError(reduceError);
                    return memo;
                  };
                
                  // Return the first value which passes a truth test. Aliased as `detect`.
                  _.find = _.detect = function(obj, iterator, context) {
                    var result;
                    any(obj, function(value, index, list) {
                      if (iterator.call(context, value, index, list)) {
                        result = value;
                        return true;
                      }
                    });
                    return result;
                  };
                
                  // Return all the elements that pass a truth test.
                  // Delegates to **ECMAScript 5**'s native `filter` if available.
                  // Aliased as `select`.
                  _.filter = _.select = function(obj, iterator, context) {
                    var results = [];
                    if (obj == null) return results;
                    if (nativeFilter && obj.filter === nativeFilter) return obj.filter(iterator, context);
                    each(obj, function(value, index, list) {
                      if (iterator.call(context, value, index, list)) results.push(value);
                    });
                    return results;
                  };
                
                  // Return all the elements for which a truth test fails.
                  _.reject = function(obj, iterator, context) {
                    return _.filter(obj, function(value, index, list) {
                      return !iterator.call(context, value, index, list);
                    }, context);
                  };
                
                  // Determine whether all of the elements match a truth test.
                  // Delegates to **ECMAScript 5**'s native `every` if available.
                  // Aliased as `all`.
                  _.every = _.all = function(obj, iterator, context) {
                    iterator || (iterator = _.identity);
                    var result = true;
                    if (obj == null) return result;
                    if (nativeEvery && obj.every === nativeEvery) return obj.every(iterator, context);
                    each(obj, function(value, index, list) {
                      if (!(result = result && iterator.call(context, value, index, list))) return breaker;
                    });
                    return !!result;
                  };
                
                  // Determine if at least one element in the object matches a truth test.
                  // Delegates to **ECMAScript 5**'s native `some` if available.
                  // Aliased as `any`.
                  var any = _.some = _.any = function(obj, iterator, context) {
                    iterator || (iterator = _.identity);
                    var result = false;
                    if (obj == null) return result;
                    if (nativeSome && obj.some === nativeSome) return obj.some(iterator, context);
                    each(obj, function(value, index, list) {
                      if (result || (result = iterator.call(context, value, index, list))) return breaker;
                    });
                    return !!result;
                  };
                
                  // Determine if the array or object contains a given value (using `===`).
                  // Aliased as `include`.
                  _.contains = _.include = function(obj, target) {
                    if (obj == null) return false;
                    if (nativeIndexOf && obj.indexOf === nativeIndexOf) return obj.indexOf(target) != -1;
                    return any(obj, function(value) {
                      return value === target;
                    });
                  };
                
                  // Invoke a method (with arguments) on every item in a collection.
                  _.invoke = function(obj, method) {
                    var args = slice.call(arguments, 2);
                    var isFunc = _.isFunction(method);
                    return _.map(obj, function(value) {
                      return (isFunc ? method : value[method]).apply(value, args);
                    });
                  };
                
                  // Convenience version of a common use case of `map`: fetching a property.
                  _.pluck = function(obj, key) {
                    return _.map(obj, function(value){ return value[key]; });
                  };
                
                  // Convenience version of a common use case of `filter`: selecting only objects
                  // containing specific `key:value` pairs.
                  _.where = function(obj, attrs, first) {
                    if (_.isEmpty(attrs)) return first ? void 0 : [];
                    return _[first ? 'find' : 'filter'](obj, function(value) {
                      for (var key in attrs) {
                        if (attrs[key] !== value[key]) return false;
                      }
                      return true;
                    });
                  };
                
                  // Convenience version of a common use case of `find`: getting the first object
                  // containing specific `key:value` pairs.
                  _.findWhere = function(obj, attrs) {
                    return _.where(obj, attrs, true);
                  };
                
                  // Return the maximum element or (element-based computation).
                  // Can't optimize arrays of integers longer than 65,535 elements.
                  // See [WebKit Bug 80797](https://bugs.webkit.org/show_bug.cgi?id=80797)
                  _.max = function(obj, iterator, context) {
                    if (!iterator && _.isArray(obj) && obj[0] === +obj[0] && obj.length < 65535) {
                      return Math.max.apply(Math, obj);
                    }
                    if (!iterator && _.isEmpty(obj)) return -Infinity;
                    var result = {computed : -Infinity, value: -Infinity};
                    each(obj, function(value, index, list) {
                      var computed = iterator ? iterator.call(context, value, index, list) : value;
                      computed > result.computed && (result = {value : value, computed : computed});
                    });
                    return result.value;
                  };
                
                  // Return the minimum element (or element-based computation).
                  _.min = function(obj, iterator, context) {
                    if (!iterator && _.isArray(obj) && obj[0] === +obj[0] && obj.length < 65535) {
                      return Math.min.apply(Math, obj);
                    }
                    if (!iterator && _.isEmpty(obj)) return Infinity;
                    var result = {computed : Infinity, value: Infinity};
                    each(obj, function(value, index, list) {
                      var computed = iterator ? iterator.call(context, value, index, list) : value;
                      computed < result.computed && (result = {value : value, computed : computed});
                    });
                    return result.value;
                  };
                
                  // Shuffle an array, using the modern version of the 
                  // [Fisher-Yates shuffle](http://en.wikipedia.org/wiki/Fisher–Yates_shuffle).
                  _.shuffle = function(obj) {
                    var rand;
                    var index = 0;
                    var shuffled = [];
                    each(obj, function(value) {
                      rand = _.random(index++);
                      shuffled[index - 1] = shuffled[rand];
                      shuffled[rand] = value;
                    });
                    return shuffled;
                  };
                
                  // Sample **n** random values from an array.
                  // If **n** is not specified, returns a single random element from the array.
                  // The internal `guard` argument allows it to work with `map`.
                  _.sample = function(obj, n, guard) {
                    if (arguments.length < 2 || guard) {
                      return obj[_.random(obj.length - 1)];
                    }
                    return _.shuffle(obj).slice(0, Math.max(0, n));
                  };
                
                  // An internal function to generate lookup iterators.
                  var lookupIterator = function(value) {
                    return _.isFunction(value) ? value : function(obj){ return obj[value]; };
                  };
                
                  // Sort the object's values by a criterion produced by an iterator.
                  _.sortBy = function(obj, value, context) {
                    var iterator = lookupIterator(value);
                    return _.pluck(_.map(obj, function(value, index, list) {
                      return {
                        value: value,
                        index: index,
                        criteria: iterator.call(context, value, index, list)
                      };
                    }).sort(function(left, right) {
                      var a = left.criteria;
                      var b = right.criteria;
                      if (a !== b) {
                        if (a > b || a === void 0) return 1;
                        if (a < b || b === void 0) return -1;
                      }
                      return left.index - right.index;
                    }), 'value');
                  };
                
                  // An internal function used for aggregate "group by" operations.
                  var group = function(behavior) {
                    return function(obj, value, context) {
                      var result = {};
                      var iterator = value == null ? _.identity : lookupIterator(value);
                      each(obj, function(value, index) {
                        var key = iterator.call(context, value, index, obj);
                        behavior(result, key, value);
                      });
                      return result;
                    };
                  };
                
                  // Groups the object's values by a criterion. Pass either a string attribute
                  // to group by, or a function that returns the criterion.
                  _.groupBy = group(function(result, key, value) {
                    (_.has(result, key) ? result[key] : (result[key] = [])).push(value);
                  });
                
                  // Indexes the object's values by a criterion, similar to `groupBy`, but for
                  // when you know that your index values will be unique.
                  _.indexBy = group(function(result, key, value) {
                    result[key] = value;
                  });
                
                  // Counts instances of an object that group by a certain criterion. Pass
                  // either a string attribute to count by, or a function that returns the
                  // criterion.
                  _.countBy = group(function(result, key) {
                    _.has(result, key) ? result[key]++ : result[key] = 1;
                  });
                
                  // Use a comparator function to figure out the smallest index at which
                  // an object should be inserted so as to maintain order. Uses binary search.
                  _.sortedIndex = function(array, obj, iterator, context) {
                    iterator = iterator == null ? _.identity : lookupIterator(iterator);
                    var value = iterator.call(context, obj);
                    var low = 0, high = array.length;
                    while (low < high) {
                      var mid = (low + high) >>> 1;
                      iterator.call(context, array[mid]) < value ? low = mid + 1 : high = mid;
                    }
                    return low;
                  };
                
                  // Safely create a real, live array from anything iterable.
                  _.toArray = function(obj) {
                    if (!obj) return [];
                    if (_.isArray(obj)) return slice.call(obj);
                    if (obj.length === +obj.length) return _.map(obj, _.identity);
                    return _.values(obj);
                  };
                
                  // Return the number of elements in an object.
                  _.size = function(obj) {
                    if (obj == null) return 0;
                    return (obj.length === +obj.length) ? obj.length : _.keys(obj).length;
                  };
                
                  // Array Functions
                  // ---------------
                
                  // Get the first element of an array. Passing **n** will return the first N
                  // values in the array. Aliased as `head` and `take`. The **guard** check
                  // allows it to work with `_.map`.
                  _.first = _.head = _.take = function(array, n, guard) {
                    if (array == null) return void 0;
                    return (n == null) || guard ? array[0] : slice.call(array, 0, n);
                  };
                
                  // Returns everything but the last entry of the array. Especially useful on
                  // the arguments object. Passing **n** will return all the values in
                  // the array, excluding the last N. The **guard** check allows it to work with
                  // `_.map`.
                  _.initial = function(array, n, guard) {
                    return slice.call(array, 0, array.length - ((n == null) || guard ? 1 : n));
                  };
                
                  // Get the last element of an array. Passing **n** will return the last N
                  // values in the array. The **guard** check allows it to work with `_.map`.
                  _.last = function(array, n, guard) {
                    if (array == null) return void 0;
                    if ((n == null) || guard) {
                      return array[array.length - 1];
                    } else {
                      return slice.call(array, Math.max(array.length - n, 0));
                    }
                  };
                
                  // Returns everything but the first entry of the array. Aliased as `tail` and `drop`.
                  // Especially useful on the arguments object. Passing an **n** will return
                  // the rest N values in the array. The **guard**
                  // check allows it to work with `_.map`.
                  _.rest = _.tail = _.drop = function(array, n, guard) {
                    return slice.call(array, (n == null) || guard ? 1 : n);
                  };
                
                  // Trim out all falsy values from an array.
                  _.compact = function(array) {
                    return _.filter(array, _.identity);
                  };
                
                  // Internal implementation of a recursive `flatten` function.
                  var flatten = function(input, shallow, output) {
                    if (shallow && _.every(input, _.isArray)) {
                      return concat.apply(output, input);
                    }
                    each(input, function(value) {
                      if (_.isArray(value) || _.isArguments(value)) {
                        shallow ? push.apply(output, value) : flatten(value, shallow, output);
                      } else {
                        output.push(value);
                      }
                    });
                    return output;
                  };
                
                  // Flatten out an array, either recursively (by default), or just one level.
                  _.flatten = function(array, shallow) {
                    return flatten(array, shallow, []);
                  };
                
                  // Return a version of the array that does not contain the specified value(s).
                  _.without = function(array) {
                    return _.difference(array, slice.call(arguments, 1));
                  };
                
                  // Produce a duplicate-free version of the array. If the array has already
                  // been sorted, you have the option of using a faster algorithm.
                  // Aliased as `unique`.
                  _.uniq = _.unique = function(array, isSorted, iterator, context) {
                    if (_.isFunction(isSorted)) {
                      context = iterator;
                      iterator = isSorted;
                      isSorted = false;
                    }
                    var initial = iterator ? _.map(array, iterator, context) : array;
                    var results = [];
                    var seen = [];
                    each(initial, function(value, index) {
                      if (isSorted ? (!index || seen[seen.length - 1] !== value) : !_.contains(seen, value)) {
                        seen.push(value);
                        results.push(array[index]);
                      }
                    });
                    return results;
                  };
                
                  // Produce an array that contains the union: each distinct element from all of
                  // the passed-in arrays.
                  _.union = function() {
                    return _.uniq(_.flatten(arguments, true));
                  };
                
                  // Produce an array that contains every item shared between all the
                  // passed-in arrays.
                  _.intersection = function(array) {
                    var rest = slice.call(arguments, 1);
                    return _.filter(_.uniq(array), function(item) {
                      return _.every(rest, function(other) {
                        return _.indexOf(other, item) >= 0;
                      });
                    });
                  };
                
                  // Take the difference between one array and a number of other arrays.
                  // Only the elements present in just the first array will remain.
                  _.difference = function(array) {
                    var rest = concat.apply(ArrayProto, slice.call(arguments, 1));
                    return _.filter(array, function(value){ return !_.contains(rest, value); });
                  };
                
                  // Zip together multiple lists into a single array -- elements that share
                  // an index go together.
                  _.zip = function() {
                    var length = _.max(_.pluck(arguments, "length").concat(0));
                    var results = new Array(length);
                    for (var i = 0; i < length; i++) {
                      results[i] = _.pluck(arguments, '' + i);
                    }
                    return results;
                  };
                
                  // Converts lists into objects. Pass either a single array of `[key, value]`
                  // pairs, or two parallel arrays of the same length -- one of keys, and one of
                  // the corresponding values.
                  _.object = function(list, values) {
                    if (list == null) return {};
                    var result = {};
                    for (var i = 0, length = list.length; i < length; i++) {
                      if (values) {
                        result[list[i]] = values[i];
                      } else {
                        result[list[i][0]] = list[i][1];
                      }
                    }
                    return result;
                  };
                
                  // If the browser doesn't supply us with indexOf (I'm looking at you, **MSIE**),
                  // we need this function. Return the position of the first occurrence of an
                  // item in an array, or -1 if the item is not included in the array.
                  // Delegates to **ECMAScript 5**'s native `indexOf` if available.
                  // If the array is large and already in sort order, pass `true`
                  // for **isSorted** to use binary search.
                  _.indexOf = function(array, item, isSorted) {
                    if (array == null) return -1;
                    var i = 0, length = array.length;
                    if (isSorted) {
                      if (typeof isSorted == 'number') {
                        i = (isSorted < 0 ? Math.max(0, length + isSorted) : isSorted);
                      } else {
                        i = _.sortedIndex(array, item);
                        return array[i] === item ? i : -1;
                      }
                    }
                    if (nativeIndexOf && array.indexOf === nativeIndexOf) return array.indexOf(item, isSorted);
                    for (; i < length; i++) if (array[i] === item) return i;
                    return -1;
                  };
                
                  // Delegates to **ECMAScript 5**'s native `lastIndexOf` if available.
                  _.lastIndexOf = function(array, item, from) {
                    if (array == null) return -1;
                    var hasIndex = from != null;
                    if (nativeLastIndexOf && array.lastIndexOf === nativeLastIndexOf) {
                      return hasIndex ? array.lastIndexOf(item, from) : array.lastIndexOf(item);
                    }
                    var i = (hasIndex ? from : array.length);
                    while (i--) if (array[i] === item) return i;
                    return -1;
                  };
                
                  // Generate an integer Array containing an arithmetic progression. A port of
                  // the native Python `range()` function. See
                  // [the Python documentation](http://docs.python.org/library/functions.html#range).
                  _.range = function(start, stop, step) {
                    if (arguments.length <= 1) {
                      stop = start || 0;
                      start = 0;
                    }
                    step = arguments[2] || 1;
                
                    var length = Math.max(Math.ceil((stop - start) / step), 0);
                    var idx = 0;
                    var range = new Array(length);
                
                    while(idx < length) {
                      range[idx++] = start;
                      start += step;
                    }
                
                    return range;
                  };
                
                  // Function (ahem) Functions
                  // ------------------
                
                  // Reusable constructor function for prototype setting.
                  var ctor = function(){};
                
                  // Create a function bound to a given object (assigning `this`, and arguments,
                  // optionally). Delegates to **ECMAScript 5**'s native `Function.bind` if
                  // available.
                  _.bind = function(func, context) {
                    var args, bound;
                    if (nativeBind && func.bind === nativeBind) return nativeBind.apply(func, slice.call(arguments, 1));
                    if (!_.isFunction(func)) throw new TypeError;
                    args = slice.call(arguments, 2);
                    return bound = function() {
                      if (!(this instanceof bound)) return func.apply(context, args.concat(slice.call(arguments)));
                      ctor.prototype = func.prototype;
                      var self = new ctor;
                      ctor.prototype = null;
                      var result = func.apply(self, args.concat(slice.call(arguments)));
                      if (Object(result) === result) return result;
                      return self;
                    };
                  };
                
                  // Partially apply a function by creating a version that has had some of its
                  // arguments pre-filled, without changing its dynamic `this` context.
                  _.partial = function(func) {
                    var args = slice.call(arguments, 1);
                    return function() {
                      return func.apply(this, args.concat(slice.call(arguments)));
                    };
                  };
                
                  // Bind all of an object's methods to that object. Useful for ensuring that
                  // all callbacks defined on an object belong to it.
                  _.bindAll = function(obj) {
                    var funcs = slice.call(arguments, 1);
                    if (funcs.length === 0) throw new Error("bindAll must be passed function names");
                    each(funcs, function(f) { obj[f] = _.bind(obj[f], obj); });
                    return obj;
                  };
                
                  // Memoize an expensive function by storing its results.
                  _.memoize = function(func, hasher) {
                    var memo = {};
                    hasher || (hasher = _.identity);
                    return function() {
                      var key = hasher.apply(this, arguments);
                      return _.has(memo, key) ? memo[key] : (memo[key] = func.apply(this, arguments));
                    };
                  };
                
                  // Delays a function for the given number of milliseconds, and then calls
                  // it with the arguments supplied.
                  _.delay = function(func, wait) {
                    var args = slice.call(arguments, 2);
                    return setTimeout(function(){ return func.apply(null, args); }, wait);
                  };
                
                  // Defers a function, scheduling it to run after the current call stack has
                  // cleared.
                  _.defer = function(func) {
                    return _.delay.apply(_, [func, 1].concat(slice.call(arguments, 1)));
                  };
                
                  // Returns a function, that, when invoked, will only be triggered at most once
                  // during a given window of time. Normally, the throttled function will run
                  // as much as it can, without ever going more than once per `wait` duration;
                  // but if you'd like to disable the execution on the leading edge, pass
                  // `{leading: false}`. To disable execution on the trailing edge, ditto.
                  _.throttle = function(func, wait, options) {
                    var context, args, result;
                    var timeout = null;
                    var previous = 0;
                    options || (options = {});
                    var later = function() {
                      previous = options.leading === false ? 0 : new Date;
                      timeout = null;
                      result = func.apply(context, args);
                    };
                    return function() {
                      var now = new Date;
                      if (!previous && options.leading === false) previous = now;
                      var remaining = wait - (now - previous);
                      context = this;
                      args = arguments;
                      if (remaining <= 0) {
                        clearTimeout(timeout);
                        timeout = null;
                        previous = now;
                        result = func.apply(context, args);
                      } else if (!timeout && options.trailing !== false) {
                        timeout = setTimeout(later, remaining);
                      }
                      return result;
                    };
                  };
                
                  // Returns a function, that, as long as it continues to be invoked, will not
                  // be triggered. The function will be called after it stops being called for
                  // N milliseconds. If `immediate` is passed, trigger the function on the
                  // leading edge, instead of the trailing.
                  _.debounce = function(func, wait, immediate) {
                    var timeout, args, context, timestamp, result;
                    return function() {
                      context = this;
                      args = arguments;
                      timestamp = new Date();
                      var later = function() {
                        var last = (new Date()) - timestamp;
                        if (last < wait) {
                          timeout = setTimeout(later, wait - last);
                        } else {
                          timeout = null;
                          if (!immediate) result = func.apply(context, args);
                        }
                      };
                      var callNow = immediate && !timeout;
                      if (!timeout) {
                        timeout = setTimeout(later, wait);
                      }
                      if (callNow) result = func.apply(context, args);
                      return result;
                    };
                  };
                
                  // Returns a function that will be executed at most one time, no matter how
                  // often you call it. Useful for lazy initialization.
                  _.once = function(func) {
                    var ran = false, memo;
                    return function() {
                      if (ran) return memo;
                      ran = true;
                      memo = func.apply(this, arguments);
                      func = null;
                      return memo;
                    };
                  };
                
                  // Returns the first function passed as an argument to the second,
                  // allowing you to adjust arguments, run code before and after, and
                  // conditionally execute the original function.
                  _.wrap = function(func, wrapper) {
                    return function() {
                      var args = [func];
                      push.apply(args, arguments);
                      return wrapper.apply(this, args);
                    };
                  };
                
                  // Returns a function that is the composition of a list of functions, each
                  // consuming the return value of the function that follows.
                  _.compose = function() {
                    var funcs = arguments;
                    return function() {
                      var args = arguments;
                      for (var i = funcs.length - 1; i >= 0; i--) {
                        args = [funcs[i].apply(this, args)];
                      }
                      return args[0];
                    };
                  };
                
                  // Returns a function that will only be executed after being called N times.
                  _.after = function(times, func) {
                    return function() {
                      if (--times < 1) {
                        return func.apply(this, arguments);
                      }
                    };
                  };
                
                  // Object Functions
                  // ----------------
                
                  // Retrieve the names of an object's properties.
                  // Delegates to **ECMAScript 5**'s native `Object.keys`
                  _.keys = nativeKeys || function(obj) {
                    if (obj !== Object(obj)) throw new TypeError('Invalid object');
                    var keys = [];
                    for (var key in obj) if (_.has(obj, key)) keys.push(key);
                    return keys;
                  };
                
                  // Retrieve the values of an object's properties.
                  _.values = function(obj) {
                    var keys = _.keys(obj);
                    var length = keys.length;
                    var values = new Array(length);
                    for (var i = 0; i < length; i++) {
                      values[i] = obj[keys[i]];
                    }
                    return values;
                  };
                
                  // Convert an object into a list of `[key, value]` pairs.
                  _.pairs = function(obj) {
                    var keys = _.keys(obj);
                    var length = keys.length;
                    var pairs = new Array(length);
                    for (var i = 0; i < length; i++) {
                      pairs[i] = [keys[i], obj[keys[i]]];
                    }
                    return pairs;
                  };
                
                  // Invert the keys and values of an object. The values must be serializable.
                  _.invert = function(obj) {
                    var result = {};
                    var keys = _.keys(obj);
                    for (var i = 0, length = keys.length; i < length; i++) {
                      result[obj[keys[i]]] = keys[i];
                    }
                    return result;
                  };
                
                  // Return a sorted list of the function names available on the object.
                  // Aliased as `methods`
                  _.functions = _.methods = function(obj) {
                    var names = [];
                    for (var key in obj) {
                      if (_.isFunction(obj[key])) names.push(key);
                    }
                    return names.sort();
                  };
                
                  // Extend a given object with all the properties in passed-in object(s).
                  _.extend = function(obj) {
                    each(slice.call(arguments, 1), function(source) {
                      if (source) {
                        for (var prop in source) {
                          obj[prop] = source[prop];
                        }
                      }
                    });
                    return obj;
                  };
                
                  // Return a copy of the object only containing the whitelisted properties.
                  _.pick = function(obj) {
                    var copy = {};
                    var keys = concat.apply(ArrayProto, slice.call(arguments, 1));
                    each(keys, function(key) {
                      if (key in obj) copy[key] = obj[key];
                    });
                    return copy;
                  };
                
                   // Return a copy of the object without the blacklisted properties.
                  _.omit = function(obj) {
                    var copy = {};
                    var keys = concat.apply(ArrayProto, slice.call(arguments, 1));
                    for (var key in obj) {
                      if (!_.contains(keys, key)) copy[key] = obj[key];
                    }
                    return copy;
                  };
                
                  // Fill in a given object with default properties.
                  _.defaults = function(obj) {
                    each(slice.call(arguments, 1), function(source) {
                      if (source) {
                        for (var prop in source) {
                          if (obj[prop] === void 0) obj[prop] = source[prop];
                        }
                      }
                    });
                    return obj;
                  };
                
                  // Create a (shallow-cloned) duplicate of an object.
                  _.clone = function(obj) {
                    if (!_.isObject(obj)) return obj;
                    return _.isArray(obj) ? obj.slice() : _.extend({}, obj);
                  };
                
                  // Invokes interceptor with the obj, and then returns obj.
                  // The primary purpose of this method is to "tap into" a method chain, in
                  // order to perform operations on intermediate results within the chain.
                  _.tap = function(obj, interceptor) {
                    interceptor(obj);
                    return obj;
                  };
                
                  // Internal recursive comparison function for `isEqual`.
                  var eq = function(a, b, aStack, bStack) {
                    // Identical objects are equal. `0 === -0`, but they aren't identical.
                    // See the [Harmony `egal` proposal](http://wiki.ecmascript.org/doku.php?id=harmony:egal).
                    if (a === b) return a !== 0 || 1 / a == 1 / b;
                    // A strict comparison is necessary because `null == undefined`.
                    if (a == null || b == null) return a === b;
                    // Unwrap any wrapped objects.
                    if (a instanceof _) a = a._wrapped;
                    if (b instanceof _) b = b._wrapped;
                    // Compare `[[Class]]` names.
                    var className = toString.call(a);
                    if (className != toString.call(b)) return false;
                    switch (className) {
                      // Strings, numbers, dates, and booleans are compared by value.
                      case '[object String]':
                        // Primitives and their corresponding object wrappers are equivalent; thus, `"5"` is
                        // equivalent to `new String("5")`.
                        return a == String(b);
                      case '[object Number]':
                        // `NaN`s are equivalent, but non-reflexive. An `egal` comparison is performed for
                        // other numeric values.
                        return a != +a ? b != +b : (a == 0 ? 1 / a == 1 / b : a == +b);
                      case '[object Date]':
                      case '[object Boolean]':
                        // Coerce dates and booleans to numeric primitive values. Dates are compared by their
                        // millisecond representations. Note that invalid dates with millisecond representations
                        // of `NaN` are not equivalent.
                        return +a == +b;
                      // RegExps are compared by their source patterns and flags.
                      case '[object RegExp]':
                        return a.source == b.source &&
                               a.global == b.global &&
                               a.multiline == b.multiline &&
                               a.ignoreCase == b.ignoreCase;
                    }
                    if (typeof a != 'object' || typeof b != 'object') return false;
                    // Assume equality for cyclic structures. The algorithm for detecting cyclic
                    // structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.
                    var length = aStack.length;
                    while (length--) {
                      // Linear search. Performance is inversely proportional to the number of
                      // unique nested structures.
                      if (aStack[length] == a) return bStack[length] == b;
                    }
                    // Objects with different constructors are not equivalent, but `Object`s
                    // from different frames are.
                    var aCtor = a.constructor, bCtor = b.constructor;
                    if (aCtor !== bCtor && !(_.isFunction(aCtor) && (aCtor instanceof aCtor) &&
                                             _.isFunction(bCtor) && (bCtor instanceof bCtor))) {
                      return false;
                    }
                    // Add the first object to the stack of traversed objects.
                    aStack.push(a);
                    bStack.push(b);
                    var size = 0, result = true;
                    // Recursively compare objects and arrays.
                    if (className == '[object Array]') {
                      // Compare array lengths to determine if a deep comparison is necessary.
                      size = a.length;
                      result = size == b.length;
                      if (result) {
                        // Deep compare the contents, ignoring non-numeric properties.
                        while (size--) {
                          if (!(result = eq(a[size], b[size], aStack, bStack))) break;
                        }
                      }
                    } else {
                      // Deep compare objects.
                      for (var key in a) {
                        if (_.has(a, key)) {
                          // Count the expected number of properties.
                          size++;
                          // Deep compare each member.
                          if (!(result = _.has(b, key) && eq(a[key], b[key], aStack, bStack))) break;
                        }
                      }
                      // Ensure that both objects contain the same number of properties.
                      if (result) {
                        for (key in b) {
                          if (_.has(b, key) && !(size--)) break;
                        }
                        result = !size;
                      }
                    }
                    // Remove the first object from the stack of traversed objects.
                    aStack.pop();
                    bStack.pop();
                    return result;
                  };
                
                  // Perform a deep comparison to check if two objects are equal.
                  _.isEqual = function(a, b) {
                    return eq(a, b, [], []);
                  };
                
                  // Is a given array, string, or object empty?
                  // An "empty" object has no enumerable own-properties.
                  _.isEmpty = function(obj) {
                    if (obj == null) return true;
                    if (_.isArray(obj) || _.isString(obj)) return obj.length === 0;
                    for (var key in obj) if (_.has(obj, key)) return false;
                    return true;
                  };
                
                  // Is a given value a DOM element?
                  _.isElement = function(obj) {
                    return !!(obj && obj.nodeType === 1);
                  };
                
                  // Is a given value an array?
                  // Delegates to ECMA5's native Array.isArray
                  _.isArray = nativeIsArray || function(obj) {
                    return toString.call(obj) == '[object Array]';
                  };
                
                  // Is a given variable an object?
                  _.isObject = function(obj) {
                    return obj === Object(obj);
                  };
                
                  // Add some isType methods: isArguments, isFunction, isString, isNumber, isDate, isRegExp.
                  each(['Arguments', 'Function', 'String', 'Number', 'Date', 'RegExp'], function(name) {
                    _['is' + name] = function(obj) {
                      return toString.call(obj) == '[object ' + name + ']';
                    };
                  });
                
                  // Define a fallback version of the method in browsers (ahem, IE), where
                  // there isn't any inspectable "Arguments" type.
                  if (!_.isArguments(arguments)) {
                    _.isArguments = function(obj) {
                      return !!(obj && _.has(obj, 'callee'));
                    };
                  }
                
                  // Optimize `isFunction` if appropriate.
                  if (typeof (/./) !== 'function') {
                    _.isFunction = function(obj) {
                      return typeof obj === 'function';
                    };
                  }
                
                  // Is a given object a finite number?
                  _.isFinite = function(obj) {
                    return isFinite(obj) && !isNaN(parseFloat(obj));
                  };
                
                  // Is the given value `NaN`? (NaN is the only number which does not equal itself).
                  _.isNaN = function(obj) {
                    return _.isNumber(obj) && obj != +obj;
                  };
                
                  // Is a given value a boolean?
                  _.isBoolean = function(obj) {
                    return obj === true || obj === false || toString.call(obj) == '[object Boolean]';
                  };
                
                  // Is a given value equal to null?
                  _.isNull = function(obj) {
                    return obj === null;
                  };
                
                  // Is a given variable undefined?
                  _.isUndefined = function(obj) {
                    return obj === void 0;
                  };
                
                  // Shortcut function for checking if an object has a given property directly
                  // on itself (in other words, not on a prototype).
                  _.has = function(obj, key) {
                    return hasOwnProperty.call(obj, key);
                  };
                
                  // Utility Functions
                  // -----------------
                
                  // Run Underscore.js in *noConflict* mode, returning the `_` variable to its
                  // previous owner. Returns a reference to the Underscore object.
                  _.noConflict = function() {
                    root._ = previousUnderscore;
                    return this;
                  };
                
                  // Keep the identity function around for default iterators.
                  _.identity = function(value) {
                    return value;
                  };
                
                  // Run a function **n** times.
                  _.times = function(n, iterator, context) {
                    var accum = Array(Math.max(0, n));
                    for (var i = 0; i < n; i++) accum[i] = iterator.call(context, i);
                    return accum;
                  };
                
                  // Return a random integer between min and max (inclusive).
                  _.random = function(min, max) {
                    if (max == null) {
                      max = min;
                      min = 0;
                    }
                    return min + Math.floor(Math.random() * (max - min + 1));
                  };
                
                  // List of HTML entities for escaping.
                  var entityMap = {
                    escape: {
                      '&': '&amp;',
                      '<': '&lt;',
                      '>': '&gt;',
                      '"': '&quot;',
                      "'": '&#x27;'
                    }
                  };
                  entityMap.unescape = _.invert(entityMap.escape);
                
                  // Regexes containing the keys and values listed immediately above.
                  var entityRegexes = {
                    escape:   new RegExp('[' + _.keys(entityMap.escape).join('') + ']', 'g'),
                    unescape: new RegExp('(' + _.keys(entityMap.unescape).join('|') + ')', 'g')
                  };
                
                  // Functions for escaping and unescaping strings to/from HTML interpolation.
                  _.each(['escape', 'unescape'], function(method) {
                    _[method] = function(string) {
                      if (string == null) return '';
                      return ('' + string).replace(entityRegexes[method], function(match) {
                        return entityMap[method][match];
                      });
                    };
                  });
                
                  // If the value of the named `property` is a function then invoke it with the
                  // `object` as context; otherwise, return it.
                  _.result = function(object, property) {
                    if (object == null) return void 0;
                    var value = object[property];
                    return _.isFunction(value) ? value.call(object) : value;
                  };
                
                  // Add your own custom functions to the Underscore object.
                  _.mixin = function(obj) {
                    each(_.functions(obj), function(name) {
                      var func = _[name] = obj[name];
                      _.prototype[name] = function() {
                        var args = [this._wrapped];
                        push.apply(args, arguments);
                        return result.call(this, func.apply(_, args));
                      };
                    });
                  };
                
                  // Generate a unique integer id (unique within the entire client session).
                  // Useful for temporary DOM ids.
                  var idCounter = 0;
                  _.uniqueId = function(prefix) {
                    var id = ++idCounter + '';
                    return prefix ? prefix + id : id;
                  };
                
                  // By default, Underscore uses ERB-style template delimiters, change the
                  // following template settings to use alternative delimiters.
                  _.templateSettings = {
                    evaluate    : /<%([\s\S]+?)%>/g,
                    interpolate : /<%=([\s\S]+?)%>/g,
                    escape      : /<%-([\s\S]+?)%>/g
                  };
                
                  // When customizing `templateSettings`, if you don't want to define an
                  // interpolation, evaluation or escaping regex, we need one that is
                  // guaranteed not to match.
                  var noMatch = /(.)^/;
                
                  // Certain characters need to be escaped so that they can be put into a
                  // string literal.
                  var escapes = {
                    "'":      "'",
                    '\\':     '\\',
                    '\r':     'r',
                    '\n':     'n',
                    '\t':     't',
                    '\u2028': 'u2028',
                    '\u2029': 'u2029'
                  };
                
                  var escaper = /\\|'|\r|\n|\t|\u2028|\u2029/g;
                
                  // JavaScript micro-templating, similar to John Resig's implementation.
                  // Underscore templating handles arbitrary delimiters, preserves whitespace,
                  // and correctly escapes quotes within interpolated code.
                  _.template = function(text, data, settings) {
                    var render;
                    settings = _.defaults({}, settings, _.templateSettings);
                
                    // Combine delimiters into one regular expression via alternation.
                    var matcher = new RegExp([
                      (settings.escape || noMatch).source,
                      (settings.interpolate || noMatch).source,
                      (settings.evaluate || noMatch).source
                    ].join('|') + '|$', 'g');
                
                    // Compile the template source, escaping string literals appropriately.
                    var index = 0;
                    var source = "__p+='";
                    text.replace(matcher, function(match, escape, interpolate, evaluate, offset) {
                      source += text.slice(index, offset)
                        .replace(escaper, function(match) { return '\\' + escapes[match]; });
                
                      if (escape) {
                        source += "'+\n((__t=(" + escape + "))==null?'':_.escape(__t))+\n'";
                      }
                      if (interpolate) {
                        source += "'+\n((__t=(" + interpolate + "))==null?'':__t)+\n'";
                      }
                      if (evaluate) {
                        source += "';\n" + evaluate + "\n__p+='";
                      }
                      index = offset + match.length;
                      return match;
                    });
                    source += "';\n";
                
                    // If a variable is not specified, place data values in local scope.
                    if (!settings.variable) source = 'with(obj||{}){\n' + source + '}\n';
                
                    source = "var __t,__p='',__j=Array.prototype.join," +
                      "print=function(){__p+=__j.call(arguments,'');};\n" +
                      source + "return __p;\n";
                
                    try {
                      render = new Function(settings.variable || 'obj', '_', source);
                    } catch (e) {
                      e.source = source;
                      throw e;
                    }
                
                    if (data) return render(data, _);
                    var template = function(data) {
                      return render.call(this, data, _);
                    };
                
                    // Provide the compiled function source as a convenience for precompilation.
                    template.source = 'function(' + (settings.variable || 'obj') + '){\n' + source + '}';
                
                    return template;
                  };
                
                  // Add a "chain" function, which will delegate to the wrapper.
                  _.chain = function(obj) {
                    return _(obj).chain();
                  };
                
                  // OOP
                  // ---------------
                  // If Underscore is called as a function, it returns a wrapped object that
                  // can be used OO-style. This wrapper holds altered versions of all the
                  // underscore functions. Wrapped objects may be chained.
                
                  // Helper function to continue chaining intermediate results.
                  var result = function(obj) {
                    return this._chain ? _(obj).chain() : obj;
                  };
                
                  // Add all of the Underscore functions to the wrapper object.
                  _.mixin(_);
                
                  // Add all mutator Array functions to the wrapper.
                  each(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function(name) {
                    var method = ArrayProto[name];
                    _.prototype[name] = function() {
                      var obj = this._wrapped;
                      method.apply(obj, arguments);
                      if ((name == 'shift' || name == 'splice') && obj.length === 0) delete obj[0];
                      return result.call(this, obj);
                    };
                  });
                
                  // Add all accessor Array functions to the wrapper.
                  each(['concat', 'join', 'slice'], function(name) {
                    var method = ArrayProto[name];
                    _.prototype[name] = function() {
                      return result.call(this, method.apply(this._wrapped, arguments));
                    };
                  });
                
                  _.extend(_.prototype, {
                
                    // Start chaining a wrapped Underscore object.
                    chain: function() {
                      this._chain = true;
                      return this;
                    },
                
                    // Extracts the result from a wrapped and chained object.
                    value: function() {
                      return this._wrapped;
                    }
                
                  });
                
                  // AMD define happens at the end for compatibility with AMD loaders
                  // that don't enforce next-turn semantics on modules.
                  if (typeof define === 'function' && define.amd) {
                    define('underscore', [],function() {
                      return _;
                    });
                  }
                
                }).call(this);
                
                /*!
                 * jQuery JavaScript Library v2.0.3
                 * http://jquery.com/
                 *
                 * Includes Sizzle.js
                 * http://sizzlejs.com/
                 *
                 * Copyright 2005, 2013 jQuery Foundation, Inc. and other contributors
                 * Released under the MIT license
                 * http://jquery.org/license
                 *
                 * Date: 2013-07-03T13:30Z
                 */
                (function( window, undefined ) {
                
                // Can't do this because several apps including ASP.NET trace
                // the stack via arguments.caller.callee and Firefox dies if
                // you try to trace through "use strict" call chains. (#13335)
                // Support: Firefox 18+
                //
                var
                	// A central reference to the root jQuery(document)
                	rootjQuery,
                
                	// The deferred used on DOM ready
                	readyList,
                
                	// Support: IE9
                	// For `typeof xmlNode.method` instead of `xmlNode.method !== undefined`
                	core_strundefined = typeof undefined,
                
                	// Use the correct document accordingly with window argument (sandbox)
                	location = window.location,
                	document = window.document,
                	docElem = document.documentElement,
                
                	// Map over jQuery in case of overwrite
                	_jQuery = window.jQuery,
                
                	// Map over the $ in case of overwrite
                	_$ = window.$,
                
                	// [[Class]] -> type pairs
                	class2type = {},
                
                	// List of deleted data cache ids, so we can reuse them
                	core_deletedIds = [],
                
                	core_version = "2.0.3",
                
                	// Save a reference to some core methods
                	core_concat = core_deletedIds.concat,
                	core_push = core_deletedIds.push,
                	core_slice = core_deletedIds.slice,
                	core_indexOf = core_deletedIds.indexOf,
                	core_toString = class2type.toString,
                	core_hasOwn = class2type.hasOwnProperty,
                	core_trim = core_version.trim,
                
                	// Define a local copy of jQuery
                	jQuery = function( selector, context ) {
                		// The jQuery object is actually just the init constructor 'enhanced'
                		return new jQuery.fn.init( selector, context, rootjQuery );
                	},
                
                	// Used for matching numbers
                	core_pnum = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,
                
                	// Used for splitting on whitespace
                	core_rnotwhite = /\S+/g,
                
                	// A simple way to check for HTML strings
                	// Prioritize #id over <tag> to avoid XSS via location.hash (#9521)
                	// Strict HTML recognition (#11290: must start with <)
                	rquickExpr = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,
                
                	// Match a standalone tag
                	rsingleTag = /^<(\w+)\s*\/?>(?:<\/\1>|)$/,
                
                	// Matches dashed string for camelizing
                	rmsPrefix = /^-ms-/,
                	rdashAlpha = /-([\da-z])/gi,
                
                	// Used by jQuery.camelCase as callback to replace()
                	fcamelCase = function( all, letter ) {
                		return letter.toUpperCase();
                	},
                
                	// The ready event handler and self cleanup method
                	completed = function() {
                		document.removeEventListener( "DOMContentLoaded", completed, false );
                		window.removeEventListener( "load", completed, false );
                		jQuery.ready();
                	};
                
                jQuery.fn = jQuery.prototype = {
                	// The current version of jQuery being used
                	jquery: core_version,
                
                	constructor: jQuery,
                	init: function( selector, context, rootjQuery ) {
                		var match, elem;
                
                		// HANDLE: $(""), $(null), $(undefined), $(false)
                		if ( !selector ) {
                			return this;
                		}
                
                		// Handle HTML strings
                		if ( typeof selector === "string" ) {
                			if ( selector.charAt(0) === "<" && selector.charAt( selector.length - 1 ) === ">" && selector.length >= 3 ) {
                				// Assume that strings that start and end with <> are HTML and skip the regex check
                				match = [ null, selector, null ];
                
                			} else {
                				match = rquickExpr.exec( selector );
                			}
                
                			// Match html or make sure no context is specified for #id
                			if ( match && (match[1] || !context) ) {
                
                				// HANDLE: $(html) -> $(array)
                				if ( match[1] ) {
                					context = context instanceof jQuery ? context[0] : context;
                
                					// scripts is true for back-compat
                					jQuery.merge( this, jQuery.parseHTML(
                						match[1],
                						context && context.nodeType ? context.ownerDocument || context : document,
                						true
                					) );
                
                					// HANDLE: $(html, props)
                					if ( rsingleTag.test( match[1] ) && jQuery.isPlainObject( context ) ) {
                						for ( match in context ) {
                							// Properties of context are called as methods if possible
                							if ( jQuery.isFunction( this[ match ] ) ) {
                								this[ match ]( context[ match ] );
                
                							// ...and otherwise set as attributes
                							} else {
                								this.attr( match, context[ match ] );
                							}
                						}
                					}
                
                					return this;
                
                				// HANDLE: $(#id)
                				} else {
                					elem = document.getElementById( match[2] );
                
                					// Check parentNode to catch when Blackberry 4.6 returns
                					// nodes that are no longer in the document #6963
                					if ( elem && elem.parentNode ) {
                						// Inject the element directly into the jQuery object
                						this.length = 1;
                						this[0] = elem;
                					}
                
                					this.context = document;
                					this.selector = selector;
                					return this;
                				}
                
                			// HANDLE: $(expr, $(...))
                			} else if ( !context || context.jquery ) {
                				return ( context || rootjQuery ).find( selector );
                
                			// HANDLE: $(expr, context)
                			// (which is just equivalent to: $(context).find(expr)
                			} else {
                				return this.constructor( context ).find( selector );
                			}
                
                		// HANDLE: $(DOMElement)
                		} else if ( selector.nodeType ) {
                			this.context = this[0] = selector;
                			this.length = 1;
                			return this;
                
                		// HANDLE: $(function)
                		// Shortcut for document ready
                		} else if ( jQuery.isFunction( selector ) ) {
                			return rootjQuery.ready( selector );
                		}
                
                		if ( selector.selector !== undefined ) {
                			this.selector = selector.selector;
                			this.context = selector.context;
                		}
                
                		return jQuery.makeArray( selector, this );
                	},
                
                	// Start with an empty selector
                	selector: "",
                
                	// The default length of a jQuery object is 0
                	length: 0,
                
                	toArray: function() {
                		return core_slice.call( this );
                	},
                
                	// Get the Nth element in the matched element set OR
                	// Get the whole matched element set as a clean array
                	get: function( num ) {
                		return num == null ?
                
                			// Return a 'clean' array
                			this.toArray() :
                
                			// Return just the object
                			( num < 0 ? this[ this.length + num ] : this[ num ] );
                	},
                
                	// Take an array of elements and push it onto the stack
                	// (returning the new matched element set)
                	pushStack: function( elems ) {
                
                		// Build a new jQuery matched element set
                		var ret = jQuery.merge( this.constructor(), elems );
                
                		// Add the old object onto the stack (as a reference)
                		ret.prevObject = this;
                		ret.context = this.context;
                
                		// Return the newly-formed element set
                		return ret;
                	},
                
                	// Execute a callback for every element in the matched set.
                	// (You can seed the arguments with an array of args, but this is
                	// only used internally.)
                	each: function( callback, args ) {
                		return jQuery.each( this, callback, args );
                	},
                
                	ready: function( fn ) {
                		// Add the callback
                		jQuery.ready.promise().done( fn );
                
                		return this;
                	},
                
                	slice: function() {
                		return this.pushStack( core_slice.apply( this, arguments ) );
                	},
                
                	first: function() {
                		return this.eq( 0 );
                	},
                
                	last: function() {
                		return this.eq( -1 );
                	},
                
                	eq: function( i ) {
                		var len = this.length,
                			j = +i + ( i < 0 ? len : 0 );
                		return this.pushStack( j >= 0 && j < len ? [ this[j] ] : [] );
                	},
                
                	map: function( callback ) {
                		return this.pushStack( jQuery.map(this, function( elem, i ) {
                			return callback.call( elem, i, elem );
                		}));
                	},
                
                	end: function() {
                		return this.prevObject || this.constructor(null);
                	},
                
                	// For internal use only.
                	// Behaves like an Array's method, not like a jQuery method.
                	push: core_push,
                	sort: [].sort,
                	splice: [].splice
                };
                
                // Give the init function the jQuery prototype for later instantiation
                jQuery.fn.init.prototype = jQuery.fn;
                
                jQuery.extend = jQuery.fn.extend = function() {
                	var options, name, src, copy, copyIsArray, clone,
                		target = arguments[0] || {},
                		i = 1,
                		length = arguments.length,
                		deep = false;
                
                	// Handle a deep copy situation
                	if ( typeof target === "boolean" ) {
                		deep = target;
                		target = arguments[1] || {};
                		// skip the boolean and the target
                		i = 2;
                	}
                
                	// Handle case when target is a string or something (possible in deep copy)
                	if ( typeof target !== "object" && !jQuery.isFunction(target) ) {
                		target = {};
                	}
                
                	// extend jQuery itself if only one argument is passed
                	if ( length === i ) {
                		target = this;
                		--i;
                	}
                
                	for ( ; i < length; i++ ) {
                		// Only deal with non-null/undefined values
                		if ( (options = arguments[ i ]) != null ) {
                			// Extend the base object
                			for ( name in options ) {
                				src = target[ name ];
                				copy = options[ name ];
                
                				// Prevent never-ending loop
                				if ( target === copy ) {
                					continue;
                				}
                
                				// Recurse if we're merging plain objects or arrays
                				if ( deep && copy && ( jQuery.isPlainObject(copy) || (copyIsArray = jQuery.isArray(copy)) ) ) {
                					if ( copyIsArray ) {
                						copyIsArray = false;
                						clone = src && jQuery.isArray(src) ? src : [];
                
                					} else {
                						clone = src && jQuery.isPlainObject(src) ? src : {};
                					}
                
                					// Never move original objects, clone them
                					target[ name ] = jQuery.extend( deep, clone, copy );
                
                				// Don't bring in undefined values
                				} else if ( copy !== undefined ) {
                					target[ name ] = copy;
                				}
                			}
                		}
                	}
                
                	// Return the modified object
                	return target;
                };
                
                jQuery.extend({
                	// Unique for each copy of jQuery on the page
                	expando: "jQuery" + ( core_version + Math.random() ).replace( /\D/g, "" ),
                
                	noConflict: function( deep ) {
                		if ( window.$ === jQuery ) {
                			window.$ = _$;
                		}
                
                		if ( deep && window.jQuery === jQuery ) {
                			window.jQuery = _jQuery;
                		}
                
                		return jQuery;
                	},
                
                	// Is the DOM ready to be used? Set to true once it occurs.
                	isReady: false,
                
                	// A counter to track how many items to wait for before
                	// the ready event fires. See #6781
                	readyWait: 1,
                
                	// Hold (or release) the ready event
                	holdReady: function( hold ) {
                		if ( hold ) {
                			jQuery.readyWait++;
                		} else {
                			jQuery.ready( true );
                		}
                	},
                
                	// Handle when the DOM is ready
                	ready: function( wait ) {
                
                		// Abort if there are pending holds or we're already ready
                		if ( wait === true ? --jQuery.readyWait : jQuery.isReady ) {
                			return;
                		}
                
                		// Remember that the DOM is ready
                		jQuery.isReady = true;
                
                		// If a normal DOM Ready event fired, decrement, and wait if need be
                		if ( wait !== true && --jQuery.readyWait > 0 ) {
                			return;
                		}
                
                		// If there are functions bound, to execute
                		readyList.resolveWith( document, [ jQuery ] );
                
                		// Trigger any bound ready events
                		if ( jQuery.fn.trigger ) {
                			jQuery( document ).trigger("ready").off("ready");
                		}
                	},
                
                	// See test/unit/core.js for details concerning isFunction.
                	// Since version 1.3, DOM methods and functions like alert
                	// aren't supported. They return false on IE (#2968).
                	isFunction: function( obj ) {
                		return jQuery.type(obj) === "function";
                	},
                
                	isArray: Array.isArray,
                
                	isWindow: function( obj ) {
                		return obj != null && obj === obj.window;
                	},
                
                	isNumeric: function( obj ) {
                		return !isNaN( parseFloat(obj) ) && isFinite( obj );
                	},
                
                	type: function( obj ) {
                		if ( obj == null ) {
                			return String( obj );
                		}
                		// Support: Safari <= 5.1 (functionish RegExp)
                		return typeof obj === "object" || typeof obj === "function" ?
                			class2type[ core_toString.call(obj) ] || "object" :
                			typeof obj;
                	},
                
                	isPlainObject: function( obj ) {
                		// Not plain objects:
                		// - Any object or value whose internal [[Class]] property is not "[object Object]"
                		// - DOM nodes
                		// - window
                		if ( jQuery.type( obj ) !== "object" || obj.nodeType || jQuery.isWindow( obj ) ) {
                			return false;
                		}
                
                		// Support: Firefox <20
                		// The try/catch suppresses exceptions thrown when attempting to access
                		// the "constructor" property of certain host objects, ie. |window.location|
                		// https://bugzilla.mozilla.org/show_bug.cgi?id=814622
                		try {
                			if ( obj.constructor &&
                					!core_hasOwn.call( obj.constructor.prototype, "isPrototypeOf" ) ) {
                				return false;
                			}
                		} catch ( e ) {
                			return false;
                		}
                
                		// If the function hasn't returned already, we're confident that
                		// |obj| is a plain object, created by {} or constructed with new Object
                		return true;
                	},
                
                	isEmptyObject: function( obj ) {
                		var name;
                		for ( name in obj ) {
                			return false;
                		}
                		return true;
                	},
                
                	error: function( msg ) {
                		throw new Error( msg );
                	},
                
                	// data: string of html
                	// context (optional): If specified, the fragment will be created in this context, defaults to document
                	// keepScripts (optional): If true, will include scripts passed in the html string
                	parseHTML: function( data, context, keepScripts ) {
                		if ( !data || typeof data !== "string" ) {
                			return null;
                		}
                		if ( typeof context === "boolean" ) {
                			keepScripts = context;
                			context = false;
                		}
                		context = context || document;
                
                		var parsed = rsingleTag.exec( data ),
                			scripts = !keepScripts && [];
                
                		// Single tag
                		if ( parsed ) {
                			return [ context.createElement( parsed[1] ) ];
                		}
                
                		parsed = jQuery.buildFragment( [ data ], context, scripts );
                
                		if ( scripts ) {
                			jQuery( scripts ).remove();
                		}
                
                		return jQuery.merge( [], parsed.childNodes );
                	},
                
                	parseJSON: JSON.parse,
                
                	// Cross-browser xml parsing
                	parseXML: function( data ) {
                		var xml, tmp;
                		if ( !data || typeof data !== "string" ) {
                			return null;
                		}
                
                		// Support: IE9
                		try {
                			tmp = new DOMParser();
                			xml = tmp.parseFromString( data , "text/xml" );
                		} catch ( e ) {
                			xml = undefined;
                		}
                
                		if ( !xml || xml.getElementsByTagName( "parsererror" ).length ) {
                			jQuery.error( "Invalid XML: " + data );
                		}
                		return xml;
                	},
                
                	noop: function() {},
                
                	// Evaluates a script in a global context
                	globalEval: function( code ) {
                		var script,
                				indirect = eval;
                
                		code = jQuery.trim( code );
                
                		if ( code ) {
                			// If the code includes a valid, prologue position
                			// strict mode pragma, execute code by injecting a
                			// script tag into the document.
                			if ( code.indexOf("use strict") === 1 ) {
                				script = document.createElement("script");
                				script.text = code;
                				document.head.appendChild( script ).parentNode.removeChild( script );
                			} else {
                			// Otherwise, avoid the DOM node creation, insertion
                			// and removal by using an indirect global eval
                				indirect( code );
                			}
                		}
                	},
                
                	// Convert dashed to camelCase; used by the css and data modules
                	// Microsoft forgot to hump their vendor prefix (#9572)
                	camelCase: function( string ) {
                		return string.replace( rmsPrefix, "ms-" ).replace( rdashAlpha, fcamelCase );
                	},
                
                	nodeName: function( elem, name ) {
                		return elem.nodeName && elem.nodeName.toLowerCase() === name.toLowerCase();
                	},
                
                	// args is for internal usage only
                	each: function( obj, callback, args ) {
                		var value,
                			i = 0,
                			length = obj.length,
                			isArray = isArraylike( obj );
                
                		if ( args ) {
                			if ( isArray ) {
                				for ( ; i < length; i++ ) {
                					value = callback.apply( obj[ i ], args );
                
                					if ( value === false ) {
                						break;
                					}
                				}
                			} else {
                				for ( i in obj ) {
                					value = callback.apply( obj[ i ], args );
                
                					if ( value === false ) {
                						break;
                					}
                				}
                			}
                
                		// A special, fast, case for the most common use of each
                		} else {
                			if ( isArray ) {
                				for ( ; i < length; i++ ) {
                					value = callback.call( obj[ i ], i, obj[ i ] );
                
                					if ( value === false ) {
                						break;
                					}
                				}
                			} else {
                				for ( i in obj ) {
                					value = callback.call( obj[ i ], i, obj[ i ] );
                
                					if ( value === false ) {
                						break;
                					}
                				}
                			}
                		}
                
                		return obj;
                	},
                
                	trim: function( text ) {
                		return text == null ? "" : core_trim.call( text );
                	},
                
                	// results is for internal usage only
                	makeArray: function( arr, results ) {
                		var ret = results || [];
                
                		if ( arr != null ) {
                			if ( isArraylike( Object(arr) ) ) {
                				jQuery.merge( ret,
                					typeof arr === "string" ?
                					[ arr ] : arr
                				);
                			} else {
                				core_push.call( ret, arr );
                			}
                		}
                
                		return ret;
                	},
                
                	inArray: function( elem, arr, i ) {
                		return arr == null ? -1 : core_indexOf.call( arr, elem, i );
                	},
                
                	merge: function( first, second ) {
                		var l = second.length,
                			i = first.length,
                			j = 0;
                
                		if ( typeof l === "number" ) {
                			for ( ; j < l; j++ ) {
                				first[ i++ ] = second[ j ];
                			}
                		} else {
                			while ( second[j] !== undefined ) {
                				first[ i++ ] = second[ j++ ];
                			}
                		}
                
                		first.length = i;
                
                		return first;
                	},
                
                	grep: function( elems, callback, inv ) {
                		var retVal,
                			ret = [],
                			i = 0,
                			length = elems.length;
                		inv = !!inv;
                
                		// Go through the array, only saving the items
                		// that pass the validator function
                		for ( ; i < length; i++ ) {
                			retVal = !!callback( elems[ i ], i );
                			if ( inv !== retVal ) {
                				ret.push( elems[ i ] );
                			}
                		}
                
                		return ret;
                	},
                
                	// arg is for internal usage only
                	map: function( elems, callback, arg ) {
                		var value,
                			i = 0,
                			length = elems.length,
                			isArray = isArraylike( elems ),
                			ret = [];
                
                		// Go through the array, translating each of the items to their
                		if ( isArray ) {
                			for ( ; i < length; i++ ) {
                				value = callback( elems[ i ], i, arg );
                
                				if ( value != null ) {
                					ret[ ret.length ] = value;
                				}
                			}
                
                		// Go through every key on the object,
                		} else {
                			for ( i in elems ) {
                				value = callback( elems[ i ], i, arg );
                
                				if ( value != null ) {
                					ret[ ret.length ] = value;
                				}
                			}
                		}
                
                		// Flatten any nested arrays
                		return core_concat.apply( [], ret );
                	},
                
                	// A global GUID counter for objects
                	guid: 1,
                
                	// Bind a function to a context, optionally partially applying any
                	// arguments.
                	proxy: function( fn, context ) {
                		var tmp, args, proxy;
                
                		if ( typeof context === "string" ) {
                			tmp = fn[ context ];
                			context = fn;
                			fn = tmp;
                		}
                
                		// Quick check to determine if target is callable, in the spec
                		// this throws a TypeError, but we will just return undefined.
                		if ( !jQuery.isFunction( fn ) ) {
                			return undefined;
                		}
                
                		// Simulated bind
                		args = core_slice.call( arguments, 2 );
                		proxy = function() {
                			return fn.apply( context || this, args.concat( core_slice.call( arguments ) ) );
                		};
                
                		// Set the guid of unique handler to the same of original handler, so it can be removed
                		proxy.guid = fn.guid = fn.guid || jQuery.guid++;
                
                		return proxy;
                	},
                
                	// Multifunctional method to get and set values of a collection
                	// The value/s can optionally be executed if it's a function
                	access: function( elems, fn, key, value, chainable, emptyGet, raw ) {
                		var i = 0,
                			length = elems.length,
                			bulk = key == null;
                
                		// Sets many values
                		if ( jQuery.type( key ) === "object" ) {
                			chainable = true;
                			for ( i in key ) {
                				jQuery.access( elems, fn, i, key[i], true, emptyGet, raw );
                			}
                
                		// Sets one value
                		} else if ( value !== undefined ) {
                			chainable = true;
                
                			if ( !jQuery.isFunction( value ) ) {
                				raw = true;
                			}
                
                			if ( bulk ) {
                				// Bulk operations run against the entire set
                				if ( raw ) {
                					fn.call( elems, value );
                					fn = null;
                
                				// ...except when executing function values
                				} else {
                					bulk = fn;
                					fn = function( elem, key, value ) {
                						return bulk.call( jQuery( elem ), value );
                					};
                				}
                			}
                
                			if ( fn ) {
                				for ( ; i < length; i++ ) {
                					fn( elems[i], key, raw ? value : value.call( elems[i], i, fn( elems[i], key ) ) );
                				}
                			}
                		}
                
                		return chainable ?
                			elems :
                
                			// Gets
                			bulk ?
                				fn.call( elems ) :
                				length ? fn( elems[0], key ) : emptyGet;
                	},
                
                	now: Date.now,
                
                	// A method for quickly swapping in/out CSS properties to get correct calculations.
                	// Note: this method belongs to the css module but it's needed here for the support module.
                	// If support gets modularized, this method should be moved back to the css module.
                	swap: function( elem, options, callback, args ) {
                		var ret, name,
                			old = {};
                
                		// Remember the old values, and insert the new ones
                		for ( name in options ) {
                			old[ name ] = elem.style[ name ];
                			elem.style[ name ] = options[ name ];
                		}
                
                		ret = callback.apply( elem, args || [] );
                
                		// Revert the old values
                		for ( name in options ) {
                			elem.style[ name ] = old[ name ];
                		}
                
                		return ret;
                	}
                });
                
                jQuery.ready.promise = function( obj ) {
                	if ( !readyList ) {
                
                		readyList = jQuery.Deferred();
                
                		// Catch cases where $(document).ready() is called after the browser event has already occurred.
                		// we once tried to use readyState "interactive" here, but it caused issues like the one
                		// discovered by ChrisS here: http://bugs.jquery.com/ticket/12282#comment:15
                		if ( document.readyState === "complete" ) {
                			// Handle it asynchronously to allow scripts the opportunity to delay ready
                			setTimeout( jQuery.ready );
                
                		} else {
                
                			// Use the handy event callback
                			document.addEventListener( "DOMContentLoaded", completed, false );
                
                			// A fallback to window.onload, that will always work
                			window.addEventListener( "load", completed, false );
                		}
                	}
                	return readyList.promise( obj );
                };
                
                // Populate the class2type map
                jQuery.each("Boolean Number String Function Array Date RegExp Object Error".split(" "), function(i, name) {
                	class2type[ "[object " + name + "]" ] = name.toLowerCase();
                });
                
                function isArraylike( obj ) {
                	var length = obj.length,
                		type = jQuery.type( obj );
                
                	if ( jQuery.isWindow( obj ) ) {
                		return false;
                	}
                
                	if ( obj.nodeType === 1 && length ) {
                		return true;
                	}
                
                	return type === "array" || type !== "function" &&
                		( length === 0 ||
                		typeof length === "number" && length > 0 && ( length - 1 ) in obj );
                }
                
                // All jQuery objects should point back to these
                rootjQuery = jQuery(document);
                /*!
                 * Sizzle CSS Selector Engine v1.9.4-pre
                 * http://sizzlejs.com/
                 *
                 * Copyright 2013 jQuery Foundation, Inc. and other contributors
                 * Released under the MIT license
                 * http://jquery.org/license
                 *
                 * Date: 2013-06-03
                 */
                (function( window, undefined ) {
                
                var i,
                	support,
                	cachedruns,
                	Expr,
                	getText,
                	isXML,
                	compile,
                	outermostContext,
                	sortInput,
                
                	// Local document vars
                	setDocument,
                	document,
                	docElem,
                	documentIsHTML,
                	rbuggyQSA,
                	rbuggyMatches,
                	matches,
                	contains,
                
                	// Instance-specific data
                	expando = "sizzle" + -(new Date()),
                	preferredDoc = window.document,
                	dirruns = 0,
                	done = 0,
                	classCache = createCache(),
                	tokenCache = createCache(),
                	compilerCache = createCache(),
                	hasDuplicate = false,
                	sortOrder = function( a, b ) {
                		if ( a === b ) {
                			hasDuplicate = true;
                			return 0;
                		}
                		return 0;
                	},
                
                	// General-purpose constants
                	strundefined = typeof undefined,
                	MAX_NEGATIVE = 1 << 31,
                
                	// Instance methods
                	hasOwn = ({}).hasOwnProperty,
                	arr = [],
                	pop = arr.pop,
                	push_native = arr.push,
                	push = arr.push,
                	slice = arr.slice,
                	// Use a stripped-down indexOf if we can't use a native one
                	indexOf = arr.indexOf || function( elem ) {
                		var i = 0,
                			len = this.length;
                		for ( ; i < len; i++ ) {
                			if ( this[i] === elem ) {
                				return i;
                			}
                		}
                		return -1;
                	},
                
                	booleans = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",
                
                	// Regular expressions
                
                	// Whitespace characters http://www.w3.org/TR/css3-selectors/#whitespace
                	whitespace = "[\\x20\\t\\r\\n\\f]",
                	// http://www.w3.org/TR/css3-syntax/#characters
                	characterEncoding = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",
                
                	// Loosely modeled on CSS identifier characters
                	// An unquoted value should be a CSS identifier http://www.w3.org/TR/css3-selectors/#attribute-selectors
                	// Proper syntax: http://www.w3.org/TR/CSS21/syndata.html#value-def-identifier
                	identifier = characterEncoding.replace( "w", "w#" ),
                
                	// Acceptable operators http://www.w3.org/TR/selectors/#attribute-selectors
                	attributes = "\\[" + whitespace + "*(" + characterEncoding + ")" + whitespace +
                		"*(?:([*^$|!~]?=)" + whitespace + "*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|(" + identifier + ")|)|)" + whitespace + "*\\]",
                
                	// Prefer arguments quoted,
                	//   then not containing pseudos/brackets,
                	//   then attribute selectors/non-parenthetical expressions,
                	//   then anything else
                	// These preferences are here to reduce the number of selectors
                	//   needing tokenize in the PSEUDO preFilter
                	pseudos = ":(" + characterEncoding + ")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|" + attributes.replace( 3, 8 ) + ")*)|.*)\\)|)",
                
                	// Leading and non-escaped trailing whitespace, capturing some non-whitespace characters preceding the latter
                	rtrim = new RegExp( "^" + whitespace + "+|((?:^|[^\\\\])(?:\\\\.)*)" + whitespace + "+$", "g" ),
                
                	rcomma = new RegExp( "^" + whitespace + "*," + whitespace + "*" ),
                	rcombinators = new RegExp( "^" + whitespace + "*([>+~]|" + whitespace + ")" + whitespace + "*" ),
                
                	rsibling = new RegExp( whitespace + "*[+~]" ),
                	rattributeQuotes = new RegExp( "=" + whitespace + "*([^\\]'\"]*)" + whitespace + "*\\]", "g" ),
                
                	rpseudo = new RegExp( pseudos ),
                	ridentifier = new RegExp( "^" + identifier + "$" ),
                
                	matchExpr = {
                		"ID": new RegExp( "^#(" + characterEncoding + ")" ),
                		"CLASS": new RegExp( "^\\.(" + characterEncoding + ")" ),
                		"TAG": new RegExp( "^(" + characterEncoding.replace( "w", "w*" ) + ")" ),
                		"ATTR": new RegExp( "^" + attributes ),
                		"PSEUDO": new RegExp( "^" + pseudos ),
                		"CHILD": new RegExp( "^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + whitespace +
                			"*(even|odd|(([+-]|)(\\d*)n|)" + whitespace + "*(?:([+-]|)" + whitespace +
                			"*(\\d+)|))" + whitespace + "*\\)|)", "i" ),
                		"bool": new RegExp( "^(?:" + booleans + ")$", "i" ),
                		// For use in libraries implementing .is()
                		// We use this for POS matching in `select`
                		"needsContext": new RegExp( "^" + whitespace + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" +
                			whitespace + "*((?:-\\d)?\\d*)" + whitespace + "*\\)|)(?=[^-]|$)", "i" )
                	},
                
                	rnative = /^[^{]+\{\s*\[native \w/,
                
                	// Easily-parseable/retrievable ID or TAG or CLASS selectors
                	rquickExpr = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,
                
                	rinputs = /^(?:input|select|textarea|button)$/i,
                	rheader = /^h\d$/i,
                
                	rescape = /'|\\/g,
                
                	// CSS escapes http://www.w3.org/TR/CSS21/syndata.html#escaped-characters
                	runescape = new RegExp( "\\\\([\\da-f]{1,6}" + whitespace + "?|(" + whitespace + ")|.)", "ig" ),
                	funescape = function( _, escaped, escapedWhitespace ) {
                		var high = "0x" + escaped - 0x10000;
                		// NaN means non-codepoint
                		// Support: Firefox
                		// Workaround erroneous numeric interpretation of +"0x"
                		return high !== high || escapedWhitespace ?
                			escaped :
                			// BMP codepoint
                			high < 0 ?
                				String.fromCharCode( high + 0x10000 ) :
                				// Supplemental Plane codepoint (surrogate pair)
                				String.fromCharCode( high >> 10 | 0xD800, high & 0x3FF | 0xDC00 );
                	};
                
                // Optimize for push.apply( _, NodeList )
                try {
                	push.apply(
                		(arr = slice.call( preferredDoc.childNodes )),
                		preferredDoc.childNodes
                	);
                	// Support: Android<4.0
                	// Detect silently failing push.apply
                	arr[ preferredDoc.childNodes.length ].nodeType;
                } catch ( e ) {
                	push = { apply: arr.length ?
                
                		// Leverage slice if possible
                		function( target, els ) {
                			push_native.apply( target, slice.call(els) );
                		} :
                
                		// Support: IE<9
                		// Otherwise append directly
                		function( target, els ) {
                			var j = target.length,
                				i = 0;
                			// Can't trust NodeList.length
                			while ( (target[j++] = els[i++]) ) {}
                			target.length = j - 1;
                		}
                	};
                }
                
                function Sizzle( selector, context, results, seed ) {
                	var match, elem, m, nodeType,
                		// QSA vars
                		i, groups, old, nid, newContext, newSelector;
                
                	if ( ( context ? context.ownerDocument || context : preferredDoc ) !== document ) {
                		setDocument( context );
                	}
                
                	context = context || document;
                	results = results || [];
                
                	if ( !selector || typeof selector !== "string" ) {
                		return results;
                	}
                
                	if ( (nodeType = context.nodeType) !== 1 && nodeType !== 9 ) {
                		return [];
                	}
                
                	if ( documentIsHTML && !seed ) {
                
                		// Shortcuts
                		if ( (match = rquickExpr.exec( selector )) ) {
                			// Speed-up: Sizzle("#ID")
                			if ( (m = match[1]) ) {
                				if ( nodeType === 9 ) {
                					elem = context.getElementById( m );
                					// Check parentNode to catch when Blackberry 4.6 returns
                					// nodes that are no longer in the document #6963
                					if ( elem && elem.parentNode ) {
                						// Handle the case where IE, Opera, and Webkit return items
                						// by name instead of ID
                						if ( elem.id === m ) {
                							results.push( elem );
                							return results;
                						}
                					} else {
                						return results;
                					}
                				} else {
                					// Context is not a document
                					if ( context.ownerDocument && (elem = context.ownerDocument.getElementById( m )) &&
                						contains( context, elem ) && elem.id === m ) {
                						results.push( elem );
                						return results;
                					}
                				}
                
                			// Speed-up: Sizzle("TAG")
                			} else if ( match[2] ) {
                				push.apply( results, context.getElementsByTagName( selector ) );
                				return results;
                
                			// Speed-up: Sizzle(".CLASS")
                			} else if ( (m = match[3]) && support.getElementsByClassName && context.getElementsByClassName ) {
                				push.apply( results, context.getElementsByClassName( m ) );
                				return results;
                			}
                		}
                
                		// QSA path
                		if ( support.qsa && (!rbuggyQSA || !rbuggyQSA.test( selector )) ) {
                			nid = old = expando;
                			newContext = context;
                			newSelector = nodeType === 9 && selector;
                
                			// qSA works strangely on Element-rooted queries
                			// We can work around this by specifying an extra ID on the root
                			// and working up from there (Thanks to Andrew Dupont for the technique)
                			// IE 8 doesn't work on object elements
                			if ( nodeType === 1 && context.nodeName.toLowerCase() !== "object" ) {
                				groups = tokenize( selector );
                
                				if ( (old = context.getAttribute("id")) ) {
                					nid = old.replace( rescape, "\\$&" );
                				} else {
                					context.setAttribute( "id", nid );
                				}
                				nid = "[id='" + nid + "'] ";
                
                				i = groups.length;
                				while ( i-- ) {
                					groups[i] = nid + toSelector( groups[i] );
                				}
                				newContext = rsibling.test( selector ) && context.parentNode || context;
                				newSelector = groups.join(",");
                			}
                
                			if ( newSelector ) {
                				try {
                					push.apply( results,
                						newContext.querySelectorAll( newSelector )
                					);
                					return results;
                				} catch(qsaError) {
                				} finally {
                					if ( !old ) {
                						context.removeAttribute("id");
                					}
                				}
                			}
                		}
                	}
                
                	// All others
                	return select( selector.replace( rtrim, "$1" ), context, results, seed );
                }
                
                /**
                 * Create key-value caches of limited size
                 * @returns {Function(string, Object)} Returns the Object data after storing it on itself with
                 *	property name the (space-suffixed) string and (if the cache is larger than Expr.cacheLength)
                 *	deleting the oldest entry
                 */
                function createCache() {
                	var keys = [];
                
                	function cache( key, value ) {
                		// Use (key + " ") to avoid collision with native prototype properties (see Issue #157)
                		if ( keys.push( key += " " ) > Expr.cacheLength ) {
                			// Only keep the most recent entries
                			delete cache[ keys.shift() ];
                		}
                		return (cache[ key ] = value);
                	}
                	return cache;
                }
                
                /**
                 * Mark a function for special use by Sizzle
                 * @param {Function} fn The function to mark
                 */
                function markFunction( fn ) {
                	fn[ expando ] = true;
                	return fn;
                }
                
                /**
                 * Support testing using an element
                 * @param {Function} fn Passed the created div and expects a boolean result
                 */
                function assert( fn ) {
                	var div = document.createElement("div");
                
                	try {
                		return !!fn( div );
                	} catch (e) {
                		return false;
                	} finally {
                		// Remove from its parent by default
                		if ( div.parentNode ) {
                			div.parentNode.removeChild( div );
                		}
                		// release memory in IE
                		div = null;
                	}
                }
                
                /**
                 * Adds the same handler for all of the specified attrs
                 * @param {String} attrs Pipe-separated list of attributes
                 * @param {Function} handler The method that will be applied
                 */
                function addHandle( attrs, handler ) {
                	var arr = attrs.split("|"),
                		i = attrs.length;
                
                	while ( i-- ) {
                		Expr.attrHandle[ arr[i] ] = handler;
                	}
                }
                
                /**
                 * Checks document order of two siblings
                 * @param {Element} a
                 * @param {Element} b
                 * @returns {Number} Returns less than 0 if a precedes b, greater than 0 if a follows b
                 */
                function siblingCheck( a, b ) {
                	var cur = b && a,
                		diff = cur && a.nodeType === 1 && b.nodeType === 1 &&
                			( ~b.sourceIndex || MAX_NEGATIVE ) -
                			( ~a.sourceIndex || MAX_NEGATIVE );
                
                	// Use IE sourceIndex if available on both nodes
                	if ( diff ) {
                		return diff;
                	}
                
                	// Check if b follows a
                	if ( cur ) {
                		while ( (cur = cur.nextSibling) ) {
                			if ( cur === b ) {
                				return -1;
                			}
                		}
                	}
                
                	return a ? 1 : -1;
                }
                
                /**
                 * Returns a function to use in pseudos for input types
                 * @param {String} type
                 */
                function createInputPseudo( type ) {
                	return function( elem ) {
                		var name = elem.nodeName.toLowerCase();
                		return name === "input" && elem.type === type;
                	};
                }
                
                /**
                 * Returns a function to use in pseudos for buttons
                 * @param {String} type
                 */
                function createButtonPseudo( type ) {
                	return function( elem ) {
                		var name = elem.nodeName.toLowerCase();
                		return (name === "input" || name === "button") && elem.type === type;
                	};
                }
                
                /**
                 * Returns a function to use in pseudos for positionals
                 * @param {Function} fn
                 */
                function createPositionalPseudo( fn ) {
                	return markFunction(function( argument ) {
                		argument = +argument;
                		return markFunction(function( seed, matches ) {
                			var j,
                				matchIndexes = fn( [], seed.length, argument ),
                				i = matchIndexes.length;
                
                			// Match elements found at the specified indexes
                			while ( i-- ) {
                				if ( seed[ (j = matchIndexes[i]) ] ) {
                					seed[j] = !(matches[j] = seed[j]);
                				}
                			}
                		});
                	});
                }
                
                /**
                 * Detect xml
                 * @param {Element|Object} elem An element or a document
                 */
                isXML = Sizzle.isXML = function( elem ) {
                	// documentElement is verified for cases where it doesn't yet exist
                	// (such as loading iframes in IE - #4833)
                	var documentElement = elem && (elem.ownerDocument || elem).documentElement;
                	return documentElement ? documentElement.nodeName !== "HTML" : false;
                };
                
                // Expose support vars for convenience
                support = Sizzle.support = {};
                
                /**
                 * Sets document-related variables once based on the current document
                 * @param {Element|Object} [doc] An element or document object to use to set the document
                 * @returns {Object} Returns the current document
                 */
                setDocument = Sizzle.setDocument = function( node ) {
                	var doc = node ? node.ownerDocument || node : preferredDoc,
                		parent = doc.defaultView;
                
                	// If no document and documentElement is available, return
                	if ( doc === document || doc.nodeType !== 9 || !doc.documentElement ) {
                		return document;
                	}
                
                	// Set our document
                	document = doc;
                	docElem = doc.documentElement;
                
                	// Support tests
                	documentIsHTML = !isXML( doc );
                
                	// Support: IE>8
                	// If iframe document is assigned to "document" variable and if iframe has been reloaded,
                	// IE will throw "permission denied" error when accessing "document" variable, see jQuery #13936
                	// IE6-8 do not support the defaultView property so parent will be undefined
                	if ( parent && parent.attachEvent && parent !== parent.top ) {
                		parent.attachEvent( "onbeforeunload", function() {
                			setDocument();
                		});
                	}
                
                	/* Attributes
                	---------------------------------------------------------------------- */
                
                	// Support: IE<8
                	// Verify that getAttribute really returns attributes and not properties (excepting IE8 booleans)
                	support.attributes = assert(function( div ) {
                		div.className = "i";
                		return !div.getAttribute("className");
                	});
                
                	/* getElement(s)By*
                	---------------------------------------------------------------------- */
                
                	// Check if getElementsByTagName("*") returns only elements
                	support.getElementsByTagName = assert(function( div ) {
                		div.appendChild( doc.createComment("") );
                		return !div.getElementsByTagName("*").length;
                	});
                
                	// Check if getElementsByClassName can be trusted
                	support.getElementsByClassName = assert(function( div ) {
                		div.innerHTML = "<div class='a'></div><div class='a i'></div>";
                
                		// Support: Safari<4
                		// Catch class over-caching
                		div.firstChild.className = "i";
                		// Support: Opera<10
                		// Catch gEBCN failure to find non-leading classes
                		return div.getElementsByClassName("i").length === 2;
                	});
                
                	// Support: IE<10
                	// Check if getElementById returns elements by name
                	// The broken getElementById methods don't pick up programatically-set names,
                	// so use a roundabout getElementsByName test
                	support.getById = assert(function( div ) {
                		docElem.appendChild( div ).id = expando;
                		return !doc.getElementsByName || !doc.getElementsByName( expando ).length;
                	});
                
                	// ID find and filter
                	if ( support.getById ) {
                		Expr.find["ID"] = function( id, context ) {
                			if ( typeof context.getElementById !== strundefined && documentIsHTML ) {
                				var m = context.getElementById( id );
                				// Check parentNode to catch when Blackberry 4.6 returns
                				// nodes that are no longer in the document #6963
                				return m && m.parentNode ? [m] : [];
                			}
                		};
                		Expr.filter["ID"] = function( id ) {
                			var attrId = id.replace( runescape, funescape );
                			return function( elem ) {
                				return elem.getAttribute("id") === attrId;
                			};
                		};
                	} else {
                		// Support: IE6/7
                		// getElementById is not reliable as a find shortcut
                		delete Expr.find["ID"];
                
                		Expr.filter["ID"] =  function( id ) {
                			var attrId = id.replace( runescape, funescape );
                			return function( elem ) {
                				var node = typeof elem.getAttributeNode !== strundefined && elem.getAttributeNode("id");
                				return node && node.value === attrId;
                			};
                		};
                	}
                
                	// Tag
                	Expr.find["TAG"] = support.getElementsByTagName ?
                		function( tag, context ) {
                			if ( typeof context.getElementsByTagName !== strundefined ) {
                				return context.getElementsByTagName( tag );
                			}
                		} :
                		function( tag, context ) {
                			var elem,
                				tmp = [],
                				i = 0,
                				results = context.getElementsByTagName( tag );
                
                			// Filter out possible comments
                			if ( tag === "*" ) {
                				while ( (elem = results[i++]) ) {
                					if ( elem.nodeType === 1 ) {
                						tmp.push( elem );
                					}
                				}
                
                				return tmp;
                			}
                			return results;
                		};
                
                	// Class
                	Expr.find["CLASS"] = support.getElementsByClassName && function( className, context ) {
                		if ( typeof context.getElementsByClassName !== strundefined && documentIsHTML ) {
                			return context.getElementsByClassName( className );
                		}
                	};
                
                	/* QSA/matchesSelector
                	---------------------------------------------------------------------- */
                
                	// QSA and matchesSelector support
                
                	// matchesSelector(:active) reports false when true (IE9/Opera 11.5)
                	rbuggyMatches = [];
                
                	// qSa(:focus) reports false when true (Chrome 21)
                	// We allow this because of a bug in IE8/9 that throws an error
                	// whenever `document.activeElement` is accessed on an iframe
                	// So, we allow :focus to pass through QSA all the time to avoid the IE error
                	// See http://bugs.jquery.com/ticket/13378
                	rbuggyQSA = [];
                
                	if ( (support.qsa = rnative.test( doc.querySelectorAll )) ) {
                		// Build QSA regex
                		// Regex strategy adopted from Diego Perini
                		assert(function( div ) {
                			// Select is set to empty string on purpose
                			// This is to test IE's treatment of not explicitly
                			// setting a boolean content attribute,
                			// since its presence should be enough
                			// http://bugs.jquery.com/ticket/12359
                			div.innerHTML = "<select><option selected=''></option></select>";
                
                			// Support: IE8
                			// Boolean attributes and "value" are not treated correctly
                			if ( !div.querySelectorAll("[selected]").length ) {
                				rbuggyQSA.push( "\\[" + whitespace + "*(?:value|" + booleans + ")" );
                			}
                
                			// Webkit/Opera - :checked should return selected option elements
                			// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked
                			// IE8 throws error here and will not see later tests
                			if ( !div.querySelectorAll(":checked").length ) {
                				rbuggyQSA.push(":checked");
                			}
                		});
                
                		assert(function( div ) {
                
                			// Support: Opera 10-12/IE8
                			// ^= $= *= and empty values
                			// Should not select anything
                			// Support: Windows 8 Native Apps
                			// The type attribute is restricted during .innerHTML assignment
                			var input = doc.createElement("input");
                			input.setAttribute( "type", "hidden" );
                			div.appendChild( input ).setAttribute( "t", "" );
                
                			if ( div.querySelectorAll("[t^='']").length ) {
                				rbuggyQSA.push( "[*^$]=" + whitespace + "*(?:''|\"\")" );
                			}
                
                			// FF 3.5 - :enabled/:disabled and hidden elements (hidden elements are still enabled)
                			// IE8 throws error here and will not see later tests
                			if ( !div.querySelectorAll(":enabled").length ) {
                				rbuggyQSA.push( ":enabled", ":disabled" );
                			}
                
                			// Opera 10-11 does not throw on post-comma invalid pseudos
                			div.querySelectorAll("*,:x");
                			rbuggyQSA.push(",.*:");
                		});
                	}
                
                	if ( (support.matchesSelector = rnative.test( (matches = docElem.webkitMatchesSelector ||
                		docElem.mozMatchesSelector ||
                		docElem.oMatchesSelector ||
                		docElem.msMatchesSelector) )) ) {
                
                		assert(function( div ) {
                			// Check to see if it's possible to do matchesSelector
                			// on a disconnected node (IE 9)
                			support.disconnectedMatch = matches.call( div, "div" );
                
                			// This should fail with an exception
                			// Gecko does not error, returns false instead
                			matches.call( div, "[s!='']:x" );
                			rbuggyMatches.push( "!=", pseudos );
                		});
                	}
                
                	rbuggyQSA = rbuggyQSA.length && new RegExp( rbuggyQSA.join("|") );
                	rbuggyMatches = rbuggyMatches.length && new RegExp( rbuggyMatches.join("|") );
                
                	/* Contains
                	---------------------------------------------------------------------- */
                
                	// Element contains another
                	// Purposefully does not implement inclusive descendent
                	// As in, an element does not contain itself
                	contains = rnative.test( docElem.contains ) || docElem.compareDocumentPosition ?
                		function( a, b ) {
                			var adown = a.nodeType === 9 ? a.documentElement : a,
                				bup = b && b.parentNode;
                			return a === bup || !!( bup && bup.nodeType === 1 && (
                				adown.contains ?
                					adown.contains( bup ) :
                					a.compareDocumentPosition && a.compareDocumentPosition( bup ) & 16
                			));
                		} :
                		function( a, b ) {
                			if ( b ) {
                				while ( (b = b.parentNode) ) {
                					if ( b === a ) {
                						return true;
                					}
                				}
                			}
                			return false;
                		};
                
                	/* Sorting
                	---------------------------------------------------------------------- */
                
                	// Document order sorting
                	sortOrder = docElem.compareDocumentPosition ?
                	function( a, b ) {
                
                		// Flag for duplicate removal
                		if ( a === b ) {
                			hasDuplicate = true;
                			return 0;
                		}
                
                		var compare = b.compareDocumentPosition && a.compareDocumentPosition && a.compareDocumentPosition( b );
                
                		if ( compare ) {
                			// Disconnected nodes
                			if ( compare & 1 ||
                				(!support.sortDetached && b.compareDocumentPosition( a ) === compare) ) {
                
                				// Choose the first element that is related to our preferred document
                				if ( a === doc || contains(preferredDoc, a) ) {
                					return -1;
                				}
                				if ( b === doc || contains(preferredDoc, b) ) {
                					return 1;
                				}
                
                				// Maintain original order
                				return sortInput ?
                					( indexOf.call( sortInput, a ) - indexOf.call( sortInput, b ) ) :
                					0;
                			}
                
                			return compare & 4 ? -1 : 1;
                		}
                
                		// Not directly comparable, sort on existence of method
                		return a.compareDocumentPosition ? -1 : 1;
                	} :
                	function( a, b ) {
                		var cur,
                			i = 0,
                			aup = a.parentNode,
                			bup = b.parentNode,
                			ap = [ a ],
                			bp = [ b ];
                
                		// Exit early if the nodes are identical
                		if ( a === b ) {
                			hasDuplicate = true;
                			return 0;
                
                		// Parentless nodes are either documents or disconnected
                		} else if ( !aup || !bup ) {
                			return a === doc ? -1 :
                				b === doc ? 1 :
                				aup ? -1 :
                				bup ? 1 :
                				sortInput ?
                				( indexOf.call( sortInput, a ) - indexOf.call( sortInput, b ) ) :
                				0;
                
                		// If the nodes are siblings, we can do a quick check
                		} else if ( aup === bup ) {
                			return siblingCheck( a, b );
                		}
                
                		// Otherwise we need full lists of their ancestors for comparison
                		cur = a;
                		while ( (cur = cur.parentNode) ) {
                			ap.unshift( cur );
                		}
                		cur = b;
                		while ( (cur = cur.parentNode) ) {
                			bp.unshift( cur );
                		}
                
                		// Walk down the tree looking for a discrepancy
                		while ( ap[i] === bp[i] ) {
                			i++;
                		}
                
                		return i ?
                			// Do a sibling check if the nodes have a common ancestor
                			siblingCheck( ap[i], bp[i] ) :
                
                			// Otherwise nodes in our document sort first
                			ap[i] === preferredDoc ? -1 :
                			bp[i] === preferredDoc ? 1 :
                			0;
                	};
                
                	return doc;
                };
                
                Sizzle.matches = function( expr, elements ) {
                	return Sizzle( expr, null, null, elements );
                };
                
                Sizzle.matchesSelector = function( elem, expr ) {
                	// Set document vars if needed
                	if ( ( elem.ownerDocument || elem ) !== document ) {
                		setDocument( elem );
                	}
                
                	// Make sure that attribute selectors are quoted
                	expr = expr.replace( rattributeQuotes, "='$1']" );
                
                	if ( support.matchesSelector && documentIsHTML &&
                		( !rbuggyMatches || !rbuggyMatches.test( expr ) ) &&
                		( !rbuggyQSA     || !rbuggyQSA.test( expr ) ) ) {
                
                		try {
                			var ret = matches.call( elem, expr );
                
                			// IE 9's matchesSelector returns false on disconnected nodes
                			if ( ret || support.disconnectedMatch ||
                					// As well, disconnected nodes are said to be in a document
                					// fragment in IE 9
                					elem.document && elem.document.nodeType !== 11 ) {
                				return ret;
                			}
                		} catch(e) {}
                	}
                
                	return Sizzle( expr, document, null, [elem] ).length > 0;
                };
                
                Sizzle.contains = function( context, elem ) {
                	// Set document vars if needed
                	if ( ( context.ownerDocument || context ) !== document ) {
                		setDocument( context );
                	}
                	return contains( context, elem );
                };
                
                Sizzle.attr = function( elem, name ) {
                	// Set document vars if needed
                	if ( ( elem.ownerDocument || elem ) !== document ) {
                		setDocument( elem );
                	}
                
                	var fn = Expr.attrHandle[ name.toLowerCase() ],
                		// Don't get fooled by Object.prototype properties (jQuery #13807)
                		val = fn && hasOwn.call( Expr.attrHandle, name.toLowerCase() ) ?
                			fn( elem, name, !documentIsHTML ) :
                			undefined;
                
                	return val === undefined ?
                		support.attributes || !documentIsHTML ?
                			elem.getAttribute( name ) :
                			(val = elem.getAttributeNode(name)) && val.specified ?
                				val.value :
                				null :
                		val;
                };
                
                Sizzle.error = function( msg ) {
                	throw new Error( "Syntax error, unrecognized expression: " + msg );
                };
                
                /**
                 * Document sorting and removing duplicates
                 * @param {ArrayLike} results
                 */
                Sizzle.uniqueSort = function( results ) {
                	var elem,
                		duplicates = [],
                		j = 0,
                		i = 0;
                
                	// Unless we *know* we can detect duplicates, assume their presence
                	hasDuplicate = !support.detectDuplicates;
                	sortInput = !support.sortStable && results.slice( 0 );
                	results.sort( sortOrder );
                
                	if ( hasDuplicate ) {
                		while ( (elem = results[i++]) ) {
                			if ( elem === results[ i ] ) {
                				j = duplicates.push( i );
                			}
                		}
                		while ( j-- ) {
                			results.splice( duplicates[ j ], 1 );
                		}
                	}
                
                	return results;
                };
                
                /**
                 * Utility function for retrieving the text value of an array of DOM nodes
                 * @param {Array|Element} elem
                 */
                getText = Sizzle.getText = function( elem ) {
                	var node,
                		ret = "",
                		i = 0,
                		nodeType = elem.nodeType;
                
                	if ( !nodeType ) {
                		// If no nodeType, this is expected to be an array
                		for ( ; (node = elem[i]); i++ ) {
                			// Do not traverse comment nodes
                			ret += getText( node );
                		}
                	} else if ( nodeType === 1 || nodeType === 9 || nodeType === 11 ) {
                		// Use textContent for elements
                		// innerText usage removed for consistency of new lines (see #11153)
                		if ( typeof elem.textContent === "string" ) {
                			return elem.textContent;
                		} else {
                			// Traverse its children
                			for ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {
                				ret += getText( elem );
                			}
                		}
                	} else if ( nodeType === 3 || nodeType === 4 ) {
                		return elem.nodeValue;
                	}
                	// Do not include comment or processing instruction nodes
                
                	return ret;
                };
                
                Expr = Sizzle.selectors = {
                
                	// Can be adjusted by the user
                	cacheLength: 50,
                
                	createPseudo: markFunction,
                
                	match: matchExpr,
                
                	attrHandle: {},
                
                	find: {},
                
                	relative: {
                		">": { dir: "parentNode", first: true },
                		" ": { dir: "parentNode" },
                		"+": { dir: "previousSibling", first: true },
                		"~": { dir: "previousSibling" }
                	},
                
                	preFilter: {
                		"ATTR": function( match ) {
                			match[1] = match[1].replace( runescape, funescape );
                
                			// Move the given value to match[3] whether quoted or unquoted
                			match[3] = ( match[4] || match[5] || "" ).replace( runescape, funescape );
                
                			if ( match[2] === "~=" ) {
                				match[3] = " " + match[3] + " ";
                			}
                
                			return match.slice( 0, 4 );
                		},
                
                		"CHILD": function( match ) {
                			/* matches from matchExpr["CHILD"]
                				1 type (only|nth|...)
                				2 what (child|of-type)
                				3 argument (even|odd|\d*|\d*n([+-]\d+)?|...)
                				4 xn-component of xn+y argument ([+-]?\d*n|)
                				5 sign of xn-component
                				6 x of xn-component
                				7 sign of y-component
                				8 y of y-component
                			*/
                			match[1] = match[1].toLowerCase();
                
                			if ( match[1].slice( 0, 3 ) === "nth" ) {
                				// nth-* requires argument
                				if ( !match[3] ) {
                					Sizzle.error( match[0] );
                				}
                
                				// numeric x and y parameters for Expr.filter.CHILD
                				// remember that false/true cast respectively to 0/1
                				match[4] = +( match[4] ? match[5] + (match[6] || 1) : 2 * ( match[3] === "even" || match[3] === "odd" ) );
                				match[5] = +( ( match[7] + match[8] ) || match[3] === "odd" );
                
                			// other types prohibit arguments
                			} else if ( match[3] ) {
                				Sizzle.error( match[0] );
                			}
                
                			return match;
                		},
                
                		"PSEUDO": function( match ) {
                			var excess,
                				unquoted = !match[5] && match[2];
                
                			if ( matchExpr["CHILD"].test( match[0] ) ) {
                				return null;
                			}
                
                			// Accept quoted arguments as-is
                			if ( match[3] && match[4] !== undefined ) {
                				match[2] = match[4];
                
                			// Strip excess characters from unquoted arguments
                			} else if ( unquoted && rpseudo.test( unquoted ) &&
                				// Get excess from tokenize (recursively)
                				(excess = tokenize( unquoted, true )) &&
                				// advance to the next closing parenthesis
                				(excess = unquoted.indexOf( ")", unquoted.length - excess ) - unquoted.length) ) {
                
                				// excess is a negative index
                				match[0] = match[0].slice( 0, excess );
                				match[2] = unquoted.slice( 0, excess );
                			}
                
                			// Return only captures needed by the pseudo filter method (type and argument)
                			return match.slice( 0, 3 );
                		}
                	},
                
                	filter: {
                
                		"TAG": function( nodeNameSelector ) {
                			var nodeName = nodeNameSelector.replace( runescape, funescape ).toLowerCase();
                			return nodeNameSelector === "*" ?
                				function() { return true; } :
                				function( elem ) {
                					return elem.nodeName && elem.nodeName.toLowerCase() === nodeName;
                				};
                		},
                
                		"CLASS": function( className ) {
                			var pattern = classCache[ className + " " ];
                
                			return pattern ||
                				(pattern = new RegExp( "(^|" + whitespace + ")" + className + "(" + whitespace + "|$)" )) &&
                				classCache( className, function( elem ) {
                					return pattern.test( typeof elem.className === "string" && elem.className || typeof elem.getAttribute !== strundefined && elem.getAttribute("class") || "" );
                				});
                		},
                
                		"ATTR": function( name, operator, check ) {
                			return function( elem ) {
                				var result = Sizzle.attr( elem, name );
                
                				if ( result == null ) {
                					return operator === "!=";
                				}
                				if ( !operator ) {
                					return true;
                				}
                
                				result += "";
                
                				return operator === "=" ? result === check :
                					operator === "!=" ? result !== check :
                					operator === "^=" ? check && result.indexOf( check ) === 0 :
                					operator === "*=" ? check && result.indexOf( check ) > -1 :
                					operator === "$=" ? check && result.slice( -check.length ) === check :
                					operator === "~=" ? ( " " + result + " " ).indexOf( check ) > -1 :
                					operator === "|=" ? result === check || result.slice( 0, check.length + 1 ) === check + "-" :
                					false;
                			};
                		},
                
                		"CHILD": function( type, what, argument, first, last ) {
                			var simple = type.slice( 0, 3 ) !== "nth",
                				forward = type.slice( -4 ) !== "last",
                				ofType = what === "of-type";
                
                			return first === 1 && last === 0 ?
                
                				// Shortcut for :nth-*(n)
                				function( elem ) {
                					return !!elem.parentNode;
                				} :
                
                				function( elem, context, xml ) {
                					var cache, outerCache, node, diff, nodeIndex, start,
                						dir = simple !== forward ? "nextSibling" : "previousSibling",
                						parent = elem.parentNode,
                						name = ofType && elem.nodeName.toLowerCase(),
                						useCache = !xml && !ofType;
                
                					if ( parent ) {
                
                						// :(first|last|only)-(child|of-type)
                						if ( simple ) {
                							while ( dir ) {
                								node = elem;
                								while ( (node = node[ dir ]) ) {
                									if ( ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1 ) {
                										return false;
                									}
                								}
                								// Reverse direction for :only-* (if we haven't yet done so)
                								start = dir = type === "only" && !start && "nextSibling";
                							}
                							return true;
                						}
                
                						start = [ forward ? parent.firstChild : parent.lastChild ];
                
                						// non-xml :nth-child(...) stores cache data on `parent`
                						if ( forward && useCache ) {
                							// Seek `elem` from a previously-cached index
                							outerCache = parent[ expando ] || (parent[ expando ] = {});
                							cache = outerCache[ type ] || [];
                							nodeIndex = cache[0] === dirruns && cache[1];
                							diff = cache[0] === dirruns && cache[2];
                							node = nodeIndex && parent.childNodes[ nodeIndex ];
                
                							while ( (node = ++nodeIndex && node && node[ dir ] ||
                
                								// Fallback to seeking `elem` from the start
                								(diff = nodeIndex = 0) || start.pop()) ) {
                
                								// When found, cache indexes on `parent` and break
                								if ( node.nodeType === 1 && ++diff && node === elem ) {
                									outerCache[ type ] = [ dirruns, nodeIndex, diff ];
                									break;
                								}
                							}
                
                						// Use previously-cached element index if available
                						} else if ( useCache && (cache = (elem[ expando ] || (elem[ expando ] = {}))[ type ]) && cache[0] === dirruns ) {
                							diff = cache[1];
                
                						// xml :nth-child(...) or :nth-last-child(...) or :nth(-last)?-of-type(...)
                						} else {
                							// Use the same loop as above to seek `elem` from the start
                							while ( (node = ++nodeIndex && node && node[ dir ] ||
                								(diff = nodeIndex = 0) || start.pop()) ) {
                
                								if ( ( ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1 ) && ++diff ) {
                									// Cache the index of each encountered element
                									if ( useCache ) {
                										(node[ expando ] || (node[ expando ] = {}))[ type ] = [ dirruns, diff ];
                									}
                
                									if ( node === elem ) {
                										break;
                									}
                								}
                							}
                						}
                
                						// Incorporate the offset, then check against cycle size
                						diff -= last;
                						return diff === first || ( diff % first === 0 && diff / first >= 0 );
                					}
                				};
                		},
                
                		"PSEUDO": function( pseudo, argument ) {
                			// pseudo-class names are case-insensitive
                			// http://www.w3.org/TR/selectors/#pseudo-classes
                			// Prioritize by case sensitivity in case custom pseudos are added with uppercase letters
                			// Remember that setFilters inherits from pseudos
                			var args,
                				fn = Expr.pseudos[ pseudo ] || Expr.setFilters[ pseudo.toLowerCase() ] ||
                					Sizzle.error( "unsupported pseudo: " + pseudo );
                
                			// The user may use createPseudo to indicate that
                			// arguments are needed to create the filter function
                			// just as Sizzle does
                			if ( fn[ expando ] ) {
                				return fn( argument );
                			}
                
                			// But maintain support for old signatures
                			if ( fn.length > 1 ) {
                				args = [ pseudo, pseudo, "", argument ];
                				return Expr.setFilters.hasOwnProperty( pseudo.toLowerCase() ) ?
                					markFunction(function( seed, matches ) {
                						var idx,
                							matched = fn( seed, argument ),
                							i = matched.length;
                						while ( i-- ) {
                							idx = indexOf.call( seed, matched[i] );
                							seed[ idx ] = !( matches[ idx ] = matched[i] );
                						}
                					}) :
                					function( elem ) {
                						return fn( elem, 0, args );
                					};
                			}
                
                			return fn;
                		}
                	},
                
                	pseudos: {
                		// Potentially complex pseudos
                		"not": markFunction(function( selector ) {
                			// Trim the selector passed to compile
                			// to avoid treating leading and trailing
                			// spaces as combinators
                			var input = [],
                				results = [],
                				matcher = compile( selector.replace( rtrim, "$1" ) );
                
                			return matcher[ expando ] ?
                				markFunction(function( seed, matches, context, xml ) {
                					var elem,
                						unmatched = matcher( seed, null, xml, [] ),
                						i = seed.length;
                
                					// Match elements unmatched by `matcher`
                					while ( i-- ) {
                						if ( (elem = unmatched[i]) ) {
                							seed[i] = !(matches[i] = elem);
                						}
                					}
                				}) :
                				function( elem, context, xml ) {
                					input[0] = elem;
                					matcher( input, null, xml, results );
                					return !results.pop();
                				};
                		}),
                
                		"has": markFunction(function( selector ) {
                			return function( elem ) {
                				return Sizzle( selector, elem ).length > 0;
                			};
                		}),
                
                		"contains": markFunction(function( text ) {
                			return function( elem ) {
                				return ( elem.textContent || elem.innerText || getText( elem ) ).indexOf( text ) > -1;
                			};
                		}),
                
                		// "Whether an element is represented by a :lang() selector
                		// is based solely on the element's language value
                		// being equal to the identifier C,
                		// or beginning with the identifier C immediately followed by "-".
                		// The matching of C against the element's language value is performed case-insensitively.
                		// The identifier C does not have to be a valid language name."
                		// http://www.w3.org/TR/selectors/#lang-pseudo
                		"lang": markFunction( function( lang ) {
                			// lang value must be a valid identifier
                			if ( !ridentifier.test(lang || "") ) {
                				Sizzle.error( "unsupported lang: " + lang );
                			}
                			lang = lang.replace( runescape, funescape ).toLowerCase();
                			return function( elem ) {
                				var elemLang;
                				do {
                					if ( (elemLang = documentIsHTML ?
                						elem.lang :
                						elem.getAttribute("xml:lang") || elem.getAttribute("lang")) ) {
                
                						elemLang = elemLang.toLowerCase();
                						return elemLang === lang || elemLang.indexOf( lang + "-" ) === 0;
                					}
                				} while ( (elem = elem.parentNode) && elem.nodeType === 1 );
                				return false;
                			};
                		}),
                
                		// Miscellaneous
                		"target": function( elem ) {
                			var hash = window.location && window.location.hash;
                			return hash && hash.slice( 1 ) === elem.id;
                		},
                
                		"root": function( elem ) {
                			return elem === docElem;
                		},
                
                		"focus": function( elem ) {
                			return elem === document.activeElement && (!document.hasFocus || document.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);
                		},
                
                		// Boolean properties
                		"enabled": function( elem ) {
                			return elem.disabled === false;
                		},
                
                		"disabled": function( elem ) {
                			return elem.disabled === true;
                		},
                
                		"checked": function( elem ) {
                			// In CSS3, :checked should return both checked and selected elements
                			// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked
                			var nodeName = elem.nodeName.toLowerCase();
                			return (nodeName === "input" && !!elem.checked) || (nodeName === "option" && !!elem.selected);
                		},
                
                		"selected": function( elem ) {
                			// Accessing this property makes selected-by-default
                			// options in Safari work properly
                			if ( elem.parentNode ) {
                				elem.parentNode.selectedIndex;
                			}
                
                			return elem.selected === true;
                		},
                
                		// Contents
                		"empty": function( elem ) {
                			// http://www.w3.org/TR/selectors/#empty-pseudo
                			// :empty is only affected by element nodes and content nodes(including text(3), cdata(4)),
                			//   not comment, processing instructions, or others
                			// Thanks to Diego Perini for the nodeName shortcut
                			//   Greater than "@" means alpha characters (specifically not starting with "#" or "?")
                			for ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {
                				if ( elem.nodeName > "@" || elem.nodeType === 3 || elem.nodeType === 4 ) {
                					return false;
                				}
                			}
                			return true;
                		},
                
                		"parent": function( elem ) {
                			return !Expr.pseudos["empty"]( elem );
                		},
                
                		// Element/input types
                		"header": function( elem ) {
                			return rheader.test( elem.nodeName );
                		},
                
                		"input": function( elem ) {
                			return rinputs.test( elem.nodeName );
                		},
                
                		"button": function( elem ) {
                			var name = elem.nodeName.toLowerCase();
                			return name === "input" && elem.type === "button" || name === "button";
                		},
                
                		"text": function( elem ) {
                			var attr;
                			// IE6 and 7 will map elem.type to 'text' for new HTML5 types (search, etc)
                			// use getAttribute instead to test this case
                			return elem.nodeName.toLowerCase() === "input" &&
                				elem.type === "text" &&
                				( (attr = elem.getAttribute("type")) == null || attr.toLowerCase() === elem.type );
                		},
                
                		// Position-in-collection
                		"first": createPositionalPseudo(function() {
                			return [ 0 ];
                		}),
                
                		"last": createPositionalPseudo(function( matchIndexes, length ) {
                			return [ length - 1 ];
                		}),
                
                		"eq": createPositionalPseudo(function( matchIndexes, length, argument ) {
                			return [ argument < 0 ? argument + length : argument ];
                		}),
                
                		"even": createPositionalPseudo(function( matchIndexes, length ) {
                			var i = 0;
                			for ( ; i < length; i += 2 ) {
                				matchIndexes.push( i );
                			}
                			return matchIndexes;
                		}),
                
                		"odd": createPositionalPseudo(function( matchIndexes, length ) {
                			var i = 1;
                			for ( ; i < length; i += 2 ) {
                				matchIndexes.push( i );
                			}
                			return matchIndexes;
                		}),
                
                		"lt": createPositionalPseudo(function( matchIndexes, length, argument ) {
                			var i = argument < 0 ? argument + length : argument;
                			for ( ; --i >= 0; ) {
                				matchIndexes.push( i );
                			}
                			return matchIndexes;
                		}),
                
                		"gt": createPositionalPseudo(function( matchIndexes, length, argument ) {
                			var i = argument < 0 ? argument + length : argument;
                			for ( ; ++i < length; ) {
                				matchIndexes.push( i );
                			}
                			return matchIndexes;
                		})
                	}
                };
                
                Expr.pseudos["nth"] = Expr.pseudos["eq"];
                
                // Add button/input type pseudos
                for ( i in { radio: true, checkbox: true, file: true, password: true, image: true } ) {
                	Expr.pseudos[ i ] = createInputPseudo( i );
                }
                for ( i in { submit: true, reset: true } ) {
                	Expr.pseudos[ i ] = createButtonPseudo( i );
                }
                
                // Easy API for creating new setFilters
                function setFilters() {}
                setFilters.prototype = Expr.filters = Expr.pseudos;
                Expr.setFilters = new setFilters();
                
                function tokenize( selector, parseOnly ) {
                	var matched, match, tokens, type,
                		soFar, groups, preFilters,
                		cached = tokenCache[ selector + " " ];
                
                	if ( cached ) {
                		return parseOnly ? 0 : cached.slice( 0 );
                	}
                
                	soFar = selector;
                	groups = [];
                	preFilters = Expr.preFilter;
                
                	while ( soFar ) {
                
                		// Comma and first run
                		if ( !matched || (match = rcomma.exec( soFar )) ) {
                			if ( match ) {
                				// Don't consume trailing commas as valid
                				soFar = soFar.slice( match[0].length ) || soFar;
                			}
                			groups.push( tokens = [] );
                		}
                
                		matched = false;
                
                		// Combinators
                		if ( (match = rcombinators.exec( soFar )) ) {
                			matched = match.shift();
                			tokens.push({
                				value: matched,
                				// Cast descendant combinators to space
                				type: match[0].replace( rtrim, " " )
                			});
                			soFar = soFar.slice( matched.length );
                		}
                
                		// Filters
                		for ( type in Expr.filter ) {
                			if ( (match = matchExpr[ type ].exec( soFar )) && (!preFilters[ type ] ||
                				(match = preFilters[ type ]( match ))) ) {
                				matched = match.shift();
                				tokens.push({
                					value: matched,
                					type: type,
                					matches: match
                				});
                				soFar = soFar.slice( matched.length );
                			}
                		}
                
                		if ( !matched ) {
                			break;
                		}
                	}
                
                	// Return the length of the invalid excess
                	// if we're just parsing
                	// Otherwise, throw an error or return tokens
                	return parseOnly ?
                		soFar.length :
                		soFar ?
                			Sizzle.error( selector ) :
                			// Cache the tokens
                			tokenCache( selector, groups ).slice( 0 );
                }
                
                function toSelector( tokens ) {
                	var i = 0,
                		len = tokens.length,
                		selector = "";
                	for ( ; i < len; i++ ) {
                		selector += tokens[i].value;
                	}
                	return selector;
                }
                
                function addCombinator( matcher, combinator, base ) {
                	var dir = combinator.dir,
                		checkNonElements = base && dir === "parentNode",
                		doneName = done++;
                
                	return combinator.first ?
                		// Check against closest ancestor/preceding element
                		function( elem, context, xml ) {
                			while ( (elem = elem[ dir ]) ) {
                				if ( elem.nodeType === 1 || checkNonElements ) {
                					return matcher( elem, context, xml );
                				}
                			}
                		} :
                
                		// Check against all ancestor/preceding elements
                		function( elem, context, xml ) {
                			var data, cache, outerCache,
                				dirkey = dirruns + " " + doneName;
                
                			// We can't set arbitrary data on XML nodes, so they don't benefit from dir caching
                			if ( xml ) {
                				while ( (elem = elem[ dir ]) ) {
                					if ( elem.nodeType === 1 || checkNonElements ) {
                						if ( matcher( elem, context, xml ) ) {
                							return true;
                						}
                					}
                				}
                			} else {
                				while ( (elem = elem[ dir ]) ) {
                					if ( elem.nodeType === 1 || checkNonElements ) {
                						outerCache = elem[ expando ] || (elem[ expando ] = {});
                						if ( (cache = outerCache[ dir ]) && cache[0] === dirkey ) {
                							if ( (data = cache[1]) === true || data === cachedruns ) {
                								return data === true;
                							}
                						} else {
                							cache = outerCache[ dir ] = [ dirkey ];
                							cache[1] = matcher( elem, context, xml ) || cachedruns;
                							if ( cache[1] === true ) {
                								return true;
                							}
                						}
                					}
                				}
                			}
                		};
                }
                
                function elementMatcher( matchers ) {
                	return matchers.length > 1 ?
                		function( elem, context, xml ) {
                			var i = matchers.length;
                			while ( i-- ) {
                				if ( !matchers[i]( elem, context, xml ) ) {
                					return false;
                				}
                			}
                			return true;
                		} :
                		matchers[0];
                }
                
                function condense( unmatched, map, filter, context, xml ) {
                	var elem,
                		newUnmatched = [],
                		i = 0,
                		len = unmatched.length,
                		mapped = map != null;
                
                	for ( ; i < len; i++ ) {
                		if ( (elem = unmatched[i]) ) {
                			if ( !filter || filter( elem, context, xml ) ) {
                				newUnmatched.push( elem );
                				if ( mapped ) {
                					map.push( i );
                				}
                			}
                		}
                	}
                
                	return newUnmatched;
                }
                
                function setMatcher( preFilter, selector, matcher, postFilter, postFinder, postSelector ) {
                	if ( postFilter && !postFilter[ expando ] ) {
                		postFilter = setMatcher( postFilter );
                	}
                	if ( postFinder && !postFinder[ expando ] ) {
                		postFinder = setMatcher( postFinder, postSelector );
                	}
                	return markFunction(function( seed, results, context, xml ) {
                		var temp, i, elem,
                			preMap = [],
                			postMap = [],
                			preexisting = results.length,
                
                			// Get initial elements from seed or context
                			elems = seed || multipleContexts( selector || "*", context.nodeType ? [ context ] : context, [] ),
                
                			// Prefilter to get matcher input, preserving a map for seed-results synchronization
                			matcherIn = preFilter && ( seed || !selector ) ?
                				condense( elems, preMap, preFilter, context, xml ) :
                				elems,
                
                			matcherOut = matcher ?
                				// If we have a postFinder, or filtered seed, or non-seed postFilter or preexisting results,
                				postFinder || ( seed ? preFilter : preexisting || postFilter ) ?
                
                					// ...intermediate processing is necessary
                					[] :
                
                					// ...otherwise use results directly
                					results :
                				matcherIn;
                
                		// Find primary matches
                		if ( matcher ) {
                			matcher( matcherIn, matcherOut, context, xml );
                		}
                
                		// Apply postFilter
                		if ( postFilter ) {
                			temp = condense( matcherOut, postMap );
                			postFilter( temp, [], context, xml );
                
                			// Un-match failing elements by moving them back to matcherIn
                			i = temp.length;
                			while ( i-- ) {
                				if ( (elem = temp[i]) ) {
                					matcherOut[ postMap[i] ] = !(matcherIn[ postMap[i] ] = elem);
                				}
                			}
                		}
                
                		if ( seed ) {
                			if ( postFinder || preFilter ) {
                				if ( postFinder ) {
                					// Get the final matcherOut by condensing this intermediate into postFinder contexts
                					temp = [];
                					i = matcherOut.length;
                					while ( i-- ) {
                						if ( (elem = matcherOut[i]) ) {
                							// Restore matcherIn since elem is not yet a final match
                							temp.push( (matcherIn[i] = elem) );
                						}
                					}
                					postFinder( null, (matcherOut = []), temp, xml );
                				}
                
                				// Move matched elements from seed to results to keep them synchronized
                				i = matcherOut.length;
                				while ( i-- ) {
                					if ( (elem = matcherOut[i]) &&
                						(temp = postFinder ? indexOf.call( seed, elem ) : preMap[i]) > -1 ) {
                
                						seed[temp] = !(results[temp] = elem);
                					}
                				}
                			}
                
                		// Add elements to results, through postFinder if defined
                		} else {
                			matcherOut = condense(
                				matcherOut === results ?
                					matcherOut.splice( preexisting, matcherOut.length ) :
                					matcherOut
                			);
                			if ( postFinder ) {
                				postFinder( null, results, matcherOut, xml );
                			} else {
                				push.apply( results, matcherOut );
                			}
                		}
                	});
                }
                
                function matcherFromTokens( tokens ) {
                	var checkContext, matcher, j,
                		len = tokens.length,
                		leadingRelative = Expr.relative[ tokens[0].type ],
                		implicitRelative = leadingRelative || Expr.relative[" "],
                		i = leadingRelative ? 1 : 0,
                
                		// The foundational matcher ensures that elements are reachable from top-level context(s)
                		matchContext = addCombinator( function( elem ) {
                			return elem === checkContext;
                		}, implicitRelative, true ),
                		matchAnyContext = addCombinator( function( elem ) {
                			return indexOf.call( checkContext, elem ) > -1;
                		}, implicitRelative, true ),
                		matchers = [ function( elem, context, xml ) {
                			return ( !leadingRelative && ( xml || context !== outermostContext ) ) || (
                				(checkContext = context).nodeType ?
                					matchContext( elem, context, xml ) :
                					matchAnyContext( elem, context, xml ) );
                		} ];
                
                	for ( ; i < len; i++ ) {
                		if ( (matcher = Expr.relative[ tokens[i].type ]) ) {
                			matchers = [ addCombinator(elementMatcher( matchers ), matcher) ];
                		} else {
                			matcher = Expr.filter[ tokens[i].type ].apply( null, tokens[i].matches );
                
                			// Return special upon seeing a positional matcher
                			if ( matcher[ expando ] ) {
                				// Find the next relative operator (if any) for proper handling
                				j = ++i;
                				for ( ; j < len; j++ ) {
                					if ( Expr.relative[ tokens[j].type ] ) {
                						break;
                					}
                				}
                				return setMatcher(
                					i > 1 && elementMatcher( matchers ),
                					i > 1 && toSelector(
                						// If the preceding token was a descendant combinator, insert an implicit any-element `*`
                						tokens.slice( 0, i - 1 ).concat({ value: tokens[ i - 2 ].type === " " ? "*" : "" })
                					).replace( rtrim, "$1" ),
                					matcher,
                					i < j && matcherFromTokens( tokens.slice( i, j ) ),
                					j < len && matcherFromTokens( (tokens = tokens.slice( j )) ),
                					j < len && toSelector( tokens )
                				);
                			}
                			matchers.push( matcher );
                		}
                	}
                
                	return elementMatcher( matchers );
                }
                
                function matcherFromGroupMatchers( elementMatchers, setMatchers ) {
                	// A counter to specify which element is currently being matched
                	var matcherCachedRuns = 0,
                		bySet = setMatchers.length > 0,
                		byElement = elementMatchers.length > 0,
                		superMatcher = function( seed, context, xml, results, expandContext ) {
                			var elem, j, matcher,
                				setMatched = [],
                				matchedCount = 0,
                				i = "0",
                				unmatched = seed && [],
                				outermost = expandContext != null,
                				contextBackup = outermostContext,
                				// We must always have either seed elements or context
                				elems = seed || byElement && Expr.find["TAG"]( "*", expandContext && context.parentNode || context ),
                				// Use integer dirruns iff this is the outermost matcher
                				dirrunsUnique = (dirruns += contextBackup == null ? 1 : Math.random() || 0.1);
                
                			if ( outermost ) {
                				outermostContext = context !== document && context;
                				cachedruns = matcherCachedRuns;
                			}
                
                			// Add elements passing elementMatchers directly to results
                			// Keep `i` a string if there are no elements so `matchedCount` will be "00" below
                			for ( ; (elem = elems[i]) != null; i++ ) {
                				if ( byElement && elem ) {
                					j = 0;
                					while ( (matcher = elementMatchers[j++]) ) {
                						if ( matcher( elem, context, xml ) ) {
                							results.push( elem );
                							break;
                						}
                					}
                					if ( outermost ) {
                						dirruns = dirrunsUnique;
                						cachedruns = ++matcherCachedRuns;
                					}
                				}
                
                				// Track unmatched elements for set filters
                				if ( bySet ) {
                					// They will have gone through all possible matchers
                					if ( (elem = !matcher && elem) ) {
                						matchedCount--;
                					}
                
                					// Lengthen the array for every element, matched or not
                					if ( seed ) {
                						unmatched.push( elem );
                					}
                				}
                			}
                
                			// Apply set filters to unmatched elements
                			matchedCount += i;
                			if ( bySet && i !== matchedCount ) {
                				j = 0;
                				while ( (matcher = setMatchers[j++]) ) {
                					matcher( unmatched, setMatched, context, xml );
                				}
                
                				if ( seed ) {
                					// Reintegrate element matches to eliminate the need for sorting
                					if ( matchedCount > 0 ) {
                						while ( i-- ) {
                							if ( !(unmatched[i] || setMatched[i]) ) {
                								setMatched[i] = pop.call( results );
                							}
                						}
                					}
                
                					// Discard index placeholder values to get only actual matches
                					setMatched = condense( setMatched );
                				}
                
                				// Add matches to results
                				push.apply( results, setMatched );
                
                				// Seedless set matches succeeding multiple successful matchers stipulate sorting
                				if ( outermost && !seed && setMatched.length > 0 &&
                					( matchedCount + setMatchers.length ) > 1 ) {
                
                					Sizzle.uniqueSort( results );
                				}
                			}
                
                			// Override manipulation of globals by nested matchers
                			if ( outermost ) {
                				dirruns = dirrunsUnique;
                				outermostContext = contextBackup;
                			}
                
                			return unmatched;
                		};
                
                	return bySet ?
                		markFunction( superMatcher ) :
                		superMatcher;
                }
                
                compile = Sizzle.compile = function( selector, group /* Internal Use Only */ ) {
                	var i,
                		setMatchers = [],
                		elementMatchers = [],
                		cached = compilerCache[ selector + " " ];
                
                	if ( !cached ) {
                		// Generate a function of recursive functions that can be used to check each element
                		if ( !group ) {
                			group = tokenize( selector );
                		}
                		i = group.length;
                		while ( i-- ) {
                			cached = matcherFromTokens( group[i] );
                			if ( cached[ expando ] ) {
                				setMatchers.push( cached );
                			} else {
                				elementMatchers.push( cached );
                			}
                		}
                
                		// Cache the compiled function
                		cached = compilerCache( selector, matcherFromGroupMatchers( elementMatchers, setMatchers ) );
                	}
                	return cached;
                };
                
                function multipleContexts( selector, contexts, results ) {
                	var i = 0,
                		len = contexts.length;
                	for ( ; i < len; i++ ) {
                		Sizzle( selector, contexts[i], results );
                	}
                	return results;
                }
                
                function select( selector, context, results, seed ) {
                	var i, tokens, token, type, find,
                		match = tokenize( selector );
                
                	if ( !seed ) {
                		// Try to minimize operations if there is only one group
                		if ( match.length === 1 ) {
                
                			// Take a shortcut and set the context if the root selector is an ID
                			tokens = match[0] = match[0].slice( 0 );
                			if ( tokens.length > 2 && (token = tokens[0]).type === "ID" &&
                					support.getById && context.nodeType === 9 && documentIsHTML &&
                					Expr.relative[ tokens[1].type ] ) {
                
                				context = ( Expr.find["ID"]( token.matches[0].replace(runescape, funescape), context ) || [] )[0];
                				if ( !context ) {
                					return results;
                				}
                				selector = selector.slice( tokens.shift().value.length );
                			}
                
                			// Fetch a seed set for right-to-left matching
                			i = matchExpr["needsContext"].test( selector ) ? 0 : tokens.length;
                			while ( i-- ) {
                				token = tokens[i];
                
                				// Abort if we hit a combinator
                				if ( Expr.relative[ (type = token.type) ] ) {
                					break;
                				}
                				if ( (find = Expr.find[ type ]) ) {
                					// Search, expanding context for leading sibling combinators
                					if ( (seed = find(
                						token.matches[0].replace( runescape, funescape ),
                						rsibling.test( tokens[0].type ) && context.parentNode || context
                					)) ) {
                
                						// If seed is empty or no tokens remain, we can return early
                						tokens.splice( i, 1 );
                						selector = seed.length && toSelector( tokens );
                						if ( !selector ) {
                							push.apply( results, seed );
                							return results;
                						}
                
                						break;
                					}
                				}
                			}
                		}
                	}
                
                	// Compile and execute a filtering function
                	// Provide `match` to avoid retokenization if we modified the selector above
                	compile( selector, match )(
                		seed,
                		context,
                		!documentIsHTML,
                		results,
                		rsibling.test( selector )
                	);
                	return results;
                }
                
                // One-time assignments
                
                // Sort stability
                support.sortStable = expando.split("").sort( sortOrder ).join("") === expando;
                
                // Support: Chrome<14
                // Always assume duplicates if they aren't passed to the comparison function
                support.detectDuplicates = hasDuplicate;
                
                // Initialize against the default document
                setDocument();
                
                // Support: Webkit<537.32 - Safari 6.0.3/Chrome 25 (fixed in Chrome 27)
                // Detached nodes confoundingly follow *each other*
                support.sortDetached = assert(function( div1 ) {
                	// Should return 1, but returns 4 (following)
                	return div1.compareDocumentPosition( document.createElement("div") ) & 1;
                });
                
                // Support: IE<8
                // Prevent attribute/property "interpolation"
                // http://msdn.microsoft.com/en-us/library/ms536429%28VS.85%29.aspx
                if ( !assert(function( div ) {
                	div.innerHTML = "<a href='#'></a>";
                	return div.firstChild.getAttribute("href") === "#" ;
                }) ) {
                	addHandle( "type|href|height|width", function( elem, name, isXML ) {
                		if ( !isXML ) {
                			return elem.getAttribute( name, name.toLowerCase() === "type" ? 1 : 2 );
                		}
                	});
                }
                
                // Support: IE<9
                // Use defaultValue in place of getAttribute("value")
                if ( !support.attributes || !assert(function( div ) {
                	div.innerHTML = "<input/>";
                	div.firstChild.setAttribute( "value", "" );
                	return div.firstChild.getAttribute( "value" ) === "";
                }) ) {
                	addHandle( "value", function( elem, name, isXML ) {
                		if ( !isXML && elem.nodeName.toLowerCase() === "input" ) {
                			return elem.defaultValue;
                		}
                	});
                }
                
                // Support: IE<9
                // Use getAttributeNode to fetch booleans when getAttribute lies
                if ( !assert(function( div ) {
                	return div.getAttribute("disabled") == null;
                }) ) {
                	addHandle( booleans, function( elem, name, isXML ) {
                		var val;
                		if ( !isXML ) {
                			return (val = elem.getAttributeNode( name )) && val.specified ?
                				val.value :
                				elem[ name ] === true ? name.toLowerCase() : null;
                		}
                	});
                }
                
                jQuery.find = Sizzle;
                jQuery.expr = Sizzle.selectors;
                jQuery.expr[":"] = jQuery.expr.pseudos;
                jQuery.unique = Sizzle.uniqueSort;
                jQuery.text = Sizzle.getText;
                jQuery.isXMLDoc = Sizzle.isXML;
                jQuery.contains = Sizzle.contains;
                
                
                })( window );
                // String to Object options format cache
                var optionsCache = {};
                
                // Convert String-formatted options into Object-formatted ones and store in cache
                function createOptions( options ) {
                	var object = optionsCache[ options ] = {};
                	jQuery.each( options.match( core_rnotwhite ) || [], function( _, flag ) {
                		object[ flag ] = true;
                	});
                	return object;
                }
                
                /*
                 * Create a callback list using the following parameters:
                 *
                 *	options: an optional list of space-separated options that will change how
                 *			the callback list behaves or a more traditional option object
                 *
                 * By default a callback list will act like an event callback list and can be
                 * "fired" multiple times.
                 *
                 * Possible options:
                 *
                 *	once:			will ensure the callback list can only be fired once (like a Deferred)
                 *
                 *	memory:			will keep track of previous values and will call any callback added
                 *					after the list has been fired right away with the latest "memorized"
                 *					values (like a Deferred)
                 *
                 *	unique:			will ensure a callback can only be added once (no duplicate in the list)
                 *
                 *	stopOnFalse:	interrupt callings when a callback returns false
                 *
                 */
                jQuery.Callbacks = function( options ) {
                
                	// Convert options from String-formatted to Object-formatted if needed
                	// (we check in cache first)
                	options = typeof options === "string" ?
                		( optionsCache[ options ] || createOptions( options ) ) :
                		jQuery.extend( {}, options );
                
                	var // Last fire value (for non-forgettable lists)
                		memory,
                		// Flag to know if list was already fired
                		fired,
                		// Flag to know if list is currently firing
                		firing,
                		// First callback to fire (used internally by add and fireWith)
                		firingStart,
                		// End of the loop when firing
                		firingLength,
                		// Index of currently firing callback (modified by remove if needed)
                		firingIndex,
                		// Actual callback list
                		list = [],
                		// Stack of fire calls for repeatable lists
                		stack = !options.once && [],
                		// Fire callbacks
                		fire = function( data ) {
                			memory = options.memory && data;
                			fired = true;
                			firingIndex = firingStart || 0;
                			firingStart = 0;
                			firingLength = list.length;
                			firing = true;
                			for ( ; list && firingIndex < firingLength; firingIndex++ ) {
                				if ( list[ firingIndex ].apply( data[ 0 ], data[ 1 ] ) === false && options.stopOnFalse ) {
                					memory = false; // To prevent further calls using add
                					break;
                				}
                			}
                			firing = false;
                			if ( list ) {
                				if ( stack ) {
                					if ( stack.length ) {
                						fire( stack.shift() );
                					}
                				} else if ( memory ) {
                					list = [];
                				} else {
                					self.disable();
                				}
                			}
                		},
                		// Actual Callbacks object
                		self = {
                			// Add a callback or a collection of callbacks to the list
                			add: function() {
                				if ( list ) {
                					// First, we save the current length
                					var start = list.length;
                					(function add( args ) {
                						jQuery.each( args, function( _, arg ) {
                							var type = jQuery.type( arg );
                							if ( type === "function" ) {
                								if ( !options.unique || !self.has( arg ) ) {
                									list.push( arg );
                								}
                							} else if ( arg && arg.length && type !== "string" ) {
                								// Inspect recursively
                								add( arg );
                							}
                						});
                					})( arguments );
                					// Do we need to add the callbacks to the
                					// current firing batch?
                					if ( firing ) {
                						firingLength = list.length;
                					// With memory, if we're not firing then
                					// we should call right away
                					} else if ( memory ) {
                						firingStart = start;
                						fire( memory );
                					}
                				}
                				return this;
                			},
                			// Remove a callback from the list
                			remove: function() {
                				if ( list ) {
                					jQuery.each( arguments, function( _, arg ) {
                						var index;
                						while( ( index = jQuery.inArray( arg, list, index ) ) > -1 ) {
                							list.splice( index, 1 );
                							// Handle firing indexes
                							if ( firing ) {
                								if ( index <= firingLength ) {
                									firingLength--;
                								}
                								if ( index <= firingIndex ) {
                									firingIndex--;
                								}
                							}
                						}
                					});
                				}
                				return this;
                			},
                			// Check if a given callback is in the list.
                			// If no argument is given, return whether or not list has callbacks attached.
                			has: function( fn ) {
                				return fn ? jQuery.inArray( fn, list ) > -1 : !!( list && list.length );
                			},
                			// Remove all callbacks from the list
                			empty: function() {
                				list = [];
                				firingLength = 0;
                				return this;
                			},
                			// Have the list do nothing anymore
                			disable: function() {
                				list = stack = memory = undefined;
                				return this;
                			},
                			// Is it disabled?
                			disabled: function() {
                				return !list;
                			},
                			// Lock the list in its current state
                			lock: function() {
                				stack = undefined;
                				if ( !memory ) {
                					self.disable();
                				}
                				return this;
                			},
                			// Is it locked?
                			locked: function() {
                				return !stack;
                			},
                			// Call all callbacks with the given context and arguments
                			fireWith: function( context, args ) {
                				if ( list && ( !fired || stack ) ) {
                					args = args || [];
                					args = [ context, args.slice ? args.slice() : args ];
                					if ( firing ) {
                						stack.push( args );
                					} else {
                						fire( args );
                					}
                				}
                				return this;
                			},
                			// Call all the callbacks with the given arguments
                			fire: function() {
                				self.fireWith( this, arguments );
                				return this;
                			},
                			// To know if the callbacks have already been called at least once
                			fired: function() {
                				return !!fired;
                			}
                		};
                
                	return self;
                };
                jQuery.extend({
                
                	Deferred: function( func ) {
                		var tuples = [
                				// action, add listener, listener list, final state
                				[ "resolve", "done", jQuery.Callbacks("once memory"), "resolved" ],
                				[ "reject", "fail", jQuery.Callbacks("once memory"), "rejected" ],
                				[ "notify", "progress", jQuery.Callbacks("memory") ]
                			],
                			state = "pending",
                			promise = {
                				state: function() {
                					return state;
                				},
                				always: function() {
                					deferred.done( arguments ).fail( arguments );
                					return this;
                				},
                				then: function( /* fnDone, fnFail, fnProgress */ ) {
                					var fns = arguments;
                					return jQuery.Deferred(function( newDefer ) {
                						jQuery.each( tuples, function( i, tuple ) {
                							var action = tuple[ 0 ],
                								fn = jQuery.isFunction( fns[ i ] ) && fns[ i ];
                							// deferred[ done | fail | progress ] for forwarding actions to newDefer
                							deferred[ tuple[1] ](function() {
                								var returned = fn && fn.apply( this, arguments );
                								if ( returned && jQuery.isFunction( returned.promise ) ) {
                									returned.promise()
                										.done( newDefer.resolve )
                										.fail( newDefer.reject )
                										.progress( newDefer.notify );
                								} else {
                									newDefer[ action + "With" ]( this === promise ? newDefer.promise() : this, fn ? [ returned ] : arguments );
                								}
                							});
                						});
                						fns = null;
                					}).promise();
                				},
                				// Get a promise for this deferred
                				// If obj is provided, the promise aspect is added to the object
                				promise: function( obj ) {
                					return obj != null ? jQuery.extend( obj, promise ) : promise;
                				}
                			},
                			deferred = {};
                
                		// Keep pipe for back-compat
                		promise.pipe = promise.then;
                
                		// Add list-specific methods
                		jQuery.each( tuples, function( i, tuple ) {
                			var list = tuple[ 2 ],
                				stateString = tuple[ 3 ];
                
                			// promise[ done | fail | progress ] = list.add
                			promise[ tuple[1] ] = list.add;
                
                			// Handle state
                			if ( stateString ) {
                				list.add(function() {
                					// state = [ resolved | rejected ]
                					state = stateString;
                
                				// [ reject_list | resolve_list ].disable; progress_list.lock
                				}, tuples[ i ^ 1 ][ 2 ].disable, tuples[ 2 ][ 2 ].lock );
                			}
                
                			// deferred[ resolve | reject | notify ]
                			deferred[ tuple[0] ] = function() {
                				deferred[ tuple[0] + "With" ]( this === deferred ? promise : this, arguments );
                				return this;
                			};
                			deferred[ tuple[0] + "With" ] = list.fireWith;
                		});
                
                		// Make the deferred a promise
                		promise.promise( deferred );
                
                		// Call given func if any
                		if ( func ) {
                			func.call( deferred, deferred );
                		}
                
                		// All done!
                		return deferred;
                	},
                
                	// Deferred helper
                	when: function( subordinate /* , ..., subordinateN */ ) {
                		var i = 0,
                			resolveValues = core_slice.call( arguments ),
                			length = resolveValues.length,
                
                			// the count of uncompleted subordinates
                			remaining = length !== 1 || ( subordinate && jQuery.isFunction( subordinate.promise ) ) ? length : 0,
                
                			// the master Deferred. If resolveValues consist of only a single Deferred, just use that.
                			deferred = remaining === 1 ? subordinate : jQuery.Deferred(),
                
                			// Update function for both resolve and progress values
                			updateFunc = function( i, contexts, values ) {
                				return function( value ) {
                					contexts[ i ] = this;
                					values[ i ] = arguments.length > 1 ? core_slice.call( arguments ) : value;
                					if( values === progressValues ) {
                						deferred.notifyWith( contexts, values );
                					} else if ( !( --remaining ) ) {
                						deferred.resolveWith( contexts, values );
                					}
                				};
                			},
                
                			progressValues, progressContexts, resolveContexts;
                
                		// add listeners to Deferred subordinates; treat others as resolved
                		if ( length > 1 ) {
                			progressValues = new Array( length );
                			progressContexts = new Array( length );
                			resolveContexts = new Array( length );
                			for ( ; i < length; i++ ) {
                				if ( resolveValues[ i ] && jQuery.isFunction( resolveValues[ i ].promise ) ) {
                					resolveValues[ i ].promise()
                						.done( updateFunc( i, resolveContexts, resolveValues ) )
                						.fail( deferred.reject )
                						.progress( updateFunc( i, progressContexts, progressValues ) );
                				} else {
                					--remaining;
                				}
                			}
                		}
                
                		// if we're not waiting on anything, resolve the master
                		if ( !remaining ) {
                			deferred.resolveWith( resolveContexts, resolveValues );
                		}
                
                		return deferred.promise();
                	}
                });
                jQuery.support = (function( support ) {
                	var input = document.createElement("input"),
                		fragment = document.createDocumentFragment(),
                		div = document.createElement("div"),
                		select = document.createElement("select"),
                		opt = select.appendChild( document.createElement("option") );
                
                	// Finish early in limited environments
                	if ( !input.type ) {
                		return support;
                	}
                
                	input.type = "checkbox";
                
                	// Support: Safari 5.1, iOS 5.1, Android 4.x, Android 2.3
                	// Check the default checkbox/radio value ("" on old WebKit; "on" elsewhere)
                	support.checkOn = input.value !== "";
                
                	// Must access the parent to make an option select properly
                	// Support: IE9, IE10
                	support.optSelected = opt.selected;
                
                	// Will be defined later
                	support.reliableMarginRight = true;
                	support.boxSizingReliable = true;
                	support.pixelPosition = false;
                
                	// Make sure checked status is properly cloned
                	// Support: IE9, IE10
                	input.checked = true;
                	support.noCloneChecked = input.cloneNode( true ).checked;
                
                	// Make sure that the options inside disabled selects aren't marked as disabled
                	// (WebKit marks them as disabled)
                	select.disabled = true;
                	support.optDisabled = !opt.disabled;
                
                	// Check if an input maintains its value after becoming a radio
                	// Support: IE9, IE10
                	input = document.createElement("input");
                	input.value = "t";
                	input.type = "radio";
                	support.radioValue = input.value === "t";
                
                	// #11217 - WebKit loses check when the name is after the checked attribute
                	input.setAttribute( "checked", "t" );
                	input.setAttribute( "name", "t" );
                
                	fragment.appendChild( input );
                
                	// Support: Safari 5.1, Android 4.x, Android 2.3
                	// old WebKit doesn't clone checked state correctly in fragments
                	support.checkClone = fragment.cloneNode( true ).cloneNode( true ).lastChild.checked;
                
                	// Support: Firefox, Chrome, Safari
                	// Beware of CSP restrictions (https://developer.mozilla.org/en/Security/CSP)
                	support.focusinBubbles = "onfocusin" in window;
                
                	div.style.backgroundClip = "content-box";
                	div.cloneNode( true ).style.backgroundClip = "";
                	support.clearCloneStyle = div.style.backgroundClip === "content-box";
                
                	// Run tests that need a body at doc ready
                	jQuery(function() {
                		var container, marginDiv,
                			// Support: Firefox, Android 2.3 (Prefixed box-sizing versions).
                			divReset = "padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",
                			body = document.getElementsByTagName("body")[ 0 ];
                
                		if ( !body ) {
                			// Return for frameset docs that don't have a body
                			return;
                		}
                
                		container = document.createElement("div");
                		container.style.cssText = "border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px";
                
                		// Check box-sizing and margin behavior.
                		body.appendChild( container ).appendChild( div );
                		div.innerHTML = "";
                		// Support: Firefox, Android 2.3 (Prefixed box-sizing versions).
                		div.style.cssText = "-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%";
                
                		// Workaround failing boxSizing test due to offsetWidth returning wrong value
                		// with some non-1 values of body zoom, ticket #13543
                		jQuery.swap( body, body.style.zoom != null ? { zoom: 1 } : {}, function() {
                			support.boxSizing = div.offsetWidth === 4;
                		});
                
                		// Use window.getComputedStyle because jsdom on node.js will break without it.
                		if ( window.getComputedStyle ) {
                			support.pixelPosition = ( window.getComputedStyle( div, null ) || {} ).top !== "1%";
                			support.boxSizingReliable = ( window.getComputedStyle( div, null ) || { width: "4px" } ).width === "4px";
                
                			// Support: Android 2.3
                			// Check if div with explicit width and no margin-right incorrectly
                			// gets computed margin-right based on width of container. (#3333)
                			// WebKit Bug 13343 - getComputedStyle returns wrong value for margin-right
                			marginDiv = div.appendChild( document.createElement("div") );
                			marginDiv.style.cssText = div.style.cssText = divReset;
                			marginDiv.style.marginRight = marginDiv.style.width = "0";
                			div.style.width = "1px";
                
                			support.reliableMarginRight =
                				!parseFloat( ( window.getComputedStyle( marginDiv, null ) || {} ).marginRight );
                		}
                
                		body.removeChild( container );
                	});
                
                	return support;
                })( {} );
                
                /*
                	Implementation Summary
                
                	1. Enforce API surface and semantic compatibility with 1.9.x branch
                	2. Improve the module's maintainability by reducing the storage
                		paths to a single mechanism.
                	3. Use the same single mechanism to support "private" and "user" data.
                	4. _Never_ expose "private" data to user code (TODO: Drop _data, _removeData)
                	5. Avoid exposing implementation details on user objects (eg. expando properties)
                	6. Provide a clear path for implementation upgrade to WeakMap in 2014
                */
                var data_user, data_priv,
                	rbrace = /(?:\{[\s\S]*\}|\[[\s\S]*\])$/,
                	rmultiDash = /([A-Z])/g;
                
                function Data() {
                	// Support: Android < 4,
                	// Old WebKit does not have Object.preventExtensions/freeze method,
                	// return new empty object instead with no [[set]] accessor
                	Object.defineProperty( this.cache = {}, 0, {
                		get: function() {
                			return {};
                		}
                	});
                
                	this.expando = jQuery.expando + Math.random();
                }
                
                Data.uid = 1;
                
                Data.accepts = function( owner ) {
                	// Accepts only:
                	//  - Node
                	//    - Node.ELEMENT_NODE
                	//    - Node.DOCUMENT_NODE
                	//  - Object
                	//    - Any
                	return owner.nodeType ?
                		owner.nodeType === 1 || owner.nodeType === 9 : true;
                };
                
                Data.prototype = {
                	key: function( owner ) {
                		// We can accept data for non-element nodes in modern browsers,
                		// but we should not, see #8335.
                		// Always return the key for a frozen object.
                		if ( !Data.accepts( owner ) ) {
                			return 0;
                		}
                
                		var descriptor = {},
                			// Check if the owner object already has a cache key
                			unlock = owner[ this.expando ];
                
                		// If not, create one
                		if ( !unlock ) {
                			unlock = Data.uid++;
                
                			// Secure it in a non-enumerable, non-writable property
                			try {
                				descriptor[ this.expando ] = { value: unlock };
                				Object.defineProperties( owner, descriptor );
                
                			// Support: Android < 4
                			// Fallback to a less secure definition
                			} catch ( e ) {
                				descriptor[ this.expando ] = unlock;
                				jQuery.extend( owner, descriptor );
                			}
                		}
                
                		// Ensure the cache object
                		if ( !this.cache[ unlock ] ) {
                			this.cache[ unlock ] = {};
                		}
                
                		return unlock;
                	},
                	set: function( owner, data, value ) {
                		var prop,
                			// There may be an unlock assigned to this node,
                			// if there is no entry for this "owner", create one inline
                			// and set the unlock as though an owner entry had always existed
                			unlock = this.key( owner ),
                			cache = this.cache[ unlock ];
                
                		// Handle: [ owner, key, value ] args
                		if ( typeof data === "string" ) {
                			cache[ data ] = value;
                
                		// Handle: [ owner, { properties } ] args
                		} else {
                			// Fresh assignments by object are shallow copied
                			if ( jQuery.isEmptyObject( cache ) ) {
                				jQuery.extend( this.cache[ unlock ], data );
                			// Otherwise, copy the properties one-by-one to the cache object
                			} else {
                				for ( prop in data ) {
                					cache[ prop ] = data[ prop ];
                				}
                			}
                		}
                		return cache;
                	},
                	get: function( owner, key ) {
                		// Either a valid cache is found, or will be created.
                		// New caches will be created and the unlock returned,
                		// allowing direct access to the newly created
                		// empty data object. A valid owner object must be provided.
                		var cache = this.cache[ this.key( owner ) ];
                
                		return key === undefined ?
                			cache : cache[ key ];
                	},
                	access: function( owner, key, value ) {
                		var stored;
                		// In cases where either:
                		//
                		//   1. No key was specified
                		//   2. A string key was specified, but no value provided
                		//
                		// Take the "read" path and allow the get method to determine
                		// which value to return, respectively either:
                		//
                		//   1. The entire cache object
                		//   2. The data stored at the key
                		//
                		if ( key === undefined ||
                				((key && typeof key === "string") && value === undefined) ) {
                
                			stored = this.get( owner, key );
                
                			return stored !== undefined ?
                				stored : this.get( owner, jQuery.camelCase(key) );
                		}
                
                		// [*]When the key is not a string, or both a key and value
                		// are specified, set or extend (existing objects) with either:
                		//
                		//   1. An object of properties
                		//   2. A key and value
                		//
                		this.set( owner, key, value );
                
                		// Since the "set" path can have two possible entry points
                		// return the expected data based on which path was taken[*]
                		return value !== undefined ? value : key;
                	},
                	remove: function( owner, key ) {
                		var i, name, camel,
                			unlock = this.key( owner ),
                			cache = this.cache[ unlock ];
                
                		if ( key === undefined ) {
                			this.cache[ unlock ] = {};
                
                		} else {
                			// Support array or space separated string of keys
                			if ( jQuery.isArray( key ) ) {
                				// If "name" is an array of keys...
                				// When data is initially created, via ("key", "val") signature,
                				// keys will be converted to camelCase.
                				// Since there is no way to tell _how_ a key was added, remove
                				// both plain key and camelCase key. #12786
                				// This will only penalize the array argument path.
                				name = key.concat( key.map( jQuery.camelCase ) );
                			} else {
                				camel = jQuery.camelCase( key );
                				// Try the string as a key before any manipulation
                				if ( key in cache ) {
                					name = [ key, camel ];
                				} else {
                					// If a key with the spaces exists, use it.
                					// Otherwise, create an array by matching non-whitespace
                					name = camel;
                					name = name in cache ?
                						[ name ] : ( name.match( core_rnotwhite ) || [] );
                				}
                			}
                
                			i = name.length;
                			while ( i-- ) {
                				delete cache[ name[ i ] ];
                			}
                		}
                	},
                	hasData: function( owner ) {
                		return !jQuery.isEmptyObject(
                			this.cache[ owner[ this.expando ] ] || {}
                		);
                	},
                	discard: function( owner ) {
                		if ( owner[ this.expando ] ) {
                			delete this.cache[ owner[ this.expando ] ];
                		}
                	}
                };
                
                // These may be used throughout the jQuery core codebase
                data_user = new Data();
                data_priv = new Data();
                
                
                jQuery.extend({
                	acceptData: Data.accepts,
                
                	hasData: function( elem ) {
                		return data_user.hasData( elem ) || data_priv.hasData( elem );
                	},
                
                	data: function( elem, name, data ) {
                		return data_user.access( elem, name, data );
                	},
                
                	removeData: function( elem, name ) {
                		data_user.remove( elem, name );
                	},
                
                	// TODO: Now that all calls to _data and _removeData have been replaced
                	// with direct calls to data_priv methods, these can be deprecated.
                	_data: function( elem, name, data ) {
                		return data_priv.access( elem, name, data );
                	},
                
                	_removeData: function( elem, name ) {
                		data_priv.remove( elem, name );
                	}
                });
                
                jQuery.fn.extend({
                	data: function( key, value ) {
                		var attrs, name,
                			elem = this[ 0 ],
                			i = 0,
                			data = null;
                
                		// Gets all values
                		if ( key === undefined ) {
                			if ( this.length ) {
                				data = data_user.get( elem );
                
                				if ( elem.nodeType === 1 && !data_priv.get( elem, "hasDataAttrs" ) ) {
                					attrs = elem.attributes;
                					for ( ; i < attrs.length; i++ ) {
                						name = attrs[ i ].name;
                
                						if ( name.indexOf( "data-" ) === 0 ) {
                							name = jQuery.camelCase( name.slice(5) );
                							dataAttr( elem, name, data[ name ] );
                						}
                					}
                					data_priv.set( elem, "hasDataAttrs", true );
                				}
                			}
                
                			return data;
                		}
                
                		// Sets multiple values
                		if ( typeof key === "object" ) {
                			return this.each(function() {
                				data_user.set( this, key );
                			});
                		}
                
                		return jQuery.access( this, function( value ) {
                			var data,
                				camelKey = jQuery.camelCase( key );
                
                			// The calling jQuery object (element matches) is not empty
                			// (and therefore has an element appears at this[ 0 ]) and the
                			// `value` parameter was not undefined. An empty jQuery object
                			// will result in `undefined` for elem = this[ 0 ] which will
                			// throw an exception if an attempt to read a data cache is made.
                			if ( elem && value === undefined ) {
                				// Attempt to get data from the cache
                				// with the key as-is
                				data = data_user.get( elem, key );
                				if ( data !== undefined ) {
                					return data;
                				}
                
                				// Attempt to get data from the cache
                				// with the key camelized
                				data = data_user.get( elem, camelKey );
                				if ( data !== undefined ) {
                					return data;
                				}
                
                				// Attempt to "discover" the data in
                				// HTML5 custom data-* attrs
                				data = dataAttr( elem, camelKey, undefined );
                				if ( data !== undefined ) {
                					return data;
                				}
                
                				// We tried really hard, but the data doesn't exist.
                				return;
                			}
                
                			// Set the data...
                			this.each(function() {
                				// First, attempt to store a copy or reference of any
                				// data that might've been store with a camelCased key.
                				var data = data_user.get( this, camelKey );
                
                				// For HTML5 data-* attribute interop, we have to
                				// store property names with dashes in a camelCase form.
                				// This might not apply to all properties...*
                				data_user.set( this, camelKey, value );
                
                				// *... In the case of properties that might _actually_
                				// have dashes, we need to also store a copy of that
                				// unchanged property.
                				if ( key.indexOf("-") !== -1 && data !== undefined ) {
                					data_user.set( this, key, value );
                				}
                			});
                		}, null, value, arguments.length > 1, null, true );
                	},
                
                	removeData: function( key ) {
                		return this.each(function() {
                			data_user.remove( this, key );
                		});
                	}
                });
                
                function dataAttr( elem, key, data ) {
                	var name;
                
                	// If nothing was found internally, try to fetch any
                	// data from the HTML5 data-* attribute
                	if ( data === undefined && elem.nodeType === 1 ) {
                		name = "data-" + key.replace( rmultiDash, "-$1" ).toLowerCase();
                		data = elem.getAttribute( name );
                
                		if ( typeof data === "string" ) {
                			try {
                				data = data === "true" ? true :
                					data === "false" ? false :
                					data === "null" ? null :
                					// Only convert to a number if it doesn't change the string
                					+data + "" === data ? +data :
                					rbrace.test( data ) ? JSON.parse( data ) :
                					data;
                			} catch( e ) {}
                
                			// Make sure we set the data so it isn't changed later
                			data_user.set( elem, key, data );
                		} else {
                			data = undefined;
                		}
                	}
                	return data;
                }
                jQuery.extend({
                	queue: function( elem, type, data ) {
                		var queue;
                
                		if ( elem ) {
                			type = ( type || "fx" ) + "queue";
                			queue = data_priv.get( elem, type );
                
                			// Speed up dequeue by getting out quickly if this is just a lookup
                			if ( data ) {
                				if ( !queue || jQuery.isArray( data ) ) {
                					queue = data_priv.access( elem, type, jQuery.makeArray(data) );
                				} else {
                					queue.push( data );
                				}
                			}
                			return queue || [];
                		}
                	},
                
                	dequeue: function( elem, type ) {
                		type = type || "fx";
                
                		var queue = jQuery.queue( elem, type ),
                			startLength = queue.length,
                			fn = queue.shift(),
                			hooks = jQuery._queueHooks( elem, type ),
                			next = function() {
                				jQuery.dequeue( elem, type );
                			};
                
                		// If the fx queue is dequeued, always remove the progress sentinel
                		if ( fn === "inprogress" ) {
                			fn = queue.shift();
                			startLength--;
                		}
                
                		if ( fn ) {
                
                			// Add a progress sentinel to prevent the fx queue from being
                			// automatically dequeued
                			if ( type === "fx" ) {
                				queue.unshift( "inprogress" );
                			}
                
                			// clear up the last queue stop function
                			delete hooks.stop;
                			fn.call( elem, next, hooks );
                		}
                
                		if ( !startLength && hooks ) {
                			hooks.empty.fire();
                		}
                	},
                
                	// not intended for public consumption - generates a queueHooks object, or returns the current one
                	_queueHooks: function( elem, type ) {
                		var key = type + "queueHooks";
                		return data_priv.get( elem, key ) || data_priv.access( elem, key, {
                			empty: jQuery.Callbacks("once memory").add(function() {
                				data_priv.remove( elem, [ type + "queue", key ] );
                			})
                		});
                	}
                });
                
                jQuery.fn.extend({
                	queue: function( type, data ) {
                		var setter = 2;
                
                		if ( typeof type !== "string" ) {
                			data = type;
                			type = "fx";
                			setter--;
                		}
                
                		if ( arguments.length < setter ) {
                			return jQuery.queue( this[0], type );
                		}
                
                		return data === undefined ?
                			this :
                			this.each(function() {
                				var queue = jQuery.queue( this, type, data );
                
                				// ensure a hooks for this queue
                				jQuery._queueHooks( this, type );
                
                				if ( type === "fx" && queue[0] !== "inprogress" ) {
                					jQuery.dequeue( this, type );
                				}
                			});
                	},
                	dequeue: function( type ) {
                		return this.each(function() {
                			jQuery.dequeue( this, type );
                		});
                	},
                	// Based off of the plugin by Clint Helfers, with permission.
                	// http://blindsignals.com/index.php/2009/07/jquery-delay/
                	delay: function( time, type ) {
                		time = jQuery.fx ? jQuery.fx.speeds[ time ] || time : time;
                		type = type || "fx";
                
                		return this.queue( type, function( next, hooks ) {
                			var timeout = setTimeout( next, time );
                			hooks.stop = function() {
                				clearTimeout( timeout );
                			};
                		});
                	},
                	clearQueue: function( type ) {
                		return this.queue( type || "fx", [] );
                	},
                	// Get a promise resolved when queues of a certain type
                	// are emptied (fx is the type by default)
                	promise: function( type, obj ) {
                		var tmp,
                			count = 1,
                			defer = jQuery.Deferred(),
                			elements = this,
                			i = this.length,
                			resolve = function() {
                				if ( !( --count ) ) {
                					defer.resolveWith( elements, [ elements ] );
                				}
                			};
                
                		if ( typeof type !== "string" ) {
                			obj = type;
                			type = undefined;
                		}
                		type = type || "fx";
                
                		while( i-- ) {
                			tmp = data_priv.get( elements[ i ], type + "queueHooks" );
                			if ( tmp && tmp.empty ) {
                				count++;
                				tmp.empty.add( resolve );
                			}
                		}
                		resolve();
                		return defer.promise( obj );
                	}
                });
                var nodeHook, boolHook,
                	rclass = /[\t\r\n\f]/g,
                	rreturn = /\r/g,
                	rfocusable = /^(?:input|select|textarea|button)$/i;
                
                jQuery.fn.extend({
                	attr: function( name, value ) {
                		return jQuery.access( this, jQuery.attr, name, value, arguments.length > 1 );
                	},
                
                	removeAttr: function( name ) {
                		return this.each(function() {
                			jQuery.removeAttr( this, name );
                		});
                	},
                
                	prop: function( name, value ) {
                		return jQuery.access( this, jQuery.prop, name, value, arguments.length > 1 );
                	},
                
                	removeProp: function( name ) {
                		return this.each(function() {
                			delete this[ jQuery.propFix[ name ] || name ];
                		});
                	},
                
                	addClass: function( value ) {
                		var classes, elem, cur, clazz, j,
                			i = 0,
                			len = this.length,
                			proceed = typeof value === "string" && value;
                
                		if ( jQuery.isFunction( value ) ) {
                			return this.each(function( j ) {
                				jQuery( this ).addClass( value.call( this, j, this.className ) );
                			});
                		}
                
                		if ( proceed ) {
                			// The disjunction here is for better compressibility (see removeClass)
                			classes = ( value || "" ).match( core_rnotwhite ) || [];
                
                			for ( ; i < len; i++ ) {
                				elem = this[ i ];
                				cur = elem.nodeType === 1 && ( elem.className ?
                					( " " + elem.className + " " ).replace( rclass, " " ) :
                					" "
                				);
                
                				if ( cur ) {
                					j = 0;
                					while ( (clazz = classes[j++]) ) {
                						if ( cur.indexOf( " " + clazz + " " ) < 0 ) {
                							cur += clazz + " ";
                						}
                					}
                					elem.className = jQuery.trim( cur );
                
                				}
                			}
                		}
                
                		return this;
                	},
                
                	removeClass: function( value ) {
                		var classes, elem, cur, clazz, j,
                			i = 0,
                			len = this.length,
                			proceed = arguments.length === 0 || typeof value === "string" && value;
                
                		if ( jQuery.isFunction( value ) ) {
                			return this.each(function( j ) {
                				jQuery( this ).removeClass( value.call( this, j, this.className ) );
                			});
                		}
                		if ( proceed ) {
                			classes = ( value || "" ).match( core_rnotwhite ) || [];
                
                			for ( ; i < len; i++ ) {
                				elem = this[ i ];
                				// This expression is here for better compressibility (see addClass)
                				cur = elem.nodeType === 1 && ( elem.className ?
                					( " " + elem.className + " " ).replace( rclass, " " ) :
                					""
                				);
                
                				if ( cur ) {
                					j = 0;
                					while ( (clazz = classes[j++]) ) {
                						// Remove *all* instances
                						while ( cur.indexOf( " " + clazz + " " ) >= 0 ) {
                							cur = cur.replace( " " + clazz + " ", " " );
                						}
                					}
                					elem.className = value ? jQuery.trim( cur ) : "";
                				}
                			}
                		}
                
                		return this;
                	},
                
                	toggleClass: function( value, stateVal ) {
                		var type = typeof value;
                
                		if ( typeof stateVal === "boolean" && type === "string" ) {
                			return stateVal ? this.addClass( value ) : this.removeClass( value );
                		}
                
                		if ( jQuery.isFunction( value ) ) {
                			return this.each(function( i ) {
                				jQuery( this ).toggleClass( value.call(this, i, this.className, stateVal), stateVal );
                			});
                		}
                
                		return this.each(function() {
                			if ( type === "string" ) {
                				// toggle individual class names
                				var className,
                					i = 0,
                					self = jQuery( this ),
                					classNames = value.match( core_rnotwhite ) || [];
                
                				while ( (className = classNames[ i++ ]) ) {
                					// check each className given, space separated list
                					if ( self.hasClass( className ) ) {
                						self.removeClass( className );
                					} else {
                						self.addClass( className );
                					}
                				}
                
                			// Toggle whole class name
                			} else if ( type === core_strundefined || type === "boolean" ) {
                				if ( this.className ) {
                					// store className if set
                					data_priv.set( this, "__className__", this.className );
                				}
                
                				// If the element has a class name or if we're passed "false",
                				// then remove the whole classname (if there was one, the above saved it).
                				// Otherwise bring back whatever was previously saved (if anything),
                				// falling back to the empty string if nothing was stored.
                				this.className = this.className || value === false ? "" : data_priv.get( this, "__className__" ) || "";
                			}
                		});
                	},
                
                	hasClass: function( selector ) {
                		var className = " " + selector + " ",
                			i = 0,
                			l = this.length;
                		for ( ; i < l; i++ ) {
                			if ( this[i].nodeType === 1 && (" " + this[i].className + " ").replace(rclass, " ").indexOf( className ) >= 0 ) {
                				return true;
                			}
                		}
                
                		return false;
                	},
                
                	val: function( value ) {
                		var hooks, ret, isFunction,
                			elem = this[0];
                
                		if ( !arguments.length ) {
                			if ( elem ) {
                				hooks = jQuery.valHooks[ elem.type ] || jQuery.valHooks[ elem.nodeName.toLowerCase() ];
                
                				if ( hooks && "get" in hooks && (ret = hooks.get( elem, "value" )) !== undefined ) {
                					return ret;
                				}
                
                				ret = elem.value;
                
                				return typeof ret === "string" ?
                					// handle most common string cases
                					ret.replace(rreturn, "") :
                					// handle cases where value is null/undef or number
                					ret == null ? "" : ret;
                			}
                
                			return;
                		}
                
                		isFunction = jQuery.isFunction( value );
                
                		return this.each(function( i ) {
                			var val;
                
                			if ( this.nodeType !== 1 ) {
                				return;
                			}
                
                			if ( isFunction ) {
                				val = value.call( this, i, jQuery( this ).val() );
                			} else {
                				val = value;
                			}
                
                			// Treat null/undefined as ""; convert numbers to string
                			if ( val == null ) {
                				val = "";
                			} else if ( typeof val === "number" ) {
                				val += "";
                			} else if ( jQuery.isArray( val ) ) {
                				val = jQuery.map(val, function ( value ) {
                					return value == null ? "" : value + "";
                				});
                			}
                
                			hooks = jQuery.valHooks[ this.type ] || jQuery.valHooks[ this.nodeName.toLowerCase() ];
                
                			// If set returns undefined, fall back to normal setting
                			if ( !hooks || !("set" in hooks) || hooks.set( this, val, "value" ) === undefined ) {
                				this.value = val;
                			}
                		});
                	}
                });
                
                jQuery.extend({
                	valHooks: {
                		option: {
                			get: function( elem ) {
                				// attributes.value is undefined in Blackberry 4.7 but
                				// uses .value. See #6932
                				var val = elem.attributes.value;
                				return !val || val.specified ? elem.value : elem.text;
                			}
                		},
                		select: {
                			get: function( elem ) {
                				var value, option,
                					options = elem.options,
                					index = elem.selectedIndex,
                					one = elem.type === "select-one" || index < 0,
                					values = one ? null : [],
                					max = one ? index + 1 : options.length,
                					i = index < 0 ?
                						max :
                						one ? index : 0;
                
                				// Loop through all the selected options
                				for ( ; i < max; i++ ) {
                					option = options[ i ];
                
                					// IE6-9 doesn't update selected after form reset (#2551)
                					if ( ( option.selected || i === index ) &&
                							// Don't return options that are disabled or in a disabled optgroup
                							( jQuery.support.optDisabled ? !option.disabled : option.getAttribute("disabled") === null ) &&
                							( !option.parentNode.disabled || !jQuery.nodeName( option.parentNode, "optgroup" ) ) ) {
                
                						// Get the specific value for the option
                						value = jQuery( option ).val();
                
                						// We don't need an array for one selects
                						if ( one ) {
                							return value;
                						}
                
                						// Multi-Selects return an array
                						values.push( value );
                					}
                				}
                
                				return values;
                			},
                
                			set: function( elem, value ) {
                				var optionSet, option,
                					options = elem.options,
                					values = jQuery.makeArray( value ),
                					i = options.length;
                
                				while ( i-- ) {
                					option = options[ i ];
                					if ( (option.selected = jQuery.inArray( jQuery(option).val(), values ) >= 0) ) {
                						optionSet = true;
                					}
                				}
                
                				// force browsers to behave consistently when non-matching value is set
                				if ( !optionSet ) {
                					elem.selectedIndex = -1;
                				}
                				return values;
                			}
                		}
                	},
                
                	attr: function( elem, name, value ) {
                		var hooks, ret,
                			nType = elem.nodeType;
                
                		// don't get/set attributes on text, comment and attribute nodes
                		if ( !elem || nType === 3 || nType === 8 || nType === 2 ) {
                			return;
                		}
                
                		// Fallback to prop when attributes are not supported
                		if ( typeof elem.getAttribute === core_strundefined ) {
                			return jQuery.prop( elem, name, value );
                		}
                
                		// All attributes are lowercase
                		// Grab necessary hook if one is defined
                		if ( nType !== 1 || !jQuery.isXMLDoc( elem ) ) {
                			name = name.toLowerCase();
                			hooks = jQuery.attrHooks[ name ] ||
                				( jQuery.expr.match.bool.test( name ) ? boolHook : nodeHook );
                		}
                
                		if ( value !== undefined ) {
                
                			if ( value === null ) {
                				jQuery.removeAttr( elem, name );
                
                			} else if ( hooks && "set" in hooks && (ret = hooks.set( elem, value, name )) !== undefined ) {
                				return ret;
                
                			} else {
                				elem.setAttribute( name, value + "" );
                				return value;
                			}
                
                		} else if ( hooks && "get" in hooks && (ret = hooks.get( elem, name )) !== null ) {
                			return ret;
                
                		} else {
                			ret = jQuery.find.attr( elem, name );
                
                			// Non-existent attributes return null, we normalize to undefined
                			return ret == null ?
                				undefined :
                				ret;
                		}
                	},
                
                	removeAttr: function( elem, value ) {
                		var name, propName,
                			i = 0,
                			attrNames = value && value.match( core_rnotwhite );
                
                		if ( attrNames && elem.nodeType === 1 ) {
                			while ( (name = attrNames[i++]) ) {
                				propName = jQuery.propFix[ name ] || name;
                
                				// Boolean attributes get special treatment (#10870)
                				if ( jQuery.expr.match.bool.test( name ) ) {
                					// Set corresponding property to false
                					elem[ propName ] = false;
                				}
                
                				elem.removeAttribute( name );
                			}
                		}
                	},
                
                	attrHooks: {
                		type: {
                			set: function( elem, value ) {
                				if ( !jQuery.support.radioValue && value === "radio" && jQuery.nodeName(elem, "input") ) {
                					// Setting the type on a radio button after the value resets the value in IE6-9
                					// Reset value to default in case type is set after value during creation
                					var val = elem.value;
                					elem.setAttribute( "type", value );
                					if ( val ) {
                						elem.value = val;
                					}
                					return value;
                				}
                			}
                		}
                	},
                
                	propFix: {
                		"for": "htmlFor",
                		"class": "className"
                	},
                
                	prop: function( elem, name, value ) {
                		var ret, hooks, notxml,
                			nType = elem.nodeType;
                
                		// don't get/set properties on text, comment and attribute nodes
                		if ( !elem || nType === 3 || nType === 8 || nType === 2 ) {
                			return;
                		}
                
                		notxml = nType !== 1 || !jQuery.isXMLDoc( elem );
                
                		if ( notxml ) {
                			// Fix name and attach hooks
                			name = jQuery.propFix[ name ] || name;
                			hooks = jQuery.propHooks[ name ];
                		}
                
                		if ( value !== undefined ) {
                			return hooks && "set" in hooks && (ret = hooks.set( elem, value, name )) !== undefined ?
                				ret :
                				( elem[ name ] = value );
                
                		} else {
                			return hooks && "get" in hooks && (ret = hooks.get( elem, name )) !== null ?
                				ret :
                				elem[ name ];
                		}
                	},
                
                	propHooks: {
                		tabIndex: {
                			get: function( elem ) {
                				return elem.hasAttribute( "tabindex" ) || rfocusable.test( elem.nodeName ) || elem.href ?
                					elem.tabIndex :
                					-1;
                			}
                		}
                	}
                });
                
                // Hooks for boolean attributes
                boolHook = {
                	set: function( elem, value, name ) {
                		if ( value === false ) {
                			// Remove boolean attributes when set to false
                			jQuery.removeAttr( elem, name );
                		} else {
                			elem.setAttribute( name, name );
                		}
                		return name;
                	}
                };
                jQuery.each( jQuery.expr.match.bool.source.match( /\w+/g ), function( i, name ) {
                	var getter = jQuery.expr.attrHandle[ name ] || jQuery.find.attr;
                
                	jQuery.expr.attrHandle[ name ] = function( elem, name, isXML ) {
                		var fn = jQuery.expr.attrHandle[ name ],
                			ret = isXML ?
                				undefined :
                				/* jshint eqeqeq: false */
                				// Temporarily disable this handler to check existence
                				(jQuery.expr.attrHandle[ name ] = undefined) !=
                					getter( elem, name, isXML ) ?
                
                					name.toLowerCase() :
                					null;
                
                		// Restore handler
                		jQuery.expr.attrHandle[ name ] = fn;
                
                		return ret;
                	};
                });
                
                // Support: IE9+
                // Selectedness for an option in an optgroup can be inaccurate
                if ( !jQuery.support.optSelected ) {
                	jQuery.propHooks.selected = {
                		get: function( elem ) {
                			var parent = elem.parentNode;
                			if ( parent && parent.parentNode ) {
                				parent.parentNode.selectedIndex;
                			}
                			return null;
                		}
                	};
                }
                
                jQuery.each([
                	"tabIndex",
                	"readOnly",
                	"maxLength",
                	"cellSpacing",
                	"cellPadding",
                	"rowSpan",
                	"colSpan",
                	"useMap",
                	"frameBorder",
                	"contentEditable"
                ], function() {
                	jQuery.propFix[ this.toLowerCase() ] = this;
                });
                
                // Radios and checkboxes getter/setter
                jQuery.each([ "radio", "checkbox" ], function() {
                	jQuery.valHooks[ this ] = {
                		set: function( elem, value ) {
                			if ( jQuery.isArray( value ) ) {
                				return ( elem.checked = jQuery.inArray( jQuery(elem).val(), value ) >= 0 );
                			}
                		}
                	};
                	if ( !jQuery.support.checkOn ) {
                		jQuery.valHooks[ this ].get = function( elem ) {
                			// Support: Webkit
                			// "" is returned instead of "on" if a value isn't specified
                			return elem.getAttribute("value") === null ? "on" : elem.value;
                		};
                	}
                });
                var rkeyEvent = /^key/,
                	rmouseEvent = /^(?:mouse|contextmenu)|click/,
                	rfocusMorph = /^(?:focusinfocus|focusoutblur)$/,
                	rtypenamespace = /^([^.]*)(?:\.(.+)|)$/;
                
                function returnTrue() {
                	return true;
                }
                
                function returnFalse() {
                	return false;
                }
                
                function safeActiveElement() {
                	try {
                		return document.activeElement;
                	} catch ( err ) { }
                }
                
                /*
                 * Helper functions for managing events -- not part of the public interface.
                 * Props to Dean Edwards' addEvent library for many of the ideas.
                 */
                jQuery.event = {
                
                	global: {},
                
                	add: function( elem, types, handler, data, selector ) {
                
                		var handleObjIn, eventHandle, tmp,
                			events, t, handleObj,
                			special, handlers, type, namespaces, origType,
                			elemData = data_priv.get( elem );
                
                		// Don't attach events to noData or text/comment nodes (but allow plain objects)
                		if ( !elemData ) {
                			return;
                		}
                
                		// Caller can pass in an object of custom data in lieu of the handler
                		if ( handler.handler ) {
                			handleObjIn = handler;
                			handler = handleObjIn.handler;
                			selector = handleObjIn.selector;
                		}
                
                		// Make sure that the handler has a unique ID, used to find/remove it later
                		if ( !handler.guid ) {
                			handler.guid = jQuery.guid++;
                		}
                
                		// Init the element's event structure and main handler, if this is the first
                		if ( !(events = elemData.events) ) {
                			events = elemData.events = {};
                		}
                		if ( !(eventHandle = elemData.handle) ) {
                			eventHandle = elemData.handle = function( e ) {
                				// Discard the second event of a jQuery.event.trigger() and
                				// when an event is called after a page has unloaded
                				return typeof jQuery !== core_strundefined && (!e || jQuery.event.triggered !== e.type) ?
                					jQuery.event.dispatch.apply( eventHandle.elem, arguments ) :
                					undefined;
                			};
                			// Add elem as a property of the handle fn to prevent a memory leak with IE non-native events
                			eventHandle.elem = elem;
                		}
                
                		// Handle multiple events separated by a space
                		types = ( types || "" ).match( core_rnotwhite ) || [""];
                		t = types.length;
                		while ( t-- ) {
                			tmp = rtypenamespace.exec( types[t] ) || [];
                			type = origType = tmp[1];
                			namespaces = ( tmp[2] || "" ).split( "." ).sort();
                
                			// There *must* be a type, no attaching namespace-only handlers
                			if ( !type ) {
                				continue;
                			}
                
                			// If event changes its type, use the special event handlers for the changed type
                			special = jQuery.event.special[ type ] || {};
                
                			// If selector defined, determine special event api type, otherwise given type
                			type = ( selector ? special.delegateType : special.bindType ) || type;
                
                			// Update special based on newly reset type
                			special = jQuery.event.special[ type ] || {};
                
                			// handleObj is passed to all event handlers
                			handleObj = jQuery.extend({
                				type: type,
                				origType: origType,
                				data: data,
                				handler: handler,
                				guid: handler.guid,
                				selector: selector,
                				needsContext: selector && jQuery.expr.match.needsContext.test( selector ),
                				namespace: namespaces.join(".")
                			}, handleObjIn );
                
                			// Init the event handler queue if we're the first
                			if ( !(handlers = events[ type ]) ) {
                				handlers = events[ type ] = [];
                				handlers.delegateCount = 0;
                
                				// Only use addEventListener if the special events handler returns false
                				if ( !special.setup || special.setup.call( elem, data, namespaces, eventHandle ) === false ) {
                					if ( elem.addEventListener ) {
                						elem.addEventListener( type, eventHandle, false );
                					}
                				}
                			}
                
                			if ( special.add ) {
                				special.add.call( elem, handleObj );
                
                				if ( !handleObj.handler.guid ) {
                					handleObj.handler.guid = handler.guid;
                				}
                			}
                
                			// Add to the element's handler list, delegates in front
                			if ( selector ) {
                				handlers.splice( handlers.delegateCount++, 0, handleObj );
                			} else {
                				handlers.push( handleObj );
                			}
                
                			// Keep track of which events have ever been used, for event optimization
                			jQuery.event.global[ type ] = true;
                		}
                
                		// Nullify elem to prevent memory leaks in IE
                		elem = null;
                	},
                
                	// Detach an event or set of events from an element
                	remove: function( elem, types, handler, selector, mappedTypes ) {
                
                		var j, origCount, tmp,
                			events, t, handleObj,
                			special, handlers, type, namespaces, origType,
                			elemData = data_priv.hasData( elem ) && data_priv.get( elem );
                
                		if ( !elemData || !(events = elemData.events) ) {
                			return;
                		}
                
                		// Once for each type.namespace in types; type may be omitted
                		types = ( types || "" ).match( core_rnotwhite ) || [""];
                		t = types.length;
                		while ( t-- ) {
                			tmp = rtypenamespace.exec( types[t] ) || [];
                			type = origType = tmp[1];
                			namespaces = ( tmp[2] || "" ).split( "." ).sort();
                
                			// Unbind all events (on this namespace, if provided) for the element
                			if ( !type ) {
                				for ( type in events ) {
                					jQuery.event.remove( elem, type + types[ t ], handler, selector, true );
                				}
                				continue;
                			}
                
                			special = jQuery.event.special[ type ] || {};
                			type = ( selector ? special.delegateType : special.bindType ) || type;
                			handlers = events[ type ] || [];
                			tmp = tmp[2] && new RegExp( "(^|\\.)" + namespaces.join("\\.(?:.*\\.|)") + "(\\.|$)" );
                
                			// Remove matching events
                			origCount = j = handlers.length;
                			while ( j-- ) {
                				handleObj = handlers[ j ];
                
                				if ( ( mappedTypes || origType === handleObj.origType ) &&
                					( !handler || handler.guid === handleObj.guid ) &&
                					( !tmp || tmp.test( handleObj.namespace ) ) &&
                					( !selector || selector === handleObj.selector || selector === "**" && handleObj.selector ) ) {
                					handlers.splice( j, 1 );
                
                					if ( handleObj.selector ) {
                						handlers.delegateCount--;
                					}
                					if ( special.remove ) {
                						special.remove.call( elem, handleObj );
                					}
                				}
                			}
                
                			// Remove generic event handler if we removed something and no more handlers exist
                			// (avoids potential for endless recursion during removal of special event handlers)
                			if ( origCount && !handlers.length ) {
                				if ( !special.teardown || special.teardown.call( elem, namespaces, elemData.handle ) === false ) {
                					jQuery.removeEvent( elem, type, elemData.handle );
                				}
                
                				delete events[ type ];
                			}
                		}
                
                		// Remove the expando if it's no longer used
                		if ( jQuery.isEmptyObject( events ) ) {
                			delete elemData.handle;
                			data_priv.remove( elem, "events" );
                		}
                	},
                
                	trigger: function( event, data, elem, onlyHandlers ) {
                
                		var i, cur, tmp, bubbleType, ontype, handle, special,
                			eventPath = [ elem || document ],
                			type = core_hasOwn.call( event, "type" ) ? event.type : event,
                			namespaces = core_hasOwn.call( event, "namespace" ) ? event.namespace.split(".") : [];
                
                		cur = tmp = elem = elem || document;
                
                		// Don't do events on text and comment nodes
                		if ( elem.nodeType === 3 || elem.nodeType === 8 ) {
                			return;
                		}
                
                		// focus/blur morphs to focusin/out; ensure we're not firing them right now
                		if ( rfocusMorph.test( type + jQuery.event.triggered ) ) {
                			return;
                		}
                
                		if ( type.indexOf(".") >= 0 ) {
                			// Namespaced trigger; create a regexp to match event type in handle()
                			namespaces = type.split(".");
                			type = namespaces.shift();
                			namespaces.sort();
                		}
                		ontype = type.indexOf(":") < 0 && "on" + type;
                
                		// Caller can pass in a jQuery.Event object, Object, or just an event type string
                		event = event[ jQuery.expando ] ?
                			event :
                			new jQuery.Event( type, typeof event === "object" && event );
                
                		// Trigger bitmask: & 1 for native handlers; & 2 for jQuery (always true)
                		event.isTrigger = onlyHandlers ? 2 : 3;
                		event.namespace = namespaces.join(".");
                		event.namespace_re = event.namespace ?
                			new RegExp( "(^|\\.)" + namespaces.join("\\.(?:.*\\.|)") + "(\\.|$)" ) :
                			null;
                
                		// Clean up the event in case it is being reused
                		event.result = undefined;
                		if ( !event.target ) {
                			event.target = elem;
                		}
                
                		// Clone any incoming data and prepend the event, creating the handler arg list
                		data = data == null ?
                			[ event ] :
                			jQuery.makeArray( data, [ event ] );
                
                		// Allow special events to draw outside the lines
                		special = jQuery.event.special[ type ] || {};
                		if ( !onlyHandlers && special.trigger && special.trigger.apply( elem, data ) === false ) {
                			return;
                		}
                
                		// Determine event propagation path in advance, per W3C events spec (#9951)
                		// Bubble up to document, then to window; watch for a global ownerDocument var (#9724)
                		if ( !onlyHandlers && !special.noBubble && !jQuery.isWindow( elem ) ) {
                
                			bubbleType = special.delegateType || type;
                			if ( !rfocusMorph.test( bubbleType + type ) ) {
                				cur = cur.parentNode;
                			}
                			for ( ; cur; cur = cur.parentNode ) {
                				eventPath.push( cur );
                				tmp = cur;
                			}
                
                			// Only add window if we got to document (e.g., not plain obj or detached DOM)
                			if ( tmp === (elem.ownerDocument || document) ) {
                				eventPath.push( tmp.defaultView || tmp.parentWindow || window );
                			}
                		}
                
                		// Fire handlers on the event path
                		i = 0;
                		while ( (cur = eventPath[i++]) && !event.isPropagationStopped() ) {
                
                			event.type = i > 1 ?
                				bubbleType :
                				special.bindType || type;
                
                			// jQuery handler
                			handle = ( data_priv.get( cur, "events" ) || {} )[ event.type ] && data_priv.get( cur, "handle" );
                			if ( handle ) {
                				handle.apply( cur, data );
                			}
                
                			// Native handler
                			handle = ontype && cur[ ontype ];
                			if ( handle && jQuery.acceptData( cur ) && handle.apply && handle.apply( cur, data ) === false ) {
                				event.preventDefault();
                			}
                		}
                		event.type = type;
                
                		// If nobody prevented the default action, do it now
                		if ( !onlyHandlers && !event.isDefaultPrevented() ) {
                
                			if ( (!special._default || special._default.apply( eventPath.pop(), data ) === false) &&
                				jQuery.acceptData( elem ) ) {
                
                				// Call a native DOM method on the target with the same name name as the event.
                				// Don't do default actions on window, that's where global variables be (#6170)
                				if ( ontype && jQuery.isFunction( elem[ type ] ) && !jQuery.isWindow( elem ) ) {
                
                					// Don't re-trigger an onFOO event when we call its FOO() method
                					tmp = elem[ ontype ];
                
                					if ( tmp ) {
                						elem[ ontype ] = null;
                					}
                
                					// Prevent re-triggering of the same event, since we already bubbled it above
                					jQuery.event.triggered = type;
                					elem[ type ]();
                					jQuery.event.triggered = undefined;
                
                					if ( tmp ) {
                						elem[ ontype ] = tmp;
                					}
                				}
                			}
                		}
                
                		return event.result;
                	},
                
                	dispatch: function( event ) {
                
                		// Make a writable jQuery.Event from the native event object
                		event = jQuery.event.fix( event );
                
                		var i, j, ret, matched, handleObj,
                			handlerQueue = [],
                			args = core_slice.call( arguments ),
                			handlers = ( data_priv.get( this, "events" ) || {} )[ event.type ] || [],
                			special = jQuery.event.special[ event.type ] || {};
                
                		// Use the fix-ed jQuery.Event rather than the (read-only) native event
                		args[0] = event;
                		event.delegateTarget = this;
                
                		// Call the preDispatch hook for the mapped type, and let it bail if desired
                		if ( special.preDispatch && special.preDispatch.call( this, event ) === false ) {
                			return;
                		}
                
                		// Determine handlers
                		handlerQueue = jQuery.event.handlers.call( this, event, handlers );
                
                		// Run delegates first; they may want to stop propagation beneath us
                		i = 0;
                		while ( (matched = handlerQueue[ i++ ]) && !event.isPropagationStopped() ) {
                			event.currentTarget = matched.elem;
                
                			j = 0;
                			while ( (handleObj = matched.handlers[ j++ ]) && !event.isImmediatePropagationStopped() ) {
                
                				// Triggered event must either 1) have no namespace, or
                				// 2) have namespace(s) a subset or equal to those in the bound event (both can have no namespace).
                				if ( !event.namespace_re || event.namespace_re.test( handleObj.namespace ) ) {
                
                					event.handleObj = handleObj;
                					event.data = handleObj.data;
                
                					ret = ( (jQuery.event.special[ handleObj.origType ] || {}).handle || handleObj.handler )
                							.apply( matched.elem, args );
                
                					if ( ret !== undefined ) {
                						if ( (event.result = ret) === false ) {
                							event.preventDefault();
                							event.stopPropagation();
                						}
                					}
                				}
                			}
                		}
                
                		// Call the postDispatch hook for the mapped type
                		if ( special.postDispatch ) {
                			special.postDispatch.call( this, event );
                		}
                
                		return event.result;
                	},
                
                	handlers: function( event, handlers ) {
                		var i, matches, sel, handleObj,
                			handlerQueue = [],
                			delegateCount = handlers.delegateCount,
                			cur = event.target;
                
                		// Find delegate handlers
                		// Black-hole SVG <use> instance trees (#13180)
                		// Avoid non-left-click bubbling in Firefox (#3861)
                		if ( delegateCount && cur.nodeType && (!event.button || event.type !== "click") ) {
                
                			for ( ; cur !== this; cur = cur.parentNode || this ) {
                
                				// Don't process clicks on disabled elements (#6911, #8165, #11382, #11764)
                				if ( cur.disabled !== true || event.type !== "click" ) {
                					matches = [];
                					for ( i = 0; i < delegateCount; i++ ) {
                						handleObj = handlers[ i ];
                
                						// Don't conflict with Object.prototype properties (#13203)
                						sel = handleObj.selector + " ";
                
                						if ( matches[ sel ] === undefined ) {
                							matches[ sel ] = handleObj.needsContext ?
                								jQuery( sel, this ).index( cur ) >= 0 :
                								jQuery.find( sel, this, null, [ cur ] ).length;
                						}
                						if ( matches[ sel ] ) {
                							matches.push( handleObj );
                						}
                					}
                					if ( matches.length ) {
                						handlerQueue.push({ elem: cur, handlers: matches });
                					}
                				}
                			}
                		}
                
                		// Add the remaining (directly-bound) handlers
                		if ( delegateCount < handlers.length ) {
                			handlerQueue.push({ elem: this, handlers: handlers.slice( delegateCount ) });
                		}
                
                		return handlerQueue;
                	},
                
                	// Includes some event props shared by KeyEvent and MouseEvent
                	props: "altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
                
                	fixHooks: {},
                
                	keyHooks: {
                		props: "char charCode key keyCode".split(" "),
                		filter: function( event, original ) {
                
                			// Add which for key events
                			if ( event.which == null ) {
                				event.which = original.charCode != null ? original.charCode : original.keyCode;
                			}
                
                			return event;
                		}
                	},
                
                	mouseHooks: {
                		props: "button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
                		filter: function( event, original ) {
                			var eventDoc, doc, body,
                				button = original.button;
                
                			// Calculate pageX/Y if missing and clientX/Y available
                			if ( event.pageX == null && original.clientX != null ) {
                				eventDoc = event.target.ownerDocument || document;
                				doc = eventDoc.documentElement;
                				body = eventDoc.body;
                
                				event.pageX = original.clientX + ( doc && doc.scrollLeft || body && body.scrollLeft || 0 ) - ( doc && doc.clientLeft || body && body.clientLeft || 0 );
                				event.pageY = original.clientY + ( doc && doc.scrollTop  || body && body.scrollTop  || 0 ) - ( doc && doc.clientTop  || body && body.clientTop  || 0 );
                			}
                
                			// Add which for click: 1 === left; 2 === middle; 3 === right
                			// Note: button is not normalized, so don't use it
                			if ( !event.which && button !== undefined ) {
                				event.which = ( button & 1 ? 1 : ( button & 2 ? 3 : ( button & 4 ? 2 : 0 ) ) );
                			}
                
                			return event;
                		}
                	},
                
                	fix: function( event ) {
                		if ( event[ jQuery.expando ] ) {
                			return event;
                		}
                
                		// Create a writable copy of the event object and normalize some properties
                		var i, prop, copy,
                			type = event.type,
                			originalEvent = event,
                			fixHook = this.fixHooks[ type ];
                
                		if ( !fixHook ) {
                			this.fixHooks[ type ] = fixHook =
                				rmouseEvent.test( type ) ? this.mouseHooks :
                				rkeyEvent.test( type ) ? this.keyHooks :
                				{};
                		}
                		copy = fixHook.props ? this.props.concat( fixHook.props ) : this.props;
                
                		event = new jQuery.Event( originalEvent );
                
                		i = copy.length;
                		while ( i-- ) {
                			prop = copy[ i ];
                			event[ prop ] = originalEvent[ prop ];
                		}
                
                		// Support: Cordova 2.5 (WebKit) (#13255)
                		// All events should have a target; Cordova deviceready doesn't
                		if ( !event.target ) {
                			event.target = document;
                		}
                
                		// Support: Safari 6.0+, Chrome < 28
                		// Target should not be a text node (#504, #13143)
                		if ( event.target.nodeType === 3 ) {
                			event.target = event.target.parentNode;
                		}
                
                		return fixHook.filter? fixHook.filter( event, originalEvent ) : event;
                	},
                
                	special: {
                		load: {
                			// Prevent triggered image.load events from bubbling to window.load
                			noBubble: true
                		},
                		focus: {
                			// Fire native event if possible so blur/focus sequence is correct
                			trigger: function() {
                				if ( this !== safeActiveElement() && this.focus ) {
                					this.focus();
                					return false;
                				}
                			},
                			delegateType: "focusin"
                		},
                		blur: {
                			trigger: function() {
                				if ( this === safeActiveElement() && this.blur ) {
                					this.blur();
                					return false;
                				}
                			},
                			delegateType: "focusout"
                		},
                		click: {
                			// For checkbox, fire native event so checked state will be right
                			trigger: function() {
                				if ( this.type === "checkbox" && this.click && jQuery.nodeName( this, "input" ) ) {
                					this.click();
                					return false;
                				}
                			},
                
                			// For cross-browser consistency, don't fire native .click() on links
                			_default: function( event ) {
                				return jQuery.nodeName( event.target, "a" );
                			}
                		},
                
                		beforeunload: {
                			postDispatch: function( event ) {
                
                				// Support: Firefox 20+
                				// Firefox doesn't alert if the returnValue field is not set.
                				if ( event.result !== undefined ) {
                					event.originalEvent.returnValue = event.result;
                				}
                			}
                		}
                	},
                
                	simulate: function( type, elem, event, bubble ) {
                		// Piggyback on a donor event to simulate a different one.
                		// Fake originalEvent to avoid donor's stopPropagation, but if the
                		// simulated event prevents default then we do the same on the donor.
                		var e = jQuery.extend(
                			new jQuery.Event(),
                			event,
                			{
                				type: type,
                				isSimulated: true,
                				originalEvent: {}
                			}
                		);
                		if ( bubble ) {
                			jQuery.event.trigger( e, null, elem );
                		} else {
                			jQuery.event.dispatch.call( elem, e );
                		}
                		if ( e.isDefaultPrevented() ) {
                			event.preventDefault();
                		}
                	}
                };
                
                jQuery.removeEvent = function( elem, type, handle ) {
                	if ( elem.removeEventListener ) {
                		elem.removeEventListener( type, handle, false );
                	}
                };
                
                jQuery.Event = function( src, props ) {
                	// Allow instantiation without the 'new' keyword
                	if ( !(this instanceof jQuery.Event) ) {
                		return new jQuery.Event( src, props );
                	}
                
                	// Event object
                	if ( src && src.type ) {
                		this.originalEvent = src;
                		this.type = src.type;
                
                		// Events bubbling up the document may have been marked as prevented
                		// by a handler lower down the tree; reflect the correct value.
                		this.isDefaultPrevented = ( src.defaultPrevented ||
                			src.getPreventDefault && src.getPreventDefault() ) ? returnTrue : returnFalse;
                
                	// Event type
                	} else {
                		this.type = src;
                	}
                
                	// Put explicitly provided properties onto the event object
                	if ( props ) {
                		jQuery.extend( this, props );
                	}
                
                	// Create a timestamp if incoming event doesn't have one
                	this.timeStamp = src && src.timeStamp || jQuery.now();
                
                	// Mark it as fixed
                	this[ jQuery.expando ] = true;
                };
                
                // jQuery.Event is based on DOM3 Events as specified by the ECMAScript Language Binding
                // http://www.w3.org/TR/2003/WD-DOM-Level-3-Events-20030331/ecma-script-binding.html
                jQuery.Event.prototype = {
                	isDefaultPrevented: returnFalse,
                	isPropagationStopped: returnFalse,
                	isImmediatePropagationStopped: returnFalse,
                
                	preventDefault: function() {
                		var e = this.originalEvent;
                
                		this.isDefaultPrevented = returnTrue;
                
                		if ( e && e.preventDefault ) {
                			e.preventDefault();
                		}
                	},
                	stopPropagation: function() {
                		var e = this.originalEvent;
                
                		this.isPropagationStopped = returnTrue;
                
                		if ( e && e.stopPropagation ) {
                			e.stopPropagation();
                		}
                	},
                	stopImmediatePropagation: function() {
                		this.isImmediatePropagationStopped = returnTrue;
                		this.stopPropagation();
                	}
                };
                
                // Create mouseenter/leave events using mouseover/out and event-time checks
                // Support: Chrome 15+
                jQuery.each({
                	mouseenter: "mouseover",
                	mouseleave: "mouseout"
                }, function( orig, fix ) {
                	jQuery.event.special[ orig ] = {
                		delegateType: fix,
                		bindType: fix,
                
                		handle: function( event ) {
                			var ret,
                				target = this,
                				related = event.relatedTarget,
                				handleObj = event.handleObj;
                
                			// For mousenter/leave call the handler if related is outside the target.
                			// NB: No relatedTarget if the mouse left/entered the browser window
                			if ( !related || (related !== target && !jQuery.contains( target, related )) ) {
                				event.type = handleObj.origType;
                				ret = handleObj.handler.apply( this, arguments );
                				event.type = fix;
                			}
                			return ret;
                		}
                	};
                });
                
                // Create "bubbling" focus and blur events
                // Support: Firefox, Chrome, Safari
                if ( !jQuery.support.focusinBubbles ) {
                	jQuery.each({ focus: "focusin", blur: "focusout" }, function( orig, fix ) {
                
                		// Attach a single capturing handler while someone wants focusin/focusout
                		var attaches = 0,
                			handler = function( event ) {
                				jQuery.event.simulate( fix, event.target, jQuery.event.fix( event ), true );
                			};
                
                		jQuery.event.special[ fix ] = {
                			setup: function() {
                				if ( attaches++ === 0 ) {
                					document.addEventListener( orig, handler, true );
                				}
                			},
                			teardown: function() {
                				if ( --attaches === 0 ) {
                					document.removeEventListener( orig, handler, true );
                				}
                			}
                		};
                	});
                }
                
                jQuery.fn.extend({
                
                	on: function( types, selector, data, fn, /*INTERNAL*/ one ) {
                		var origFn, type;
                
                		// Types can be a map of types/handlers
                		if ( typeof types === "object" ) {
                			// ( types-Object, selector, data )
                			if ( typeof selector !== "string" ) {
                				// ( types-Object, data )
                				data = data || selector;
                				selector = undefined;
                			}
                			for ( type in types ) {
                				this.on( type, selector, data, types[ type ], one );
                			}
                			return this;
                		}
                
                		if ( data == null && fn == null ) {
                			// ( types, fn )
                			fn = selector;
                			data = selector = undefined;
                		} else if ( fn == null ) {
                			if ( typeof selector === "string" ) {
                				// ( types, selector, fn )
                				fn = data;
                				data = undefined;
                			} else {
                				// ( types, data, fn )
                				fn = data;
                				data = selector;
                				selector = undefined;
                			}
                		}
                		if ( fn === false ) {
                			fn = returnFalse;
                		} else if ( !fn ) {
                			return this;
                		}
                
                		if ( one === 1 ) {
                			origFn = fn;
                			fn = function( event ) {
                				// Can use an empty set, since event contains the info
                				jQuery().off( event );
                				return origFn.apply( this, arguments );
                			};
                			// Use same guid so caller can remove using origFn
                			fn.guid = origFn.guid || ( origFn.guid = jQuery.guid++ );
                		}
                		return this.each( function() {
                			jQuery.event.add( this, types, fn, data, selector );
                		});
                	},
                	one: function( types, selector, data, fn ) {
                		return this.on( types, selector, data, fn, 1 );
                	},
                	off: function( types, selector, fn ) {
                		var handleObj, type;
                		if ( types && types.preventDefault && types.handleObj ) {
                			// ( event )  dispatched jQuery.Event
                			handleObj = types.handleObj;
                			jQuery( types.delegateTarget ).off(
                				handleObj.namespace ? handleObj.origType + "." + handleObj.namespace : handleObj.origType,
                				handleObj.selector,
                				handleObj.handler
                			);
                			return this;
                		}
                		if ( typeof types === "object" ) {
                			// ( types-object [, selector] )
                			for ( type in types ) {
                				this.off( type, selector, types[ type ] );
                			}
                			return this;
                		}
                		if ( selector === false || typeof selector === "function" ) {
                			// ( types [, fn] )
                			fn = selector;
                			selector = undefined;
                		}
                		if ( fn === false ) {
                			fn = returnFalse;
                		}
                		return this.each(function() {
                			jQuery.event.remove( this, types, fn, selector );
                		});
                	},
                
                	trigger: function( type, data ) {
                		return this.each(function() {
                			jQuery.event.trigger( type, data, this );
                		});
                	},
                	triggerHandler: function( type, data ) {
                		var elem = this[0];
                		if ( elem ) {
                			return jQuery.event.trigger( type, data, elem, true );
                		}
                	}
                });
                var isSimple = /^.[^:#\[\.,]*$/,
                	rparentsprev = /^(?:parents|prev(?:Until|All))/,
                	rneedsContext = jQuery.expr.match.needsContext,
                	// methods guaranteed to produce a unique set when starting from a unique set
                	guaranteedUnique = {
                		children: true,
                		contents: true,
                		next: true,
                		prev: true
                	};
                
                jQuery.fn.extend({
                	find: function( selector ) {
                		var i,
                			ret = [],
                			self = this,
                			len = self.length;
                
                		if ( typeof selector !== "string" ) {
                			return this.pushStack( jQuery( selector ).filter(function() {
                				for ( i = 0; i < len; i++ ) {
                					if ( jQuery.contains( self[ i ], this ) ) {
                						return true;
                					}
                				}
                			}) );
                		}
                
                		for ( i = 0; i < len; i++ ) {
                			jQuery.find( selector, self[ i ], ret );
                		}
                
                		// Needed because $( selector, context ) becomes $( context ).find( selector )
                		ret = this.pushStack( len > 1 ? jQuery.unique( ret ) : ret );
                		ret.selector = this.selector ? this.selector + " " + selector : selector;
                		return ret;
                	},
                
                	has: function( target ) {
                		var targets = jQuery( target, this ),
                			l = targets.length;
                
                		return this.filter(function() {
                			var i = 0;
                			for ( ; i < l; i++ ) {
                				if ( jQuery.contains( this, targets[i] ) ) {
                					return true;
                				}
                			}
                		});
                	},
                
                	not: function( selector ) {
                		return this.pushStack( winnow(this, selector || [], true) );
                	},
                
                	filter: function( selector ) {
                		return this.pushStack( winnow(this, selector || [], false) );
                	},
                
                	is: function( selector ) {
                		return !!winnow(
                			this,
                
                			// If this is a positional/relative selector, check membership in the returned set
                			// so $("p:first").is("p:last") won't return true for a doc with two "p".
                			typeof selector === "string" && rneedsContext.test( selector ) ?
                				jQuery( selector ) :
                				selector || [],
                			false
                		).length;
                	},
                
                	closest: function( selectors, context ) {
                		var cur,
                			i = 0,
                			l = this.length,
                			matched = [],
                			pos = ( rneedsContext.test( selectors ) || typeof selectors !== "string" ) ?
                				jQuery( selectors, context || this.context ) :
                				0;
                
                		for ( ; i < l; i++ ) {
                			for ( cur = this[i]; cur && cur !== context; cur = cur.parentNode ) {
                				// Always skip document fragments
                				if ( cur.nodeType < 11 && (pos ?
                					pos.index(cur) > -1 :
                
                					// Don't pass non-elements to Sizzle
                					cur.nodeType === 1 &&
                						jQuery.find.matchesSelector(cur, selectors)) ) {
                
                					cur = matched.push( cur );
                					break;
                				}
                			}
                		}
                
                		return this.pushStack( matched.length > 1 ? jQuery.unique( matched ) : matched );
                	},
                
                	// Determine the position of an element within
                	// the matched set of elements
                	index: function( elem ) {
                
                		// No argument, return index in parent
                		if ( !elem ) {
                			return ( this[ 0 ] && this[ 0 ].parentNode ) ? this.first().prevAll().length : -1;
                		}
                
                		// index in selector
                		if ( typeof elem === "string" ) {
                			return core_indexOf.call( jQuery( elem ), this[ 0 ] );
                		}
                
                		// Locate the position of the desired element
                		return core_indexOf.call( this,
                
                			// If it receives a jQuery object, the first element is used
                			elem.jquery ? elem[ 0 ] : elem
                		);
                	},
                
                	add: function( selector, context ) {
                		var set = typeof selector === "string" ?
                				jQuery( selector, context ) :
                				jQuery.makeArray( selector && selector.nodeType ? [ selector ] : selector ),
                			all = jQuery.merge( this.get(), set );
                
                		return this.pushStack( jQuery.unique(all) );
                	},
                
                	addBack: function( selector ) {
                		return this.add( selector == null ?
                			this.prevObject : this.prevObject.filter(selector)
                		);
                	}
                });
                
                function sibling( cur, dir ) {
                	while ( (cur = cur[dir]) && cur.nodeType !== 1 ) {}
                
                	return cur;
                }
                
                jQuery.each({
                	parent: function( elem ) {
                		var parent = elem.parentNode;
                		return parent && parent.nodeType !== 11 ? parent : null;
                	},
                	parents: function( elem ) {
                		return jQuery.dir( elem, "parentNode" );
                	},
                	parentsUntil: function( elem, i, until ) {
                		return jQuery.dir( elem, "parentNode", until );
                	},
                	next: function( elem ) {
                		return sibling( elem, "nextSibling" );
                	},
                	prev: function( elem ) {
                		return sibling( elem, "previousSibling" );
                	},
                	nextAll: function( elem ) {
                		return jQuery.dir( elem, "nextSibling" );
                	},
                	prevAll: function( elem ) {
                		return jQuery.dir( elem, "previousSibling" );
                	},
                	nextUntil: function( elem, i, until ) {
                		return jQuery.dir( elem, "nextSibling", until );
                	},
                	prevUntil: function( elem, i, until ) {
                		return jQuery.dir( elem, "previousSibling", until );
                	},
                	siblings: function( elem ) {
                		return jQuery.sibling( ( elem.parentNode || {} ).firstChild, elem );
                	},
                	children: function( elem ) {
                		return jQuery.sibling( elem.firstChild );
                	},
                	contents: function( elem ) {
                		return elem.contentDocument || jQuery.merge( [], elem.childNodes );
                	}
                }, function( name, fn ) {
                	jQuery.fn[ name ] = function( until, selector ) {
                		var matched = jQuery.map( this, fn, until );
                
                		if ( name.slice( -5 ) !== "Until" ) {
                			selector = until;
                		}
                
                		if ( selector && typeof selector === "string" ) {
                			matched = jQuery.filter( selector, matched );
                		}
                
                		if ( this.length > 1 ) {
                			// Remove duplicates
                			if ( !guaranteedUnique[ name ] ) {
                				jQuery.unique( matched );
                			}
                
                			// Reverse order for parents* and prev-derivatives
                			if ( rparentsprev.test( name ) ) {
                				matched.reverse();
                			}
                		}
                
                		return this.pushStack( matched );
                	};
                });
                
                jQuery.extend({
                	filter: function( expr, elems, not ) {
                		var elem = elems[ 0 ];
                
                		if ( not ) {
                			expr = ":not(" + expr + ")";
                		}
                
                		return elems.length === 1 && elem.nodeType === 1 ?
                			jQuery.find.matchesSelector( elem, expr ) ? [ elem ] : [] :
                			jQuery.find.matches( expr, jQuery.grep( elems, function( elem ) {
                				return elem.nodeType === 1;
                			}));
                	},
                
                	dir: function( elem, dir, until ) {
                		var matched = [],
                			truncate = until !== undefined;
                
                		while ( (elem = elem[ dir ]) && elem.nodeType !== 9 ) {
                			if ( elem.nodeType === 1 ) {
                				if ( truncate && jQuery( elem ).is( until ) ) {
                					break;
                				}
                				matched.push( elem );
                			}
                		}
                		return matched;
                	},
                
                	sibling: function( n, elem ) {
                		var matched = [];
                
                		for ( ; n; n = n.nextSibling ) {
                			if ( n.nodeType === 1 && n !== elem ) {
                				matched.push( n );
                			}
                		}
                
                		return matched;
                	}
                });
                
                // Implement the identical functionality for filter and not
                function winnow( elements, qualifier, not ) {
                	if ( jQuery.isFunction( qualifier ) ) {
                		return jQuery.grep( elements, function( elem, i ) {
                			/* jshint -W018 */
                			return !!qualifier.call( elem, i, elem ) !== not;
                		});
                
                	}
                
                	if ( qualifier.nodeType ) {
                		return jQuery.grep( elements, function( elem ) {
                			return ( elem === qualifier ) !== not;
                		});
                
                	}
                
                	if ( typeof qualifier === "string" ) {
                		if ( isSimple.test( qualifier ) ) {
                			return jQuery.filter( qualifier, elements, not );
                		}
                
                		qualifier = jQuery.filter( qualifier, elements );
                	}
                
                	return jQuery.grep( elements, function( elem ) {
                		return ( core_indexOf.call( qualifier, elem ) >= 0 ) !== not;
                	});
                }
                var rxhtmlTag = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,
                	rtagName = /<([\w:]+)/,
                	rhtml = /<|&#?\w+;/,
                	rnoInnerhtml = /<(?:script|style|link)/i,
                	manipulation_rcheckableType = /^(?:checkbox|radio)$/i,
                	// checked="checked" or checked
                	rchecked = /checked\s*(?:[^=]|=\s*.checked.)/i,
                	rscriptType = /^$|\/(?:java|ecma)script/i,
                	rscriptTypeMasked = /^true\/(.*)/,
                	rcleanScript = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,
                
                	// We have to close these tags to support XHTML (#13200)
                	wrapMap = {
                
                		// Support: IE 9
                		option: [ 1, "<select multiple='multiple'>", "</select>" ],
                
                		thead: [ 1, "<table>", "</table>" ],
                		col: [ 2, "<table><colgroup>", "</colgroup></table>" ],
                		tr: [ 2, "<table><tbody>", "</tbody></table>" ],
                		td: [ 3, "<table><tbody><tr>", "</tr></tbody></table>" ],
                
                		_default: [ 0, "", "" ]
                	};
                
                // Support: IE 9
                wrapMap.optgroup = wrapMap.option;
                
                wrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = wrapMap.thead;
                wrapMap.th = wrapMap.td;
                
                jQuery.fn.extend({
                	text: function( value ) {
                		return jQuery.access( this, function( value ) {
                			return value === undefined ?
                				jQuery.text( this ) :
                				this.empty().append( ( this[ 0 ] && this[ 0 ].ownerDocument || document ).createTextNode( value ) );
                		}, null, value, arguments.length );
                	},
                
                	append: function() {
                		return this.domManip( arguments, function( elem ) {
                			if ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {
                				var target = manipulationTarget( this, elem );
                				target.appendChild( elem );
                			}
                		});
                	},
                
                	prepend: function() {
                		return this.domManip( arguments, function( elem ) {
                			if ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {
                				var target = manipulationTarget( this, elem );
                				target.insertBefore( elem, target.firstChild );
                			}
                		});
                	},
                
                	before: function() {
                		return this.domManip( arguments, function( elem ) {
                			if ( this.parentNode ) {
                				this.parentNode.insertBefore( elem, this );
                			}
                		});
                	},
                
                	after: function() {
                		return this.domManip( arguments, function( elem ) {
                			if ( this.parentNode ) {
                				this.parentNode.insertBefore( elem, this.nextSibling );
                			}
                		});
                	},
                
                	// keepData is for internal use only--do not document
                	remove: function( selector, keepData ) {
                		var elem,
                			elems = selector ? jQuery.filter( selector, this ) : this,
                			i = 0;
                
                		for ( ; (elem = elems[i]) != null; i++ ) {
                			if ( !keepData && elem.nodeType === 1 ) {
                				jQuery.cleanData( getAll( elem ) );
                			}
                
                			if ( elem.parentNode ) {
                				if ( keepData && jQuery.contains( elem.ownerDocument, elem ) ) {
                					setGlobalEval( getAll( elem, "script" ) );
                				}
                				elem.parentNode.removeChild( elem );
                			}
                		}
                
                		return this;
                	},
                
                	empty: function() {
                		var elem,
                			i = 0;
                
                		for ( ; (elem = this[i]) != null; i++ ) {
                			if ( elem.nodeType === 1 ) {
                
                				// Prevent memory leaks
                				jQuery.cleanData( getAll( elem, false ) );
                
                				// Remove any remaining nodes
                				elem.textContent = "";
                			}
                		}
                
                		return this;
                	},
                
                	clone: function( dataAndEvents, deepDataAndEvents ) {
                		dataAndEvents = dataAndEvents == null ? false : dataAndEvents;
                		deepDataAndEvents = deepDataAndEvents == null ? dataAndEvents : deepDataAndEvents;
                
                		return this.map( function () {
                			return jQuery.clone( this, dataAndEvents, deepDataAndEvents );
                		});
                	},
                
                	html: function( value ) {
                		return jQuery.access( this, function( value ) {
                			var elem = this[ 0 ] || {},
                				i = 0,
                				l = this.length;
                
                			if ( value === undefined && elem.nodeType === 1 ) {
                				return elem.innerHTML;
                			}
                
                			// See if we can take a shortcut and just use innerHTML
                			if ( typeof value === "string" && !rnoInnerhtml.test( value ) &&
                				!wrapMap[ ( rtagName.exec( value ) || [ "", "" ] )[ 1 ].toLowerCase() ] ) {
                
                				value = value.replace( rxhtmlTag, "<$1></$2>" );
                
                				try {
                					for ( ; i < l; i++ ) {
                						elem = this[ i ] || {};
                
                						// Remove element nodes and prevent memory leaks
                						if ( elem.nodeType === 1 ) {
                							jQuery.cleanData( getAll( elem, false ) );
                							elem.innerHTML = value;
                						}
                					}
                
                					elem = 0;
                
                				// If using innerHTML throws an exception, use the fallback method
                				} catch( e ) {}
                			}
                
                			if ( elem ) {
                				this.empty().append( value );
                			}
                		}, null, value, arguments.length );
                	},
                
                	replaceWith: function() {
                		var
                			// Snapshot the DOM in case .domManip sweeps something relevant into its fragment
                			args = jQuery.map( this, function( elem ) {
                				return [ elem.nextSibling, elem.parentNode ];
                			}),
                			i = 0;
                
                		// Make the changes, replacing each context element with the new content
                		this.domManip( arguments, function( elem ) {
                			var next = args[ i++ ],
                				parent = args[ i++ ];
                
                			if ( parent ) {
                				// Don't use the snapshot next if it has moved (#13810)
                				if ( next && next.parentNode !== parent ) {
                					next = this.nextSibling;
                				}
                				jQuery( this ).remove();
                				parent.insertBefore( elem, next );
                			}
                		// Allow new content to include elements from the context set
                		}, true );
                
                		// Force removal if there was no new content (e.g., from empty arguments)
                		return i ? this : this.remove();
                	},
                
                	detach: function( selector ) {
                		return this.remove( selector, true );
                	},
                
                	domManip: function( args, callback, allowIntersection ) {
                
                		// Flatten any nested arrays
                		args = core_concat.apply( [], args );
                
                		var fragment, first, scripts, hasScripts, node, doc,
                			i = 0,
                			l = this.length,
                			set = this,
                			iNoClone = l - 1,
                			value = args[ 0 ],
                			isFunction = jQuery.isFunction( value );
                
                		// We can't cloneNode fragments that contain checked, in WebKit
                		if ( isFunction || !( l <= 1 || typeof value !== "string" || jQuery.support.checkClone || !rchecked.test( value ) ) ) {
                			return this.each(function( index ) {
                				var self = set.eq( index );
                				if ( isFunction ) {
                					args[ 0 ] = value.call( this, index, self.html() );
                				}
                				self.domManip( args, callback, allowIntersection );
                			});
                		}
                
                		if ( l ) {
                			fragment = jQuery.buildFragment( args, this[ 0 ].ownerDocument, false, !allowIntersection && this );
                			first = fragment.firstChild;
                
                			if ( fragment.childNodes.length === 1 ) {
                				fragment = first;
                			}
                
                			if ( first ) {
                				scripts = jQuery.map( getAll( fragment, "script" ), disableScript );
                				hasScripts = scripts.length;
                
                				// Use the original fragment for the last item instead of the first because it can end up
                				// being emptied incorrectly in certain situations (#8070).
                				for ( ; i < l; i++ ) {
                					node = fragment;
                
                					if ( i !== iNoClone ) {
                						node = jQuery.clone( node, true, true );
                
                						// Keep references to cloned scripts for later restoration
                						if ( hasScripts ) {
                							// Support: QtWebKit
                							// jQuery.merge because core_push.apply(_, arraylike) throws
                							jQuery.merge( scripts, getAll( node, "script" ) );
                						}
                					}
                
                					callback.call( this[ i ], node, i );
                				}
                
                				if ( hasScripts ) {
                					doc = scripts[ scripts.length - 1 ].ownerDocument;
                
                					// Reenable scripts
                					jQuery.map( scripts, restoreScript );
                
                					// Evaluate executable scripts on first document insertion
                					for ( i = 0; i < hasScripts; i++ ) {
                						node = scripts[ i ];
                						if ( rscriptType.test( node.type || "" ) &&
                							!data_priv.access( node, "globalEval" ) && jQuery.contains( doc, node ) ) {
                
                							if ( node.src ) {
                								// Hope ajax is available...
                								jQuery._evalUrl( node.src );
                							} else {
                								jQuery.globalEval( node.textContent.replace( rcleanScript, "" ) );
                							}
                						}
                					}
                				}
                			}
                		}
                
                		return this;
                	}
                });
                
                jQuery.each({
                	appendTo: "append",
                	prependTo: "prepend",
                	insertBefore: "before",
                	insertAfter: "after",
                	replaceAll: "replaceWith"
                }, function( name, original ) {
                	jQuery.fn[ name ] = function( selector ) {
                		var elems,
                			ret = [],
                			insert = jQuery( selector ),
                			last = insert.length - 1,
                			i = 0;
                
                		for ( ; i <= last; i++ ) {
                			elems = i === last ? this : this.clone( true );
                			jQuery( insert[ i ] )[ original ]( elems );
                
                			// Support: QtWebKit
                			// .get() because core_push.apply(_, arraylike) throws
                			core_push.apply( ret, elems.get() );
                		}
                
                		return this.pushStack( ret );
                	};
                });
                
                jQuery.extend({
                	clone: function( elem, dataAndEvents, deepDataAndEvents ) {
                		var i, l, srcElements, destElements,
                			clone = elem.cloneNode( true ),
                			inPage = jQuery.contains( elem.ownerDocument, elem );
                
                		// Support: IE >= 9
                		// Fix Cloning issues
                		if ( !jQuery.support.noCloneChecked && ( elem.nodeType === 1 || elem.nodeType === 11 ) && !jQuery.isXMLDoc( elem ) ) {
                
                			// We eschew Sizzle here for performance reasons: http://jsperf.com/getall-vs-sizzle/2
                			destElements = getAll( clone );
                			srcElements = getAll( elem );
                
                			for ( i = 0, l = srcElements.length; i < l; i++ ) {
                				fixInput( srcElements[ i ], destElements[ i ] );
                			}
                		}
                
                		// Copy the events from the original to the clone
                		if ( dataAndEvents ) {
                			if ( deepDataAndEvents ) {
                				srcElements = srcElements || getAll( elem );
                				destElements = destElements || getAll( clone );
                
                				for ( i = 0, l = srcElements.length; i < l; i++ ) {
                					cloneCopyEvent( srcElements[ i ], destElements[ i ] );
                				}
                			} else {
                				cloneCopyEvent( elem, clone );
                			}
                		}
                
                		// Preserve script evaluation history
                		destElements = getAll( clone, "script" );
                		if ( destElements.length > 0 ) {
                			setGlobalEval( destElements, !inPage && getAll( elem, "script" ) );
                		}
                
                		// Return the cloned set
                		return clone;
                	},
                
                	buildFragment: function( elems, context, scripts, selection ) {
                		var elem, tmp, tag, wrap, contains, j,
                			i = 0,
                			l = elems.length,
                			fragment = context.createDocumentFragment(),
                			nodes = [];
                
                		for ( ; i < l; i++ ) {
                			elem = elems[ i ];
                
                			if ( elem || elem === 0 ) {
                
                				// Add nodes directly
                				if ( jQuery.type( elem ) === "object" ) {
                					// Support: QtWebKit
                					// jQuery.merge because core_push.apply(_, arraylike) throws
                					jQuery.merge( nodes, elem.nodeType ? [ elem ] : elem );
                
                				// Convert non-html into a text node
                				} else if ( !rhtml.test( elem ) ) {
                					nodes.push( context.createTextNode( elem ) );
                
                				// Convert html into DOM nodes
                				} else {
                					tmp = tmp || fragment.appendChild( context.createElement("div") );
                
                					// Deserialize a standard representation
                					tag = ( rtagName.exec( elem ) || ["", ""] )[ 1 ].toLowerCase();
                					wrap = wrapMap[ tag ] || wrapMap._default;
                					tmp.innerHTML = wrap[ 1 ] + elem.replace( rxhtmlTag, "<$1></$2>" ) + wrap[ 2 ];
                
                					// Descend through wrappers to the right content
                					j = wrap[ 0 ];
                					while ( j-- ) {
                						tmp = tmp.lastChild;
                					}
                
                					// Support: QtWebKit
                					// jQuery.merge because core_push.apply(_, arraylike) throws
                					jQuery.merge( nodes, tmp.childNodes );
                
                					// Remember the top-level container
                					tmp = fragment.firstChild;
                
                					// Fixes #12346
                					// Support: Webkit, IE
                					tmp.textContent = "";
                				}
                			}
                		}
                
                		// Remove wrapper from fragment
                		fragment.textContent = "";
                
                		i = 0;
                		while ( (elem = nodes[ i++ ]) ) {
                
                			// #4087 - If origin and destination elements are the same, and this is
                			// that element, do not do anything
                			if ( selection && jQuery.inArray( elem, selection ) !== -1 ) {
                				continue;
                			}
                
                			contains = jQuery.contains( elem.ownerDocument, elem );
                
                			// Append to fragment
                			tmp = getAll( fragment.appendChild( elem ), "script" );
                
                			// Preserve script evaluation history
                			if ( contains ) {
                				setGlobalEval( tmp );
                			}
                
                			// Capture executables
                			if ( scripts ) {
                				j = 0;
                				while ( (elem = tmp[ j++ ]) ) {
                					if ( rscriptType.test( elem.type || "" ) ) {
                						scripts.push( elem );
                					}
                				}
                			}
                		}
                
                		return fragment;
                	},
                
                	cleanData: function( elems ) {
                		var data, elem, events, type, key, j,
                			special = jQuery.event.special,
                			i = 0;
                
                		for ( ; (elem = elems[ i ]) !== undefined; i++ ) {
                			if ( Data.accepts( elem ) ) {
                				key = elem[ data_priv.expando ];
                
                				if ( key && (data = data_priv.cache[ key ]) ) {
                					events = Object.keys( data.events || {} );
                					if ( events.length ) {
                						for ( j = 0; (type = events[j]) !== undefined; j++ ) {
                							if ( special[ type ] ) {
                								jQuery.event.remove( elem, type );
                
                							// This is a shortcut to avoid jQuery.event.remove's overhead
                							} else {
                								jQuery.removeEvent( elem, type, data.handle );
                							}
                						}
                					}
                					if ( data_priv.cache[ key ] ) {
                						// Discard any remaining `private` data
                						delete data_priv.cache[ key ];
                					}
                				}
                			}
                			// Discard any remaining `user` data
                			delete data_user.cache[ elem[ data_user.expando ] ];
                		}
                	},
                
                	_evalUrl: function( url ) {
                		return jQuery.ajax({
                			url: url,
                			type: "GET",
                			dataType: "script",
                			async: false,
                			global: false,
                			"throws": true
                		});
                	}
                });
                
                // Support: 1.x compatibility
                // Manipulating tables requires a tbody
                function manipulationTarget( elem, content ) {
                	return jQuery.nodeName( elem, "table" ) &&
                		jQuery.nodeName( content.nodeType === 1 ? content : content.firstChild, "tr" ) ?
                
                		elem.getElementsByTagName("tbody")[0] ||
                			elem.appendChild( elem.ownerDocument.createElement("tbody") ) :
                		elem;
                }
                
                // Replace/restore the type attribute of script elements for safe DOM manipulation
                function disableScript( elem ) {
                	elem.type = (elem.getAttribute("type") !== null) + "/" + elem.type;
                	return elem;
                }
                function restoreScript( elem ) {
                	var match = rscriptTypeMasked.exec( elem.type );
                
                	if ( match ) {
                		elem.type = match[ 1 ];
                	} else {
                		elem.removeAttribute("type");
                	}
                
                	return elem;
                }
                
                // Mark scripts as having already been evaluated
                function setGlobalEval( elems, refElements ) {
                	var l = elems.length,
                		i = 0;
                
                	for ( ; i < l; i++ ) {
                		data_priv.set(
                			elems[ i ], "globalEval", !refElements || data_priv.get( refElements[ i ], "globalEval" )
                		);
                	}
                }
                
                function cloneCopyEvent( src, dest ) {
                	var i, l, type, pdataOld, pdataCur, udataOld, udataCur, events;
                
                	if ( dest.nodeType !== 1 ) {
                		return;
                	}
                
                	// 1. Copy private data: events, handlers, etc.
                	if ( data_priv.hasData( src ) ) {
                		pdataOld = data_priv.access( src );
                		pdataCur = data_priv.set( dest, pdataOld );
                		events = pdataOld.events;
                
                		if ( events ) {
                			delete pdataCur.handle;
                			pdataCur.events = {};
                
                			for ( type in events ) {
                				for ( i = 0, l = events[ type ].length; i < l; i++ ) {
                					jQuery.event.add( dest, type, events[ type ][ i ] );
                				}
                			}
                		}
                	}
                
                	// 2. Copy user data
                	if ( data_user.hasData( src ) ) {
                		udataOld = data_user.access( src );
                		udataCur = jQuery.extend( {}, udataOld );
                
                		data_user.set( dest, udataCur );
                	}
                }
                
                
                function getAll( context, tag ) {
                	var ret = context.getElementsByTagName ? context.getElementsByTagName( tag || "*" ) :
                			context.querySelectorAll ? context.querySelectorAll( tag || "*" ) :
                			[];
                
                	return tag === undefined || tag && jQuery.nodeName( context, tag ) ?
                		jQuery.merge( [ context ], ret ) :
                		ret;
                }
                
                // Support: IE >= 9
                function fixInput( src, dest ) {
                	var nodeName = dest.nodeName.toLowerCase();
                
                	// Fails to persist the checked state of a cloned checkbox or radio button.
                	if ( nodeName === "input" && manipulation_rcheckableType.test( src.type ) ) {
                		dest.checked = src.checked;
                
                	// Fails to return the selected option to the default selected state when cloning options
                	} else if ( nodeName === "input" || nodeName === "textarea" ) {
                		dest.defaultValue = src.defaultValue;
                	}
                }
                jQuery.fn.extend({
                	wrapAll: function( html ) {
                		var wrap;
                
                		if ( jQuery.isFunction( html ) ) {
                			return this.each(function( i ) {
                				jQuery( this ).wrapAll( html.call(this, i) );
                			});
                		}
                
                		if ( this[ 0 ] ) {
                
                			// The elements to wrap the target around
                			wrap = jQuery( html, this[ 0 ].ownerDocument ).eq( 0 ).clone( true );
                
                			if ( this[ 0 ].parentNode ) {
                				wrap.insertBefore( this[ 0 ] );
                			}
                
                			wrap.map(function() {
                				var elem = this;
                
                				while ( elem.firstElementChild ) {
                					elem = elem.firstElementChild;
                				}
                
                				return elem;
                			}).append( this );
                		}
                
                		return this;
                	},
                
                	wrapInner: function( html ) {
                		if ( jQuery.isFunction( html ) ) {
                			return this.each(function( i ) {
                				jQuery( this ).wrapInner( html.call(this, i) );
                			});
                		}
                
                		return this.each(function() {
                			var self = jQuery( this ),
                				contents = self.contents();
                
                			if ( contents.length ) {
                				contents.wrapAll( html );
                
                			} else {
                				self.append( html );
                			}
                		});
                	},
                
                	wrap: function( html ) {
                		var isFunction = jQuery.isFunction( html );
                
                		return this.each(function( i ) {
                			jQuery( this ).wrapAll( isFunction ? html.call(this, i) : html );
                		});
                	},
                
                	unwrap: function() {
                		return this.parent().each(function() {
                			if ( !jQuery.nodeName( this, "body" ) ) {
                				jQuery( this ).replaceWith( this.childNodes );
                			}
                		}).end();
                	}
                });
                var curCSS, iframe,
                	// swappable if display is none or starts with table except "table", "table-cell", or "table-caption"
                	// see here for display values: https://developer.mozilla.org/en-US/docs/CSS/display
                	rdisplayswap = /^(none|table(?!-c[ea]).+)/,
                	rmargin = /^margin/,
                	rnumsplit = new RegExp( "^(" + core_pnum + ")(.*)$", "i" ),
                	rnumnonpx = new RegExp( "^(" + core_pnum + ")(?!px)[a-z%]+$", "i" ),
                	rrelNum = new RegExp( "^([+-])=(" + core_pnum + ")", "i" ),
                	elemdisplay = { BODY: "block" },
                
                	cssShow = { position: "absolute", visibility: "hidden", display: "block" },
                	cssNormalTransform = {
                		letterSpacing: 0,
                		fontWeight: 400
                	},
                
                	cssExpand = [ "Top", "Right", "Bottom", "Left" ],
                	cssPrefixes = [ "Webkit", "O", "Moz", "ms" ];
                
                // return a css property mapped to a potentially vendor prefixed property
                function vendorPropName( style, name ) {
                
                	// shortcut for names that are not vendor prefixed
                	if ( name in style ) {
                		return name;
                	}
                
                	// check for vendor prefixed names
                	var capName = name.charAt(0).toUpperCase() + name.slice(1),
                		origName = name,
                		i = cssPrefixes.length;
                
                	while ( i-- ) {
                		name = cssPrefixes[ i ] + capName;
                		if ( name in style ) {
                			return name;
                		}
                	}
                
                	return origName;
                }
                
                function isHidden( elem, el ) {
                	// isHidden might be called from jQuery#filter function;
                	// in that case, element will be second argument
                	elem = el || elem;
                	return jQuery.css( elem, "display" ) === "none" || !jQuery.contains( elem.ownerDocument, elem );
                }
                
                // NOTE: we've included the "window" in window.getComputedStyle
                // because jsdom on node.js will break without it.
                function getStyles( elem ) {
                	return window.getComputedStyle( elem, null );
                }
                
                function showHide( elements, show ) {
                	var display, elem, hidden,
                		values = [],
                		index = 0,
                		length = elements.length;
                
                	for ( ; index < length; index++ ) {
                		elem = elements[ index ];
                		if ( !elem.style ) {
                			continue;
                		}
                
                		values[ index ] = data_priv.get( elem, "olddisplay" );
                		display = elem.style.display;
                		if ( show ) {
                			// Reset the inline display of this element to learn if it is
                			// being hidden by cascaded rules or not
                			if ( !values[ index ] && display === "none" ) {
                				elem.style.display = "";
                			}
                
                			// Set elements which have been overridden with display: none
                			// in a stylesheet to whatever the default browser style is
                			// for such an element
                			if ( elem.style.display === "" && isHidden( elem ) ) {
                				values[ index ] = data_priv.access( elem, "olddisplay", css_defaultDisplay(elem.nodeName) );
                			}
                		} else {
                
                			if ( !values[ index ] ) {
                				hidden = isHidden( elem );
                
                				if ( display && display !== "none" || !hidden ) {
                					data_priv.set( elem, "olddisplay", hidden ? display : jQuery.css(elem, "display") );
                				}
                			}
                		}
                	}
                
                	// Set the display of most of the elements in a second loop
                	// to avoid the constant reflow
                	for ( index = 0; index < length; index++ ) {
                		elem = elements[ index ];
                		if ( !elem.style ) {
                			continue;
                		}
                		if ( !show || elem.style.display === "none" || elem.style.display === "" ) {
                			elem.style.display = show ? values[ index ] || "" : "none";
                		}
                	}
                
                	return elements;
                }
                
                jQuery.fn.extend({
                	css: function( name, value ) {
                		return jQuery.access( this, function( elem, name, value ) {
                			var styles, len,
                				map = {},
                				i = 0;
                
                			if ( jQuery.isArray( name ) ) {
                				styles = getStyles( elem );
                				len = name.length;
                
                				for ( ; i < len; i++ ) {
                					map[ name[ i ] ] = jQuery.css( elem, name[ i ], false, styles );
                				}
                
                				return map;
                			}
                
                			return value !== undefined ?
                				jQuery.style( elem, name, value ) :
                				jQuery.css( elem, name );
                		}, name, value, arguments.length > 1 );
                	},
                	show: function() {
                		return showHide( this, true );
                	},
                	hide: function() {
                		return showHide( this );
                	},
                	toggle: function( state ) {
                		if ( typeof state === "boolean" ) {
                			return state ? this.show() : this.hide();
                		}
                
                		return this.each(function() {
                			if ( isHidden( this ) ) {
                				jQuery( this ).show();
                			} else {
                				jQuery( this ).hide();
                			}
                		});
                	}
                });
                
                jQuery.extend({
                	// Add in style property hooks for overriding the default
                	// behavior of getting and setting a style property
                	cssHooks: {
                		opacity: {
                			get: function( elem, computed ) {
                				if ( computed ) {
                					// We should always get a number back from opacity
                					var ret = curCSS( elem, "opacity" );
                					return ret === "" ? "1" : ret;
                				}
                			}
                		}
                	},
                
                	// Don't automatically add "px" to these possibly-unitless properties
                	cssNumber: {
                		"columnCount": true,
                		"fillOpacity": true,
                		"fontWeight": true,
                		"lineHeight": true,
                		"opacity": true,
                		"order": true,
                		"orphans": true,
                		"widows": true,
                		"zIndex": true,
                		"zoom": true
                	},
                
                	// Add in properties whose names you wish to fix before
                	// setting or getting the value
                	cssProps: {
                		// normalize float css property
                		"float": "cssFloat"
                	},
                
                	// Get and set the style property on a DOM Node
                	style: function( elem, name, value, extra ) {
                		// Don't set styles on text and comment nodes
                		if ( !elem || elem.nodeType === 3 || elem.nodeType === 8 || !elem.style ) {
                			return;
                		}
                
                		// Make sure that we're working with the right name
                		var ret, type, hooks,
                			origName = jQuery.camelCase( name ),
                			style = elem.style;
                
                		name = jQuery.cssProps[ origName ] || ( jQuery.cssProps[ origName ] = vendorPropName( style, origName ) );
                
                		// gets hook for the prefixed version
                		// followed by the unprefixed version
                		hooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];
                
                		// Check if we're setting a value
                		if ( value !== undefined ) {
                			type = typeof value;
                
                			// convert relative number strings (+= or -=) to relative numbers. #7345
                			if ( type === "string" && (ret = rrelNum.exec( value )) ) {
                				value = ( ret[1] + 1 ) * ret[2] + parseFloat( jQuery.css( elem, name ) );
                				// Fixes bug #9237
                				type = "number";
                			}
                
                			// Make sure that NaN and null values aren't set. See: #7116
                			if ( value == null || type === "number" && isNaN( value ) ) {
                				return;
                			}
                
                			// If a number was passed in, add 'px' to the (except for certain CSS properties)
                			if ( type === "number" && !jQuery.cssNumber[ origName ] ) {
                				value += "px";
                			}
                
                			// Fixes #8908, it can be done more correctly by specifying setters in cssHooks,
                			// but it would mean to define eight (for every problematic property) identical functions
                			if ( !jQuery.support.clearCloneStyle && value === "" && name.indexOf("background") === 0 ) {
                				style[ name ] = "inherit";
                			}
                
                			// If a hook was provided, use that value, otherwise just set the specified value
                			if ( !hooks || !("set" in hooks) || (value = hooks.set( elem, value, extra )) !== undefined ) {
                				style[ name ] = value;
                			}
                
                		} else {
                			// If a hook was provided get the non-computed value from there
                			if ( hooks && "get" in hooks && (ret = hooks.get( elem, false, extra )) !== undefined ) {
                				return ret;
                			}
                
                			// Otherwise just get the value from the style object
                			return style[ name ];
                		}
                	},
                
                	css: function( elem, name, extra, styles ) {
                		var val, num, hooks,
                			origName = jQuery.camelCase( name );
                
                		// Make sure that we're working with the right name
                		name = jQuery.cssProps[ origName ] || ( jQuery.cssProps[ origName ] = vendorPropName( elem.style, origName ) );
                
                		// gets hook for the prefixed version
                		// followed by the unprefixed version
                		hooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];
                
                		// If a hook was provided get the computed value from there
                		if ( hooks && "get" in hooks ) {
                			val = hooks.get( elem, true, extra );
                		}
                
                		// Otherwise, if a way to get the computed value exists, use that
                		if ( val === undefined ) {
                			val = curCSS( elem, name, styles );
                		}
                
                		//convert "normal" to computed value
                		if ( val === "normal" && name in cssNormalTransform ) {
                			val = cssNormalTransform[ name ];
                		}
                
                		// Return, converting to number if forced or a qualifier was provided and val looks numeric
                		if ( extra === "" || extra ) {
                			num = parseFloat( val );
                			return extra === true || jQuery.isNumeric( num ) ? num || 0 : val;
                		}
                		return val;
                	}
                });
                
                curCSS = function( elem, name, _computed ) {
                	var width, minWidth, maxWidth,
                		computed = _computed || getStyles( elem ),
                
                		// Support: IE9
                		// getPropertyValue is only needed for .css('filter') in IE9, see #12537
                		ret = computed ? computed.getPropertyValue( name ) || computed[ name ] : undefined,
                		style = elem.style;
                
                	if ( computed ) {
                
                		if ( ret === "" && !jQuery.contains( elem.ownerDocument, elem ) ) {
                			ret = jQuery.style( elem, name );
                		}
                
                		// Support: Safari 5.1
                		// A tribute to the "awesome hack by Dean Edwards"
                		// Safari 5.1.7 (at least) returns percentage for a larger set of values, but width seems to be reliably pixels
                		// this is against the CSSOM draft spec: http://dev.w3.org/csswg/cssom/#resolved-values
                		if ( rnumnonpx.test( ret ) && rmargin.test( name ) ) {
                
                			// Remember the original values
                			width = style.width;
                			minWidth = style.minWidth;
                			maxWidth = style.maxWidth;
                
                			// Put in the new values to get a computed value out
                			style.minWidth = style.maxWidth = style.width = ret;
                			ret = computed.width;
                
                			// Revert the changed values
                			style.width = width;
                			style.minWidth = minWidth;
                			style.maxWidth = maxWidth;
                		}
                	}
                
                	return ret;
                };
                
                
                function setPositiveNumber( elem, value, subtract ) {
                	var matches = rnumsplit.exec( value );
                	return matches ?
                		// Guard against undefined "subtract", e.g., when used as in cssHooks
                		Math.max( 0, matches[ 1 ] - ( subtract || 0 ) ) + ( matches[ 2 ] || "px" ) :
                		value;
                }
                
                function augmentWidthOrHeight( elem, name, extra, isBorderBox, styles ) {
                	var i = extra === ( isBorderBox ? "border" : "content" ) ?
                		// If we already have the right measurement, avoid augmentation
                		4 :
                		// Otherwise initialize for horizontal or vertical properties
                		name === "width" ? 1 : 0,
                
                		val = 0;
                
                	for ( ; i < 4; i += 2 ) {
                		// both box models exclude margin, so add it if we want it
                		if ( extra === "margin" ) {
                			val += jQuery.css( elem, extra + cssExpand[ i ], true, styles );
                		}
                
                		if ( isBorderBox ) {
                			// border-box includes padding, so remove it if we want content
                			if ( extra === "content" ) {
                				val -= jQuery.css( elem, "padding" + cssExpand[ i ], true, styles );
                			}
                
                			// at this point, extra isn't border nor margin, so remove border
                			if ( extra !== "margin" ) {
                				val -= jQuery.css( elem, "border" + cssExpand[ i ] + "Width", true, styles );
                			}
                		} else {
                			// at this point, extra isn't content, so add padding
                			val += jQuery.css( elem, "padding" + cssExpand[ i ], true, styles );
                
                			// at this point, extra isn't content nor padding, so add border
                			if ( extra !== "padding" ) {
                				val += jQuery.css( elem, "border" + cssExpand[ i ] + "Width", true, styles );
                			}
                		}
                	}
                
                	return val;
                }
                
                function getWidthOrHeight( elem, name, extra ) {
                
                	// Start with offset property, which is equivalent to the border-box value
                	var valueIsBorderBox = true,
                		val = name === "width" ? elem.offsetWidth : elem.offsetHeight,
                		styles = getStyles( elem ),
                		isBorderBox = jQuery.support.boxSizing && jQuery.css( elem, "boxSizing", false, styles ) === "border-box";
                
                	// some non-html elements return undefined for offsetWidth, so check for null/undefined
                	// svg - https://bugzilla.mozilla.org/show_bug.cgi?id=649285
                	// MathML - https://bugzilla.mozilla.org/show_bug.cgi?id=491668
                	if ( val <= 0 || val == null ) {
                		// Fall back to computed then uncomputed css if necessary
                		val = curCSS( elem, name, styles );
                		if ( val < 0 || val == null ) {
                			val = elem.style[ name ];
                		}
                
                		// Computed unit is not pixels. Stop here and return.
                		if ( rnumnonpx.test(val) ) {
                			return val;
                		}
                
                		// we need the check for style in case a browser which returns unreliable values
                		// for getComputedStyle silently falls back to the reliable elem.style
                		valueIsBorderBox = isBorderBox && ( jQuery.support.boxSizingReliable || val === elem.style[ name ] );
                
                		// Normalize "", auto, and prepare for extra
                		val = parseFloat( val ) || 0;
                	}
                
                	// use the active box-sizing model to add/subtract irrelevant styles
                	return ( val +
                		augmentWidthOrHeight(
                			elem,
                			name,
                			extra || ( isBorderBox ? "border" : "content" ),
                			valueIsBorderBox,
                			styles
                		)
                	) + "px";
                }
                
                // Try to determine the default display value of an element
                function css_defaultDisplay( nodeName ) {
                	var doc = document,
                		display = elemdisplay[ nodeName ];
                
                	if ( !display ) {
                		display = actualDisplay( nodeName, doc );
                
                		// If the simple way fails, read from inside an iframe
                		if ( display === "none" || !display ) {
                			// Use the already-created iframe if possible
                			iframe = ( iframe ||
                				jQuery("<iframe frameborder='0' width='0' height='0'/>")
                				.css( "cssText", "display:block !important" )
                			).appendTo( doc.documentElement );
                
                			// Always write a new HTML skeleton so Webkit and Firefox don't choke on reuse
                			doc = ( iframe[0].contentWindow || iframe[0].contentDocument ).document;
                			doc.write("<!doctype html><html><body>");
                			doc.close();
                
                			display = actualDisplay( nodeName, doc );
                			iframe.detach();
                		}
                
                		// Store the correct default display
                		elemdisplay[ nodeName ] = display;
                	}
                
                	return display;
                }
                
                // Called ONLY from within css_defaultDisplay
                function actualDisplay( name, doc ) {
                	var elem = jQuery( doc.createElement( name ) ).appendTo( doc.body ),
                		display = jQuery.css( elem[0], "display" );
                	elem.remove();
                	return display;
                }
                
                jQuery.each([ "height", "width" ], function( i, name ) {
                	jQuery.cssHooks[ name ] = {
                		get: function( elem, computed, extra ) {
                			if ( computed ) {
                				// certain elements can have dimension info if we invisibly show them
                				// however, it must have a current display style that would benefit from this
                				return elem.offsetWidth === 0 && rdisplayswap.test( jQuery.css( elem, "display" ) ) ?
                					jQuery.swap( elem, cssShow, function() {
                						return getWidthOrHeight( elem, name, extra );
                					}) :
                					getWidthOrHeight( elem, name, extra );
                			}
                		},
                
                		set: function( elem, value, extra ) {
                			var styles = extra && getStyles( elem );
                			return setPositiveNumber( elem, value, extra ?
                				augmentWidthOrHeight(
                					elem,
                					name,
                					extra,
                					jQuery.support.boxSizing && jQuery.css( elem, "boxSizing", false, styles ) === "border-box",
                					styles
                				) : 0
                			);
                		}
                	};
                });
                
                // These hooks cannot be added until DOM ready because the support test
                // for it is not run until after DOM ready
                jQuery(function() {
                	// Support: Android 2.3
                	if ( !jQuery.support.reliableMarginRight ) {
                		jQuery.cssHooks.marginRight = {
                			get: function( elem, computed ) {
                				if ( computed ) {
                					// Support: Android 2.3
                					// WebKit Bug 13343 - getComputedStyle returns wrong value for margin-right
                					// Work around by temporarily setting element display to inline-block
                					return jQuery.swap( elem, { "display": "inline-block" },
                						curCSS, [ elem, "marginRight" ] );
                				}
                			}
                		};
                	}
                
                	// Webkit bug: https://bugs.webkit.org/show_bug.cgi?id=29084
                	// getComputedStyle returns percent when specified for top/left/bottom/right
                	// rather than make the css module depend on the offset module, we just check for it here
                	if ( !jQuery.support.pixelPosition && jQuery.fn.position ) {
                		jQuery.each( [ "top", "left" ], function( i, prop ) {
                			jQuery.cssHooks[ prop ] = {
                				get: function( elem, computed ) {
                					if ( computed ) {
                						computed = curCSS( elem, prop );
                						// if curCSS returns percentage, fallback to offset
                						return rnumnonpx.test( computed ) ?
                							jQuery( elem ).position()[ prop ] + "px" :
                							computed;
                					}
                				}
                			};
                		});
                	}
                
                });
                
                if ( jQuery.expr && jQuery.expr.filters ) {
                	jQuery.expr.filters.hidden = function( elem ) {
                		// Support: Opera <= 12.12
                		// Opera reports offsetWidths and offsetHeights less than zero on some elements
                		return elem.offsetWidth <= 0 && elem.offsetHeight <= 0;
                	};
                
                	jQuery.expr.filters.visible = function( elem ) {
                		return !jQuery.expr.filters.hidden( elem );
                	};
                }
                
                // These hooks are used by animate to expand properties
                jQuery.each({
                	margin: "",
                	padding: "",
                	border: "Width"
                }, function( prefix, suffix ) {
                	jQuery.cssHooks[ prefix + suffix ] = {
                		expand: function( value ) {
                			var i = 0,
                				expanded = {},
                
                				// assumes a single number if not a string
                				parts = typeof value === "string" ? value.split(" ") : [ value ];
                
                			for ( ; i < 4; i++ ) {
                				expanded[ prefix + cssExpand[ i ] + suffix ] =
                					parts[ i ] || parts[ i - 2 ] || parts[ 0 ];
                			}
                
                			return expanded;
                		}
                	};
                
                	if ( !rmargin.test( prefix ) ) {
                		jQuery.cssHooks[ prefix + suffix ].set = setPositiveNumber;
                	}
                });
                var r20 = /%20/g,
                	rbracket = /\[\]$/,
                	rCRLF = /\r?\n/g,
                	rsubmitterTypes = /^(?:submit|button|image|reset|file)$/i,
                	rsubmittable = /^(?:input|select|textarea|keygen)/i;
                
                jQuery.fn.extend({
                	serialize: function() {
                		return jQuery.param( this.serializeArray() );
                	},
                	serializeArray: function() {
                		return this.map(function(){
                			// Can add propHook for "elements" to filter or add form elements
                			var elements = jQuery.prop( this, "elements" );
                			return elements ? jQuery.makeArray( elements ) : this;
                		})
                		.filter(function(){
                			var type = this.type;
                			// Use .is(":disabled") so that fieldset[disabled] works
                			return this.name && !jQuery( this ).is( ":disabled" ) &&
                				rsubmittable.test( this.nodeName ) && !rsubmitterTypes.test( type ) &&
                				( this.checked || !manipulation_rcheckableType.test( type ) );
                		})
                		.map(function( i, elem ){
                			var val = jQuery( this ).val();
                
                			return val == null ?
                				null :
                				jQuery.isArray( val ) ?
                					jQuery.map( val, function( val ){
                						return { name: elem.name, value: val.replace( rCRLF, "\r\n" ) };
                					}) :
                					{ name: elem.name, value: val.replace( rCRLF, "\r\n" ) };
                		}).get();
                	}
                });
                
                //Serialize an array of form elements or a set of
                //key/values into a query string
                jQuery.param = function( a, traditional ) {
                	var prefix,
                		s = [],
                		add = function( key, value ) {
                			// If value is a function, invoke it and return its value
                			value = jQuery.isFunction( value ) ? value() : ( value == null ? "" : value );
                			s[ s.length ] = encodeURIComponent( key ) + "=" + encodeURIComponent( value );
                		};
                
                	// Set traditional to true for jQuery <= 1.3.2 behavior.
                	if ( traditional === undefined ) {
                		traditional = jQuery.ajaxSettings && jQuery.ajaxSettings.traditional;
                	}
                
                	// If an array was passed in, assume that it is an array of form elements.
                	if ( jQuery.isArray( a ) || ( a.jquery && !jQuery.isPlainObject( a ) ) ) {
                		// Serialize the form elements
                		jQuery.each( a, function() {
                			add( this.name, this.value );
                		});
                
                	} else {
                		// If traditional, encode the "old" way (the way 1.3.2 or older
                		// did it), otherwise encode params recursively.
                		for ( prefix in a ) {
                			buildParams( prefix, a[ prefix ], traditional, add );
                		}
                	}
                
                	// Return the resulting serialization
                	return s.join( "&" ).replace( r20, "+" );
                };
                
                function buildParams( prefix, obj, traditional, add ) {
                	var name;
                
                	if ( jQuery.isArray( obj ) ) {
                		// Serialize array item.
                		jQuery.each( obj, function( i, v ) {
                			if ( traditional || rbracket.test( prefix ) ) {
                				// Treat each array item as a scalar.
                				add( prefix, v );
                
                			} else {
                				// Item is non-scalar (array or object), encode its numeric index.
                				buildParams( prefix + "[" + ( typeof v === "object" ? i : "" ) + "]", v, traditional, add );
                			}
                		});
                
                	} else if ( !traditional && jQuery.type( obj ) === "object" ) {
                		// Serialize object item.
                		for ( name in obj ) {
                			buildParams( prefix + "[" + name + "]", obj[ name ], traditional, add );
                		}
                
                	} else {
                		// Serialize scalar item.
                		add( prefix, obj );
                	}
                }
                jQuery.each( ("blur focus focusin focusout load resize scroll unload click dblclick " +
                	"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave " +
                	"change select submit keydown keypress keyup error contextmenu").split(" "), function( i, name ) {
                
                	// Handle event binding
                	jQuery.fn[ name ] = function( data, fn ) {
                		return arguments.length > 0 ?
                			this.on( name, null, data, fn ) :
                			this.trigger( name );
                	};
                });
                
                jQuery.fn.extend({
                	hover: function( fnOver, fnOut ) {
                		return this.mouseenter( fnOver ).mouseleave( fnOut || fnOver );
                	},
                
                	bind: function( types, data, fn ) {
                		return this.on( types, null, data, fn );
                	},
                	unbind: function( types, fn ) {
                		return this.off( types, null, fn );
                	},
                
                	delegate: function( selector, types, data, fn ) {
                		return this.on( types, selector, data, fn );
                	},
                	undelegate: function( selector, types, fn ) {
                		// ( namespace ) or ( selector, types [, fn] )
                		return arguments.length === 1 ? this.off( selector, "**" ) : this.off( types, selector || "**", fn );
                	}
                });
                var
                	// Document location
                	ajaxLocParts,
                	ajaxLocation,
                
                	ajax_nonce = jQuery.now(),
                
                	ajax_rquery = /\?/,
                	rhash = /#.*$/,
                	rts = /([?&])_=[^&]*/,
                	rheaders = /^(.*?):[ \t]*([^\r\n]*)$/mg,
                	// #7653, #8125, #8152: local protocol detection
                	rlocalProtocol = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,
                	rnoContent = /^(?:GET|HEAD)$/,
                	rprotocol = /^\/\//,
                	rurl = /^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,
                
                	// Keep a copy of the old load method
                	_load = jQuery.fn.load,
                
                	/* Prefilters
                	 * 1) They are useful to introduce custom dataTypes (see ajax/jsonp.js for an example)
                	 * 2) These are called:
                	 *    - BEFORE asking for a transport
                	 *    - AFTER param serialization (s.data is a string if s.processData is true)
                	 * 3) key is the dataType
                	 * 4) the catchall symbol "*" can be used
                	 * 5) execution will start with transport dataType and THEN continue down to "*" if needed
                	 */
                	prefilters = {},
                
                	/* Transports bindings
                	 * 1) key is the dataType
                	 * 2) the catchall symbol "*" can be used
                	 * 3) selection will start with transport dataType and THEN go to "*" if needed
                	 */
                	transports = {},
                
                	// Avoid comment-prolog char sequence (#10098); must appease lint and evade compression
                	allTypes = "*/".concat("*");
                
                // #8138, IE may throw an exception when accessing
                // a field from window.location if document.domain has been set
                try {
                	ajaxLocation = location.href;
                } catch( e ) {
                	// Use the href attribute of an A element
                	// since IE will modify it given document.location
                	ajaxLocation = document.createElement( "a" );
                	ajaxLocation.href = "";
                	ajaxLocation = ajaxLocation.href;
                }
                
                // Segment location into parts
                ajaxLocParts = rurl.exec( ajaxLocation.toLowerCase() ) || [];
                
                // Base "constructor" for jQuery.ajaxPrefilter and jQuery.ajaxTransport
                function addToPrefiltersOrTransports( structure ) {
                
                	// dataTypeExpression is optional and defaults to "*"
                	return function( dataTypeExpression, func ) {
                
                		if ( typeof dataTypeExpression !== "string" ) {
                			func = dataTypeExpression;
                			dataTypeExpression = "*";
                		}
                
                		var dataType,
                			i = 0,
                			dataTypes = dataTypeExpression.toLowerCase().match( core_rnotwhite ) || [];
                
                		if ( jQuery.isFunction( func ) ) {
                			// For each dataType in the dataTypeExpression
                			while ( (dataType = dataTypes[i++]) ) {
                				// Prepend if requested
                				if ( dataType[0] === "+" ) {
                					dataType = dataType.slice( 1 ) || "*";
                					(structure[ dataType ] = structure[ dataType ] || []).unshift( func );
                
                				// Otherwise append
                				} else {
                					(structure[ dataType ] = structure[ dataType ] || []).push( func );
                				}
                			}
                		}
                	};
                }
                
                // Base inspection function for prefilters and transports
                function inspectPrefiltersOrTransports( structure, options, originalOptions, jqXHR ) {
                
                	var inspected = {},
                		seekingTransport = ( structure === transports );
                
                	function inspect( dataType ) {
                		var selected;
                		inspected[ dataType ] = true;
                		jQuery.each( structure[ dataType ] || [], function( _, prefilterOrFactory ) {
                			var dataTypeOrTransport = prefilterOrFactory( options, originalOptions, jqXHR );
                			if( typeof dataTypeOrTransport === "string" && !seekingTransport && !inspected[ dataTypeOrTransport ] ) {
                				options.dataTypes.unshift( dataTypeOrTransport );
                				inspect( dataTypeOrTransport );
                				return false;
                			} else if ( seekingTransport ) {
                				return !( selected = dataTypeOrTransport );
                			}
                		});
                		return selected;
                	}
                
                	return inspect( options.dataTypes[ 0 ] ) || !inspected[ "*" ] && inspect( "*" );
                }
                
                // A special extend for ajax options
                // that takes "flat" options (not to be deep extended)
                // Fixes #9887
                function ajaxExtend( target, src ) {
                	var key, deep,
                		flatOptions = jQuery.ajaxSettings.flatOptions || {};
                
                	for ( key in src ) {
                		if ( src[ key ] !== undefined ) {
                			( flatOptions[ key ] ? target : ( deep || (deep = {}) ) )[ key ] = src[ key ];
                		}
                	}
                	if ( deep ) {
                		jQuery.extend( true, target, deep );
                	}
                
                	return target;
                }
                
                jQuery.fn.load = function( url, params, callback ) {
                	if ( typeof url !== "string" && _load ) {
                		return _load.apply( this, arguments );
                	}
                
                	var selector, type, response,
                		self = this,
                		off = url.indexOf(" ");
                
                	if ( off >= 0 ) {
                		selector = url.slice( off );
                		url = url.slice( 0, off );
                	}
                
                	// If it's a function
                	if ( jQuery.isFunction( params ) ) {
                
                		// We assume that it's the callback
                		callback = params;
                		params = undefined;
                
                	// Otherwise, build a param string
                	} else if ( params && typeof params === "object" ) {
                		type = "POST";
                	}
                
                	// If we have elements to modify, make the request
                	if ( self.length > 0 ) {
                		jQuery.ajax({
                			url: url,
                
                			// if "type" variable is undefined, then "GET" method will be used
                			type: type,
                			dataType: "html",
                			data: params
                		}).done(function( responseText ) {
                
                			// Save response for use in complete callback
                			response = arguments;
                
                			self.html( selector ?
                
                				// If a selector was specified, locate the right elements in a dummy div
                				// Exclude scripts to avoid IE 'Permission Denied' errors
                				jQuery("<div>").append( jQuery.parseHTML( responseText ) ).find( selector ) :
                
                				// Otherwise use the full result
                				responseText );
                
                		}).complete( callback && function( jqXHR, status ) {
                			self.each( callback, response || [ jqXHR.responseText, status, jqXHR ] );
                		});
                	}
                
                	return this;
                };
                
                // Attach a bunch of functions for handling common AJAX events
                jQuery.each( [ "ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend" ], function( i, type ){
                	jQuery.fn[ type ] = function( fn ){
                		return this.on( type, fn );
                	};
                });
                
                jQuery.extend({
                
                	// Counter for holding the number of active queries
                	active: 0,
                
                	// Last-Modified header cache for next request
                	lastModified: {},
                	etag: {},
                
                	ajaxSettings: {
                		url: ajaxLocation,
                		type: "GET",
                		isLocal: rlocalProtocol.test( ajaxLocParts[ 1 ] ),
                		global: true,
                		processData: true,
                		async: true,
                		contentType: "application/x-www-form-urlencoded; charset=UTF-8",
                		/*
                		timeout: 0,
                		data: null,
                		dataType: null,
                		username: null,
                		password: null,
                		cache: null,
                		throws: false,
                		traditional: false,
                		headers: {},
                		*/
                
                		accepts: {
                			"*": allTypes,
                			text: "text/plain",
                			html: "text/html",
                			xml: "application/xml, text/xml",
                			json: "application/json, text/javascript"
                		},
                
                		contents: {
                			xml: /xml/,
                			html: /html/,
                			json: /json/
                		},
                
                		responseFields: {
                			xml: "responseXML",
                			text: "responseText",
                			json: "responseJSON"
                		},
                
                		// Data converters
                		// Keys separate source (or catchall "*") and destination types with a single space
                		converters: {
                
                			// Convert anything to text
                			"* text": String,
                
                			// Text to html (true = no transformation)
                			"text html": true,
                
                			// Evaluate text as a json expression
                			"text json": jQuery.parseJSON,
                
                			// Parse text as xml
                			"text xml": jQuery.parseXML
                		},
                
                		// For options that shouldn't be deep extended:
                		// you can add your own custom options here if
                		// and when you create one that shouldn't be
                		// deep extended (see ajaxExtend)
                		flatOptions: {
                			url: true,
                			context: true
                		}
                	},
                
                	// Creates a full fledged settings object into target
                	// with both ajaxSettings and settings fields.
                	// If target is omitted, writes into ajaxSettings.
                	ajaxSetup: function( target, settings ) {
                		return settings ?
                
                			// Building a settings object
                			ajaxExtend( ajaxExtend( target, jQuery.ajaxSettings ), settings ) :
                
                			// Extending ajaxSettings
                			ajaxExtend( jQuery.ajaxSettings, target );
                	},
                
                	ajaxPrefilter: addToPrefiltersOrTransports( prefilters ),
                	ajaxTransport: addToPrefiltersOrTransports( transports ),
                
                	// Main method
                	ajax: function( url, options ) {
                
                		// If url is an object, simulate pre-1.5 signature
                		if ( typeof url === "object" ) {
                			options = url;
                			url = undefined;
                		}
                
                		// Force options to be an object
                		options = options || {};
                
                		var transport,
                			// URL without anti-cache param
                			cacheURL,
                			// Response headers
                			responseHeadersString,
                			responseHeaders,
                			// timeout handle
                			timeoutTimer,
                			// Cross-domain detection vars
                			parts,
                			// To know if global events are to be dispatched
                			fireGlobals,
                			// Loop variable
                			i,
                			// Create the final options object
                			s = jQuery.ajaxSetup( {}, options ),
                			// Callbacks context
                			callbackContext = s.context || s,
                			// Context for global events is callbackContext if it is a DOM node or jQuery collection
                			globalEventContext = s.context && ( callbackContext.nodeType || callbackContext.jquery ) ?
                				jQuery( callbackContext ) :
                				jQuery.event,
                			// Deferreds
                			deferred = jQuery.Deferred(),
                			completeDeferred = jQuery.Callbacks("once memory"),
                			// Status-dependent callbacks
                			statusCode = s.statusCode || {},
                			// Headers (they are sent all at once)
                			requestHeaders = {},
                			requestHeadersNames = {},
                			// The jqXHR state
                			state = 0,
                			// Default abort message
                			strAbort = "canceled",
                			// Fake xhr
                			jqXHR = {
                				readyState: 0,
                
                				// Builds headers hashtable if needed
                				getResponseHeader: function( key ) {
                					var match;
                					if ( state === 2 ) {
                						if ( !responseHeaders ) {
                							responseHeaders = {};
                							while ( (match = rheaders.exec( responseHeadersString )) ) {
                								responseHeaders[ match[1].toLowerCase() ] = match[ 2 ];
                							}
                						}
                						match = responseHeaders[ key.toLowerCase() ];
                					}
                					return match == null ? null : match;
                				},
                
                				// Raw string
                				getAllResponseHeaders: function() {
                					return state === 2 ? responseHeadersString : null;
                				},
                
                				// Caches the header
                				setRequestHeader: function( name, value ) {
                					var lname = name.toLowerCase();
                					if ( !state ) {
                						name = requestHeadersNames[ lname ] = requestHeadersNames[ lname ] || name;
                						requestHeaders[ name ] = value;
                					}
                					return this;
                				},
                
                				// Overrides response content-type header
                				overrideMimeType: function( type ) {
                					if ( !state ) {
                						s.mimeType = type;
                					}
                					return this;
                				},
                
                				// Status-dependent callbacks
                				statusCode: function( map ) {
                					var code;
                					if ( map ) {
                						if ( state < 2 ) {
                							for ( code in map ) {
                								// Lazy-add the new callback in a way that preserves old ones
                								statusCode[ code ] = [ statusCode[ code ], map[ code ] ];
                							}
                						} else {
                							// Execute the appropriate callbacks
                							jqXHR.always( map[ jqXHR.status ] );
                						}
                					}
                					return this;
                				},
                
                				// Cancel the request
                				abort: function( statusText ) {
                					var finalText = statusText || strAbort;
                					if ( transport ) {
                						transport.abort( finalText );
                					}
                					done( 0, finalText );
                					return this;
                				}
                			};
                
                		// Attach deferreds
                		deferred.promise( jqXHR ).complete = completeDeferred.add;
                		jqXHR.success = jqXHR.done;
                		jqXHR.error = jqXHR.fail;
                
                		// Remove hash character (#7531: and string promotion)
                		// Add protocol if not provided (prefilters might expect it)
                		// Handle falsy url in the settings object (#10093: consistency with old signature)
                		// We also use the url parameter if available
                		s.url = ( ( url || s.url || ajaxLocation ) + "" ).replace( rhash, "" )
                			.replace( rprotocol, ajaxLocParts[ 1 ] + "//" );
                
                		// Alias method option to type as per ticket #12004
                		s.type = options.method || options.type || s.method || s.type;
                
                		// Extract dataTypes list
                		s.dataTypes = jQuery.trim( s.dataType || "*" ).toLowerCase().match( core_rnotwhite ) || [""];
                
                		// A cross-domain request is in order when we have a protocol:host:port mismatch
                		if ( s.crossDomain == null ) {
                			parts = rurl.exec( s.url.toLowerCase() );
                			s.crossDomain = !!( parts &&
                				( parts[ 1 ] !== ajaxLocParts[ 1 ] || parts[ 2 ] !== ajaxLocParts[ 2 ] ||
                					( parts[ 3 ] || ( parts[ 1 ] === "http:" ? "80" : "443" ) ) !==
                						( ajaxLocParts[ 3 ] || ( ajaxLocParts[ 1 ] === "http:" ? "80" : "443" ) ) )
                			);
                		}
                
                		// Convert data if not already a string
                		if ( s.data && s.processData && typeof s.data !== "string" ) {
                			s.data = jQuery.param( s.data, s.traditional );
                		}
                
                		// Apply prefilters
                		inspectPrefiltersOrTransports( prefilters, s, options, jqXHR );
                
                		// If request was aborted inside a prefilter, stop there
                		if ( state === 2 ) {
                			return jqXHR;
                		}
                
                		// We can fire global events as of now if asked to
                		fireGlobals = s.global;
                
                		// Watch for a new set of requests
                		if ( fireGlobals && jQuery.active++ === 0 ) {
                			jQuery.event.trigger("ajaxStart");
                		}
                
                		// Uppercase the type
                		s.type = s.type.toUpperCase();
                
                		// Determine if request has content
                		s.hasContent = !rnoContent.test( s.type );
                
                		// Save the URL in case we're toying with the If-Modified-Since
                		// and/or If-None-Match header later on
                		cacheURL = s.url;
                
                		// More options handling for requests with no content
                		if ( !s.hasContent ) {
                
                			// If data is available, append data to url
                			if ( s.data ) {
                				cacheURL = ( s.url += ( ajax_rquery.test( cacheURL ) ? "&" : "?" ) + s.data );
                				// #9682: remove data so that it's not used in an eventual retry
                				delete s.data;
                			}
                
                			// Add anti-cache in url if needed
                			if ( s.cache === false ) {
                				s.url = rts.test( cacheURL ) ?
                
                					// If there is already a '_' parameter, set its value
                					cacheURL.replace( rts, "$1_=" + ajax_nonce++ ) :
                
                					// Otherwise add one to the end
                					cacheURL + ( ajax_rquery.test( cacheURL ) ? "&" : "?" ) + "_=" + ajax_nonce++;
                			}
                		}
                
                		// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.
                		if ( s.ifModified ) {
                			if ( jQuery.lastModified[ cacheURL ] ) {
                				jqXHR.setRequestHeader( "If-Modified-Since", jQuery.lastModified[ cacheURL ] );
                			}
                			if ( jQuery.etag[ cacheURL ] ) {
                				jqXHR.setRequestHeader( "If-None-Match", jQuery.etag[ cacheURL ] );
                			}
                		}
                
                		// Set the correct header, if data is being sent
                		if ( s.data && s.hasContent && s.contentType !== false || options.contentType ) {
                			jqXHR.setRequestHeader( "Content-Type", s.contentType );
                		}
                
                		// Set the Accepts header for the server, depending on the dataType
                		jqXHR.setRequestHeader(
                			"Accept",
                			s.dataTypes[ 0 ] && s.accepts[ s.dataTypes[0] ] ?
                				s.accepts[ s.dataTypes[0] ] + ( s.dataTypes[ 0 ] !== "*" ? ", " + allTypes + "; q=0.01" : "" ) :
                				s.accepts[ "*" ]
                		);
                
                		// Check for headers option
                		for ( i in s.headers ) {
                			jqXHR.setRequestHeader( i, s.headers[ i ] );
                		}
                
                		// Allow custom headers/mimetypes and early abort
                		if ( s.beforeSend && ( s.beforeSend.call( callbackContext, jqXHR, s ) === false || state === 2 ) ) {
                			// Abort if not done already and return
                			return jqXHR.abort();
                		}
                
                		// aborting is no longer a cancellation
                		strAbort = "abort";
                
                		// Install callbacks on deferreds
                		for ( i in { success: 1, error: 1, complete: 1 } ) {
                			jqXHR[ i ]( s[ i ] );
                		}
                
                		// Get transport
                		transport = inspectPrefiltersOrTransports( transports, s, options, jqXHR );
                
                		// If no transport, we auto-abort
                		if ( !transport ) {
                			done( -1, "No Transport" );
                		} else {
                			jqXHR.readyState = 1;
                
                			// Send global event
                			if ( fireGlobals ) {
                				globalEventContext.trigger( "ajaxSend", [ jqXHR, s ] );
                			}
                			// Timeout
                			if ( s.async && s.timeout > 0 ) {
                				timeoutTimer = setTimeout(function() {
                					jqXHR.abort("timeout");
                				}, s.timeout );
                			}
                
                			try {
                				state = 1;
                				transport.send( requestHeaders, done );
                			} catch ( e ) {
                				// Propagate exception as error if not done
                				if ( state < 2 ) {
                					done( -1, e );
                				// Simply rethrow otherwise
                				} else {
                					throw e;
                				}
                			}
                		}
                
                		// Callback for when everything is done
                		function done( status, nativeStatusText, responses, headers ) {
                			var isSuccess, success, error, response, modified,
                				statusText = nativeStatusText;
                
                			// Called once
                			if ( state === 2 ) {
                				return;
                			}
                
                			// State is "done" now
                			state = 2;
                
                			// Clear timeout if it exists
                			if ( timeoutTimer ) {
                				clearTimeout( timeoutTimer );
                			}
                
                			// Dereference transport for early garbage collection
                			// (no matter how long the jqXHR object will be used)
                			transport = undefined;
                
                			// Cache response headers
                			responseHeadersString = headers || "";
                
                			// Set readyState
                			jqXHR.readyState = status > 0 ? 4 : 0;
                
                			// Determine if successful
                			isSuccess = status >= 200 && status < 300 || status === 304;
                
                			// Get response data
                			if ( responses ) {
                				response = ajaxHandleResponses( s, jqXHR, responses );
                			}
                
                			// Convert no matter what (that way responseXXX fields are always set)
                			response = ajaxConvert( s, response, jqXHR, isSuccess );
                
                			// If successful, handle type chaining
                			if ( isSuccess ) {
                
                				// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.
                				if ( s.ifModified ) {
                					modified = jqXHR.getResponseHeader("Last-Modified");
                					if ( modified ) {
                						jQuery.lastModified[ cacheURL ] = modified;
                					}
                					modified = jqXHR.getResponseHeader("etag");
                					if ( modified ) {
                						jQuery.etag[ cacheURL ] = modified;
                					}
                				}
                
                				// if no content
                				if ( status === 204 || s.type === "HEAD" ) {
                					statusText = "nocontent";
                
                				// if not modified
                				} else if ( status === 304 ) {
                					statusText = "notmodified";
                
                				// If we have data, let's convert it
                				} else {
                					statusText = response.state;
                					success = response.data;
                					error = response.error;
                					isSuccess = !error;
                				}
                			} else {
                				// We extract error from statusText
                				// then normalize statusText and status for non-aborts
                				error = statusText;
                				if ( status || !statusText ) {
                					statusText = "error";
                					if ( status < 0 ) {
                						status = 0;
                					}
                				}
                			}
                
                			// Set data for the fake xhr object
                			jqXHR.status = status;
                			jqXHR.statusText = ( nativeStatusText || statusText ) + "";
                
                			// Success/Error
                			if ( isSuccess ) {
                				deferred.resolveWith( callbackContext, [ success, statusText, jqXHR ] );
                			} else {
                				deferred.rejectWith( callbackContext, [ jqXHR, statusText, error ] );
                			}
                
                			// Status-dependent callbacks
                			jqXHR.statusCode( statusCode );
                			statusCode = undefined;
                
                			if ( fireGlobals ) {
                				globalEventContext.trigger( isSuccess ? "ajaxSuccess" : "ajaxError",
                					[ jqXHR, s, isSuccess ? success : error ] );
                			}
                
                			// Complete
                			completeDeferred.fireWith( callbackContext, [ jqXHR, statusText ] );
                
                			if ( fireGlobals ) {
                				globalEventContext.trigger( "ajaxComplete", [ jqXHR, s ] );
                				// Handle the global AJAX counter
                				if ( !( --jQuery.active ) ) {
                					jQuery.event.trigger("ajaxStop");
                				}
                			}
                		}
                
                		return jqXHR;
                	},
                
                	getJSON: function( url, data, callback ) {
                		return jQuery.get( url, data, callback, "json" );
                	},
                
                	getScript: function( url, callback ) {
                		return jQuery.get( url, undefined, callback, "script" );
                	}
                });
                
                jQuery.each( [ "get", "post" ], function( i, method ) {
                	jQuery[ method ] = function( url, data, callback, type ) {
                		// shift arguments if data argument was omitted
                		if ( jQuery.isFunction( data ) ) {
                			type = type || callback;
                			callback = data;
                			data = undefined;
                		}
                
                		return jQuery.ajax({
                			url: url,
                			type: method,
                			dataType: type,
                			data: data,
                			success: callback
                		});
                	};
                });
                
                /* Handles responses to an ajax request:
                 * - finds the right dataType (mediates between content-type and expected dataType)
                 * - returns the corresponding response
                 */
                function ajaxHandleResponses( s, jqXHR, responses ) {
                
                	var ct, type, finalDataType, firstDataType,
                		contents = s.contents,
                		dataTypes = s.dataTypes;
                
                	// Remove auto dataType and get content-type in the process
                	while( dataTypes[ 0 ] === "*" ) {
                		dataTypes.shift();
                		if ( ct === undefined ) {
                			ct = s.mimeType || jqXHR.getResponseHeader("Content-Type");
                		}
                	}
                
                	// Check if we're dealing with a known content-type
                	if ( ct ) {
                		for ( type in contents ) {
                			if ( contents[ type ] && contents[ type ].test( ct ) ) {
                				dataTypes.unshift( type );
                				break;
                			}
                		}
                	}
                
                	// Check to see if we have a response for the expected dataType
                	if ( dataTypes[ 0 ] in responses ) {
                		finalDataType = dataTypes[ 0 ];
                	} else {
                		// Try convertible dataTypes
                		for ( type in responses ) {
                			if ( !dataTypes[ 0 ] || s.converters[ type + " " + dataTypes[0] ] ) {
                				finalDataType = type;
                				break;
                			}
                			if ( !firstDataType ) {
                				firstDataType = type;
                			}
                		}
                		// Or just use first one
                		finalDataType = finalDataType || firstDataType;
                	}
                
                	// If we found a dataType
                	// We add the dataType to the list if needed
                	// and return the corresponding response
                	if ( finalDataType ) {
                		if ( finalDataType !== dataTypes[ 0 ] ) {
                			dataTypes.unshift( finalDataType );
                		}
                		return responses[ finalDataType ];
                	}
                }
                
                /* Chain conversions given the request and the original response
                 * Also sets the responseXXX fields on the jqXHR instance
                 */
                function ajaxConvert( s, response, jqXHR, isSuccess ) {
                	var conv2, current, conv, tmp, prev,
                		converters = {},
                		// Work with a copy of dataTypes in case we need to modify it for conversion
                		dataTypes = s.dataTypes.slice();
                
                	// Create converters map with lowercased keys
                	if ( dataTypes[ 1 ] ) {
                		for ( conv in s.converters ) {
                			converters[ conv.toLowerCase() ] = s.converters[ conv ];
                		}
                	}
                
                	current = dataTypes.shift();
                
                	// Convert to each sequential dataType
                	while ( current ) {
                
                		if ( s.responseFields[ current ] ) {
                			jqXHR[ s.responseFields[ current ] ] = response;
                		}
                
                		// Apply the dataFilter if provided
                		if ( !prev && isSuccess && s.dataFilter ) {
                			response = s.dataFilter( response, s.dataType );
                		}
                
                		prev = current;
                		current = dataTypes.shift();
                
                		if ( current ) {
                
                		// There's only work to do if current dataType is non-auto
                			if ( current === "*" ) {
                
                				current = prev;
                
                			// Convert response if prev dataType is non-auto and differs from current
                			} else if ( prev !== "*" && prev !== current ) {
                
                				// Seek a direct converter
                				conv = converters[ prev + " " + current ] || converters[ "* " + current ];
                
                				// If none found, seek a pair
                				if ( !conv ) {
                					for ( conv2 in converters ) {
                
                						// If conv2 outputs current
                						tmp = conv2.split( " " );
                						if ( tmp[ 1 ] === current ) {
                
                							// If prev can be converted to accepted input
                							conv = converters[ prev + " " + tmp[ 0 ] ] ||
                								converters[ "* " + tmp[ 0 ] ];
                							if ( conv ) {
                								// Condense equivalence converters
                								if ( conv === true ) {
                									conv = converters[ conv2 ];
                
                								// Otherwise, insert the intermediate dataType
                								} else if ( converters[ conv2 ] !== true ) {
                									current = tmp[ 0 ];
                									dataTypes.unshift( tmp[ 1 ] );
                								}
                								break;
                							}
                						}
                					}
                				}
                
                				// Apply converter (if not an equivalence)
                				if ( conv !== true ) {
                
                					// Unless errors are allowed to bubble, catch and return them
                					if ( conv && s[ "throws" ] ) {
                						response = conv( response );
                					} else {
                						try {
                							response = conv( response );
                						} catch ( e ) {
                							return { state: "parsererror", error: conv ? e : "No conversion from " + prev + " to " + current };
                						}
                					}
                				}
                			}
                		}
                	}
                
                	return { state: "success", data: response };
                }
                // Install script dataType
                jQuery.ajaxSetup({
                	accepts: {
                		script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
                	},
                	contents: {
                		script: /(?:java|ecma)script/
                	},
                	converters: {
                		"text script": function( text ) {
                			jQuery.globalEval( text );
                			return text;
                		}
                	}
                });
                
                // Handle cache's special case and crossDomain
                jQuery.ajaxPrefilter( "script", function( s ) {
                	if ( s.cache === undefined ) {
                		s.cache = false;
                	}
                	if ( s.crossDomain ) {
                		s.type = "GET";
                	}
                });
                
                // Bind script tag hack transport
                jQuery.ajaxTransport( "script", function( s ) {
                	// This transport only deals with cross domain requests
                	if ( s.crossDomain ) {
                		var script, callback;
                		return {
                			send: function( _, complete ) {
                				script = jQuery("<script>").prop({
                					async: true,
                					charset: s.scriptCharset,
                					src: s.url
                				}).on(
                					"load error",
                					callback = function( evt ) {
                						script.remove();
                						callback = null;
                						if ( evt ) {
                							complete( evt.type === "error" ? 404 : 200, evt.type );
                						}
                					}
                				);
                				document.head.appendChild( script[ 0 ] );
                			},
                			abort: function() {
                				if ( callback ) {
                					callback();
                				}
                			}
                		};
                	}
                });
                var oldCallbacks = [],
                	rjsonp = /(=)\?(?=&|$)|\?\?/;
                
                // Default jsonp settings
                jQuery.ajaxSetup({
                	jsonp: "callback",
                	jsonpCallback: function() {
                		var callback = oldCallbacks.pop() || ( jQuery.expando + "_" + ( ajax_nonce++ ) );
                		this[ callback ] = true;
                		return callback;
                	}
                });
                
                // Detect, normalize options and install callbacks for jsonp requests
                jQuery.ajaxPrefilter( "json jsonp", function( s, originalSettings, jqXHR ) {
                
                	var callbackName, overwritten, responseContainer,
                		jsonProp = s.jsonp !== false && ( rjsonp.test( s.url ) ?
                			"url" :
                			typeof s.data === "string" && !( s.contentType || "" ).indexOf("application/x-www-form-urlencoded") && rjsonp.test( s.data ) && "data"
                		);
                
                	// Handle iff the expected data type is "jsonp" or we have a parameter to set
                	if ( jsonProp || s.dataTypes[ 0 ] === "jsonp" ) {
                
                		// Get callback name, remembering preexisting value associated with it
                		callbackName = s.jsonpCallback = jQuery.isFunction( s.jsonpCallback ) ?
                			s.jsonpCallback() :
                			s.jsonpCallback;
                
                		// Insert callback into url or form data
                		if ( jsonProp ) {
                			s[ jsonProp ] = s[ jsonProp ].replace( rjsonp, "$1" + callbackName );
                		} else if ( s.jsonp !== false ) {
                			s.url += ( ajax_rquery.test( s.url ) ? "&" : "?" ) + s.jsonp + "=" + callbackName;
                		}
                
                		// Use data converter to retrieve json after script execution
                		s.converters["script json"] = function() {
                			if ( !responseContainer ) {
                				jQuery.error( callbackName + " was not called" );
                			}
                			return responseContainer[ 0 ];
                		};
                
                		// force json dataType
                		s.dataTypes[ 0 ] = "json";
                
                		// Install callback
                		overwritten = window[ callbackName ];
                		window[ callbackName ] = function() {
                			responseContainer = arguments;
                		};
                
                		// Clean-up function (fires after converters)
                		jqXHR.always(function() {
                			// Restore preexisting value
                			window[ callbackName ] = overwritten;
                
                			// Save back as free
                			if ( s[ callbackName ] ) {
                				// make sure that re-using the options doesn't screw things around
                				s.jsonpCallback = originalSettings.jsonpCallback;
                
                				// save the callback name for future use
                				oldCallbacks.push( callbackName );
                			}
                
                			// Call if it was a function and we have a response
                			if ( responseContainer && jQuery.isFunction( overwritten ) ) {
                				overwritten( responseContainer[ 0 ] );
                			}
                
                			responseContainer = overwritten = undefined;
                		});
                
                		// Delegate to script
                		return "script";
                	}
                });
                jQuery.ajaxSettings.xhr = function() {
                	try {
                		return new XMLHttpRequest();
                	} catch( e ) {}
                };
                
                var xhrSupported = jQuery.ajaxSettings.xhr(),
                	xhrSuccessStatus = {
                		// file protocol always yields status code 0, assume 200
                		0: 200,
                		// Support: IE9
                		// #1450: sometimes IE returns 1223 when it should be 204
                		1223: 204
                	},
                	// Support: IE9
                	// We need to keep track of outbound xhr and abort them manually
                	// because IE is not smart enough to do it all by itself
                	xhrId = 0,
                	xhrCallbacks = {};
                
                if ( window.ActiveXObject ) {
                	jQuery( window ).on( "unload", function() {
                		for( var key in xhrCallbacks ) {
                			xhrCallbacks[ key ]();
                		}
                		xhrCallbacks = undefined;
                	});
                }
                
                jQuery.support.cors = !!xhrSupported && ( "withCredentials" in xhrSupported );
                jQuery.support.ajax = xhrSupported = !!xhrSupported;
                
                jQuery.ajaxTransport(function( options ) {
                	var callback;
                	// Cross domain only allowed if supported through XMLHttpRequest
                	if ( jQuery.support.cors || xhrSupported && !options.crossDomain ) {
                		return {
                			send: function( headers, complete ) {
                				var i, id,
                					xhr = options.xhr();
                				xhr.open( options.type, options.url, options.async, options.username, options.password );
                				// Apply custom fields if provided
                				if ( options.xhrFields ) {
                					for ( i in options.xhrFields ) {
                						xhr[ i ] = options.xhrFields[ i ];
                					}
                				}
                				// Override mime type if needed
                				if ( options.mimeType && xhr.overrideMimeType ) {
                					xhr.overrideMimeType( options.mimeType );
                				}
                				// X-Requested-With header
                				// For cross-domain requests, seeing as conditions for a preflight are
                				// akin to a jigsaw puzzle, we simply never set it to be sure.
                				// (it can always be set on a per-request basis or even using ajaxSetup)
                				// For same-domain requests, won't change header if already provided.
                				if ( !options.crossDomain && !headers["X-Requested-With"] ) {
                					headers["X-Requested-With"] = "XMLHttpRequest";
                				}
                				// Set headers
                				for ( i in headers ) {
                					xhr.setRequestHeader( i, headers[ i ] );
                				}
                				// Callback
                				callback = function( type ) {
                					return function() {
                						if ( callback ) {
                							delete xhrCallbacks[ id ];
                							callback = xhr.onload = xhr.onerror = null;
                							if ( type === "abort" ) {
                								xhr.abort();
                							} else if ( type === "error" ) {
                								complete(
                									// file protocol always yields status 0, assume 404
                									xhr.status || 404,
                									xhr.statusText
                								);
                							} else {
                								complete(
                									xhrSuccessStatus[ xhr.status ] || xhr.status,
                									xhr.statusText,
                									// Support: IE9
                									// #11426: When requesting binary data, IE9 will throw an exception
                									// on any attempt to access responseText
                									typeof xhr.responseText === "string" ? {
                										text: xhr.responseText
                									} : undefined,
                									xhr.getAllResponseHeaders()
                								);
                							}
                						}
                					};
                				};
                				// Listen to events
                				xhr.onload = callback();
                				xhr.onerror = callback("error");
                				// Create the abort callback
                				callback = xhrCallbacks[( id = xhrId++ )] = callback("abort");
                				// Do send the request
                				// This may raise an exception which is actually
                				// handled in jQuery.ajax (so no try/catch here)
                				xhr.send( options.hasContent && options.data || null );
                			},
                			abort: function() {
                				if ( callback ) {
                					callback();
                				}
                			}
                		};
                	}
                });
                var fxNow, timerId,
                	rfxtypes = /^(?:toggle|show|hide)$/,
                	rfxnum = new RegExp( "^(?:([+-])=|)(" + core_pnum + ")([a-z%]*)$", "i" ),
                	rrun = /queueHooks$/,
                	animationPrefilters = [ defaultPrefilter ],
                	tweeners = {
                		"*": [function( prop, value ) {
                			var tween = this.createTween( prop, value ),
                				target = tween.cur(),
                				parts = rfxnum.exec( value ),
                				unit = parts && parts[ 3 ] || ( jQuery.cssNumber[ prop ] ? "" : "px" ),
                
                				// Starting value computation is required for potential unit mismatches
                				start = ( jQuery.cssNumber[ prop ] || unit !== "px" && +target ) &&
                					rfxnum.exec( jQuery.css( tween.elem, prop ) ),
                				scale = 1,
                				maxIterations = 20;
                
                			if ( start && start[ 3 ] !== unit ) {
                				// Trust units reported by jQuery.css
                				unit = unit || start[ 3 ];
                
                				// Make sure we update the tween properties later on
                				parts = parts || [];
                
                				// Iteratively approximate from a nonzero starting point
                				start = +target || 1;
                
                				do {
                					// If previous iteration zeroed out, double until we get *something*
                					// Use a string for doubling factor so we don't accidentally see scale as unchanged below
                					scale = scale || ".5";
                
                					// Adjust and apply
                					start = start / scale;
                					jQuery.style( tween.elem, prop, start + unit );
                
                				// Update scale, tolerating zero or NaN from tween.cur()
                				// And breaking the loop if scale is unchanged or perfect, or if we've just had enough
                				} while ( scale !== (scale = tween.cur() / target) && scale !== 1 && --maxIterations );
                			}
                
                			// Update tween properties
                			if ( parts ) {
                				start = tween.start = +start || +target || 0;
                				tween.unit = unit;
                				// If a +=/-= token was provided, we're doing a relative animation
                				tween.end = parts[ 1 ] ?
                					start + ( parts[ 1 ] + 1 ) * parts[ 2 ] :
                					+parts[ 2 ];
                			}
                
                			return tween;
                		}]
                	};
                
                // Animations created synchronously will run synchronously
                function createFxNow() {
                	setTimeout(function() {
                		fxNow = undefined;
                	});
                	return ( fxNow = jQuery.now() );
                }
                
                function createTween( value, prop, animation ) {
                	var tween,
                		collection = ( tweeners[ prop ] || [] ).concat( tweeners[ "*" ] ),
                		index = 0,
                		length = collection.length;
                	for ( ; index < length; index++ ) {
                		if ( (tween = collection[ index ].call( animation, prop, value )) ) {
                
                			// we're done with this property
                			return tween;
                		}
                	}
                }
                
                function Animation( elem, properties, options ) {
                	var result,
                		stopped,
                		index = 0,
                		length = animationPrefilters.length,
                		deferred = jQuery.Deferred().always( function() {
                			// don't match elem in the :animated selector
                			delete tick.elem;
                		}),
                		tick = function() {
                			if ( stopped ) {
                				return false;
                			}
                			var currentTime = fxNow || createFxNow(),
                				remaining = Math.max( 0, animation.startTime + animation.duration - currentTime ),
                				// archaic crash bug won't allow us to use 1 - ( 0.5 || 0 ) (#12497)
                				temp = remaining / animation.duration || 0,
                				percent = 1 - temp,
                				index = 0,
                				length = animation.tweens.length;
                
                			for ( ; index < length ; index++ ) {
                				animation.tweens[ index ].run( percent );
                			}
                
                			deferred.notifyWith( elem, [ animation, percent, remaining ]);
                
                			if ( percent < 1 && length ) {
                				return remaining;
                			} else {
                				deferred.resolveWith( elem, [ animation ] );
                				return false;
                			}
                		},
                		animation = deferred.promise({
                			elem: elem,
                			props: jQuery.extend( {}, properties ),
                			opts: jQuery.extend( true, { specialEasing: {} }, options ),
                			originalProperties: properties,
                			originalOptions: options,
                			startTime: fxNow || createFxNow(),
                			duration: options.duration,
                			tweens: [],
                			createTween: function( prop, end ) {
                				var tween = jQuery.Tween( elem, animation.opts, prop, end,
                						animation.opts.specialEasing[ prop ] || animation.opts.easing );
                				animation.tweens.push( tween );
                				return tween;
                			},
                			stop: function( gotoEnd ) {
                				var index = 0,
                					// if we are going to the end, we want to run all the tweens
                					// otherwise we skip this part
                					length = gotoEnd ? animation.tweens.length : 0;
                				if ( stopped ) {
                					return this;
                				}
                				stopped = true;
                				for ( ; index < length ; index++ ) {
                					animation.tweens[ index ].run( 1 );
                				}
                
                				// resolve when we played the last frame
                				// otherwise, reject
                				if ( gotoEnd ) {
                					deferred.resolveWith( elem, [ animation, gotoEnd ] );
                				} else {
                					deferred.rejectWith( elem, [ animation, gotoEnd ] );
                				}
                				return this;
                			}
                		}),
                		props = animation.props;
                
                	propFilter( props, animation.opts.specialEasing );
                
                	for ( ; index < length ; index++ ) {
                		result = animationPrefilters[ index ].call( animation, elem, props, animation.opts );
                		if ( result ) {
                			return result;
                		}
                	}
                
                	jQuery.map( props, createTween, animation );
                
                	if ( jQuery.isFunction( animation.opts.start ) ) {
                		animation.opts.start.call( elem, animation );
                	}
                
                	jQuery.fx.timer(
                		jQuery.extend( tick, {
                			elem: elem,
                			anim: animation,
                			queue: animation.opts.queue
                		})
                	);
                
                	// attach callbacks from options
                	return animation.progress( animation.opts.progress )
                		.done( animation.opts.done, animation.opts.complete )
                		.fail( animation.opts.fail )
                		.always( animation.opts.always );
                }
                
                function propFilter( props, specialEasing ) {
                	var index, name, easing, value, hooks;
                
                	// camelCase, specialEasing and expand cssHook pass
                	for ( index in props ) {
                		name = jQuery.camelCase( index );
                		easing = specialEasing[ name ];
                		value = props[ index ];
                		if ( jQuery.isArray( value ) ) {
                			easing = value[ 1 ];
                			value = props[ index ] = value[ 0 ];
                		}
                
                		if ( index !== name ) {
                			props[ name ] = value;
                			delete props[ index ];
                		}
                
                		hooks = jQuery.cssHooks[ name ];
                		if ( hooks && "expand" in hooks ) {
                			value = hooks.expand( value );
                			delete props[ name ];
                
                			// not quite $.extend, this wont overwrite keys already present.
                			// also - reusing 'index' from above because we have the correct "name"
                			for ( index in value ) {
                				if ( !( index in props ) ) {
                					props[ index ] = value[ index ];
                					specialEasing[ index ] = easing;
                				}
                			}
                		} else {
                			specialEasing[ name ] = easing;
                		}
                	}
                }
                
                jQuery.Animation = jQuery.extend( Animation, {
                
                	tweener: function( props, callback ) {
                		if ( jQuery.isFunction( props ) ) {
                			callback = props;
                			props = [ "*" ];
                		} else {
                			props = props.split(" ");
                		}
                
                		var prop,
                			index = 0,
                			length = props.length;
                
                		for ( ; index < length ; index++ ) {
                			prop = props[ index ];
                			tweeners[ prop ] = tweeners[ prop ] || [];
                			tweeners[ prop ].unshift( callback );
                		}
                	},
                
                	prefilter: function( callback, prepend ) {
                		if ( prepend ) {
                			animationPrefilters.unshift( callback );
                		} else {
                			animationPrefilters.push( callback );
                		}
                	}
                });
                
                function defaultPrefilter( elem, props, opts ) {
                	/* jshint validthis: true */
                	var prop, value, toggle, tween, hooks, oldfire,
                		anim = this,
                		orig = {},
                		style = elem.style,
                		hidden = elem.nodeType && isHidden( elem ),
                		dataShow = data_priv.get( elem, "fxshow" );
                
                	// handle queue: false promises
                	if ( !opts.queue ) {
                		hooks = jQuery._queueHooks( elem, "fx" );
                		if ( hooks.unqueued == null ) {
                			hooks.unqueued = 0;
                			oldfire = hooks.empty.fire;
                			hooks.empty.fire = function() {
                				if ( !hooks.unqueued ) {
                					oldfire();
                				}
                			};
                		}
                		hooks.unqueued++;
                
                		anim.always(function() {
                			// doing this makes sure that the complete handler will be called
                			// before this completes
                			anim.always(function() {
                				hooks.unqueued--;
                				if ( !jQuery.queue( elem, "fx" ).length ) {
                					hooks.empty.fire();
                				}
                			});
                		});
                	}
                
                	// height/width overflow pass
                	if ( elem.nodeType === 1 && ( "height" in props || "width" in props ) ) {
                		// Make sure that nothing sneaks out
                		// Record all 3 overflow attributes because IE9-10 do not
                		// change the overflow attribute when overflowX and
                		// overflowY are set to the same value
                		opts.overflow = [ style.overflow, style.overflowX, style.overflowY ];
                
                		// Set display property to inline-block for height/width
                		// animations on inline elements that are having width/height animated
                		if ( jQuery.css( elem, "display" ) === "inline" &&
                				jQuery.css( elem, "float" ) === "none" ) {
                
                			style.display = "inline-block";
                		}
                	}
                
                	if ( opts.overflow ) {
                		style.overflow = "hidden";
                		anim.always(function() {
                			style.overflow = opts.overflow[ 0 ];
                			style.overflowX = opts.overflow[ 1 ];
                			style.overflowY = opts.overflow[ 2 ];
                		});
                	}
                
                
                	// show/hide pass
                	for ( prop in props ) {
                		value = props[ prop ];
                		if ( rfxtypes.exec( value ) ) {
                			delete props[ prop ];
                			toggle = toggle || value === "toggle";
                			if ( value === ( hidden ? "hide" : "show" ) ) {
                
                				// If there is dataShow left over from a stopped hide or show and we are going to proceed with show, we should pretend to be hidden
                				if ( value === "show" && dataShow && dataShow[ prop ] !== undefined ) {
                					hidden = true;
                				} else {
                					continue;
                				}
                			}
                			orig[ prop ] = dataShow && dataShow[ prop ] || jQuery.style( elem, prop );
                		}
                	}
                
                	if ( !jQuery.isEmptyObject( orig ) ) {
                		if ( dataShow ) {
                			if ( "hidden" in dataShow ) {
                				hidden = dataShow.hidden;
                			}
                		} else {
                			dataShow = data_priv.access( elem, "fxshow", {} );
                		}
                
                		// store state if its toggle - enables .stop().toggle() to "reverse"
                		if ( toggle ) {
                			dataShow.hidden = !hidden;
                		}
                		if ( hidden ) {
                			jQuery( elem ).show();
                		} else {
                			anim.done(function() {
                				jQuery( elem ).hide();
                			});
                		}
                		anim.done(function() {
                			var prop;
                
                			data_priv.remove( elem, "fxshow" );
                			for ( prop in orig ) {
                				jQuery.style( elem, prop, orig[ prop ] );
                			}
                		});
                		for ( prop in orig ) {
                			tween = createTween( hidden ? dataShow[ prop ] : 0, prop, anim );
                
                			if ( !( prop in dataShow ) ) {
                				dataShow[ prop ] = tween.start;
                				if ( hidden ) {
                					tween.end = tween.start;
                					tween.start = prop === "width" || prop === "height" ? 1 : 0;
                				}
                			}
                		}
                	}
                }
                
                function Tween( elem, options, prop, end, easing ) {
                	return new Tween.prototype.init( elem, options, prop, end, easing );
                }
                jQuery.Tween = Tween;
                
                Tween.prototype = {
                	constructor: Tween,
                	init: function( elem, options, prop, end, easing, unit ) {
                		this.elem = elem;
                		this.prop = prop;
                		this.easing = easing || "swing";
                		this.options = options;
                		this.start = this.now = this.cur();
                		this.end = end;
                		this.unit = unit || ( jQuery.cssNumber[ prop ] ? "" : "px" );
                	},
                	cur: function() {
                		var hooks = Tween.propHooks[ this.prop ];
                
                		return hooks && hooks.get ?
                			hooks.get( this ) :
                			Tween.propHooks._default.get( this );
                	},
                	run: function( percent ) {
                		var eased,
                			hooks = Tween.propHooks[ this.prop ];
                
                		if ( this.options.duration ) {
                			this.pos = eased = jQuery.easing[ this.easing ](
                				percent, this.options.duration * percent, 0, 1, this.options.duration
                			);
                		} else {
                			this.pos = eased = percent;
                		}
                		this.now = ( this.end - this.start ) * eased + this.start;
                
                		if ( this.options.step ) {
                			this.options.step.call( this.elem, this.now, this );
                		}
                
                		if ( hooks && hooks.set ) {
                			hooks.set( this );
                		} else {
                			Tween.propHooks._default.set( this );
                		}
                		return this;
                	}
                };
                
                Tween.prototype.init.prototype = Tween.prototype;
                
                Tween.propHooks = {
                	_default: {
                		get: function( tween ) {
                			var result;
                
                			if ( tween.elem[ tween.prop ] != null &&
                				(!tween.elem.style || tween.elem.style[ tween.prop ] == null) ) {
                				return tween.elem[ tween.prop ];
                			}
                
                			// passing an empty string as a 3rd parameter to .css will automatically
                			// attempt a parseFloat and fallback to a string if the parse fails
                			// so, simple values such as "10px" are parsed to Float.
                			// complex values such as "rotate(1rad)" are returned as is.
                			result = jQuery.css( tween.elem, tween.prop, "" );
                			// Empty strings, null, undefined and "auto" are converted to 0.
                			return !result || result === "auto" ? 0 : result;
                		},
                		set: function( tween ) {
                			// use step hook for back compat - use cssHook if its there - use .style if its
                			// available and use plain properties where available
                			if ( jQuery.fx.step[ tween.prop ] ) {
                				jQuery.fx.step[ tween.prop ]( tween );
                			} else if ( tween.elem.style && ( tween.elem.style[ jQuery.cssProps[ tween.prop ] ] != null || jQuery.cssHooks[ tween.prop ] ) ) {
                				jQuery.style( tween.elem, tween.prop, tween.now + tween.unit );
                			} else {
                				tween.elem[ tween.prop ] = tween.now;
                			}
                		}
                	}
                };
                
                // Support: IE9
                // Panic based approach to setting things on disconnected nodes
                
                Tween.propHooks.scrollTop = Tween.propHooks.scrollLeft = {
                	set: function( tween ) {
                		if ( tween.elem.nodeType && tween.elem.parentNode ) {
                			tween.elem[ tween.prop ] = tween.now;
                		}
                	}
                };
                
                jQuery.each([ "toggle", "show", "hide" ], function( i, name ) {
                	var cssFn = jQuery.fn[ name ];
                	jQuery.fn[ name ] = function( speed, easing, callback ) {
                		return speed == null || typeof speed === "boolean" ?
                			cssFn.apply( this, arguments ) :
                			this.animate( genFx( name, true ), speed, easing, callback );
                	};
                });
                
                jQuery.fn.extend({
                	fadeTo: function( speed, to, easing, callback ) {
                
                		// show any hidden elements after setting opacity to 0
                		return this.filter( isHidden ).css( "opacity", 0 ).show()
                
                			// animate to the value specified
                			.end().animate({ opacity: to }, speed, easing, callback );
                	},
                	animate: function( prop, speed, easing, callback ) {
                		var empty = jQuery.isEmptyObject( prop ),
                			optall = jQuery.speed( speed, easing, callback ),
                			doAnimation = function() {
                				// Operate on a copy of prop so per-property easing won't be lost
                				var anim = Animation( this, jQuery.extend( {}, prop ), optall );
                
                				// Empty animations, or finishing resolves immediately
                				if ( empty || data_priv.get( this, "finish" ) ) {
                					anim.stop( true );
                				}
                			};
                			doAnimation.finish = doAnimation;
                
                		return empty || optall.queue === false ?
                			this.each( doAnimation ) :
                			this.queue( optall.queue, doAnimation );
                	},
                	stop: function( type, clearQueue, gotoEnd ) {
                		var stopQueue = function( hooks ) {
                			var stop = hooks.stop;
                			delete hooks.stop;
                			stop( gotoEnd );
                		};
                
                		if ( typeof type !== "string" ) {
                			gotoEnd = clearQueue;
                			clearQueue = type;
                			type = undefined;
                		}
                		if ( clearQueue && type !== false ) {
                			this.queue( type || "fx", [] );
                		}
                
                		return this.each(function() {
                			var dequeue = true,
                				index = type != null && type + "queueHooks",
                				timers = jQuery.timers,
                				data = data_priv.get( this );
                
                			if ( index ) {
                				if ( data[ index ] && data[ index ].stop ) {
                					stopQueue( data[ index ] );
                				}
                			} else {
                				for ( index in data ) {
                					if ( data[ index ] && data[ index ].stop && rrun.test( index ) ) {
                						stopQueue( data[ index ] );
                					}
                				}
                			}
                
                			for ( index = timers.length; index--; ) {
                				if ( timers[ index ].elem === this && (type == null || timers[ index ].queue === type) ) {
                					timers[ index ].anim.stop( gotoEnd );
                					dequeue = false;
                					timers.splice( index, 1 );
                				}
                			}
                
                			// start the next in the queue if the last step wasn't forced
                			// timers currently will call their complete callbacks, which will dequeue
                			// but only if they were gotoEnd
                			if ( dequeue || !gotoEnd ) {
                				jQuery.dequeue( this, type );
                			}
                		});
                	},
                	finish: function( type ) {
                		if ( type !== false ) {
                			type = type || "fx";
                		}
                		return this.each(function() {
                			var index,
                				data = data_priv.get( this ),
                				queue = data[ type + "queue" ],
                				hooks = data[ type + "queueHooks" ],
                				timers = jQuery.timers,
                				length = queue ? queue.length : 0;
                
                			// enable finishing flag on private data
                			data.finish = true;
                
                			// empty the queue first
                			jQuery.queue( this, type, [] );
                
                			if ( hooks && hooks.stop ) {
                				hooks.stop.call( this, true );
                			}
                
                			// look for any active animations, and finish them
                			for ( index = timers.length; index--; ) {
                				if ( timers[ index ].elem === this && timers[ index ].queue === type ) {
                					timers[ index ].anim.stop( true );
                					timers.splice( index, 1 );
                				}
                			}
                
                			// look for any animations in the old queue and finish them
                			for ( index = 0; index < length; index++ ) {
                				if ( queue[ index ] && queue[ index ].finish ) {
                					queue[ index ].finish.call( this );
                				}
                			}
                
                			// turn off finishing flag
                			delete data.finish;
                		});
                	}
                });
                
                // Generate parameters to create a standard animation
                function genFx( type, includeWidth ) {
                	var which,
                		attrs = { height: type },
                		i = 0;
                
                	// if we include width, step value is 1 to do all cssExpand values,
                	// if we don't include width, step value is 2 to skip over Left and Right
                	includeWidth = includeWidth? 1 : 0;
                	for( ; i < 4 ; i += 2 - includeWidth ) {
                		which = cssExpand[ i ];
                		attrs[ "margin" + which ] = attrs[ "padding" + which ] = type;
                	}
                
                	if ( includeWidth ) {
                		attrs.opacity = attrs.width = type;
                	}
                
                	return attrs;
                }
                
                // Generate shortcuts for custom animations
                jQuery.each({
                	slideDown: genFx("show"),
                	slideUp: genFx("hide"),
                	slideToggle: genFx("toggle"),
                	fadeIn: { opacity: "show" },
                	fadeOut: { opacity: "hide" },
                	fadeToggle: { opacity: "toggle" }
                }, function( name, props ) {
                	jQuery.fn[ name ] = function( speed, easing, callback ) {
                		return this.animate( props, speed, easing, callback );
                	};
                });
                
                jQuery.speed = function( speed, easing, fn ) {
                	var opt = speed && typeof speed === "object" ? jQuery.extend( {}, speed ) : {
                		complete: fn || !fn && easing ||
                			jQuery.isFunction( speed ) && speed,
                		duration: speed,
                		easing: fn && easing || easing && !jQuery.isFunction( easing ) && easing
                	};
                
                	opt.duration = jQuery.fx.off ? 0 : typeof opt.duration === "number" ? opt.duration :
                		opt.duration in jQuery.fx.speeds ? jQuery.fx.speeds[ opt.duration ] : jQuery.fx.speeds._default;
                
                	// normalize opt.queue - true/undefined/null -> "fx"
                	if ( opt.queue == null || opt.queue === true ) {
                		opt.queue = "fx";
                	}
                
                	// Queueing
                	opt.old = opt.complete;
                
                	opt.complete = function() {
                		if ( jQuery.isFunction( opt.old ) ) {
                			opt.old.call( this );
                		}
                
                		if ( opt.queue ) {
                			jQuery.dequeue( this, opt.queue );
                		}
                	};
                
                	return opt;
                };
                
                jQuery.easing = {
                	linear: function( p ) {
                		return p;
                	},
                	swing: function( p ) {
                		return 0.5 - Math.cos( p*Math.PI ) / 2;
                	}
                };
                
                jQuery.timers = [];
                jQuery.fx = Tween.prototype.init;
                jQuery.fx.tick = function() {
                	var timer,
                		timers = jQuery.timers,
                		i = 0;
                
                	fxNow = jQuery.now();
                
                	for ( ; i < timers.length; i++ ) {
                		timer = timers[ i ];
                		// Checks the timer has not already been removed
                		if ( !timer() && timers[ i ] === timer ) {
                			timers.splice( i--, 1 );
                		}
                	}
                
                	if ( !timers.length ) {
                		jQuery.fx.stop();
                	}
                	fxNow = undefined;
                };
                
                jQuery.fx.timer = function( timer ) {
                	if ( timer() && jQuery.timers.push( timer ) ) {
                		jQuery.fx.start();
                	}
                };
                
                jQuery.fx.interval = 13;
                
                jQuery.fx.start = function() {
                	if ( !timerId ) {
                		timerId = setInterval( jQuery.fx.tick, jQuery.fx.interval );
                	}
                };
                
                jQuery.fx.stop = function() {
                	clearInterval( timerId );
                	timerId = null;
                };
                
                jQuery.fx.speeds = {
                	slow: 600,
                	fast: 200,
                	// Default speed
                	_default: 400
                };
                
                // Back Compat <1.8 extension point
                jQuery.fx.step = {};
                
                if ( jQuery.expr && jQuery.expr.filters ) {
                	jQuery.expr.filters.animated = function( elem ) {
                		return jQuery.grep(jQuery.timers, function( fn ) {
                			return elem === fn.elem;
                		}).length;
                	};
                }
                jQuery.fn.offset = function( options ) {
                	if ( arguments.length ) {
                		return options === undefined ?
                			this :
                			this.each(function( i ) {
                				jQuery.offset.setOffset( this, options, i );
                			});
                	}
                
                	var docElem, win,
                		elem = this[ 0 ],
                		box = { top: 0, left: 0 },
                		doc = elem && elem.ownerDocument;
                
                	if ( !doc ) {
                		return;
                	}
                
                	docElem = doc.documentElement;
                
                	// Make sure it's not a disconnected DOM node
                	if ( !jQuery.contains( docElem, elem ) ) {
                		return box;
                	}
                
                	// If we don't have gBCR, just use 0,0 rather than error
                	// BlackBerry 5, iOS 3 (original iPhone)
                	if ( typeof elem.getBoundingClientRect !== core_strundefined ) {
                		box = elem.getBoundingClientRect();
                	}
                	win = getWindow( doc );
                	return {
                		top: box.top + win.pageYOffset - docElem.clientTop,
                		left: box.left + win.pageXOffset - docElem.clientLeft
                	};
                };
                
                jQuery.offset = {
                
                	setOffset: function( elem, options, i ) {
                		var curPosition, curLeft, curCSSTop, curTop, curOffset, curCSSLeft, calculatePosition,
                			position = jQuery.css( elem, "position" ),
                			curElem = jQuery( elem ),
                			props = {};
                
                		// Set position first, in-case top/left are set even on static elem
                		if ( position === "static" ) {
                			elem.style.position = "relative";
                		}
                
                		curOffset = curElem.offset();
                		curCSSTop = jQuery.css( elem, "top" );
                		curCSSLeft = jQuery.css( elem, "left" );
                		calculatePosition = ( position === "absolute" || position === "fixed" ) && ( curCSSTop + curCSSLeft ).indexOf("auto") > -1;
                
                		// Need to be able to calculate position if either top or left is auto and position is either absolute or fixed
                		if ( calculatePosition ) {
                			curPosition = curElem.position();
                			curTop = curPosition.top;
                			curLeft = curPosition.left;
                
                		} else {
                			curTop = parseFloat( curCSSTop ) || 0;
                			curLeft = parseFloat( curCSSLeft ) || 0;
                		}
                
                		if ( jQuery.isFunction( options ) ) {
                			options = options.call( elem, i, curOffset );
                		}
                
                		if ( options.top != null ) {
                			props.top = ( options.top - curOffset.top ) + curTop;
                		}
                		if ( options.left != null ) {
                			props.left = ( options.left - curOffset.left ) + curLeft;
                		}
                
                		if ( "using" in options ) {
                			options.using.call( elem, props );
                
                		} else {
                			curElem.css( props );
                		}
                	}
                };
                
                
                jQuery.fn.extend({
                
                	position: function() {
                		if ( !this[ 0 ] ) {
                			return;
                		}
                
                		var offsetParent, offset,
                			elem = this[ 0 ],
                			parentOffset = { top: 0, left: 0 };
                
                		// Fixed elements are offset from window (parentOffset = {top:0, left: 0}, because it is it's only offset parent
                		if ( jQuery.css( elem, "position" ) === "fixed" ) {
                			// We assume that getBoundingClientRect is available when computed position is fixed
                			offset = elem.getBoundingClientRect();
                
                		} else {
                			// Get *real* offsetParent
                			offsetParent = this.offsetParent();
                
                			// Get correct offsets
                			offset = this.offset();
                			if ( !jQuery.nodeName( offsetParent[ 0 ], "html" ) ) {
                				parentOffset = offsetParent.offset();
                			}
                
                			// Add offsetParent borders
                			parentOffset.top += jQuery.css( offsetParent[ 0 ], "borderTopWidth", true );
                			parentOffset.left += jQuery.css( offsetParent[ 0 ], "borderLeftWidth", true );
                		}
                
                		// Subtract parent offsets and element margins
                		return {
                			top: offset.top - parentOffset.top - jQuery.css( elem, "marginTop", true ),
                			left: offset.left - parentOffset.left - jQuery.css( elem, "marginLeft", true )
                		};
                	},
                
                	offsetParent: function() {
                		return this.map(function() {
                			var offsetParent = this.offsetParent || docElem;
                
                			while ( offsetParent && ( !jQuery.nodeName( offsetParent, "html" ) && jQuery.css( offsetParent, "position") === "static" ) ) {
                				offsetParent = offsetParent.offsetParent;
                			}
                
                			return offsetParent || docElem;
                		});
                	}
                });
                
                
                // Create scrollLeft and scrollTop methods
                jQuery.each( {scrollLeft: "pageXOffset", scrollTop: "pageYOffset"}, function( method, prop ) {
                	var top = "pageYOffset" === prop;
                
                	jQuery.fn[ method ] = function( val ) {
                		return jQuery.access( this, function( elem, method, val ) {
                			var win = getWindow( elem );
                
                			if ( val === undefined ) {
                				return win ? win[ prop ] : elem[ method ];
                			}
                
                			if ( win ) {
                				win.scrollTo(
                					!top ? val : window.pageXOffset,
                					top ? val : window.pageYOffset
                				);
                
                			} else {
                				elem[ method ] = val;
                			}
                		}, method, val, arguments.length, null );
                	};
                });
                
                function getWindow( elem ) {
                	return jQuery.isWindow( elem ) ? elem : elem.nodeType === 9 && elem.defaultView;
                }
                // Create innerHeight, innerWidth, height, width, outerHeight and outerWidth methods
                jQuery.each( { Height: "height", Width: "width" }, function( name, type ) {
                	jQuery.each( { padding: "inner" + name, content: type, "": "outer" + name }, function( defaultExtra, funcName ) {
                		// margin is only for outerHeight, outerWidth
                		jQuery.fn[ funcName ] = function( margin, value ) {
                			var chainable = arguments.length && ( defaultExtra || typeof margin !== "boolean" ),
                				extra = defaultExtra || ( margin === true || value === true ? "margin" : "border" );
                
                			return jQuery.access( this, function( elem, type, value ) {
                				var doc;
                
                				if ( jQuery.isWindow( elem ) ) {
                					// As of 5/8/2012 this will yield incorrect results for Mobile Safari, but there
                					// isn't a whole lot we can do. See pull request at this URL for discussion:
                					// https://github.com/jquery/jquery/pull/764
                					return elem.document.documentElement[ "client" + name ];
                				}
                
                				// Get document width or height
                				if ( elem.nodeType === 9 ) {
                					doc = elem.documentElement;
                
                					// Either scroll[Width/Height] or offset[Width/Height] or client[Width/Height],
                					// whichever is greatest
                					return Math.max(
                						elem.body[ "scroll" + name ], doc[ "scroll" + name ],
                						elem.body[ "offset" + name ], doc[ "offset" + name ],
                						doc[ "client" + name ]
                					);
                				}
                
                				return value === undefined ?
                					// Get width or height on the element, requesting but not forcing parseFloat
                					jQuery.css( elem, type, extra ) :
                
                					// Set width or height on the element
                					jQuery.style( elem, type, value, extra );
                			}, type, chainable ? margin : undefined, chainable, null );
                		};
                	});
                });
                // Limit scope pollution from any deprecated API
                // (function() {
                
                // The number of elements contained in the matched element set
                jQuery.fn.size = function() {
                	return this.length;
                };
                
                jQuery.fn.andSelf = jQuery.fn.addBack;
                
                // })();
                if ( typeof module === "object" && module && typeof module.exports === "object" ) {
                	// Expose jQuery as module.exports in loaders that implement the Node
                	// module pattern (including browserify). Do not create the global, since
                	// the user will be storing it themselves locally, and globals are frowned
                	// upon in the Node module world.
                	module.exports = jQuery;
                } else {
                	// Register as a named AMD module, since jQuery can be concatenated with other
                	// files that may use define, but not via a proper concatenation script that
                	// understands anonymous AMD modules. A named AMD is safest and most robust
                	// way to register. Lowercase jquery is used because AMD module names are
                	// derived from file names, and jQuery is normally delivered in a lowercase
                	// file name. Do this after creating the global so that if an AMD module wants
                	// to call noConflict to hide this version of jQuery, it will work.
                	if ( typeof define === "function" && define.amd ) {
                		define( "jquery", [], function () { return jQuery; } );
                	}
                }
                
                // If there is a window object, that at least has a document property,
                // define jQuery and $ identifiers
                if ( typeof window === "object" && typeof window.document === "object" ) {
                	window.jQuery = window.$ = jQuery;
                }
                
                })( window );
                
                //     Backbone.js 1.1.0
                
                //     (c) 2010-2011 Jeremy Ashkenas, DocumentCloud Inc.
                //     (c) 2011-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
                //     Backbone may be freely distributed under the MIT license.
                //     For all details and documentation:
                //     http://backbonejs.org
                
                (function(root, factory) {
                  // Set up Backbone appropriately for the environment.
                  if (typeof exports !== 'undefined') {
                    // Node/CommonJS, no need for jQuery in that case.
                    factory(root, exports, require('underscore'));
                  } else if (typeof define === 'function' && define.amd) {
                    // AMD
                    define('backbone',['underscore', 'jquery', 'exports'], function(_, $, exports) {
                      // Export global even in AMD case in case this script is loaded with
                      // others that may still expect a global Backbone.
                      root.Backbone = factory(root, exports, _, $);
                    });
                  } else {
                    // Browser globals
                    root.Backbone = factory(root, {}, root._, (root.jQuery || root.Zepto || root.ender || root.$));
                  }
                }(this, function(root, Backbone, _, $) {
                
                  // Initial Setup
                  // -------------
                
                  // Save the previous value of the `Backbone` variable, so that it can be
                  // restored later on, if `noConflict` is used.
                  var previousBackbone = root.Backbone;
                
                  // Create local references to array methods we'll want to use later.
                  var array = [];
                  var push = array.push;
                  var slice = array.slice;
                  var splice = array.splice;
                
                  // Current version of the library. Keep in sync with `package.json`.
                  Backbone.VERSION = '1.1.0';
                
                  // For Backbone's purposes, jQuery, Zepto, or Ender owns the `$` variable.
                  Backbone.$ = $;
                
                  // Runs Backbone.js in *noConflict* mode, returning the `Backbone` variable
                  // to its previous owner. Returns a reference to this Backbone object.
                  Backbone.noConflict = function() {
                    root.Backbone = previousBackbone;
                    return this;
                  };
                
                  // Turn on `emulateHTTP` to support legacy HTTP servers. Setting this option
                  // will fake `"PATCH"`, `"PUT"` and `"DELETE"` requests via the `_method` parameter and
                  // set a `X-Http-Method-Override` header.
                  Backbone.emulateHTTP = false;
                
                  // Turn on `emulateJSON` to support legacy servers that can't deal with direct
                  // `application/json` requests ... will encode the body as
                  // `application/x-www-form-urlencoded` instead and will send the model in a
                  // form param named `model`.
                  Backbone.emulateJSON = false;
                
                  // Backbone.Events
                  // ---------------
                
                  // A module that can be mixed in to *any object* in order to provide it with
                  // custom events. You may bind with `on` or remove with `off` callback
                  // functions to an event; `trigger`-ing an event fires all callbacks in
                  // succession.
                  //
                  //     var object = {};
                  //     _.extend(object, Backbone.Events);
                  //     object.on('expand', function(){ alert('expanded'); });
                  //     object.trigger('expand');
                  //
                  var Events = Backbone.Events = {
                
                    // Bind an event to a `callback` function. Passing `"all"` will bind
                    // the callback to all events fired.
                    on: function(name, callback, context) {
                      if (!eventsApi(this, 'on', name, [callback, context]) || !callback) return this;
                      this._events || (this._events = {});
                      var events = this._events[name] || (this._events[name] = []);
                      events.push({callback: callback, context: context, ctx: context || this});
                      return this;
                    },
                
                    // Bind an event to only be triggered a single time. After the first time
                    // the callback is invoked, it will be removed.
                    once: function(name, callback, context) {
                      if (!eventsApi(this, 'once', name, [callback, context]) || !callback) return this;
                      var self = this;
                      var once = _.once(function() {
                        self.off(name, once);
                        callback.apply(this, arguments);
                      });
                      once._callback = callback;
                      return this.on(name, once, context);
                    },
                
                    // Remove one or many callbacks. If `context` is null, removes all
                    // callbacks with that function. If `callback` is null, removes all
                    // callbacks for the event. If `name` is null, removes all bound
                    // callbacks for all events.
                    off: function(name, callback, context) {
                      var retain, ev, events, names, i, l, j, k;
                      if (!this._events || !eventsApi(this, 'off', name, [callback, context])) return this;
                      if (!name && !callback && !context) {
                        this._events = {};
                        return this;
                      }
                      names = name ? [name] : _.keys(this._events);
                      for (i = 0, l = names.length; i < l; i++) {
                        name = names[i];
                        if (events = this._events[name]) {
                          this._events[name] = retain = [];
                          if (callback || context) {
                            for (j = 0, k = events.length; j < k; j++) {
                              ev = events[j];
                              if ((callback && callback !== ev.callback && callback !== ev.callback._callback) ||
                                  (context && context !== ev.context)) {
                                retain.push(ev);
                              }
                            }
                          }
                          if (!retain.length) delete this._events[name];
                        }
                      }
                
                      return this;
                    },
                
                    // Trigger one or many events, firing all bound callbacks. Callbacks are
                    // passed the same arguments as `trigger` is, apart from the event name
                    // (unless you're listening on `"all"`, which will cause your callback to
                    // receive the true name of the event as the first argument).
                    trigger: function(name) {
                      if (!this._events) return this;
                      var args = slice.call(arguments, 1);
                      if (!eventsApi(this, 'trigger', name, args)) return this;
                      var events = this._events[name];
                      var allEvents = this._events.all;
                      if (events) triggerEvents(events, args);
                      if (allEvents) triggerEvents(allEvents, arguments);
                      return this;
                    },
                
                    // Tell this object to stop listening to either specific events ... or
                    // to every object it's currently listening to.
                    stopListening: function(obj, name, callback) {
                      var listeningTo = this._listeningTo;
                      if (!listeningTo) return this;
                      var remove = !name && !callback;
                      if (!callback && typeof name === 'object') callback = this;
                      if (obj) (listeningTo = {})[obj._listenId] = obj;
                      for (var id in listeningTo) {
                        obj = listeningTo[id];
                        obj.off(name, callback, this);
                        if (remove || _.isEmpty(obj._events)) delete this._listeningTo[id];
                      }
                      return this;
                    }
                
                  };
                
                  // Regular expression used to split event strings.
                  var eventSplitter = /\s+/;
                
                  // Implement fancy features of the Events API such as multiple event
                  // names `"change blur"` and jQuery-style event maps `{change: action}`
                  // in terms of the existing API.
                  var eventsApi = function(obj, action, name, rest) {
                    if (!name) return true;
                
                    // Handle event maps.
                    if (typeof name === 'object') {
                      for (var key in name) {
                        obj[action].apply(obj, [key, name[key]].concat(rest));
                      }
                      return false;
                    }
                
                    // Handle space separated event names.
                    if (eventSplitter.test(name)) {
                      var names = name.split(eventSplitter);
                      for (var i = 0, l = names.length; i < l; i++) {
                        obj[action].apply(obj, [names[i]].concat(rest));
                      }
                      return false;
                    }
                
                    return true;
                  };
                
                  // A difficult-to-believe, but optimized internal dispatch function for
                  // triggering events. Tries to keep the usual cases speedy (most internal
                  // Backbone events have 3 arguments).
                  var triggerEvents = function(events, args) {
                    var ev, i = -1, l = events.length, a1 = args[0], a2 = args[1], a3 = args[2];
                    switch (args.length) {
                      case 0: while (++i < l) (ev = events[i]).callback.call(ev.ctx); return;
                      case 1: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1); return;
                      case 2: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1, a2); return;
                      case 3: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1, a2, a3); return;
                      default: while (++i < l) (ev = events[i]).callback.apply(ev.ctx, args);
                    }
                  };
                
                  var listenMethods = {listenTo: 'on', listenToOnce: 'once'};
                
                  // Inversion-of-control versions of `on` and `once`. Tell *this* object to
                  // listen to an event in another object ... keeping track of what it's
                  // listening to.
                  _.each(listenMethods, function(implementation, method) {
                    Events[method] = function(obj, name, callback) {
                      var listeningTo = this._listeningTo || (this._listeningTo = {});
                      var id = obj._listenId || (obj._listenId = _.uniqueId('l'));
                      listeningTo[id] = obj;
                      if (!callback && typeof name === 'object') callback = this;
                      obj[implementation](name, callback, this);
                      return this;
                    };
                  });
                
                  // Aliases for backwards compatibility.
                  Events.bind   = Events.on;
                  Events.unbind = Events.off;
                
                  // Allow the `Backbone` object to serve as a global event bus, for folks who
                  // want global "pubsub" in a convenient place.
                  _.extend(Backbone, Events);
                
                  // Backbone.Model
                  // --------------
                
                  // Backbone **Models** are the basic data object in the framework --
                  // frequently representing a row in a table in a database on your server.
                  // A discrete chunk of data and a bunch of useful, related methods for
                  // performing computations and transformations on that data.
                
                  // Create a new model with the specified attributes. A client id (`cid`)
                  // is automatically generated and assigned for you.
                  var Model = Backbone.Model = function(attributes, options) {
                    var attrs = attributes || {};
                    options || (options = {});
                    this.cid = _.uniqueId('c');
                    this.attributes = {};
                    if (options.collection) this.collection = options.collection;
                    if (options.parse) attrs = this.parse(attrs, options) || {};
                    attrs = _.defaults({}, attrs, _.result(this, 'defaults'));
                    this.set(attrs, options);
                    this.changed = {};
                    this.initialize.apply(this, arguments);
                  };
                
                  // Attach all inheritable methods to the Model prototype.
                  _.extend(Model.prototype, Events, {
                
                    // A hash of attributes whose current and previous value differ.
                    changed: null,
                
                    // The value returned during the last failed validation.
                    validationError: null,
                
                    // The default name for the JSON `id` attribute is `"id"`. MongoDB and
                    // CouchDB users may want to set this to `"_id"`.
                    idAttribute: 'id',
                
                    // Initialize is an empty function by default. Override it with your own
                    // initialization logic.
                    initialize: function(){},
                
                    // Return a copy of the model's `attributes` object.
                    toJSON: function(options) {
                      return _.clone(this.attributes);
                    },
                
                    // Proxy `Backbone.sync` by default -- but override this if you need
                    // custom syncing semantics for *this* particular model.
                    sync: function() {
                      return Backbone.sync.apply(this, arguments);
                    },
                
                    // Get the value of an attribute.
                    get: function(attr) {
                      return this.attributes[attr];
                    },
                
                    // Get the HTML-escaped value of an attribute.
                    escape: function(attr) {
                      return _.escape(this.get(attr));
                    },
                
                    // Returns `true` if the attribute contains a value that is not null
                    // or undefined.
                    has: function(attr) {
                      return this.get(attr) != null;
                    },
                
                    // Set a hash of model attributes on the object, firing `"change"`. This is
                    // the core primitive operation of a model, updating the data and notifying
                    // anyone who needs to know about the change in state. The heart of the beast.
                    set: function(key, val, options) {
                      var attr, attrs, unset, changes, silent, changing, prev, current;
                      if (key == null) return this;
                
                      // Handle both `"key", value` and `{key: value}` -style arguments.
                      if (typeof key === 'object') {
                        attrs = key;
                        options = val;
                      } else {
                        (attrs = {})[key] = val;
                      }
                
                      options || (options = {});
                
                      // Run validation.
                      if (!this._validate(attrs, options)) return false;
                
                      // Extract attributes and options.
                      unset           = options.unset;
                      silent          = options.silent;
                      changes         = [];
                      changing        = this._changing;
                      this._changing  = true;
                
                      if (!changing) {
                        this._previousAttributes = _.clone(this.attributes);
                        this.changed = {};
                      }
                      current = this.attributes, prev = this._previousAttributes;
                
                      // Check for changes of `id`.
                      if (this.idAttribute in attrs) this.id = attrs[this.idAttribute];
                
                      // For each `set` attribute, update or delete the current value.
                      for (attr in attrs) {
                        val = attrs[attr];
                        if (!_.isEqual(current[attr], val)) changes.push(attr);
                        if (!_.isEqual(prev[attr], val)) {
                          this.changed[attr] = val;
                        } else {
                          delete this.changed[attr];
                        }
                        unset ? delete current[attr] : current[attr] = val;
                      }
                
                      // Trigger all relevant attribute changes.
                      if (!silent) {
                        if (changes.length) this._pending = true;
                        for (var i = 0, l = changes.length; i < l; i++) {
                          this.trigger('change:' + changes[i], this, current[changes[i]], options);
                        }
                      }
                
                      // You might be wondering why there's a `while` loop here. Changes can
                      // be recursively nested within `"change"` events.
                      if (changing) return this;
                      if (!silent) {
                        while (this._pending) {
                          this._pending = false;
                          this.trigger('change', this, options);
                        }
                      }
                      this._pending = false;
                      this._changing = false;
                      return this;
                    },
                
                    // Remove an attribute from the model, firing `"change"`. `unset` is a noop
                    // if the attribute doesn't exist.
                    unset: function(attr, options) {
                      return this.set(attr, void 0, _.extend({}, options, {unset: true}));
                    },
                
                    // Clear all attributes on the model, firing `"change"`.
                    clear: function(options) {
                      var attrs = {};
                      for (var key in this.attributes) attrs[key] = void 0;
                      return this.set(attrs, _.extend({}, options, {unset: true}));
                    },
                
                    // Determine if the model has changed since the last `"change"` event.
                    // If you specify an attribute name, determine if that attribute has changed.
                    hasChanged: function(attr) {
                      if (attr == null) return !_.isEmpty(this.changed);
                      return _.has(this.changed, attr);
                    },
                
                    // Return an object containing all the attributes that have changed, or
                    // false if there are no changed attributes. Useful for determining what
                    // parts of a view need to be updated and/or what attributes need to be
                    // persisted to the server. Unset attributes will be set to undefined.
                    // You can also pass an attributes object to diff against the model,
                    // determining if there *would be* a change.
                    changedAttributes: function(diff) {
                      if (!diff) return this.hasChanged() ? _.clone(this.changed) : false;
                      var val, changed = false;
                      var old = this._changing ? this._previousAttributes : this.attributes;
                      for (var attr in diff) {
                        if (_.isEqual(old[attr], (val = diff[attr]))) continue;
                        (changed || (changed = {}))[attr] = val;
                      }
                      return changed;
                    },
                
                    // Get the previous value of an attribute, recorded at the time the last
                    // `"change"` event was fired.
                    previous: function(attr) {
                      if (attr == null || !this._previousAttributes) return null;
                      return this._previousAttributes[attr];
                    },
                
                    // Get all of the attributes of the model at the time of the previous
                    // `"change"` event.
                    previousAttributes: function() {
                      return _.clone(this._previousAttributes);
                    },
                
                    // Fetch the model from the server. If the server's representation of the
                    // model differs from its current attributes, they will be overridden,
                    // triggering a `"change"` event.
                    fetch: function(options) {
                      options = options ? _.clone(options) : {};
                      if (options.parse === void 0) options.parse = true;
                      var model = this;
                      var success = options.success;
                      options.success = function(resp) {
                        if (!model.set(model.parse(resp, options), options)) return false;
                        if (success) success(model, resp, options);
                        model.trigger('sync', model, resp, options);
                      };
                      wrapError(this, options);
                      return this.sync('read', this, options);
                    },
                
                    // Set a hash of model attributes, and sync the model to the server.
                    // If the server returns an attributes hash that differs, the model's
                    // state will be `set` again.
                    save: function(key, val, options) {
                      var attrs, method, xhr, attributes = this.attributes;
                
                      // Handle both `"key", value` and `{key: value}` -style arguments.
                      if (key == null || typeof key === 'object') {
                        attrs = key;
                        options = val;
                      } else {
                        (attrs = {})[key] = val;
                      }
                
                      options = _.extend({validate: true}, options);
                
                      // If we're not waiting and attributes exist, save acts as
                      // `set(attr).save(null, opts)` with validation. Otherwise, check if
                      // the model will be valid when the attributes, if any, are set.
                      if (attrs && !options.wait) {
                        if (!this.set(attrs, options)) return false;
                      } else {
                        if (!this._validate(attrs, options)) return false;
                      }
                
                      // Set temporary attributes if `{wait: true}`.
                      if (attrs && options.wait) {
                        this.attributes = _.extend({}, attributes, attrs);
                      }
                
                      // After a successful server-side save, the client is (optionally)
                      // updated with the server-side state.
                      if (options.parse === void 0) options.parse = true;
                      var model = this;
                      var success = options.success;
                      options.success = function(resp) {
                        // Ensure attributes are restored during synchronous saves.
                        model.attributes = attributes;
                        var serverAttrs = model.parse(resp, options);
                        if (options.wait) serverAttrs = _.extend(attrs || {}, serverAttrs);
                        if (_.isObject(serverAttrs) && !model.set(serverAttrs, options)) {
                          return false;
                        }
                        if (success) success(model, resp, options);
                        model.trigger('sync', model, resp, options);
                      };
                      wrapError(this, options);
                
                      method = this.isNew() ? 'create' : (options.patch ? 'patch' : 'update');
                      if (method === 'patch') options.attrs = attrs;
                      xhr = this.sync(method, this, options);
                
                      // Restore attributes.
                      if (attrs && options.wait) this.attributes = attributes;
                
                      return xhr;
                    },
                
                    // Destroy this model on the server if it was already persisted.
                    // Optimistically removes the model from its collection, if it has one.
                    // If `wait: true` is passed, waits for the server to respond before removal.
                    destroy: function(options) {
                      options = options ? _.clone(options) : {};
                      var model = this;
                      var success = options.success;
                
                      var destroy = function() {
                        model.trigger('destroy', model, model.collection, options);
                      };
                
                      options.success = function(resp) {
                        if (options.wait || model.isNew()) destroy();
                        if (success) success(model, resp, options);
                        if (!model.isNew()) model.trigger('sync', model, resp, options);
                      };
                
                      if (this.isNew()) {
                        options.success();
                        return false;
                      }
                      wrapError(this, options);
                
                      var xhr = this.sync('delete', this, options);
                      if (!options.wait) destroy();
                      return xhr;
                    },
                
                    // Default URL for the model's representation on the server -- if you're
                    // using Backbone's restful methods, override this to change the endpoint
                    // that will be called.
                    url: function() {
                      var base = _.result(this, 'urlRoot') || _.result(this.collection, 'url') || urlError();
                      if (this.isNew()) return base;
                      return base + (base.charAt(base.length - 1) === '/' ? '' : '/') + encodeURIComponent(this.id);
                    },
                
                    // **parse** converts a response into the hash of attributes to be `set` on
                    // the model. The default implementation is just to pass the response along.
                    parse: function(resp, options) {
                      return resp;
                    },
                
                    // Create a new model with identical attributes to this one.
                    clone: function() {
                      return new this.constructor(this.attributes);
                    },
                
                    // A model is new if it has never been saved to the server, and lacks an id.
                    isNew: function() {
                      return this.id == null;
                    },
                
                    // Check if the model is currently in a valid state.
                    isValid: function(options) {
                      return this._validate({}, _.extend(options || {}, { validate: true }));
                    },
                
                    // Run validation against the next complete set of model attributes,
                    // returning `true` if all is well. Otherwise, fire an `"invalid"` event.
                    _validate: function(attrs, options) {
                      if (!options.validate || !this.validate) return true;
                      attrs = _.extend({}, this.attributes, attrs);
                      var error = this.validationError = this.validate(attrs, options) || null;
                      if (!error) return true;
                      this.trigger('invalid', this, error, _.extend(options, {validationError: error}));
                      return false;
                    }
                
                  });
                
                  // Underscore methods that we want to implement on the Model.
                  var modelMethods = ['keys', 'values', 'pairs', 'invert', 'pick', 'omit'];
                
                  // Mix in each Underscore method as a proxy to `Model#attributes`.
                  _.each(modelMethods, function(method) {
                    Model.prototype[method] = function() {
                      var args = slice.call(arguments);
                      args.unshift(this.attributes);
                      return _[method].apply(_, args);
                    };
                  });
                
                  // Backbone.Collection
                  // -------------------
                
                  // If models tend to represent a single row of data, a Backbone Collection is
                  // more analagous to a table full of data ... or a small slice or page of that
                  // table, or a collection of rows that belong together for a particular reason
                  // -- all of the messages in this particular folder, all of the documents
                  // belonging to this particular author, and so on. Collections maintain
                  // indexes of their models, both in order, and for lookup by `id`.
                
                  // Create a new **Collection**, perhaps to contain a specific type of `model`.
                  // If a `comparator` is specified, the Collection will maintain
                  // its models in sort order, as they're added and removed.
                  var Collection = Backbone.Collection = function(models, options) {
                    options || (options = {});
                    if (options.model) this.model = options.model;
                    if (options.comparator !== void 0) this.comparator = options.comparator;
                    this._reset();
                    this.initialize.apply(this, arguments);
                    if (models) this.reset(models, _.extend({silent: true}, options));
                  };
                
                  // Default options for `Collection#set`.
                  var setOptions = {add: true, remove: true, merge: true};
                  var addOptions = {add: true, remove: false};
                
                  // Define the Collection's inheritable methods.
                  _.extend(Collection.prototype, Events, {
                
                    // The default model for a collection is just a **Backbone.Model**.
                    // This should be overridden in most cases.
                    model: Model,
                
                    // Initialize is an empty function by default. Override it with your own
                    // initialization logic.
                    initialize: function(){},
                
                    // The JSON representation of a Collection is an array of the
                    // models' attributes.
                    toJSON: function(options) {
                      return this.map(function(model){ return model.toJSON(options); });
                    },
                
                    // Proxy `Backbone.sync` by default.
                    sync: function() {
                      return Backbone.sync.apply(this, arguments);
                    },
                
                    // Add a model, or list of models to the set.
                    add: function(models, options) {
                      return this.set(models, _.extend({merge: false}, options, addOptions));
                    },
                
                    // Remove a model, or a list of models from the set.
                    remove: function(models, options) {
                      var singular = !_.isArray(models);
                      models = singular ? [models] : _.clone(models);
                      options || (options = {});
                      var i, l, index, model;
                      for (i = 0, l = models.length; i < l; i++) {
                        model = models[i] = this.get(models[i]);
                        if (!model) continue;
                        delete this._byId[model.id];
                        delete this._byId[model.cid];
                        index = this.indexOf(model);
                        this.models.splice(index, 1);
                        this.length--;
                        if (!options.silent) {
                          options.index = index;
                          model.trigger('remove', model, this, options);
                        }
                        this._removeReference(model);
                      }
                      return singular ? models[0] : models;
                    },
                
                    // Update a collection by `set`-ing a new list of models, adding new ones,
                    // removing models that are no longer present, and merging models that
                    // already exist in the collection, as necessary. Similar to **Model#set**,
                    // the core operation for updating the data contained by the collection.
                    set: function(models, options) {
                      options = _.defaults({}, options, setOptions);
                      if (options.parse) models = this.parse(models, options);
                      var singular = !_.isArray(models);
                      models = singular ? (models ? [models] : []) : _.clone(models);
                      var i, l, id, model, attrs, existing, sort;
                      var at = options.at;
                      var targetModel = this.model;
                      var sortable = this.comparator && (at == null) && options.sort !== false;
                      var sortAttr = _.isString(this.comparator) ? this.comparator : null;
                      var toAdd = [], toRemove = [], modelMap = {};
                      var add = options.add, merge = options.merge, remove = options.remove;
                      var order = !sortable && add && remove ? [] : false;
                
                      // Turn bare objects into model references, and prevent invalid models
                      // from being added.
                      for (i = 0, l = models.length; i < l; i++) {
                        attrs = models[i];
                        if (attrs instanceof Model) {
                          id = model = attrs;
                        } else {
                          id = attrs[targetModel.prototype.idAttribute];
                        }
                
                        // If a duplicate is found, prevent it from being added and
                        // optionally merge it into the existing model.
                        if (existing = this.get(id)) {
                          if (remove) modelMap[existing.cid] = true;
                          if (merge) {
                            attrs = attrs === model ? model.attributes : attrs;
                            if (options.parse) attrs = existing.parse(attrs, options);
                            existing.set(attrs, options);
                            if (sortable && !sort && existing.hasChanged(sortAttr)) sort = true;
                          }
                          models[i] = existing;
                
                        // If this is a new, valid model, push it to the `toAdd` list.
                        } else if (add) {
                          model = models[i] = this._prepareModel(attrs, options);
                          if (!model) continue;
                          toAdd.push(model);
                
                          // Listen to added models' events, and index models for lookup by
                          // `id` and by `cid`.
                          model.on('all', this._onModelEvent, this);
                          this._byId[model.cid] = model;
                          if (model.id != null) this._byId[model.id] = model;
                        }
                        if (order) order.push(existing || model);
                      }
                
                      // Remove nonexistent models if appropriate.
                      if (remove) {
                        for (i = 0, l = this.length; i < l; ++i) {
                          if (!modelMap[(model = this.models[i]).cid]) toRemove.push(model);
                        }
                        if (toRemove.length) this.remove(toRemove, options);
                      }
                
                      // See if sorting is needed, update `length` and splice in new models.
                      if (toAdd.length || (order && order.length)) {
                        if (sortable) sort = true;
                        this.length += toAdd.length;
                        if (at != null) {
                          for (i = 0, l = toAdd.length; i < l; i++) {
                            this.models.splice(at + i, 0, toAdd[i]);
                          }
                        } else {
                          if (order) this.models.length = 0;
                          var orderedModels = order || toAdd;
                          for (i = 0, l = orderedModels.length; i < l; i++) {
                            this.models.push(orderedModels[i]);
                          }
                        }
                      }
                
                      // Silently sort the collection if appropriate.
                      if (sort) this.sort({silent: true});
                
                      // Unless silenced, it's time to fire all appropriate add/sort events.
                      if (!options.silent) {
                        for (i = 0, l = toAdd.length; i < l; i++) {
                          (model = toAdd[i]).trigger('add', model, this, options);
                        }
                        if (sort || (order && order.length)) this.trigger('sort', this, options);
                      }
                      
                      // Return the added (or merged) model (or models).
                      return singular ? models[0] : models;
                    },
                
                    // When you have more items than you want to add or remove individually,
                    // you can reset the entire set with a new list of models, without firing
                    // any granular `add` or `remove` events. Fires `reset` when finished.
                    // Useful for bulk operations and optimizations.
                    reset: function(models, options) {
                      options || (options = {});
                      for (var i = 0, l = this.models.length; i < l; i++) {
                        this._removeReference(this.models[i]);
                      }
                      options.previousModels = this.models;
                      this._reset();
                      models = this.add(models, _.extend({silent: true}, options));
                      if (!options.silent) this.trigger('reset', this, options);
                      return models;
                    },
                
                    // Add a model to the end of the collection.
                    push: function(model, options) {
                      return this.add(model, _.extend({at: this.length}, options));
                    },
                
                    // Remove a model from the end of the collection.
                    pop: function(options) {
                      var model = this.at(this.length - 1);
                      this.remove(model, options);
                      return model;
                    },
                
                    // Add a model to the beginning of the collection.
                    unshift: function(model, options) {
                      return this.add(model, _.extend({at: 0}, options));
                    },
                
                    // Remove a model from the beginning of the collection.
                    shift: function(options) {
                      var model = this.at(0);
                      this.remove(model, options);
                      return model;
                    },
                
                    // Slice out a sub-array of models from the collection.
                    slice: function() {
                      return slice.apply(this.models, arguments);
                    },
                
                    // Get a model from the set by id.
                    get: function(obj) {
                      if (obj == null) return void 0;
                      return this._byId[obj.id] || this._byId[obj.cid] || this._byId[obj];
                    },
                
                    // Get the model at the given index.
                    at: function(index) {
                      return this.models[index];
                    },
                
                    // Return models with matching attributes. Useful for simple cases of
                    // `filter`.
                    where: function(attrs, first) {
                      if (_.isEmpty(attrs)) return first ? void 0 : [];
                      return this[first ? 'find' : 'filter'](function(model) {
                        for (var key in attrs) {
                          if (attrs[key] !== model.get(key)) return false;
                        }
                        return true;
                      });
                    },
                
                    // Return the first model with matching attributes. Useful for simple cases
                    // of `find`.
                    findWhere: function(attrs) {
                      return this.where(attrs, true);
                    },
                
                    // Force the collection to re-sort itself. You don't need to call this under
                    // normal circumstances, as the set will maintain sort order as each item
                    // is added.
                    sort: function(options) {
                      if (!this.comparator) throw new Error('Cannot sort a set without a comparator');
                      options || (options = {});
                
                      // Run sort based on type of `comparator`.
                      if (_.isString(this.comparator) || this.comparator.length === 1) {
                        this.models = this.sortBy(this.comparator, this);
                      } else {
                        this.models.sort(_.bind(this.comparator, this));
                      }
                
                      if (!options.silent) this.trigger('sort', this, options);
                      return this;
                    },
                
                    // Pluck an attribute from each model in the collection.
                    pluck: function(attr) {
                      return _.invoke(this.models, 'get', attr);
                    },
                
                    // Fetch the default set of models for this collection, resetting the
                    // collection when they arrive. If `reset: true` is passed, the response
                    // data will be passed through the `reset` method instead of `set`.
                    fetch: function(options) {
                      options = options ? _.clone(options) : {};
                      if (options.parse === void 0) options.parse = true;
                      var success = options.success;
                      var collection = this;
                      options.success = function(resp) {
                        var method = options.reset ? 'reset' : 'set';
                        collection[method](resp, options);
                        if (success) success(collection, resp, options);
                        collection.trigger('sync', collection, resp, options);
                      };
                      wrapError(this, options);
                      return this.sync('read', this, options);
                    },
                
                    // Create a new instance of a model in this collection. Add the model to the
                    // collection immediately, unless `wait: true` is passed, in which case we
                    // wait for the server to agree.
                    create: function(model, options) {
                      options = options ? _.clone(options) : {};
                      if (!(model = this._prepareModel(model, options))) return false;
                      if (!options.wait) this.add(model, options);
                      var collection = this;
                      var success = options.success;
                      options.success = function(model, resp, options) {
                        if (options.wait) collection.add(model, options);
                        if (success) success(model, resp, options);
                      };
                      model.save(null, options);
                      return model;
                    },
                
                    // **parse** converts a response into a list of models to be added to the
                    // collection. The default implementation is just to pass it through.
                    parse: function(resp, options) {
                      return resp;
                    },
                
                    // Create a new collection with an identical list of models as this one.
                    clone: function() {
                      return new this.constructor(this.models);
                    },
                
                    // Private method to reset all internal state. Called when the collection
                    // is first initialized or reset.
                    _reset: function() {
                      this.length = 0;
                      this.models = [];
                      this._byId  = {};
                    },
                
                    // Prepare a hash of attributes (or other model) to be added to this
                    // collection.
                    _prepareModel: function(attrs, options) {
                      if (attrs instanceof Model) {
                        if (!attrs.collection) attrs.collection = this;
                        return attrs;
                      }
                      options = options ? _.clone(options) : {};
                      options.collection = this;
                      var model = new this.model(attrs, options);
                      if (!model.validationError) return model;
                      this.trigger('invalid', this, model.validationError, options);
                      return false;
                    },
                
                    // Internal method to sever a model's ties to a collection.
                    _removeReference: function(model) {
                      if (this === model.collection) delete model.collection;
                      model.off('all', this._onModelEvent, this);
                    },
                
                    // Internal method called every time a model in the set fires an event.
                    // Sets need to update their indexes when models change ids. All other
                    // events simply proxy through. "add" and "remove" events that originate
                    // in other collections are ignored.
                    _onModelEvent: function(event, model, collection, options) {
                      if ((event === 'add' || event === 'remove') && collection !== this) return;
                      if (event === 'destroy') this.remove(model, options);
                      if (model && event === 'change:' + model.idAttribute) {
                        delete this._byId[model.previous(model.idAttribute)];
                        if (model.id != null) this._byId[model.id] = model;
                      }
                      this.trigger.apply(this, arguments);
                    }
                
                  });
                
                  // Underscore methods that we want to implement on the Collection.
                  // 90% of the core usefulness of Backbone Collections is actually implemented
                  // right here:
                  var methods = ['forEach', 'each', 'map', 'collect', 'reduce', 'foldl',
                    'inject', 'reduceRight', 'foldr', 'find', 'detect', 'filter', 'select',
                    'reject', 'every', 'all', 'some', 'any', 'include', 'contains', 'invoke',
                    'max', 'min', 'toArray', 'size', 'first', 'head', 'take', 'initial', 'rest',
                    'tail', 'drop', 'last', 'without', 'difference', 'indexOf', 'shuffle',
                    'lastIndexOf', 'isEmpty', 'chain'];
                
                  // Mix in each Underscore method as a proxy to `Collection#models`.
                  _.each(methods, function(method) {
                    Collection.prototype[method] = function() {
                      var args = slice.call(arguments);
                      args.unshift(this.models);
                      return _[method].apply(_, args);
                    };
                  });
                
                  // Underscore methods that take a property name as an argument.
                  var attributeMethods = ['groupBy', 'countBy', 'sortBy'];
                
                  // Use attributes instead of properties.
                  _.each(attributeMethods, function(method) {
                    Collection.prototype[method] = function(value, context) {
                      var iterator = _.isFunction(value) ? value : function(model) {
                        return model.get(value);
                      };
                      return _[method](this.models, iterator, context);
                    };
                  });
                
                  // Backbone.View
                  // -------------
                
                  // Backbone Views are almost more convention than they are actual code. A View
                  // is simply a JavaScript object that represents a logical chunk of UI in the
                  // DOM. This might be a single item, an entire list, a sidebar or panel, or
                  // even the surrounding frame which wraps your whole app. Defining a chunk of
                  // UI as a **View** allows you to define your DOM events declaratively, without
                  // having to worry about render order ... and makes it easy for the view to
                  // react to specific changes in the state of your models.
                
                  // Creating a Backbone.View creates its initial element outside of the DOM,
                  // if an existing element is not provided...
                  var View = Backbone.View = function(options) {
                    this.cid = _.uniqueId('view');
                    options || (options = {});
                    _.extend(this, _.pick(options, viewOptions));
                    this._ensureElement();
                    this.initialize.apply(this, arguments);
                    this.delegateEvents();
                  };
                
                  // Cached regex to split keys for `delegate`.
                  var delegateEventSplitter = /^(\S+)\s*(.*)$/;
                
                  // List of view options to be merged as properties.
                  var viewOptions = ['model', 'collection', 'el', 'id', 'attributes', 'className', 'tagName', 'events'];
                
                  // Set up all inheritable **Backbone.View** properties and methods.
                  _.extend(View.prototype, Events, {
                
                    // The default `tagName` of a View's element is `"div"`.
                    tagName: 'div',
                
                    // jQuery delegate for element lookup, scoped to DOM elements within the
                    // current view. This should be preferred to global lookups where possible.
                    $: function(selector) {
                      return this.$el.find(selector);
                    },
                
                    // Initialize is an empty function by default. Override it with your own
                    // initialization logic.
                    initialize: function(){},
                
                    // **render** is the core function that your view should override, in order
                    // to populate its element (`this.el`), with the appropriate HTML. The
                    // convention is for **render** to always return `this`.
                    render: function() {
                      return this;
                    },
                
                    // Remove this view by taking the element out of the DOM, and removing any
                    // applicable Backbone.Events listeners.
                    remove: function() {
                      this.$el.remove();
                      this.stopListening();
                      return this;
                    },
                
                    // Change the view's element (`this.el` property), including event
                    // re-delegation.
                    setElement: function(element, delegate) {
                      if (this.$el) this.undelegateEvents();
                      this.$el = element instanceof Backbone.$ ? element : Backbone.$(element);
                      this.el = this.$el[0];
                      if (delegate !== false) this.delegateEvents();
                      return this;
                    },
                
                    // Set callbacks, where `this.events` is a hash of
                    //
                    // *{"event selector": "callback"}*
                    //
                    //     {
                    //       'mousedown .title':  'edit',
                    //       'click .button':     'save',
                    //       'click .open':       function(e) { ... }
                    //     }
                    //
                    // pairs. Callbacks will be bound to the view, with `this` set properly.
                    // Uses event delegation for efficiency.
                    // Omitting the selector binds the event to `this.el`.
                    // This only works for delegate-able events: not `focus`, `blur`, and
                    // not `change`, `submit`, and `reset` in Internet Explorer.
                    delegateEvents: function(events) {
                      if (!(events || (events = _.result(this, 'events')))) return this;
                      this.undelegateEvents();
                      for (var key in events) {
                        var method = events[key];
                        if (!_.isFunction(method)) method = this[events[key]];
                        if (!method) continue;
                
                        var match = key.match(delegateEventSplitter);
                        var eventName = match[1], selector = match[2];
                        method = _.bind(method, this);
                        eventName += '.delegateEvents' + this.cid;
                        if (selector === '') {
                          this.$el.on(eventName, method);
                        } else {
                          this.$el.on(eventName, selector, method);
                        }
                      }
                      return this;
                    },
                
                    // Clears all callbacks previously bound to the view with `delegateEvents`.
                    // You usually don't need to use this, but may wish to if you have multiple
                    // Backbone views attached to the same DOM element.
                    undelegateEvents: function() {
                      this.$el.off('.delegateEvents' + this.cid);
                      return this;
                    },
                
                    // Ensure that the View has a DOM element to render into.
                    // If `this.el` is a string, pass it through `$()`, take the first
                    // matching element, and re-assign it to `el`. Otherwise, create
                    // an element from the `id`, `className` and `tagName` properties.
                    _ensureElement: function() {
                      if (!this.el) {
                        var attrs = _.extend({}, _.result(this, 'attributes'));
                        if (this.id) attrs.id = _.result(this, 'id');
                        if (this.className) attrs['class'] = _.result(this, 'className');
                        var $el = Backbone.$('<' + _.result(this, 'tagName') + '>').attr(attrs);
                        this.setElement($el, false);
                      } else {
                        this.setElement(_.result(this, 'el'), false);
                      }
                    }
                
                  });
                
                  // Backbone.sync
                  // -------------
                
                  // Override this function to change the manner in which Backbone persists
                  // models to the server. You will be passed the type of request, and the
                  // model in question. By default, makes a RESTful Ajax request
                  // to the model's `url()`. Some possible customizations could be:
                  //
                  // * Use `setTimeout` to batch rapid-fire updates into a single request.
                  // * Send up the models as XML instead of JSON.
                  // * Persist models via WebSockets instead of Ajax.
                  //
                  // Turn on `Backbone.emulateHTTP` in order to send `PUT` and `DELETE` requests
                  // as `POST`, with a `_method` parameter containing the true HTTP method,
                  // as well as all requests with the body as `application/x-www-form-urlencoded`
                  // instead of `application/json` with the model in a param named `model`.
                  // Useful when interfacing with server-side languages like **PHP** that make
                  // it difficult to read the body of `PUT` requests.
                  Backbone.sync = function(method, model, options) {
                    var type = methodMap[method];
                
                    // Default options, unless specified.
                    _.defaults(options || (options = {}), {
                      emulateHTTP: Backbone.emulateHTTP,
                      emulateJSON: Backbone.emulateJSON
                    });
                
                    // Default JSON-request options.
                    var params = {type: type, dataType: 'json'};
                
                    // Ensure that we have a URL.
                    if (!options.url) {
                      params.url = _.result(model, 'url') || urlError();
                    }
                
                    // Ensure that we have the appropriate request data.
                    if (options.data == null && model && (method === 'create' || method === 'update' || method === 'patch')) {
                      params.contentType = 'application/json';
                      params.data = JSON.stringify(options.attrs || model.toJSON(options));
                    }
                
                    // For older servers, emulate JSON by encoding the request into an HTML-form.
                    if (options.emulateJSON) {
                      params.contentType = 'application/x-www-form-urlencoded';
                      params.data = params.data ? {model: params.data} : {};
                    }
                
                    // For older servers, emulate HTTP by mimicking the HTTP method with `_method`
                    // And an `X-HTTP-Method-Override` header.
                    if (options.emulateHTTP && (type === 'PUT' || type === 'DELETE' || type === 'PATCH')) {
                      params.type = 'POST';
                      if (options.emulateJSON) params.data._method = type;
                      var beforeSend = options.beforeSend;
                      options.beforeSend = function(xhr) {
                        xhr.setRequestHeader('X-HTTP-Method-Override', type);
                        if (beforeSend) return beforeSend.apply(this, arguments);
                      };
                    }
                
                    // Don't process data on a non-GET request.
                    if (params.type !== 'GET' && !options.emulateJSON) {
                      params.processData = false;
                    }
                
                    // If we're sending a `PATCH` request, and we're in an old Internet Explorer
                    // that still has ActiveX enabled by default, override jQuery to use that
                    // for XHR instead. Remove this line when jQuery supports `PATCH` on IE8.
                    if (params.type === 'PATCH' && noXhrPatch) {
                      params.xhr = function() {
                        return new ActiveXObject("Microsoft.XMLHTTP");
                      };
                    }
                
                    // Make the request, allowing the user to override any Ajax options.
                    var xhr = options.xhr = Backbone.ajax(_.extend(params, options));
                    model.trigger('request', model, xhr, options);
                    return xhr;
                  };
                
                  var noXhrPatch = typeof window !== 'undefined' && !!window.ActiveXObject && !(window.XMLHttpRequest && (new XMLHttpRequest).dispatchEvent);
                
                  // Map from CRUD to HTTP for our default `Backbone.sync` implementation.
                  var methodMap = {
                    'create': 'POST',
                    'update': 'PUT',
                    'patch':  'PATCH',
                    'delete': 'DELETE',
                    'read':   'GET'
                  };
                
                  // Set the default implementation of `Backbone.ajax` to proxy through to `$`.
                  // Override this if you'd like to use a different library.
                  Backbone.ajax = function() {
                    return Backbone.$.ajax.apply(Backbone.$, arguments);
                  };
                
                  // Backbone.Router
                  // ---------------
                
                  // Routers map faux-URLs to actions, and fire events when routes are
                  // matched. Creating a new one sets its `routes` hash, if not set statically.
                  var Router = Backbone.Router = function(options) {
                    options || (options = {});
                    if (options.routes) this.routes = options.routes;
                    this._bindRoutes();
                    this.initialize.apply(this, arguments);
                  };
                
                  // Cached regular expressions for matching named param parts and splatted
                  // parts of route strings.
                  var optionalParam = /\((.*?)\)/g;
                  var namedParam    = /(\(\?)?:\w+/g;
                  var splatParam    = /\*\w+/g;
                  var escapeRegExp  = /[\-{}\[\]+?.,\\\^$|#\s]/g;
                
                  // Set up all inheritable **Backbone.Router** properties and methods.
                  _.extend(Router.prototype, Events, {
                
                    // Initialize is an empty function by default. Override it with your own
                    // initialization logic.
                    initialize: function(){},
                
                    // Manually bind a single named route to a callback. For example:
                    //
                    //     this.route('search/:query/p:num', 'search', function(query, num) {
                    //       ...
                    //     });
                    //
                    route: function(route, name, callback) {
                      if (!_.isRegExp(route)) route = this._routeToRegExp(route);
                      if (_.isFunction(name)) {
                        callback = name;
                        name = '';
                      }
                      if (!callback) callback = this[name];
                      var router = this;
                      Backbone.history.route(route, function(fragment) {
                        var args = router._extractParameters(route, fragment);
                        callback && callback.apply(router, args);
                        router.trigger.apply(router, ['route:' + name].concat(args));
                        router.trigger('route', name, args);
                        Backbone.history.trigger('route', router, name, args);
                      });
                      return this;
                    },
                
                    // Simple proxy to `Backbone.history` to save a fragment into the history.
                    navigate: function(fragment, options) {
                      Backbone.history.navigate(fragment, options);
                      return this;
                    },
                
                    // Bind all defined routes to `Backbone.history`. We have to reverse the
                    // order of the routes here to support behavior where the most general
                    // routes can be defined at the bottom of the route map.
                    _bindRoutes: function() {
                      if (!this.routes) return;
                      this.routes = _.result(this, 'routes');
                      var route, routes = _.keys(this.routes);
                      while ((route = routes.pop()) != null) {
                        this.route(route, this.routes[route]);
                      }
                    },
                
                    // Convert a route string into a regular expression, suitable for matching
                    // against the current location hash.
                    _routeToRegExp: function(route) {
                      route = route.replace(escapeRegExp, '\\$&')
                                   .replace(optionalParam, '(?:$1)?')
                                   .replace(namedParam, function(match, optional) {
                                     return optional ? match : '([^\/]+)';
                                   })
                                   .replace(splatParam, '(.*?)');
                      return new RegExp('^' + route + '$');
                    },
                
                    // Given a route, and a URL fragment that it matches, return the array of
                    // extracted decoded parameters. Empty or unmatched parameters will be
                    // treated as `null` to normalize cross-browser behavior.
                    _extractParameters: function(route, fragment) {
                      var params = route.exec(fragment).slice(1);
                      return _.map(params, function(param) {
                        return param ? decodeURIComponent(param) : null;
                      });
                    }
                
                  });
                
                  // Backbone.History
                  // ----------------
                
                  // Handles cross-browser history management, based on either
                  // [pushState](http://diveintohtml5.info/history.html) and real URLs, or
                  // [onhashchange](https://developer.mozilla.org/en-US/docs/DOM/window.onhashchange)
                  // and URL fragments. If the browser supports neither (old IE, natch),
                  // falls back to polling.
                  var History = Backbone.History = function() {
                    this.handlers = [];
                    _.bindAll(this, 'checkUrl');
                
                    // Ensure that `History` can be used outside of the browser.
                    if (typeof window !== 'undefined') {
                      this.location = window.location;
                      this.history = window.history;
                    }
                  };
                
                  // Cached regex for stripping a leading hash/slash and trailing space.
                  var routeStripper = /^[#\/]|\s+$/g;
                
                  // Cached regex for stripping leading and trailing slashes.
                  var rootStripper = /^\/+|\/+$/g;
                
                  // Cached regex for detecting MSIE.
                  var isExplorer = /msie [\w.]+/;
                
                  // Cached regex for removing a trailing slash.
                  var trailingSlash = /\/$/;
                
                  // Cached regex for stripping urls of hash and query.
                  var pathStripper = /[?#].*$/;
                
                  // Has the history handling already been started?
                  History.started = false;
                
                  // Set up all inheritable **Backbone.History** properties and methods.
                  _.extend(History.prototype, Events, {
                
                    // The default interval to poll for hash changes, if necessary, is
                    // twenty times a second.
                    interval: 50,
                
                    // Gets the true hash value. Cannot use location.hash directly due to bug
                    // in Firefox where location.hash will always be decoded.
                    getHash: function(window) {
                      var match = (window || this).location.href.match(/#(.*)$/);
                      return match ? match[1] : '';
                    },
                
                    // Get the cross-browser normalized URL fragment, either from the URL,
                    // the hash, or the override.
                    getFragment: function(fragment, forcePushState) {
                      if (fragment == null) {
                        if (this._hasPushState || !this._wantsHashChange || forcePushState) {
                          fragment = this.location.pathname;
                          var root = this.root.replace(trailingSlash, '');
                          if (!fragment.indexOf(root)) fragment = fragment.slice(root.length);
                        } else {
                          fragment = this.getHash();
                        }
                      }
                      return fragment.replace(routeStripper, '');
                    },
                
                    // Start the hash change handling, returning `true` if the current URL matches
                    // an existing route, and `false` otherwise.
                    start: function(options) {
                      if (History.started) throw new Error("Backbone.history has already been started");
                      History.started = true;
                
                      // Figure out the initial configuration. Do we need an iframe?
                      // Is pushState desired ... is it available?
                      this.options          = _.extend({root: '/'}, this.options, options);
                      this.root             = this.options.root;
                      this._wantsHashChange = this.options.hashChange !== false;
                      this._wantsPushState  = !!this.options.pushState;
                      this._hasPushState    = !!(this.options.pushState && this.history && this.history.pushState);
                      var fragment          = this.getFragment();
                      var docMode           = document.documentMode;
                      var oldIE             = (isExplorer.exec(navigator.userAgent.toLowerCase()) && (!docMode || docMode <= 7));
                
                      // Normalize root to always include a leading and trailing slash.
                      this.root = ('/' + this.root + '/').replace(rootStripper, '/');
                
                      if (oldIE && this._wantsHashChange) {
                        this.iframe = Backbone.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo('body')[0].contentWindow;
                        this.navigate(fragment);
                      }
                
                      // Depending on whether we're using pushState or hashes, and whether
                      // 'onhashchange' is supported, determine how we check the URL state.
                      if (this._hasPushState) {
                        Backbone.$(window).on('popstate', this.checkUrl);
                      } else if (this._wantsHashChange && ('onhashchange' in window) && !oldIE) {
                        Backbone.$(window).on('hashchange', this.checkUrl);
                      } else if (this._wantsHashChange) {
                        this._checkUrlInterval = setInterval(this.checkUrl, this.interval);
                      }
                
                      // Determine if we need to change the base url, for a pushState link
                      // opened by a non-pushState browser.
                      this.fragment = fragment;
                      var loc = this.location;
                      var atRoot = loc.pathname.replace(/[^\/]$/, '$&/') === this.root;
                
                      // Transition from hashChange to pushState or vice versa if both are
                      // requested.
                      if (this._wantsHashChange && this._wantsPushState) {
                
                        // If we've started off with a route from a `pushState`-enabled
                        // browser, but we're currently in a browser that doesn't support it...
                        if (!this._hasPushState && !atRoot) {
                          this.fragment = this.getFragment(null, true);
                          this.location.replace(this.root + this.location.search + '#' + this.fragment);
                          // Return immediately as browser will do redirect to new url
                          return true;
                
                        // Or if we've started out with a hash-based route, but we're currently
                        // in a browser where it could be `pushState`-based instead...
                        } else if (this._hasPushState && atRoot && loc.hash) {
                          this.fragment = this.getHash().replace(routeStripper, '');
                          this.history.replaceState({}, document.title, this.root + this.fragment + loc.search);
                        }
                
                      }
                
                      if (!this.options.silent) return this.loadUrl();
                    },
                
                    // Disable Backbone.history, perhaps temporarily. Not useful in a real app,
                    // but possibly useful for unit testing Routers.
                    stop: function() {
                      Backbone.$(window).off('popstate', this.checkUrl).off('hashchange', this.checkUrl);
                      clearInterval(this._checkUrlInterval);
                      History.started = false;
                    },
                
                    // Add a route to be tested when the fragment changes. Routes added later
                    // may override previous routes.
                    route: function(route, callback) {
                      this.handlers.unshift({route: route, callback: callback});
                    },
                
                    // Checks the current URL to see if it has changed, and if it has,
                    // calls `loadUrl`, normalizing across the hidden iframe.
                    checkUrl: function(e) {
                      var current = this.getFragment();
                      if (current === this.fragment && this.iframe) {
                        current = this.getFragment(this.getHash(this.iframe));
                      }
                      if (current === this.fragment) return false;
                      if (this.iframe) this.navigate(current);
                      this.loadUrl();
                    },
                
                    // Attempt to load the current URL fragment. If a route succeeds with a
                    // match, returns `true`. If no defined routes matches the fragment,
                    // returns `false`.
                    loadUrl: function(fragment) {
                      fragment = this.fragment = this.getFragment(fragment);
                      return _.any(this.handlers, function(handler) {
                        if (handler.route.test(fragment)) {
                          handler.callback(fragment);
                          return true;
                        }
                      });
                    },
                
                    // Save a fragment into the hash history, or replace the URL state if the
                    // 'replace' option is passed. You are responsible for properly URL-encoding
                    // the fragment in advance.
                    //
                    // The options object can contain `trigger: true` if you wish to have the
                    // route callback be fired (not usually desirable), or `replace: true`, if
                    // you wish to modify the current URL without adding an entry to the history.
                    navigate: function(fragment, options) {
                      if (!History.started) return false;
                      if (!options || options === true) options = {trigger: !!options};
                
                      var url = this.root + (fragment = this.getFragment(fragment || ''));
                
                      // Strip the fragment of the query and hash for matching.
                      fragment = fragment.replace(pathStripper, '');
                
                      if (this.fragment === fragment) return;
                      this.fragment = fragment;
                
                      // Don't include a trailing slash on the root.
                      if (fragment === '' && url !== '/') url = url.slice(0, -1);
                
                      // If pushState is available, we use it to set the fragment as a real URL.
                      if (this._hasPushState) {
                        this.history[options.replace ? 'replaceState' : 'pushState']({}, document.title, url);
                
                      // If hash changes haven't been explicitly disabled, update the hash
                      // fragment to store history.
                      } else if (this._wantsHashChange) {
                        this._updateHash(this.location, fragment, options.replace);
                        if (this.iframe && (fragment !== this.getFragment(this.getHash(this.iframe)))) {
                          // Opening and closing the iframe tricks IE7 and earlier to push a
                          // history entry on hash-tag change.  When replace is true, we don't
                          // want this.
                          if(!options.replace) this.iframe.document.open().close();
                          this._updateHash(this.iframe.location, fragment, options.replace);
                        }
                
                      // If you've told us that you explicitly don't want fallback hashchange-
                      // based history, then `navigate` becomes a page refresh.
                      } else {
                        return this.location.assign(url);
                      }
                      if (options.trigger) return this.loadUrl(fragment);
                    },
                
                    // Update the hash location, either replacing the current entry, or adding
                    // a new one to the browser history.
                    _updateHash: function(location, fragment, replace) {
                      if (replace) {
                        var href = location.href.replace(/(javascript:|#).*$/, '');
                        location.replace(href + '#' + fragment);
                      } else {
                        // Some browsers require that `hash` contains a leading #.
                        location.hash = '#' + fragment;
                      }
                    }
                
                  });
                
                  // Create the default Backbone.history.
                  Backbone.history = new History;
                
                  // Helpers
                  // -------
                
                  // Helper function to correctly set up the prototype chain, for subclasses.
                  // Similar to `goog.inherits`, but uses a hash of prototype properties and
                  // class properties to be extended.
                  var extend = function(protoProps, staticProps) {
                    var parent = this;
                    var child;
                
                    // The constructor function for the new subclass is either defined by you
                    // (the "constructor" property in your `extend` definition), or defaulted
                    // by us to simply call the parent's constructor.
                    if (protoProps && _.has(protoProps, 'constructor')) {
                      child = protoProps.constructor;
                    } else {
                      child = function(){ return parent.apply(this, arguments); };
                    }
                
                    // Add static properties to the constructor function, if supplied.
                    _.extend(child, parent, staticProps);
                
                    // Set the prototype chain to inherit from `parent`, without calling
                    // `parent`'s constructor function.
                    var Surrogate = function(){ this.constructor = child; };
                    Surrogate.prototype = parent.prototype;
                    child.prototype = new Surrogate;
                
                    // Add prototype properties (instance properties) to the subclass,
                    // if supplied.
                    if (protoProps) _.extend(child.prototype, protoProps);
                
                    // Set a convenience property in case the parent's prototype is needed
                    // later.
                    child.__super__ = parent.prototype;
                
                    return child;
                  };
                
                  // Set up inheritance for the model, collection, router, view and history.
                  Model.extend = Collection.extend = Router.extend = View.extend = History.extend = extend;
                
                  // Throw an error when a URL is needed, and none is supplied.
                  var urlError = function() {
                    throw new Error('A "url" property or function must be specified');
                  };
                
                  // Wrap an optional error callback with a fallback error event.
                  var wrapError = function(model, options) {
                    var error = options.error;
                    options.error = function(resp) {
                      if (error) error(model, resp, options);
                      model.trigger('error', model, resp, options);
                    };
                  };
                
                  return Backbone;
                }));
                
                (function() {
                  define('common/custom',["underscore"], function(_) {
                    var monkey_patch;
                    monkey_patch = function() {
                      return _.uniqueId = function(prefix) {
                        var hexDigits, i, s, uuid, _i;
                        s = [];
                        hexDigits = "0123456789ABCDEF";
                        for (i = _i = 0; _i <= 31; i = ++_i) {
                          s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);
                        }
                        s[12] = "4";
                        s[16] = hexDigits.substr((s[16] & 0x3) | 0x8, 1);
                        uuid = s.join("");
                        if (prefix) {
                          return prefix + "-" + uuid;
                        } else {
                          return uuid;
                        }
                      };
                    };
                    _.isNullOrUndefined = function(x) {
                      return _.isNull(x) || _.isUndefined(x);
                    };
                    _.setdefault = function(obj, key, value) {
                      if (_.has(obj, key)) {
                        return obj[key];
                      } else {
                        obj[key] = value;
                        return value;
                      }
                    };
                    return {
                      "monkey_patch": monkey_patch
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=custom.js.map
                */;
                (function(root) {
                define("kiwi", [], function() {
                  return (function() {
                /*-----------------------------------------------------------------------------
                | Copyright (c) 2014, Nucleic Development Team.
                |
                | Distributed under the terms of the Modified BSD License.
                |
                | The full license is in the file COPYING.txt, distributed with this software.
                |----------------------------------------------------------------------------*/
                var tsu;
                (function (tsu) {
                
                
                
                
                
                
                    /**
                    * An iterator for an array of items.
                    */
                    var ArrayIterator = (function () {
                        /*
                        * Construct a new ArrayIterator.
                        *
                        * @param array The array of items to iterate.
                        * @param [index] The index at which to start iteration.
                        */
                        function ArrayIterator(array, index) {
                            if (typeof index === "undefined") { index = 0; }
                            this._array = array;
                            this._index = Math.max(0, Math.min(index, array.length));
                        }
                        /**
                        * Returns the next item from the iterator or undefined.
                        */
                        ArrayIterator.prototype.__next__ = function () {
                            return this._array[this._index++];
                        };
                
                        /**
                        * Returns this same iterator.
                        */
                        ArrayIterator.prototype.__iter__ = function () {
                            return this;
                        };
                        return ArrayIterator;
                    })();
                    tsu.ArrayIterator = ArrayIterator;
                
                    /**
                    * A reverse iterator for an array of items.
                    */
                    var ReverseArrayIterator = (function () {
                        /**
                        * Construct a new ReverseArrayIterator.
                        *
                        * @param array The array of items to iterate.
                        * @param [index] The index at which to start iteration.
                        */
                        function ReverseArrayIterator(array, index) {
                            if (typeof index === "undefined") { index = array.length; }
                            this._array = array;
                            this._index = Math.max(0, Math.min(index, array.length));
                        }
                        /**
                        * Returns the next item from the iterator or undefined.
                        */
                        ReverseArrayIterator.prototype.__next__ = function () {
                            return this._array[--this._index];
                        };
                
                        /**
                        * Returns this same iterator.
                        */
                        ReverseArrayIterator.prototype.__iter__ = function () {
                            return this;
                        };
                        return ReverseArrayIterator;
                    })();
                    tsu.ReverseArrayIterator = ReverseArrayIterator;
                
                
                
                    function iter(object) {
                        if (object instanceof Array) {
                            return new ArrayIterator(object);
                        }
                        return object.__iter__();
                    }
                    tsu.iter = iter;
                
                
                
                    function reversed(object) {
                        if (object instanceof Array) {
                            return new ReverseArrayIterator(object);
                        }
                        return object.__reversed__();
                    }
                    tsu.reversed = reversed;
                
                    /**
                    * Returns the next value from an iterator, or undefined.
                    */
                    function next(iterator) {
                        return iterator.__next__();
                    }
                    tsu.next = next;
                
                
                
                    function asArray(object) {
                        if (object instanceof Array) {
                            return object.slice();
                        }
                        var value;
                        var array = [];
                        var it = object.__iter__();
                        while ((value = it.__next__()) !== undefined) {
                            array.push(value);
                        }
                        return array;
                    }
                    tsu.asArray = asArray;
                
                
                
                    function forEach(object, callback) {
                        if (object instanceof Array) {
                            for (var i = 0, n = object.length; i < n; ++i) {
                                if (callback(object[i]) === false) {
                                    return;
                                }
                            }
                        } else {
                            var value;
                            var it = object.__iter__();
                            while ((value = it.__next__()) !== undefined) {
                                if (callback(value) === false) {
                                    return;
                                }
                            }
                        }
                    }
                    tsu.forEach = forEach;
                
                
                
                    function map(object, callback) {
                        var result = [];
                        if (object instanceof Array) {
                            for (var i = 0, n = object.length; i < n; ++i) {
                                result.push(callback(object[i]));
                            }
                        } else {
                            var value;
                            var it = object.__iter__();
                            while ((value = it.__next__()) !== undefined) {
                                result.push(callback(value));
                            }
                        }
                        return result;
                    }
                    tsu.map = map;
                
                
                
                    function filter(object, callback) {
                        var value;
                        var result = [];
                        if (object instanceof Array) {
                            for (var i = 0, n = object.length; i < n; ++i) {
                                value = object[i];
                                if (callback(value)) {
                                    result.push(value);
                                }
                            }
                        } else {
                            var it = object.__iter__();
                            while ((value = it.__next__()) !== undefined) {
                                if (callback(value)) {
                                    result.push(value);
                                }
                            }
                        }
                        return result;
                    }
                    tsu.filter = filter;
                })(tsu || (tsu = {}));
                /*-----------------------------------------------------------------------------
                | Copyright (c) 2014, Nucleic Development Team.
                |
                | Distributed under the terms of the Modified BSD License.
                |
                | The full license is in the file COPYING.txt, distributed with this software.
                |----------------------------------------------------------------------------*/
                var tsu;
                (function (tsu) {
                
                
                    /**
                    * A class which defines a generic pair object.
                    */
                    var Pair = (function () {
                        /**
                        * Construct a new Pair object.
                        *
                        * @param first The first item of the pair.
                        * @param second The second item of the pair.
                        */
                        function Pair(first, second) {
                            this.first = first;
                            this.second = second;
                        }
                        /**
                        * Create a copy of the pair.
                        */
                        Pair.prototype.copy = function () {
                            return new Pair(this.first, this.second);
                        };
                        return Pair;
                    })();
                    tsu.Pair = Pair;
                })(tsu || (tsu = {}));
                /*-----------------------------------------------------------------------------
                | Copyright (c) 2014, Nucleic Development Team.
                |
                | Distributed under the terms of the Modified BSD License.
                |
                | The full license is in the file COPYING.txt, distributed with this software.
                |----------------------------------------------------------------------------*/
                /// <reference path="iterator.ts"/>
                /// <reference path="utility.ts"/>
                var tsu;
                (function (tsu) {
                    /**
                    * Perform a lower bound search on a sorted array.
                    *
                    * @param array The array of sorted items to search.
                    * @param value The value to located in the array.
                    * @param compare The value comparison function.
                    * @returns The index of the first element in the array which
                    *          compares greater than or equal to the given value.
                    */
                    function lowerBound(array, value, compare) {
                        var begin = 0;
                        var n = array.length;
                        var half;
                        var middle;
                        while (n > 0) {
                            half = n >> 1;
                            middle = begin + half;
                            if (compare(array[middle], value) < 0) {
                                begin = middle + 1;
                                n -= half + 1;
                            } else {
                                n = half;
                            }
                        }
                        return begin;
                    }
                    tsu.lowerBound = lowerBound;
                
                    /**
                    * Perform a binary search on a sorted array.
                    *
                    * @param array The array of sorted items to search.
                    * @param value The value to located in the array.
                    * @param compare The value comparison function.
                    * @returns The index of the found item, or -1.
                    */
                    function binarySearch(array, value, compare) {
                        var index = lowerBound(array, value, compare);
                        if (index === array.length) {
                            return -1;
                        }
                        var item = array[index];
                        if (compare(item, value) !== 0) {
                            return -1;
                        }
                        return index;
                    }
                    tsu.binarySearch = binarySearch;
                
                    /**
                    * Perform a binary find on a sorted array.
                    *
                    * @param array The array of sorted items to search.
                    * @param value The value to located in the array.
                    * @param compare The value comparison function.
                    * @returns The found item in the array, or undefined.
                    */
                    function binaryFind(array, value, compare) {
                        var index = lowerBound(array, value, compare);
                        if (index === array.length) {
                            return undefined;
                        }
                        var item = array[index];
                        if (compare(item, value) !== 0) {
                            return undefined;
                        }
                        return item;
                    }
                    tsu.binaryFind = binaryFind;
                
                
                
                    function asSet(items, compare) {
                        var array = tsu.asArray(items);
                        var n = array.length;
                        if (n <= 1) {
                            return array;
                        }
                        array.sort(compare);
                        var result = [array[0]];
                        for (var i = 1, j = 0; i < n; ++i) {
                            var item = array[i];
                            if (compare(result[j], item) !== 0) {
                                result.push(item);
                                ++j;
                            }
                        }
                        return result;
                    }
                    tsu.asSet = asSet;
                
                    /**
                    * Test whether a two sorted arrays sets are disjoint.
                    *
                    * @param first The first sorted array set.
                    * @param second The second sorted array set.
                    * @param compare The value comparison function.
                    * @returns true if the sets are disjoint, false otherwise.
                    */
                    function setIsDisjoint(first, second, compare) {
                        var i = 0, j = 0;
                        var len1 = first.length;
                        var len2 = second.length;
                        while (i < len1 && j < len2) {
                            var v = compare(first[i], second[j]);
                            if (v < 0) {
                                ++i;
                            } else if (v > 0) {
                                ++j;
                            } else {
                                return false;
                            }
                        }
                        return true;
                    }
                    tsu.setIsDisjoint = setIsDisjoint;
                
                    /**
                    * Test whether one sorted array set is the subset of another.
                    *
                    * @param first The potential subset.
                    * @param second The potential superset.
                    * @param compare The value comparison function.
                    * @returns true if the first set is a subset of the second.
                    */
                    function setIsSubset(first, second, compare) {
                        var len1 = first.length;
                        var len2 = second.length;
                        if (len1 > len2) {
                            return false;
                        }
                        var i = 0, j = 0;
                        while (i < len1 && j < len2) {
                            var v = compare(first[i], second[j]);
                            if (v < 0) {
                                return false;
                            } else if (v > 0) {
                                ++j;
                            } else {
                                ++i;
                                ++j;
                            }
                        }
                        if (i < len1) {
                            return false;
                        }
                        return true;
                    }
                    tsu.setIsSubset = setIsSubset;
                
                    /**
                    * Create the set union of two sorted set arrays.
                    var j = 0;
                    *
                    * @param first The first sorted array set.
                    * @param second The second sorted array set.
                    * @param compare The value comparison function.
                    * @returns The set union of the two arrays.
                    */
                    function setUnion(first, second, compare) {
                        var i = 0, j = 0;
                        var len1 = first.length;
                        var len2 = second.length;
                        var merged = [];
                        while (i < len1 && j < len2) {
                            var a = first[i];
                            var b = second[j];
                            var v = compare(a, b);
                            if (v < 0) {
                                merged.push(a);
                                ++i;
                            } else if (v > 0) {
                                merged.push(b);
                                ++j;
                            } else {
                                merged.push(a);
                                ++i;
                                ++j;
                            }
                        }
                        while (i < len1) {
                            merged.push(first[i]);
                            ++i;
                        }
                        while (j < len2) {
                            merged.push(second[j]);
                            ++j;
                        }
                        return merged;
                    }
                    tsu.setUnion = setUnion;
                
                    /**
                    * Create a set intersection of two sorted set arrays.
                    *
                    * @param first The first sorted array set.
                    * @param second The second sorted array set.
                    * @param compare The value comparison function.
                    * @returns The set intersection of the two arrays.
                    */
                    function setIntersection(first, second, compare) {
                        var i = 0, j = 0;
                        var len1 = first.length;
                        var len2 = second.length;
                        var merged = [];
                        while (i < len1 && j < len2) {
                            var a = first[i];
                            var b = second[j];
                            var v = compare(a, b);
                            if (v < 0) {
                                ++i;
                            } else if (v > 0) {
                                ++j;
                            } else {
                                merged.push(a);
                                ++i;
                                ++j;
                            }
                        }
                        return merged;
                    }
                    tsu.setIntersection = setIntersection;
                
                    /**
                    * Create a set difference of two sorted set arrays.
                    *
                    * @param first The first sorted array set.
                    * @param second The second sorted array set.
                    * @param compare The value comparison function.
                    * @returns The set difference of the two arrays.
                    */
                    function setDifference(first, second, compare) {
                        var i = 0, j = 0;
                        var len1 = first.length;
                        var len2 = second.length;
                        var merged = [];
                        while (i < len1 && j < len2) {
                            var a = first[i];
                            var b = second[j];
                            var v = compare(a, b);
                            if (v < 0) {
                                merged.push(a);
                                ++i;
                            } else if (v > 0) {
                                ++j;
                            } else {
                                ++i;
                                ++j;
                            }
                        }
                        while (i < len1) {
                            merged.push(first[i]);
                            ++i;
                        }
                        return merged;
                    }
                    tsu.setDifference = setDifference;
                
                    /**
                    * Create a set symmetric difference of two sorted set arrays.
                    *
                    * @param first The first sorted array set.
                    * @param second The second sorted array set.
                    * @param compare The value comparison function.
                    * @returns The set symmetric difference of the two arrays.
                    */
                    function setSymmetricDifference(first, second, compare) {
                        var i = 0, j = 0;
                        var len1 = first.length;
                        var len2 = second.length;
                        var merged = [];
                        while (i < len1 && j < len2) {
                            var a = first[i];
                            var b = second[j];
                            var v = compare(a, b);
                            if (v < 0) {
                                merged.push(a);
                                ++i;
                            } else if (v > 0) {
                                merged.push(b);
                                ++j;
                            } else {
                                ++i;
                                ++j;
                            }
                        }
                        while (i < len1) {
                            merged.push(first[i]);
                            ++i;
                        }
                        while (j < len2) {
                            merged.push(second[j]);
                            ++j;
                        }
                        return merged;
                    }
                    tsu.setSymmetricDifference = setSymmetricDifference;
                })(tsu || (tsu = {}));
                /*-----------------------------------------------------------------------------
                | Copyright (c) 2014, Nucleic Development Team.
                |
                | Distributed under the terms of the Modified BSD License.
                |
                | The full license is in the file COPYING.txt, distributed with this software.
                |----------------------------------------------------------------------------*/
                /// <reference path="iterator.ts"/>
                var tsu;
                (function (tsu) {
                    /**
                    * A base class for implementing array-based data structures.
                    *
                    * @class
                    */
                    var ArrayBase = (function () {
                        function ArrayBase() {
                            /*
                            * The internal data array.
                            *
                            * @protected
                            */
                            this._array = [];
                        }
                        /**
                        * Returns the number of items in the array.
                        */
                        ArrayBase.prototype.size = function () {
                            return this._array.length;
                        };
                
                        /**
                        * Returns true if the array is empty.
                        */
                        ArrayBase.prototype.empty = function () {
                            return this._array.length === 0;
                        };
                
                        /**
                        * Returns the item at the given array index.
                        *
                        * @param index The integer index of the desired item.
                        */
                        ArrayBase.prototype.itemAt = function (index) {
                            return this._array[index];
                        };
                
                        /**
                        * Removes and returns the item at the given index.
                        *
                        * @param index The integer index of the desired item.
                        */
                        ArrayBase.prototype.takeAt = function (index) {
                            return this._array.splice(index, 1)[0];
                        };
                
                        /**
                        * Clear the internal contents of array.
                        */
                        ArrayBase.prototype.clear = function () {
                            this._array = [];
                        };
                
                        /**
                        * Swap this array's contents with another array.
                        *
                        * @param other The array base to use for the swap.
                        */
                        ArrayBase.prototype.swap = function (other) {
                            var array = this._array;
                            this._array = other._array;
                            other._array = array;
                        };
                
                        /**
                        * Returns an iterator over the array of items.
                        */
                        ArrayBase.prototype.__iter__ = function () {
                            return tsu.iter(this._array);
                        };
                
                        /**
                        * Returns a reverse iterator over the array of items.
                        */
                        ArrayBase.prototype.__reversed__ = function () {
                            return tsu.reversed(this._array);
                        };
                        return ArrayBase;
                    })();
                    tsu.ArrayBase = ArrayBase;
                })(tsu || (tsu = {}));
                /*-----------------------------------------------------------------------------
                | Copyright (c) 2014, Nucleic Development Team.
                |
                | Distributed under the terms of the Modified BSD License.
                |
                | The full license is in the file COPYING.txt, distributed with this software.
                |----------------------------------------------------------------------------*/
                var __extends = this.__extends || function (d, b) {
                    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
                    function __() { this.constructor = d; }
                    __.prototype = b.prototype;
                    d.prototype = new __();
                };
                /// <reference path="algorithm.ts"/>
                /// <reference path="array_base.ts"/>
                /// <reference path="iterator.ts"/>
                /// <reference path="utility.ts"/>
                var tsu;
                (function (tsu) {
                    /**
                    * A mapping container build on a sorted array.
                    *
                    * @class
                    */
                    var AssociativeArray = (function (_super) {
                        __extends(AssociativeArray, _super);
                        /**
                        * Construct a new AssociativeArray.
                        *
                        * @param compare The key comparison function.
                        */
                        function AssociativeArray(compare) {
                            _super.call(this);
                            this._compare = compare;
                            this._wrapped = wrapCompare(compare);
                        }
                        /**
                        * Returns the key comparison function used by this array.
                        */
                        AssociativeArray.prototype.comparitor = function () {
                            return this._compare;
                        };
                
                        /**
                        * Return the array index of the given key, or -1.
                        *
                        * @param key The key to locate in the array.
                        */
                        AssociativeArray.prototype.indexOf = function (key) {
                            return tsu.binarySearch(this._array, key, this._wrapped);
                        };
                
                        /**
                        * Returns true if the key is in the array, false otherwise.
                        *
                        * @param key The key to locate in the array.
                        */
                        AssociativeArray.prototype.contains = function (key) {
                            return tsu.binarySearch(this._array, key, this._wrapped) >= 0;
                        };
                
                        /**
                        * Returns the pair associated with the given key, or undefined.
                        *
                        * @param key The key to locate in the array.
                        */
                        AssociativeArray.prototype.find = function (key) {
                            return tsu.binaryFind(this._array, key, this._wrapped);
                        };
                
                        /**
                        * Returns the pair associated with the key if it exists.
                        *
                        * If the key does not exist, a new pair will be created and
                        * inserted using the value created by the given factory.
                        *
                        * @param key The key to locate in the array.
                        * @param factory The function which creates the default value.
                        */
                        AssociativeArray.prototype.setDefault = function (key, factory) {
                            var array = this._array;
                            var index = tsu.lowerBound(array, key, this._wrapped);
                            if (index === array.length) {
                                var pair = new tsu.Pair(key, factory());
                                array.push(pair);
                                return pair;
                            }
                            var currPair = array[index];
                            if (this._compare(currPair.first, key) !== 0) {
                                var pair = new tsu.Pair(key, factory());
                                array.splice(index, 0, pair);
                                return pair;
                            }
                            return currPair;
                        };
                
                        /**
                        * Insert the pair into the array and return the pair.
                        *
                        * This will overwrite any existing entry in the array.
                        *
                        * @param key The key portion of the pair.
                        * @param value The value portion of the pair.
                        */
                        AssociativeArray.prototype.insert = function (key, value) {
                            var array = this._array;
                            var index = tsu.lowerBound(array, key, this._wrapped);
                            if (index === array.length) {
                                var pair = new tsu.Pair(key, value);
                                array.push(pair);
                                return pair;
                            }
                            var currPair = array[index];
                            if (this._compare(currPair.first, key) !== 0) {
                                var pair = new tsu.Pair(key, value);
                                array.splice(index, 0, pair);
                                return pair;
                            }
                            currPair.second = value;
                            return currPair;
                        };
                
                        AssociativeArray.prototype.update = function (object) {
                            var _this = this;
                            if (object instanceof AssociativeArray) {
                                var obj = object;
                                this._array = merge(this._array, obj._array, this._compare);
                            } else {
                                tsu.forEach(object, function (pair) {
                                    _this.insert(pair.first, pair.second);
                                });
                            }
                        };
                
                        /**
                        * Removes and returns the pair for the given key, or undefined.
                        *
                        * @param key The key to remove from the map.
                        */
                        AssociativeArray.prototype.erase = function (key) {
                            var array = this._array;
                            var index = tsu.binarySearch(array, key, this._wrapped);
                            if (index < 0) {
                                return undefined;
                            }
                            return array.splice(index, 1)[0];
                        };
                
                        /**
                        * Create a copy of this associative array.
                        */
                        AssociativeArray.prototype.copy = function () {
                            var theCopy = new AssociativeArray(this._compare);
                            var copyArray = theCopy._array;
                            var thisArray = this._array;
                            for (var i = 0, n = thisArray.length; i < n; ++i) {
                                copyArray.push(thisArray[i].copy());
                            }
                            return theCopy;
                        };
                        return AssociativeArray;
                    })(tsu.ArrayBase);
                    tsu.AssociativeArray = AssociativeArray;
                
                    /**
                    * An internal which wraps a comparison key function.
                    */
                    function wrapCompare(cmp) {
                        return function (pair, value) {
                            return cmp(pair.first, value);
                        };
                    }
                
                    /**
                    * An internal function which merges two ordered pair arrays.
                    */
                    function merge(first, second, compare) {
                        var i = 0, j = 0;
                        var len1 = first.length;
                        var len2 = second.length;
                        var merged = [];
                        while (i < len1 && j < len2) {
                            var a = first[i];
                            var b = second[j];
                            var v = compare(a.first, b.first);
                            if (v < 0) {
                                merged.push(a.copy());
                                ++i;
                            } else if (v > 0) {
                                merged.push(b.copy());
                                ++j;
                            } else {
                                merged.push(b.copy());
                                ++i;
                                ++j;
                            }
                        }
                        while (i < len1) {
                            merged.push(first[i].copy());
                            ++i;
                        }
                        while (j < len2) {
                            merged.push(second[j].copy());
                            ++j;
                        }
                        return merged;
                    }
                })(tsu || (tsu = {}));
                /*-----------------------------------------------------------------------------
                | Copyright (c) 2014, Nucleic Development Team.
                |
                | Distributed under the terms of the Modified BSD License.
                |
                | The full license is in the file COPYING.txt, distributed with this software.
                |----------------------------------------------------------------------------*/
                /// <reference path="algorithm.ts"/>
                /// <reference path="array_base.ts"/>
                /// <reference path="iterator.ts"/>
                /// <reference path="utility.ts"/>
                var tsu;
                (function (tsu) {
                    /**
                    * A set container built on a sorted array.
                    *
                    * @class
                    */
                    var UniqueArray = (function (_super) {
                        __extends(UniqueArray, _super);
                        /**
                        * Construct a new UniqueArray.
                        *
                        * @param compare The item comparison function.
                        */
                        function UniqueArray(compare) {
                            _super.call(this);
                            this._compare = compare;
                        }
                        /**
                        * Returns the comparison function for this array.
                        */
                        UniqueArray.prototype.comparitor = function () {
                            return this._compare;
                        };
                
                        /**
                        * Return the array index of the given item, or -1.
                        *
                        * @param item The item to locate in the array.
                        */
                        UniqueArray.prototype.indexOf = function (item) {
                            return tsu.binarySearch(this._array, item, this._compare);
                        };
                
                        /**
                        * Returns true if the item is in the array, false otherwise.
                        *
                        * @param item The item to locate in the array.
                        */
                        UniqueArray.prototype.contains = function (item) {
                            return tsu.binarySearch(this._array, item, this._compare) >= 0;
                        };
                
                        /**
                        * Insert an item into the array.
                        *
                        * Returns true if the item is new to the set, false otherwise.
                        *
                        * @param item The item to insert into the array.
                        */
                        UniqueArray.prototype.insert = function (item) {
                            var array = this._array;
                            var index = tsu.lowerBound(array, item, this._compare);
                            if (index === array.length) {
                                array.push(item);
                                return true;
                            }
                            if (this._compare(array[index], item) !== 0) {
                                array.splice(index, 0, item);
                                return true;
                            }
                            return false;
                        };
                
                        /**
                        * Remove an item from the array.
                        *
                        * Returns true if the item was removed, false otherwise.
                        *
                        * @param item The item to remove from the array.
                        */
                        UniqueArray.prototype.erase = function (item) {
                            var array = this._array;
                            var index = tsu.binarySearch(array, item, this._compare);
                            if (index < 0) {
                                return false;
                            }
                            array.splice(index, 1);
                            return true;
                        };
                
                        /**
                        * Create a copy of this unique array.
                        */
                        UniqueArray.prototype.copy = function () {
                            var theCopy = new UniqueArray(this._compare);
                            theCopy._array = this._array.slice();
                            return theCopy;
                        };
                
                        UniqueArray.prototype.isDisjoint = function (object) {
                            var cmp = this._compare;
                            var other = toSet(object, cmp);
                            return tsu.setIsDisjoint(this._array, other, cmp);
                        };
                
                        UniqueArray.prototype.isSubset = function (object) {
                            var cmp = this._compare;
                            var other = toSet(object, cmp);
                            return tsu.setIsSubset(this._array, other, cmp);
                        };
                
                        UniqueArray.prototype.isSuperset = function (object) {
                            var cmp = this._compare;
                            var other = toSet(object, cmp);
                            return tsu.setIsSubset(other, this._array, cmp);
                        };
                
                        UniqueArray.prototype.union = function (object) {
                            var cmp = this._compare;
                            var res = new UniqueArray(cmp);
                            var other = toSet(object, cmp);
                            res._array = tsu.setUnion(this._array, other, cmp);
                            return res;
                        };
                
                        UniqueArray.prototype.intersection = function (object) {
                            var cmp = this._compare;
                            var res = new UniqueArray(cmp);
                            var other = toSet(object, cmp);
                            res._array = tsu.setIntersection(this._array, other, cmp);
                            return res;
                        };
                
                        UniqueArray.prototype.difference = function (object) {
                            var cmp = this._compare;
                            var res = new UniqueArray(cmp);
                            var other = toSet(object, cmp);
                            res._array = tsu.setDifference(this._array, other, cmp);
                            return res;
                        };
                
                        UniqueArray.prototype.symmetricDifference = function (object) {
                            var cmp = this._compare;
                            var res = new UniqueArray(cmp);
                            var other = toSet(object, cmp);
                            res._array = tsu.setSymmetricDifference(this._array, other, cmp);
                            return res;
                        };
                
                        UniqueArray.prototype.unionUpdate = function (object) {
                            var cmp = this._compare;
                            var other = toSet(object, cmp);
                            this._array = tsu.setUnion(this._array, other, cmp);
                        };
                
                        UniqueArray.prototype.intersectionUpdate = function (object) {
                            var cmp = this._compare;
                            var other = toSet(object, cmp);
                            this._array = tsu.setIntersection(this._array, other, cmp);
                        };
                
                        UniqueArray.prototype.differenceUpdate = function (object) {
                            var cmp = this._compare;
                            var other = toSet(object, cmp);
                            this._array = tsu.setDifference(this._array, other, cmp);
                        };
                
                        UniqueArray.prototype.symmetricDifferenceUpdate = function (object) {
                            var cmp = this._compare;
                            var other = toSet(object, cmp);
                            this._array = tsu.setSymmetricDifference(this._array, other, cmp);
                        };
                        return UniqueArray;
                    })(tsu.ArrayBase);
                    tsu.UniqueArray = UniqueArray;
                
                
                
                    function toSet(arg, cmp) {
                        if (arg instanceof UniqueArray) {
                            return arg._array;
                        }
                        return tsu.asSet(arg, cmp);
                    }
                })(tsu || (tsu = {}));
                
                /*-----------------------------------------------------------------------------
                | Copyright (c) 2014, Nucleic Development Team.
                |
                | Distributed under the terms of the Modified BSD License.
                |
                | The full license is in the file COPYING.txt, distributed with this software.
                |----------------------------------------------------------------------------*/
                /// <reference path="algorithm.ts"/>
                /// <reference path="array_base.ts"/>
                /// <reference path="associative_array.ts"/>
                /// <reference path="iterator.ts"/>
                /// <reference path="unique_array.ts"/>
                /// <reference path="utility.ts"/>
                
                /*-----------------------------------------------------------------------------
                | Copyright (c) 2014, Nucleic Development Team.
                |
                | Distributed under the terms of the Modified BSD License.
                |
                | The full license is in the file COPYING.txt, distributed with this software.
                |----------------------------------------------------------------------------*/
                // <reference path="expression.ts">
                // <reference path="strength.ts">
                var kiwi;
                (function (kiwi) {
                    /**
                    * An enum defining the linear constraint operators.
                    */
                    (function (Operator) {
                        Operator[Operator["Le"] = 0] = "Le";
                        Operator[Operator["Ge"] = 1] = "Ge";
                        Operator[Operator["Eq"] = 2] = "Eq";
                    })(kiwi.Operator || (kiwi.Operator = {}));
                    var Operator = kiwi.Operator;
                
                    /**
                    * A linear constraint equation.
                    *
                    * A constraint equation is composed of an expression, an operator,
                    * and a strength. The RHS of the equation is implicitly zero.
                    *
                    * @class
                    */
                    var Constraint = (function () {
                        /**
                        * Construct a new Constraint.
                        *
                        * @param expression The constraint expression.
                        * @param operator The equation operator.
                        * @param strength The strength of the constraint.
                        */
                        function Constraint(expression, operator, strength) {
                            if (typeof strength === "undefined") { strength = kiwi.Strength.required; }
                            this._id = CnId++;
                            this._operator = operator;
                            this._expression = expression;
                            this._strength = kiwi.Strength.clip(strength);
                        }
                        /**
                        * A static constraint comparison function.
                        */
                        Constraint.Compare = function (a, b) {
                            return a.id() - b.id();
                        };
                
                        /**
                        * Returns the unique id number of the constraint.
                        */
                        Constraint.prototype.id = function () {
                            return this._id;
                        };
                
                        /**
                        * Returns the expression of the constraint.
                        */
                        Constraint.prototype.expression = function () {
                            return this._expression;
                        };
                
                        /**
                        * Returns the relational operator of the constraint.
                        */
                        Constraint.prototype.op = function () {
                            return this._operator;
                        };
                
                        /**
                        * Returns the strength of the constraint.
                        */
                        Constraint.prototype.strength = function () {
                            return this._strength;
                        };
                        return Constraint;
                    })();
                    kiwi.Constraint = Constraint;
                
                    /**
                    * The internal constraint id counter.
                    */
                    var CnId = 0;
                })(kiwi || (kiwi = {}));
                /*-----------------------------------------------------------------------------
                | Copyright (c) 2014, Nucleic Development Team.
                |
                | Distributed under the terms of the Modified BSD License.
                |
                | The full license is in the file COPYING.txt, distributed with this software.
                |----------------------------------------------------------------------------*/
                /// <reference path="../thirdparty/tsu.d.ts"/>
                var kiwi;
                (function (kiwi) {
                    function createMap(compare) {
                        return new tsu.AssociativeArray(compare);
                    }
                    kiwi.createMap = createMap;
                })(kiwi || (kiwi = {}));
                /*-----------------------------------------------------------------------------
                | Copyright (c) 2014, Nucleic Development Team.
                |
                | Distributed under the terms of the Modified BSD License.
                |
                | The full license is in the file COPYING.txt, distributed with this software.
                |----------------------------------------------------------------------------*/
                var kiwi;
                (function (kiwi) {
                    /**
                    * The primary user constraint variable.
                    *
                    * @class
                    */
                    var Variable = (function () {
                        /**
                        * Construct a new Variable
                        *
                        * @param [name] The name to associated with the variable.
                        */
                        function Variable(name) {
                            if (typeof name === "undefined") { name = ""; }
                            this._value = 0.0;
                            this._context = null;
                            this._id = VarId++;
                            this._name = name;
                        }
                        /**
                        * A static variable comparison function.
                        */
                        Variable.Compare = function (a, b) {
                            return a.id() - b.id();
                        };
                
                        /**
                        * Returns the unique id number of the variable.
                        */
                        Variable.prototype.id = function () {
                            return this._id;
                        };
                
                        /**
                        * Returns the name of the variable.
                        */
                        Variable.prototype.name = function () {
                            return this._name;
                        };
                
                        /**
                        * Set the name of the variable.
                        */
                        Variable.prototype.setName = function (name) {
                            this._name = name;
                        };
                
                        /**
                        * Returns the user context object of the variable.
                        */
                        Variable.prototype.context = function () {
                            return this._context;
                        };
                
                        /**
                        * Set the user context object of the variable.
                        */
                        Variable.prototype.setContext = function (context) {
                            this._context = context;
                        };
                
                        /**
                        * Returns the value of the variable.
                        */
                        Variable.prototype.value = function () {
                            return this._value;
                        };
                
                        /**
                        * Set the value of the variable.
                        */
                        Variable.prototype.setValue = function (value) {
                            this._value = value;
                        };
                        return Variable;
                    })();
                    kiwi.Variable = Variable;
                
                    /**
                    * The internal variable id counter.
                    */
                    var VarId = 0;
                })(kiwi || (kiwi = {}));
                /*-----------------------------------------------------------------------------
                | Copyright (c) 2014, Nucleic Development Team.
                |
                | Distributed under the terms of the Modified BSD License.
                |
                | The full license is in the file COPYING.txt, distributed with this software.
                |----------------------------------------------------------------------------*/
                /// <reference path="../thirdparty/tsu.d.ts"/>
                /// <reference path="maptype.ts"/>
                /// <reference path="variable.ts"/>
                var kiwi;
                (function (kiwi) {
                    /**
                    * An expression of variable terms and a constant.
                    *
                    * @class
                    */
                    var Expression = (function () {
                        function Expression() {
                            var parsed = parseArgs(arguments);
                            this._terms = parsed.terms;
                            this._constant = parsed.constant;
                        }
                        /**
                        * Returns the mapping of terms in the expression.
                        *
                        * This *must* be treated as const.
                        */
                        Expression.prototype.terms = function () {
                            return this._terms;
                        };
                
                        /**
                        * Returns the constant of the expression.
                        */
                        Expression.prototype.constant = function () {
                            return this._constant;
                        };
                
                        /**
                        * Returns the computed value of the expression.
                        */
                        Expression.prototype.value = function () {
                            var result = this._constant;
                            tsu.forEach(this._terms, function (pair) {
                                result += pair.first.value() * pair.second;
                            });
                            return result;
                        };
                        return Expression;
                    })();
                    kiwi.Expression = Expression;
                
                
                
                    /**
                    * An internal argument parsing function.
                    */
                    function parseArgs(args) {
                        var constant = 0.0;
                        var factory = function () {
                            return 0.0;
                        };
                        var terms = kiwi.createMap(kiwi.Variable.Compare);
                        for (var i = 0, n = args.length; i < n; ++i) {
                            var item = args[i];
                            if (typeof item === "number") {
                                constant += item;
                            } else if (item instanceof kiwi.Variable) {
                                terms.setDefault(item, factory).second += 1.0;
                            } else if (item instanceof Array) {
                                if (item.length !== 2) {
                                    throw new Error("array must have length 2");
                                }
                                var value = item[0];
                                var variable = item[1];
                                if (typeof value !== "number") {
                                    throw new Error("array item 0 must be a number");
                                }
                                if (!(variable instanceof kiwi.Variable)) {
                                    throw new Error("array item 1 must be a variable");
                                }
                                terms.setDefault(variable, factory).second += value;
                            } else {
                                throw new Error("invalid Expression argument: " + item);
                            }
                        }
                        return { terms: terms, constant: constant };
                    }
                })(kiwi || (kiwi = {}));
                /*-----------------------------------------------------------------------------
                | Copyright (c) 2014, Nucleic Development Team.
                |
                | Distributed under the terms of the Modified BSD License.
                |
                | The full license is in the file COPYING.txt, distributed with this software.
                |----------------------------------------------------------------------------*/
                var kiwi;
                (function (kiwi) {
                    (function (Strength) {
                        /**
                        * Create a new symbolic strength.
                        */
                        function create(a, b, c, w) {
                            if (typeof w === "undefined") { w = 1.0; }
                            var result = 0.0;
                            result += Math.max(0.0, Math.min(1000.0, a * w)) * 1000000.0;
                            result += Math.max(0.0, Math.min(1000.0, b * w)) * 1000.0;
                            result += Math.max(0.0, Math.min(1000.0, c * w));
                            return result;
                        }
                        Strength.create = create;
                
                        /**
                        * The 'required' symbolic strength.
                        */
                        Strength.required = create(1000.0, 1000.0, 1000.0);
                
                        /**
                        * The 'strong' symbolic strength.
                        */
                        Strength.strong = create(1.0, 0.0, 0.0);
                
                        /**
                        * The 'medium' symbolic strength.
                        */
                        Strength.medium = create(0.0, 1.0, 0.0);
                
                        /**
                        * The 'weak' symbolic strength.
                        */
                        Strength.weak = create(0.0, 0.0, 1.0);
                
                        /**
                        * Clip a symbolic strength to the allowed min and max.
                        */
                        function clip(value) {
                            return Math.max(0.0, Math.min(Strength.required, value));
                        }
                        Strength.clip = clip;
                    })(kiwi.Strength || (kiwi.Strength = {}));
                    var Strength = kiwi.Strength;
                })(kiwi || (kiwi = {}));
                /*-----------------------------------------------------------------------------
                | Copyright (c) 2014, Nucleic Development Team.
                |
                | Distributed under the terms of the Modified BSD License.
                |
                | The full license is in the file COPYING.txt, distributed with this software.
                |----------------------------------------------------------------------------*/
                /// <reference path="../thirdparty/tsu.d.ts"/>
                /// <reference path="constraint.ts"/>
                /// <reference path="expression.ts"/>
                /// <reference path="maptype.ts"/>
                /// <reference path="strength.ts"/>
                /// <reference path="variable.ts"/>
                var kiwi;
                (function (kiwi) {
                    /**
                    * The constraint solver class.
                    *
                    * @class
                    */
                    var Solver = (function () {
                        /**
                        * Construct a new Solver.
                        */
                        function Solver() {
                            this._cnMap = createCnMap();
                            this._rowMap = createRowMap();
                            this._varMap = createVarMap();
                            this._editMap = createEditMap();
                            this._infeasibleRows = [];
                            this._objective = new Row();
                            this._artificial = null;
                            this._idTick = 0;
                        }
                        /**
                        * Add a constraint to the solver.
                        */
                        Solver.prototype.addConstraint = function (constraint) {
                            var cnPair = this._cnMap.find(constraint);
                            if (cnPair !== undefined) {
                                throw new Error("duplicate constraint");
                            }
                
                            // Creating a row causes symbols to be reserved for the variables
                            // in the constraint. If this method exits with an exception,
                            // then its possible those variables will linger in the var map.
                            // Since its likely that those variables will be used in other
                            // constraints and since exceptional conditions are uncommon,
                            // i'm not too worried about aggressive cleanup of the var map.
                            var data = this._createRow(constraint);
                            var row = data.row;
                            var tag = data.tag;
                            var subject = this._chooseSubject(row, tag);
                
                            // If chooseSubject couldnt find a valid entering symbol, one
                            // last option is available if the entire row is composed of
                            // dummy variables. If the constant of the row is zero, then
                            // this represents redundant constraints and the new dummy
                            // marker can enter the basis. If the constant is non-zero,
                            // then it represents an unsatisfiable constraint.
                            if (subject.type() === 0 /* Invalid */ && row.allDummies()) {
                                if (!nearZero(row.constant())) {
                                    throw new Error("unsatifiable constraint");
                                } else {
                                    subject = tag.marker;
                                }
                            }
                
                            // If an entering symbol still isn't found, then the row must
                            // be added using an artificial variable. If that fails, then
                            // the row represents an unsatisfiable constraint.
                            if (subject.type() === 0 /* Invalid */) {
                                if (!this._addWithArtificialVariable(row)) {
                                    throw new Error("unsatisfiable constraint");
                                }
                            } else {
                                row.solveFor(subject);
                                this._substitute(subject, row);
                                this._rowMap.insert(subject, row);
                            }
                
                            this._cnMap.insert(constraint, tag);
                
                            // Optimizing after each constraint is added performs less
                            // aggregate work due to a smaller average system size. It
                            // also ensures the solver remains in a consistent state.
                            this._optimize(this._objective);
                        };
                
                        /**
                        * Remove a constraint from the solver.
                        */
                        Solver.prototype.removeConstraint = function (constraint) {
                            var cnPair = this._cnMap.erase(constraint);
                            if (cnPair === undefined) {
                                throw new Error("unknown constraint");
                            }
                
                            // Remove the error effects from the objective function
                            // *before* pivoting, or substitutions into the objective
                            // will lead to incorrect solver results.
                            this._removeConstraintEffects(constraint, cnPair.second);
                
                            // If the marker is basic, simply drop the row. Otherwise,
                            // pivot the marker into the basis and then drop the row.
                            var marker = cnPair.second.marker;
                            var rowPair = this._rowMap.erase(marker);
                            if (rowPair === undefined) {
                                var leaving = this._getMarkerLeavingSymbol(marker);
                                if (leaving.type() === 0 /* Invalid */) {
                                    throw new Error("failed to find leaving row");
                                }
                                rowPair = this._rowMap.erase(leaving);
                                rowPair.second.solveForEx(leaving, marker);
                                this._substitute(marker, rowPair.second);
                            }
                
                            // Optimizing after each constraint is removed ensures that the
                            // solver remains consistent. It makes the solver api easier to
                            // use at a small tradeoff for speed.
                            this._optimize(this._objective);
                        };
                
                        /**
                        * Test whether the solver contains the constraint.
                        */
                        Solver.prototype.hasConstraint = function (constraint) {
                            return this._cnMap.contains(constraint);
                        };
                
                        /**
                        * Add an edit variable to the solver.
                        */
                        Solver.prototype.addEditVariable = function (variable, strength) {
                            var editPair = this._editMap.find(variable);
                            if (editPair !== undefined) {
                                throw new Error("duplicate edit variable");
                            }
                            strength = kiwi.Strength.clip(strength);
                            if (strength === kiwi.Strength.required) {
                                throw new Error("bad required strength");
                            }
                            var expr = new kiwi.Expression(variable);
                            var cn = new kiwi.Constraint(expr, 2 /* Eq */, strength);
                            this.addConstraint(cn);
                            var tag = this._cnMap.find(cn).second;
                            var info = { tag: tag, constraint: cn, constant: 0.0 };
                            this._editMap.insert(variable, info);
                        };
                
                        /**
                        * Remove an edit variable from the solver.
                        */
                        Solver.prototype.removeEditVariable = function (variable) {
                            var editPair = this._editMap.erase(variable);
                            if (editPair === undefined) {
                                throw new Error("unknown edit variable");
                            }
                            this.removeConstraint(editPair.second.constraint);
                        };
                
                        /**
                        * Test whether the solver contains the edit variable.
                        */
                        Solver.prototype.hasEditVariable = function (variable) {
                            return this._editMap.contains(variable);
                        };
                
                        /**
                        * Suggest the value of an edit variable.
                        */
                        Solver.prototype.suggestValue = function (variable, value) {
                            var editPair = this._editMap.find(variable);
                            if (editPair === undefined) {
                                throw new Error("unknown edit variable");
                            }
                
                            var rows = this._rowMap;
                            var info = editPair.second;
                            var delta = value - info.constant;
                            info.constant = value;
                
                            // Check first if the positive error variable is basic.
                            var marker = info.tag.marker;
                            var rowPair = rows.find(marker);
                            if (rowPair !== undefined) {
                                if (rowPair.second.add(-delta) < 0.0) {
                                    this._infeasibleRows.push(marker);
                                }
                                this._dualOptimize();
                                return;
                            }
                
                            // Check next if the negative error variable is basic.
                            var other = info.tag.other;
                            var rowPair = rows.find(other);
                            if (rowPair !== undefined) {
                                if (rowPair.second.add(delta) < 0.0) {
                                    this._infeasibleRows.push(other);
                                }
                                this._dualOptimize();
                                return;
                            }
                
                            for (var i = 0, n = rows.size(); i < n; ++i) {
                                var rowPair = rows.itemAt(i);
                                var row = rowPair.second;
                                var coeff = row.coefficientFor(marker);
                                if (coeff !== 0.0 && row.add(delta * coeff) < 0.0 && rowPair.first.type() !== 1 /* External */) {
                                    this._infeasibleRows.push(rowPair.first);
                                }
                            }
                            this._dualOptimize();
                        };
                
                        /**
                        * Update the values of the variables.
                        */
                        Solver.prototype.updateVariables = function () {
                            var vars = this._varMap;
                            var rows = this._rowMap;
                            for (var i = 0, n = vars.size(); i < n; ++i) {
                                var pair = vars.itemAt(i);
                                var rowPair = rows.find(pair.second);
                                if (rowPair !== undefined) {
                                    pair.first.setValue(rowPair.second.constant());
                                } else {
                                    pair.first.setValue(0.0);
                                }
                            }
                        };
                
                        /**
                        * Get the symbol for the given variable.
                        *
                        * If a symbol does not exist for the variable, one will be created.
                        */
                        Solver.prototype._getVarSymbol = function (variable) {
                            var _this = this;
                            var factory = function () {
                                return _this._makeSymbol(1 /* External */);
                            };
                            return this._varMap.setDefault(variable, factory).second;
                        };
                
                        /**
                        * Create a new Row object for the given constraint.
                        *
                        * The terms in the constraint will be converted to cells in the row.
                        * Any term in the constraint with a coefficient of zero is ignored.
                        * This method uses the `_getVarSymbol` method to get the symbol for
                        * the variables added to the row. If the symbol for a given cell
                        * variable is basic, the cell variable will be substituted with the
                        * basic row.
                        *
                        * The necessary slack and error variables will be added to the row.
                        * If the constant for the row is negative, the sign for the row
                        * will be inverted so the constant becomes positive.
                        *
                        * Returns the created Row and the tag for tracking the constraint.
                        */
                        Solver.prototype._createRow = function (constraint) {
                            var expr = constraint.expression();
                            var row = new Row(expr.constant());
                
                            // Substitute the current basic variables into the row.
                            var terms = expr.terms();
                            for (var i = 0, n = terms.size(); i < n; ++i) {
                                var termPair = terms.itemAt(i);
                                if (!nearZero(termPair.second)) {
                                    var symbol = this._getVarSymbol(termPair.first);
                                    var basicPair = this._rowMap.find(symbol);
                                    if (basicPair !== undefined) {
                                        row.insertRow(basicPair.second, termPair.second);
                                    } else {
                                        row.insertSymbol(symbol, termPair.second);
                                    }
                                }
                            }
                
                            // Add the necessary slack, error, and dummy variables.
                            var objective = this._objective;
                            var strength = constraint.strength();
                            var tag = { marker: INVALID_SYMBOL, other: INVALID_SYMBOL };
                            switch (constraint.op()) {
                                case 0 /* Le */:
                                case 1 /* Ge */: {
                                    var coeff = constraint.op() === 0 /* Le */ ? 1.0 : -1.0;
                                    var slack = this._makeSymbol(2 /* Slack */);
                                    tag.marker = slack;
                                    row.insertSymbol(slack, coeff);
                                    if (strength < kiwi.Strength.required) {
                                        var error = this._makeSymbol(3 /* Error */);
                                        tag.other = error;
                                        row.insertSymbol(error, -coeff);
                                        objective.insertSymbol(error, strength);
                                    }
                                    break;
                                }
                                case 2 /* Eq */: {
                                    if (strength < kiwi.Strength.required) {
                                        var errplus = this._makeSymbol(3 /* Error */);
                                        var errminus = this._makeSymbol(3 /* Error */);
                                        tag.marker = errplus;
                                        tag.other = errminus;
                                        row.insertSymbol(errplus, -1.0); // v = eplus - eminus
                                        row.insertSymbol(errminus, 1.0); // v - eplus + eminus = 0
                                        objective.insertSymbol(errplus, strength);
                                        objective.insertSymbol(errminus, strength);
                                    } else {
                                        var dummy = this._makeSymbol(4 /* Dummy */);
                                        tag.marker = dummy;
                                        row.insertSymbol(dummy);
                                    }
                                    break;
                                }
                            }
                
                            // Ensure the row has a positive constant.
                            if (row.constant() < 0.0) {
                                row.reverseSign();
                            }
                
                            return { row: row, tag: tag };
                        };
                
                        /**
                        * Choose the subject for solving for the row.
                        *
                        * This method will choose the best subject for using as the solve
                        * target for the row. An invalid symbol will be returned if there
                        * is no valid target.
                        *
                        * The symbols are chosen according to the following precedence:
                        *
                        * 1) The first symbol representing an external variable.
                        * 2) A negative slack or error tag variable.
                        *
                        * If a subject cannot be found, an invalid symbol will be returned.
                        */
                        Solver.prototype._chooseSubject = function (row, tag) {
                            var cells = row.cells();
                            for (var i = 0, n = cells.size(); i < n; ++i) {
                                var pair = cells.itemAt(i);
                                if (pair.first.type() === 1 /* External */) {
                                    return pair.first;
                                }
                            }
                            var type = tag.marker.type();
                            if (type === 2 /* Slack */ || type === 3 /* Error */) {
                                if (row.coefficientFor(tag.marker) < 0.0) {
                                    return tag.marker;
                                }
                            }
                            type = tag.other.type();
                            if (type === 2 /* Slack */ || type === 3 /* Error */) {
                                if (row.coefficientFor(tag.other) < 0.0) {
                                    return tag.other;
                                }
                            }
                            return INVALID_SYMBOL;
                        };
                
                        /**
                        * Add the row to the tableau using an artificial variable.
                        *
                        * This will return false if the constraint cannot be satisfied.
                        */
                        Solver.prototype._addWithArtificialVariable = function (row) {
                            // Create and add the artificial variable to the tableau.
                            var art = this._makeSymbol(2 /* Slack */);
                            this._rowMap.insert(art, row.copy());
                            this._artificial = row.copy();
                
                            // Optimize the artificial objective. This is successful
                            // only if the artificial objective is optimized to zero.
                            this._optimize(this._artificial);
                            var success = nearZero(this._artificial.constant());
                            this._artificial = null;
                
                            // If the artificial variable is basic, pivot the row so that
                            // it becomes non-basic. If the row is constant, exit early.
                            var pair = this._rowMap.erase(art);
                            if (pair !== undefined) {
                                var basicRow = pair.second;
                                if (basicRow.isConstant()) {
                                    return success;
                                }
                                var entering = this._anyPivotableSymbol(basicRow);
                                if (entering.type() === 0 /* Invalid */) {
                                    return false;
                                }
                                basicRow.solveForEx(art, entering);
                                this._substitute(entering, basicRow);
                                this._rowMap.insert(entering, basicRow);
                            }
                
                            // Remove the artificial variable from the tableau.
                            var rows = this._rowMap;
                            for (var i = 0, n = rows.size(); i < n; ++i) {
                                rows.itemAt(i).second.removeSymbol(art);
                            }
                            this._objective.removeSymbol(art);
                            return success;
                        };
                
                        /**
                        * Substitute the parametric symbol with the given row.
                        *
                        * This method will substitute all instances of the parametric symbol
                        * in the tableau and the objective function with the given row.
                        */
                        Solver.prototype._substitute = function (symbol, row) {
                            var rows = this._rowMap;
                            for (var i = 0, n = rows.size(); i < n; ++i) {
                                var pair = rows.itemAt(i);
                                pair.second.substitute(symbol, row);
                                if (pair.second.constant() < 0.0 && pair.first.type() !== 1 /* External */) {
                                    this._infeasibleRows.push(pair.first);
                                }
                            }
                            this._objective.substitute(symbol, row);
                            if (this._artificial) {
                                this._artificial.substitute(symbol, row);
                            }
                        };
                
                        /**
                        * Optimize the system for the given objective function.
                        *
                        * This method performs iterations of Phase 2 of the simplex method
                        * until the objective function reaches a minimum.
                        */
                        Solver.prototype._optimize = function (objective) {
                            while (true) {
                                var entering = this._getEnteringSymbol(objective);
                                if (entering.type() === 0 /* Invalid */) {
                                    return;
                                }
                                var leaving = this._getLeavingSymbol(entering);
                                if (leaving.type() === 0 /* Invalid */) {
                                    throw new Error("the objective is unbounded");
                                }
                
                                // pivot the entering symbol into the basis
                                var row = this._rowMap.erase(leaving).second;
                                row.solveForEx(leaving, entering);
                                this._substitute(entering, row);
                                this._rowMap.insert(entering, row);
                            }
                        };
                
                        /**
                        * Optimize the system using the dual of the simplex method.
                        *
                        * The current state of the system should be such that the objective
                        * function is optimal, but not feasible. This method will perform
                        * an iteration of the dual simplex method to make the solution both
                        * optimal and feasible.
                        */
                        Solver.prototype._dualOptimize = function () {
                            var rows = this._rowMap;
                            var infeasible = this._infeasibleRows;
                            while (infeasible.length !== 0) {
                                var leaving = infeasible.pop();
                                var pair = rows.find(leaving);
                                if (pair !== undefined && pair.second.constant() < 0.0) {
                                    var entering = this._getDualEnteringSymbol(pair.second);
                                    if (entering.type() === 0 /* Invalid */) {
                                        throw new Error("dual optimize failed");
                                    }
                
                                    // pivot the entering symbol into the basis
                                    var row = pair.second;
                                    rows.erase(leaving);
                                    row.solveForEx(leaving, entering);
                                    this._substitute(entering, row);
                                    rows.insert(entering, row);
                                }
                            }
                        };
                
                        /**
                        * Compute the entering variable for a pivot operation.
                        *
                        * This method will return first symbol in the objective function which
                        * is non-dummy and has a coefficient less than zero. If no symbol meets
                        * the criteria, it means the objective function is at a minimum, and an
                        * invalid symbol is returned.
                        */
                        Solver.prototype._getEnteringSymbol = function (objective) {
                            var cells = objective.cells();
                            for (var i = 0, n = cells.size(); i < n; ++i) {
                                var pair = cells.itemAt(i);
                                var symbol = pair.first;
                                if (pair.second < 0.0 && symbol.type() !== 4 /* Dummy */) {
                                    return symbol;
                                }
                            }
                            return INVALID_SYMBOL;
                        };
                
                        /**
                        * Compute the entering symbol for the dual optimize operation.
                        *
                        * This method will return the symbol in the row which has a positive
                        * coefficient and yields the minimum ratio for its respective symbol
                        * in the objective function. The provided row *must* be infeasible.
                        * If no symbol is found which meats the criteria, an invalid symbol
                        * is returned.
                        */
                        Solver.prototype._getDualEnteringSymbol = function (row) {
                            var ratio = Number.MAX_VALUE;
                            var entering = INVALID_SYMBOL;
                            var cells = row.cells();
                            for (var i = 0, n = cells.size(); i < n; ++i) {
                                var pair = cells.itemAt(i);
                                var symbol = pair.first;
                                var c = pair.second;
                                if (c > 0.0 && symbol.type() !== 4 /* Dummy */) {
                                    var coeff = this._objective.coefficientFor(symbol);
                                    var r = coeff / c;
                                    if (r < ratio) {
                                        ratio = r;
                                        entering = symbol;
                                    }
                                }
                            }
                            return entering;
                        };
                
                        /**
                        * Compute the symbol for pivot exit row.
                        *
                        * This method will return the symbol for the exit row in the row
                        * map. If no appropriate exit symbol is found, an invalid symbol
                        * will be returned. This indicates that the objective function is
                        * unbounded.
                        */
                        Solver.prototype._getLeavingSymbol = function (entering) {
                            var ratio = Number.MAX_VALUE;
                            var found = INVALID_SYMBOL;
                            var rows = this._rowMap;
                            for (var i = 0, n = rows.size(); i < n; ++i) {
                                var pair = rows.itemAt(i);
                                var symbol = pair.first;
                                if (symbol.type() !== 1 /* External */) {
                                    var row = pair.second;
                                    var temp = row.coefficientFor(entering);
                                    if (temp < 0.0) {
                                        var temp_ratio = -row.constant() / temp;
                                        if (temp_ratio < ratio) {
                                            ratio = temp_ratio;
                                            found = symbol;
                                        }
                                    }
                                }
                            }
                            return found;
                        };
                
                        /**
                        * Compute the leaving symbol for a marker variable.
                        *
                        * This method will return a symbol corresponding to a basic row
                        * which holds the given marker variable. The row will be chosen
                        * according to the following precedence:
                        *
                        * 1) The row with a restricted basic varible and a negative coefficient
                        *    for the marker with the smallest ratio of -constant / coefficient.
                        *
                        * 2) The row with a restricted basic variable and the smallest ratio
                        *    of constant / coefficient.
                        *
                        * 3) The last unrestricted row which contains the marker.
                        *
                        * If the marker does not exist in any row, an invalid symbol will be
                        * returned. This indicates an internal solver error since the marker
                        * *should* exist somewhere in the tableau.
                        */
                        Solver.prototype._getMarkerLeavingSymbol = function (marker) {
                            var dmax = Number.MAX_VALUE;
                            var r1 = dmax;
                            var r2 = dmax;
                            var invalid = INVALID_SYMBOL;
                            var first = invalid;
                            var second = invalid;
                            var third = invalid;
                            var rows = this._rowMap;
                            for (var i = 0, n = rows.size(); i < n; ++i) {
                                var pair = rows.itemAt(i);
                                var row = pair.second;
                                var c = row.coefficientFor(marker);
                                if (c === 0.0) {
                                    continue;
                                }
                                var symbol = pair.first;
                                if (symbol.type() === 1 /* External */) {
                                    third = symbol;
                                } else if (c < 0.0) {
                                    var r = -row.constant() / c;
                                    if (r < r1) {
                                        r1 = r;
                                        first = symbol;
                                    }
                                } else {
                                    var r = row.constant() / c;
                                    if (r < r2) {
                                        r2 = r;
                                        second = symbol;
                                    }
                                }
                            }
                            if (first !== invalid) {
                                return first;
                            }
                            if (second !== invalid) {
                                return second;
                            }
                            return third;
                        };
                
                        /**
                        * Remove the effects of a constraint on the objective function.
                        */
                        Solver.prototype._removeConstraintEffects = function (cn, tag) {
                            if (tag.marker.type() === 3 /* Error */) {
                                this._removeMarkerEffects(tag.marker, cn.strength());
                            }
                            if (tag.other.type() === 3 /* Error */) {
                                this._removeMarkerEffects(tag.other, cn.strength());
                            }
                        };
                
                        /**
                        * Remove the effects of an error marker on the objective function.
                        */
                        Solver.prototype._removeMarkerEffects = function (marker, strength) {
                            var pair = this._rowMap.find(marker);
                            if (pair !== undefined) {
                                this._objective.insertRow(pair.second, -strength);
                            } else {
                                this._objective.insertSymbol(marker, -strength);
                            }
                        };
                
                        /**
                        * Get the first Slack or Error symbol in the row.
                        *
                        * If no such symbol is present, an invalid symbol will be returned.
                        */
                        Solver.prototype._anyPivotableSymbol = function (row) {
                            var cells = row.cells();
                            for (var i = 0, n = cells.size(); i < n; ++i) {
                                var pair = cells.itemAt(i);
                                var type = pair.first.type();
                                if (type === 2 /* Slack */ || type === 3 /* Error */) {
                                    return pair.first;
                                }
                            }
                            return INVALID_SYMBOL;
                        };
                
                        /**
                        * Returns a new Symbol of the given type.
                        */
                        Solver.prototype._makeSymbol = function (type) {
                            return new Symbol(type, this._idTick++);
                        };
                        return Solver;
                    })();
                    kiwi.Solver = Solver;
                
                    /**
                    * Test whether a value is approximately zero.
                    */
                    function nearZero(value) {
                        var eps = 1.0e-8;
                        return value < 0.0 ? -value < eps : value < eps;
                    }
                
                
                
                
                
                
                
                    /**
                    * An internal function for creating a constraint map.
                    */
                    function createCnMap() {
                        return kiwi.createMap(kiwi.Constraint.Compare);
                    }
                
                    /**
                    * An internal function for creating a row map.
                    */
                    function createRowMap() {
                        return kiwi.createMap(Symbol.Compare);
                    }
                
                    /**
                    * An internal function for creating a variable map.
                    */
                    function createVarMap() {
                        return kiwi.createMap(kiwi.Variable.Compare);
                    }
                
                    /**
                    * An internal function for creating an edit map.
                    */
                    function createEditMap() {
                        return kiwi.createMap(kiwi.Variable.Compare);
                    }
                
                    /**
                    * An enum defining the available symbol types.
                    */
                    var SymbolType;
                    (function (SymbolType) {
                        SymbolType[SymbolType["Invalid"] = 0] = "Invalid";
                        SymbolType[SymbolType["External"] = 1] = "External";
                        SymbolType[SymbolType["Slack"] = 2] = "Slack";
                        SymbolType[SymbolType["Error"] = 3] = "Error";
                        SymbolType[SymbolType["Dummy"] = 4] = "Dummy";
                    })(SymbolType || (SymbolType = {}));
                
                    /**
                    * An internal class representing a symbol in the solver.
                    */
                    var Symbol = (function () {
                        /**
                        * Construct a new Symbol
                        *
                        * @param [type] The type of the symbol.
                        * @param [id] The unique id number of the symbol.
                        */
                        function Symbol(type, id) {
                            this._id = id;
                            this._type = type;
                        }
                        /**
                        * The static Symbol comparison function.
                        */
                        Symbol.Compare = function (a, b) {
                            return a.id() - b.id();
                        };
                
                        /**
                        * Returns the unique id number of the symbol.
                        */
                        Symbol.prototype.id = function () {
                            return this._id;
                        };
                
                        /**
                        * Returns the type of the symbol.
                        */
                        Symbol.prototype.type = function () {
                            return this._type;
                        };
                        return Symbol;
                    })();
                
                    /**
                    * A static invalid symbol
                    */
                    var INVALID_SYMBOL = new Symbol(0 /* Invalid */, -1);
                
                    /**
                    * An internal row class used by the solver.
                    */
                    var Row = (function () {
                        /**
                        * Construct a new Row.
                        */
                        function Row(constant) {
                            if (typeof constant === "undefined") { constant = 0.0; }
                            this._cellMap = kiwi.createMap(Symbol.Compare);
                            this._constant = constant;
                        }
                        /**
                        * Returns the mapping of symbols to coefficients.
                        */
                        Row.prototype.cells = function () {
                            return this._cellMap;
                        };
                
                        /**
                        * Returns the constant for the row.
                        */
                        Row.prototype.constant = function () {
                            return this._constant;
                        };
                
                        /**
                        * Returns true if the row is a constant value.
                        */
                        Row.prototype.isConstant = function () {
                            return this._cellMap.empty();
                        };
                
                        /**
                        * Returns true if the Row has all dummy symbols.
                        */
                        Row.prototype.allDummies = function () {
                            var cells = this._cellMap;
                            for (var i = 0, n = cells.size(); i < n; ++i) {
                                var pair = cells.itemAt(i);
                                if (pair.first.type() !== 4 /* Dummy */) {
                                    return false;
                                }
                            }
                            return true;
                        };
                
                        /**
                        * Create a copy of the row.
                        */
                        Row.prototype.copy = function () {
                            var theCopy = new Row(this._constant);
                            theCopy._cellMap = this._cellMap.copy();
                            return theCopy;
                        };
                
                        /**
                        * Add a constant value to the row constant.
                        *
                        * Returns the new value of the constant.
                        */
                        Row.prototype.add = function (value) {
                            return this._constant += value;
                        };
                
                        /**
                        * Insert the symbol into the row with the given coefficient.
                        *
                        * If the symbol already exists in the row, the coefficient
                        * will be added to the existing coefficient. If the resulting
                        * coefficient is zero, the symbol will be removed from the row.
                        */
                        Row.prototype.insertSymbol = function (symbol, coefficient) {
                            if (typeof coefficient === "undefined") { coefficient = 1.0; }
                            var pair = this._cellMap.setDefault(symbol, function () {
                                return 0.0;
                            });
                            if (nearZero(pair.second += coefficient)) {
                                this._cellMap.erase(symbol);
                            }
                        };
                
                        /**
                        * Insert a row into this row with a given coefficient.
                        *
                        * The constant and the cells of the other row will be
                        * multiplied by the coefficient and added to this row. Any
                        * cell with a resulting coefficient of zero will be removed
                        * from the row.
                        */
                        Row.prototype.insertRow = function (other, coefficient) {
                            if (typeof coefficient === "undefined") { coefficient = 1.0; }
                            this._constant += other._constant * coefficient;
                            var cells = other._cellMap;
                            for (var i = 0, n = cells.size(); i < n; ++i) {
                                var pair = cells.itemAt(i);
                                this.insertSymbol(pair.first, pair.second * coefficient);
                            }
                        };
                
                        /**
                        * Remove a symbol from the row.
                        */
                        Row.prototype.removeSymbol = function (symbol) {
                            this._cellMap.erase(symbol);
                        };
                
                        /**
                        * Reverse the sign of the constant and cells in the row.
                        */
                        Row.prototype.reverseSign = function () {
                            this._constant = -this._constant;
                            var cells = this._cellMap;
                            for (var i = 0, n = cells.size(); i < n; ++i) {
                                var pair = cells.itemAt(i);
                                pair.second = -pair.second;
                            }
                        };
                
                        /**
                        * Solve the row for the given symbol.
                        *
                        * This method assumes the row is of the form
                        * a * x + b * y + c = 0 and (assuming solve for x) will modify
                        * the row to represent the right hand side of
                        * x = -b/a * y - c / a. The target symbol will be removed from
                        * the row, and the constant and other cells will be multiplied
                        * by the negative inverse of the target coefficient.
                        *
                        * The given symbol *must* exist in the row.
                        */
                        Row.prototype.solveFor = function (symbol) {
                            var cells = this._cellMap;
                            var pair = cells.erase(symbol);
                            var coeff = -1.0 / pair.second;
                            this._constant *= coeff;
                            for (var i = 0, n = cells.size(); i < n; ++i) {
                                cells.itemAt(i).second *= coeff;
                            }
                        };
                
                        /**
                        * Solve the row for the given symbols.
                        *
                        * This method assumes the row is of the form
                        * x = b * y + c and will solve the row such that
                        * y = x / b - c / b. The rhs symbol will be removed from the
                        * row, the lhs added, and the result divided by the negative
                        * inverse of the rhs coefficient.
                        *
                        * The lhs symbol *must not* exist in the row, and the rhs
                        * symbol must* exist in the row.
                        */
                        Row.prototype.solveForEx = function (lhs, rhs) {
                            this.insertSymbol(lhs, -1.0);
                            this.solveFor(rhs);
                        };
                
                        /**
                        * Returns the coefficient for the given symbol.
                        */
                        Row.prototype.coefficientFor = function (symbol) {
                            var pair = this._cellMap.find(symbol);
                            return pair !== undefined ? pair.second : 0.0;
                        };
                
                        /**
                        * Substitute a symbol with the data from another row.
                        *
                        * Given a row of the form a * x + b and a substitution of the
                        * form x = 3 * y + c the row will be updated to reflect the
                        * expression 3 * a * y + a * c + b.
                        *
                        * If the symbol does not exist in the row, this is a no-op.
                        */
                        Row.prototype.substitute = function (symbol, row) {
                            var pair = this._cellMap.erase(symbol);
                            if (pair !== undefined) {
                                this.insertRow(row, pair.second);
                            }
                        };
                        return Row;
                    })();
                })(kiwi || (kiwi = {}));
                /*-----------------------------------------------------------------------------
                | Copyright (c) 2014, Nucleic Development Team.
                |
                | Distributed under the terms of the Modified BSD License.
                |
                | The full license is in the file COPYING.txt, distributed with this software.
                |----------------------------------------------------------------------------*/
                /// <reference path="constraint.ts"/>
                /// <reference path="expression.ts"/>
                /// <reference path="maptype.ts"/>
                /// <reference path="solver.ts"/>
                /// <reference path="strength.ts"/>
                /// <reference path="variable.ts"/>
                ;
                return root.kiwi = kiwi;
                  }).apply(root, arguments);
                });
                }(this));
                
                define('common/canvas_template',[],function(){
                  var template = function(__obj) {
                  var _safe = function(value) {
                    if (typeof value === 'undefined' && value == null)
                      value = '';
                    var result = new String(value);
                    result.ecoSafe = true;
                    return result;
                  };
                  return (function() {
                    var __out = [], __self = this, _print = function(value) {
                      if (typeof value !== 'undefined' && value != null)
                        __out.push(value.ecoSafe ? value : __self.escape(value));
                    }, _capture = function(callback) {
                      var out = __out, result;
                      __out = [];
                      callback.call(this);
                      result = __out.join('');
                      __out = out;
                      return _safe(result);
                    };
                    (function() {
                      if (this.map) {
                        _print(_safe('\n<div class="bokeh_gmap"></div>\n'));
                      }
                    
                      _print(_safe('\n<canvas class=\'bokeh_canvas\'></canvas>'));
                    
                    }).call(this);
                    
                    return __out.join('');
                  }).call((function() {
                    var obj = {
                      escape: function(value) {
                        return ('' + value)
                          .replace(/&/g, '&amp;')
                          .replace(/</g, '&lt;')
                          .replace(/>/g, '&gt;')
                          .replace(/"/g, '&quot;');
                      },
                      safe: _safe
                    }, key;
                    for (key in __obj) obj[key] = __obj[key];
                    return obj;
                  })());
                };
                  return template;
                });
                
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('common/continuum_view',["underscore", "backbone"], function(_, Backbone) {
                    var CloseWrapper, ContinuumView, _ref, _ref1;
                    ContinuumView = (function(_super) {
                      __extends(ContinuumView, _super);
                
                      function ContinuumView() {
                        _ref = ContinuumView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      ContinuumView.prototype.initialize = function(options) {
                        if (!_.has(options, 'id')) {
                          return this.id = _.uniqueId('ContinuumView');
                        }
                      };
                
                      ContinuumView.prototype.bind_bokeh_events = function() {
                        return 'pass';
                      };
                
                      ContinuumView.prototype.delegateEvents = function(events) {
                        return ContinuumView.__super__.delegateEvents.call(this, events);
                      };
                
                      ContinuumView.prototype.remove = function() {
                        var target, val, _ref1;
                        if (_.has(this, 'eventers')) {
                          _ref1 = this.eventers;
                          for (target in _ref1) {
                            if (!__hasProp.call(_ref1, target)) continue;
                            val = _ref1[target];
                            val.off(null, null, this);
                          }
                        }
                        this.trigger('remove', this);
                        return ContinuumView.__super__.remove.call(this);
                      };
                
                      ContinuumView.prototype.mget = function() {
                        return this.model.get.apply(this.model, arguments);
                      };
                
                      ContinuumView.prototype.mset = function() {
                        return this.model.set.apply(this.model, arguments);
                      };
                
                      ContinuumView.prototype.render_end = function() {
                        return "pass";
                      };
                
                      return ContinuumView;
                
                    })(Backbone.View);
                    CloseWrapper = (function(_super) {
                      __extends(CloseWrapper, _super);
                
                      function CloseWrapper() {
                        _ref1 = CloseWrapper.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      CloseWrapper.prototype.attributes = {
                        "class": "bk-closewrapper"
                      };
                
                      CloseWrapper.prototype.delegateEvents = function(events) {
                        return CloseWrapper.__super__.delegateEvents.call(this, events);
                      };
                
                      CloseWrapper.prototype.events = {
                        "click .bk-close": "close"
                      };
                
                      CloseWrapper.prototype.close = function(options) {
                        this.view.remove();
                        return this.remove();
                      };
                
                      CloseWrapper.prototype.initialize = function(options) {
                        CloseWrapper.__super__.initialize.call(this, options);
                        this.view = options.view;
                        return this.render();
                      };
                
                      CloseWrapper.prototype.render = function() {
                        this.view.$el.detach();
                        this.$el.empty();
                        this.$el.html("<a href='#' class='bk-close'>[x]</a>");
                        return this.$el.append(this.view.$el);
                      };
                
                      return CloseWrapper;
                
                    })(ContinuumView);
                    return {
                      "View": ContinuumView,
                      "CloseWrapper": CloseWrapper
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=continuum_view.js.map
                */;
                (function() {
                  var __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
                    __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('common/has_properties',["underscore", "backbone", "require", "./base"], function(_, Backbone, require, base) {
                    var HasProperties, _is_ref;
                    _is_ref = function(arg) {
                      var keys;
                      if (_.isObject(arg)) {
                        keys = _.keys(arg).sort();
                        return keys.length === 2 && keys[0] === 'id' && keys[1] === 'type';
                      }
                      return false;
                    };
                    return HasProperties = (function(_super) {
                      __extends(HasProperties, _super);
                
                      HasProperties.prototype.toString = function() {
                        return "" + this.type + "(" + this.id + ")";
                      };
                
                      HasProperties.prototype.destroy = function(options) {
                        HasProperties.__super__.destroy.call(this, options);
                        return this.stopListening();
                      };
                
                      HasProperties.prototype.isNew = function() {
                        return false;
                      };
                
                      function HasProperties(attributes, options) {
                        this.rpc = __bind(this.rpc, this);
                        this.resolve_ref = __bind(this.resolve_ref, this);
                        this.convert_to_ref = __bind(this.convert_to_ref, this);
                        var attrs;
                        attrs = attributes || {};
                        if (!options) {
                          options = {};
                        }
                        this.cid = _.uniqueId('c');
                        this.attributes = {};
                        if (options.collection) {
                          this.collection = options.collection;
                        }
                        if (options.parse) {
                          attrs = this.parse(attrs, options) || {};
                        }
                        attrs = _.defaults({}, attrs, _.result(this, 'defaults'));
                        this.set(attrs, options);
                        this.changed = {};
                        this._base = false;
                        this.properties = {};
                        this.property_cache = {};
                        if (!_.has(attrs, this.idAttribute)) {
                          this.id = _.uniqueId(this.type);
                          this.attributes[this.idAttribute] = this.id;
                        }
                        if (!options.defer_initialization) {
                          this.initialize.apply(this, arguments);
                        }
                      }
                
                      HasProperties.prototype.set_obj = function(key, value, options) {
                        var attrs, val;
                        if (_.isObject(key) || key === null) {
                          attrs = key;
                          options = value;
                        } else {
                          attrs = {};
                          attrs[key] = value;
                        }
                        for (key in attrs) {
                          if (!__hasProp.call(attrs, key)) continue;
                          val = attrs[key];
                          attrs[key] = this.convert_to_ref(val);
                        }
                        return this.set(attrs, options);
                      };
                
                      HasProperties.prototype.set = function(key, value, options) {
                        var attrs, toremove, val, _i, _len;
                        if (_.isObject(key) || key === null) {
                          attrs = key;
                          options = value;
                        } else {
                          attrs = {};
                          attrs[key] = value;
                        }
                        toremove = [];
                        for (key in attrs) {
                          if (!__hasProp.call(attrs, key)) continue;
                          val = attrs[key];
                          if (_.has(this, 'properties') && _.has(this.properties, key) && this.properties[key]['setter']) {
                            this.properties[key]['setter'].call(this, val, key);
                            toremove.push(key);
                          }
                        }
                        if (!_.isEmpty(toremove)) {
                          attrs = _.clone(attrs);
                          for (_i = 0, _len = toremove.length; _i < _len; _i++) {
                            key = toremove[_i];
                            delete attrs[key];
                          }
                        }
                        if (!_.isEmpty(attrs)) {
                          return HasProperties.__super__.set.call(this, attrs, options);
                        }
                      };
                
                      HasProperties.prototype.convert_to_ref = function(value) {
                        if (_.isArray(value)) {
                          return _.map(value, this.convert_to_ref);
                        } else {
                          if (value instanceof HasProperties) {
                            return value.ref();
                          }
                        }
                      };
                
                      HasProperties.prototype.add_dependencies = function(prop_name, object, fields) {
                        var fld, prop_spec, _i, _len, _results;
                        if (!_.isArray(fields)) {
                          fields = [fields];
                        }
                        prop_spec = this.properties[prop_name];
                        prop_spec.dependencies = prop_spec.dependencies.concat({
                          obj: object,
                          fields: fields
                        });
                        _results = [];
                        for (_i = 0, _len = fields.length; _i < _len; _i++) {
                          fld = fields[_i];
                          _results.push(this.listenTo(object, "change:" + fld, prop_spec['callbacks']['changedep']));
                        }
                        return _results;
                      };
                
                      HasProperties.prototype.register_setter = function(prop_name, setter) {
                        var prop_spec;
                        prop_spec = this.properties[prop_name];
                        return prop_spec.setter = setter;
                      };
                
                      HasProperties.prototype.register_property = function(prop_name, getter, use_cache) {
                        var changedep, prop_spec, propchange,
                          _this = this;
                        if (_.isUndefined(use_cache)) {
                          use_cache = true;
                        }
                        if (_.has(this.properties, prop_name)) {
                          this.remove_property(prop_name);
                        }
                        changedep = function() {
                          return _this.trigger('changedep:' + prop_name);
                        };
                        propchange = function() {
                          var firechange, new_val, old_val;
                          firechange = true;
                          if (prop_spec['use_cache']) {
                            old_val = _this.get_cache(prop_name);
                            _this.clear_cache(prop_name);
                            new_val = _this.get(prop_name);
                            firechange = new_val !== old_val;
                          }
                          if (firechange) {
                            _this.trigger('change:' + prop_name, _this, _this.get(prop_name));
                            return _this.trigger('change', _this);
                          }
                        };
                        prop_spec = {
                          'getter': getter,
                          'dependencies': [],
                          'use_cache': use_cache,
                          'setter': null,
                          'callbacks': {
                            changedep: changedep,
                            propchange: propchange
                          }
                        };
                        this.properties[prop_name] = prop_spec;
                        this.listenTo(this, "changedep:" + prop_name, prop_spec['callbacks']['propchange']);
                        return prop_spec;
                      };
                
                      HasProperties.prototype.remove_property = function(prop_name) {
                        var dep, dependencies, fld, obj, prop_spec, _i, _j, _len, _len1, _ref;
                        prop_spec = this.properties[prop_name];
                        dependencies = prop_spec.dependencies;
                        for (_i = 0, _len = dependencies.length; _i < _len; _i++) {
                          dep = dependencies[_i];
                          obj = dep.obj;
                          _ref = dep['fields'];
                          for (_j = 0, _len1 = _ref.length; _j < _len1; _j++) {
                            fld = _ref[_j];
                            obj.off('change:' + fld, prop_spec['callbacks']['changedep'], this);
                          }
                        }
                        this.off("changedep:" + dep);
                        delete this.properties[prop_name];
                        if (prop_spec.use_cache) {
                          return this.clear_cache(prop_name);
                        }
                      };
                
                      HasProperties.prototype.has_cache = function(prop_name) {
                        return _.has(this.property_cache, prop_name);
                      };
                
                      HasProperties.prototype.add_cache = function(prop_name, val) {
                        return this.property_cache[prop_name] = val;
                      };
                
                      HasProperties.prototype.clear_cache = function(prop_name, val) {
                        return delete this.property_cache[prop_name];
                      };
                
                      HasProperties.prototype.get_cache = function(prop_name) {
                        return this.property_cache[prop_name];
                      };
                
                      HasProperties.prototype.get = function(prop_name, resolve_refs) {
                        var ref_or_val;
                        if (resolve_refs == null) {
                          resolve_refs = true;
                        }
                        if (_.has(this.properties, prop_name)) {
                          return this._get_prop(prop_name);
                        } else {
                          ref_or_val = HasProperties.__super__.get.call(this, prop_name);
                          if (!resolve_refs) {
                            return ref_or_val;
                          }
                          return this.resolve_ref(ref_or_val);
                        }
                      };
                
                      HasProperties.prototype._get_prop = function(prop_name) {
                        var computed, getter, prop_spec;
                        prop_spec = this.properties[prop_name];
                        if (prop_spec.use_cache && this.has_cache(prop_name)) {
                          return this.property_cache[prop_name];
                        } else {
                          getter = prop_spec.getter;
                          computed = getter.apply(this, [prop_name]);
                          if (this.properties[prop_name].use_cache) {
                            this.add_cache(prop_name, computed);
                          }
                          return computed;
                        }
                      };
                
                      HasProperties.prototype.ref = function() {
                        return {
                          'type': this.type,
                          'id': this.id
                        };
                      };
                
                      HasProperties.prototype.resolve_ref = function(arg) {
                        var x;
                        if (_.isUndefined(arg)) {
                          return arg;
                        }
                        if (_.isArray(arg)) {
                          return (function() {
                            var _i, _len, _results;
                            _results = [];
                            for (_i = 0, _len = arg.length; _i < _len; _i++) {
                              x = arg[_i];
                              _results.push(this.resolve_ref(x));
                            }
                            return _results;
                          }).call(this);
                        }
                        if (_is_ref(arg)) {
                          if (arg['type'] === this.type && arg['id'] === this.id) {
                            return this;
                          } else {
                            return this.get_base().Collections(arg['type']).get(arg['id']);
                          }
                        }
                        return arg;
                      };
                
                      HasProperties.prototype.get_base = function() {
                        if (!this._base) {
                          this._base = require('./base');
                        }
                        return this._base;
                      };
                
                      HasProperties.prototype.url = function() {
                        var doc, url;
                        doc = this.get('doc');
                        if (doc == null) {
                          console.log("WARN: Unset 'doc' in " + this);
                        }
                        url = this.get_base().Config.prefix + "bokeh/bb/" + doc + "/" + this.type + "/";
                        if (this.isNew()) {
                          return url;
                        }
                        return url + this.get('id') + "/";
                      };
                
                      HasProperties.prototype.sync = function(method, model, options) {
                        return options.success(model.attributes, null, {});
                      };
                
                      HasProperties.prototype.defaults = function() {
                        return {};
                      };
                
                      HasProperties.prototype.rpc = function(funcname, args, kwargs) {
                        var data, doc, id, prefix, resp, type, url;
                        prefix = this.get_base().Config.prefix;
                        doc = this.get('doc');
                        if (doc == null) {
                          throw new Error("Unset 'doc' in " + this);
                        }
                        id = this.get('id');
                        type = this.type;
                        url = "" + prefix + "bokeh/bb/rpc/" + doc + "/" + type + "/" + id + "/" + funcname + "/";
                        data = {
                          args: args,
                          kwargs: kwargs
                        };
                        resp = $.ajax({
                          type: 'POST',
                          url: url,
                          data: JSON.stringify(data),
                          contentType: 'application/json',
                          xhrFields: {
                            withCredentials: true
                          }
                        });
                        return resp;
                      };
                
                      return HasProperties;
                
                    })(Backbone.Model);
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=has_properties.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('range/range1d',["underscore", "backbone", "common/has_properties"], function(_, Backbone, HasProperties) {
                    var Range1d, Range1ds, _ref, _ref1;
                    Range1d = (function(_super) {
                      __extends(Range1d, _super);
                
                      function Range1d() {
                        _ref = Range1d.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      Range1d.prototype.type = 'Range1d';
                
                      Range1d.prototype.initialize = function(attrs, options) {
                        Range1d.__super__.initialize.call(this, attrs, options);
                        this.register_property('min', function() {
                          return Math.min(this.get('start'), this.get('end'));
                        }, true);
                        this.add_dependencies('min', this, ['start', 'end']);
                        this.register_property('max', function() {
                          return Math.max(this.get('start'), this.get('end'));
                        }, true);
                        return this.add_dependencies('max', this, ['start', 'end']);
                      };
                
                      Range1d.prototype.defaults = function() {
                        return {
                          start: 0,
                          end: 1
                        };
                      };
                
                      return Range1d;
                
                    })(HasProperties);
                    Range1ds = (function(_super) {
                      __extends(Range1ds, _super);
                
                      function Range1ds() {
                        _ref1 = Range1ds.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      Range1ds.prototype.model = Range1d;
                
                      return Range1ds;
                
                    })(Backbone.Collection);
                    return {
                      "Model": Range1d,
                      "Collection": new Range1ds()
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=range1d.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('common/layout_box',["underscore", "backbone", "kiwi", "./has_properties", "range/range1d"], function(_, Backbone, kiwi, HasProperties, Range1d) {
                    var Constraint, EQ, Expr, GE, LE, LayoutBox, LayoutBoxs, Var, _ref, _ref1;
                    Var = kiwi.Variable;
                    Expr = kiwi.Expression;
                    Constraint = kiwi.Constraint;
                    EQ = kiwi.Operator.Eq;
                    LE = kiwi.Operator.Le;
                    GE = kiwi.Operator.Ge;
                    LayoutBox = (function(_super) {
                      __extends(LayoutBox, _super);
                
                      function LayoutBox() {
                        _ref = LayoutBox.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      LayoutBox.prototype.type = 'LayoutBox';
                
                      LayoutBox.prototype.initialize = function(attrs, options) {
                        var name, v, _i, _j, _len, _len1, _ref1, _ref2,
                          _this = this;
                        LayoutBox.__super__.initialize.call(this, attrs, options);
                        this.solver = this.get('solver');
                        this.var_constraints = {};
                        _ref1 = ['top', 'left', 'width', 'height'];
                        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
                          v = _ref1[_i];
                          name = '_' + v;
                          this[name] = new Var(v);
                          this.register_property(v, this._get_var, false);
                          this.register_setter(v, this._set_var);
                          this.solver.add_edit_variable(this[name], kiwi.Strength.strong);
                        }
                        _ref2 = ['right', 'bottom'];
                        for (_j = 0, _len1 = _ref2.length; _j < _len1; _j++) {
                          v = _ref2[_j];
                          name = '_' + v;
                          this[name] = new Var(v);
                          this.register_property(v, this._get_var, false);
                        }
                        this.solver.add_constraint(new Constraint(new Expr(this._top), GE));
                        this.solver.add_constraint(new Constraint(new Expr(this._bottom), GE));
                        this.solver.add_constraint(new Constraint(new Expr(this._left), GE));
                        this.solver.add_constraint(new Constraint(new Expr(this._right), GE));
                        this.solver.add_constraint(new Constraint(new Expr(this._width), GE));
                        this.solver.add_constraint(new Constraint(new Expr(this._height), GE));
                        this.solver.add_constraint(new Constraint(new Expr(this._left, this._width, [-1, this._right]), EQ));
                        this.solver.add_constraint(new Constraint(new Expr(this._bottom, this._height, [-1, this._top]), EQ));
                        this._h_range = new Range1d.Model({
                          start: this.get('left'),
                          end: this.get('left') + this.get('width')
                        });
                        this.register_property('h_range', function() {
                          _this._h_range.set('start', _this.get('left'));
                          _this._h_range.set('end', _this.get('left') + _this.get('width'));
                          return _this._h_range;
                        }, false);
                        this.add_dependencies('h_range', this, ['left', 'width']);
                        this._v_range = new Range1d.Model({
                          start: this.get('bottom'),
                          end: this.get('bottom') + this.get('height')
                        });
                        this.register_property('v_range', function() {
                          _this._v_range.set('start', _this.get('bottom'));
                          _this._v_range.set('end', _this.get('bottom') + _this.get('height'));
                          return _this._v_range;
                        }, false);
                        this.add_dependencies('v_range', this, ['bottom', 'height']);
                        this._aspect_constraint = null;
                        this.register_property('aspect', function() {
                          return _this.get('width') / _this.get('height');
                        }, true);
                        this.register_setter('aspect', this._set_aspect);
                        return this.add_dependencies('aspect', this, ['width', 'height']);
                      };
                
                      LayoutBox.prototype._set_var = function(value, prop_name) {
                        var c, v;
                        v = this['_' + prop_name];
                        if (typeof value === 'number') {
                          return this.solver.suggest_value(v, value);
                        } else if (typeof value === 'string') {
                
                        } else {
                          c = new Constraint(new Expr(v, [-1, value]), EQ);
                          if (this.var_constraints[prop_name] == null) {
                            this.var_constraints[prop_name] = [];
                          }
                          this.var_constraints[prop_name].push(c);
                          return this.solver.add_constraint(c);
                        }
                      };
                
                      LayoutBox.prototype._get_var = function(prop_name) {
                        return this['_' + prop_name].value();
                      };
                
                      LayoutBox.prototype._set_aspect = function(aspect) {
                        var c;
                        if (this._aspect_constraint != null) {
                          this.solver.remove_constraint(this.aspect_constraint);
                          c = new Constraint(new Expr([aspect, this._height], [-1, this._width]), EQ);
                          this._aspect_constraint = c;
                          return this.solver.add_constraint(c);
                        }
                      };
                
                      LayoutBox.prototype.defaults = function() {
                        return {
                          'top_strength': kiwi.Strength.strong,
                          'bottom_strength': kiwi.Strength.strong,
                          'left_strength': kiwi.Strength.strong,
                          'right_strength': kiwi.Strength.strong,
                          'width_strength': kiwi.Strength.strong,
                          'height_strength': kiwi.Strength.strong
                        };
                      };
                
                      return LayoutBox;
                
                    })(HasProperties);
                    LayoutBoxs = (function(_super) {
                      __extends(LayoutBoxs, _super);
                
                      function LayoutBoxs() {
                        _ref1 = LayoutBoxs.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      LayoutBoxs.prototype.model = LayoutBox;
                
                      return LayoutBoxs;
                
                    })(Backbone.Collection);
                    return {
                      "Model": LayoutBox,
                      "Collection": new LayoutBoxs()
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=layout_box.js.map
                */;
                (function() {
                  define('common/solver',["backbone", "underscore", "kiwi"], function(Backbone, _, kiwi) {
                    var Solver;
                    Solver = (function() {
                      function Solver() {
                        this.solver = new kiwi.Solver();
                      }
                
                      Solver.prototype.update_variables = function(trigger) {
                        if (trigger == null) {
                          trigger = true;
                        }
                        this.solver.updateVariables();
                        if (trigger) {
                          return this.trigger('layout_update');
                        }
                      };
                
                      Solver.prototype.add_constraint = function(constraint) {
                        return this.solver.addConstraint(constraint);
                      };
                
                      Solver.prototype.remove_constraint = function(constraint) {
                        return this.solver.removeConstraint(constraint);
                      };
                
                      Solver.prototype.add_edit_variable = function(variable, strength) {
                        if (strength == null) {
                          strength = kiwi.Strength.strong;
                        }
                        return this.solver.addEditVariable(variable, strength);
                      };
                
                      Solver.prototype.suggest_value = function(variable, value) {
                        return this.solver.suggestValue(variable, value);
                      };
                
                      return Solver;
                
                    })();
                    _.extend(Solver.prototype, Backbone.Events);
                    return Solver;
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=solver.js.map
                */;
                (function() {
                  var __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
                    __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('common/canvas',["backbone", "kiwi", "./canvas_template", "./continuum_view", "./layout_box", "./solver"], function(Backbone, kiwi, canvas_template, ContinuumView, LayoutBox, Solver) {
                    var Canvas, CanvasView, Canvases, Constraint, EQ, Expr, _ref, _ref1, _ref2;
                    Expr = kiwi.Expression;
                    Constraint = kiwi.Constraint;
                    EQ = kiwi.Operator.Eq;
                    CanvasView = (function(_super) {
                      __extends(CanvasView, _super);
                
                      function CanvasView() {
                        this._mousemove = __bind(this._mousemove, this);
                        this._mousedown = __bind(this._mousedown, this);
                        _ref = CanvasView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      CanvasView.prototype.className = "bokeh plotview bokeh_canvas_wrapper";
                
                      CanvasView.prototype.template = canvas_template;
                
                      CanvasView.prototype.events = {
                        "mousemove": "_mousemove",
                        "mousedown": "_mousedown"
                      };
                
                      CanvasView.prototype.initialize = function(options) {
                        var html, template_data, _ref1;
                        CanvasView.__super__.initialize.call(this, options);
                        template_data = {
                          map: this.mget('map')
                        };
                        html = this.template(template_data);
                        this.$el.html(html);
                        this.canvas_wrapper = this.$el;
                        this.canvas = this.$('canvas.bokeh_canvas');
                        return this.map_div = (_ref1 = this.$('.bokeh_gmap')) != null ? _ref1 : null;
                      };
                
                      CanvasView.prototype.render = function(force) {
                        var backingStoreRatio, devicePixelRatio, height, ratio, width;
                        if (force == null) {
                          force = false;
                        }
                        if (!this.model.new_bounds && !force) {
                          return;
                        }
                        this.ctx = this.canvas[0].getContext('2d');
                        if (this.mget('use_hidpi')) {
                          devicePixelRatio = window.devicePixelRatio || 1;
                          backingStoreRatio = this.ctx.webkitBackingStorePixelRatio || this.ctx.mozBackingStorePixelRatio || this.ctx.msBackingStorePixelRatio || this.ctx.oBackingStorePixelRatio || this.ctx.backingStorePixelRatio || 1;
                          ratio = devicePixelRatio / backingStoreRatio;
                        } else {
                          ratio = 1;
                        }
                        width = this.mget('width');
                        height = this.mget('height');
                        this.canvas.width = width * this.dpi_ratio;
                        this.canvas.height = height * this.dpi_ratio;
                        this.$el.attr('style', "width:" + width + "px; height:" + height + "px");
                        this.canvas.attr('style', "width:" + width + "px;");
                        this.canvas.attr('style', "height:" + height + "px;");
                        this.canvas.attr('width', width * ratio).attr('height', height * ratio);
                        this.$el.attr("width", width).attr('height', height);
                        this.ctx.scale(ratio, ratio);
                        this.ctx.translate(0.5, 0.5);
                        this._fixup_line_dash(this.ctx);
                        this._fixup_line_dash_offset(this.ctx);
                        this._fixup_image_smoothing(this.ctx);
                        this._fixup_measure_text(this.ctx);
                        return this.model.new_bounds = false;
                      };
                
                      CanvasView.prototype._fixup_line_dash = function(ctx) {
                        if (!ctx.setLineDash) {
                          ctx.setLineDash = function(dash) {
                            ctx.mozDash = dash;
                            return ctx.webkitLineDash = dash;
                          };
                        }
                        if (!ctx.getLineDash) {
                          return ctx.getLineDash = function() {
                            return ctx.mozDash;
                          };
                        }
                      };
                
                      CanvasView.prototype._fixup_line_dash_offset = function(ctx) {
                        ctx.setLineDashOffset = function(dash_offset) {
                          ctx.lineDashOffset = dash_offset;
                          ctx.mozDashOffset = dash_offset;
                          return ctx.webkitLineDashOffset = dash_offset;
                        };
                        return ctx.getLineDashOffset = function() {
                          return ctx.mozDashOffset;
                        };
                      };
                
                      CanvasView.prototype._fixup_image_smoothing = function(ctx) {
                        ctx.setImageSmoothingEnabled = function(value) {
                          ctx.imageSmoothingEnabled = value;
                          ctx.mozImageSmoothingEnabled = value;
                          ctx.oImageSmoothingEnabled = value;
                          return ctx.webkitImageSmoothingEnabled = value;
                        };
                        return ctx.getImageSmoothingEnabled = function() {
                          var _ref1;
                          return (_ref1 = ctx.imageSmoothingEnabled) != null ? _ref1 : true;
                        };
                      };
                
                      CanvasView.prototype._fixup_measure_text = function(ctx) {
                        if (ctx.measureText && (ctx.html5MeasureText == null)) {
                          ctx.html5MeasureText = ctx.measureText;
                          return ctx.measureText = function(text) {
                            var textMetrics;
                            textMetrics = ctx.html5MeasureText(text);
                            textMetrics.ascent = ctx.html5MeasureText("m").width * 1.6;
                            return textMetrics;
                          };
                        }
                      };
                
                      CanvasView.prototype._mousedown = function(e) {
                        var f, _i, _len, _ref1, _results;
                        _ref1 = this.mget('mousedown_callbacks');
                        _results = [];
                        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
                          f = _ref1[_i];
                          _results.push(f(e, e.layerX, e.layerY));
                        }
                        return _results;
                      };
                
                      CanvasView.prototype._mousemove = function(e) {
                        var f, _i, _len, _ref1, _results;
                        _ref1 = this.mget('mousemove_callbacks');
                        _results = [];
                        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
                          f = _ref1[_i];
                          _results.push(f(e, e.layerX, e.layerY));
                        }
                        return _results;
                      };
                
                      return CanvasView;
                
                    })(ContinuumView.View);
                    Canvas = (function(_super) {
                      __extends(Canvas, _super);
                
                      function Canvas() {
                        _ref1 = Canvas.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      Canvas.prototype.type = 'Canvas';
                
                      Canvas.prototype.default_view = CanvasView;
                
                      Canvas.prototype.initialize = function(attr, options) {
                        var solver;
                        solver = new Solver();
                        this.set('solver', solver);
                        Canvas.__super__.initialize.call(this, attr, options);
                        this.new_bounds = true;
                        solver.add_constraint(new Constraint(new Expr(this._left), EQ));
                        solver.add_constraint(new Constraint(new Expr(this._bottom), EQ));
                        return this._set_dims([this.get('canvas_width'), this.get('canvas_height')]);
                      };
                
                      Canvas.prototype.vx_to_sx = function(x) {
                        return x;
                      };
                
                      Canvas.prototype.vy_to_sy = function(y) {
                        return this.get('height') - y;
                      };
                
                      Canvas.prototype.v_vx_to_sx = function(xx) {
                        var idx, x, _i, _len;
                        for (idx = _i = 0, _len = xx.length; _i < _len; idx = ++_i) {
                          x = xx[idx];
                          xx[idx] = x;
                        }
                        return xx;
                      };
                
                      Canvas.prototype.v_vy_to_sy = function(yy) {
                        var canvas_height, idx, y, _i, _len;
                        canvas_height = this.get('height');
                        for (idx = _i = 0, _len = yy.length; _i < _len; idx = ++_i) {
                          y = yy[idx];
                          yy[idx] = canvas_height - y;
                        }
                        return yy;
                      };
                
                      Canvas.prototype.sx_to_vx = function(x) {
                        return x;
                      };
                
                      Canvas.prototype.sy_to_vy = function(y) {
                        return this.get('height') - y;
                      };
                
                      Canvas.prototype.v_sx_to_vx = function(xx) {
                        var idx, x, _i, _len;
                        for (idx = _i = 0, _len = xx.length; _i < _len; idx = ++_i) {
                          x = xx[idx];
                          xx[idx] = x;
                        }
                        return xx;
                      };
                
                      Canvas.prototype.v_sy_to_vy = function(yy) {
                        var canvas_height, idx, y, _i, _len;
                        canvas_height = this.get('height');
                        for (idx = _i = 0, _len = yy.length; _i < _len; idx = ++_i) {
                          y = yy[idx];
                          yy[idx] = canvas_height - y;
                        }
                        return yy;
                      };
                
                      Canvas.prototype._set_width = function(width, update) {
                        if (update == null) {
                          update = true;
                        }
                        if (this._width_constraint != null) {
                          this.solver.remove_constraint(this._width_constraint);
                        }
                        this._width_constraint = new Constraint(new Expr(this._width, -width), EQ);
                        this.solver.add_constraint(this._width_constraint);
                        if (update) {
                          this.solver.update_variables();
                        }
                        return this.new_bounds = true;
                      };
                
                      Canvas.prototype._set_height = function(height, update) {
                        if (update == null) {
                          update = true;
                        }
                        if (this._height_constraint != null) {
                          this.solver.remove_constraint(this._height_constraint);
                        }
                        this._height_constraint = new Constraint(new Expr(this._height, -height), EQ);
                        this.solver.add_constraint(this._height_constraint);
                        if (update) {
                          this.solver.update_variables();
                        }
                        return this.new_bounds = true;
                      };
                
                      Canvas.prototype._set_dims = function(dims) {
                        this._set_width(dims[0], false);
                        this._set_height(dims[1], false);
                        return this.solver.update_variables();
                      };
                
                      Canvas.prototype.defaults = function() {
                        return {
                          width: 300,
                          height: 300,
                          map: false,
                          mousedown_callbacks: [],
                          mousemove_callbacks: [],
                          use_hidpi: true
                        };
                      };
                
                      Canvas.prototype.display_defaults = function() {
                        return {};
                      };
                
                      return Canvas;
                
                    })(LayoutBox.Model);
                    Canvases = (function(_super) {
                      __extends(Canvases, _super);
                
                      function Canvases() {
                        _ref2 = Canvases.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      Canvases.prototype.model = Canvas;
                
                      return Canvases;
                
                    })(Backbone.Collection);
                    return {
                      "Model": Canvas,
                      "Collection": new Canvases()
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=canvas.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('mapper/linear_mapper',["backbone", "common/has_properties"], function(Backbone, HasProperties) {
                    var LinearMapper, LinearMappers, _ref, _ref1;
                    LinearMapper = (function(_super) {
                      __extends(LinearMapper, _super);
                
                      function LinearMapper() {
                        _ref = LinearMapper.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      LinearMapper.prototype.initialize = function(attrs, options) {
                        LinearMapper.__super__.initialize.call(this, attrs, options);
                        this.register_property('mapper_state', this._mapper_state, true);
                        this.add_dependencies('mapper_state', this, ['source_range', 'target_range']);
                        this.add_dependencies('mapper_state', this.get('source_range'), ['start', 'end']);
                        return this.add_dependencies('mapper_state', this.get('target_range'), ['start', 'end']);
                      };
                
                      LinearMapper.prototype.map_to_target = function(x) {
                        var offset, scale, _ref1;
                        _ref1 = this.get('mapper_state'), scale = _ref1[0], offset = _ref1[1];
                        return scale * x + offset;
                      };
                
                      LinearMapper.prototype.v_map_to_target = function(xs) {
                        var idx, offset, result, scale, x, _i, _len, _ref1;
                        _ref1 = this.get('mapper_state'), scale = _ref1[0], offset = _ref1[1];
                        result = new Float64Array(xs.length);
                        for (idx = _i = 0, _len = xs.length; _i < _len; idx = ++_i) {
                          x = xs[idx];
                          result[idx] = scale * x + offset;
                        }
                        return result;
                      };
                
                      LinearMapper.prototype.map_from_target = function(xprime) {
                        var offset, scale, _ref1;
                        _ref1 = this.get('mapper_state'), scale = _ref1[0], offset = _ref1[1];
                        return (xprime - offset) / scale;
                      };
                
                      LinearMapper.prototype.v_map_from_target = function(xprimes) {
                        var idx, offset, result, scale, xprime, _i, _len, _ref1;
                        _ref1 = this.get('mapper_state'), scale = _ref1[0], offset = _ref1[1];
                        result = new Float64Array(xprimes.length);
                        for (idx = _i = 0, _len = xprimes.length; _i < _len; idx = ++_i) {
                          xprime = xprimes[idx];
                          result[idx] = (xprime - offset) / scale;
                        }
                        return result;
                      };
                
                      LinearMapper.prototype._mapper_state = function() {
                        var offset, scale, source_end, source_start, target_end, target_start;
                        source_start = this.get('source_range').get('start');
                        source_end = this.get('source_range').get('end');
                        target_start = this.get('target_range').get('start');
                        target_end = this.get('target_range').get('end');
                        scale = (target_end - target_start) / (source_end - source_start);
                        offset = -(scale * source_start) + target_start;
                        return [scale, offset];
                      };
                
                      return LinearMapper;
                
                    })(HasProperties);
                    LinearMappers = (function(_super) {
                      __extends(LinearMappers, _super);
                
                      function LinearMappers() {
                        _ref1 = LinearMappers.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      LinearMappers.prototype.model = LinearMapper;
                
                      return LinearMappers;
                
                    })(Backbone.Collection);
                    return {
                      "Model": LinearMapper,
                      "Collection": new LinearMappers()
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=linear_mapper.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('mapper/log_mapper',["backbone", "common/has_properties"], function(Backbone, HasProperties) {
                    var LogMapper, LogMappers, _ref, _ref1;
                    LogMapper = (function(_super) {
                      __extends(LogMapper, _super);
                
                      function LogMapper() {
                        _ref = LogMapper.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      LogMapper.prototype.initialize = function(attrs, options) {
                        LogMapper.__super__.initialize.call(this, attrs, options);
                        this.register_property('mapper_state', this._mapper_state, true);
                        this.add_dependencies('mapper_state', this, ['source_range', 'target_range']);
                        this.add_dependencies('mapper_state', this.get('source_range'), ['start', 'end']);
                        return this.add_dependencies('mapper_state', this.get('target_range'), ['start', 'end']);
                      };
                
                      LogMapper.prototype.map_to_target = function(x) {
                        var error, inter_offset, inter_scale, intermediate, offset, result, scale, _ref1;
                        _ref1 = this.get('mapper_state'), scale = _ref1[0], offset = _ref1[1], inter_scale = _ref1[2], inter_offset = _ref1[3];
                        intermediate = 0;
                        result = 0;
                        if (inter_scale === 0) {
                          intermediate = 0;
                        } else {
                          try {
                            intermediate = (Math.log(x) - inter_offset) / inter_scale;
                            if (isNaN(intermediate)) {
                              throw "NaN";
                            }
                            if (isFinite(intermediate) === false) {
                              throw "Infinite";
                            }
                          } catch (_error) {
                            error = _error;
                            intermediate = 0;
                          }
                        }
                        result = intermediate * scale + offset;
                        return result;
                      };
                
                      LogMapper.prototype.v_map_to_target = function(xs) {
                        var error, i, idx, inter_offset, inter_scale, intermediate, mask, mask1, mask2, offset, result, scale, x, _i, _j, _len, _len1, _ref1;
                        _ref1 = this.get('mapper_state'), scale = _ref1[0], offset = _ref1[1], inter_scale = _ref1[2], inter_offset = _ref1[3];
                        intermediate = new Float64Array(xs.length);
                        result = new Float64Array(xs.length);
                        if (inter_scale === 0) {
                          intermediate = xs.map(function(i) {
                            return i * 0;
                          });
                        } else {
                          try {
                            mask1 = xs.map(function(i) {
                              return i <= 0;
                            });
                            mask2 = xs.map(function(i) {
                              return isNaN(i);
                            });
                            mask = (function() {
                              var _i, _ref2, _results;
                              _results = [];
                              for (i = _i = 0, _ref2 = xs.length; 0 <= _ref2 ? _i < _ref2 : _i > _ref2; i = 0 <= _ref2 ? ++_i : --_i) {
                                _results.push(mask1[i] | mask2[i]);
                              }
                              return _results;
                            })();
                            mask = mask.reduce(function(x, y) {
                              return x || y;
                            });
                            if (mask === 1) {
                              xs[mask] = 1;
                            }
                            intermediate = xs.map(function(i) {
                              return (Math.log(i) - inter_offset) / inter_scale;
                            });
                            for (idx = _i = 0, _len = intermediate.length; _i < _len; idx = ++_i) {
                              x = intermediate[idx];
                              if (isNaN(intermediate[idx])) {
                                throw "NaN";
                              }
                              if (isFinite(intermediate[idx]) === false) {
                                throw "Infinite";
                              }
                            }
                          } catch (_error) {
                            error = _error;
                            intermediate = xs.map(function(i) {
                              return i * 0;
                            });
                          }
                        }
                        for (idx = _j = 0, _len1 = xs.length; _j < _len1; idx = ++_j) {
                          x = xs[idx];
                          result[idx] = intermediate[idx] * scale + offset;
                        }
                        return result;
                      };
                
                      LogMapper.prototype.map_from_target = function(xprime) {
                        var inter_offset, inter_scale, intermediate, offset, scale, _ref1;
                        _ref1 = this.get('mapper_state'), scale = _ref1[0], offset = _ref1[1], inter_scale = _ref1[2], inter_offset = _ref1[3];
                        intermediate = (xprime - offset) / scale;
                        intermediate = Math.exp(inter_scale * intermediate + inter_offset);
                        return intermediate;
                      };
                
                      LogMapper.prototype.v_map_from_target = function(xprimes) {
                        var inter_offset, inter_scale, intermediate, offset, scale, _ref1;
                        _ref1 = this.get('mapper_state'), scale = _ref1[0], offset = _ref1[1], inter_scale = _ref1[2], inter_offset = _ref1[3];
                        intermediate = xprimes.map(function(i) {
                          return (i - offset) / scale;
                        });
                        intermediate = intermediate.map(function(i) {
                          return Math.exp(inter_scale * i + inter_offset);
                        });
                        return intermediate;
                      };
                
                      LogMapper.prototype._get_safe_scale = function(orig_start, orig_end) {
                        var end, log_val, start;
                        if (orig_start < 0) {
                          start = 0;
                        } else {
                          start = orig_start;
                        }
                        if (orig_end < 0) {
                          end = 0;
                        } else {
                          end = orig_end;
                        }
                        if (start === end) {
                          if (start === 0) {
                            start = 1;
                            end = 10;
                          } else {
                            log_val = Math.log(start) / Math.log(10);
                            start = Math.pow(10, Math.floor(log_val));
                            if (Math.ceil(log_val) !== Math.floor(log_val)) {
                              end = Math.pow(10, Math.ceil(log_val));
                            } else {
                              end = Math.pow(10, Math.ceil(log_val) + 1);
                            }
                          }
                        }
                        return [start, end];
                      };
                
                      LogMapper.prototype._mapper_state = function() {
                        var end, inter_offset, inter_scale, offset, scale, screen_range, source_end, source_start, start, target_end, target_start, _ref1;
                        source_start = this.get('source_range').get('start');
                        source_end = this.get('source_range').get('end');
                        target_start = this.get('target_range').get('start');
                        target_end = this.get('target_range').get('end');
                        screen_range = target_end - target_start;
                        _ref1 = this._get_safe_scale(source_start, source_end), start = _ref1[0], end = _ref1[1];
                        if (start === 0) {
                          inter_scale = Math.log(end);
                          inter_offset = 0;
                        } else {
                          inter_scale = Math.log(end) - Math.log(start);
                          inter_offset = Math.log(start);
                        }
                        scale = screen_range;
                        offset = target_start;
                        return [scale, offset, inter_scale, inter_offset];
                      };
                
                      return LogMapper;
                
                    })(HasProperties);
                    LogMappers = (function(_super) {
                      __extends(LogMappers, _super);
                
                      function LogMappers() {
                        _ref1 = LogMappers.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      LogMappers.prototype.model = LogMapper;
                
                      return LogMappers;
                
                    })(Backbone.Collection);
                    return {
                      "Model": LogMapper,
                      "Collection": new LogMappers()
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=log_mapper.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('mapper/categorical_mapper',["backbone", "./linear_mapper"], function(Backbone, LinearMapper) {
                    var CategoricalMapper, CategoricalMappers, _ref, _ref1;
                    CategoricalMapper = (function(_super) {
                      __extends(CategoricalMapper, _super);
                
                      function CategoricalMapper() {
                        _ref = CategoricalMapper.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      CategoricalMapper.prototype.map_to_target = function(x) {
                        var factor, factors, percent, _ref1;
                        if (typeof x === 'number') {
                          return CategoricalMapper.__super__.map_to_target.call(this, x);
                        }
                        factors = this.get('source_range').get('factors');
                        if (x.indexOf(':') >= 0) {
                          _ref1 = x.split(':'), factor = _ref1[0], percent = _ref1[1];
                          percent = parseFloat(percent);
                          return CategoricalMapper.__super__.map_to_target.call(this, factors.indexOf(factor) + 0.5 + percent);
                        }
                        return CategoricalMapper.__super__.map_to_target.call(this, factors.indexOf(x) + 1);
                      };
                
                      CategoricalMapper.prototype.v_map_to_target = function(xs) {
                        var factor, factors, i, percent, results, x, _i, _ref1, _ref2;
                        if (typeof xs[0] === 'number') {
                          return CategoricalMapper.__super__.v_map_to_target.call(this, xs);
                        }
                        factors = this.get('source_range').get('factors');
                        results = Array(xs.length);
                        for (i = _i = 0, _ref1 = xs.length; 0 <= _ref1 ? _i < _ref1 : _i > _ref1; i = 0 <= _ref1 ? ++_i : --_i) {
                          x = xs[i];
                          if (x.indexOf(':') >= 0) {
                            _ref2 = x.split(':'), factor = _ref2[0], percent = _ref2[1];
                            percent = parseFloat(percent);
                            results[i] = factors.indexOf(factor) + 0.5 + percent;
                          } else {
                            results[i] = factors.indexOf(x) + 1;
                          }
                        }
                        return CategoricalMapper.__super__.v_map_to_target.call(this, results);
                      };
                
                      CategoricalMapper.prototype.map_from_target = function(xprime) {
                        var factors;
                        xprime = CategoricalMapper.__super__.map_from_target.call(this, xprime) - 0.5;
                        factors = this.get('source_range').get('factors');
                        return factors[Math.floor(xprime)];
                      };
                
                      CategoricalMapper.prototype.v_map_from_target = function(xprimes) {
                        var factors, i, result, _i, _ref1;
                        result = CategoricalMapper.__super__.v_map_from_target.call(this, xprimes);
                        factors = this.get('source_range').get('factors');
                        for (i = _i = 0, _ref1 = result.length; 0 <= _ref1 ? _i < _ref1 : _i > _ref1; i = 0 <= _ref1 ? ++_i : --_i) {
                          result[i] = factors[Math.floor(result[i] - 0.5)];
                        }
                        return result;
                      };
                
                      return CategoricalMapper;
                
                    })(LinearMapper.Model);
                    CategoricalMappers = (function(_super) {
                      __extends(CategoricalMappers, _super);
                
                      function CategoricalMappers() {
                        _ref1 = CategoricalMappers.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      CategoricalMappers.prototype.model = CategoricalMapper;
                
                      return CategoricalMappers;
                
                    })(Backbone.Collection);
                    return {
                      "Model": CategoricalMapper,
                      "Collection": new CategoricalMappers()
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=categorical_mapper.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('mapper/grid_mapper',["backbone", "common/has_properties"], function(Backbone, HasProperties) {
                    var GridMapper, GridMappers, _ref, _ref1;
                    GridMapper = (function(_super) {
                      __extends(GridMapper, _super);
                
                      function GridMapper() {
                        _ref = GridMapper.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      GridMapper.prototype.map_to_target = function(x, y) {
                        var xprime, yprime;
                        xprime = this.get('domain_mapper').map_to_target(x);
                        yprime = this.get('codomain_mapper').map_to_target(y);
                        return [xprime, yprime];
                      };
                
                      GridMapper.prototype.v_map_to_target = function(xs, ys) {
                        var xprimes, yprimes;
                        xprimes = this.get('domain_mapper').v_map_to_target(xs);
                        yprimes = this.get('codomain_mapper').v_map_to_target(ys);
                        return [xprimes, yprimes];
                      };
                
                      GridMapper.prototype.map_from_target = function(xprime, yprime) {
                        var x, y;
                        x = this.get('domain_mapper').map_from_target(xprime);
                        y = this.get('codomain_mapper').map_from_target(yprime);
                        return [x, y];
                      };
                
                      GridMapper.prototype.v_map_from_target = function(xprimes, yprimes) {
                        var xs, ys;
                        xs = this.get('domain_mapper').v_map_from_target(xprimes);
                        ys = this.get('codomain_mapper').v_map_from_target(yprimes);
                        return [xs, ys];
                      };
                
                      return GridMapper;
                
                    })(HasProperties);
                    GridMappers = (function(_super) {
                      __extends(GridMappers, _super);
                
                      function GridMappers() {
                        _ref1 = GridMappers.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      GridMappers.prototype.model = GridMapper;
                
                      return GridMappers;
                
                    })(Backbone.Collection);
                    return {
                      "Model": GridMapper,
                      "Collection": new GridMappers()
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=grid_mapper.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('common/cartesian_frame',["underscore", "backbone", "./layout_box", "mapper/linear_mapper", "mapper/log_mapper", "mapper/categorical_mapper", "mapper/grid_mapper"], function(_, Backbone, LayoutBox, LinearMapper, LogMapper, CategoricalMapper, GridMapper) {
                    var CartesianFrame, CartesianFrames, _ref, _ref1;
                    CartesianFrame = (function(_super) {
                      __extends(CartesianFrame, _super);
                
                      function CartesianFrame() {
                        _ref = CartesianFrame.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      CartesianFrame.prototype.type = 'CartesianFrame';
                
                      CartesianFrame.prototype.initialize = function(attrs, options) {
                        CartesianFrame.__super__.initialize.call(this, attrs, options);
                        this.register_property('x_ranges', function() {
                          return this._get_ranges('x');
                        }, true);
                        this.add_dependencies('x_ranges', this, ['x_range', 'extra_x_ranges']);
                        this.register_property('y_ranges', function() {
                          return this._get_ranges('y');
                        }, true);
                        this.add_dependencies('y_ranges', this, ['y_range', 'extra_y_ranges']);
                        this.register_property('x_mappers', function() {
                          return this._get_mappers('x', this.get('x_ranges'), this.get('h_range'));
                        }, true);
                        this.add_dependencies('x_ranges', this, ['x_ranges', 'h_range']);
                        this.register_property('y_mappers', function() {
                          return this._get_mappers('y', this.get('y_ranges'), this.get('v_range'));
                        }, true);
                        this.add_dependencies('y_ranges', this, ['y_ranges', 'v_range']);
                        this.register_property('mapper', function() {
                          return new GridMapper.Model({
                            domain_mapper: this.get('x_mapper'),
                            codomain_mapper: this.get('y_mapper')
                          });
                        }, true);
                        this.add_dependencies('mapper', this, ['x_mapper', 'y_mapper']);
                        return this.listenTo(this.solver, 'layout_update', this._update_mappers);
                      };
                
                      CartesianFrame.prototype.map_to_screen = function(x, x_units, y, y_units, canvas, name) {
                        var sx, sy, vx, vy;
                        if (name == null) {
                          name = 'default';
                        }
                        if (x_units === 'screen') {
                          if (_.isArray(x)) {
                            vx = x.slice(0);
                          } else {
                            vx = new Float64Array(x.length);
                            vx.set(x);
                          }
                        } else {
                          vx = this.get('x_mappers')[name].v_map_to_target(x);
                        }
                        if (y_units === 'screen') {
                          if (_.isArray(y)) {
                            vy = y.slice(0);
                          } else {
                            vy = new Float64Array(y.length);
                            vy.set(y);
                          }
                        } else {
                          vy = this.get('y_mappers')[name].v_map_to_target(y);
                        }
                        sx = canvas.v_vx_to_sx(vx);
                        sy = canvas.v_vy_to_sy(vy);
                        return [sx, sy];
                      };
                
                      CartesianFrame.prototype.map_from_screen = function(sx, sy, units, canvas) {
                        var dx, dy, x, y, _ref1;
                        if (_.isArray(sx)) {
                          dx = sx.slice(0);
                        } else {
                          dx = new Float64Array(sx.length);
                          dx.set(sx);
                        }
                        if (_.isArray(sy)) {
                          dy = sy.slice(0);
                        } else {
                          dy = new Float64Array(sy.length);
                          dy.set(sy);
                        }
                        sx = canvas.v_sx_to_vx(dx);
                        sy = canvas.v_sy_to_vy(dy);
                        if (units === 'screen') {
                          x = sx;
                          y = sy;
                        } else {
                          _ref1 = this.mapper.v_map_from_target(sx, sy), x = _ref1[0], y = _ref1[1];
                        }
                        return [x, y];
                      };
                
                      CartesianFrame.prototype._get_ranges = function(dim) {
                        var extra_ranges, name, range, ranges;
                        ranges = {};
                        ranges['default'] = this.get("" + dim + "_range");
                        extra_ranges = this.get("extra_" + dim + "_ranges");
                        if (extra_ranges != null) {
                          for (name in extra_ranges) {
                            range = extra_ranges[name];
                            ranges[name] = range;
                          }
                        }
                        return ranges;
                      };
                
                      CartesianFrame.prototype._get_mappers = function(dim, ranges, frame_range) {
                        var mapper_type, mappers, name, range;
                        mappers = {};
                        for (name in ranges) {
                          range = ranges[name];
                          if (range.type === "Range1d" || range.type === "DataRange1d") {
                            if (this.get("" + dim + "_mapper_type") === "log") {
                              mapper_type = LogMapper.Model;
                            } else {
                              mapper_type = LinearMapper.Model;
                            }
                          } else if (range.type === "FactorRange") {
                            mapper_type = CategoricalMapper.Model;
                          } else {
                            console.log("Unknown range type for range '" + name + "': " + range);
                            return null;
                          }
                          mappers[name] = new mapper_type({
                            source_range: range,
                            target_range: frame_range
                          });
                        }
                        return mappers;
                      };
                
                      CartesianFrame.prototype._update_mappers = function() {
                        var mapper, name, _ref1, _ref2, _results;
                        _ref1 = this.get('x_mappers');
                        for (name in _ref1) {
                          mapper = _ref1[name];
                          mapper.set('target_range', this.get('h_range'));
                        }
                        _ref2 = this.get('y_mappers');
                        _results = [];
                        for (name in _ref2) {
                          mapper = _ref2[name];
                          _results.push(mapper.set('target_range', this.get('v_range')));
                        }
                        return _results;
                      };
                
                      CartesianFrame.prototype.defaults = function() {
                        return {
                          extra_x_ranges: {},
                          extra_y_ranges: {}
                        };
                      };
                
                      return CartesianFrame;
                
                    })(LayoutBox.Model);
                    CartesianFrames = (function(_super) {
                      __extends(CartesianFrames, _super);
                
                      function CartesianFrames() {
                        _ref1 = CartesianFrames.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      CartesianFrames.prototype.model = CartesianFrame;
                
                      return CartesianFrames;
                
                    })(Backbone.Collection);
                    return {
                      "Model": CartesianFrame,
                      "Collection": new CartesianFrames()
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=cartesian_frame.js.map
                */;
                (function() {
                  define('common/build_views',["underscore"], function(_) {
                    var build_views;
                    return build_views = function(view_storage, view_models, options, view_types) {
                      var created_views, i_model, key, model, newmodels, to_remove, view_specific_option, _i, _j, _len, _len1;
                      if (view_types == null) {
                        view_types = [];
                      }
                      created_views = [];
                      newmodels = _.filter(view_models, function(x) {
                        return !_.has(view_storage, x.id);
                      });
                      for (i_model = _i = 0, _len = newmodels.length; _i < _len; i_model = ++_i) {
                        model = newmodels[i_model];
                        view_specific_option = _.extend({}, options, {
                          'model': model
                        });
                        if (i_model < view_types.length) {
                          view_storage[model.id] = new view_types[i_model](view_specific_option);
                        } else {
                          view_storage[model.id] = new model.default_view(view_specific_option);
                        }
                        created_views.push(view_storage[model.id]);
                      }
                      to_remove = _.difference(_.keys(view_storage), _.pluck(view_models, 'id'));
                      for (_j = 0, _len1 = to_remove.length; _j < _len1; _j++) {
                        key = to_remove[_j];
                        view_storage[key].remove();
                        delete view_storage[key];
                      }
                      return created_views;
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=build_views.js.map
                */;
                (function() {
                  define('common/plot_utils',[], function() {
                    var LEVELS, delay_animation, throttle_animation, _delay_animation;
                    LEVELS = ['image', 'underlay', 'glyph', 'overlay', 'annotation', 'tool'];
                    _delay_animation = function(f) {
                      return f();
                    };
                    delay_animation = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame || _delay_animation;
                    throttle_animation = function(func, wait) {
                      var args, context, later, pending, previous, result, timeout, _ref;
                      _ref = [null, null, null, null], context = _ref[0], args = _ref[1], timeout = _ref[2], result = _ref[3];
                      previous = 0;
                      pending = false;
                      later = function() {
                        previous = new Date;
                        timeout = null;
                        pending = false;
                        return result = func.apply(context, args);
                      };
                      return function() {
                        var now, remaining;
                        now = new Date;
                        remaining = wait - (now - previous);
                        context = this;
                        args = arguments;
                        if (remaining <= 0 && !pending) {
                          clearTimeout(timeout);
                          pending = true;
                          delay_animation(later);
                        } else if (!timeout) {
                          timeout = setTimeout((function() {
                            return delay_animation(later);
                          }), remaining);
                        }
                        return result;
                      };
                    };
                    return {
                      "LEVELS": LEVELS,
                      "throttle_animation": throttle_animation
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=plot_utils.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('common/has_parent',["underscore", "./has_properties"], function(_, HasProperties) {
                    var HasParent, _ref;
                    HasParent = (function(_super) {
                      __extends(HasParent, _super);
                
                      function HasParent() {
                        _ref = HasParent.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      HasParent.prototype.initialize = function(attrs, options) {
                        HasParent.__super__.initialize.call(this, attrs, options);
                        this._parent = HasProperties.prototype.get.apply(this, ['parent']);
                        this._display_defaults = {};
                        if (this.display_defaults != null) {
                          if (_.isFunction(this.display_defaults)) {
                            return this._display_defaults = this.display_defaults();
                          } else {
                            return this._display_defaults = this.display_defaults;
                          }
                        }
                      };
                
                      HasParent.prototype.get = function(attr) {
                        var val;
                        if (attr === 'parent') {
                          return this._parent;
                        }
                        val = HasParent.__super__.get.call(this, attr);
                        if (!_.isUndefined(val)) {
                          return val;
                        }
                        if (this._parent && _.indexOf(this._parent.parent_properties, attr) >= 0) {
                          val = this._parent.get(attr);
                          if (!_.isUndefined(val)) {
                            return val;
                          }
                        }
                        return this._display_defaults[attr];
                      };
                
                      HasParent.prototype.display_defaults = {};
                
                      return HasParent;
                
                    })(HasProperties);
                    return HasParent;
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=has_parent.js.map
                */;
                define('common/plot_template',[],function(){
                  var template = function(__obj) {
                  var _safe = function(value) {
                    if (typeof value === 'undefined' && value == null)
                      value = '';
                    var result = new String(value);
                    result.ecoSafe = true;
                    return result;
                  };
                  return (function() {
                    var __out = [], __self = this, _print = function(value) {
                      if (typeof value !== 'undefined' && value != null)
                        __out.push(value.ecoSafe ? value : __self.escape(value));
                    }, _capture = function(callback) {
                      var out = __out, result;
                      __out = [];
                      callback.call(this);
                      result = __out.join('');
                      __out = out;
                      return _safe(result);
                    };
                    (function() {
                      _print(_safe('<div class=\'bokeh_canvas_wrapper_outer\'>\n\n  <div class=\'bk-sidebar\'>\n    <a href=\'http://bokeh.pydata.org/\' class=\'bk-logo bk-logo-medium\'/>\n    <div class=\'bk-button-bar\'/>\n  </div>\n\n</div>\n'));
                    
                    }).call(this);
                    
                    return __out.join('');
                  }).call((function() {
                    var obj = {
                      escape: function(value) {
                        return ('' + value)
                          .replace(/&/g, '&amp;')
                          .replace(/</g, '&lt;')
                          .replace(/>/g, '&gt;')
                          .replace(/"/g, '&quot;');
                      },
                      safe: _safe
                    }, key;
                    for (key in __obj) obj[key] = __obj[key];
                    return obj;
                  })());
                };
                  return template;
                });
                
                (function() {
                  define('common/svg_colors',[], function() {
                    var svg_colors;
                    return svg_colors = {
                      indianred: "#CD5C5C",
                      lightcoral: "#F08080",
                      salmon: "#FA8072",
                      darksalmon: "#E9967A",
                      lightsalmon: "#FFA07A",
                      crimson: "#DC143C",
                      red: "#FF0000",
                      firebrick: "#B22222",
                      darkred: "#8B0000",
                      pink: "#FFC0CB",
                      lightpink: "#FFB6C1",
                      hotpink: "#FF69B4",
                      deeppink: "#FF1493",
                      mediumvioletred: "#C71585",
                      palevioletred: "#DB7093",
                      lightsalmon: "#FFA07A",
                      coral: "#FF7F50",
                      tomato: "#FF6347",
                      orangered: "#FF4500",
                      darkorange: "#FF8C00",
                      orange: "#FFA500",
                      gold: "#FFD700",
                      yellow: "#FFFF00",
                      lightyellow: "#FFFFE0",
                      lemonchiffon: "#FFFACD",
                      lightgoldenrodyellow: "#FAFAD2",
                      papayawhip: "#FFEFD5",
                      moccasin: "#FFE4B5",
                      peachpuff: "#FFDAB9",
                      palegoldenrod: "#EEE8AA",
                      khaki: "#F0E68C",
                      darkkhaki: "#BDB76B",
                      lavender: "#E6E6FA",
                      thistle: "#D8BFD8",
                      plum: "#DDA0DD",
                      violet: "#EE82EE",
                      orchid: "#DA70D6",
                      fuchsia: "#FF00FF",
                      magenta: "#FF00FF",
                      mediumorchid: "#BA55D3",
                      mediumpurple: "#9370DB",
                      blueviolet: "#8A2BE2",
                      darkviolet: "#9400D3",
                      darkorchid: "#9932CC",
                      darkmagenta: "#8B008B",
                      purple: "#800080",
                      indigo: "#4B0082",
                      slateblue: "#6A5ACD",
                      darkslateblue: "#483D8B",
                      mediumslateblue: "#7B68EE",
                      greenyellow: "#ADFF2F",
                      chartreuse: "#7FFF00",
                      lawngreen: "#7CFC00",
                      lime: "#00FF00",
                      limegreen: "#32CD32",
                      palegreen: "#98FB98",
                      lightgreen: "#90EE90",
                      mediumspringgreen: "#00FA9A",
                      springgreen: "#00FF7F",
                      mediumseagreen: "#3CB371",
                      seagreen: "#2E8B57",
                      forestgreen: "#228B22",
                      green: "#008000",
                      darkgreen: "#006400",
                      yellowgreen: "#9ACD32",
                      olivedrab: "#6B8E23",
                      olive: "#808000",
                      darkolivegreen: "#556B2F",
                      mediumaquamarine: "#66CDAA",
                      darkseagreen: "#8FBC8F",
                      lightseagreen: "#20B2AA",
                      darkcyan: "#008B8B",
                      teal: "#008080",
                      aqua: "#00FFFF",
                      cyan: "#00FFFF",
                      lightcyan: "#E0FFFF",
                      paleturquoise: "#AFEEEE",
                      aquamarine: "#7FFFD4",
                      turquoise: "#40E0D0",
                      mediumturquoise: "#48D1CC",
                      darkturquoise: "#00CED1",
                      cadetblue: "#5F9EA0",
                      steelblue: "#4682B4",
                      lightsteelblue: "#B0C4DE",
                      powderblue: "#B0E0E6",
                      lightblue: "#ADD8E6",
                      skyblue: "#87CEEB",
                      lightskyblue: "#87CEFA",
                      deepskyblue: "#00BFFF",
                      dodgerblue: "#1E90FF",
                      cornflowerblue: "#6495ED",
                      mediumslateblue: "#7B68EE",
                      royalblue: "#4169E1",
                      blue: "#0000FF",
                      mediumblue: "#0000CD",
                      darkblue: "#00008B",
                      navy: "#000080",
                      midnightblue: "#191970",
                      cornsilk: "#FFF8DC",
                      blanchedalmond: "#FFEBCD",
                      bisque: "#FFE4C4",
                      navajowhite: "#FFDEAD",
                      wheat: "#F5DEB3",
                      burlywood: "#DEB887",
                      tan: "#D2B48C",
                      rosybrown: "#BC8F8F",
                      sandybrown: "#F4A460",
                      goldenrod: "#DAA520",
                      darkgoldenrod: "#B8860B",
                      peru: "#CD853F",
                      chocolate: "#D2691E",
                      saddlebrown: "#8B4513",
                      sienna: "#A0522D",
                      brown: "#A52A2A",
                      maroon: "#800000",
                      white: "#FFFFFF",
                      snow: "#FFFAFA",
                      honeydew: "#F0FFF0",
                      mintcream: "#F5FFFA",
                      azure: "#F0FFFF",
                      aliceblue: "#F0F8FF",
                      ghostwhite: "#F8F8FF",
                      whitesmoke: "#F5F5F5",
                      seashell: "#FFF5EE",
                      beige: "#F5F5DC",
                      oldlace: "#FDF5E6",
                      floralwhite: "#FFFAF0",
                      ivory: "#FFFFF0",
                      antiquewhite: "#FAEBD7",
                      linen: "#FAF0E6",
                      lavenderblush: "#FFF0F5",
                      mistyrose: "#FFE4E1",
                      gainsboro: "#DCDCDC",
                      lightgrey: "#D3D3D3",
                      silver: "#C0C0C0",
                      darkgray: "#A9A9A9",
                      darkgrey: "#A9A9A9",
                      gray: "#808080",
                      grey: "#808080",
                      dimgray: "#696969",
                      dimgrey: "#696969",
                      lightslategray: "#778899",
                      lightslategrey: "#778899",
                      slategray: "#708090",
                      darkslategray: "#2F4F4F",
                      darkslategrey: "#2F4F4F",
                      black: "#000000"
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=svg_colors.js.map
                */;
                (function() {
                  var __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; },
                    __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('renderer/properties',["underscore", "common/svg_colors"], function(_, svg_colors) {
                    var fill_properties, glyph_properties, line_properties, properties, text_properties;
                    properties = (function() {
                      function properties() {}
                
                      properties.prototype.source_v_select = function(attrname, datasource) {
                        var default_value, glyph_props, i, prop, retval, _i, _ref;
                        glyph_props = this;
                        if (!(attrname in glyph_props)) {
                          console.log("requested vector selection of unknown property '" + attrname + "' on objects");
                          return (function() {
                            var _i, _len, _ref, _results;
                            _ref = datasource.get_length();
                            _results = [];
                            for (_i = 0, _len = _ref.length; _i < _len; _i++) {
                              i = _ref[_i];
                              _results.push(null);
                            }
                            return _results;
                          })();
                        }
                        prop = glyph_props[attrname];
                        if ((prop.field != null) && (prop.field in datasource.get('data'))) {
                          return datasource.getcolumn(prop.field);
                        } else {
                          if (glyph_props[attrname].value != null) {
                            default_value = glyph_props[attrname].value;
                          } else if (attrname in datasource.get('data')) {
                            return datasource.getcolumn(attrname);
                          } else if (glyph_props[attrname]["default"] != null) {
                            default_value = glyph_props[attrname]["default"];
                          }
                          retval = [];
                          for (i = _i = 0, _ref = datasource.get_length(); 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {
                            retval.push(default_value);
                          }
                          return retval;
                        }
                      };
                
                      properties.prototype.string = function(styleprovider, glyphspec, attrname) {
                        var default_value, glyph_value;
                        this[attrname] = {};
                        default_value = styleprovider.mget(attrname);
                        if (default_value == null) {
                
                        } else if (_.isString(default_value)) {
                          this[attrname]["default"] = default_value;
                        } else {
                          console.log(("string property '" + attrname + "' given invalid default value: ") + default_value);
                        }
                        if ((glyphspec == null) || !(attrname in glyphspec)) {
                          return;
                        }
                        glyph_value = glyphspec[attrname];
                        if (_.isString(glyph_value)) {
                          return this[attrname].value = glyph_value;
                        } else if (_.isObject(glyph_value)) {
                          return this[attrname] = _.extend(this[attrname], glyph_value);
                        } else {
                          return console.log(("string property '" + attrname + "' given invalid glyph value: ") + glyph_value);
                        }
                      };
                
                      properties.prototype.number = function(styleprovider, glyphspec, attrname) {
                        var default_value, glyph_value, units_value, _ref;
                        this[attrname] = {};
                        default_value = styleprovider.mget(attrname);
                        if (default_value == null) {
                
                        } else if (_.isNumber(default_value)) {
                          this[attrname]["default"] = default_value;
                        } else {
                          console.log(("number property '" + attrname + "' given invalid default value: ") + default_value);
                        }
                        units_value = (_ref = styleprovider.mget(attrname + '_units')) != null ? _ref : 'data';
                        if ((glyphspec != null) && (attrname + '_units' in glyphspec)) {
                          units_value = glyphspec[attrname + '_units'];
                        }
                        this[attrname].units = units_value;
                        if ((glyphspec == null) || !(attrname in glyphspec)) {
                          return;
                        }
                        glyph_value = glyphspec[attrname];
                        if (_.isString(glyph_value)) {
                          return this[attrname].field = glyph_value;
                        } else if (_.isNumber(glyph_value)) {
                          return this[attrname].value = glyph_value;
                        } else if (_.isObject(glyph_value)) {
                          return this[attrname] = _.extend(this[attrname], glyph_value);
                        } else {
                          return console.log(("number property '" + attrname + "' given invalid glyph value: ") + glyph_value);
                        }
                      };
                
                      properties.prototype.color = function(styleprovider, glyphspec, attrname) {
                        var default_value, glyph_value;
                        this[attrname] = {};
                        default_value = styleprovider.mget(attrname);
                        if (_.isUndefined(default_value)) {
                          this[attrname]["default"] = null;
                        } else if (_.isString(default_value) && ((svg_colors[default_value] != null) || default_value.substring(0, 1) === "#") || _.isNull(default_value)) {
                          this[attrname]["default"] = default_value;
                        } else {
                          console.log(("color property '" + attrname + "' given invalid default value: ") + default_value);
                        }
                        if ((glyphspec == null) || !(attrname in glyphspec)) {
                          return;
                        }
                        glyph_value = glyphspec[attrname];
                        if (_.isNull(glyph_value)) {
                          return this[attrname].value = null;
                        } else if (_.isString(glyph_value)) {
                          if ((svg_colors[glyph_value] != null) || glyph_value.substring(0, 1) === "#") {
                            return this[attrname].value = glyph_value;
                          } else {
                            return this[attrname].field = glyph_value;
                          }
                        } else if (_.isObject(glyph_value)) {
                          return this[attrname] = _.extend(this[attrname], glyph_value);
                        } else {
                          return console.log(("color property '" + attrname + "' given invalid glyph value: ") + glyph_value);
                        }
                      };
                
                      properties.prototype.array = function(styleprovider, glyphspec, attrname) {
                        var default_value, glyph_value, units_value, _ref;
                        this[attrname] = {};
                        default_value = styleprovider.mget(attrname);
                        if (default_value == null) {
                
                        } else if (_.isArray(default_value)) {
                          this[attrname]["default"] = default_value;
                        } else {
                          console.log(("array property '" + attrname + "' given invalid default value: ") + default_value);
                        }
                        units_value = (_ref = styleprovider.mget(attrname + "_units")) != null ? _ref : 'data';
                        if ((glyphspec != null) && (attrname + '_units' in glyphspec)) {
                          units_value = glyphspec[attrname + '_units'];
                        }
                        this[attrname].units = units_value;
                        if ((glyphspec == null) || !(attrname in glyphspec)) {
                          return;
                        }
                        glyph_value = glyphspec[attrname];
                        if (_.isString(glyph_value)) {
                          return this[attrname].field = glyph_value;
                        } else if (_.isArray(glyph_value)) {
                          return this[attrname].value = glyph_value;
                        } else if (_.isObject(glyph_value)) {
                          return this[attrname] = _.extend(this[attrname], glyph_value);
                        } else {
                          return console.log(("array property '" + attrname + "' given invalid glyph value: ") + glyph_value);
                        }
                      };
                
                      properties.prototype["enum"] = function(styleprovider, glyphspec, attrname, vals) {
                        var default_value, glyph_value, levels;
                        this[attrname] = {};
                        levels = vals.split(" ");
                        default_value = styleprovider.mget(attrname);
                        if (_.isNull(default_value)) {
                
                        } else if (_.isString(default_value) && __indexOf.call(levels, default_value) >= 0) {
                          this[attrname] = {
                            "default": default_value
                          };
                        } else {
                          console.log(("enum property '" + attrname + "' given invalid default value: ") + default_value);
                          console.log("    acceptable values:" + levels);
                        }
                        if ((glyphspec == null) || !(attrname in glyphspec)) {
                          return;
                        }
                        glyph_value = glyphspec[attrname];
                        if (_.isString(glyph_value)) {
                          if (__indexOf.call(levels, glyph_value) >= 0) {
                            return this[attrname].value = glyph_value;
                          } else {
                            return this[attrname].field = glyph_value;
                          }
                        } else if (_.isObject(glyph_value)) {
                          return this[attrname] = _.extend(this[attrname], glyph_value);
                        } else {
                          console.log(("enum property '" + attrname + "' given invalid glyph value: ") + glyph_value);
                          return console.log("    acceptable values:" + levels);
                        }
                      };
                
                      properties.prototype.setattr = function(styleprovider, glyphspec, attrname, attrtype) {
                        var values, _ref;
                        values = null;
                        if (attrtype.indexOf(":") > -1) {
                          _ref = attrtype.split(":"), attrtype = _ref[0], values = _ref[1];
                        }
                        if (attrtype === "string") {
                          return this.string(styleprovider, glyphspec, attrname);
                        } else if (attrtype === "number") {
                          return this.number(styleprovider, glyphspec, attrname);
                        } else if (attrtype === "color") {
                          return this.color(styleprovider, glyphspec, attrname);
                        } else if (attrtype === "array") {
                          return this.array(styleprovider, glyphspec, attrname);
                        } else if (attrtype === "enum" && values) {
                          return this["enum"](styleprovider, glyphspec, attrname, values);
                        } else {
                          return console.log(("Unknown type '" + attrtype + "' for glyph property: ") + attrname);
                        }
                      };
                
                      properties.prototype.select = function(attrname, obj) {
                        if (!(attrname in this)) {
                          console.log(("requested selection of unknown property '" + attrname + "' on object: ") + obj);
                          return;
                        }
                        if ((this[attrname].field != null) && (this[attrname].field in obj)) {
                          return obj[this[attrname].field];
                        }
                        if (this[attrname].value != null) {
                          return this[attrname].value;
                        }
                        if (obj.get && obj.get(attrname)) {
                          return obj.get(attrname);
                        }
                        if (obj.mget && obj.mget(attrname)) {
                          return obj.mget(attrname);
                        }
                        if (obj[attrname] != null) {
                          return obj[attrname];
                        }
                        if (this[attrname]["default"] != null) {
                          return this[attrname]["default"];
                        }
                        return console.log("selection for attribute '" + attrname + "' failed on object: " + obj);
                      };
                
                      properties.prototype.v_select = function(attrname, objs) {
                        var i, obj, result, _i, _ref;
                        if (!(attrname in this)) {
                          console.log("requested vector selection of unknown property '" + attrname + "' on objects");
                          return;
                        }
                        if (this[attrname].typed != null) {
                          result = new Float64Array(objs.length);
                        } else {
                          result = new Array(objs.length);
                        }
                        for (i = _i = 0, _ref = objs.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {
                          obj = objs[i];
                          if ((this[attrname].field != null) && (this[attrname].field in obj)) {
                            result[i] = obj[this[attrname].field];
                          } else if (this[attrname].value != null) {
                            result[i] = this[attrname].value;
                          } else if (obj[attrname] != null) {
                            result[i] = obj[attrname];
                          } else if (this[attrname]["default"] != null) {
                            result[i] = this[attrname]["default"];
                          } else {
                            console.log("vector selection for attribute '" + attrname + "' failed on object: " + obj);
                            return;
                          }
                        }
                        return result;
                      };
                
                      return properties;
                
                    })();
                    line_properties = (function(_super) {
                      __extends(line_properties, _super);
                
                      function line_properties(styleprovider, glyphspec, prefix) {
                        if (prefix == null) {
                          prefix = "";
                        }
                        this.line_color_name = "" + prefix + "line_color";
                        this.line_width_name = "" + prefix + "line_width";
                        this.line_alpha_name = "" + prefix + "line_alpha";
                        this.line_join_name = "" + prefix + "line_join";
                        this.line_cap_name = "" + prefix + "line_cap";
                        this.line_dash_name = "" + prefix + "line_dash";
                        this.line_dash_offset_name = "" + prefix + "line_dash_offset";
                        this.color(styleprovider, glyphspec, this.line_color_name);
                        this.number(styleprovider, glyphspec, this.line_width_name);
                        this.number(styleprovider, glyphspec, this.line_alpha_name);
                        this["enum"](styleprovider, glyphspec, this.line_join_name, "miter round bevel");
                        this["enum"](styleprovider, glyphspec, this.line_cap_name, "butt round square");
                        this.array(styleprovider, glyphspec, this.line_dash_name);
                        this.number(styleprovider, glyphspec, this.line_dash_offset_name);
                        this.do_stroke = true;
                        if (!_.isUndefined(this[this.line_color_name].value)) {
                          if (_.isNull(this[this.line_color_name].value)) {
                            this.do_stroke = false;
                          }
                        } else if (_.isNull(this[this.line_color_name]["default"])) {
                          this.do_stroke = false;
                        }
                      }
                
                      line_properties.prototype.set = function(ctx, obj) {
                        ctx.strokeStyle = this.select(this.line_color_name, obj);
                        ctx.globalAlpha = this.select(this.line_alpha_name, obj);
                        ctx.lineWidth = this.select(this.line_width_name, obj);
                        ctx.lineJoin = this.select(this.line_join_name, obj);
                        ctx.lineCap = this.select(this.line_cap_name, obj);
                        ctx.setLineDash(this.select(this.line_dash_name, obj));
                        return ctx.setLineDashOffset(this.select(this.line_dash_offset_name, obj));
                      };
                
                      line_properties.prototype.set_prop_cache = function(datasource) {
                        this.cache = {};
                        this.cache.strokeStyle = this.source_v_select(this.line_color_name, datasource);
                        this.cache.globalAlpha = this.source_v_select(this.line_alpha_name, datasource);
                        this.cache.lineWidth = this.source_v_select(this.line_width_name, datasource);
                        this.cache.lineJoin = this.source_v_select(this.line_join_name, datasource);
                        this.cache.lineCap = this.source_v_select(this.line_cap_name, datasource);
                        this.cache.setLineDash = this.source_v_select(this.line_dash_name, datasource);
                        return this.cache.setLineDashOffset = this.source_v_select(this.line_dash_offset_name, datasource);
                      };
                
                      line_properties.prototype.clear_prop_cache = function() {
                        return this.cache = {};
                      };
                
                      line_properties.prototype.set_vectorize = function(ctx, i) {
                        var did_change;
                        did_change = false;
                        if ((this.cache.strokeStyle[i] != null) && ctx.strokeStyle !== this.cache.strokeStyle[i]) {
                          ctx.strokeStyle = this.cache.strokeStyle[i];
                          did_change = true;
                        }
                        if ((this.cache.globalAlpha[i] != null) && ctx.globalAlpha !== this.cache.globalAlpha[i]) {
                          ctx.globalAlpha = this.cache.globalAlpha[i];
                          did_change = true;
                        }
                        if ((this.cache.lineWidth[i] != null) && ctx.lineWidth !== this.cache.lineWidth[i]) {
                          ctx.lineWidth = this.cache.lineWidth[i];
                          did_change = true;
                        }
                        if ((this.cache.lineJoin[i] != null) && ctx.lineJoin !== this.cache.lineJoin[i]) {
                          ctx.lineJoin = this.cache.lineJoin[i];
                          did_change = true;
                        }
                        if ((this.cache.lineCap[i] != null) && ctx.lineCap !== this.cache.lineCap[i]) {
                          ctx.lineCap = this.cache.lineCap[i];
                          did_change = true;
                        }
                        if ((this.cache.setLineDash[i] != null) && ctx.getLineDash() !== this.cache.setLineDash[i]) {
                          ctx.setLineDash(this.cache.setLineDash[i]);
                          did_change = true;
                        }
                        if ((this.cache.setLineDashOffset[i] != null) && ctx.getLineDashOffset() !== this.cache.setLineDashOffset[i]) {
                          ctx.setLineDashOffset(this.cache.setLineDashOffset[i]);
                          did_change = true;
                        }
                        return did_change;
                      };
                
                      return line_properties;
                
                    })(properties);
                    fill_properties = (function(_super) {
                      __extends(fill_properties, _super);
                
                      function fill_properties(styleprovider, glyphspec, prefix) {
                        if (prefix == null) {
                          prefix = "";
                        }
                        this.fill_color_name = "" + prefix + "fill_color";
                        this.fill_alpha_name = "" + prefix + "fill_alpha";
                        this.color(styleprovider, glyphspec, this.fill_color_name);
                        this.number(styleprovider, glyphspec, this.fill_alpha_name);
                        this.do_fill = true;
                        if (!_.isUndefined(this[this.fill_color_name].value)) {
                          if (_.isNull(this[this.fill_color_name].value)) {
                            this.do_fill = false;
                          }
                        } else if (_.isNull(this[this.fill_color_name]["default"])) {
                          this.do_fill = false;
                        }
                      }
                
                      fill_properties.prototype.set = function(ctx, obj) {
                        ctx.fillStyle = this.select(this.fill_color_name, obj);
                        return ctx.globalAlpha = this.select(this.fill_alpha_name, obj);
                      };
                
                      fill_properties.prototype.set_prop_cache = function(datasource) {
                        this.cache = {};
                        this.cache.fillStyle = this.source_v_select(this.fill_color_name, datasource);
                        return this.cache.globalAlpha = this.source_v_select(this.fill_alpha_name, datasource);
                      };
                
                      fill_properties.prototype.set_vectorize = function(ctx, i) {
                        var did_change;
                        did_change = false;
                        if (ctx.fillStyle !== this.cache.fillStyle[i]) {
                          ctx.fillStyle = this.cache.fillStyle[i];
                          did_change = true;
                        }
                        if (ctx.globalAlpha !== this.cache.globalAlpha[i]) {
                          ctx.globalAlpha = this.cache.globalAlpha[i];
                          did_change = true;
                        }
                        return did_change;
                      };
                
                      return fill_properties;
                
                    })(properties);
                    text_properties = (function(_super) {
                      __extends(text_properties, _super);
                
                      function text_properties(styleprovider, glyphspec, prefix) {
                        if (prefix == null) {
                          prefix = "";
                        }
                        this.text_font_name = "" + prefix + "text_font";
                        this.text_font_size_name = "" + prefix + "text_font_size";
                        this.text_font_style_name = "" + prefix + "text_font_style";
                        this.text_color_name = "" + prefix + "text_color";
                        this.text_alpha_name = "" + prefix + "text_alpha";
                        this.text_align_name = "" + prefix + "text_align";
                        this.text_baseline_name = "" + prefix + "text_baseline";
                        this.string(styleprovider, glyphspec, this.text_font_name);
                        this.string(styleprovider, glyphspec, this.text_font_size_name);
                        this["enum"](styleprovider, glyphspec, this.text_font_style_name, "normal italic bold");
                        this.color(styleprovider, glyphspec, this.text_color_name);
                        this.number(styleprovider, glyphspec, this.text_alpha_name);
                        this["enum"](styleprovider, glyphspec, this.text_align_name, "left right center");
                        this["enum"](styleprovider, glyphspec, this.text_baseline_name, "top middle bottom alphabetic hanging");
                      }
                
                      text_properties.prototype.font = function(obj, font_size) {
                        var font, font_style;
                        if (font_size == null) {
                          font_size = this.select(this.text_font_size_name, obj);
                        }
                        font = this.select(this.text_font_name, obj);
                        font_style = this.select(this.text_font_style_name, obj);
                        font = font_style + " " + font_size + " " + font;
                        return font;
                      };
                
                      text_properties.prototype.set = function(ctx, obj) {
                        ctx.font = this.font(obj);
                        ctx.fillStyle = this.select(this.text_color_name, obj);
                        ctx.globalAlpha = this.select(this.text_alpha_name, obj);
                        ctx.textAlign = this.select(this.text_align_name, obj);
                        return ctx.textBaseline = this.select(this.text_baseline_name, obj);
                      };
                
                      text_properties.prototype.set_prop_cache = function(datasource) {
                        var font, font_size, font_style, i;
                        this.cache = {};
                        font_size = this.source_v_select(this.text_font_size_name, datasource);
                        font = this.source_v_select(this.text_font_name, datasource);
                        font_style = this.source_v_select(this.text_font_style_name, datasource);
                        this.cache.font = (function() {
                          var _i, _ref, _results;
                          _results = [];
                          for (i = _i = 0, _ref = font.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {
                            _results.push("" + font_style[i] + " " + font_size[i] + " " + font[i]);
                          }
                          return _results;
                        })();
                        this.cache.fillStyle = this.source_v_select(this.text_color_name, datasource);
                        this.cache.globalAlpha = this.source_v_select(this.text_alpha_name, datasource);
                        this.cache.textAlign = this.source_v_select(this.text_align_name, datasource);
                        return this.cache.textBaseline = this.source_v_select(this.text_baseline_name, datasource);
                      };
                
                      text_properties.prototype.clear_prop_cache = function() {
                        return this.cache = {};
                      };
                
                      text_properties.prototype.set_vectorize = function(ctx, i) {
                        var did_change;
                        did_change = false;
                        if (ctx.font !== this.cache.font[i]) {
                          ctx.font = this.cache.font[i];
                          did_change = true;
                        }
                        if (ctx.fillStyle !== this.cache.fillStyle[i]) {
                          ctx.fillStyle = this.cache.fillStyle[i];
                          did_change = true;
                        }
                        if (ctx.globalAlpha !== this.cache.globalAlpha[i]) {
                          ctx.globalAlpha = this.cache.globalAlpha[i];
                          did_change = true;
                        }
                        if (ctx.textAlign !== this.cache.textAlign[i]) {
                          ctx.textAlign = this.cache.textAlign[i];
                          did_change = true;
                        }
                        if (ctx.textBaseline !== this.cache.textBaseline[i]) {
                          ctx.textBaseline = this.cache.textBaseline[i];
                          did_change = true;
                        }
                        return did_change;
                      };
                
                      return text_properties;
                
                    })(properties);
                    glyph_properties = (function(_super) {
                      __extends(glyph_properties, _super);
                
                      function glyph_properties(styleprovider, glyphspec, attrnames, properties) {
                        var attrname, attrtype, key, _i, _len, _ref;
                        for (_i = 0, _len = attrnames.length; _i < _len; _i++) {
                          attrname = attrnames[_i];
                          attrtype = "number";
                          if (attrname.indexOf(":") > -1) {
                            _ref = attrname.split(":"), attrname = _ref[0], attrtype = _ref[1];
                          }
                          this.setattr(styleprovider, glyphspec, attrname, attrtype);
                        }
                        for (key in properties) {
                          this[key] = properties[key];
                        }
                        this.fast_path = false;
                        if ('fast_path' in glyphspec) {
                          this.fast_path = glyphspec.fast_path;
                        }
                      }
                
                      return glyph_properties;
                
                    })(properties);
                    return {
                      "glyph_properties": glyph_properties,
                      "fill_properties": fill_properties,
                      "line_properties": line_properties,
                      "text_properties": text_properties
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=properties.js.map
                */;
                (function() {
                  define('tool/active_tool_manager',[], function() {
                    var ActiveToolManager;
                    return ActiveToolManager = (function() {
                      " This makes sure that only one tool is active at a time ";
                      function ActiveToolManager(event_sink) {
                        this.event_sink = event_sink;
                        this.event_sink.active = null;
                      }
                
                      ActiveToolManager.prototype.bind_bokeh_events = function() {
                        var _this = this;
                        this.event_sink.on("clear_active_tool", function() {
                          _this.event_sink.trigger("" + _this.event_sink.active + ":deactivated");
                          return _this.event_sink.active = null;
                        });
                        this.event_sink.on("active_tool", function(toolName) {
                          if (toolName !== _this.event_sink.active) {
                            _this.event_sink.trigger("" + toolName + ":activated");
                            _this.event_sink.trigger("" + _this.event_sink.active + ":deactivated");
                            return _this.event_sink.active = toolName;
                          }
                        });
                        return this.event_sink.on("try_active_tool", function(toolName) {
                          if (_this.event_sink.active == null) {
                            _this.event_sink.trigger("" + toolName + ":activated");
                            _this.event_sink.trigger("" + _this.event_sink.active + ":deactivated");
                            return _this.event_sink.active = toolName;
                          }
                        });
                      };
                
                      return ActiveToolManager;
                
                    })();
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=active_tool_manager.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('common/plot',["underscore", "backbone", "kiwi", "./build_views", "./plot_utils", "./continuum_view", "./has_parent", "./canvas", "./layout_box", "./solver", "./cartesian_frame", "./plot_template", "renderer/properties", "tool/active_tool_manager"], function(_, Backbone, kiwi, build_views, plot_utils, ContinuumView, HasParent, Canvas, LayoutBox, Solver, CartesianFrame, plot_template, Properties, ActiveToolManager) {
                    var Constraint, EQ, Expr, GE, LE, Plot, PlotView, Plots, line_properties, text_properties, _ref, _ref1, _ref2;
                    line_properties = Properties.line_properties;
                    text_properties = Properties.text_properties;
                    Expr = kiwi.Expression;
                    Constraint = kiwi.Constraint;
                    EQ = kiwi.Operator.Eq;
                    LE = kiwi.Operator.Le;
                    GE = kiwi.Operator.Ge;
                    PlotView = (function(_super) {
                      __extends(PlotView, _super);
                
                      function PlotView() {
                        _ref = PlotView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      PlotView.prototype.className = "bokeh plotview plotarea";
                
                      PlotView.prototype.template = plot_template;
                
                      PlotView.prototype.view_options = function() {
                        return _.extend({
                          plot_model: this.model,
                          plot_view: this
                        }, this.options);
                      };
                
                      PlotView.prototype.pause = function() {
                        return this.is_paused = true;
                      };
                
                      PlotView.prototype.unpause = function() {
                        this.is_paused = false;
                        return this.request_render();
                      };
                
                      PlotView.prototype.request_render = function() {
                        if (!this.is_paused) {
                          this.throttled_render(true);
                        }
                      };
                
                      PlotView.prototype.initialize = function(options) {
                        var html, level, template_data, _i, _len, _ref1;
                        PlotView.__super__.initialize.call(this, options);
                        this.pause();
                        this.model.initialize_layout(this.model.solver);
                        this.frame = this.mget('frame');
                        this.x_range = this.frame.get('x_ranges')['default'];
                        this.y_range = this.frame.get('y_ranges')['default'];
                        this.xmapper = this.frame.get('x_mappers')['default'];
                        this.ymapper = this.frame.get('y_mappers')['default'];
                        template_data = {
                          button_bar: this.mget('button_bar')
                        };
                        html = this.template(template_data);
                        this.$el.html(html);
                        this.canvas = this.mget('canvas');
                        this.canvas_view = new this.canvas.default_view({
                          'model': this.canvas
                        });
                        this.$('.bokeh_canvas_wrapper_outer').prepend(this.canvas_view.el);
                        this.canvas_view.render();
                        this.throttled_render = plot_utils.throttle_animation(this.render, 15);
                        this.outline_props = new line_properties(this, {}, 'outline_');
                        this.title_props = new text_properties(this, {}, 'title_');
                        this.renderers = {};
                        this.tools = {};
                        this.eventSink = _.extend({}, Backbone.Events);
                        this.atm = new ActiveToolManager(this.eventSink);
                        this.levels = {};
                        _ref1 = plot_utils.LEVELS;
                        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
                          level = _ref1[_i];
                          this.levels[level] = {};
                        }
                        this.build_levels();
                        this.atm.bind_bokeh_events();
                        this.bind_bokeh_events();
                        this.model.add_constraints(this.canvas.solver);
                        this.listenTo(this.canvas.solver, 'layout_update', this.request_render);
                        this.unpause();
                        this.request_render();
                        return this;
                      };
                
                      PlotView.prototype.map_to_screen = function(x, x_units, y, y_units) {
                        return this.frame.map_to_screen(x, x_units, y, y_units, this.canvas);
                      };
                
                      PlotView.prototype.map_from_screen = function(sx, sy, units) {
                        return this.frame.map_from_screen(sx, sy, units, this.canvas);
                      };
                
                      PlotView.prototype.update_range = function(range_info) {
                        if (range_info == null) {
                          range_info = this.initial_range_info;
                        }
                        this.pause();
                        this.x_range.set(range_info.xr);
                        this.y_range.set(range_info.yr);
                        return this.unpause();
                      };
                
                      PlotView.prototype.build_levels = function() {
                        var id_, level, old_renderers, renderers_to_remove, t, tools, v, views, _i, _j, _k, _len, _len1, _len2;
                        old_renderers = _.keys(this.renderers);
                        views = build_views(this.renderers, this.mget('renderers'), this.view_options());
                        renderers_to_remove = _.difference(old_renderers, _.pluck(this.mget('renderers'), 'id'));
                        for (_i = 0, _len = renderers_to_remove.length; _i < _len; _i++) {
                          id_ = renderers_to_remove[_i];
                          delete this.levels.glyph[id_];
                        }
                        tools = build_views(this.tools, this.mget('tools'), this.view_options());
                        for (_j = 0, _len1 = views.length; _j < _len1; _j++) {
                          v = views[_j];
                          level = v.mget('level');
                          this.levels[level][v.model.id] = v;
                          v.bind_bokeh_events();
                        }
                        for (_k = 0, _len2 = tools.length; _k < _len2; _k++) {
                          t = tools[_k];
                          level = t.mget('level');
                          this.levels[level][t.model.id] = t;
                          t.bind_bokeh_events();
                        }
                        return this;
                      };
                
                      PlotView.prototype.bind_bokeh_events = function() {
                        var _this = this;
                        this.listenTo(this.mget('frame').get('x_range'), 'change', this.request_render);
                        this.listenTo(this.mget('frame').get('y_range'), 'change', this.request_render);
                        this.listenTo(this.model, 'change:renderers', this.build_levels);
                        this.listenTo(this.model, 'change:tool', this.build_levels);
                        this.listenTo(this.model, 'change', this.request_render);
                        return this.listenTo(this.model, 'destroy', function() {
                          return _this.remove();
                        });
                      };
                
                      PlotView.prototype.set_initial_range = function() {
                        var good_vals, range_vals;
                        range_vals = [this.x_range.get('start'), this.x_range.get('end'), this.y_range.get('start'), this.y_range.get('end')];
                        good_vals = _.map(range_vals, function(val) {
                          return (val != null) && !_.isNaN(val);
                        });
                        good_vals = _.all(good_vals);
                        if (good_vals) {
                          return this.initial_range_info = {
                            xr: {
                              start: this.x_range.get('start'),
                              end: this.x_range.get('end')
                            },
                            yr: {
                              start: this.y_range.get('start'),
                              end: this.y_range.get('end')
                            }
                          };
                        }
                      };
                
                      PlotView.prototype.render = function(force_canvas) {
                        var canvas, ctx, frame, frame_box, k, sx, sy, th, title, v, _ref1;
                        if (force_canvas == null) {
                          force_canvas = false;
                        }
                        PlotView.__super__.render.call(this);
                        this.canvas_view.render(force_canvas);
                        ctx = this.canvas_view.ctx;
                        frame = this.model.get('frame');
                        canvas = this.model.get('canvas');
                        _ref1 = this.renderers;
                        for (k in _ref1) {
                          v = _ref1[k];
                          if (v.model.update_layout != null) {
                            v.model.update_layout(v, this.canvas.solver);
                          }
                        }
                        title = this.mget('title');
                        if (title) {
                          this.title_props.set(this.canvas_view.ctx, {});
                          th = ctx.measureText(this.mget('title')).ascent + this.model.get('title_standoff');
                          if (th !== this.model.title_panel.get('height')) {
                            this.model.title_panel.set('height', th);
                          }
                        }
                        this.model.get('frame').set('width', canvas.get('width'));
                        this.model.get('frame').set('height', canvas.get('height'));
                        this.canvas.solver.update_variables(false);
                        this.model.get('frame')._update_mappers();
                        if (this.initial_range_info == null) {
                          this.set_initial_range();
                        }
                        frame_box = [this.canvas.vx_to_sx(this.frame.get('left')), this.canvas.vy_to_sy(this.frame.get('top')), this.frame.get('width'), this.frame.get('height')];
                        this._map_hook();
                        this._paint_empty(ctx, frame_box);
                        if (this.outline_props.do_stroke) {
                          this.outline_props.set(ctx, {});
                          ctx.strokeRect.apply(ctx, frame_box);
                        }
                        this._render_levels(ctx, ['image', 'underlay', 'glyph'], frame_box);
                        this._render_levels(ctx, ['overlay', 'annotation', 'tool']);
                        if (title) {
                          sx = this.canvas.vx_to_sx(this.canvas.get('width') / 2);
                          sy = this.canvas.vy_to_sy(this.model.title_panel.get('bottom') + this.model.get('title_standoff'));
                          this.title_props.set(ctx, {});
                          return ctx.fillText(title, sx, sy);
                        }
                      };
                
                      PlotView.prototype._render_levels = function(ctx, levels, clip_region) {
                        var k, level, renderers, v, _i, _len;
                        ctx.save();
                        if (clip_region != null) {
                          ctx.beginPath();
                          ctx.rect.apply(ctx, clip_region);
                          ctx.clip();
                          ctx.beginPath();
                        }
                        for (_i = 0, _len = levels.length; _i < _len; _i++) {
                          level = levels[_i];
                          renderers = this.levels[level];
                          for (k in renderers) {
                            v = renderers[k];
                            v.render();
                          }
                        }
                        return ctx.restore();
                      };
                
                      PlotView.prototype._map_hook = function() {};
                
                      PlotView.prototype._paint_empty = function(ctx, frame_box) {
                        ctx.fillStyle = this.mget('border_fill');
                        ctx.fillRect(0, 0, this.canvas_view.mget('canvas_width'), this.canvas_view.mget('canvas_height'));
                        ctx.fillStyle = this.mget('background_fill');
                        return ctx.fillRect.apply(ctx, frame_box);
                      };
                
                      return PlotView;
                
                    })(ContinuumView.View);
                    Plot = (function(_super) {
                      __extends(Plot, _super);
                
                      function Plot() {
                        _ref1 = Plot.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      Plot.prototype.type = 'Plot';
                
                      Plot.prototype.default_view = PlotView;
                
                      Plot.prototype.initialize = function(attrs, options) {
                        var canvas, r, _i, _len, _ref2, _ref3, _results;
                        Plot.__super__.initialize.call(this, attrs, options);
                        canvas = new Canvas.Model({
                          map: (_ref2 = this.use_map) != null ? _ref2 : false,
                          canvas_width: this.get('plot_width'),
                          canvas_height: this.get('plot_height'),
                          hidpi: this.get('hidpi'),
                          solver: new Solver()
                        });
                        this.set('canvas', canvas);
                        this.solver = canvas.get('solver');
                        _ref3 = this.get('renderers');
                        _results = [];
                        for (_i = 0, _len = _ref3.length; _i < _len; _i++) {
                          r = _ref3[_i];
                          _results.push(r.set('parent', this));
                        }
                        return _results;
                      };
                
                      Plot.prototype.initialize_layout = function(solver) {
                        var canvas, elts, frame;
                        canvas = this.get('canvas');
                        frame = new CartesianFrame.Model({
                          x_range: this.get('x_range'),
                          x_mapper_type: this.get('x_mapper_type'),
                          y_range: this.get('y_range'),
                          y_mapper_type: this.get('y_mapper_type'),
                          solver: solver
                        });
                        this.set('frame', frame);
                        this.title_panel = new LayoutBox.Model({
                          solver: solver
                        });
                        LayoutBox.Collection.add(this.title_panel);
                        this.title_panel._anchor = this.title_panel._bottom;
                        elts = this.get('above');
                        elts.push(this.title_panel);
                        return this.set('above', elts);
                      };
                
                      Plot.prototype.add_constraints = function(solver) {
                        var do_side, min_border_bottom, min_border_left, min_border_right, min_border_top, _ref2, _ref3, _ref4, _ref5,
                          _this = this;
                        min_border_top = (_ref2 = this.get('min_border_top')) != null ? _ref2 : this.get('min_border');
                        min_border_bottom = (_ref3 = this.get('min_border_bottom')) != null ? _ref3 : this.get('min_border');
                        min_border_left = (_ref4 = this.get('min_border_left')) != null ? _ref4 : this.get('min_border');
                        min_border_right = (_ref5 = this.get('min_border_right')) != null ? _ref5 : this.get('min_border');
                        do_side = function(solver, min_size, side, cnames, dim, op) {
                          var box, c0, c1, canvas, elts, frame, last, padding, r, _i, _len, _ref6;
                          canvas = _this.get('canvas');
                          frame = _this.get('frame');
                          box = new LayoutBox.Model({
                            solver: solver
                          });
                          c0 = '_' + cnames[0];
                          c1 = '_' + cnames[1];
                          solver.add_constraint(new Constraint(new Expr(box['_' + dim], -min_size), GE), kiwi.Strength.strong);
                          solver.add_constraint(new Constraint(new Expr(frame[c0], [-1, box[c1]]), EQ));
                          solver.add_constraint(new Constraint(new Expr(box[c0], [-1, canvas[c0]]), EQ));
                          last = frame;
                          elts = _this.get(side);
                          for (_i = 0, _len = elts.length; _i < _len; _i++) {
                            r = elts[_i];
                            if ((_ref6 = r.get('location')) != null ? _ref6 : 'auto' === 'auto') {
                              r.set('location', side, {
                                'silent': true
                              });
                            }
                            if (r.initialize_layout != null) {
                              r.initialize_layout(solver);
                            }
                            solver.add_constraint(new Constraint(new Expr(last[c0], [-1, r[c1]]), EQ), kiwi.Strength.strong);
                            last = r;
                          }
                          padding = new LayoutBox.Model({
                            solver: solver
                          });
                          solver.add_constraint(new Constraint(new Expr(last[c0], [-1, padding[c1]]), EQ), kiwi.Strength.strong);
                          return solver.add_constraint(new Constraint(new Expr(padding[c0], [-1, canvas[c0]]), EQ), kiwi.Strength.strong);
                        };
                        do_side(solver, min_border_top, 'above', ['top', 'bottom'], 'height', LE);
                        do_side(solver, min_border_bottom, 'below', ['bottom', 'top'], 'height', GE);
                        do_side(solver, min_border_left, 'left', ['left', 'right'], 'width', GE);
                        return do_side(solver, min_border_right, 'right', ['right', 'left'], 'width', LE);
                      };
                
                      Plot.prototype.add_renderers = function(new_renderers) {
                        var renderers;
                        renderers = this.get('renderers');
                        renderers = renderers.concat(new_renderers);
                        return this.set('renderers', renderers);
                      };
                
                      Plot.prototype.parent_properties = ['background_fill', 'border_fill', 'min_border', 'min_border_top', 'min_border_bottom', 'min_border_left', 'min_border_right'];
                
                      Plot.prototype.defaults = function() {
                        return {
                          button_bar: true,
                          data_sources: {},
                          renderers: [],
                          tools: [],
                          h_symmetry: true,
                          v_symmetry: false,
                          x_mapper_type: 'auto',
                          y_mapper_type: 'auto',
                          plot_width: 600,
                          plot_height: 600,
                          title: 'Plot',
                          above: [],
                          below: [],
                          left: [],
                          right: []
                        };
                      };
                
                      Plot.prototype.display_defaults = function() {
                        return {
                          hidpi: true,
                          background_fill: "#fff",
                          border_fill: "#fff",
                          min_border: 40,
                          title_standoff: 8,
                          title_text_font: "helvetica",
                          title_text_font_size: "20pt",
                          title_text_font_style: "normal",
                          title_text_color: "#444444",
                          title_text_alpha: 1.0,
                          title_text_align: "center",
                          title_text_baseline: "alphabetic",
                          outline_line_color: '#aaaaaa',
                          outline_line_width: 1,
                          outline_line_alpha: 1.0,
                          outline_line_join: 'miter',
                          outline_line_cap: 'butt',
                          outline_line_dash: [],
                          outline_line_dash_offset: 0
                        };
                      };
                
                      return Plot;
                
                    })(HasParent);
                    Plots = (function(_super) {
                      __extends(Plots, _super);
                
                      function Plots() {
                        _ref2 = Plots.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      Plots.prototype.model = Plot;
                
                      return Plots;
                
                    })(Backbone.Collection);
                    return {
                      "Model": Plot,
                      "Collection": new Plots(),
                      "View": PlotView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=plot.js.map
                */;
                (function() {
                  var __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
                    __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('common/gmap_plot',["underscore", "backbone", "./solver", "./plot"], function(_, Backbone, Solver, Plot) {
                    var GMapPlot, GMapPlotView, GMapPlots, _ref, _ref1, _ref2;
                    GMapPlotView = (function(_super) {
                      __extends(GMapPlotView, _super);
                
                      function GMapPlotView() {
                        this.bounds_change = __bind(this.bounds_change, this);
                        _ref = GMapPlotView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      GMapPlotView.prototype.initialize = function(options) {
                        GMapPlotView.__super__.initialize.call(this, _.defaults(options, this.default_options));
                        return this.zoom_count = null;
                      };
                
                      GMapPlotView.prototype.update_range = function(range_info) {
                        var center, ne_lat, ne_lng, sw_lat, sw_lng;
                        if (range_info == null) {
                          range_info = this.initial_range_info;
                        }
                        this.pause();
                        if (range_info.sdx != null) {
                          this.map.panBy(range_info.sdx, range_info.sdy);
                        } else {
                          sw_lng = Math.min(range_info.xr.start, range_info.xr.end);
                          ne_lng = Math.max(range_info.xr.start, range_info.xr.end);
                          sw_lat = Math.min(range_info.yr.start, range_info.yr.end);
                          ne_lat = Math.max(range_info.yr.start, range_info.yr.end);
                          center = new google.maps.LatLng((ne_lat + sw_lat) / 2, (ne_lng + sw_lng) / 2);
                          if (range_info.factor == null) {
                            this.map.setCenter(center);
                            this.map.setZoom(this.initial_zoom);
                          } else if (range_info.factor > 0) {
                            this.zoom_count += 1;
                            if (this.zoom_count === 10) {
                              this.map.setZoom(this.map.getZoom() + 1);
                              this.zoom_count = 0;
                            }
                          } else {
                            this.zoom_count -= 1;
                            if (this.zoom_count === -10) {
                              this.map.setCenter(center);
                              this.map.setZoom(this.map.getZoom() - 1);
                              this.map.setCenter(center);
                              this.zoom_count = 0;
                            }
                          }
                        }
                        return this.unpause();
                      };
                
                      GMapPlotView.prototype.bind_bokeh_events = function() {
                        var build_map, ih, iw, left, script, top,
                          _this = this;
                        GMapPlotView.__super__.bind_bokeh_events.call(this);
                        iw = this.frame.get('width');
                        ih = this.frame.get('height');
                        top = this.frame.get('bottom');
                        left = this.frame.get('left');
                        this.canvas_view.map_div.attr("style", "top: " + top + "px; left: " + left + "px; position: absolute");
                        this.canvas_view.map_div.attr('style', "width:" + iw + "px;");
                        this.canvas_view.map_div.attr('style', "height:" + ih + "px;");
                        this.canvas_view.map_div.width("" + iw + "px").height("" + ih + "px");
                        this.initial_zoom = this.mget('map_options').zoom;
                        build_map = function() {
                          var map_options, mo;
                          mo = _this.mget('map_options');
                          map_options = {
                            center: new google.maps.LatLng(mo.lat, mo.lng),
                            zoom: mo.zoom,
                            disableDefaultUI: true,
                            mapTypeId: google.maps.MapTypeId.SATELLITE
                          };
                          _this.map = new google.maps.Map(_this.canvas_view.map_div[0], map_options);
                          return google.maps.event.addListener(_this.map, 'bounds_changed', _this.bounds_change);
                        };
                        if ((window.google != null) && (window.google.maps != null)) {
                          return _.defer(build_map);
                        } else {
                          window['_bokeh_first_gmap_load'] = build_map;
                          script = document.createElement('script');
                          script.type = 'text/javascript';
                          script.src = 'https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&callback=_bokeh_first_gmap_load';
                          return document.body.appendChild(script);
                        }
                      };
                
                      GMapPlotView.prototype.bounds_change = function() {
                        var bds, ne, sw;
                        bds = this.map.getBounds();
                        ne = bds.getNorthEast();
                        sw = bds.getSouthWest();
                        this.x_range.set({
                          start: sw.lng(),
                          end: ne.lng(),
                          silent: true
                        });
                        this.y_range.set({
                          start: sw.lat(),
                          end: ne.lat()
                        });
                        if (this.initial_range_info == null) {
                          return this.initial_range_info = {
                            xr: {
                              start: this.x_range.get('start'),
                              end: this.x_range.get('end')
                            },
                            yr: {
                              start: this.y_range.get('start'),
                              end: this.y_range.get('end')
                            }
                          };
                        }
                      };
                
                      GMapPlotView.prototype._map_hook = function() {
                        var ih, iw, left, top;
                        iw = this.frame.get('width');
                        ih = this.frame.get('height');
                        top = this.frame.get('bottom');
                        left = this.frame.get('left');
                        this.canvas_view.map_div.attr("style", "top: " + top + "px; left: " + left + "px;");
                        return this.canvas_view.map_div.width("" + iw + "px").height("" + ih + "px");
                      };
                
                      GMapPlotView.prototype._paint_empty = function(ctx, frame_box) {
                        var ih, iw, left, oh, ow, top;
                        ow = this.canvas.get('width');
                        oh = this.canvas.get('height');
                        left = frame_box[0], top = frame_box[1], iw = frame_box[2], ih = frame_box[3];
                        ctx.clearRect(0, 0, ow, oh);
                        ctx.beginPath();
                        ctx.moveTo(0, 0);
                        ctx.lineTo(0, oh);
                        ctx.lineTo(ow, oh);
                        ctx.lineTo(ow, 0);
                        ctx.lineTo(0, 0);
                        ctx.moveTo(left, top);
                        ctx.lineTo(left + iw, top);
                        ctx.lineTo(left + iw, top + ih);
                        ctx.lineTo(left, top + ih);
                        ctx.lineTo(left, top);
                        ctx.closePath();
                        ctx.fillStyle = this.mget('border_fill');
                        return ctx.fill();
                      };
                
                      return GMapPlotView;
                
                    })(Plot.View);
                    GMapPlot = (function(_super) {
                      __extends(GMapPlot, _super);
                
                      function GMapPlot() {
                        _ref1 = GMapPlot.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      GMapPlot.prototype.type = 'GMapPlot';
                
                      GMapPlot.prototype.default_view = GMapPlotView;
                
                      GMapPlot.prototype.initialize = function(attrs, options) {
                        this.use_map = true;
                        return GMapPlot.__super__.initialize.call(this, attrs, options);
                      };
                
                      GMapPlot.prototype.parent_properties = ['border_fill', 'min_border', 'min_border_top', 'min_border_bottom', 'min_border_left', 'min_border_right'];
                
                      GMapPlot.prototype.defaults = function() {
                        return _.extend(GMapPlot.__super__.defaults.call(this), {
                          title: 'GMapPlot'
                        });
                      };
                
                      GMapPlot.prototype.display_defaults = function() {
                        return _.extend(GMapPlot.__super__.display_defaults.call(this), {
                          border_fill: "#eee"
                        });
                      };
                
                      return GMapPlot;
                
                    })(Plot.Model);
                    GMapPlots = (function(_super) {
                      __extends(GMapPlots, _super);
                
                      function GMapPlots() {
                        _ref2 = GMapPlots.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      GMapPlots.prototype.model = GMapPlot;
                
                      return GMapPlots;
                
                    })(Backbone.Collection);
                    return {
                      "Model": GMapPlot,
                      "Collection": new GMapPlots(),
                      "View": GMapPlotView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=gmap_plot.js.map
                */;
                (function() {
                  var __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
                    __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('common/grid_view_state',["underscore", "./has_properties"], function(_, HasProperties) {
                    var GridViewState, _ref;
                    GridViewState = (function(_super) {
                      __extends(GridViewState, _super);
                
                      function GridViewState() {
                        this.layout_widths = __bind(this.layout_widths, this);
                        this.layout_heights = __bind(this.layout_heights, this);
                        this.setup_layout_properties = __bind(this.setup_layout_properties, this);
                        _ref = GridViewState.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      GridViewState.prototype.setup_layout_properties = function() {
                        var row, viewstate, _i, _len, _ref1, _results;
                        this.register_property('layout_heights', this.layout_heights, false);
                        this.register_property('layout_widths', this.layout_widths, false);
                        _ref1 = this.get('childviewstates');
                        _results = [];
                        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
                          row = _ref1[_i];
                          _results.push((function() {
                            var _j, _len1, _results1;
                            _results1 = [];
                            for (_j = 0, _len1 = row.length; _j < _len1; _j++) {
                              viewstate = row[_j];
                              this.add_dependencies('layout_heights', viewstate, 'height');
                              _results1.push(this.add_dependencies('layout_widths', viewstate, 'width'));
                            }
                            return _results1;
                          }).call(this));
                        }
                        return _results;
                      };
                
                      GridViewState.prototype.initialize = function(attrs, options) {
                        GridViewState.__super__.initialize.call(this, attrs, options);
                        this.setup_layout_properties();
                        this.listenTo(this, 'change:childviewstates', this.setup_layout_properties);
                        this.register_property('height', function() {
                          return _.reduce(this.get('layout_heights'), (function(x, y) {
                            return x + y;
                          }), 0);
                        }, false);
                        this.add_dependencies('height', this, 'layout_heights');
                        this.register_property('width', function() {
                          return _.reduce(this.get('layout_widths'), (function(x, y) {
                            return x + y;
                          }), 0);
                        }, false);
                        return this.add_dependencies('width', this, 'layout_widths');
                      };
                
                      GridViewState.prototype.position_child_x = function(offset, childsize) {
                        return offset;
                      };
                
                      GridViewState.prototype.position_child_y = function(offset, childsize) {
                        return this.get('height') - offset - childsize;
                      };
                
                      GridViewState.prototype.maxdim = function(dim, row) {
                        if (row.length === 0) {
                          return 0;
                        } else {
                          return _.max(_.map(row, function(x) {
                            if (x != null) {
                              return x.get(dim);
                            }
                            return 0;
                          }));
                        }
                      };
                
                      GridViewState.prototype.layout_heights = function() {
                        var row, row_heights;
                        row_heights = (function() {
                          var _i, _len, _ref1, _results;
                          _ref1 = this.get('childviewstates');
                          _results = [];
                          for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
                            row = _ref1[_i];
                            _results.push(this.maxdim('height', row));
                          }
                          return _results;
                        }).call(this);
                        return row_heights;
                      };
                
                      GridViewState.prototype.layout_widths = function() {
                        var col, col_widths, columns, n, num_cols, row;
                        num_cols = this.get('childviewstates')[0].length;
                        columns = (function() {
                          var _i, _len, _ref1, _results;
                          _ref1 = _.range(num_cols);
                          _results = [];
                          for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
                            n = _ref1[_i];
                            _results.push((function() {
                              var _j, _len1, _ref2, _results1;
                              _ref2 = this.get('childviewstates');
                              _results1 = [];
                              for (_j = 0, _len1 = _ref2.length; _j < _len1; _j++) {
                                row = _ref2[_j];
                                _results1.push(row[n]);
                              }
                              return _results1;
                            }).call(this));
                          }
                          return _results;
                        }).call(this);
                        col_widths = (function() {
                          var _i, _len, _results;
                          _results = [];
                          for (_i = 0, _len = columns.length; _i < _len; _i++) {
                            col = columns[_i];
                            _results.push(this.maxdim('width', col));
                          }
                          return _results;
                        }).call(this);
                        return col_widths;
                      };
                
                      GridViewState.prototype.defaults = function() {
                        return {
                          childviewstates: [[]],
                          border_space: 0
                        };
                      };
                
                      return GridViewState;
                
                    })(HasProperties);
                    return GridViewState;
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=grid_view_state.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('common/grid_plot',["underscore", "backbone", "./build_views", "./continuum_view", "./has_parent", "./grid_view_state", "renderer/properties", "tool/active_tool_manager"], function(_, Backbone, build_views, ContinuumView, HasParent, GridViewState, Properties, ActiveToolManager) {
                    var GridPlot, GridPlotView, GridPlots, _ref, _ref1, _ref2;
                    GridPlotView = (function(_super) {
                      __extends(GridPlotView, _super);
                
                      function GridPlotView() {
                        _ref = GridPlotView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      GridPlotView.prototype.tagName = 'div';
                
                      GridPlotView.prototype.className = "bokeh grid_plot";
                
                      GridPlotView.prototype.default_options = {
                        scale: 1.0
                      };
                
                      GridPlotView.prototype.set_child_view_states = function() {
                        var row, viewstaterow, viewstates, x, _i, _len, _ref1;
                        viewstates = [];
                        _ref1 = this.mget('children');
                        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
                          row = _ref1[_i];
                          viewstaterow = (function() {
                            var _j, _len1, _results;
                            _results = [];
                            for (_j = 0, _len1 = row.length; _j < _len1; _j++) {
                              x = row[_j];
                              _results.push(this.childviews[x.id].canvas);
                            }
                            return _results;
                          }).call(this);
                          viewstates.push(viewstaterow);
                        }
                        return this.viewstate.set('childviewstates', viewstates);
                      };
                
                      GridPlotView.prototype.initialize = function(options) {
                        GridPlotView.__super__.initialize.call(this, _.defaults(options, this.default_options));
                        this.viewstate = new GridViewState();
                        this.toolbar_height = 0;
                        this.childviews = {};
                        this.build_children();
                        this.bind_bokeh_events();
                        this.render();
                        return this;
                      };
                
                      GridPlotView.prototype.bind_bokeh_events = function() {
                        var _this = this;
                        this.listenTo(this.model, 'change:children', this.build_children);
                        this.listenTo(this.model, 'change', this.render);
                        this.listenTo(this.viewstate, 'change', this.render);
                        return this.listenTo(this.model, 'destroy', function() {
                          return _this.remove();
                        });
                      };
                
                      GridPlotView.prototype.build_children = function() {
                        var childmodels, plot, row, _i, _j, _k, _len, _len1, _len2, _ref1, _ref2, _results;
                        childmodels = [];
                        _ref1 = this.mget('children');
                        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
                          row = _ref1[_i];
                          for (_j = 0, _len1 = row.length; _j < _len1; _j++) {
                            plot = row[_j];
                            childmodels.push(plot);
                          }
                        }
                        build_views(this.childviews, childmodels, {});
                        this.set_child_view_states();
                        _ref2 = this.mget('children');
                        _results = [];
                        for (_k = 0, _len2 = _ref2.length; _k < _len2; _k++) {
                          row = _ref2[_k];
                          _results.push((function() {
                            var _l, _len3, _results1;
                            _results1 = [];
                            for (_l = 0, _len3 = row.length; _l < _len3; _l++) {
                              plot = row[_l];
                              _results1.push(this.listenTo(plot.solver, 'layout_update', this.render));
                            }
                            return _results1;
                          }).call(this));
                        }
                        return _results;
                      };
                
                      GridPlotView.prototype.makeButton = function(eventSink, constructor, toolbar_div, button_name) {
                        var all_tools, button, button_activated, specific_tools, tool_active;
                        all_tools = _.flatten(_.map(_.pluck(this.childviews, 'tools'), _.values));
                        specific_tools = _.where(all_tools, {
                          constructor: constructor
                        });
                        button = $("<button class='bk-toolbar-button'>" + button_name + "</button>");
                        toolbar_div.append(button);
                        tool_active = false;
                        button_activated = false;
                        button.click(function() {
                          if (button_activated) {
                            return eventSink.trigger('clear_active_tool');
                          } else {
                            return eventSink.trigger('active_tool', button_name);
                          }
                        });
                        eventSink.on("" + button_name + ":deactivated", function() {
                          button.removeClass('active');
                          button_activated = false;
                          return _.each(specific_tools, function(t) {
                            var t_name;
                            t_name = t.evgen.toolName;
                            return t.evgen.eventSink.trigger("" + t_name + ":deactivated");
                          });
                        });
                        return eventSink.on("" + button_name + ":activated", function() {
                          button.addClass('active');
                          button_activated = true;
                          return _.each(specific_tools, function(t) {
                            var t_name;
                            t_name = t.evgen.toolName;
                            return t.evgen.eventSink.trigger("" + t_name + ":activated");
                          });
                        });
                      };
                
                      GridPlotView.prototype.addGridToolbar = function() {
                        var all_tool_classes, all_tools, tool_name_dict,
                          _this = this;
                        this.button_bar = $("<div class='grid_button_bar'/>");
                        this.button_bar.attr('style', "position:absolute; left:10px; top:0px; ");
                        this.toolEventSink = _.extend({}, Backbone.Events);
                        this.atm = new ActiveToolManager(this.toolEventSink);
                        this.atm.bind_bokeh_events();
                        this.$el.append(this.button_bar);
                        all_tools = _.flatten(_.map(_.pluck(this.childviews, 'tools'), _.values));
                        all_tool_classes = _.uniq(_.pluck(all_tools, 'constructor'));
                        if (all_tool_classes.length > 0) {
                          this.toolbar_height = 35;
                        }
                        tool_name_dict = {};
                        _.each(all_tool_classes, function(klass) {
                          var btext;
                          btext = _.where(all_tools, {
                            constructor: klass
                          })[0].evgen_options.buttonText;
                          return tool_name_dict[btext] = klass;
                        });
                        _.map(tool_name_dict, function(klass, button_text) {
                          return _this.makeButton(_this.toolEventSink, klass, _this.button_bar, button_text);
                        });
                        return _.map(all_tools, function(t) {
                          return t.evgen.hide_button();
                        });
                      };
                
                      GridPlotView.prototype.render = function() {
                        var add, cidx, col_widths, height, last_plot, plot_divs, plot_wrapper, plotspec, ridx, row, row_heights, total_height, view, width, x_coords, xpos, y_coords, ypos, _i, _j, _k, _len, _len1, _len2, _ref1, _ref2;
                        GridPlotView.__super__.render.call(this);
                        _ref1 = _.values(this.childviews);
                        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
                          view = _ref1[_i];
                          view.$el.detach();
                        }
                        this.$el.html('');
                        this.addGridToolbar();
                        row_heights = this.viewstate.get('layout_heights');
                        col_widths = this.viewstate.get('layout_widths');
                        y_coords = [0];
                        _.reduceRight(row_heights.slice(1), function(x, y) {
                          var val;
                          val = x + y;
                          y_coords.push(val);
                          return val;
                        }, 0);
                        y_coords.reverse();
                        x_coords = [0];
                        _.reduce(col_widths.slice(0), function(x, y) {
                          var val;
                          val = x + y;
                          x_coords.push(val);
                          return val;
                        }, 0);
                        plot_divs = [];
                        last_plot = null;
                        _ref2 = this.mget('children');
                        for (ridx = _j = 0, _len1 = _ref2.length; _j < _len1; ridx = ++_j) {
                          row = _ref2[ridx];
                          for (cidx = _k = 0, _len2 = row.length; _k < _len2; cidx = ++_k) {
                            plotspec = row[cidx];
                            view = this.childviews[plotspec.id];
                            ypos = this.viewstate.position_child_y(y_coords[ridx], view.canvas.get('height') - this.toolbar_height);
                            xpos = this.viewstate.position_child_x(x_coords[cidx], view.canvas.get('width'));
                            plot_wrapper = $("<div class='gp_plotwrapper'></div>");
                            plot_wrapper.attr('style', "position: absolute; left:" + xpos + "px; top:" + ypos + "px");
                            plot_wrapper.append(view.$el);
                            this.$el.append(plot_wrapper);
                          }
                        }
                        add = function(a, b) {
                          return a + b;
                        };
                        total_height = _.reduce(row_heights, add, 0);
                        height = total_height + this.toolbar_height;
                        width = _.reduce(col_widths, add, 0);
                        this.$el.attr('style', "position:relative; height:" + height + "px;width:" + width + "px");
                        return this.render_end();
                      };
                
                      return GridPlotView;
                
                    })(ContinuumView.View);
                    GridPlot = (function(_super) {
                      __extends(GridPlot, _super);
                
                      function GridPlot() {
                        _ref1 = GridPlot.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      GridPlot.prototype.type = 'GridPlot';
                
                      GridPlot.prototype.default_view = GridPlotView;
                
                      GridPlot.prototype.defaults = function() {
                        return {
                          children: [[]],
                          border_space: 0
                        };
                      };
                
                      return GridPlot;
                
                    })(HasParent);
                    GridPlots = (function(_super) {
                      __extends(GridPlots, _super);
                
                      function GridPlots() {
                        _ref2 = GridPlots.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      GridPlots.prototype.model = GridPlot;
                
                      return GridPlots;
                
                    })(Backbone.Collection);
                    return {
                      "Model": GridPlot,
                      "Collection": new GridPlots(),
                      "View": GridPlotView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=grid_plot.js.map
                */;
                (function() {
                  var __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
                    __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('common/plot_context',["underscore", "backbone", "./build_views", "./has_parent", "./continuum_view"], function(_, Backbone, build_views, HasParent, ContinuumView) {
                    var PlotContext, PlotContextView, PlotContexts, _ref, _ref1, _ref2;
                    PlotContextView = (function(_super) {
                      __extends(PlotContextView, _super);
                
                      function PlotContextView() {
                        this.removeplot = __bind(this.removeplot, this);
                        this.closeall = __bind(this.closeall, this);
                        _ref = PlotContextView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      PlotContextView.prototype.initialize = function(options) {
                        this.views = {};
                        this.child_models = [];
                        PlotContextView.__super__.initialize.call(this, options);
                        return this.render();
                      };
                
                      PlotContextView.prototype.delegateEvents = function() {
                        this.listenTo(this.model, 'destroy', this.remove);
                        this.listenTo(this.model, 'change', this.render);
                        return PlotContextView.__super__.delegateEvents.call(this);
                      };
                
                      PlotContextView.prototype.build_children = function() {
                        var created_views;
                        created_views = build_views(this.views, this.mget('children'), {});
                        window.pc_created_views = created_views;
                        window.pc_views = this.views;
                        return null;
                      };
                
                      PlotContextView.prototype.size_textarea = function(textarea) {
                        var scrollHeight;
                        scrollHeight = $(textarea).height(0).prop('scrollHeight');
                        return $(textarea).height(scrollHeight);
                      };
                
                      PlotContextView.prototype.closeall = function(e) {
                        this.mset('children', []);
                        return this.model.save();
                      };
                
                      PlotContextView.prototype.removeplot = function(e) {
                        var newchildren, plotnum, s_pc, view, x;
                        plotnum = parseInt($(e.currentTarget).parent().attr('data-plot_num'));
                        s_pc = this.mget('children')[plotnum];
                        view = this.views[s_pc.get('id')];
                        view.remove();
                        newchildren = (function() {
                          var _i, _len, _ref1, _results;
                          _ref1 = this.mget('children');
                          _results = [];
                          for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
                            x = _ref1[_i];
                            if (x.id !== view.model.id) {
                              _results.push(x);
                            }
                          }
                          return _results;
                        }).call(this);
                        this.mset('children', newchildren);
                        this.model.save();
                        return false;
                      };
                
                      PlotContextView.prototype.render = function() {
                        var index, key, modelref, node, numplots, tab_names, to_render, val, view, _i, _len, _ref1, _ref2,
                          _this = this;
                        PlotContextView.__super__.render.call(this);
                        this.build_children();
                        _ref1 = this.views;
                        for (key in _ref1) {
                          if (!__hasProp.call(_ref1, key)) continue;
                          val = _ref1[key];
                          val.$el.detach();
                        }
                        this.$el.html('');
                        numplots = _.keys(this.views).length;
                        to_render = [];
                        tab_names = {};
                        _ref2 = this.mget('children');
                        for (index = _i = 0, _len = _ref2.length; _i < _len; index = ++_i) {
                          modelref = _ref2[index];
                          view = this.views[modelref.id];
                          node = $("<div class='jsp' data-plot_num='" + index + "'></div>");
                          this.$el.append(node);
                          node.append(view.el);
                        }
                        _.defer(function() {
                          var textarea, _j, _len1, _ref3, _results;
                          _ref3 = _this.$el.find('.plottitle');
                          _results = [];
                          for (_j = 0, _len1 = _ref3.length; _j < _len1; _j++) {
                            textarea = _ref3[_j];
                            _results.push(_this.size_textarea($(textarea)));
                          }
                          return _results;
                        });
                        return null;
                      };
                
                      return PlotContextView;
                
                    })(ContinuumView.View);
                    PlotContext = (function(_super) {
                      __extends(PlotContext, _super);
                
                      function PlotContext() {
                        _ref1 = PlotContext.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      PlotContext.prototype.type = 'PlotContext';
                
                      PlotContext.prototype.default_view = PlotContextView;
                
                      PlotContext.prototype.url = function() {
                        return PlotContext.__super__.url.call(this);
                      };
                
                      PlotContext.prototype.defaults = function() {
                        return {
                          children: []
                        };
                      };
                
                      return PlotContext;
                
                    })(HasParent);
                    PlotContexts = (function(_super) {
                      __extends(PlotContexts, _super);
                
                      function PlotContexts() {
                        _ref2 = PlotContexts.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      PlotContexts.prototype.model = PlotContext;
                
                      return PlotContexts;
                
                    })(Backbone.Collection);
                    return {
                      "Model": PlotContext,
                      "Collection": new PlotContexts(),
                      "View": PlotContextView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=plot_context.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('mapper/linear_color_mapper',["underscore", "backbone", "common/has_properties"], function(_, Backbone, HasProperties) {
                    var LinearColorMapper, LinearColorMappers, _ref, _ref1;
                    LinearColorMapper = (function(_super) {
                      __extends(LinearColorMapper, _super);
                
                      function LinearColorMapper() {
                        _ref = LinearColorMapper.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      LinearColorMapper.prototype.initialize = function(attrs, options) {
                        LinearColorMapper.__super__.initialize.call(this, attrs, options);
                        this.palette = this._build_palette(this.get('palette'));
                        this.little_endian = this._is_little_endian();
                        if (this.get('reserve_color') != null) {
                          this.reserve_color = this.get('reserve_color')[0];
                          return this.reserve_val = this.get('reserve_val')[0];
                        }
                      };
                
                      LinearColorMapper.prototype.v_map_screen = function(data) {
                        var N, buf, color, d, high, i, low, offset, scale, value, _i, _j, _ref1, _ref2, _ref3, _ref4;
                        buf = new ArrayBuffer(data.length * 4);
                        color = new Uint32Array(buf);
                        low = (_ref1 = this.get('low')) != null ? _ref1 : _.min(data);
                        high = (_ref2 = this.get('high')) != null ? _ref2 : _.max(data);
                        N = this.palette.length - 1;
                        scale = N / (high - low);
                        offset = -scale * low;
                        if (this.little_endian) {
                          for (i = _i = 0, _ref3 = data.length; 0 <= _ref3 ? _i < _ref3 : _i > _ref3; i = 0 <= _ref3 ? ++_i : --_i) {
                            d = data[i];
                            if (d === this.reserve_val) {
                              value = this.reserve_color;
                            } else {
                              if (d > high) {
                                d = high;
                              }
                              if (d < low) {
                                d = low;
                              }
                              value = this.palette[Math.floor(d * scale + offset)];
                            }
                            color[i] = (0xff << 24) | ((value & 0xff0000) >> 16) | (value & 0xff00) | ((value & 0xff) << 16);
                          }
                        } else {
                          for (i = _j = 0, _ref4 = data.length; 0 <= _ref4 ? _j < _ref4 : _j > _ref4; i = 0 <= _ref4 ? ++_j : --_j) {
                            d = data[i];
                            if (d === this.reserve_val) {
                              value = this.reserve_color;
                            } else {
                              if (d > high) {
                                d = high;
                              }
                              if (d < low) {
                                d = low;
                              }
                              value = this.palette[Math.floor(d * scale + offset)];
                            }
                            color[i] = (value << 8) | 0xff;
                          }
                        }
                        return buf;
                      };
                
                      LinearColorMapper.prototype._is_little_endian = function() {
                        var buf, buf32, buf8, little_endian;
                        buf = new ArrayBuffer(4);
                        buf8 = new Uint8ClampedArray(buf);
                        buf32 = new Uint32Array(buf);
                        buf32[1] = 0x0a0b0c0d;
                        little_endian = true;
                        if (buf8[4] === 0x0a && buf8[5] === 0x0b && buf8[6] === 0x0c && buf8[7] === 0x0d) {
                          little_endian = false;
                        }
                        return little_endian;
                      };
                
                      LinearColorMapper.prototype._build_palette = function(palette) {
                        var i, new_palette, _i, _ref1;
                        new_palette = new Uint32Array(palette.length + 1);
                        for (i = _i = 0, _ref1 = palette.length; 0 <= _ref1 ? _i < _ref1 : _i > _ref1; i = 0 <= _ref1 ? ++_i : --_i) {
                          new_palette[i] = palette[i];
                        }
                        new_palette[new_palette.length - 1] = palette[palette.length - 1];
                        return new_palette;
                      };
                
                      return LinearColorMapper;
                
                    })(HasProperties);
                    LinearColorMappers = (function(_super) {
                      __extends(LinearColorMappers, _super);
                
                      function LinearColorMappers() {
                        _ref1 = LinearColorMappers.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      LinearColorMappers.prototype.model = LinearColorMapper;
                
                      return LinearColorMappers;
                
                    })(Backbone.Collection);
                    return {
                      "Model": LinearColorMapper,
                      "Collection": new LinearColorMappers()
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=linear_color_mapper.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('range/factor_range',["backbone", "common/has_properties"], function(Backbone, HasProperties) {
                    var FactorRange, FactorRanges, _ref, _ref1;
                    FactorRange = (function(_super) {
                      __extends(FactorRange, _super);
                
                      function FactorRange() {
                        _ref = FactorRange.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      FactorRange.prototype.type = 'FactorRange';
                
                      FactorRange.prototype.initialize = function(attrs, options) {
                        FactorRange.__super__.initialize.call(this, attrs, options);
                        this.register_property('end', function() {
                          return this.get('factors').length + 0.5;
                        }, true);
                        this.add_dependencies('end', this, ['factors']);
                        this.register_property('min', function() {
                          return this.get('start');
                        }, true);
                        this.add_dependencies('min', this, ['factors']);
                        this.register_property('max', function() {
                          return this.get('end');
                        }, true);
                        return this.add_dependencies('max', this, ['factors']);
                      };
                
                      FactorRange.prototype.defaults = function() {
                        return {
                          start: 0.5,
                          factors: []
                        };
                      };
                
                      return FactorRange;
                
                    })(HasProperties);
                    FactorRanges = (function(_super) {
                      __extends(FactorRanges, _super);
                
                      function FactorRanges() {
                        _ref1 = FactorRanges.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      FactorRanges.prototype.model = FactorRange;
                
                      return FactorRanges;
                
                    })(Backbone.Collection);
                    return {
                      "Model": FactorRange,
                      "Collection": new FactorRanges()
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=factor_range.js.map
                */;
                (function() {
                  var __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
                    __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('range/data_factor_range',["underscore", "backbone", "range/factor_range"], function(_, Backbone, FactorRange) {
                    var DataFactorRange, DataFactorRanges, _ref, _ref1;
                    DataFactorRange = (function(_super) {
                      __extends(DataFactorRange, _super);
                
                      function DataFactorRange() {
                        this._get_values = __bind(this._get_values, this);
                        _ref = DataFactorRange.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      DataFactorRange.prototype.type = 'DataFactorRange';
                
                      DataFactorRange.prototype._get_values = function() {
                        var columns, temp, uniques, val, x, _i, _len;
                        columns = (function() {
                          var _i, _len, _ref1, _results;
                          _ref1 = this.get('columns');
                          _results = [];
                          for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
                            x = _ref1[_i];
                            _results.push(this.get('data_source').getcolumn(x));
                          }
                          return _results;
                        }).call(this);
                        columns = _.reduce(columns, (function(x, y) {
                          return x.concat(y);
                        }), []);
                        temp = {};
                        for (_i = 0, _len = columns.length; _i < _len; _i++) {
                          val = columns[_i];
                          temp[val] = true;
                        }
                        uniques = _.keys(temp);
                        uniques = _.sortBy(uniques, (function(x) {
                          return x;
                        }));
                        return uniques;
                      };
                
                      DataFactorRange.prototype.initialize = function(attrs, options) {
                        DataFactorRange.__super__.initialize.call(this, attrs, options);
                        this.register_property;
                        this.register_property('values', this._get_values, true);
                        this.add_dependencies('values', this, ['data_source', 'columns']);
                        return this.add_dependencies('values', this.get('data_source'), ['data_source', 'columns']);
                      };
                
                      DataFactorRange.prototype.defaults = function() {
                        return {
                          values: [],
                          columns: [],
                          data_source: null
                        };
                      };
                
                      return DataFactorRange;
                
                    })(FactorRange.Model);
                    DataFactorRanges = (function(_super) {
                      __extends(DataFactorRanges, _super);
                
                      function DataFactorRanges() {
                        _ref1 = DataFactorRanges.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      DataFactorRanges.prototype.model = DataFactorRange;
                
                      return DataFactorRanges;
                
                    })(Backbone.Collection);
                    return {
                      "Model": DataFactorRange,
                      "Collection": new DataFactorRanges
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=data_factor_range.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('range/data_range1d',["underscore", "backbone", "range/range1d"], function(_, Backbone, Range1d) {
                    var DataRange1d, DataRange1ds, _ref, _ref1;
                    DataRange1d = (function(_super) {
                      __extends(DataRange1d, _super);
                
                      function DataRange1d() {
                        _ref = DataRange1d.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      DataRange1d.prototype.type = 'DataRange1d';
                
                      DataRange1d.prototype._get_minmax = function() {
                        var center, colname, columns, max, min, source, sourceobj, span, _i, _j, _len, _len1, _ref1, _ref2, _ref3, _ref4;
                        columns = [];
                        _ref1 = this.get('sources');
                        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
                          source = _ref1[_i];
                          sourceobj = this.resolve_ref(source['source']);
                          _ref2 = source['columns'];
                          for (_j = 0, _len1 = _ref2.length; _j < _len1; _j++) {
                            colname = _ref2[_j];
                            columns.push(sourceobj.getcolumn(colname));
                          }
                        }
                        columns = _.flatten(columns);
                        columns = _.filter(columns, function(x) {
                          return typeof x !== "string";
                        });
                        columns = _.reject(columns, function(x) {
                          return isNaN(x);
                        });
                        _ref3 = [_.min(columns), _.max(columns)], min = _ref3[0], max = _ref3[1];
                        if (max !== min) {
                          span = (max - min) * (1 + this.get('rangepadding'));
                        } else {
                          if (max !== 0) {
                            span = Math.abs(max) * (1 + this.get('rangepadding'));
                          } else {
                            span = 2;
                          }
                        }
                        center = (max + min) / 2.0;
                        _ref4 = [center - span / 2.0, center + span / 2.0], min = _ref4[0], max = _ref4[1];
                        return [min, max];
                      };
                
                      DataRange1d.prototype._get_start = function() {
                        if (!_.isNullOrUndefined(this.get('_start'))) {
                          return this.get('_start');
                        } else {
                          return this.get('minmax')[0];
                        }
                      };
                
                      DataRange1d.prototype._set_start = function(start) {
                        return this.set('_start', start);
                      };
                
                      DataRange1d.prototype._get_end = function() {
                        if (!_.isNullOrUndefined(this.get('_end'))) {
                          return this.get('_end');
                        } else {
                          return this.get('minmax')[1];
                        }
                      };
                
                      DataRange1d.prototype._set_end = function(end) {
                        return this.set('_end', end);
                      };
                
                      DataRange1d.prototype.initialize = function(attrs, options) {
                        var columns_ref, source, _i, _len, _ref1;
                        this.register_property('minmax', this._get_minmax, true);
                        this.add_dependencies('minmax', this, ['sources'], ['rangepadding']);
                        _ref1 = this.get('sources');
                        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
                          columns_ref = _ref1[_i];
                          source = this.resolve_ref(columns_ref.source);
                          this.add_dependencies('minmax', source, 'data');
                        }
                        this.register_property('start', this._get_start, true);
                        this.register_setter('start', this._set_start);
                        this.add_dependencies('start', this, ['minmax', '_start']);
                        this.register_property('end', this._get_end, true);
                        this.register_setter('end', this._set_end);
                        this.add_dependencies('end', this, ['minmax', '_end']);
                        return DataRange1d.__super__.initialize.call(this, attrs, options);
                      };
                
                      DataRange1d.prototype.defaults = function() {
                        return {
                          sources: [],
                          rangepadding: 0.1
                        };
                      };
                
                      return DataRange1d;
                
                    })(Range1d.Model);
                    DataRange1ds = (function(_super) {
                      __extends(DataRange1ds, _super);
                
                      function DataRange1ds() {
                        _ref1 = DataRange1ds.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      DataRange1ds.prototype.model = DataRange1d;
                
                      return DataRange1ds;
                
                    })(Backbone.Collection);
                    return {
                      "Model": DataRange1d,
                      "Collection": new DataRange1ds()
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=data_range1d.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('common/plot_widget',["./continuum_view"], function(ContinuumView) {
                    var PlotWidget, _ref;
                    return PlotWidget = (function(_super) {
                      __extends(PlotWidget, _super);
                
                      function PlotWidget() {
                        _ref = PlotWidget.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      PlotWidget.prototype.tagName = 'div';
                
                      PlotWidget.prototype.initialize = function(options) {
                        this.plot_model = options.plot_model;
                        return this.plot_view = options.plot_view;
                      };
                
                      PlotWidget.prototype.bind_bokeh_events = function() {};
                
                      PlotWidget.prototype.request_render = function() {
                        return this.plot_view.request_render();
                      };
                
                      return PlotWidget;
                
                    })(ContinuumView.View);
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=plot_widget.js.map
                */;
                (function() {
                  define('common/textutils',[], function() {
                    var cache, getTextHeight;
                    cache = {};
                    getTextHeight = function(font) {
                      var block, body, div, result, text;
                      if (cache[font] != null) {
                        return cache[font];
                      }
                      text = $('<span>Hg</span>').css({
                        font: font
                      });
                      block = $('<div style="display: inline-block; width: 1px; height: 0px;"></div>');
                      div = $('<div></div>');
                      div.append(text, block);
                      body = $('body');
                      body.append(div);
                      try {
                        result = {};
                        block.css({
                          verticalAlign: 'baseline'
                        });
                        result.ascent = block.offset().top - text.offset().top;
                        block.css({
                          verticalAlign: 'bottom'
                        });
                        result.height = block.offset().top - text.offset().top;
                        result.descent = result.height - result.ascent;
                      } finally {
                        div.remove();
                      }
                      cache[font] = result;
                      return result;
                    };
                    return {
                      "getTextHeight": getTextHeight
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=textutils.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('renderer/annotation/legend',["underscore", "common/has_parent", "common/plot_widget", "common/textutils", "renderer/properties"], function(_, HasParent, PlotWidget, textutils, Properties) {
                    var Legend, LegendView, Legends, glyph_properties, line_properties, text_properties, _ref, _ref1, _ref2;
                    glyph_properties = Properties.glyph_properties;
                    line_properties = Properties.line_properties;
                    text_properties = Properties.text_properties;
                    LegendView = (function(_super) {
                      __extends(LegendView, _super);
                
                      function LegendView() {
                        _ref = LegendView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      LegendView.prototype.initialize = function(options) {
                        LegendView.__super__.initialize.call(this, options);
                        this.label_props = new text_properties(this, this.model, 'label_');
                        this.border_props = new line_properties(this, this.model, 'border_');
                        if (this.mget('legend_names')) {
                          this.legend_names = this.mget('legend_names');
                        } else {
                          this.legends = this.mget('legends');
                          this.legend_names = _.keys(this.mget('legends'));
                        }
                        this.need_calc_dims = true;
                        return this.listenTo(this.plot_model.solver, 'layout_update', function() {
                          return this.need_calc_dims = true;
                        });
                      };
                
                      LegendView.prototype.calc_dims = function(options) {
                        var ctx, h_range, label_height, label_width, legend_padding, legend_spacing, orientation, text_width, text_widths, v_range, x, y, _ref1;
                        label_height = this.mget('label_height');
                        this.glyph_height = this.mget('glyph_height');
                        label_width = this.mget('label_width');
                        this.glyph_width = this.mget('glyph_width');
                        legend_spacing = this.mget('legend_spacing');
                        this.label_height = _.max([textutils.getTextHeight(this.label_props.font(this)), label_height, this.glyph_height]);
                        this.legend_height = this.label_height;
                        this.legend_height = this.legend_names.length * this.legend_height + (1 + this.legend_names.length) * legend_spacing;
                        ctx = this.plot_view.canvas_view.ctx;
                        ctx.save();
                        this.label_props.set(ctx, this);
                        text_widths = _.map(this.legend_names, function(txt) {
                          return ctx.measureText(txt).width;
                        });
                        ctx.restore();
                        text_width = _.max(text_widths);
                        this.label_width = _.max([text_width, label_width]);
                        this.legend_width = this.label_width + this.glyph_width + 3 * legend_spacing;
                        orientation = this.mget('orientation');
                        legend_padding = this.mget('legend_padding');
                        h_range = this.plot_view.frame.get('h_range');
                        v_range = this.plot_view.frame.get('v_range');
                        if (orientation === "top_right") {
                          x = h_range.get('end') - legend_padding - this.legend_width;
                          y = v_range.get('end') - legend_padding;
                        } else if (orientation === "top_left") {
                          x = h_range.get('start') + legend_padding;
                          y = v_range.get('end') - legend_padding;
                        } else if (orientation === "bottom_left") {
                          x = h_range.get('start') + legend_padding;
                          y = v_range.get('start') + legend_padding + this.legend_height;
                        } else if (orientation === "bottom_right") {
                          x = h_range.get('end') - legend_padding - this.legend_width;
                          y = v_range.get('start') + legend_padding + this.legend_height;
                        } else if (orientation === "absolute") {
                          _ref1 = this.absolute_coords, x = _ref1[0], y = _ref1[1];
                        }
                        x = this.plot_view.canvas.vx_to_sx(x);
                        y = this.plot_view.canvas.vy_to_sy(y);
                        return this.box_coords = [x, y];
                      };
                
                      LegendView.prototype.render = function() {
                        var ctx, idx, legend_name, legend_spacing, renderer, view, x, x1, x2, y, y1, y2, yoffset, yspacing, _i, _j, _len, _len1, _ref1, _ref2;
                        if (this.need_calc_dims) {
                          this.calc_dims();
                          this.need_calc_dims = false;
                        }
                        ctx = this.plot_view.canvas_view.ctx;
                        ctx.save();
                        ctx.fillStyle = this.plot_model.get('background_fill');
                        this.border_props.set(ctx, this);
                        ctx.beginPath();
                        ctx.rect(this.box_coords[0], this.box_coords[1], this.legend_width, this.legend_height);
                        ctx.fill();
                        ctx.stroke();
                        legend_spacing = this.mget('legend_spacing');
                        _ref1 = this.legend_names;
                        for (idx = _i = 0, _len = _ref1.length; _i < _len; idx = ++_i) {
                          legend_name = _ref1[idx];
                          yoffset = idx * this.label_height;
                          yspacing = (1 + idx) * legend_spacing;
                          y = this.box_coords[1] + this.label_height / 2.0 + yoffset + yspacing;
                          x = this.box_coords[0] + legend_spacing;
                          x1 = this.box_coords[0] + 2 * legend_spacing + this.label_width;
                          x2 = x1 + this.glyph_width;
                          y1 = this.box_coords[1] + yoffset + yspacing;
                          y2 = y1 + this.glyph_height;
                          this.label_props.set(ctx, this);
                          ctx.fillText(legend_name, x, y);
                          _ref2 = this.model.resolve_ref(this.legends[legend_name]);
                          for (_j = 0, _len1 = _ref2.length; _j < _len1; _j++) {
                            renderer = _ref2[_j];
                            view = this.plot_view.renderers[renderer.id];
                            view.draw_legend(ctx, x1, x2, y1, y2);
                          }
                        }
                        return ctx.restore();
                      };
                
                      return LegendView;
                
                    })(PlotWidget);
                    Legend = (function(_super) {
                      __extends(Legend, _super);
                
                      function Legend() {
                        _ref1 = Legend.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      Legend.prototype.default_view = LegendView;
                
                      Legend.prototype.type = 'Legend';
                
                      Legend.prototype.display_defaults = function() {
                        return {
                          level: 'overlay',
                          border_line_color: 'black',
                          border_line_width: 1,
                          border_line_alpha: 1.0,
                          border_line_join: 'miter',
                          border_line_cap: 'butt',
                          border_line_dash: [],
                          border_line_dash_offset: 0,
                          label_standoff: 15,
                          label_text_font: "helvetica",
                          label_text_font_size: "10pt",
                          label_text_font_style: "normal",
                          label_text_color: "#444444",
                          label_text_alpha: 1.0,
                          label_text_align: "left",
                          label_text_baseline: "middle",
                          glyph_height: 20,
                          glyph_width: 20,
                          label_height: 20,
                          label_width: 50,
                          legend_padding: 10,
                          legend_spacing: 3,
                          orientation: "top_right",
                          datapoint: null
                        };
                      };
                
                      return Legend;
                
                    })(HasParent);
                    Legends = (function(_super) {
                      __extends(Legends, _super);
                
                      function Legends() {
                        _ref2 = Legends.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      Legends.prototype.model = Legend;
                
                      return Legends;
                
                    })(Backbone.Collection);
                    return {
                      "Model": Legend,
                      "Collection": new Legends(),
                      "View": LegendView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=legend.js.map
                */;
                /*
                 (c) 2013, Vladimir Agafonkin
                 RBush, a JavaScript library for high-performance 2D spatial indexing of points and rectangles.
                 https://github.com/mourner/rbush
                */
                
                (function () { 
                
                function rbush(maxEntries, format) {
                
                    // jshint newcap: false, validthis: true
                    if (!(this instanceof rbush)) { return new rbush(maxEntries, format); }
                
                    // max entries in a node is 9 by default; min node fill is 40% for best performance
                    this._maxEntries = Math.max(4, maxEntries || 9);
                    this._minEntries = Math.max(2, Math.ceil(this._maxEntries * 0.4));
                
                    if (format) {
                        this._initFormat(format);
                    }
                
                    this.clear();
                }
                
                rbush.prototype = {
                
                    all: function () {
                        return this._all(this.data, []);
                    },
                
                    search: function (bbox) {
                
                        var node = this.data,
                            result = [];
                
                        if (!this._intersects(bbox, node.bbox)) { return result; }
                
                        var nodesToSearch = [],
                            i, len, child, childBBox;
                
                        while (node) {
                            for (i = 0, len = node.children.length; i < len; i++) {
                                child = node.children[i];
                                childBBox = node.leaf ? this.toBBox(child) : child.bbox;
                
                                if (this._intersects(bbox, childBBox)) {
                
                                    if (node.leaf) {
                                        result.push(child);
                
                                    } else if (this._contains(bbox, childBBox)) {
                                        this._all(child, result);
                
                                    } else {
                                        nodesToSearch.push(child);
                                    }
                                }
                            }
                
                            node = nodesToSearch.pop();
                        }
                
                        return result;
                    },
                
                    load: function (data) {
                        if (!(data && data.length)) { return this; }
                
                        if (data.length < this._minEntries) {
                            for (var i = 0, len = data.length; i < len; i++) {
                                this.insert(data[i]);
                            }
                            return this;
                        }
                
                        // recursively build the tree with the given data from stratch using OMT algorithm
                        var node = this._build(data.slice(), 0);
                
                        if (!this.data.children.length) {
                            // save as is if tree is empty
                            this.data = node;
                
                        } else if (this.data.height === node.height) {
                            // split root if trees have the same height
                            this._splitRoot(this.data, node);
                
                        } else {
                            if (this.data.height < node.height) {
                                // swap trees if inserted one is bigger
                                var tmpNode = this.data;
                                this.data = node;
                                node = tmpNode;
                            }
                
                            // insert the small tree into the large tree at appropriate level
                            this._insert(node, this.data.height - node.height - 1, true);
                        }
                
                        return this;
                    },
                
                    insert: function (item) {
                        if (item) {
                            this._insert(item, this.data.height - 1);
                        }
                        return this;
                    },
                
                    clear: function () {
                        this.data = {
                            children: [],
                            leaf: true,
                            bbox: this._empty(),
                            height: 1
                        };
                        return this;
                    },
                
                    remove: function (item) {
                        if (!item) { return this; }
                
                        var node = this.data,
                            bbox = this.toBBox(item),
                            path = [],
                            indexes = [],
                            i, parent, index, goingUp;
                
                        // depth-first iterative tree traversal
                        while (node || path.length) {
                
                            if (!node) { // go up
                                node = path.pop();
                                parent = path[path.length - 1];
                                i = indexes.pop();
                                goingUp = true;
                            }
                
                            if (node.leaf) { // check current node
                                index = node.children.indexOf(item);
                
                                if (index !== -1) {
                                    // item found, remove the item and condense tree upwards
                                    node.children.splice(index, 1);
                                    path.push(node);
                                    this._condense(path);
                                    return this;
                                }
                            }
                
                            if (!goingUp && !node.leaf && this._contains(node.bbox, bbox)) { // go down
                                path.push(node);
                                indexes.push(i);
                                i = 0;
                                parent = node;
                                node = node.children[0];
                
                            } else if (parent) { // go right
                                i++;
                                node = parent.children[i];
                                goingUp = false;
                
                            } else { // nothing found
                                node = null;
                            }
                        }
                
                        return this;
                    },
                
                    toBBox: function (item) { return item; },
                
                    compareMinX: function (a, b) { return a[0] - b[0]; },
                    compareMinY: function (a, b) { return a[1] - b[1]; },
                
                    toJSON: function () { return this.data; },
                
                    fromJSON: function (data) {
                        this.data = data;
                        return this;
                    },
                
                    _all: function (node, result) {
                        var nodesToSearch = [];
                        while (node) {
                            if (node.leaf) {
                                result.push.apply(result, node.children);
                            } else {
                                nodesToSearch.push.apply(nodesToSearch, node.children);
                            }
                            node = nodesToSearch.pop();
                        }
                        return result;
                    },
                
                    _build: function (items, level, height) {
                
                        var N = items.length,
                            M = this._maxEntries,
                            node;
                
                        if (N <= M) {
                            node = {
                                children: items,
                                leaf: true,
                                height: 1
                            };
                            this._calcBBox(node);
                            return node;
                        }
                
                        if (!level) {
                            // target height of the bulk-loaded tree
                            height = Math.ceil(Math.log(N) / Math.log(M));
                
                            // target number of root entries to maximize storage utilization
                            M = Math.ceil(N / Math.pow(M, height - 1));
                
                            items.sort(this.compareMinX);
                        }
                
                        // TODO eliminate recursion?
                
                        node = {
                            children: [],
                            height: height
                        };
                
                        var N1 = Math.ceil(N / M) * Math.ceil(Math.sqrt(M)),
                            N2 = Math.ceil(N / M),
                            compare = level % 2 === 1 ? this.compareMinX : this.compareMinY,
                            i, j, slice, sliceLen, childNode;
                
                        // split the items into M mostly square tiles
                        for (i = 0; i < N; i += N1) {
                            slice = items.slice(i, i + N1).sort(compare);
                
                            for (j = 0, sliceLen = slice.length; j < sliceLen; j += N2) {
                                // pack each entry recursively
                                childNode = this._build(slice.slice(j, j + N2), level + 1, height - 1);
                                node.children.push(childNode);
                            }
                        }
                
                        this._calcBBox(node);
                
                        return node;
                    },
                
                    _chooseSubtree: function (bbox, node, level, path) {
                
                        var i, len, child, targetNode, area, enlargement, minArea, minEnlargement;
                
                        while (true) {
                            path.push(node);
                
                            if (node.leaf || path.length - 1 === level) { break; }
                
                            minArea = minEnlargement = Infinity;
                
                            for (i = 0, len = node.children.length; i < len; i++) {
                                child = node.children[i];
                                area = this._area(child.bbox);
                                enlargement = this._enlargedArea(bbox, child.bbox) - area;
                
                                // choose entry with the least area enlargement
                                if (enlargement < minEnlargement) {
                                    minEnlargement = enlargement;
                                    minArea = area < minArea ? area : minArea;
                                    targetNode = child;
                
                                } else if (enlargement === minEnlargement) {
                                    // otherwise choose one with the smallest area
                                    if (area < minArea) {
                                        minArea = area;
                                        targetNode = child;
                                    }
                                }
                            }
                
                            node = targetNode;
                        }
                
                        return node;
                    },
                
                    _insert: function (item, level, isNode) {
                
                        var bbox = isNode ? item.bbox : this.toBBox(item),
                            insertPath = [];
                
                        // find the best node for accommodating the item, saving all nodes along the path too
                        var node = this._chooseSubtree(bbox, this.data, level, insertPath);
                
                        // put the item into the node
                        node.children.push(item);
                        this._extend(node.bbox, bbox);
                
                        // split on node overflow; propagate upwards if necessary
                        while (level >= 0) {
                            if (insertPath[level].children.length > this._maxEntries) {
                                this._split(insertPath, level);
                                level--;
                            } else {
                              break;
                            }
                        }
                
                        // adjust bboxes along the insertion path
                        this._adjustParentBBoxes(bbox, insertPath, level);
                    },
                
                    // split overflowed node into two
                    _split: function (insertPath, level) {
                
                        var node = insertPath[level],
                            M = node.children.length,
                            m = this._minEntries;
                
                        this._chooseSplitAxis(node, m, M);
                
                        var newNode = {
                            children: node.children.splice(this._chooseSplitIndex(node, m, M)),
                            height: node.height
                        };
                
                        if (node.leaf) {
                            newNode.leaf = true;
                        }
                
                        this._calcBBox(node);
                        this._calcBBox(newNode);
                
                        if (level) {
                            insertPath[level - 1].children.push(newNode);
                        } else {
                            this._splitRoot(node, newNode);
                        }
                    },
                
                    _splitRoot: function (node, newNode) {
                        // split root node
                        this.data = {};
                        this.data.children = [node, newNode];
                        this.data.height = node.height + 1;
                        this._calcBBox(this.data);
                    },
                
                    _chooseSplitIndex: function (node, m, M) {
                
                        var i, bbox1, bbox2, overlap, area, minOverlap, minArea, index;
                
                        minOverlap = minArea = Infinity;
                
                        for (i = m; i <= M - m; i++) {
                            bbox1 = this._distBBox(node, 0, i);
                            bbox2 = this._distBBox(node, i, M);
                
                            overlap = this._intersectionArea(bbox1, bbox2);
                            area = this._area(bbox1) + this._area(bbox2);
                
                            // choose distribution with minimum overlap
                            if (overlap < minOverlap) {
                                minOverlap = overlap;
                                index = i;
                
                                minArea = area < minArea ? area : minArea;
                
                            } else if (overlap === minOverlap) {
                                // otherwise choose distribution with minimum area
                                if (area < minArea) {
                                    minArea = area;
                                    index = i;
                                }
                            }
                        }
                
                        return index;
                    },
                
                    // sorts node children by the best axis for split
                    _chooseSplitAxis: function (node, m, M) {
                
                        var compareMinX = node.leaf ? this.compareMinX : this._compareNodeMinX,
                            compareMinY = node.leaf ? this.compareMinY : this._compareNodeMinY,
                            xMargin = this._allDistMargin(node, m, M, compareMinX),
                            yMargin = this._allDistMargin(node, m, M, compareMinY);
                
                        // if total distributions margin value is minimal for x, sort by minX,
                        // otherwise it's already sorted by minY
                
                        if (xMargin < yMargin) {
                            node.children.sort(compareMinX);
                        }
                    },
                
                    // total margin of all possible split distributions where each node is at least m full
                    _allDistMargin: function (node, m, M, compare) {
                
                        node.children.sort(compare);
                
                        var leftBBox = this._distBBox(node, 0, m),
                            rightBBox = this._distBBox(node, M - m, M),
                            margin = this._margin(leftBBox) + this._margin(rightBBox),
                            i, child;
                
                        for (i = m; i < M - m; i++) {
                            child = node.children[i];
                            this._extend(leftBBox, node.leaf ? this.toBBox(child) : child.bbox);
                            margin += this._margin(leftBBox);
                        }
                
                        for (i = M - m - 1; i >= m; i--) {
                            child = node.children[i];
                            this._extend(rightBBox, node.leaf ? this.toBBox(child) : child.bbox);
                            margin += this._margin(rightBBox);
                        }
                
                        return margin;
                    },
                
                    // min bounding rectangle of node children from k to p-1
                    _distBBox: function (node, k, p) {
                        var bbox = this._empty();
                
                        for (var i = k, child; i < p; i++) {
                            child = node.children[i];
                            this._extend(bbox, node.leaf ? this.toBBox(child) : child.bbox);
                        }
                
                        return bbox;
                    },
                
                    // calculate node's bbox from bboxes of its children
                    _calcBBox: function (node) {
                        node.bbox = this._distBBox(node, 0, node.children.length);
                    },
                
                    _adjustParentBBoxes: function (bbox, path, level) {
                        // adjust bboxes along the given tree path
                        for (var i = level; i >= 0; i--) {
                            this._extend(path[i].bbox, bbox);
                        }
                    },
                
                    _condense: function (path) {
                        // go through the path, removing empty nodes and updating bboxes
                        for (var i = path.length - 1, siblings; i >= 0; i--) {
                            if (path[i].children.length === 0) {
                                if (i > 0) {
                                    siblings = path[i - 1].children;
                                    siblings.splice(siblings.indexOf(path[i]), 1);
                                } else {
                                    this.clear();
                                }
                            } else {
                                this._calcBBox(path[i]);
                            }
                        }
                    },
                
                    _contains: function(a, b) {
                        return a[0] <= b[0] &&
                               a[1] <= b[1] &&
                               b[2] <= a[2] &&
                               b[3] <= a[3];
                    },
                
                    _intersects: function (a, b) {
                        return b[0] <= a[2] &&
                               b[1] <= a[3] &&
                               b[2] >= a[0] &&
                               b[3] >= a[1];
                    },
                
                    _extend: function (a, b) {
                        a[0] = Math.min(a[0], b[0]);
                        a[1] = Math.min(a[1], b[1]);
                        a[2] = Math.max(a[2], b[2]);
                        a[3] = Math.max(a[3], b[3]);
                        return a;
                    },
                
                    _area:   function (a) { return (a[2] - a[0]) * (a[3] - a[1]); },
                    _margin: function (a) { return (a[2] - a[0]) + (a[3] - a[1]); },
                
                    _enlargedArea: function (a, b) {
                        return (Math.max(b[2], a[2]) - Math.min(b[0], a[0])) *
                               (Math.max(b[3], a[3]) - Math.min(b[1], a[1]));
                    },
                
                    _intersectionArea: function (a, b) {
                        var minX = Math.max(a[0], b[0]),
                            minY = Math.max(a[1], b[1]),
                            maxX = Math.min(a[2], b[2]),
                            maxY = Math.min(a[3], b[3]);
                
                        return Math.max(0, maxX - minX) *
                               Math.max(0, maxY - minY);
                    },
                
                    _empty: function () { return [Infinity, Infinity, -Infinity, -Infinity]; },
                
                    _compareNodeMinX: function (a, b) { return a.bbox[0] - b.bbox[0]; },
                    _compareNodeMinY: function (a, b) { return a.bbox[1] - b.bbox[1]; },
                
                    _initFormat: function (format) {
                        // data format (minX, minY, maxX, maxY accessors)
                
                        // uses eval-type function compilation instead of just accepting a toBBox function
                        // because the algorithms are very sensitive to sorting functions performance,
                        // so they should be dead simple and without inner calls
                
                        // jshint evil: true
                
                        var compareArr = ['return a', ' - b', ';'];
                
                        this.compareMinX = new Function('a', 'b', compareArr.join(format[0]));
                        this.compareMinY = new Function('a', 'b', compareArr.join(format[1]));
                
                        this.toBBox = new Function('a', 'return [a' + format.join(', a') + '];');
                    }
                };
                
                if (typeof define === 'function' && define.amd) {
                    define('rbush',[],function() {
                        return rbush;
                    });
                } else if (typeof module !== 'undefined') {
                    module.exports = rbush;
                } else if (typeof self !== 'undefined') {
                    self.rbush = rbush;
                } else {
                    window.rbush = rbush;
                }
                
                })();
                
                (function() {
                  define('common/mathutils',[], function() {
                    var angle_between, angle_dist, angle_norm;
                    angle_norm = function(angle) {
                      while (angle < 0) {
                        angle += 2 * Math.PI;
                      }
                      while (angle > 2 * Math.PI) {
                        angle -= 2 * Math.PI;
                      }
                      return angle;
                    };
                    angle_dist = function(lhs, rhs) {
                      return Math.abs(angle_norm(lhs - rhs));
                    };
                    angle_between = function(mid, lhs, rhs, direction) {
                      var d;
                      mid = angle_norm(mid);
                      d = angle_dist(lhs, rhs);
                      if (direction === "anticlock") {
                        return angle_dist(lhs, mid) <= d && angle_dist(mid, rhs) <= d;
                      } else {
                        return !(angle_dist(lhs, mid) <= d && angle_dist(mid, rhs) <= d);
                      }
                    };
                    return {
                      "angle_norm": angle_norm,
                      "angle_dist": angle_dist,
                      "angle_between": angle_between
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=mathutils.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
                    __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };
                
                  define('renderer/glyph/glyph',["underscore", "common/has_parent", "common/plot_widget", "renderer/properties"], function(_, HasParent, PlotWidget, Properties) {
                    var Glyph, GlyphView, _ref, _ref1;
                    GlyphView = (function(_super) {
                      __extends(GlyphView, _super);
                
                      function GlyphView() {
                        _ref = GlyphView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      GlyphView.prototype.setup_server_data = function() {
                        var data, domain, resample_op, serversource, transform_params, x_range, y_range;
                        serversource = this.mget('server_data_source');
                        data = _.extend({}, this.mget('data_source').get('data'), serversource.get('data'));
                        this.mget('data_source').set('data', data);
                        this.set_data(false);
                        transform_params = serversource.attributes['transform'];
                        resample_op = transform_params['resample'];
                        x_range = this.plot_view.frame.get('h_range');
                        y_range = this.plot_view.frame.get('v_range');
                        if (resample_op === 'line1d') {
                          domain = transform_params['domain'];
                          if (domain === 'x') {
                            return serversource.listen_for_line1d_updates(this.mget('data_source'), x_range, y_range, this.plot_view.x_range, this.plot_view.y_range, x_range, this.glyph_props.y.field, this.glyph_props.x.field, [this.glyph_props.y.field], transform_params);
                          } else {
                            throw new Error("Domains other than 'x' not supported yet.");
                          }
                        } else if (resample_op === 'heatmap') {
                          return serversource.listen_for_heatmap_updates(this.mget('data_source'), x_range, y_range, this.plot_view.x_range, this.plot_view.y_range, transform_params);
                        } else if (resample_op === 'abstract rendering') {
                          return serversource.listen_for_ar_updates(this.plot_view, this.mget('data_source'), x_range, y_range, this.plot_view.x_range, this.plot_view.y_range, transform_params);
                        } else {
                          return console.log("Unkonwn resample op '" + resample_op + "'");
                        }
                      };
                
                      GlyphView.prototype.initialize = function(options) {
                        var spec;
                        GlyphView.__super__.initialize.call(this, options);
                        this.need_set_data = true;
                        this.glyph_props = this.init_glyph(this.mget('glyphspec'));
                        this.have_selection_props = false;
                        if (this.mget('selection_glyphspec')) {
                          spec = _.extend({}, this.mget('glyphspec'), this.mget('selection_glyphspec'));
                          this.selection_glyphprops = this.init_glyph(spec);
                          this.have_selection_props = true;
                        } else {
                          this.selection_glyphprops = this.glyph_props;
                        }
                        if (this.mget('nonselection_glyphspec')) {
                          spec = _.extend({}, this.mget('glyphspec'), this.mget('nonselection_glyphspec'));
                          this.nonselection_glyphprops = this.init_glyph(spec);
                          this.have_selection_props = true;
                        } else {
                          this.nonselection_glyphprops = this.glyph_props;
                        }
                        if (this.mget('server_data_source')) {
                          this.setup_server_data();
                        }
                        return this.listenTo(this, 'change:server_data_source', this.setup_server_data);
                      };
                
                      GlyphView.prototype.init_glyph = function(glyphspec) {
                        var glyph_props, props;
                        props = {};
                        if (__indexOf.call(this._properties, 'line') >= 0) {
                          props['line_properties'] = new Properties.line_properties(this, glyphspec);
                        }
                        if (__indexOf.call(this._properties, 'fill') >= 0) {
                          props['fill_properties'] = new Properties.fill_properties(this, glyphspec);
                        }
                        if (__indexOf.call(this._properties, 'text') >= 0) {
                          props['text_properties'] = new Properties.text_properties(this, glyphspec);
                        }
                        glyph_props = new Properties.glyph_properties(this, glyphspec, this._fields, props);
                        return glyph_props;
                      };
                
                      GlyphView.prototype.set_data = function(request_render) {
                        var dir, field, i, junk, len, source, values, x, _i, _j, _k, _len, _ref1, _ref2, _ref3, _results;
                        if (request_render == null) {
                          request_render = true;
                        }
                        source = this.mget('data_source');
                        _ref1 = this._fields;
                        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
                          field = _ref1[_i];
                          if (field.indexOf(":") > -1) {
                            _ref2 = field.split(":"), field = _ref2[0], junk = _ref2[1];
                          }
                          this[field] = this.glyph_props.source_v_select(field, source);
                          if (field === "direction") {
                            values = new Uint8Array(this.direction.length);
                            for (i = _j = 0, _ref3 = this.direction.length; 0 <= _ref3 ? _j < _ref3 : _j > _ref3; i = 0 <= _ref3 ? ++_j : --_j) {
                              dir = this.direction[i];
                              if (dir === 'clock') {
                                values[i] = false;
                              } else if (dir === 'anticlock') {
                                values[i] = true;
                              } else {
                                values = NaN;
                              }
                            }
                            this.direction = values;
                          }
                          if (field.indexOf("angle") > -1) {
                            this[field] = (function() {
                              var _k, _len1, _ref4, _results;
                              _ref4 = this[field];
                              _results = [];
                              for (_k = 0, _len1 = _ref4.length; _k < _len1; _k++) {
                                x = _ref4[_k];
                                _results.push(-x);
                              }
                              return _results;
                            }).call(this);
                          }
                        }
                        if (this._set_data != null) {
                          this._set_data();
                        }
                        len = this[field].length;
                        this.all_indices = (function() {
                          _results = [];
                          for (var _k = 0; 0 <= len ? _k < len : _k > len; 0 <= len ? _k++ : _k--){ _results.push(_k); }
                          return _results;
                        }).apply(this);
                        this.have_new_data = true;
                        if (request_render) {
                          return this.request_render();
                        }
                      };
                
                      GlyphView.prototype.render = function() {
                        var ctx, do_render, i, idx, indices, nonselected, selected, selected_mask, _i, _j, _len, _len1,
                          _this = this;
                        if (this.need_set_data) {
                          this.set_data(false);
                          this.need_set_data = false;
                        }
                        this._map_data();
                        if ((this._mask_data != null) && (this.plot_view.x_range.type !== "FactorRange") && (this.plot_view.y_range.type !== "FactorRange")) {
                          indices = this._mask_data();
                        } else {
                          indices = this.all_indices;
                        }
                        ctx = this.plot_view.canvas_view.ctx;
                        ctx.save();
                        do_render = function(ctx, indices, glyph_props) {
                          var source;
                          source = _this.mget('data_source');
                          if (_this.have_new_data) {
                            if ((glyph_props.fill_properties != null) && glyph_props.fill_properties.do_fill) {
                              glyph_props.fill_properties.set_prop_cache(source);
                            }
                            if ((glyph_props.line_properties != null) && glyph_props.line_properties.do_stroke) {
                              glyph_props.line_properties.set_prop_cache(source);
                            }
                            if (glyph_props.text_properties != null) {
                              glyph_props.text_properties.set_prop_cache(source);
                            }
                          }
                          return _this._render(ctx, indices, glyph_props);
                        };
                        selected = this.mget('data_source').get('selected');
                        if (selected && selected.length && this.have_selection_props) {
                          selected_mask = (function() {
                            var _i, _len, _ref1, _results;
                            _ref1 = this.all_indices;
                            _results = [];
                            for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
                              i = _ref1[_i];
                              _results.push(false);
                            }
                            return _results;
                          }).call(this);
                          for (_i = 0, _len = selected.length; _i < _len; _i++) {
                            idx = selected[_i];
                            selected_mask[idx] = true;
                          }
                          selected = new Array();
                          nonselected = new Array();
                          for (_j = 0, _len1 = indices.length; _j < _len1; _j++) {
                            i = indices[_j];
                            if (selected_mask[i]) {
                              selected.push(i);
                            } else {
                              nonselected.push(i);
                            }
                          }
                          do_render(ctx, selected, this.selection_glyphprops);
                          do_render(ctx, nonselected, this.nonselection_glyphprops);
                        } else {
                          do_render(ctx, indices, this.glyph_props);
                        }
                        this.have_new_data = false;
                        return ctx.restore();
                      };
                
                      GlyphView.prototype.xrange = function() {
                        return this.plot_view.x_range;
                      };
                
                      GlyphView.prototype.yrange = function() {
                        return this.plot_view.y_range;
                      };
                
                      GlyphView.prototype.bind_bokeh_events = function() {
                        this.listenTo(this.model, 'change', this.request_render);
                        return this.listenTo(this.mget('data_source'), 'change', this.set_data);
                      };
                
                      GlyphView.prototype.distance_vector = function(pt, span_prop_name, position, dilate) {
                        var d, halfspan, i, local_select, mapper, pt0, pt1, pt_units, ptc, source, span, span_units, spt0, spt1,
                          _this = this;
                        if (dilate == null) {
                          dilate = false;
                        }
                        " returns an array ";
                        pt_units = this.glyph_props[pt].units;
                        span_units = this.glyph_props[span_prop_name].units;
                        if (pt === 'x') {
                          mapper = this.plot_view.xmapper;
                        } else if (pt === 'y') {
                          mapper = this.plot_view.ymapper;
                        }
                        source = this.mget('data_source');
                        local_select = function(prop_name) {
                          return _this.glyph_props.source_v_select(prop_name, source);
                        };
                        span = local_select(span_prop_name);
                        if (span_units === 'screen') {
                          return span;
                        }
                        if (position === 'center') {
                          halfspan = (function() {
                            var _i, _len, _results;
                            _results = [];
                            for (_i = 0, _len = span.length; _i < _len; _i++) {
                              d = span[_i];
                              _results.push(d / 2);
                            }
                            return _results;
                          })();
                          ptc = local_select(pt);
                          if (pt_units === 'screen') {
                            ptc = mapper.v_map_from_target(ptc);
                          }
                          if (typeof ptc[0] === 'string') {
                            ptc = mapper.v_map_to_target(ptc);
                          }
                          pt0 = (function() {
                            var _i, _ref1, _results;
                            _results = [];
                            for (i = _i = 0, _ref1 = ptc.length; 0 <= _ref1 ? _i < _ref1 : _i > _ref1; i = 0 <= _ref1 ? ++_i : --_i) {
                              _results.push(ptc[i] - halfspan[i]);
                            }
                            return _results;
                          })();
                          pt1 = (function() {
                            var _i, _ref1, _results;
                            _results = [];
                            for (i = _i = 0, _ref1 = ptc.length; 0 <= _ref1 ? _i < _ref1 : _i > _ref1; i = 0 <= _ref1 ? ++_i : --_i) {
                              _results.push(ptc[i] + halfspan[i]);
                            }
                            return _results;
                          })();
                        } else {
                          pt0 = local_select(pt);
                          if (pt_units === 'screen') {
                            pt0 = mapper.v_map_from_target(pt0);
                          }
                          pt1 = (function() {
                            var _i, _ref1, _results;
                            _results = [];
                            for (i = _i = 0, _ref1 = pt0.length; 0 <= _ref1 ? _i < _ref1 : _i > _ref1; i = 0 <= _ref1 ? ++_i : --_i) {
                              _results.push(pt0[i] + span[i]);
                            }
                            return _results;
                          })();
                        }
                        spt0 = mapper.v_map_to_target(pt0);
                        spt1 = mapper.v_map_to_target(pt1);
                        if (dilate) {
                          return (function() {
                            var _i, _ref1, _results;
                            _results = [];
                            for (i = _i = 0, _ref1 = spt0.length; 0 <= _ref1 ? _i < _ref1 : _i > _ref1; i = 0 <= _ref1 ? ++_i : --_i) {
                              _results.push(Math.ceil(Math.abs(spt1[i] - spt0[i])));
                            }
                            return _results;
                          })();
                        } else {
                          return (function() {
                            var _i, _ref1, _results;
                            _results = [];
                            for (i = _i = 0, _ref1 = spt0.length; 0 <= _ref1 ? _i < _ref1 : _i > _ref1; i = 0 <= _ref1 ? ++_i : --_i) {
                              _results.push(Math.abs(spt1[i] - spt0[i]));
                            }
                            return _results;
                          })();
                        }
                      };
                
                      GlyphView.prototype.get_reference_point = function() {
                        var reference_point;
                        reference_point = this.mget('reference_point');
                        if (_.isNumber(reference_point)) {
                          return this.data[reference_point];
                        } else {
                          return reference_point;
                        }
                      };
                
                      GlyphView.prototype.draw_legend = function(ctx, x0, x1, y0, y1) {
                        return null;
                      };
                
                      GlyphView.prototype._generic_line_legend = function(ctx, x0, x1, y0, y1) {
                        var line_props, reference_point, _ref1;
                        reference_point = (_ref1 = this.get_reference_point()) != null ? _ref1 : 0;
                        line_props = this.glyph_props.line_properties;
                        ctx.save();
                        ctx.beginPath();
                        ctx.moveTo(x0, (y0 + y1) / 2);
                        ctx.lineTo(x1, (y0 + y1) / 2);
                        if (line_props.do_stroke) {
                          line_props.set_vectorize(ctx, reference_point);
                          ctx.stroke();
                        }
                        return ctx.restore();
                      };
                
                      GlyphView.prototype._generic_area_legend = function(ctx, x0, x1, y0, y1) {
                        var dh, dw, h, indices, reference_point, sx0, sx1, sy0, sy1, w, _ref1;
                        reference_point = (_ref1 = this.get_reference_point()) != null ? _ref1 : 0;
                        indices = [reference_point];
                        w = Math.abs(x1 - x0);
                        dw = w * 0.1;
                        h = Math.abs(y1 - y0);
                        dh = h * 0.1;
                        sx0 = x0 + dw;
                        sx1 = x1 - dw;
                        sy0 = y0 + dh;
                        sy1 = y1 - dh;
                        if (this.glyph_props.fill_properties.do_fill) {
                          this.glyph_props.fill_properties.set_vectorize(ctx, reference_point);
                          ctx.fillRect(sx0, sy0, sx1 - sx0, sy1 - sy0);
                        }
                        if (this.glyph_props.line_properties.do_stroke) {
                          ctx.beginPath();
                          ctx.rect(sx0, sy0, sx1 - sx0, sy1 - sy0);
                          this.glyph_props.line_properties.set_vectorize(ctx, reference_point);
                          return ctx.stroke();
                        }
                      };
                
                      GlyphView.prototype.hit_test = function(geometry) {
                        if (geometry.type === "point") {
                          if (this._hit_point != null) {
                            return this._hit_point(geometry);
                          }
                          if (this._point_hit_warned == null) {
                            console.log("WARNING: 'point' selection not available on renderer");
                            this._point_hit_warned = true;
                          }
                          return null;
                        } else if (geometry.type === "rect") {
                          if (this._hit_rect != null) {
                            return this._hit_rect(geometry);
                          }
                          if (this._rect_hit_warned == null) {
                            console.log("WARNING: 'rect' selection not avaliable on renderer");
                            this._rect_hit_warned = true;
                          }
                          return null;
                        } else {
                          console.log("unrecognized selection geometry type '" + geometry.type + "'");
                          return null;
                        }
                      };
                
                      return GlyphView;
                
                    })(PlotWidget);
                    Glyph = (function(_super) {
                      __extends(Glyph, _super);
                
                      function Glyph() {
                        _ref1 = Glyph.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      Glyph.prototype.defaults = function() {
                        return {
                          data_source: null
                        };
                      };
                
                      Glyph.prototype.display_defaults = function() {
                        return {
                          level: 'glyph',
                          radius_units: 'data',
                          length_units: 'screen',
                          angle_units: 'deg',
                          start_angle_units: 'deg',
                          end_angle_units: 'deg'
                        };
                      };
                
                      return Glyph;
                
                    })(HasParent);
                    return {
                      "Model": Glyph,
                      "View": GlyphView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=glyph.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('renderer/glyph/annular_wedge',["underscore", "rbush", "common/mathutils", "renderer/properties", "./glyph"], function(_, rbush, mathutils, Properties, Glyph) {
                    var AnnularWedge, AnnularWedgeView, _ref, _ref1;
                    AnnularWedgeView = (function(_super) {
                      __extends(AnnularWedgeView, _super);
                
                      function AnnularWedgeView() {
                        _ref = AnnularWedgeView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      AnnularWedgeView.prototype._fields = ['x', 'y', 'inner_radius', 'outer_radius', 'start_angle', 'end_angle', 'direction:string'];
                
                      AnnularWedgeView.prototype._properties = ['line', 'fill'];
                
                      AnnularWedgeView.prototype._set_data = function() {
                        var i, pts, _i, _ref1;
                        this.max_radius = _.max(this.outer_radius);
                        this.index = rbush();
                        pts = [];
                        for (i = _i = 0, _ref1 = this.x.length; 0 <= _ref1 ? _i < _ref1 : _i > _ref1; i = 0 <= _ref1 ? ++_i : --_i) {
                          if (!isNaN(this.x[i] + this.y[i])) {
                            pts.push([
                              this.x[i], this.y[i], this.x[i], this.y[i], {
                                'i': i
                              }
                            ]);
                          }
                        }
                        return this.index.load(pts);
                      };
                
                      AnnularWedgeView.prototype._map_data = function() {
                        var i, _i, _ref1, _ref2, _results;
                        _ref1 = this.plot_view.map_to_screen(this.x, this.glyph_props.x.units, this.y, this.glyph_props.y.units), this.sx = _ref1[0], this.sy = _ref1[1];
                        this.inner_radius = this.distance_vector('x', 'inner_radius', 'edge');
                        this.outer_radius = this.distance_vector('x', 'outer_radius', 'edge');
                        this.angle = new Float32Array(this.start_angle.length);
                        _results = [];
                        for (i = _i = 0, _ref2 = this.start_angle.length; 0 <= _ref2 ? _i < _ref2 : _i > _ref2; i = 0 <= _ref2 ? ++_i : --_i) {
                          _results.push(this.angle[i] = this.end_angle[i] - this.start_angle[i]);
                        }
                        return _results;
                      };
                
                      AnnularWedgeView.prototype._render = function(ctx, indices, glyph_props, sx, sy, inner_radius, outer_radius) {
                        var i, _i, _len, _results;
                        if (sx == null) {
                          sx = this.sx;
                        }
                        if (sy == null) {
                          sy = this.sy;
                        }
                        if (inner_radius == null) {
                          inner_radius = this.inner_radius;
                        }
                        if (outer_radius == null) {
                          outer_radius = this.outer_radius;
                        }
                        _results = [];
                        for (_i = 0, _len = indices.length; _i < _len; _i++) {
                          i = indices[_i];
                          if (isNaN(sx[i] + sy[i] + inner_radius[i] + outer_radius[i] + this.start_angle[i] + this.angle[i])) {
                            continue;
                          }
                          ctx.translate(sx[i], sy[i]);
                          ctx.rotate(this.start_angle[i]);
                          ctx.moveTo(outer_radius[i], 0);
                          ctx.beginPath();
                          ctx.arc(0, 0, outer_radius[i], 0, this.angle[i], this.direction[i]);
                          ctx.rotate(this.angle[i]);
                          ctx.lineTo(inner_radius[i], 0);
                          ctx.arc(0, 0, inner_radius[i], 0, -this.angle[i], !this.direction[i]);
                          ctx.closePath();
                          ctx.rotate(-this.angle[i] - this.start_angle[i]);
                          ctx.translate(-sx[i], -sy[i]);
                          if (glyph_props.fill_properties.do_fill) {
                            glyph_props.fill_properties.set_vectorize(ctx, i);
                            ctx.fill();
                          }
                          if (glyph_props.line_properties.do_stroke) {
                            glyph_props.line_properties.set_vectorize(ctx, i);
                            _results.push(ctx.stroke());
                          } else {
                            _results.push(void 0);
                          }
                        }
                        return _results;
                      };
                
                      AnnularWedgeView.prototype._hit_point = function(geometry) {
                        var angle, candidates, candidates2, candidates3, dist, hits, i, pt, r2, sx, sx0, sx1, sy, sy0, sy1, vx, vx0, vx1, vy, vy0, vy1, x, x0, x1, y, y0, y1, _i, _j, _k, _l, _len, _len1, _len2, _len3, _len4, _m, _ref1, _ref2, _ref3, _ref4, _ref5, _ref6;
                        _ref1 = [geometry.vx, geometry.vy], vx = _ref1[0], vy = _ref1[1];
                        x = this.plot_view.xmapper.map_from_target(vx);
                        y = this.plot_view.ymapper.map_from_target(vy);
                        if (this.outer_radius_units === "screen") {
                          vx0 = vx - this.max_radius;
                          vx1 = vx + this.max_radius;
                          _ref2 = this.plot_view.xmapper.v_map_from_target([vx0, vx1]), x0 = _ref2[0], x1 = _ref2[1];
                          vy0 = vy - this.max_radius;
                          vy1 = vy + this.max_radius;
                          _ref3 = this.plot_view.ymapper.v_map_from_target([vy0, vy1]), y0 = _ref3[0], y1 = _ref3[1];
                        } else {
                          x0 = x - this.max_radius;
                          x1 = x + this.max_radius;
                          y0 = y - this.max_radius;
                          y1 = y + this.max_radius;
                        }
                        candidates = (function() {
                          var _i, _len, _ref4, _results;
                          _ref4 = this.index.search([x0, y0, x1, y1]);
                          _results = [];
                          for (_i = 0, _len = _ref4.length; _i < _len; _i++) {
                            pt = _ref4[_i];
                            _results.push(pt[4].i);
                          }
                          return _results;
                        }).call(this);
                        candidates2 = [];
                        if (this.outer_radius_units === "screen") {
                          sx = this.plot_view.canvas.vx_to_sx(vx);
                          sy = this.plot_view.canvas.vy_to_sy(vy);
                          for (_i = 0, _len = candidates.length; _i < _len; _i++) {
                            i = candidates[_i];
                            r2 = Math.pow(this.outer_radius[i], 2);
                            dist = Math.pow(this.sx[i] - sx, 2) + Math.pow(this.sy[i] - sy, 2);
                            if (dist <= r2) {
                              candidates2.push([i, dist]);
                            }
                          }
                        } else {
                          for (_j = 0, _len1 = candidates.length; _j < _len1; _j++) {
                            i = candidates[_j];
                            r2 = Math.pow(this.outer_radius[i], 2);
                            sx0 = this.plot_view.xmapper.map_to_target(x);
                            sx1 = this.plot_view.xmapper.map_to_target(this.x[i]);
                            sy0 = this.plot_view.ymapper.map_to_target(y);
                            sy1 = this.plot_view.ymapper.map_to_target(this.y[i]);
                            dist = Math.pow(sx0 - sx1, 2) + Math.pow(sy0 - sy1, 2);
                            if (dist <= r2) {
                              candidates2.push([i, dist]);
                            }
                          }
                        }
                        candidates3 = [];
                        if (this.inner_radius_units === "screen") {
                          sx = this.plot_view.canvas.vx_to_sx(vx);
                          sy = this.plot_view.canvas.vy_to_sy(vy);
                          for (_k = 0, _len2 = candidates2.length; _k < _len2; _k++) {
                            _ref4 = candidates2[_k], i = _ref4[0], dist = _ref4[1];
                            r2 = Math.pow(this.inner_radius[i], 2);
                            if (dist >= r2) {
                              candidates3.push([i, dist]);
                            }
                          }
                        } else {
                          for (_l = 0, _len3 = candidates2.length; _l < _len3; _l++) {
                            _ref5 = candidates2[_l], i = _ref5[0], dist = _ref5[1];
                            r2 = Math.pow(this.inner_radius[i], 2);
                            sx0 = this.plot_view.xmapper.map_to_target(x);
                            sx1 = this.plot_view.xmapper.map_to_target(this.x[i]);
                            sy0 = this.plot_view.ymapper.map_to_target(y);
                            sy1 = this.plot_view.ymapper.map_to_target(this.y[i]);
                            if (dist >= r2) {
                              candidates3.push([i, dist]);
                            }
                          }
                        }
                        hits = [];
                        for (_m = 0, _len4 = candidates3.length; _m < _len4; _m++) {
                          _ref6 = candidates3[_m], i = _ref6[0], dist = _ref6[1];
                          sx = this.plot_view.canvas.vx_to_sx(vx);
                          sy = this.plot_view.canvas.vy_to_sy(vy);
                          angle = Math.atan2(sy - this.sy[i], sx - this.sx[i]);
                          if (mathutils.angle_between(-angle, -this.start_angle[i], -this.end_angle[i], this.direction[i])) {
                            hits.push([i, dist]);
                          }
                        }
                        hits = _.chain(hits).sortBy(function(elt) {
                          return elt[1];
                        }).map(function(elt) {
                          return elt[0];
                        }).value();
                        return hits;
                      };
                
                      AnnularWedgeView.prototype.draw_legend = function(ctx, x0, x1, y0, y1) {
                        var indices, inner_radius, outer_radius, r, reference_point, sx, sy, _ref1;
                        reference_point = (_ref1 = this.get_reference_point()) != null ? _ref1 : 0;
                        indices = [reference_point];
                        sx = {};
                        sx[reference_point] = (x0 + x1) / 2;
                        sy = {};
                        sy[reference_point] = (y0 + y1) / 2;
                        r = Math.min(Math.abs(x1 - x0), Math.abs(y1 - y0)) * 0.5;
                        inner_radius = {};
                        inner_radius[reference_point] = r * 0.25;
                        outer_radius = {};
                        outer_radius[reference_point] = r * 0.8;
                        return this._render(ctx, indices, this.glyph_props, sx, sy, inner_radius, outer_radius);
                      };
                
                      return AnnularWedgeView;
                
                    })(Glyph.View);
                    AnnularWedge = (function(_super) {
                      __extends(AnnularWedge, _super);
                
                      function AnnularWedge() {
                        _ref1 = AnnularWedge.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      AnnularWedge.prototype.default_view = AnnularWedgeView;
                
                      AnnularWedge.prototype.type = 'Glyph';
                
                      AnnularWedge.prototype.display_defaults = function() {
                        return _.extend(AnnularWedge.__super__.display_defaults.call(this), {
                          direction: 'anticlock',
                          fill_color: 'gray',
                          fill_alpha: 1.0,
                          line_color: 'red',
                          line_width: 1,
                          line_alpha: 1.0,
                          line_join: 'miter',
                          line_cap: 'butt',
                          line_dash: [],
                          line_dash_offset: 0
                        });
                      };
                
                      return AnnularWedge;
                
                    })(Glyph.Model);
                    return {
                      "Model": AnnularWedge,
                      "View": AnnularWedgeView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=annular_wedge.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('renderer/glyph/annulus',["underscore", "rbush", "renderer/properties", "./glyph"], function(_, rbush, Properties, Glyph) {
                    var Annulus, AnnulusView, _ref, _ref1;
                    AnnulusView = (function(_super) {
                      __extends(AnnulusView, _super);
                
                      function AnnulusView() {
                        _ref = AnnulusView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      AnnulusView.prototype._fields = ['x', 'y', 'inner_radius', 'outer_radius'];
                
                      AnnulusView.prototype._properties = ['line', 'fill'];
                
                      AnnulusView.prototype._set_data = function() {
                        var i, pts, _i, _ref1;
                        this.max_radius = _.max(this.outer_radius);
                        this.index = rbush();
                        pts = [];
                        for (i = _i = 0, _ref1 = this.x.length; 0 <= _ref1 ? _i < _ref1 : _i > _ref1; i = 0 <= _ref1 ? ++_i : --_i) {
                          if (!isNaN(this.x[i] + this.y[i])) {
                            pts.push([
                              this.x[i], this.y[i], this.x[i], this.y[i], {
                                'i': i
                              }
                            ]);
                          }
                        }
                        return this.index.load(pts);
                      };
                
                      AnnulusView.prototype._map_data = function() {
                        var _ref1;
                        _ref1 = this.plot_view.map_to_screen(this.x, this.glyph_props.x.units, this.y, this.glyph_props.y.units), this.sx = _ref1[0], this.sy = _ref1[1];
                        this.inner_radius = this.distance_vector('x', 'inner_radius', 'edge');
                        return this.outer_radius = this.distance_vector('x', 'outer_radius', 'edge');
                      };
                
                      AnnulusView.prototype._render = function(ctx, indices, glyph_props, sx, sy, inner_radius, outer_radius) {
                        var i, _i, _len, _results;
                        if (sx == null) {
                          sx = this.sx;
                        }
                        if (sy == null) {
                          sy = this.sy;
                        }
                        if (inner_radius == null) {
                          inner_radius = this.inner_radius;
                        }
                        if (outer_radius == null) {
                          outer_radius = this.outer_radius;
                        }
                        _results = [];
                        for (_i = 0, _len = indices.length; _i < _len; _i++) {
                          i = indices[_i];
                          if (isNaN(sx[i] + sy[i] + inner_radius[i] + outer_radius[i])) {
                            continue;
                          }
                          ctx.beginPath();
                          ctx.arc(sx[i], sy[i], inner_radius[i], 0, 2 * Math.PI * 2, false);
                          ctx.moveTo(sx[i] + outer_radius[i], sy[i]);
                          ctx.arc(sx[i], sy[i], outer_radius[i], 0, 2 * Math.PI * 2, true);
                          if (glyph_props.fill_properties.do_fill) {
                            glyph_props.fill_properties.set_vectorize(ctx, i);
                            ctx.fill();
                          }
                          if (glyph_props.line_properties.do_stroke) {
                            glyph_props.line_properties.set_vectorize(ctx, i);
                            _results.push(ctx.stroke());
                          } else {
                            _results.push(void 0);
                          }
                        }
                        return _results;
                      };
                
                      AnnulusView.prototype._hit_point = function(geometry) {
                        var candidates, candidates2, dist, hits, i, pt, r2, sx, sx0, sx1, sy, sy0, sy1, vx, vx0, vx1, vy, vy0, vy1, x, x0, x1, y, y0, y1, _i, _j, _k, _l, _len, _len1, _len2, _len3, _ref1, _ref2, _ref3, _ref4, _ref5;
                        _ref1 = [geometry.vx, geometry.vy], vx = _ref1[0], vy = _ref1[1];
                        x = this.plot_view.xmapper.map_from_target(vx);
                        y = this.plot_view.ymapper.map_from_target(vy);
                        if (this.outer_radius_units === "screen") {
                          vx0 = vx - this.max_radius;
                          vx1 = vx + this.max_radius;
                          _ref2 = this.plot_view.xmapper.v_map_from_target([vx0, vx1]), x0 = _ref2[0], x1 = _ref2[1];
                          vy0 = vy - this.max_radius;
                          vy1 = vy + this.max_radius;
                          _ref3 = this.plot_view.ymapper.v_map_from_target([vy0, vy1]), y0 = _ref3[0], y1 = _ref3[1];
                        } else {
                          x0 = x - this.max_radius;
                          x1 = x + this.max_radius;
                          y0 = y - this.max_radius;
                          y1 = y + this.max_radius;
                        }
                        candidates = (function() {
                          var _i, _len, _ref4, _results;
                          _ref4 = this.index.search([x0, y0, x1, y1]);
                          _results = [];
                          for (_i = 0, _len = _ref4.length; _i < _len; _i++) {
                            pt = _ref4[_i];
                            _results.push(pt[4].i);
                          }
                          return _results;
                        }).call(this);
                        candidates2 = [];
                        if (this.outer_radius_units === "screen") {
                          sx = this.plot_view.canvas.vx_to_sx(vx);
                          sy = this.plot_view.canvas.vy_to_sy(vy);
                          for (_i = 0, _len = candidates.length; _i < _len; _i++) {
                            i = candidates[_i];
                            r2 = Math.pow(this.outer_radius[i], 2);
                            dist = Math.pow(this.sx[i] - sx, 2) + Math.pow(this.sy[i] - sy, 2);
                            if (dist <= r2) {
                              candidates2.push([i, dist]);
                            }
                          }
                        } else {
                          for (_j = 0, _len1 = candidates.length; _j < _len1; _j++) {
                            i = candidates[_j];
                            r2 = Math.pow(this.outer_radius[i], 2);
                            sx0 = this.plot_view.xmapper.map_to_target(x);
                            sx1 = this.plot_view.xmapper.map_to_target(this.x[i]);
                            sy0 = this.plot_view.ymapper.map_to_target(y);
                            sy1 = this.plot_view.ymapper.map_to_target(this.y[i]);
                            dist = Math.pow(sx0 - sx1, 2) + Math.pow(sy0 - sy1, 2);
                            if (dist <= r2) {
                              candidates2.push([i, dist]);
                            }
                          }
                        }
                        hits = [];
                        if (this.inner_radius_units === "screen") {
                          sx = this.plot_view.canvas.vx_to_sx(vx);
                          sy = this.plot_view.canvas.vy_to_sy(vy);
                          for (_k = 0, _len2 = candidates2.length; _k < _len2; _k++) {
                            _ref4 = candidates2[_k], i = _ref4[0], dist = _ref4[1];
                            r2 = Math.pow(this.inner_radius[i], 2);
                            if (dist >= r2) {
                              hits.push([i, dist]);
                            }
                          }
                        } else {
                          for (_l = 0, _len3 = candidates2.length; _l < _len3; _l++) {
                            _ref5 = candidates2[_l], i = _ref5[0], dist = _ref5[1];
                            r2 = Math.pow(this.inner_radius[i], 2);
                            sx0 = this.plot_view.xmapper.map_to_target(x);
                            sx1 = this.plot_view.xmapper.map_to_target(this.x[i]);
                            sy0 = this.plot_view.ymapper.map_to_target(y);
                            sy1 = this.plot_view.ymapper.map_to_target(this.y[i]);
                            if (dist >= r2) {
                              hits.push([i, dist]);
                            }
                          }
                        }
                        hits = _.chain(hits).sortBy(function(elt) {
                          return elt[1];
                        }).map(function(elt) {
                          return elt[0];
                        }).value();
                        return hits;
                      };
                
                      AnnulusView.prototype.draw_legend = function(ctx, x0, x1, y0, y1) {
                        var indices, inner_radius, outer_radius, r, reference_point, sx, sy, _ref1;
                        reference_point = (_ref1 = this.get_reference_point()) != null ? _ref1 : 0;
                        indices = [reference_point];
                        sx = {};
                        sx[reference_point] = (x0 + x1) / 2;
                        sy = {};
                        sy[reference_point] = (y0 + y1) / 2;
                        r = Math.min(Math.abs(x1 - x0), Math.abs(y1 - y0)) * 0.5;
                        inner_radius = {};
                        inner_radius[reference_point] = r * 0.4;
                        outer_radius = {};
                        outer_radius[reference_point] = r * 0.8;
                        return this._render(ctx, indices, this.glyph_props, sx, sy, inner_radius, outer_radius);
                      };
                
                      return AnnulusView;
                
                    })(Glyph.View);
                    Annulus = (function(_super) {
                      __extends(Annulus, _super);
                
                      function Annulus() {
                        _ref1 = Annulus.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      Annulus.prototype.default_view = AnnulusView;
                
                      Annulus.prototype.type = 'Glyph';
                
                      Annulus.prototype.display_defaults = function() {
                        return _.extend(Annulus.__super__.display_defaults.call(this), {
                          fill_color: 'gray',
                          fill_alpha: 1.0,
                          line_color: 'red',
                          line_width: 1,
                          line_alpha: 1.0,
                          line_join: 'miter',
                          line_cap: 'butt',
                          line_dash: [],
                          line_dash_offset: 0
                        });
                      };
                
                      return Annulus;
                
                    })(Glyph.Model);
                    return {
                      "Model": Annulus,
                      "View": AnnulusView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=annulus.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('renderer/glyph/arc',["underscore", "renderer/properties", "./glyph"], function(_, Properties, Glyph) {
                    var Arc, ArcView, _ref, _ref1;
                    ArcView = (function(_super) {
                      __extends(ArcView, _super);
                
                      function ArcView() {
                        _ref = ArcView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      ArcView.prototype._fields = ['x', 'y', 'radius', 'start_angle', 'end_angle', 'direction:string'];
                
                      ArcView.prototype._properties = ['line'];
                
                      ArcView.prototype._map_data = function() {
                        var _ref1;
                        _ref1 = this.plot_view.map_to_screen(this.x, this.glyph_props.x.units, this.y, this.glyph_props.y.units), this.sx = _ref1[0], this.sy = _ref1[1];
                        return this.radius = this.distance_vector('x', 'radius', 'edge');
                      };
                
                      ArcView.prototype._render = function(ctx, indices, glyph_props, sx, sy, radius) {
                        var i, _i, _len, _results;
                        if (sx == null) {
                          sx = this.sx;
                        }
                        if (sy == null) {
                          sy = this.sy;
                        }
                        if (radius == null) {
                          radius = this.radius;
                        }
                        if (glyph_props.line_properties.do_stroke) {
                          _results = [];
                          for (_i = 0, _len = indices.length; _i < _len; _i++) {
                            i = indices[_i];
                            if (isNaN(sx[i] + sy[i] + radius[i] + this.start_angle[i] + this.end_angle[i] + this.direction[i])) {
                              continue;
                            }
                            ctx.beginPath();
                            ctx.arc(sx[i], sy[i], radius[i], this.start_angle[i], this.end_angle[i], this.direction[i]);
                            glyph_props.line_properties.set_vectorize(ctx, i);
                            _results.push(ctx.stroke());
                          }
                          return _results;
                        }
                      };
                
                      ArcView.prototype.draw_legend = function(ctx, x0, x1, y0, y1) {
                        var indices, radius, reference_point, sx, sy, _ref1;
                        reference_point = (_ref1 = this.get_reference_point()) != null ? _ref1 : 0;
                        indices = [reference_point];
                        sx = {};
                        sx[reference_point] = (x0 + x1) / 2;
                        sy = {};
                        sy[reference_point] = (y0 + y1) / 2;
                        radius = {};
                        radius[reference_point] = Math.min(Math.abs(x1 - x0), Math.abs(y1 - y0)) * 0.4;
                        return this._render(ctx, indices, this.glyph_props, sx, sy, radius);
                      };
                
                      return ArcView;
                
                    })(Glyph.View);
                    Arc = (function(_super) {
                      __extends(Arc, _super);
                
                      function Arc() {
                        _ref1 = Arc.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      Arc.prototype.default_view = ArcView;
                
                      Arc.prototype.type = 'Glyph';
                
                      Arc.prototype.display_defaults = function() {
                        return _.extend(Arc.__super__.display_defaults.call(this), {
                          direction: 'anticlock',
                          line_color: 'red',
                          line_width: 1,
                          line_alpha: 1.0,
                          line_join: 'miter',
                          line_cap: 'butt',
                          line_dash: [],
                          line_dash_offset: 0
                        });
                      };
                
                      return Arc;
                
                    })(Glyph.Model);
                    return {
                      "Model": Arc,
                      "View": ArcView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=arc.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('renderer/glyph/marker',["underscore", "rbush", "renderer/properties", "./glyph"], function(_, rbush, Properties, Glyph) {
                    var Marker, MarkerView, _ref, _ref1;
                    MarkerView = (function(_super) {
                      __extends(MarkerView, _super);
                
                      function MarkerView() {
                        _ref = MarkerView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      MarkerView.prototype._fields = ['x', 'y', 'size'];
                
                      MarkerView.prototype.draw_legend = function(ctx, x0, x1, y0, y1) {
                        var indices, reference_point, size, sx, sy, _ref1;
                        reference_point = (_ref1 = this.get_reference_point()) != null ? _ref1 : 0;
                        indices = [reference_point];
                        sx = {};
                        sx[reference_point] = (x0 + x1) / 2;
                        sy = {};
                        sy[reference_point] = (y0 + y1) / 2;
                        size = {};
                        size[reference_point] = Math.min(Math.abs(x1 - x0), Math.abs(y1 - y0)) * 0.4;
                        return this._render(ctx, indices, this.glyph_props, sx, sy, size);
                      };
                
                      MarkerView.prototype._set_data = function() {
                        var i, pts, _i, _ref1;
                        this.max_size = _.max(this.size);
                        this.index = rbush();
                        pts = [];
                        for (i = _i = 0, _ref1 = this.x.length; 0 <= _ref1 ? _i < _ref1 : _i > _ref1; i = 0 <= _ref1 ? ++_i : --_i) {
                          if (!isNaN(this.x[i] + this.y[i])) {
                            pts.push([
                              this.x[i], this.y[i], this.x[i], this.y[i], {
                                'i': i
                              }
                            ]);
                          }
                        }
                        return this.index.load(pts);
                      };
                
                      MarkerView.prototype._map_data = function() {
                        var _ref1;
                        return _ref1 = this.plot_view.map_to_screen(this.x, this.glyph_props.x.units, this.y, this.glyph_props.y.units), this.sx = _ref1[0], this.sy = _ref1[1], _ref1;
                      };
                
                      MarkerView.prototype._mask_data = function() {
                        var hr, vr, vx0, vx1, vy0, vy1, x, x0, x1, y0, y1, _ref1, _ref2;
                        hr = this.plot_view.frame.get('h_range');
                        vx0 = hr.get('start') - this.max_size;
                        vx1 = hr.get('end') + this.max_size;
                        _ref1 = this.plot_view.xmapper.v_map_from_target([vx0, vx1]), x0 = _ref1[0], x1 = _ref1[1];
                        vr = this.plot_view.frame.get('v_range');
                        vy0 = vr.get('start') - this.max_size;
                        vy1 = vr.get('end') + this.max_size;
                        _ref2 = this.plot_view.ymapper.v_map_from_target([vy0, vy1]), y0 = _ref2[0], y1 = _ref2[1];
                        return (function() {
                          var _i, _len, _ref3, _results;
                          _ref3 = this.index.search([x0, y0, x1, y1]);
                          _results = [];
                          for (_i = 0, _len = _ref3.length; _i < _len; _i++) {
                            x = _ref3[_i];
                            _results.push(x[4].i);
                          }
                          return _results;
                        }).call(this);
                      };
                
                      MarkerView.prototype._hit_point = function(geometry) {
                        var candidates, dist, hits, i, s2, sx, sy, vx, vx0, vx1, vy, vy0, vy1, x, x0, x1, y0, y1, _i, _len, _ref1, _ref2, _ref3;
                        _ref1 = [geometry.vx, geometry.vy], vx = _ref1[0], vy = _ref1[1];
                        sx = this.plot_view.canvas.vx_to_sx(vx);
                        sy = this.plot_view.canvas.vy_to_sy(vy);
                        vx0 = vx - this.max_size;
                        vx1 = vx + this.max_size;
                        _ref2 = this.plot_view.xmapper.v_map_from_target([vx0, vx1]), x0 = _ref2[0], x1 = _ref2[1];
                        vy0 = vy - this.max_size;
                        vy1 = vy + this.max_size;
                        _ref3 = this.plot_view.ymapper.v_map_from_target([vy0, vy1]), y0 = _ref3[0], y1 = _ref3[1];
                        candidates = (function() {
                          var _i, _len, _ref4, _results;
                          _ref4 = this.index.search([x0, y0, x1, y1]);
                          _results = [];
                          for (_i = 0, _len = _ref4.length; _i < _len; _i++) {
                            x = _ref4[_i];
                            _results.push(x[4].i);
                          }
                          return _results;
                        }).call(this);
                        hits = [];
                        for (_i = 0, _len = candidates.length; _i < _len; _i++) {
                          i = candidates[_i];
                          s2 = this.size[i] / 2;
                          dist = Math.abs(this.sx[i] - sx) + Math.abs(this.sy[i] - sy);
                          if (Math.abs(this.sx[i] - sx) <= s2 && Math.abs(this.sy[i] - sy) <= s2) {
                            hits.push([i, dist]);
                          }
                        }
                        hits = _.chain(hits).sortBy(function(elt) {
                          return elt[1];
                        }).map(function(elt) {
                          return elt[0];
                        }).value();
                        return hits;
                      };
                
                      MarkerView.prototype._hit_rect = function(geometry) {
                        var x, x0, x1, y0, y1, _ref1, _ref2;
                        _ref1 = this.plot_view.xmapper.v_map_from_target([geometry.vx0, geometry.vx1]), x0 = _ref1[0], x1 = _ref1[1];
                        _ref2 = this.plot_view.ymapper.v_map_from_target([geometry.vy0, geometry.vy1]), y0 = _ref2[0], y1 = _ref2[1];
                        return (function() {
                          var _i, _len, _ref3, _results;
                          _ref3 = this.index.search([x0, y0, x1, y1]);
                          _results = [];
                          for (_i = 0, _len = _ref3.length; _i < _len; _i++) {
                            x = _ref3[_i];
                            _results.push(x[4].i);
                          }
                          return _results;
                        }).call(this);
                      };
                
                      return MarkerView;
                
                    })(Glyph.View);
                    Marker = (function(_super) {
                      __extends(Marker, _super);
                
                      function Marker() {
                        _ref1 = Marker.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      return Marker;
                
                    })(Glyph.Model);
                    return {
                      "Model": Marker,
                      "View": MarkerView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=marker.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('renderer/glyph/asterisk',["underscore", "renderer/properties", "./marker"], function(_, Properties, Marker) {
                    var Asterisk, AsteriskView, _ref, _ref1;
                    AsteriskView = (function(_super) {
                      __extends(AsteriskView, _super);
                
                      function AsteriskView() {
                        _ref = AsteriskView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      AsteriskView.prototype._properties = ['line'];
                
                      AsteriskView.prototype._render = function(ctx, indices, glyph_props, sx, sy, size) {
                        var i, r, r2, _i, _len, _results;
                        if (sx == null) {
                          sx = this.sx;
                        }
                        if (sy == null) {
                          sy = this.sy;
                        }
                        if (size == null) {
                          size = this.size;
                        }
                        _results = [];
                        for (_i = 0, _len = indices.length; _i < _len; _i++) {
                          i = indices[_i];
                          if (isNaN(sx[i] + sy[i] + size[i])) {
                            continue;
                          }
                          r = size[i] / 2;
                          r2 = r * 0.65;
                          ctx.beginPath();
                          ctx.moveTo(sx[i], sy[i] + r);
                          ctx.lineTo(sx[i], sy[i] - r);
                          ctx.moveTo(sx[i] - r, sy[i]);
                          ctx.lineTo(sx[i] + r, sy[i]);
                          ctx.moveTo(sx[i] - r2, sy[i] + r2);
                          ctx.lineTo(sx[i] + r2, sy[i] - r2);
                          ctx.moveTo(sx[i] - r2, sy[i] - r2);
                          ctx.lineTo(sx[i] + r2, sy[i] + r2);
                          if (glyph_props.line_properties.do_stroke) {
                            glyph_props.line_properties.set_vectorize(ctx, i);
                            _results.push(ctx.stroke());
                          } else {
                            _results.push(void 0);
                          }
                        }
                        return _results;
                      };
                
                      return AsteriskView;
                
                    })(Marker.View);
                    Asterisk = (function(_super) {
                      __extends(Asterisk, _super);
                
                      function Asterisk() {
                        _ref1 = Asterisk.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      Asterisk.prototype.default_view = AsteriskView;
                
                      Asterisk.prototype.type = 'Glyph';
                
                      Asterisk.prototype.display_defaults = function() {
                        return _.extend(Asterisk.__super__.display_defaults.call(this), {
                          line_color: 'red',
                          line_width: 1,
                          line_alpha: 1.0,
                          line_join: 'miter',
                          line_cap: 'butt',
                          line_dash: [],
                          line_dash_offset: 0
                        });
                      };
                
                      return Asterisk;
                
                    })(Marker.Model);
                    return {
                      "Model": Asterisk,
                      "View": AsteriskView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=asterisk.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('renderer/glyph/bezier',["underscore", "renderer/properties", "./glyph"], function(_, Properties, Glyph) {
                    var Bezier, BezierView, _ref, _ref1;
                    BezierView = (function(_super) {
                      __extends(BezierView, _super);
                
                      function BezierView() {
                        _ref = BezierView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      BezierView.prototype._fields = ['x0', 'y0', 'x1', 'y1', 'cx0', 'cy0', 'cx1', 'cy1'];
                
                      BezierView.prototype._properties = ['line'];
                
                      BezierView.prototype._map_data = function() {
                        var _ref1, _ref2, _ref3, _ref4;
                        _ref1 = this.plot_view.map_to_screen(this.x0, this.glyph_props.x0.units, this.y0, this.glyph_props.y0.units), this.sx0 = _ref1[0], this.sy0 = _ref1[1];
                        _ref2 = this.plot_view.map_to_screen(this.x1, this.glyph_props.x1.units, this.y1, this.glyph_props.y1.units), this.sx1 = _ref2[0], this.sy1 = _ref2[1];
                        _ref3 = this.plot_view.map_to_screen(this.cx0, this.glyph_props.cx0.units, this.cy0, this.glyph_props.cy0.units), this.scx0 = _ref3[0], this.scy0 = _ref3[1];
                        return _ref4 = this.plot_view.map_to_screen(this.cx1, this.glyph_props.cx1.units, this.cy1, this.glyph_props.cy1.units), this.scx1 = _ref4[0], this.scy1 = _ref4[1], _ref4;
                      };
                
                      BezierView.prototype._render = function(ctx, indices, glyph_props) {
                        var i, _i, _len, _results;
                        if (glyph_props.line_properties.do_stroke) {
                          _results = [];
                          for (_i = 0, _len = indices.length; _i < _len; _i++) {
                            i = indices[_i];
                            if (isNaN(this.sx0[i] + this.sy0[i] + this.sx1[i] + this.sy1[i] + this.scx0[i] + this.scy0[i] + this.scx1[i] + this.scy1[i])) {
                              continue;
                            }
                            ctx.beginPath();
                            ctx.moveTo(this.sx0[i], this.sy0[i]);
                            ctx.bezierCurveTo(this.scx0[i], this.scy0[i], this.scx1[i], this.scy1[i], this.sx1[i], this.sy1[i]);
                            glyph_props.line_properties.set_vectorize(ctx, i);
                            _results.push(ctx.stroke());
                          }
                          return _results;
                        }
                      };
                
                      BezierView.prototype.draw_legend = function(ctx, x0, x1, y0, y1) {
                        return this._generic_line_legend(ctx, x0, x1, y0, y1);
                      };
                
                      return BezierView;
                
                    })(Glyph.View);
                    Bezier = (function(_super) {
                      __extends(Bezier, _super);
                
                      function Bezier() {
                        _ref1 = Bezier.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      Bezier.prototype.default_view = BezierView;
                
                      Bezier.prototype.type = 'Glyph';
                
                      Bezier.prototype.display_defaults = function() {
                        return _.extend(Bezier.__super__.display_defaults.call(this), {
                          line_color: 'red',
                          line_width: 1,
                          line_alpha: 1.0,
                          line_join: 'miter',
                          line_cap: 'butt',
                          line_dash: [],
                          line_dash_offset: 0
                        });
                      };
                
                      return Bezier;
                
                    })(Glyph.Model);
                    return {
                      "Model": Bezier,
                      "View": BezierView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=bezier.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('renderer/glyph/circle',["underscore", "rbush", "renderer/properties", "./glyph"], function(_, rbush, Properties, Glyph) {
                    var Circle, CircleView, _ref, _ref1;
                    CircleView = (function(_super) {
                      __extends(CircleView, _super);
                
                      function CircleView() {
                        _ref = CircleView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      CircleView.prototype._properties = ['line', 'fill'];
                
                      CircleView.prototype.initialize = function(options) {
                        var spec;
                        spec = this.mget('glyphspec');
                        if (spec.radius != null) {
                          this._fields = ['x', 'y', 'radius'];
                        } else if (spec.size != null) {
                          this._fields = ['x', 'y', 'size'];
                        }
                        return CircleView.__super__.initialize.call(this, options);
                      };
                
                      CircleView.prototype._set_data = function() {
                        var i, pts, _i, _ref1;
                        if (this.size) {
                          this.max_radius = _.max(this.size) / 2;
                        } else {
                          this.max_radius = _.max(this.radius);
                        }
                        this.index = rbush();
                        pts = [];
                        for (i = _i = 0, _ref1 = this.x.length; 0 <= _ref1 ? _i < _ref1 : _i > _ref1; i = 0 <= _ref1 ? ++_i : --_i) {
                          if (!isNaN(this.x[i] + this.y[i])) {
                            pts.push([
                              this.x[i], this.y[i], this.x[i], this.y[i], {
                                'i': i
                              }
                            ]);
                          }
                        }
                        return this.index.load(pts);
                      };
                
                      CircleView.prototype._map_data = function() {
                        var s, _ref1;
                        _ref1 = this.plot_view.map_to_screen(this.x, this.glyph_props.x.units, this.y, this.glyph_props.y.units), this.sx = _ref1[0], this.sy = _ref1[1];
                        if (this.size) {
                          this.radius = (function() {
                            var _i, _len, _ref2, _results;
                            _ref2 = this.distance_vector('x', 'size', 'edge');
                            _results = [];
                            for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
                              s = _ref2[_i];
                              _results.push(s / 2);
                            }
                            return _results;
                          }).call(this);
                          return this.radius_units = this.glyph_props.size.units;
                        } else {
                          return this.radius = this.distance_vector('x', 'radius', 'edge');
                        }
                      };
                
                      CircleView.prototype._mask_data = function() {
                        var hr, sx0, sx1, sy0, sy1, vr, x, x0, x1, y0, y1, _ref1, _ref2, _ref3, _ref4;
                        hr = this.plot_view.frame.get('h_range');
                        vr = this.plot_view.frame.get('v_range');
                        if (this.radius_units === "screen") {
                          sx0 = hr.get('start') - this.max_radius;
                          sx1 = hr.get('end') - this.max_radius;
                          _ref1 = this.plot_view.xmapper.v_map_from_target([sx0, sx1]), x0 = _ref1[0], x1 = _ref1[1];
                          sy0 = vr.get('start') - this.max_radius;
                          sy1 = vr.get('end') - this.max_radius;
                          _ref2 = this.plot_view.ymapper.v_map_from_target([sy0, sy1]), y0 = _ref2[0], y1 = _ref2[1];
                        } else {
                          sx0 = hr.get('start');
                          sx1 = hr.get('end');
                          _ref3 = this.plot_view.xmapper.v_map_from_target([sx0, sx1]), x0 = _ref3[0], x1 = _ref3[1];
                          x0 -= this.max_radius;
                          x1 += this.max_radius;
                          sy0 = vr.get('start');
                          sy1 = vr.get('end');
                          _ref4 = this.plot_view.ymapper.v_map_from_target([sy0, sy1]), y0 = _ref4[0], y1 = _ref4[1];
                          y0 -= this.max_radius;
                          y1 += this.max_radius;
                        }
                        return (function() {
                          var _i, _len, _ref5, _results;
                          _ref5 = this.index.search([x0, y0, x1, y1]);
                          _results = [];
                          for (_i = 0, _len = _ref5.length; _i < _len; _i++) {
                            x = _ref5[_i];
                            _results.push(x[4].i);
                          }
                          return _results;
                        }).call(this);
                      };
                
                      CircleView.prototype._render = function(ctx, indices, glyph_props, sx, sy, radius) {
                        var i, _i, _len, _results;
                        if (sx == null) {
                          sx = this.sx;
                        }
                        if (sy == null) {
                          sy = this.sy;
                        }
                        if (radius == null) {
                          radius = this.radius;
                        }
                        _results = [];
                        for (_i = 0, _len = indices.length; _i < _len; _i++) {
                          i = indices[_i];
                          if (isNaN(sx[i] + sy[i] + radius[i])) {
                            continue;
                          }
                          ctx.beginPath();
                          ctx.arc(sx[i], sy[i], radius[i], 0, 2 * Math.PI, false);
                          if (glyph_props.fill_properties.do_fill) {
                            glyph_props.fill_properties.set_vectorize(ctx, i);
                            ctx.fill();
                          }
                          if (glyph_props.line_properties.do_stroke) {
                            glyph_props.line_properties.set_vectorize(ctx, i);
                            _results.push(ctx.stroke());
                          } else {
                            _results.push(void 0);
                          }
                        }
                        return _results;
                      };
                
                      CircleView.prototype._hit_point = function(geometry) {
                        var candidates, dist, hits, i, pt, r2, sx, sx0, sx1, sy, sy0, sy1, vx, vx0, vx1, vy, vy0, vy1, x, x0, x1, y, y0, y1, _i, _j, _len, _len1, _ref1, _ref2, _ref3;
                        _ref1 = [geometry.vx, geometry.vy], vx = _ref1[0], vy = _ref1[1];
                        x = this.plot_view.xmapper.map_from_target(vx);
                        y = this.plot_view.ymapper.map_from_target(vy);
                        if (this.radius_units === "screen") {
                          vx0 = vx - this.max_radius;
                          vx1 = vx + this.max_radius;
                          _ref2 = this.plot_view.xmapper.v_map_from_target([vx0, vx1]), x0 = _ref2[0], x1 = _ref2[1];
                          vy0 = vy - this.max_radius;
                          vy1 = vy + this.max_radius;
                          _ref3 = this.plot_view.ymapper.v_map_from_target([vy0, vy1]), y0 = _ref3[0], y1 = _ref3[1];
                        } else {
                          x0 = x - this.max_radius;
                          x1 = x + this.max_radius;
                          y0 = y - this.max_radius;
                          y1 = y + this.max_radius;
                        }
                        candidates = (function() {
                          var _i, _len, _ref4, _results;
                          _ref4 = this.index.search([x0, y0, x1, y1]);
                          _results = [];
                          for (_i = 0, _len = _ref4.length; _i < _len; _i++) {
                            pt = _ref4[_i];
                            _results.push(pt[4].i);
                          }
                          return _results;
                        }).call(this);
                        hits = [];
                        if (this.radius_units === "screen") {
                          sx = this.plot_view.canvas.vx_to_sx(vx);
                          sy = this.plot_view.canvas.vy_to_sy(vy);
                          for (_i = 0, _len = candidates.length; _i < _len; _i++) {
                            i = candidates[_i];
                            r2 = Math.pow(this.radius[i], 2);
                            dist = Math.pow(this.sx[i] - sx, 2) + Math.pow(this.sy[i] - sy, 2);
                            if (dist <= r2) {
                              hits.push([i, dist]);
                            }
                          }
                        } else {
                          for (_j = 0, _len1 = candidates.length; _j < _len1; _j++) {
                            i = candidates[_j];
                            r2 = Math.pow(this.radius[i], 2);
                            sx0 = this.plot_view.xmapper.map_to_target(x);
                            sx1 = this.plot_view.xmapper.map_to_target(this.x[i]);
                            sy0 = this.plot_view.ymapper.map_to_target(y);
                            sy1 = this.plot_view.ymapper.map_to_target(this.y[i]);
                            dist = Math.pow(sx0 - sx1, 2) + Math.pow(sy0 - sy1, 2);
                            if (dist <= r2) {
                              hits.push([i, dist]);
                            }
                          }
                        }
                        hits = _.chain(hits).sortBy(function(elt) {
                          return elt[1];
                        }).map(function(elt) {
                          return elt[0];
                        }).value();
                        return hits;
                      };
                
                      CircleView.prototype._hit_rect = function(geometry) {
                        var x, x0, x1, y0, y1, _ref1, _ref2;
                        _ref1 = this.plot_view.xmapper.v_map_from_target([geometry.vx0, geometry.vx1]), x0 = _ref1[0], x1 = _ref1[1];
                        _ref2 = this.plot_view.ymapper.v_map_from_target([geometry.vy0, geometry.vy1]), y0 = _ref2[0], y1 = _ref2[1];
                        return (function() {
                          var _i, _len, _ref3, _results;
                          _ref3 = this.index.search([x0, y0, x1, y1]);
                          _results = [];
                          for (_i = 0, _len = _ref3.length; _i < _len; _i++) {
                            x = _ref3[_i];
                            _results.push(x[4].i);
                          }
                          return _results;
                        }).call(this);
                      };
                
                      CircleView.prototype.draw_legend = function(ctx, x0, x1, y0, y1) {
                        var indices, radius, reference_point, sx, sy, _ref1;
                        reference_point = (_ref1 = this.get_reference_point()) != null ? _ref1 : 0;
                        indices = [reference_point];
                        sx = {};
                        sx[reference_point] = (x0 + x1) / 2;
                        sy = {};
                        sy[reference_point] = (y0 + y1) / 2;
                        radius = {};
                        radius[reference_point] = Math.min(Math.abs(x1 - x0), Math.abs(y1 - y0)) * 0.2;
                        return this._render(ctx, indices, this.glyph_props, sx, sy, radius);
                      };
                
                      return CircleView;
                
                    })(Glyph.View);
                    Circle = (function(_super) {
                      __extends(Circle, _super);
                
                      function Circle() {
                        _ref1 = Circle.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      Circle.prototype.default_view = CircleView;
                
                      Circle.prototype.type = 'Glyph';
                
                      Circle.prototype.display_defaults = function() {
                        return _.extend(Circle.__super__.display_defaults.call(this), {
                          radius_units: 'data',
                          size_units: 'screen',
                          fill_color: 'gray',
                          fill_alpha: 1.0,
                          line_color: 'red',
                          line_width: 1,
                          line_alpha: 1.0,
                          line_join: 'miter',
                          line_cap: 'butt',
                          line_dash: [],
                          line_dash_offset: 0
                        });
                      };
                
                      return Circle;
                
                    })(Glyph.Model);
                    return {
                      "Model": Circle,
                      "View": CircleView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=circle.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('renderer/glyph/circle_x',["underscore", "renderer/properties", "./marker"], function(_, Properties, Marker) {
                    var CircleX, CircleXView, _ref, _ref1;
                    CircleXView = (function(_super) {
                      __extends(CircleXView, _super);
                
                      function CircleXView() {
                        _ref = CircleXView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      CircleXView.prototype._properties = ['line', 'fill'];
                
                      CircleXView.prototype._render = function(ctx, indices, glyph_props, sx, sy, size) {
                        var i, r, _i, _len, _results;
                        if (sx == null) {
                          sx = this.sx;
                        }
                        if (sy == null) {
                          sy = this.sy;
                        }
                        if (size == null) {
                          size = this.size;
                        }
                        _results = [];
                        for (_i = 0, _len = indices.length; _i < _len; _i++) {
                          i = indices[_i];
                          if (isNaN(sx[i] + sy[i] + size[i])) {
                            continue;
                          }
                          ctx.beginPath();
                          r = size[i] / 2;
                          ctx.arc(sx[i], sy[i], r, 0, 2 * Math.PI, false);
                          if (glyph_props.fill_properties.do_fill) {
                            glyph_props.fill_properties.set_vectorize(ctx, i);
                            ctx.fill();
                          }
                          if (glyph_props.line_properties.do_stroke) {
                            glyph_props.line_properties.set_vectorize(ctx, i);
                            ctx.moveTo(sx[i] - r, sy[i] + r);
                            ctx.lineTo(sx[i] + r, sy[i] - r);
                            ctx.moveTo(sx[i] - r, sy[i] - r);
                            ctx.lineTo(sx[i] + r, sy[i] + r);
                            _results.push(ctx.stroke());
                          } else {
                            _results.push(void 0);
                          }
                        }
                        return _results;
                      };
                
                      return CircleXView;
                
                    })(Marker.View);
                    CircleX = (function(_super) {
                      __extends(CircleX, _super);
                
                      function CircleX() {
                        _ref1 = CircleX.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      CircleX.prototype.default_view = CircleXView;
                
                      CircleX.prototype.type = 'Glyph';
                
                      CircleX.prototype.display_defaults = function() {
                        return _.extend(CircleX.__super__.display_defaults.call(this), {
                          fill_color: 'gray',
                          fill_alpha: 1.0,
                          line_color: 'red',
                          line_width: 1,
                          line_alpha: 1.0,
                          line_join: 'miter',
                          line_cap: 'butt',
                          line_dash: [],
                          line_dash_offset: 0
                        });
                      };
                
                      return CircleX;
                
                    })(Marker.Model);
                    return {
                      "Model": CircleX,
                      "View": CircleXView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=circle_x.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('renderer/glyph/circle_cross',["underscore", "renderer/properties", "./marker"], function(_, Properties, Marker) {
                    var CircleCross, CircleCrossView, _ref, _ref1;
                    CircleCrossView = (function(_super) {
                      __extends(CircleCrossView, _super);
                
                      function CircleCrossView() {
                        _ref = CircleCrossView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      CircleCrossView.prototype._properties = ['line', 'fill'];
                
                      CircleCrossView.prototype._render = function(ctx, indices, glyph_props, sx, sy, size) {
                        var i, r, _i, _len, _results;
                        if (sx == null) {
                          sx = this.sx;
                        }
                        if (sy == null) {
                          sy = this.sy;
                        }
                        if (size == null) {
                          size = this.size;
                        }
                        _results = [];
                        for (_i = 0, _len = indices.length; _i < _len; _i++) {
                          i = indices[_i];
                          if (isNaN(sx[i] + sy[i] + size[i])) {
                            continue;
                          }
                          ctx.beginPath();
                          r = size[i] / 2;
                          ctx.arc(sx[i], sy[i], r, 0, 2 * Math.PI, false);
                          if (glyph_props.fill_properties.do_fill) {
                            glyph_props.fill_properties.set_vectorize(ctx, i);
                            ctx.fill();
                          }
                          if (glyph_props.line_properties.do_stroke) {
                            glyph_props.line_properties.set_vectorize(ctx, i);
                            ctx.moveTo(sx[i], sy[i] + r);
                            ctx.lineTo(sx[i], sy[i] - r);
                            ctx.moveTo(sx[i] - r, sy[i]);
                            ctx.lineTo(sx[i] + r, sy[i]);
                            _results.push(ctx.stroke());
                          } else {
                            _results.push(void 0);
                          }
                        }
                        return _results;
                      };
                
                      return CircleCrossView;
                
                    })(Marker.View);
                    CircleCross = (function(_super) {
                      __extends(CircleCross, _super);
                
                      function CircleCross() {
                        _ref1 = CircleCross.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      CircleCross.prototype.default_view = CircleCrossView;
                
                      CircleCross.prototype.type = 'Glyph';
                
                      CircleCross.prototype.display_defaults = function() {
                        return _.extend(CircleCross.__super__.display_defaults.call(this), {
                          fill_color: 'gray',
                          fill_alpha: 1.0,
                          line_color: 'red',
                          line_width: 1,
                          line_alpha: 1.0,
                          line_join: 'miter',
                          line_cap: 'butt',
                          line_dash: [],
                          line_dash_offset: 0
                        });
                      };
                
                      return CircleCross;
                
                    })(Marker.Model);
                    return {
                      "Model": CircleCross,
                      "View": CircleCrossView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=circle_cross.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('renderer/glyph/diamond',["underscore", "renderer/properties", "./marker"], function(_, Properties, Marker) {
                    var Diamond, DiamondView, _ref, _ref1;
                    DiamondView = (function(_super) {
                      __extends(DiamondView, _super);
                
                      function DiamondView() {
                        _ref = DiamondView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      DiamondView.prototype._properties = ['line', 'fill'];
                
                      DiamondView.prototype._render = function(ctx, indices, glyph_props, sx, sy, size) {
                        var i, r, _i, _len, _results;
                        if (sx == null) {
                          sx = this.sx;
                        }
                        if (sy == null) {
                          sy = this.sy;
                        }
                        if (size == null) {
                          size = this.size;
                        }
                        _results = [];
                        for (_i = 0, _len = indices.length; _i < _len; _i++) {
                          i = indices[_i];
                          if (isNaN(sx[i] + sy[i] + size[i])) {
                            continue;
                          }
                          r = size[i] / 2;
                          ctx.beginPath();
                          ctx.moveTo(sx[i], sy[i] + r);
                          ctx.lineTo(sx[i] + r, sy[i]);
                          ctx.lineTo(sx[i], sy[i] - r);
                          ctx.lineTo(sx[i] - r, sy[i]);
                          ctx.closePath();
                          if (glyph_props.fill_properties.do_fill) {
                            glyph_props.fill_properties.set_vectorize(ctx, i);
                            ctx.fill();
                          }
                          if (glyph_props.line_properties.do_stroke) {
                            glyph_props.line_properties.set_vectorize(ctx, i);
                            _results.push(ctx.stroke());
                          } else {
                            _results.push(void 0);
                          }
                        }
                        return _results;
                      };
                
                      return DiamondView;
                
                    })(Marker.View);
                    Diamond = (function(_super) {
                      __extends(Diamond, _super);
                
                      function Diamond() {
                        _ref1 = Diamond.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      Diamond.prototype.default_view = DiamondView;
                
                      Diamond.prototype.type = 'Glyph';
                
                      Diamond.prototype.display_defaults = function() {
                        return _.extend(Diamond.__super__.display_defaults.call(this), {
                          fill_color: 'gray',
                          fill_alpha: 1.0,
                          line_color: 'red',
                          line_width: 1,
                          line_alpha: 1.0,
                          line_join: 'miter',
                          line_cap: 'butt',
                          line_dash: [],
                          line_dash_offset: 0
                        });
                      };
                
                      return Diamond;
                
                    })(Marker.Model);
                    return {
                      "Model": Diamond,
                      "View": DiamondView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=diamond.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('renderer/glyph/diamond_cross',["underscore", "renderer/properties", "./marker"], function(_, Properties, Marker) {
                    var DiamondCross, DiamondCrossView, _ref, _ref1;
                    DiamondCrossView = (function(_super) {
                      __extends(DiamondCrossView, _super);
                
                      function DiamondCrossView() {
                        _ref = DiamondCrossView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      DiamondCrossView.prototype._properties = ['line', 'fill'];
                
                      DiamondCrossView.prototype._render = function(ctx, indices, glyph_props, sx, sy, size) {
                        var i, r, _i, _len, _results;
                        if (sx == null) {
                          sx = this.sx;
                        }
                        if (sy == null) {
                          sy = this.sy;
                        }
                        if (size == null) {
                          size = this.size;
                        }
                        _results = [];
                        for (_i = 0, _len = indices.length; _i < _len; _i++) {
                          i = indices[_i];
                          if (isNaN(sx[i] + sy[i] + size[i])) {
                            continue;
                          }
                          r = size[i] / 2;
                          ctx.beginPath();
                          ctx.moveTo(sx[i], sy[i] + r);
                          ctx.lineTo(sx[i] + r, sy[i]);
                          ctx.lineTo(sx[i], sy[i] - r);
                          ctx.lineTo(sx[i] - r, sy[i]);
                          ctx.closePath();
                          if (glyph_props.fill_properties.do_fill) {
                            glyph_props.fill_properties.set_vectorize(ctx, i);
                            ctx.fill();
                          }
                          if (glyph_props.line_properties.do_stroke) {
                            glyph_props.line_properties.set_vectorize(ctx, i);
                            ctx.moveTo(sx[i], sy[i] + r);
                            ctx.lineTo(sx[i], sy[i] - r);
                            ctx.moveTo(sx[i] - r, sy[i]);
                            ctx.lineTo(sx[i] + r, sy[i]);
                            _results.push(ctx.stroke());
                          } else {
                            _results.push(void 0);
                          }
                        }
                        return _results;
                      };
                
                      return DiamondCrossView;
                
                    })(Marker.View);
                    DiamondCross = (function(_super) {
                      __extends(DiamondCross, _super);
                
                      function DiamondCross() {
                        _ref1 = DiamondCross.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      DiamondCross.prototype.default_view = DiamondCrossView;
                
                      DiamondCross.prototype.type = 'Glyph';
                
                      DiamondCross.prototype.display_defaults = function() {
                        return _.extend(DiamondCross.__super__.display_defaults.call(this), {
                          fill_color: 'gray',
                          fill_alpha: 1.0,
                          line_color: 'red',
                          line_width: 1,
                          line_alpha: 1.0,
                          line_join: 'miter',
                          line_cap: 'butt',
                          line_dash: [],
                          line_dash_offset: 0
                        });
                      };
                
                      return DiamondCross;
                
                    })(Marker.Model);
                    return {
                      "Model": DiamondCross,
                      "View": DiamondCrossView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=diamond_cross.js.map
                */;
                define('gear_utils',[],function() {
                /*==========================================================================*
                  Filename: gearUtils-04.js
                  By: Dr A.R.Collins
                
                  JavaScript involute gear drawing utilities.
                  Requires:
                  'involuteBezCoeffs' can stand alone,
                  'createGearTooth' and 'createIntGearTooth' generate draw commands for use
                  in Cango graphics library but may be simply converted for use in SVG.
                
                  Kindly give credit to Dr A.R.Collins <http://www.arc.id.au/>
                  Report bugs to tony at arc.id.au
                
                  Date   |Description                                                   |By
                  --------------------------------------------------------------------------
                  20Feb13 First public release                                           ARC
                  21Feb13 Clarified variable names of start and end parameters           ARC
                  06Mar13 Fixed Rf and filletAngle calculations                          ARC
                  25Jun13 Code tidy for JSLint, use strict                               ARC
                 *==========================================================================*/
                
                  // exposed globals
                  var involuteBezCoeffs, createGearTooth, createIntGearTooth;
                
                (function()
                {
                  
                /* ----------------------------------------------------------
                 * involuteBezCoeffs
                 *
                 * JavaScript calculation of Bezier coefficients for
                 * Higuchi et al. approximation to an involute.
                 * ref: YNU Digital Eng Lab Memorandum 05-1
                 *
                 * Parameters:
                 * module - sets the size of teeth (see gear design texts)
                 * numTeeth - number of teeth on the gear
                 * pressure angle - angle in degrees, usually 14.5 or 20
                 * order - the order of the Bezier curve to be fitted [3, 4, 5, ..]
                 * fstart - fraction of distance along tooth profile to start
                 * fstop - fraction of distance along profile to stop
                 *-----------------------------------------------------------*/
                involuteBezCoeffs = function(module, numTeeth, pressureAngle, order, fstart, fstop)
                {
                  var PI = Math.PI,
                      Rpitch = module*numTeeth/2,       // pitch circle radius
                      phi = pressureAngle || 20,        // pressure angle
                      Rb = Rpitch*Math.cos(phi*PI/180), // base circle radius
                      Ra = Rpitch+module,               // addendum radius (outer radius)
                      p = order || 3,                   // order of Bezier approximation
                      ta = Math.sqrt(Ra*Ra-Rb*Rb)/Rb,   // involute angle at addendum
                      stop = fstop || 1,
                      start = 0.01,
                      te, ts,
                      bzCoeffs = [],
                      i, bcoeff;
                
                  function chebyExpnCoeffs(j, func)
                  {
                    var N = 50,      // a suitably large number  N>>p
                        c = 0,
                        k;
                
                    for (k=1; k<=N; k++)
                    {
                      c += func(Math.cos(PI*(k-0.5)/N)) * Math.cos(PI*j*(k-0.5)/N);
                    }
                    return 2*c/N;
                  }
                
                  function chebyPolyCoeffs(p, func)
                  {
                    var coeffs = [],
                        fnCoeff = [],
                        T = [[], []],
                        i, j, k, pwr;
                
                    // populate 1st 2 rows of T
                    for (i=0; i<p+1; i++)
                    {
                      T[0][i] = 0;
                      T[1][i] = 0;
                    }
                    T[0][0] = 1;
                    T[1][1] = 1;
                    /* now generate the Chebyshev polynomial coefficient using
                       formula T(k+1) = 2xT(k) - T(k-1) which yields
                    T = [ [ 1,  0,  0,  0,  0,  0],    // T0(x) =  +1
                          [ 0,  1,  0,  0,  0,  0],    // T1(x) =   0  +x
                          [-1,  0,  2,  0,  0,  0],    // T2(x) =  -1  0  +2xx
                          [ 0, -3,  0,  4,  0,  0],    // T3(x) =   0 -3x    0   +4xxx
                          [ 1,  0, -8,  0,  8,  0],    // T4(x) =  +1  0  -8xx       0  +8xxxx
                          [ 0,  5,  0,-20,  0, 16],    // T5(x) =   0  5x    0  -20xxx       0  +16xxxxx
                          ...                     ];
                    */
                    for (k=1; k<p+1; k++)
                    {
                      T[k+1] = [0];
                      for (j=0; j<T[k].length-1; j++)
                      {
                        T[k+1][j+1] = 2*T[k][j];
                      }
                      for (j=0; j<T[k-1].length; j++)
                      {
                        T[k+1][j] -= T[k-1][j];
                      }
                    }
                    // convert the chebyshev function series into a simple polynomial
                    // and collect like terms, out T polynomial coefficients
                    for (k=0; k<=p; k++)
                    {
                      fnCoeff[k] = chebyExpnCoeffs(k, func);
                      coeffs[k] = 0;
                    }
                    for (k=0; k<=p; k++)
                    {
                      for (pwr=0; pwr<=p; pwr++)    // loop thru powers of x
                      {
                        coeffs[pwr] += fnCoeff[k]*T[k][pwr];
                      }
                    }
                    coeffs[0] -= chebyExpnCoeffs(0, func)/2;  // fix the 0th coeff
                
                    return coeffs;
                  }
                
                  // Equation of involute using the Bezier parameter t as variable
                  function involuteXbez(t)
                  {
                    // map t (0 <= t <= 1) onto x (where -1 <= x <= 1)
                    var x = t*2-1;
                    //map theta (where ts <= theta <= te) from x (-1 <=x <= 1)
                    var theta = x*(te-ts)/2 + (ts + te)/2;
                    return Rb*(Math.cos(theta)+theta*Math.sin(theta));
                  }
                
                  function involuteYbez(t)
                  {
                    // map t (0 <= t <= 1) onto x (where -1 <= x <= 1)
                    var x = t*2-1;
                    //map theta (where ts <= theta <= te) from x (-1 <=x <= 1)
                    var theta = x*(te-ts)/2 + (ts + te)/2;
                    return Rb*(Math.sin(theta)-theta*Math.cos(theta));
                  }
                
                  function binom(n, k)
                  {
                    var coeff = 1;
                    var i;
                    for (i = n-k+1; i <= n; i++)
                    {
                      coeff *= i;
                    }
                    for (i = 1; i <= k; i++)
                    {
                      coeff /= i;
                    }
                
                    return coeff;
                  }
                
                  function bezCoeff(i, func)
                  {
                    // generate the polynomial coeffs in one go
                    var polyCoeffs = chebyPolyCoeffs(p, func),
                        bc, j;
                
                    for (bc=0, j=0; j<=i; j++)
                    {
                      bc += binom(i,j)*polyCoeffs[j]/binom(p,j);
                    }
                    return bc;
                  }
                
                  if ((fstart !== undefined)&&(fstart<stop))
                  {
                    start = fstart;
                  }
                  te = Math.sqrt(stop)*ta;          // involute angle, theta, at end of approx
                  ts = Math.sqrt(start)*ta;         // involute angle, theta, at start of approx
                  // calc Bezier coeffs
                  for (i=0; i<=p; i++)
                  {
                    bcoeff = {};
                    bcoeff.x = bezCoeff(i, involuteXbez);
                    bcoeff.y = bezCoeff(i, involuteYbez);
                    bzCoeffs.push(bcoeff);
                  }
                
                  return bzCoeffs;
                };
                
                /*----------------------------------------------------------
                  createGearTooth
                  Create an array of drawing commands and their coordinates
                  to draw a single spur gear tooth based on a circle
                  involute using the metric gear standards.
                
                  Requires Cango graphics library Rev 2.08 or later
                 ----------------------------------------------------------*/
                createGearTooth = function(module, teeth, pressureAngle)
                {
                  function genInvolutePolar(Rb, R)  // Rb = base circle radius
                  {
                    // returns the involute angle as function of radius R.
                    return (Math.sqrt(R*R - Rb*Rb)/Rb) - Math.acos(Rb/R);
                  }
                
                  function rotate(pt, rads)  // rotate pt by rads radians about origin
                  {
                    var sinA = Math.sin(rads);
                    var cosA = Math.cos(rads);
                    return {x: pt.x*cosA - pt.y*sinA,
                            y: pt.x*sinA + pt.y*cosA};
                  }
                
                  function toCartesian(radius, angle)   // convert polar coords to cartesian
                  {
                    return {x: radius*Math.cos(angle),
                            y: radius*Math.sin(angle)};
                  }
                  // ****** external gear specifications
                  var m = module,                                     // Module = mm of pitch diameter per tooth
                      Z = teeth,                                      // Number of teeth
                      phi = pressureAngle || 20,                      // pressure angle (degrees)
                      addendum = m,                                   // distance from pitch circle to tip circle
                      dedendum = 1.25*m,                              // pitch circle to root, sets clearance
                      clearance = dedendum - addendum,
                      // Calculate radii
                      Rpitch = Z*m/2,                                 // pitch circle radius
                      Rb = Rpitch*Math.cos(phi*Math.PI/180),          // base circle radius
                      Ra = Rpitch + addendum,                         // tip (addendum) circle radius
                      Rroot = Rpitch - dedendum,                      // root circle radius
                      fRad = 1.5*clearance,                           // fillet radius, max 1.5*clearance
                      Rf,                                             // radius at top of fillet
                      // ****** calculate angles (all in radians)
                      pitchAngle = 2*Math.PI/Z,                       // angle subtended by whole tooth (rads)
                      baseToPitchAngle = genInvolutePolar(Rb, Rpitch),
                      pitchToFilletAngle = baseToPitchAngle,          // profile starts at base circle
                      filletAngle = Math.atan(fRad/(fRad+Rroot)),     // radians
                      fe, fs, fm,
                      dedBz, addBz, inv, invR,
                      fillet, filletR, filletNext,
                      rootR, rootNext,
                      pt, i, data;
                
                  Rf = Math.sqrt((Rroot+fRad)*(Rroot+fRad)-(fRad*fRad)); // radius at top of fillet
                  if (Rb < Rf)
                  {
                    Rf = Rroot+clearance;
                  }
                  if (Rf > Rb)                   // start profile at top of fillet (if its greater)
                  {
                    pitchToFilletAngle -= genInvolutePolar(Rb, Rf);
                  }
                  // ****** generate Higuchi involute approximation
                  fe = 1;                    // fraction of profile length at end of approx
                  fs = 0.01;                 // fraction of length offset from base to avoid singularity
                  if (Rf > Rb)
                  {
                    fs = (Rf*Rf-Rb*Rb)/(Ra*Ra-Rb*Rb);  // offset start to top of fillet
                  }
                  // approximate in 2 sections, split 25% along the involute
                  fm = fs+(fe-fs)/4;         // fraction of length at junction (25% along profile)
                  dedBz = involuteBezCoeffs(m, Z, phi, 3, fs, fm);
                  addBz = involuteBezCoeffs(m, Z, phi, 3, fm, fe);
                  // join the 2 sets of coeffs (skip duplicate mid point)
                  inv = dedBz.concat(addBz.slice(1));
                  //create the back profile of tooth (mirror image)
                  invR = [];                // involute profile along back of tooth
                  for (i=0; i<inv.length; i++)
                  {
                    // rotate all points to put pitch point at y = 0
                    pt = rotate(inv[i], -baseToPitchAngle-pitchAngle/4);
                    inv[i] = pt;
                    // generate the back of tooth profile nodes, mirror coords in X axis
                    invR[i] = {x:pt.x, y:-pt.y};
                  }
                  // ****** calculate section junction points R=back of tooth, Next=front of next tooth)
                  fillet = toCartesian(Rf, -pitchAngle/4-pitchToFilletAngle); // top of fillet
                  filletR = {x:fillet.x, y:-fillet.y};   // flip to make same point on back of tooth
                  rootR = toCartesian(Rroot, pitchAngle/4+pitchToFilletAngle+filletAngle);
                  rootNext = toCartesian(Rroot, 3*pitchAngle/4-pitchToFilletAngle-filletAngle);
                  filletNext = rotate(fillet, pitchAngle);  // top of fillet, front of next tooth
                  // ****** create the drawing command data array for the tooth
                  data = [];
                  data.push("M", fillet.x, fillet.y);           // start at top of fillet
                  if (Rf < Rb)
                  {
                    data.push("L", inv[0].x, inv[0].y);         // line from fillet up to base circle
                  }
                  data.push("C", inv[1].x, inv[1].y, inv[2].x, inv[2].y, inv[3].x, inv[3].y,
                                 inv[4].x, inv[4].y, inv[5].x, inv[5].y, inv[6].x, inv[6].y);
                  data.push("A", Ra, Ra, 0, 0, 0, invR[6].x, invR[6].y); // arc across addendum circle
                  data.push("C", invR[5].x, invR[5].y, invR[4].x, invR[4].y, invR[3].x, invR[3].y,
                                 invR[2].x, invR[2].y, invR[1].x, invR[1].y, invR[0].x, invR[0].y);
                  if (Rf < Rb)
                  {
                    data.push("L", filletR.x, filletR.y);       // line down to top of fillet
                  }
                  if (rootNext.y > rootR.y)    // is there a section of root circle between fillets?
                  {
                    data.push("A", fRad, fRad, 0, 0, 1, rootR.x, rootR.y);// back fillet
                    data.push("A", Rroot, Rroot, 0, 0, 0, rootNext.x, rootNext.y); // root circle arc
                  }
                  data.push("A", fRad, fRad, 0, 0, 1, filletNext.x, filletNext.y);
                
                  return data;  // return an array of Cango (SVG) format draw commands
                };
                
                /*----------------------------------------------------------
                  createIntGearTooth
                  Create an array of drawing commands and their coordinates
                  to draw a single internal (ring)gear tooth based on a
                  circle involute using the metric gear standards.
                
                  Requires Cango graphics library Rev 2.08 or later
                 ----------------------------------------------------------*/
                createIntGearTooth = function(module, teeth, pressureAngle)
                {
                  // ****** gear specifications
                  var m = module,                               // Module = mm of pitch diameter per tooth
                      Z = teeth,                                // Number of teeth
                      phi = pressureAngle || 20,                // pressure angle (degrees)
                      addendum = 0.6*m,                         // pitch circle to tip circle (ref G.M.Maitra)
                      dedendum = 1.25*m,                        // pitch circle to root radius, sets clearance
                      // Calculate radii
                      Rpitch = Z*m/2,                           // pitch radius
                      Rb = Rpitch*Math.cos(phi*Math.PI/180),    // base radius
                      Ra = Rpitch - addendum,                   // addendum radius
                      Rroot = Rpitch + dedendum,                // root radius
                      clearance = 0.25*m,                       // gear dedendum - pinion addendum
                      Rf = Rroot - clearance,                   // radius of top of fillet (end of profile)
                      fRad = 1.5*clearance,                     // fillet radius, 1 .. 1.5*clearance
                      pitchAngle,                               // angle between teeth (rads)
                      baseToPitchAngle,
                      tipToPitchAngle,
                      pitchToFilletAngle,
                      filletAngle,
                      fe, fs, fm,
                      addBz, dedBz,
                      inv, invR,
                      pt, i, data,
                      fillet, filletNext,
                      tip, tipR,
                      rootR, rootNext;
                
                  function genInvolutePolar(Rb, R)  // Rb = base circle radius
                  {
                    // returns the involute angle as function of radius R.
                    return (Math.sqrt(R*R - Rb*Rb)/Rb) - Math.acos(Rb/R);
                  }
                
                  function rotate(pt, rads)  // rotate pt by rads radians about origin
                  {
                    var sinA = Math.sin(rads);
                    var cosA = Math.cos(rads);
                    return {x: pt.x*cosA - pt.y*sinA,
                            y: pt.x*sinA + pt.y*cosA};
                  }
                
                  function toCartesian(radius, angle)   // convert polar coords to cartesian
                  {
                    return {x: radius*Math.cos(angle),
                            y: radius*Math.sin(angle)};
                  }
                
                  // ****** calculate subtended angles
                  pitchAngle = 2*Math.PI/Z;                       // angle between teeth (rads)
                  baseToPitchAngle = genInvolutePolar(Rb, Rpitch);
                  tipToPitchAngle = baseToPitchAngle;             // profile starts from base circle
                  if (Ra > Rb)
                  {
                    tipToPitchAngle -= genInvolutePolar(Rb, Ra);  // start profile from addendum
                  }
                  pitchToFilletAngle = genInvolutePolar(Rb, Rf) - baseToPitchAngle;
                  filletAngle = 1.414*clearance/Rf;               // to make fillet tangential to root
                  // ****** generate Higuchi involute approximation
                  fe = 1;                   // fraction of involute length at end of approx (fillet circle)
                  fs = 0.01;                 // fraction of length offset from base to avoid singularity
                  if (Ra > Rb)
                  {
                    fs = (Ra*Ra-Rb*Rb)/(Rf*Rf-Rb*Rb);    // start profile from addendum (tip circle)
                  }
                  // approximate in 2 sections, split 25% along the profile
                  fm = fs+(fe-fs)/4;        //
                  addBz = involuteBezCoeffs(m, Z, phi, 3, fs, fm);
                  dedBz = involuteBezCoeffs(m, Z, phi, 3, fm, fe);
                  // join the 2 sets of coeffs (skip duplicate mid point)
                  invR = addBz.concat(dedBz.slice(1));
                  //create the front profile of tooth (mirror image)
                  inv = [];         // back involute profile
                  for (i=0; i<invR.length; i++)
                  {
                    // rotate involute to put center of tooth at y = 0
                    pt = rotate(invR[i], pitchAngle/4-baseToPitchAngle);
                    invR[i] = pt;
                    // generate the back of tooth profile, flip Y coords
                    inv[i] = {x:pt.x, y:-pt.y};
                  }
                  // ****** calculate coords of section junctions
                  fillet = {x:inv[6].x, y:inv[6].y};    // top of fillet, front of tooth
                  tip = toCartesian(Ra, -pitchAngle/4+tipToPitchAngle);  // tip, front of tooth
                  tipR = {x:tip.x, y:-tip.y};  // addendum, back of tooth
                  rootR = toCartesian(Rroot, pitchAngle/4+pitchToFilletAngle+filletAngle);
                  rootNext = toCartesian(Rroot, 3*pitchAngle/4-pitchToFilletAngle-filletAngle);
                  filletNext = rotate(fillet, pitchAngle);  // top of fillet, front of next tooth
                  // ****** create the drawing command data array for the tooth
                  data = [];
                  data.push("M", inv[6].x, inv[6].y);  // start at top of front profile
                  data.push("C", inv[5].x, inv[5].y, inv[4].x, inv[4].y, inv[3].x, inv[3].y,
                                 inv[2].x, inv[2].y, inv[1].x, inv[1].y, inv[0].x, inv[0].y);
                  if (Ra < Rb)
                  {
                    data.push("L", tip.x, tip.y);  // line from end of involute to addendum (tip)
                  }
                  data.push("A", Ra, Ra, 0, 0, 0, tipR.x, tipR.y); // arc across tip circle
                  if (Ra < Rb)
                  {
                    data.push("L", invR[0].x, invR[0].y);  // line from addendum to start of involute
                  }
                  data.push("C", invR[1].x, invR[1].y, invR[2].x, invR[2].y, invR[3].x, invR[3].y,
                                 invR[4].x, invR[4].y, invR[5].x, invR[5].y, invR[6].x, invR[6].y);
                  if (rootR.y < rootNext.y)    // there is a section of root circle between fillets
                  {
                    data.push("A", fRad, fRad, 0, 0, 0, rootR.x, rootR.y); // fillet on back of tooth
                    data.push("A", Rroot, Rroot, 0, 0, 0, rootNext.x, rootNext.y); // root circle arc
                  }
                  data.push("A", fRad, fRad, 0, 0, 0, filletNext.x, filletNext.y); // fillet on next
                
                  return data;  // return an array of Cango (SVG) format draw commands
                };
                
                }());
                
                return { create_gear_tooth: createGearTooth, create_internal_gear_tooth: createIntGearTooth };
                });
                
                (function() {
                  define('util/bezier',[], function() {
                    var arc_to_bezier, segment_to_bezier;
                    segment_to_bezier = function(cx, cy, th0, th1, rx, ry, sin_th, cos_th) {
                      var a00, a01, a10, a11, t, th_half, x1, x2, x3, y1, y2, y3;
                      a00 = cos_th * rx;
                      a01 = -sin_th * ry;
                      a10 = sin_th * rx;
                      a11 = cos_th * ry;
                      th_half = 0.5 * (th1 - th0);
                      t = (8 / 3) * Math.sin(th_half * 0.5) * Math.sin(th_half * 0.5) / Math.sin(th_half);
                      x1 = cx + Math.cos(th0) - t * Math.sin(th0);
                      y1 = cy + Math.sin(th0) + t * Math.cos(th0);
                      x3 = cx + Math.cos(th1);
                      y3 = cy + Math.sin(th1);
                      x2 = x3 + t * Math.sin(th1);
                      y2 = y3 - t * Math.cos(th1);
                      return [a00 * x1 + a01 * y1, a10 * x1 + a11 * y1, a00 * x2 + a01 * y2, a10 * x2 + a11 * y2, a00 * x3 + a01 * y3, a10 * x3 + a11 * y3];
                    };
                    arc_to_bezier = function(ox, oy, radx, rady, rotateX, large, sweep, x, y) {
                      var a00, a01, a10, a11, cos_th, d, i, pl, px, py, result, rx, ry, segments, sfactor, sfactor_sq, sin_th, th, th0, th1, th2, th3, th_arc, x0, x1, xc, y0, y1, yc;
                      th = rotateX * (Math.PI / 180);
                      sin_th = Math.sin(th);
                      cos_th = Math.cos(th);
                      rx = Math.abs(radx);
                      ry = Math.abs(rady);
                      px = cos_th * (ox - x) * 0.5 + sin_th * (oy - y) * 0.5;
                      py = cos_th * (oy - y) * 0.5 - sin_th * (ox - x) * 0.5;
                      pl = (px * px) / (rx * rx) + (py * py) / (ry * ry);
                      if (pl > 1) {
                        pl = Math.sqrt(pl);
                        rx *= pl;
                        ry *= pl;
                      }
                      a00 = cos_th / rx;
                      a01 = sin_th / rx;
                      a10 = -sin_th / ry;
                      a11 = cos_th / ry;
                      x0 = a00 * ox + a01 * oy;
                      y0 = a10 * ox + a11 * oy;
                      x1 = a00 * x + a01 * y;
                      y1 = a10 * x + a11 * y;
                      d = (x1 - x0) * (x1 - x0) + (y1 - y0) * (y1 - y0);
                      sfactor_sq = 1 / d - 0.25;
                      if (sfactor_sq < 0) {
                        sfactor_sq = 0;
                      }
                      sfactor = Math.sqrt(sfactor_sq);
                      if (sweep === large) {
                        sfactor = -sfactor;
                      }
                      xc = 0.5 * (x0 + x1) - sfactor * (y1 - y0);
                      yc = 0.5 * (y0 + y1) + sfactor * (x1 - x0);
                      th0 = Math.atan2(y0 - yc, x0 - xc);
                      th1 = Math.atan2(y1 - yc, x1 - xc);
                      th_arc = th1 - th0;
                      if (th_arc < 0 && sweep === 1) {
                        th_arc += 2 * Math.PI;
                      } else if (th_arc > 0 && sweep === 0) {
                        th_arc -= 2 * Math.PI;
                      }
                      segments = Math.ceil(Math.abs(th_arc / (Math.PI * 0.5 + 0.001)));
                      result = (function() {
                        var _i, _results;
                        _results = [];
                        for (i = _i = 0; 0 <= segments ? _i < segments : _i > segments; i = 0 <= segments ? ++_i : --_i) {
                          th2 = th0 + i * th_arc / segments;
                          th3 = th0 + (i + 1) * th_arc / segments;
                          _results.push(segment_to_bezier(xc, yc, th2, th3, rx, ry, sin_th, cos_th));
                        }
                        return _results;
                      })();
                      return result;
                    };
                    return {
                      arc_to_bezier: arc_to_bezier
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=bezier.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('renderer/glyph/gear',["underscore", "gear_utils", "renderer/properties", "util/bezier", "./glyph"], function(_, GearUtils, Properties, Bezier, Glyph) {
                    var Gear, GearView, _ref, _ref1;
                    GearView = (function(_super) {
                      __extends(GearView, _super);
                
                      function GearView() {
                        _ref = GearView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      GearView.prototype._fields = ['x', 'y', 'angle', 'module', 'teeth', 'pressure_angle', 'shaft_size', 'internal'];
                
                      GearView.prototype._properties = ['line', 'fill'];
                
                      GearView.prototype._map_data = function() {
                        var _ref1;
                        _ref1 = this.plot_view.map_to_screen(this.x, this.glyph_props.x.units, this.y, this.glyph_props.y.units), this.sx = _ref1[0], this.sy = _ref1[1];
                        return this.smodule = this.distance_vector('x', 'module', 'edge');
                      };
                
                      GearView.prototype._render = function(ctx, indices, glyph_props) {
                        var M, angle, fn, i, internal, j, module, pitch_radius, pressure_angle, rim_radius, rot, seq, seq0, shaft_radius, shaft_size, sx, sy, teeth, x, y, _i, _j, _len, _ref1, _ref2;
                        for (_i = 0, _len = indices.length; _i < _len; _i++) {
                          i = indices[_i];
                          _ref1 = [this.sx[i], this.sy[i], this.angle[i], this.smodule[i], this.teeth[i], this.pressure_angle[i], this.shaft_size[i], this.internal[i]], sx = _ref1[0], sy = _ref1[1], angle = _ref1[2], module = _ref1[3], teeth = _ref1[4], pressure_angle = _ref1[5], shaft_size = _ref1[6], internal = _ref1[7];
                          if (isNaN(sx + sy + angle + module + teeth + pressure_angle + shaft_size + internal)) {
                            continue;
                          }
                          pitch_radius = module * teeth / 2;
                          if (internal) {
                            fn = GearUtils.create_internal_gear_tooth;
                          } else {
                            fn = GearUtils.create_gear_tooth;
                          }
                          seq0 = fn(module, teeth, pressure_angle);
                          _ref2 = seq0.slice(0, 3), M = _ref2[0], x = _ref2[1], y = _ref2[2];
                          seq = seq0.slice(3);
                          ctx.save();
                          ctx.translate(sx, sy);
                          ctx.rotate(angle);
                          ctx.beginPath();
                          rot = 2 * Math.PI / teeth;
                          ctx.moveTo(x, y);
                          for (j = _j = 0; 0 <= teeth ? _j < teeth : _j > teeth; j = 0 <= teeth ? ++_j : --_j) {
                            this._render_seq(ctx, seq);
                            ctx.rotate(rot);
                          }
                          ctx.closePath();
                          if (internal) {
                            rim_radius = pitch_radius + 2.75 * module;
                            ctx.moveTo(rim_radius, 0);
                            ctx.arc(0, 0, rim_radius, 0, 2 * Math.PI, true);
                          } else if (shaft_size > 0) {
                            shaft_radius = pitch_radius * shaft_size;
                            ctx.moveTo(shaft_radius, 0);
                            ctx.arc(0, 0, shaft_radius, 0, 2 * Math.PI, true);
                          }
                          if (glyph_props.fill_properties.do_fill) {
                            glyph_props.fill_properties.set_vectorize(ctx, i);
                            ctx.fill();
                          }
                          if (glyph_props.line_properties.do_stroke) {
                            glyph_props.line_properties.set_vectorize(ctx, i);
                            ctx.stroke();
                          }
                          ctx.restore();
                        }
                      };
                
                      GearView.prototype._render_seq = function(ctx, seq) {
                        var c, cx0, cx1, cy0, cy1, i, large_arc, px, py, rx, ry, segments, sweep, x, x_rotation, y, _i, _len, _ref1, _ref10, _ref11, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9;
                        i = 0;
                        while (i < seq.length) {
                          if (_.isString(seq[i])) {
                            c = seq[i];
                            i += 1;
                          }
                          switch (c) {
                            case "M":
                              _ref1 = seq.slice(i, i + 2), x = _ref1[0], y = _ref1[1];
                              ctx.moveTo(x, y);
                              _ref2 = [x, y], px = _ref2[0], py = _ref2[1];
                              i += 2;
                              break;
                            case "L":
                              _ref3 = seq.slice(i, i + 2), x = _ref3[0], y = _ref3[1];
                              ctx.lineTo(x, y);
                              _ref4 = [x, y], px = _ref4[0], py = _ref4[1];
                              i += 2;
                              break;
                            case "C":
                              _ref5 = seq.slice(i, i + 6), cx0 = _ref5[0], cy0 = _ref5[1], cx1 = _ref5[2], cy1 = _ref5[3], x = _ref5[4], y = _ref5[5];
                              ctx.bezierCurveTo(cx0, cy0, cx1, cy1, x, y);
                              _ref6 = [x, y], px = _ref6[0], py = _ref6[1];
                              i += 6;
                              break;
                            case "Q":
                              _ref7 = seq.slice(i, i + 4), cx0 = _ref7[0], cy0 = _ref7[1], x = _ref7[2], y = _ref7[3];
                              ctx.quadraticCurveTo(cx0, cy0, x, y);
                              _ref8 = [x, y], px = _ref8[0], py = _ref8[1];
                              i += 4;
                              break;
                            case "A":
                              _ref9 = seq.slice(i, i + 7), rx = _ref9[0], ry = _ref9[1], x_rotation = _ref9[2], large_arc = _ref9[3], sweep = _ref9[4], x = _ref9[5], y = _ref9[6];
                              segments = Bezier.arc_to_bezier(px, py, rx, ry, -x_rotation, large_arc, 1 - sweep, x, y);
                              for (_i = 0, _len = segments.length; _i < _len; _i++) {
                                _ref10 = segments[_i], cx0 = _ref10[0], cy0 = _ref10[1], cx1 = _ref10[2], cy1 = _ref10[3], x = _ref10[4], y = _ref10[5];
                                ctx.bezierCurveTo(cx0, cy0, cx1, cy1, x, y);
                              }
                              _ref11 = [x, y], px = _ref11[0], py = _ref11[1];
                              i += 7;
                              break;
                            default:
                              throw new Error("unexpected command: " + c);
                          }
                        }
                      };
                
                      GearView.prototype.draw_legend = function(ctx, x0, x1, y0, y1) {
                        return this._generic_line_legend(ctx, x0, x1, y0, y1);
                      };
                
                      return GearView;
                
                    })(Glyph.View);
                    Gear = (function(_super) {
                      __extends(Gear, _super);
                
                      function Gear() {
                        _ref1 = Gear.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      Gear.prototype.default_view = GearView;
                
                      Gear.prototype.type = 'Glyph';
                
                      Gear.prototype.display_defaults = function() {
                        return _.extend({}, Gear.__super__.display_defaults.call(this), {
                          fill_color: 'gray',
                          fill_alpha: 1.0,
                          line_color: 'red',
                          line_width: 1,
                          line_alpha: 1.0,
                          line_join: 'miter',
                          line_cap: 'butt',
                          line_dash: [],
                          line_dash_offset: 0
                        });
                      };
                
                      return Gear;
                
                    })(Glyph.Model);
                    return {
                      Model: Gear,
                      View: GearView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=gear.js.map
                */;
                (function() {
                  define('palettes/colorbrewer',[], function() {
                    var colorbrewer;
                    return colorbrewer = {
                      YlGn: {
                        3: [0xf7fcb9, 0xaddd8e, 0x31a354],
                        4: [0xffffcc, 0xc2e699, 0x78c679, 0x238443],
                        5: [0xffffcc, 0xc2e699, 0x78c679, 0x31a354, 0x006837],
                        6: [0xffffcc, 0xd9f0a3, 0xaddd8e, 0x78c679, 0x31a354, 0x006837],
                        7: [0xffffcc, 0xd9f0a3, 0xaddd8e, 0x78c679, 0x41ab5d, 0x238443, 0x005a32],
                        8: [0xffffe5, 0xf7fcb9, 0xd9f0a3, 0xaddd8e, 0x78c679, 0x41ab5d, 0x238443, 0x005a32],
                        9: [0xffffe5, 0xf7fcb9, 0xd9f0a3, 0xaddd8e, 0x78c679, 0x41ab5d, 0x238443, 0x006837, 0x004529]
                      },
                      YlGnBu: {
                        3: [0xedf8b1, 0x7fcdbb, 0x2c7fb8],
                        4: [0xffffcc, 0xa1dab4, 0x41b6c4, 0x225ea8],
                        5: [0xffffcc, 0xa1dab4, 0x41b6c4, 0x2c7fb8, 0x253494],
                        6: [0xffffcc, 0xc7e9b4, 0x7fcdbb, 0x41b6c4, 0x2c7fb8, 0x253494],
                        7: [0xffffcc, 0xc7e9b4, 0x7fcdbb, 0x41b6c4, 0x1d91c0, 0x225ea8, 0x0c2c84],
                        8: [0xffffd9, 0xedf8b1, 0xc7e9b4, 0x7fcdbb, 0x41b6c4, 0x1d91c0, 0x225ea8, 0x0c2c84],
                        9: [0xffffd9, 0xedf8b1, 0xc7e9b4, 0x7fcdbb, 0x41b6c4, 0x1d91c0, 0x225ea8, 0x253494, 0x081d58]
                      },
                      GnBu: {
                        3: [0xe0f3db, 0xa8ddb5, 0x43a2ca],
                        4: [0xf0f9e8, 0xbae4bc, 0x7bccc4, 0x2b8cbe],
                        5: [0xf0f9e8, 0xbae4bc, 0x7bccc4, 0x43a2ca, 0x0868ac],
                        6: [0xf0f9e8, 0xccebc5, 0xa8ddb5, 0x7bccc4, 0x43a2ca, 0x0868ac],
                        7: [0xf0f9e8, 0xccebc5, 0xa8ddb5, 0x7bccc4, 0x4eb3d3, 0x2b8cbe, 0x08589e],
                        8: [0xf7fcf0, 0xe0f3db, 0xccebc5, 0xa8ddb5, 0x7bccc4, 0x4eb3d3, 0x2b8cbe, 0x08589e],
                        9: [0xf7fcf0, 0xe0f3db, 0xccebc5, 0xa8ddb5, 0x7bccc4, 0x4eb3d3, 0x2b8cbe, 0x0868ac, 0x084081]
                      },
                      BuGn: {
                        3: [0xe5f5f9, 0x99d8c9, 0x2ca25f],
                        4: [0xedf8fb, 0xb2e2e2, 0x66c2a4, 0x238b45],
                        5: [0xedf8fb, 0xb2e2e2, 0x66c2a4, 0x2ca25f, 0x006d2c],
                        6: [0xedf8fb, 0xccece6, 0x99d8c9, 0x66c2a4, 0x2ca25f, 0x006d2c],
                        7: [0xedf8fb, 0xccece6, 0x99d8c9, 0x66c2a4, 0x41ae76, 0x238b45, 0x005824],
                        8: [0xf7fcfd, 0xe5f5f9, 0xccece6, 0x99d8c9, 0x66c2a4, 0x41ae76, 0x238b45, 0x005824],
                        9: [0xf7fcfd, 0xe5f5f9, 0xccece6, 0x99d8c9, 0x66c2a4, 0x41ae76, 0x238b45, 0x006d2c, 0x00441b]
                      },
                      PuBuGn: {
                        3: [0xece2f0, 0xa6bddb, 0x1c9099],
                        4: [0xf6eff7, 0xbdc9e1, 0x67a9cf, 0x02818a],
                        5: [0xf6eff7, 0xbdc9e1, 0x67a9cf, 0x1c9099, 0x016c59],
                        6: [0xf6eff7, 0xd0d1e6, 0xa6bddb, 0x67a9cf, 0x1c9099, 0x016c59],
                        7: [0xf6eff7, 0xd0d1e6, 0xa6bddb, 0x67a9cf, 0x3690c0, 0x02818a, 0x016450],
                        8: [0xfff7fb, 0xece2f0, 0xd0d1e6, 0xa6bddb, 0x67a9cf, 0x3690c0, 0x02818a, 0x016450],
                        9: [0xfff7fb, 0xece2f0, 0xd0d1e6, 0xa6bddb, 0x67a9cf, 0x3690c0, 0x02818a, 0x016c59, 0x014636]
                      },
                      PuBu: {
                        3: [0xece7f2, 0xa6bddb, 0x2b8cbe],
                        4: [0xf1eef6, 0xbdc9e1, 0x74a9cf, 0x0570b0],
                        5: [0xf1eef6, 0xbdc9e1, 0x74a9cf, 0x2b8cbe, 0x045a8d],
                        6: [0xf1eef6, 0xd0d1e6, 0xa6bddb, 0x74a9cf, 0x2b8cbe, 0x045a8d],
                        7: [0xf1eef6, 0xd0d1e6, 0xa6bddb, 0x74a9cf, 0x3690c0, 0x0570b0, 0x034e7b],
                        8: [0xfff7fb, 0xece7f2, 0xd0d1e6, 0xa6bddb, 0x74a9cf, 0x3690c0, 0x0570b0, 0x034e7b],
                        9: [0xfff7fb, 0xece7f2, 0xd0d1e6, 0xa6bddb, 0x74a9cf, 0x3690c0, 0x0570b0, 0x045a8d, 0x023858]
                      },
                      BuPu: {
                        3: [0xe0ecf4, 0x9ebcda, 0x8856a7],
                        4: [0xedf8fb, 0xb3cde3, 0x8c96c6, 0x88419d],
                        5: [0xedf8fb, 0xb3cde3, 0x8c96c6, 0x8856a7, 0x810f7c],
                        6: [0xedf8fb, 0xbfd3e6, 0x9ebcda, 0x8c96c6, 0x8856a7, 0x810f7c],
                        7: [0xedf8fb, 0xbfd3e6, 0x9ebcda, 0x8c96c6, 0x8c6bb1, 0x88419d, 0x6e016b],
                        8: [0xf7fcfd, 0xe0ecf4, 0xbfd3e6, 0x9ebcda, 0x8c96c6, 0x8c6bb1, 0x88419d, 0x6e016b],
                        9: [0xf7fcfd, 0xe0ecf4, 0xbfd3e6, 0x9ebcda, 0x8c96c6, 0x8c6bb1, 0x88419d, 0x810f7c, 0x4d004b]
                      },
                      RdPu: {
                        3: [0xfde0dd, 0xfa9fb5, 0xc51b8a],
                        4: [0xfeebe2, 0xfbb4b9, 0xf768a1, 0xae017e],
                        5: [0xfeebe2, 0xfbb4b9, 0xf768a1, 0xc51b8a, 0x7a0177],
                        6: [0xfeebe2, 0xfcc5c0, 0xfa9fb5, 0xf768a1, 0xc51b8a, 0x7a0177],
                        7: [0xfeebe2, 0xfcc5c0, 0xfa9fb5, 0xf768a1, 0xdd3497, 0xae017e, 0x7a0177],
                        8: [0xfff7f3, 0xfde0dd, 0xfcc5c0, 0xfa9fb5, 0xf768a1, 0xdd3497, 0xae017e, 0x7a0177],
                        9: [0xfff7f3, 0xfde0dd, 0xfcc5c0, 0xfa9fb5, 0xf768a1, 0xdd3497, 0xae017e, 0x7a0177, 0x49006a]
                      },
                      PuRd: {
                        3: [0xe7e1ef, 0xc994c7, 0xdd1c77],
                        4: [0xf1eef6, 0xd7b5d8, 0xdf65b0, 0xce1256],
                        5: [0xf1eef6, 0xd7b5d8, 0xdf65b0, 0xdd1c77, 0x980043],
                        6: [0xf1eef6, 0xd4b9da, 0xc994c7, 0xdf65b0, 0xdd1c77, 0x980043],
                        7: [0xf1eef6, 0xd4b9da, 0xc994c7, 0xdf65b0, 0xe7298a, 0xce1256, 0x91003f],
                        8: [0xf7f4f9, 0xe7e1ef, 0xd4b9da, 0xc994c7, 0xdf65b0, 0xe7298a, 0xce1256, 0x91003f],
                        9: [0xf7f4f9, 0xe7e1ef, 0xd4b9da, 0xc994c7, 0xdf65b0, 0xe7298a, 0xce1256, 0x980043, 0x67001f]
                      },
                      OrRd: {
                        3: [0xfee8c8, 0xfdbb84, 0xe34a33],
                        4: [0xfef0d9, 0xfdcc8a, 0xfc8d59, 0xd7301f],
                        5: [0xfef0d9, 0xfdcc8a, 0xfc8d59, 0xe34a33, 0xb30000],
                        6: [0xfef0d9, 0xfdd49e, 0xfdbb84, 0xfc8d59, 0xe34a33, 0xb30000],
                        7: [0xfef0d9, 0xfdd49e, 0xfdbb84, 0xfc8d59, 0xef6548, 0xd7301f, 0x990000],
                        8: [0xfff7ec, 0xfee8c8, 0xfdd49e, 0xfdbb84, 0xfc8d59, 0xef6548, 0xd7301f, 0x990000],
                        9: [0xfff7ec, 0xfee8c8, 0xfdd49e, 0xfdbb84, 0xfc8d59, 0xef6548, 0xd7301f, 0xb30000, 0x7f0000]
                      },
                      YlOrRd: {
                        3: [0xffeda0, 0xfeb24c, 0xf03b20],
                        4: [0xffffb2, 0xfecc5c, 0xfd8d3c, 0xe31a1c],
                        5: [0xffffb2, 0xfecc5c, 0xfd8d3c, 0xf03b20, 0xbd0026],
                        6: [0xffffb2, 0xfed976, 0xfeb24c, 0xfd8d3c, 0xf03b20, 0xbd0026],
                        7: [0xffffb2, 0xfed976, 0xfeb24c, 0xfd8d3c, 0xfc4e2a, 0xe31a1c, 0xb10026],
                        8: [0xffffcc, 0xffeda0, 0xfed976, 0xfeb24c, 0xfd8d3c, 0xfc4e2a, 0xe31a1c, 0xb10026],
                        9: [0xffffcc, 0xffeda0, 0xfed976, 0xfeb24c, 0xfd8d3c, 0xfc4e2a, 0xe31a1c, 0xbd0026, 0x800026]
                      },
                      YlOrBr: {
                        3: [0xfff7bc, 0xfec44f, 0xd95f0e],
                        4: [0xffffd4, 0xfed98e, 0xfe9929, 0xcc4c02],
                        5: [0xffffd4, 0xfed98e, 0xfe9929, 0xd95f0e, 0x993404],
                        6: [0xffffd4, 0xfee391, 0xfec44f, 0xfe9929, 0xd95f0e, 0x993404],
                        7: [0xffffd4, 0xfee391, 0xfec44f, 0xfe9929, 0xec7014, 0xcc4c02, 0x8c2d04],
                        8: [0xffffe5, 0xfff7bc, 0xfee391, 0xfec44f, 0xfe9929, 0xec7014, 0xcc4c02, 0x8c2d04],
                        9: [0xffffe5, 0xfff7bc, 0xfee391, 0xfec44f, 0xfe9929, 0xec7014, 0xcc4c02, 0x993404, 0x662506]
                      },
                      Purples: {
                        3: [0xefedf5, 0xbcbddc, 0x756bb1],
                        4: [0xf2f0f7, 0xcbc9e2, 0x9e9ac8, 0x6a51a3],
                        5: [0xf2f0f7, 0xcbc9e2, 0x9e9ac8, 0x756bb1, 0x54278f],
                        6: [0xf2f0f7, 0xdadaeb, 0xbcbddc, 0x9e9ac8, 0x756bb1, 0x54278f],
                        7: [0xf2f0f7, 0xdadaeb, 0xbcbddc, 0x9e9ac8, 0x807dba, 0x6a51a3, 0x4a1486],
                        8: [0xfcfbfd, 0xefedf5, 0xdadaeb, 0xbcbddc, 0x9e9ac8, 0x807dba, 0x6a51a3, 0x4a1486],
                        9: [0xfcfbfd, 0xefedf5, 0xdadaeb, 0xbcbddc, 0x9e9ac8, 0x807dba, 0x6a51a3, 0x54278f, 0x3f007d]
                      },
                      Blues: {
                        3: [0xdeebf7, 0x9ecae1, 0x3182bd],
                        4: [0xeff3ff, 0xbdd7e7, 0x6baed6, 0x2171b5],
                        5: [0xeff3ff, 0xbdd7e7, 0x6baed6, 0x3182bd, 0x08519c],
                        6: [0xeff3ff, 0xc6dbef, 0x9ecae1, 0x6baed6, 0x3182bd, 0x08519c],
                        7: [0xeff3ff, 0xc6dbef, 0x9ecae1, 0x6baed6, 0x4292c6, 0x2171b5, 0x084594],
                        8: [0xf7fbff, 0xdeebf7, 0xc6dbef, 0x9ecae1, 0x6baed6, 0x4292c6, 0x2171b5, 0x084594],
                        9: [0xf7fbff, 0xdeebf7, 0xc6dbef, 0x9ecae1, 0x6baed6, 0x4292c6, 0x2171b5, 0x08519c, 0x08306b]
                      },
                      Greens: {
                        3: [0xe5f5e0, 0xa1d99b, 0x31a354],
                        4: [0xedf8e9, 0xbae4b3, 0x74c476, 0x238b45],
                        5: [0xedf8e9, 0xbae4b3, 0x74c476, 0x31a354, 0x006d2c],
                        6: [0xedf8e9, 0xc7e9c0, 0xa1d99b, 0x74c476, 0x31a354, 0x006d2c],
                        7: [0xedf8e9, 0xc7e9c0, 0xa1d99b, 0x74c476, 0x41ab5d, 0x238b45, 0x005a32],
                        8: [0xf7fcf5, 0xe5f5e0, 0xc7e9c0, 0xa1d99b, 0x74c476, 0x41ab5d, 0x238b45, 0x005a32],
                        9: [0xf7fcf5, 0xe5f5e0, 0xc7e9c0, 0xa1d99b, 0x74c476, 0x41ab5d, 0x238b45, 0x006d2c, 0x00441b]
                      },
                      Oranges: {
                        3: [0xfee6ce, 0xfdae6b, 0xe6550d],
                        4: [0xfeedde, 0xfdbe85, 0xfd8d3c, 0xd94701],
                        5: [0xfeedde, 0xfdbe85, 0xfd8d3c, 0xe6550d, 0xa63603],
                        6: [0xfeedde, 0xfdd0a2, 0xfdae6b, 0xfd8d3c, 0xe6550d, 0xa63603],
                        7: [0xfeedde, 0xfdd0a2, 0xfdae6b, 0xfd8d3c, 0xf16913, 0xd94801, 0x8c2d04],
                        8: [0xfff5eb, 0xfee6ce, 0xfdd0a2, 0xfdae6b, 0xfd8d3c, 0xf16913, 0xd94801, 0x8c2d04],
                        9: [0xfff5eb, 0xfee6ce, 0xfdd0a2, 0xfdae6b, 0xfd8d3c, 0xf16913, 0xd94801, 0xa63603, 0x7f2704]
                      },
                      Reds: {
                        3: [0xfee0d2, 0xfc9272, 0xde2d26],
                        4: [0xfee5d9, 0xfcae91, 0xfb6a4a, 0xcb181d],
                        5: [0xfee5d9, 0xfcae91, 0xfb6a4a, 0xde2d26, 0xa50f15],
                        6: [0xfee5d9, 0xfcbba1, 0xfc9272, 0xfb6a4a, 0xde2d26, 0xa50f15],
                        7: [0xfee5d9, 0xfcbba1, 0xfc9272, 0xfb6a4a, 0xef3b2c, 0xcb181d, 0x99000d],
                        8: [0xfff5f0, 0xfee0d2, 0xfcbba1, 0xfc9272, 0xfb6a4a, 0xef3b2c, 0xcb181d, 0x99000d],
                        9: [0xfff5f0, 0xfee0d2, 0xfcbba1, 0xfc9272, 0xfb6a4a, 0xef3b2c, 0xcb181d, 0xa50f15, 0x67000d]
                      },
                      Greys: {
                        3: [0xf0f0f0, 0xbdbdbd, 0x636363],
                        4: [0xf7f7f7, 0xcccccc, 0x969696, 0x525252],
                        5: [0xf7f7f7, 0xcccccc, 0x969696, 0x636363, 0x252525],
                        6: [0xf7f7f7, 0xd9d9d9, 0xbdbdbd, 0x969696, 0x636363, 0x252525],
                        7: [0xf7f7f7, 0xd9d9d9, 0xbdbdbd, 0x969696, 0x737373, 0x525252, 0x252525],
                        8: [0xffffff, 0xf0f0f0, 0xd9d9d9, 0xbdbdbd, 0x969696, 0x737373, 0x525252, 0x252525],
                        9: [0xffffff, 0xf0f0f0, 0xd9d9d9, 0xbdbdbd, 0x969696, 0x737373, 0x525252, 0x252525, 0x000000]
                      },
                      PuOr: {
                        3: [0xf1a340, 0xf7f7f7, 0x998ec3],
                        4: [0xe66101, 0xfdb863, 0xb2abd2, 0x5e3c99],
                        5: [0xe66101, 0xfdb863, 0xf7f7f7, 0xb2abd2, 0x5e3c99],
                        6: [0xb35806, 0xf1a340, 0xfee0b6, 0xd8daeb, 0x998ec3, 0x542788],
                        7: [0xb35806, 0xf1a340, 0xfee0b6, 0xf7f7f7, 0xd8daeb, 0x998ec3, 0x542788],
                        8: [0xb35806, 0xe08214, 0xfdb863, 0xfee0b6, 0xd8daeb, 0xb2abd2, 0x8073ac, 0x542788],
                        9: [0xb35806, 0xe08214, 0xfdb863, 0xfee0b6, 0xf7f7f7, 0xd8daeb, 0xb2abd2, 0x8073ac, 0x542788],
                        10: [0x7f3b08, 0xb35806, 0xe08214, 0xfdb863, 0xfee0b6, 0xd8daeb, 0xb2abd2, 0x8073ac, 0x542788, 0x2d004b],
                        11: [0x7f3b08, 0xb35806, 0xe08214, 0xfdb863, 0xfee0b6, 0xf7f7f7, 0xd8daeb, 0xb2abd2, 0x8073ac, 0x542788, 0x2d004b]
                      },
                      BrBG: {
                        3: [0xd8b365, 0xf5f5f5, 0x5ab4ac],
                        4: [0xa6611a, 0xdfc27d, 0x80cdc1, 0x018571],
                        5: [0xa6611a, 0xdfc27d, 0xf5f5f5, 0x80cdc1, 0x018571],
                        6: [0x8c510a, 0xd8b365, 0xf6e8c3, 0xc7eae5, 0x5ab4ac, 0x01665e],
                        7: [0x8c510a, 0xd8b365, 0xf6e8c3, 0xf5f5f5, 0xc7eae5, 0x5ab4ac, 0x01665e],
                        8: [0x8c510a, 0xbf812d, 0xdfc27d, 0xf6e8c3, 0xc7eae5, 0x80cdc1, 0x35978f, 0x01665e],
                        9: [0x8c510a, 0xbf812d, 0xdfc27d, 0xf6e8c3, 0xf5f5f5, 0xc7eae5, 0x80cdc1, 0x35978f, 0x01665e],
                        10: [0x543005, 0x8c510a, 0xbf812d, 0xdfc27d, 0xf6e8c3, 0xc7eae5, 0x80cdc1, 0x35978f, 0x01665e, 0x003c30],
                        11: [0x543005, 0x8c510a, 0xbf812d, 0xdfc27d, 0xf6e8c3, 0xf5f5f5, 0xc7eae5, 0x80cdc1, 0x35978f, 0x01665e, 0x003c30]
                      },
                      PRGn: {
                        3: [0xaf8dc3, 0xf7f7f7, 0x7fbf7b],
                        4: [0x7b3294, 0xc2a5cf, 0xa6dba0, 0x008837],
                        5: [0x7b3294, 0xc2a5cf, 0xf7f7f7, 0xa6dba0, 0x008837],
                        6: [0x762a83, 0xaf8dc3, 0xe7d4e8, 0xd9f0d3, 0x7fbf7b, 0x1b7837],
                        7: [0x762a83, 0xaf8dc3, 0xe7d4e8, 0xf7f7f7, 0xd9f0d3, 0x7fbf7b, 0x1b7837],
                        8: [0x762a83, 0x9970ab, 0xc2a5cf, 0xe7d4e8, 0xd9f0d3, 0xa6dba0, 0x5aae61, 0x1b7837],
                        9: [0x762a83, 0x9970ab, 0xc2a5cf, 0xe7d4e8, 0xf7f7f7, 0xd9f0d3, 0xa6dba0, 0x5aae61, 0x1b7837],
                        10: [0x40004b, 0x762a83, 0x9970ab, 0xc2a5cf, 0xe7d4e8, 0xd9f0d3, 0xa6dba0, 0x5aae61, 0x1b7837, 0x00441b],
                        11: [0x40004b, 0x762a83, 0x9970ab, 0xc2a5cf, 0xe7d4e8, 0xf7f7f7, 0xd9f0d3, 0xa6dba0, 0x5aae61, 0x1b7837, 0x00441b]
                      },
                      PiYG: {
                        3: [0xe9a3c9, 0xf7f7f7, 0xa1d76a],
                        4: [0xd01c8b, 0xf1b6da, 0xb8e186, 0x4dac26],
                        5: [0xd01c8b, 0xf1b6da, 0xf7f7f7, 0xb8e186, 0x4dac26],
                        6: [0xc51b7d, 0xe9a3c9, 0xfde0ef, 0xe6f5d0, 0xa1d76a, 0x4d9221],
                        7: [0xc51b7d, 0xe9a3c9, 0xfde0ef, 0xf7f7f7, 0xe6f5d0, 0xa1d76a, 0x4d9221],
                        8: [0xc51b7d, 0xde77ae, 0xf1b6da, 0xfde0ef, 0xe6f5d0, 0xb8e186, 0x7fbc41, 0x4d9221],
                        9: [0xc51b7d, 0xde77ae, 0xf1b6da, 0xfde0ef, 0xf7f7f7, 0xe6f5d0, 0xb8e186, 0x7fbc41, 0x4d9221],
                        10: [0x8e0152, 0xc51b7d, 0xde77ae, 0xf1b6da, 0xfde0ef, 0xe6f5d0, 0xb8e186, 0x7fbc41, 0x4d9221, 0x276419],
                        11: [0x8e0152, 0xc51b7d, 0xde77ae, 0xf1b6da, 0xfde0ef, 0xf7f7f7, 0xe6f5d0, 0xb8e186, 0x7fbc41, 0x4d9221, 0x276419]
                      },
                      RdBu: {
                        3: [0xef8a62, 0xf7f7f7, 0x67a9cf],
                        4: [0xca0020, 0xf4a582, 0x92c5de, 0x0571b0],
                        5: [0xca0020, 0xf4a582, 0xf7f7f7, 0x92c5de, 0x0571b0],
                        6: [0xb2182b, 0xef8a62, 0xfddbc7, 0xd1e5f0, 0x67a9cf, 0x2166ac],
                        7: [0xb2182b, 0xef8a62, 0xfddbc7, 0xf7f7f7, 0xd1e5f0, 0x67a9cf, 0x2166ac],
                        8: [0xb2182b, 0xd6604d, 0xf4a582, 0xfddbc7, 0xd1e5f0, 0x92c5de, 0x4393c3, 0x2166ac],
                        9: [0xb2182b, 0xd6604d, 0xf4a582, 0xfddbc7, 0xf7f7f7, 0xd1e5f0, 0x92c5de, 0x4393c3, 0x2166ac],
                        10: [0x67001f, 0xb2182b, 0xd6604d, 0xf4a582, 0xfddbc7, 0xd1e5f0, 0x92c5de, 0x4393c3, 0x2166ac, 0x053061],
                        11: [0x67001f, 0xb2182b, 0xd6604d, 0xf4a582, 0xfddbc7, 0xf7f7f7, 0xd1e5f0, 0x92c5de, 0x4393c3, 0x2166ac, 0x053061]
                      },
                      RdGy: {
                        3: [0xef8a62, 0xffffff, 0x999999],
                        4: [0xca0020, 0xf4a582, 0xbababa, 0x404040],
                        5: [0xca0020, 0xf4a582, 0xffffff, 0xbababa, 0x404040],
                        6: [0xb2182b, 0xef8a62, 0xfddbc7, 0xe0e0e0, 0x999999, 0x4d4d4d],
                        7: [0xb2182b, 0xef8a62, 0xfddbc7, 0xffffff, 0xe0e0e0, 0x999999, 0x4d4d4d],
                        8: [0xb2182b, 0xd6604d, 0xf4a582, 0xfddbc7, 0xe0e0e0, 0xbababa, 0x878787, 0x4d4d4d],
                        9: [0xb2182b, 0xd6604d, 0xf4a582, 0xfddbc7, 0xffffff, 0xe0e0e0, 0xbababa, 0x878787, 0x4d4d4d],
                        10: [0x67001f, 0xb2182b, 0xd6604d, 0xf4a582, 0xfddbc7, 0xe0e0e0, 0xbababa, 0x878787, 0x4d4d4d, 0x1a1a1a],
                        11: [0x67001f, 0xb2182b, 0xd6604d, 0xf4a582, 0xfddbc7, 0xffffff, 0xe0e0e0, 0xbababa, 0x878787, 0x4d4d4d, 0x1a1a1a]
                      },
                      RdYlBu: {
                        3: [0xfc8d59, 0xffffbf, 0x91bfdb],
                        4: [0xd7191c, 0xfdae61, 0xabd9e9, 0x2c7bb6],
                        5: [0xd7191c, 0xfdae61, 0xffffbf, 0xabd9e9, 0x2c7bb6],
                        6: [0xd73027, 0xfc8d59, 0xfee090, 0xe0f3f8, 0x91bfdb, 0x4575b4],
                        7: [0xd73027, 0xfc8d59, 0xfee090, 0xffffbf, 0xe0f3f8, 0x91bfdb, 0x4575b4],
                        8: [0xd73027, 0xf46d43, 0xfdae61, 0xfee090, 0xe0f3f8, 0xabd9e9, 0x74add1, 0x4575b4],
                        9: [0xd73027, 0xf46d43, 0xfdae61, 0xfee090, 0xffffbf, 0xe0f3f8, 0xabd9e9, 0x74add1, 0x4575b4],
                        10: [0xa50026, 0xd73027, 0xf46d43, 0xfdae61, 0xfee090, 0xe0f3f8, 0xabd9e9, 0x74add1, 0x4575b4, 0x313695],
                        11: [0xa50026, 0xd73027, 0xf46d43, 0xfdae61, 0xfee090, 0xffffbf, 0xe0f3f8, 0xabd9e9, 0x74add1, 0x4575b4, 0x313695]
                      },
                      Spectral: {
                        3: [0xfc8d59, 0xffffbf, 0x99d594],
                        4: [0xd7191c, 0xfdae61, 0xabdda4, 0x2b83ba],
                        5: [0xd7191c, 0xfdae61, 0xffffbf, 0xabdda4, 0x2b83ba],
                        6: [0xd53e4f, 0xfc8d59, 0xfee08b, 0xe6f598, 0x99d594, 0x3288bd],
                        7: [0xd53e4f, 0xfc8d59, 0xfee08b, 0xffffbf, 0xe6f598, 0x99d594, 0x3288bd],
                        8: [0xd53e4f, 0xf46d43, 0xfdae61, 0xfee08b, 0xe6f598, 0xabdda4, 0x66c2a5, 0x3288bd],
                        9: [0xd53e4f, 0xf46d43, 0xfdae61, 0xfee08b, 0xffffbf, 0xe6f598, 0xabdda4, 0x66c2a5, 0x3288bd],
                        10: [0x9e0142, 0xd53e4f, 0xf46d43, 0xfdae61, 0xfee08b, 0xe6f598, 0xabdda4, 0x66c2a5, 0x3288bd, 0x5e4fa2],
                        11: [0x9e0142, 0xd53e4f, 0xf46d43, 0xfdae61, 0xfee08b, 0xffffbf, 0xe6f598, 0xabdda4, 0x66c2a5, 0x3288bd, 0x5e4fa2]
                      },
                      RdYlGn: {
                        3: [0xfc8d59, 0xffffbf, 0x91cf60],
                        4: [0xd7191c, 0xfdae61, 0xa6d96a, 0x1a9641],
                        5: [0xd7191c, 0xfdae61, 0xffffbf, 0xa6d96a, 0x1a9641],
                        6: [0xd73027, 0xfc8d59, 0xfee08b, 0xd9ef8b, 0x91cf60, 0x1a9850],
                        7: [0xd73027, 0xfc8d59, 0xfee08b, 0xffffbf, 0xd9ef8b, 0x91cf60, 0x1a9850],
                        8: [0xd73027, 0xf46d43, 0xfdae61, 0xfee08b, 0xd9ef8b, 0xa6d96a, 0x66bd63, 0x1a9850],
                        9: [0xd73027, 0xf46d43, 0xfdae61, 0xfee08b, 0xffffbf, 0xd9ef8b, 0xa6d96a, 0x66bd63, 0x1a9850],
                        10: [0xa50026, 0xd73027, 0xf46d43, 0xfdae61, 0xfee08b, 0xd9ef8b, 0xa6d96a, 0x66bd63, 0x1a9850, 0x006837],
                        11: [0xa50026, 0xd73027, 0xf46d43, 0xfdae61, 0xfee08b, 0xffffbf, 0xd9ef8b, 0xa6d96a, 0x66bd63, 0x1a9850, 0x006837]
                      }
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=colorbrewer.js.map
                */;
                (function() {
                  define('palettes/palettes',["./colorbrewer"], function(colorbrewer) {
                    var all_palettes, items, name, num, pal;
                    all_palettes = {};
                    for (name in colorbrewer) {
                      items = colorbrewer[name];
                      for (num in items) {
                        pal = items[num];
                        all_palettes["" + name + "-" + num] = pal.reverse();
                      }
                    }
                    return {
                      "all_palettes": all_palettes
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=palettes.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('renderer/glyph/image',["underscore", "renderer/properties", "mapper/linear_color_mapper", "palettes/palettes", "./glyph"], function(_, Properties, LinearColorMapper, Palettes, Glyph) {
                    var ImageGlyph, ImageView, all_palettes, _ref, _ref1;
                    all_palettes = Palettes.all_palettes;
                    ImageView = (function(_super) {
                      __extends(ImageView, _super);
                
                      function ImageView() {
                        _ref = ImageView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      ImageView.prototype._properties = [];
                
                      ImageView.prototype.initialize = function(options) {
                        var spec;
                        spec = this.mget('glyphspec');
                        if (spec.rows != null) {
                          this._fields = ['image:array', 'rows', 'cols', 'x', 'y', 'dw', 'dh', 'palette:string', 'reserve_val', 'reserve_color'];
                        } else {
                          this._fields = ['image:array', 'x', 'y', 'dw', 'dh', 'palette:string', 'reserve_val', 'reserve_color'];
                        }
                        return ImageView.__super__.initialize.call(this, options);
                      };
                
                      ImageView.prototype._set_data = function(data) {
                        var buf, buf8, canvas, cmap, ctx, i, image_data, img, _i, _ref1, _results;
                        this.data = data;
                        if ((this.image_data == null) || this.image_data.length !== this.image.length) {
                          this.image_data = new Array(this.image.length);
                        }
                        if ((this.width == null) || this.width.length !== this.image.length) {
                          this.width = new Array(this.image.length);
                        }
                        if ((this.height == null) || this.height.length !== this.image.length) {
                          this.height = new Array(this.image.length);
                        }
                        _results = [];
                        for (i = _i = 0, _ref1 = this.image.length; 0 <= _ref1 ? _i < _ref1 : _i > _ref1; i = 0 <= _ref1 ? ++_i : --_i) {
                          if (this.rows != null) {
                            this.height[i] = this.rows[i];
                            this.width[i] = this.cols[i];
                          } else {
                            this.height[i] = this.image[i].length;
                            this.width[i] = this.image[i][0].length;
                          }
                          canvas = document.createElement('canvas');
                          canvas.width = this.width[i];
                          canvas.height = this.height[i];
                          ctx = canvas.getContext('2d');
                          image_data = ctx.getImageData(0, 0, this.width[i], this.height[i]);
                          cmap = new LinearColorMapper.Model({
                            palette: all_palettes[this.palette[i]],
                            reserve_val: this.reserve_val,
                            reserve_color: this.reserve_color
                          });
                          if (this.rows != null) {
                            img = this.image[i];
                          } else {
                            img = _.flatten(this.image[i]);
                          }
                          buf = cmap.v_map_screen(img);
                          buf8 = new Uint8ClampedArray(buf);
                          image_data.data.set(buf8);
                          ctx.putImageData(image_data, 0, 0);
                          _results.push(this.image_data[i] = canvas);
                        }
                        return _results;
                      };
                
                      ImageView.prototype._map_data = function() {
                        var _ref1;
                        _ref1 = this.plot_view.map_to_screen(this.x, this.glyph_props.x.units, this.y, this.glyph_props.y.units), this.sx = _ref1[0], this.sy = _ref1[1];
                        this.sw = this.distance_vector('x', 'dw', 'edge', this.mget('glyphspec')['dilate']);
                        return this.sh = this.distance_vector('y', 'dh', 'edge', this.mget('glyphspec')['dilate']);
                      };
                
                      ImageView.prototype._render = function(ctx, indices, glyph_props) {
                        var i, old_smoothing, y_offset, _i, _len;
                        old_smoothing = ctx.getImageSmoothingEnabled();
                        ctx.setImageSmoothingEnabled(false);
                        for (_i = 0, _len = indices.length; _i < _len; _i++) {
                          i = indices[_i];
                          if (this.image_data[i] == null) {
                            continue;
                          }
                          if (isNaN(this.sx[i] + this.sy[i] + this.sw[i] + this.sh[i])) {
                            continue;
                          }
                          y_offset = this.sy[i];
                          ctx.translate(0, y_offset);
                          ctx.scale(1, -1);
                          ctx.translate(0, -y_offset);
                          ctx.drawImage(this.image_data[i], this.sx[i] | 0, this.sy[i] | 0, this.sw[i], this.sh[i]);
                          ctx.translate(0, y_offset);
                          ctx.scale(1, -1);
                          ctx.translate(0, -y_offset);
                        }
                        return ctx.setImageSmoothingEnabled(old_smoothing);
                      };
                
                      return ImageView;
                
                    })(Glyph.View);
                    ImageGlyph = (function(_super) {
                      __extends(ImageGlyph, _super);
                
                      function ImageGlyph() {
                        _ref1 = ImageGlyph.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      ImageGlyph.prototype.default_view = ImageView;
                
                      ImageGlyph.prototype.type = 'Glyph';
                
                      ImageGlyph.prototype.display_defaults = function() {
                        return _.extend(ImageGlyph.__super__.display_defaults.call(this), {
                          level: 'underlay',
                          dilate: false
                        });
                      };
                
                      return ImageGlyph;
                
                    })(Glyph.Model);
                    return {
                      "Model": ImageGlyph,
                      "View": ImageView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=image.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('renderer/glyph/image_rgba',["underscore", "renderer/properties", "./glyph"], function(_, Properties, Glyph) {
                    var ImageRGBAGlyph, ImageRGBAView, glyph_properties, _ref, _ref1;
                    glyph_properties = Properties.glyph_properties;
                    ImageRGBAView = (function(_super) {
                      __extends(ImageRGBAView, _super);
                
                      function ImageRGBAView() {
                        _ref = ImageRGBAView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      ImageRGBAView.prototype._properties = [];
                
                      ImageRGBAView.prototype.initialize = function(options) {
                        var spec;
                        spec = this.mget('glyphspec');
                        if (spec.rows != null) {
                          this._fields = ['image:array', 'rows', 'cols', 'x', 'y', 'dw', 'dh'];
                        } else {
                          this._fields = ['image:array', 'x', 'y', 'dw', 'dh'];
                        }
                        return ImageRGBAView.__super__.initialize.call(this, options);
                      };
                
                      ImageRGBAView.prototype._set_data = function() {
                        var buf, buf8, canvas, color, ctx, flat, i, image_data, j, _i, _j, _ref1, _ref2, _results;
                        if ((this.image_data == null) || this.image_data.length !== this.image.length) {
                          this.image_data = new Array(this.image.length);
                        }
                        if ((this.width == null) || this.width.length !== this.image.length) {
                          this.width = new Array(this.image.length);
                        }
                        if ((this.height == null) || this.height.length !== this.image.length) {
                          this.height = new Array(this.image.length);
                        }
                        _results = [];
                        for (i = _i = 0, _ref1 = this.image.length; 0 <= _ref1 ? _i < _ref1 : _i > _ref1; i = 0 <= _ref1 ? ++_i : --_i) {
                          if (this.rows != null) {
                            this.height[i] = this.rows[i];
                            this.width[i] = this.cols[i];
                          } else {
                            this.height[i] = this.image[i].length;
                            this.width[i] = this.image[i][0].length;
                          }
                          canvas = document.createElement('canvas');
                          canvas.width = this.width[i];
                          canvas.height = this.height[i];
                          ctx = canvas.getContext('2d');
                          image_data = ctx.getImageData(0, 0, this.width[i], this.height[i]);
                          if (this.rows != null) {
                            image_data.data.set(new Uint8ClampedArray(this.image[i]));
                          } else {
                            flat = _.flatten(this.image[i]);
                            buf = new ArrayBuffer(flat.length * 4);
                            color = new Uint32Array(buf);
                            for (j = _j = 0, _ref2 = flat.length; 0 <= _ref2 ? _j < _ref2 : _j > _ref2; j = 0 <= _ref2 ? ++_j : --_j) {
                              color[j] = flat[j];
                            }
                            buf8 = new Uint8ClampedArray(buf);
                            image_data.data.set(buf8);
                          }
                          ctx.putImageData(image_data, 0, 0);
                          _results.push(this.image_data[i] = canvas);
                        }
                        return _results;
                      };
                
                      ImageRGBAView.prototype._map_data = function() {
                        var _ref1;
                        _ref1 = this.plot_view.map_to_screen(this.x, this.glyph_props.x.units, this.y, this.glyph_props.y.units), this.sx = _ref1[0], this.sy = _ref1[1];
                        this.sw = this.distance_vector('x', 'dw', 'edge', this.mget('glyphspec')['dilate']);
                        return this.sh = this.distance_vector('y', 'dh', 'edge', this.mget('glyphspec')['dilate']);
                      };
                
                      ImageRGBAView.prototype._render = function(ctx, indices, glyph_props) {
                        var i, old_smoothing, y_offset, _i, _len;
                        old_smoothing = ctx.getImageSmoothingEnabled();
                        ctx.setImageSmoothingEnabled(false);
                        for (_i = 0, _len = indices.length; _i < _len; _i++) {
                          i = indices[_i];
                          if (isNaN(this.sx[i] + this.sy[i] + this.sw[i] + this.sh[i])) {
                            continue;
                          }
                          y_offset = this.sy[i];
                          ctx.translate(0, y_offset);
                          ctx.scale(1, -1);
                          ctx.translate(0, -y_offset);
                          ctx.drawImage(this.image_data[i], this.sx[i] | 0, this.sy[i] | 0, this.sw[i], this.sh[i]);
                          ctx.translate(0, y_offset);
                          ctx.scale(1, -1);
                          ctx.translate(0, -y_offset);
                        }
                        return ctx.setImageSmoothingEnabled(old_smoothing);
                      };
                
                      return ImageRGBAView;
                
                    })(Glyph.View);
                    ImageRGBAGlyph = (function(_super) {
                      __extends(ImageRGBAGlyph, _super);
                
                      function ImageRGBAGlyph() {
                        _ref1 = ImageRGBAGlyph.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      ImageRGBAGlyph.prototype.default_view = ImageRGBAView;
                
                      ImageRGBAGlyph.prototype.type = 'Glyph';
                
                      ImageRGBAGlyph.prototype.display_defaults = function() {
                        return _.extend(ImageRGBAGlyph.__super__.display_defaults.call(this), {
                          level: 'underlay',
                          dilate: false
                        });
                      };
                
                      return ImageRGBAGlyph;
                
                    })(Glyph.Model);
                    return {
                      "Model": ImageRGBAGlyph,
                      "View": ImageRGBAView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=image_rgba.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('renderer/glyph/image_url',["underscore", "renderer/properties", "./glyph"], function(_, Properties, Glyph) {
                    var ImageURLGlyph, ImageURLView, glyph_properties, _ref, _ref1;
                    glyph_properties = Properties.glyph_properties;
                    ImageURLView = (function(_super) {
                      __extends(ImageURLView, _super);
                
                      function ImageURLView() {
                        _ref = ImageURLView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      ImageURLView.prototype._fields = ['url:string', 'x', 'y', 'w', 'h', 'angle'];
                
                      ImageURLView.prototype._properties = [];
                
                      ImageURLView.prototype._set_data = function(data) {
                        var img;
                        this.data = data;
                        this.image = (function() {
                          var _i, _len, _ref1, _results;
                          _ref1 = this.url;
                          _results = [];
                          for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
                            img = _ref1[_i];
                            _results.push(null);
                          }
                          return _results;
                        }).call(this);
                        this.need_load = (function() {
                          var _i, _len, _ref1, _results;
                          _ref1 = this.url;
                          _results = [];
                          for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
                            img = _ref1[_i];
                            _results.push(true);
                          }
                          return _results;
                        }).call(this);
                        return this.loaded = (function() {
                          var _i, _len, _ref1, _results;
                          _ref1 = this.url;
                          _results = [];
                          for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
                            img = _ref1[_i];
                            _results.push(false);
                          }
                          return _results;
                        }).call(this);
                      };
                
                      ImageURLView.prototype._map_data = function() {
                        var _ref1;
                        _ref1 = this.plot_view.map_to_screen(this.x, this.glyph_props.x.units, this.y, this.glyph_props.y.units), this.sx = _ref1[0], this.sy = _ref1[1];
                        this.sw = this.distance_vector('x', 'w', 'edge', this.mget('glyphspec')['dilate']);
                        return this.sh = this.distance_vector('y', 'h', 'edge', this.mget('glyphspec')['dilate']);
                      };
                
                      ImageURLView.prototype._render = function(ctx, indices, glyph_props) {
                        var i, img, _i, _len, _results,
                          _this = this;
                        _results = [];
                        for (_i = 0, _len = indices.length; _i < _len; _i++) {
                          i = indices[_i];
                          if (isNaN(this.sx[i] + this.sy[i] + this.angle[i])) {
                            continue;
                          }
                          if (this.need_load[i]) {
                            img = new Image();
                            img.onload = (function(img, i) {
                              return function() {
                                var frame;
                                _this.loaded[i] = true;
                                _this.image[i] = img;
                                ctx.save();
                                ctx.beginPath();
                                frame = _this.plot_view.frame;
                                ctx.rect(frame.get('left') + 1, frame.get('bottom') + 1, frame.get('width') - 2, frame.get('height') - 2);
                                ctx.clip();
                                _this._render_image(ctx, i, img);
                                return ctx.restore();
                              };
                            })(img, i);
                            img.src = this.url[i];
                            _results.push(this.need_load[i] = false);
                          } else if (this.loaded[i]) {
                            _results.push(this._render_image(ctx, i, this.image[i]));
                          } else {
                            _results.push(void 0);
                          }
                        }
                        return _results;
                      };
                
                      ImageURLView.prototype._final_sx_sy = function() {
                        var anchor,
                          _this = this;
                        anchor = this.mget('glyphspec').anchor || "top_left";
                        switch (anchor) {
                          case "top_left":
                            return function(i) {
                              return [_this.sx[i], _this.sy[i]];
                            };
                          case "top_center":
                            return function(i) {
                              return [_this.sx[i] - _this.sw[i] / 2, _this.sy[i]];
                            };
                          case "top_right":
                            return function(i) {
                              return [_this.sx[i] - _this.sw[i], _this.sy[i]];
                            };
                          case "right_center":
                            return function(i) {
                              return [_this.sx[i] - _this.sw[i], _this.sy[i] - _this.sh[i] / 2];
                            };
                          case "bottom_right":
                            return function(i) {
                              return [_this.sx[i] - _this.sw[i], _this.sy[i] - _this.sh[i]];
                            };
                          case "bottom_center":
                            return function(i) {
                              return [_this.sx[i] - _this.sw[i] / 2, _this.sy[i] - _this.sh[i]];
                            };
                          case "bottom_left":
                            return function(i) {
                              return [_this.sx[i], _this.sy[i] - _this.sh[i]];
                            };
                          case "left_center":
                            return function(i) {
                              return [_this.sx[i], _this.sy[i] - _this.sh[i] / 2];
                            };
                          case "center":
                            return function(i) {
                              return [_this.sx[i] - _this.sw[i] / 2, _this.sy[i] - _this.sh[i] / 2];
                            };
                        }
                      };
                
                      ImageURLView.prototype._render_image = function(ctx, i, img) {
                        var sx, sy, _ref1;
                        if (isNaN(this.sw[i])) {
                          this.sw[i] = img.width;
                        }
                        if (isNaN(this.sh[i])) {
                          this.sh[i] = img.height;
                        }
                        _ref1 = this._final_sx_sy()(i), sx = _ref1[0], sy = _ref1[1];
                        if (this.angle[i]) {
                          ctx.translate(sx, sy);
                          ctx.rotate(this.angle[i]);
                          ctx.drawImage(img, 0, 0, this.sw[i], this.sh[i]);
                          ctx.rotate(-this.angle[i]);
                          return ctx.translate(-sx, -sy);
                        } else {
                          return ctx.drawImage(img, sx, sy, this.sw[i], this.sh[i]);
                        }
                      };
                
                      return ImageURLView;
                
                    })(Glyph.View);
                    ImageURLGlyph = (function(_super) {
                      __extends(ImageURLGlyph, _super);
                
                      function ImageURLGlyph() {
                        _ref1 = ImageURLGlyph.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      ImageURLGlyph.prototype.default_view = ImageURLView;
                
                      ImageURLGlyph.prototype.type = 'Glyph';
                
                      ImageURLGlyph.prototype.display_defaults = function() {
                        return _.extend(ImageURLGlyph.__super__.display_defaults.call(this), {
                          level: 'underlay'
                        });
                      };
                
                      return ImageURLGlyph;
                
                    })(Glyph.Model);
                    return {
                      "Model": ImageURLGlyph,
                      "View": ImageURLView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=image_url.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('renderer/glyph/inverted_triangle',["underscore", "renderer/properties", "./marker"], function(_, Properties, Marker) {
                    var InvertedTriangle, InvertedTriangleView, _ref, _ref1;
                    InvertedTriangleView = (function(_super) {
                      __extends(InvertedTriangleView, _super);
                
                      function InvertedTriangleView() {
                        _ref = InvertedTriangleView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      InvertedTriangleView.prototype._fields = ['x', 'y', 'size'];
                
                      InvertedTriangleView.prototype._properties = ['line', 'fill'];
                
                      InvertedTriangleView.prototype._render = function(ctx, indices, glyph_props, sx, sy, size) {
                        var a, h, i, r, _i, _len, _results;
                        if (sx == null) {
                          sx = this.sx;
                        }
                        if (sy == null) {
                          sy = this.sy;
                        }
                        if (size == null) {
                          size = this.size;
                        }
                        _results = [];
                        for (_i = 0, _len = indices.length; _i < _len; _i++) {
                          i = indices[_i];
                          if (isNaN(sx[i] + sy[i] + size[i])) {
                            continue;
                          }
                          a = size[i] * Math.sqrt(3) / 6;
                          r = size[i] / 2;
                          h = size[i] * Math.sqrt(3) / 2;
                          ctx.beginPath();
                          ctx.moveTo(sx[i] - r, sy[i] - a);
                          ctx.lineTo(sx[i] + r, sy[i] - a);
                          ctx.lineTo(sx[i], sy[i] - a + h);
                          ctx.closePath();
                          if (glyph_props.fill_properties.do_fill) {
                            glyph_props.fill_properties.set_vectorize(ctx, i);
                            ctx.fill();
                          }
                          if (glyph_props.line_properties.do_stroke) {
                            glyph_props.line_properties.set_vectorize(ctx, i);
                            _results.push(ctx.stroke());
                          } else {
                            _results.push(void 0);
                          }
                        }
                        return _results;
                      };
                
                      return InvertedTriangleView;
                
                    })(Marker.View);
                    InvertedTriangle = (function(_super) {
                      __extends(InvertedTriangle, _super);
                
                      function InvertedTriangle() {
                        _ref1 = InvertedTriangle.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      InvertedTriangle.prototype.default_view = InvertedTriangleView;
                
                      InvertedTriangle.prototype.type = 'Glyph';
                
                      InvertedTriangle.prototype.display_defaults = function() {
                        return _.extend(InvertedTriangle.__super__.display_defaults.call(this), {
                          fill_color: 'gray',
                          fill_alpha: 1.0,
                          line_color: 'red',
                          line_width: 1,
                          line_alpha: 1.0,
                          line_join: 'miter',
                          line_cap: 'butt',
                          line_dash: [],
                          line_dash_offset: 0
                        });
                      };
                
                      return InvertedTriangle;
                
                    })(Marker.Model);
                    return {
                      "Model": InvertedTriangle,
                      "View": InvertedTriangleView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=inverted_triangle.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('renderer/glyph/line',["underscore", "renderer/properties", "./glyph"], function(_, Properties, Glyph) {
                    var Line, LineView, _ref, _ref1;
                    LineView = (function(_super) {
                      __extends(LineView, _super);
                
                      function LineView() {
                        _ref = LineView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      LineView.prototype._fields = ['x', 'y'];
                
                      LineView.prototype._properties = ['line'];
                
                      LineView.prototype._map_data = function() {
                        var _ref1;
                        return _ref1 = this.plot_view.map_to_screen(this.x, this.glyph_props.x.units, this.y, this.glyph_props.y.units), this.sx = _ref1[0], this.sy = _ref1[1], _ref1;
                      };
                
                      LineView.prototype._render = function(ctx, indices, glyph_props) {
                        var drawing, i, _i, _len;
                        drawing = false;
                        glyph_props.line_properties.set(ctx, glyph_props);
                        for (_i = 0, _len = indices.length; _i < _len; _i++) {
                          i = indices[_i];
                          if (isNaN(this.sx[i] + this.sy[i]) && drawing) {
                            ctx.stroke();
                            ctx.beginPath();
                            drawing = false;
                            continue;
                          }
                          if (drawing) {
                            ctx.lineTo(this.sx[i], this.sy[i]);
                          } else {
                            ctx.beginPath();
                            ctx.moveTo(this.sx[i], this.sy[i]);
                            drawing = true;
                          }
                        }
                        if (drawing) {
                          return ctx.stroke();
                        }
                      };
                
                      LineView.prototype.draw_legend = function(ctx, x0, x1, y0, y1) {
                        return this._generic_line_legend(ctx, x0, x1, y0, y1);
                      };
                
                      return LineView;
                
                    })(Glyph.View);
                    Line = (function(_super) {
                      __extends(Line, _super);
                
                      function Line() {
                        _ref1 = Line.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      Line.prototype.default_view = LineView;
                
                      Line.prototype.type = 'Glyph';
                
                      Line.prototype.display_defaults = function() {
                        return _.extend(Line.__super__.display_defaults.call(this), {
                          line_color: 'red',
                          line_width: 1,
                          line_alpha: 1.0,
                          line_join: 'miter',
                          line_cap: 'butt',
                          line_dash: [],
                          line_dash_offset: 0
                        });
                      };
                
                      return Line;
                
                    })(Glyph.Model);
                    return {
                      "Model": Line,
                      "View": LineView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=line.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('renderer/glyph/multi_line',["underscore", "renderer/properties", "./glyph"], function(_, Properties, Glyph) {
                    var MultiLine, MultiLineView, _ref, _ref1;
                    MultiLineView = (function(_super) {
                      __extends(MultiLineView, _super);
                
                      function MultiLineView() {
                        _ref = MultiLineView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      MultiLineView.prototype._fields = ['xs', 'ys'];
                
                      MultiLineView.prototype._properties = ['line'];
                
                      MultiLineView.prototype._map_data = function() {
                        return null;
                      };
                
                      MultiLineView.prototype._render = function(ctx, indices, glyph_props) {
                        var i, j, sx, sy, x, y, _i, _j, _len, _ref1, _ref2, _results;
                        _results = [];
                        for (_i = 0, _len = indices.length; _i < _len; _i++) {
                          i = indices[_i];
                          x = this.xs[i];
                          y = this.ys[i];
                          _ref1 = this.plot_view.map_to_screen(x, this.glyph_props.xs.units, y, this.glyph_props.ys.units), sx = _ref1[0], sy = _ref1[1];
                          glyph_props.line_properties.set_vectorize(ctx, i);
                          for (j = _j = 0, _ref2 = sx.length; 0 <= _ref2 ? _j < _ref2 : _j > _ref2; j = 0 <= _ref2 ? ++_j : --_j) {
                            if (j === 0) {
                              ctx.beginPath();
                              ctx.moveTo(sx[j], sy[j]);
                              continue;
                            } else if (isNaN(sx[j]) || isNaN(sy[j])) {
                              ctx.stroke();
                              ctx.beginPath();
                              continue;
                            } else {
                              ctx.lineTo(sx[j], sy[j]);
                            }
                          }
                          _results.push(ctx.stroke());
                        }
                        return _results;
                      };
                
                      MultiLineView.prototype.draw_legend = function(ctx, x0, x1, y0, y1) {
                        return this._generic_line_legend(ctx, x0, x1, y0, y1);
                      };
                
                      return MultiLineView;
                
                    })(Glyph.View);
                    MultiLine = (function(_super) {
                      __extends(MultiLine, _super);
                
                      function MultiLine() {
                        _ref1 = MultiLine.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      MultiLine.prototype.default_view = MultiLineView;
                
                      MultiLine.prototype.type = 'Glyph';
                
                      MultiLine.prototype.display_defaults = function() {
                        return _.extend(MultiLine.__super__.display_defaults.call(this), {
                          line_color: 'red',
                          line_width: 1,
                          line_alpha: 1.0,
                          line_join: 'miter',
                          line_cap: 'butt',
                          line_dash: [],
                          line_dash_offset: 0
                        });
                      };
                
                      return MultiLine;
                
                    })(Glyph.Model);
                    return {
                      "Model": MultiLine,
                      "View": MultiLineView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=multi_line.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('renderer/glyph/oval',["underscore", "renderer/properties", "./glyph"], function(_, Properties, Glyph) {
                    var Oval, OvalView, _ref, _ref1;
                    OvalView = (function(_super) {
                      __extends(OvalView, _super);
                
                      function OvalView() {
                        _ref = OvalView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      OvalView.prototype._fields = ['x', 'y', 'width', 'height', 'angle'];
                
                      OvalView.prototype._properties = ['line', 'fill'];
                
                      OvalView.prototype._map_data = function() {
                        var _ref1;
                        _ref1 = this.plot_view.map_to_screen(this.x, this.glyph_props.x.units, this.y, this.glyph_props.y.units), this.sx = _ref1[0], this.sy = _ref1[1];
                        this.sw = this.distance_vector('x', 'width', 'center');
                        return this.sh = this.distance_vector('y', 'height', 'center');
                      };
                
                      OvalView.prototype._render = function(ctx, indices, glyph_props, sx, sy, sw, sh) {
                        var i, _i, _len, _results;
                        if (sx == null) {
                          sx = this.sx;
                        }
                        if (sy == null) {
                          sy = this.sy;
                        }
                        if (sw == null) {
                          sw = this.sw;
                        }
                        if (sh == null) {
                          sh = this.sh;
                        }
                        _results = [];
                        for (_i = 0, _len = indices.length; _i < _len; _i++) {
                          i = indices[_i];
                          if (isNaN(sx[i] + sy[i] + sw[i] + sh[i] + this.angle[i])) {
                            continue;
                          }
                          ctx.translate(sx[i], sy[i]);
                          ctx.rotate(this.angle[i]);
                          ctx.beginPath();
                          ctx.moveTo(0, -sh[i] / 2);
                          ctx.bezierCurveTo(sw[i] / 2, -sh[i] / 2, sw[i] / 2, sh[i] / 2, 0, sh[i] / 2);
                          ctx.bezierCurveTo(-sw[i] / 2, sh[i] / 2, -sw[i] / 2, -sh[i] / 2, 0, -sh[i] / 2);
                          ctx.closePath();
                          if (glyph_props.fill_properties.do_fill) {
                            glyph_props.fill_properties.set_vectorize(ctx, i);
                            ctx.fill();
                          }
                          if (glyph_props.line_properties.do_stroke) {
                            glyph_props.line_properties.set_vectorize(ctx, i);
                            ctx.stroke();
                          }
                          ctx.rotate(-this.angle[i]);
                          _results.push(ctx.translate(-sx[i], -sy[i]));
                        }
                        return _results;
                      };
                
                      OvalView.prototype.draw_legend = function(ctx, x0, x1, y0, y1) {
                        var d, indices, reference_point, scale, sh, sw, sx, sy, _ref1;
                        reference_point = (_ref1 = this.get_reference_point()) != null ? _ref1 : 0;
                        indices = [reference_point];
                        sx = {};
                        sx[reference_point] = (x0 + x1) / 2;
                        sy = {};
                        sy[reference_point] = (y0 + y1) / 2;
                        scale = this.sw[reference_point] / this.sh[reference_point];
                        d = Math.min(Math.abs(x1 - x0), Math.abs(y1 - y0)) * 0.8;
                        sw = {};
                        sh = {};
                        if (scale > 1) {
                          sw[reference_point] = d;
                          sh[reference_point] = d / scale;
                        } else {
                          sw[reference_point] = d * scale;
                          sh[reference_point] = d;
                        }
                        return this._render(ctx, indices, this.glyph_props, sx, sy, sw, sh);
                      };
                
                      return OvalView;
                
                    })(Glyph.View);
                    Oval = (function(_super) {
                      __extends(Oval, _super);
                
                      function Oval() {
                        _ref1 = Oval.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      Oval.prototype.default_view = OvalView;
                
                      Oval.prototype.type = 'Glyph';
                
                      Oval.prototype.display_defaults = function() {
                        return _.extend(Oval.__super__.display_defaults.call(this), {
                          fill_color: 'gray',
                          fill_alpha: 1.0,
                          line_color: 'red',
                          line_width: 1,
                          line_alpha: 1.0,
                          line_join: 'miter',
                          line_cap: 'butt',
                          line_dash: [],
                          line_dash_offset: 0,
                          angle: 0.0
                        });
                      };
                
                      return Oval;
                
                    })(Glyph.Model);
                    return {
                      "Model": Oval,
                      "View": OvalView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=oval.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('renderer/glyph/patch',["underscore", "renderer/properties", "./glyph"], function(_, Properties, Glyph) {
                    var Patch, PatchView, _ref, _ref1;
                    PatchView = (function(_super) {
                      __extends(PatchView, _super);
                
                      function PatchView() {
                        _ref = PatchView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      PatchView.prototype._fields = ['x', 'y'];
                
                      PatchView.prototype._properties = ['line', 'fill'];
                
                      PatchView.prototype._map_data = function() {
                        var _ref1;
                        return _ref1 = this.plot_view.map_to_screen(this.x, this.glyph_props.x.units, this.y, this.glyph_props.y.units), this.sx = _ref1[0], this.sy = _ref1[1], _ref1;
                      };
                
                      PatchView.prototype._render = function(ctx, indices, glyph_props) {
                        var i, _i, _j, _len, _len1;
                        if (glyph_props.fill_properties.do_fill) {
                          glyph_props.fill_properties.set(ctx, glyph_props);
                          for (_i = 0, _len = indices.length; _i < _len; _i++) {
                            i = indices[_i];
                            if (i === 0) {
                              ctx.beginPath();
                              ctx.moveTo(this.sx[i], this.sy[i]);
                              continue;
                            } else if (isNaN(this.sx[i] + this.sy[i])) {
                              ctx.closePath();
                              ctx.fill();
                              ctx.beginPath();
                              continue;
                            } else {
                              ctx.lineTo(this.sx[i], this.sy[i]);
                            }
                          }
                          ctx.closePath();
                          ctx.fill();
                        }
                        if (glyph_props.line_properties.do_stroke) {
                          glyph_props.line_properties.set(ctx, glyph_props);
                          for (_j = 0, _len1 = indices.length; _j < _len1; _j++) {
                            i = indices[_j];
                            if (i === 0) {
                              ctx.beginPath();
                              ctx.moveTo(this.sx[i], this.sy[i]);
                              continue;
                            } else if (isNaN(this.sx[i] + this.sy[i])) {
                              ctx.closePath();
                              ctx.stroke();
                              ctx.beginPath();
                              continue;
                            } else {
                              ctx.lineTo(this.sx[i], this.sy[i]);
                            }
                          }
                          ctx.closePath();
                          return ctx.stroke();
                        }
                      };
                
                      PatchView.prototype.draw_legend = function(ctx, x0, x1, y0, y1) {
                        return this._generic_area_legend(ctx, x0, x1, y0, y1);
                      };
                
                      return PatchView;
                
                    })(Glyph.View);
                    Patch = (function(_super) {
                      __extends(Patch, _super);
                
                      function Patch() {
                        _ref1 = Patch.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      Patch.prototype.default_view = PatchView;
                
                      Patch.prototype.type = 'Glyph';
                
                      Patch.prototype.display_defaults = function() {
                        return _.extend(Patch.__super__.display_defaults.call(this), {
                          fill_color: 'gray',
                          fill_alpha: 1.0,
                          line_color: 'red',
                          line_width: 1,
                          line_alpha: 1.0,
                          line_join: 'miter',
                          line_cap: 'butt',
                          line_dash: [],
                          line_dash_offset: 0
                        });
                      };
                
                      return Patch;
                
                    })(Glyph.Model);
                    return {
                      "Model": Patch,
                      "View": PatchView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=patch.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('renderer/glyph/patches',["underscore", "rbush", "renderer/properties", "./glyph"], function(_, rbush, Properties, Glyph) {
                    var Patches, PatchesView, point_in_poly, _ref, _ref1;
                    point_in_poly = function(x, y, px, py) {
                      var i, inside, x1, x2, y1, y2, _i, _ref;
                      inside = false;
                      x1 = px[px.length - 1];
                      y1 = py[py.length - 1];
                      for (i = _i = 0, _ref = px.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {
                        x2 = px[i];
                        y2 = py[i];
                        if ((y1 < y) !== (y2 < y)) {
                          if (x1 + (y - y1) / (y2 - y1) * (x2 - x1) < x) {
                            inside = !inside;
                          }
                        }
                        x1 = x2;
                        y1 = y2;
                      }
                      return inside;
                    };
                    PatchesView = (function(_super) {
                      __extends(PatchesView, _super);
                
                      function PatchesView() {
                        _ref = PatchesView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      PatchesView.prototype._fields = ['xs', 'ys'];
                
                      PatchesView.prototype._properties = ['line', 'fill'];
                
                      PatchesView.prototype._set_data = function() {
                        var i, pts, x, xs, y, ys, _i, _ref1;
                        this.max_size = _.max(this.size);
                        this.index = rbush();
                        pts = [];
                        for (i = _i = 0, _ref1 = this.xs.length; 0 <= _ref1 ? _i < _ref1 : _i > _ref1; i = 0 <= _ref1 ? ++_i : --_i) {
                          xs = (function() {
                            var _j, _len, _ref2, _results;
                            _ref2 = this.xs[i];
                            _results = [];
                            for (_j = 0, _len = _ref2.length; _j < _len; _j++) {
                              x = _ref2[_j];
                              if (!_.isNaN(x)) {
                                _results.push(x);
                              }
                            }
                            return _results;
                          }).call(this);
                          ys = (function() {
                            var _j, _len, _ref2, _results;
                            _ref2 = this.ys[i];
                            _results = [];
                            for (_j = 0, _len = _ref2.length; _j < _len; _j++) {
                              y = _ref2[_j];
                              if (!_.isNaN(y)) {
                                _results.push(y);
                              }
                            }
                            return _results;
                          }).call(this);
                          if (xs.length === 0) {
                            continue;
                          }
                          pts.push([
                            _.min(xs), _.min(ys), _.max(xs), _.max(ys), {
                              'i': i
                            }
                          ]);
                        }
                        return this.index.load(pts);
                      };
                
                      PatchesView.prototype._map_data = function() {
                        var i, sx, sy, _i, _ref1, _ref2, _results;
                        this.sxs = [];
                        this.sys = [];
                        _results = [];
                        for (i = _i = 0, _ref1 = this.xs.length; 0 <= _ref1 ? _i < _ref1 : _i > _ref1; i = 0 <= _ref1 ? ++_i : --_i) {
                          _ref2 = this.plot_view.map_to_screen(this.xs[i], this.glyph_props.xs.units, this.ys[i], this.glyph_props.ys.units), sx = _ref2[0], sy = _ref2[1];
                          this.sxs.push(sx);
                          _results.push(this.sys.push(sy));
                        }
                        return _results;
                      };
                
                      PatchesView.prototype._mask_data = function() {
                        var x, x0, x1, xr, y0, y1, yr, _ref1, _ref2;
                        if (this.glyph_props.xs.units === "screen" || this.glyph_props.ys.units === "screen") {
                          return this.all_indices;
                        }
                        xr = this.plot_view.x_range;
                        _ref1 = [xr.get('start'), xr.get('end')], x0 = _ref1[0], x1 = _ref1[1];
                        yr = this.plot_view.y_range;
                        _ref2 = [yr.get('start'), yr.get('end')], y0 = _ref2[0], y1 = _ref2[1];
                        return (function() {
                          var _i, _len, _ref3, _results;
                          _ref3 = this.index.search([x0, y0, x1, y1]);
                          _results = [];
                          for (_i = 0, _len = _ref3.length; _i < _len; _i++) {
                            x = _ref3[_i];
                            _results.push(x[4].i);
                          }
                          return _results;
                        }).call(this);
                      };
                
                      PatchesView.prototype._render = function(ctx, indices, glyph_props) {
                        var i, j, sx, sy, _i, _j, _k, _len, _ref1, _ref2, _ref3, _results;
                        _results = [];
                        for (_i = 0, _len = indices.length; _i < _len; _i++) {
                          i = indices[_i];
                          _ref1 = [this.sxs[i], this.sys[i]], sx = _ref1[0], sy = _ref1[1];
                          if (glyph_props.fill_properties.do_fill) {
                            glyph_props.fill_properties.set_vectorize(ctx, i);
                            for (j = _j = 0, _ref2 = sx.length; 0 <= _ref2 ? _j < _ref2 : _j > _ref2; j = 0 <= _ref2 ? ++_j : --_j) {
                              if (j === 0) {
                                ctx.beginPath();
                                ctx.moveTo(sx[j], sy[j]);
                                continue;
                              } else if (isNaN(sx[j] + sy[j])) {
                                ctx.closePath();
                                ctx.fill();
                                ctx.beginPath();
                                continue;
                              } else {
                                ctx.lineTo(sx[j], sy[j]);
                              }
                            }
                            ctx.closePath();
                            ctx.fill();
                          }
                          if (glyph_props.line_properties.do_stroke) {
                            glyph_props.line_properties.set_vectorize(ctx, i);
                            for (j = _k = 0, _ref3 = sx.length; 0 <= _ref3 ? _k < _ref3 : _k > _ref3; j = 0 <= _ref3 ? ++_k : --_k) {
                              if (j === 0) {
                                ctx.beginPath();
                                ctx.moveTo(sx[j], sy[j]);
                                continue;
                              } else if (isNaN(sx[j] + sy[j])) {
                                ctx.closePath();
                                ctx.stroke();
                                ctx.beginPath();
                                continue;
                              } else {
                                ctx.lineTo(sx[j], sy[j]);
                              }
                            }
                            ctx.closePath();
                            _results.push(ctx.stroke());
                          } else {
                            _results.push(void 0);
                          }
                        }
                        return _results;
                      };
                
                      PatchesView.prototype._hit_point = function(geometry) {
                        var candidates, hits, i, idx, sx, sy, vx, vy, x, y, _i, _ref1, _ref2;
                        _ref1 = [geometry.vx, geometry.vy], vx = _ref1[0], vy = _ref1[1];
                        sx = this.plot_view.canvas.vx_to_sx(vx);
                        sy = this.plot_view.canvas.vy_to_sy(vy);
                        x = this.plot_view.xmapper.map_from_target(vx);
                        y = this.plot_view.ymapper.map_from_target(vy);
                        candidates = (function() {
                          var _i, _len, _ref2, _results;
                          _ref2 = this.index.search([x, y, x, y]);
                          _results = [];
                          for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
                            x = _ref2[_i];
                            _results.push(x[4].i);
                          }
                          return _results;
                        }).call(this);
                        hits = [];
                        for (i = _i = 0, _ref2 = candidates.length; 0 <= _ref2 ? _i < _ref2 : _i > _ref2; i = 0 <= _ref2 ? ++_i : --_i) {
                          idx = candidates[i];
                          if (point_in_poly(sx, sy, this.sxs[idx], this.sys[idx])) {
                            hits.push(idx);
                          }
                        }
                        return hits;
                      };
                
                      PatchesView.prototype.draw_legend = function(ctx, x0, x1, y0, y1) {
                        return this._generic_area_legend(ctx, x0, x1, y0, y1);
                      };
                
                      return PatchesView;
                
                    })(Glyph.View);
                    Patches = (function(_super) {
                      __extends(Patches, _super);
                
                      function Patches() {
                        _ref1 = Patches.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      Patches.prototype.default_view = PatchesView;
                
                      Patches.prototype.type = 'Glyph';
                
                      Patches.prototype.display_defaults = function() {
                        return _.extend(Patches.__super__.display_defaults.call(this), {
                          fill_color: 'gray',
                          fill_alpha: 1.0,
                          line_color: 'red',
                          line_width: 1,
                          line_alpha: 1.0,
                          line_join: 'miter',
                          line_cap: 'butt',
                          line_dash: [],
                          line_dash_offset: 0
                        });
                      };
                
                      return Patches;
                
                    })(Glyph.Model);
                    return {
                      "Model": Patches,
                      "View": PatchesView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=patches.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('renderer/glyph/cross',["underscore", "renderer/properties", "./marker"], function(_, Properties, Marker) {
                    var Cross, CrossView, _ref, _ref1;
                    CrossView = (function(_super) {
                      __extends(CrossView, _super);
                
                      function CrossView() {
                        _ref = CrossView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      CrossView.prototype._properties = ['line'];
                
                      CrossView.prototype._render = function(ctx, indices, glyph_props, sx, sy, size) {
                        var i, r, _i, _len, _results;
                        if (sx == null) {
                          sx = this.sx;
                        }
                        if (sy == null) {
                          sy = this.sy;
                        }
                        if (size == null) {
                          size = this.size;
                        }
                        _results = [];
                        for (_i = 0, _len = indices.length; _i < _len; _i++) {
                          i = indices[_i];
                          if (isNaN(sx[i] + sy[i] + size[i])) {
                            continue;
                          }
                          r = size[i] / 2;
                          ctx.beginPath();
                          ctx.moveTo(sx[i], sy[i] + r);
                          ctx.lineTo(sx[i], sy[i] - r);
                          ctx.moveTo(sx[i] - r, sy[i]);
                          ctx.lineTo(sx[i] + r, sy[i]);
                          if (glyph_props.line_properties.do_stroke) {
                            glyph_props.line_properties.set_vectorize(ctx, i);
                            _results.push(ctx.stroke());
                          } else {
                            _results.push(void 0);
                          }
                        }
                        return _results;
                      };
                
                      return CrossView;
                
                    })(Marker.View);
                    Cross = (function(_super) {
                      __extends(Cross, _super);
                
                      function Cross() {
                        _ref1 = Cross.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      Cross.prototype.default_view = CrossView;
                
                      Cross.prototype.type = 'Glyph';
                
                      Cross.prototype.display_defaults = function() {
                        return _.extend(Cross.__super__.display_defaults.call(this), {
                          line_color: 'red',
                          line_width: 1,
                          line_alpha: 1.0,
                          line_join: 'miter',
                          line_cap: 'butt',
                          line_dash: [],
                          line_dash_offset: 0
                        });
                      };
                
                      return Cross;
                
                    })(Marker.Model);
                    return {
                      "Model": Cross,
                      "View": CrossView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=cross.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('renderer/glyph/quad',["underscore", "rbush", "renderer/properties", "./glyph"], function(_, rbush, Properties, Glyph) {
                    var Quad, QuadView, _ref, _ref1;
                    QuadView = (function(_super) {
                      __extends(QuadView, _super);
                
                      function QuadView() {
                        _ref = QuadView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      QuadView.prototype._fields = ['right', 'left', 'bottom', 'top'];
                
                      QuadView.prototype._properties = ['line', 'fill'];
                
                      QuadView.prototype._map_data = function() {
                        var _ref1, _ref2;
                        _ref1 = this.plot_view.map_to_screen(this.left, this.glyph_props.left.units, this.top, this.glyph_props.top.units), this.sx0 = _ref1[0], this.sy0 = _ref1[1];
                        return _ref2 = this.plot_view.map_to_screen(this.right, this.glyph_props.right.units, this.bottom, this.glyph_props.bottom.units), this.sx1 = _ref2[0], this.sy1 = _ref2[1], _ref2;
                      };
                
                      QuadView.prototype._render = function(ctx, indices, glyph_props, sx0, sx1, sy0, sy1) {
                        var i, _i, _len, _results;
                        if (sx0 == null) {
                          sx0 = this.sx0;
                        }
                        if (sx1 == null) {
                          sx1 = this.sx1;
                        }
                        if (sy0 == null) {
                          sy0 = this.sy0;
                        }
                        if (sy1 == null) {
                          sy1 = this.sy1;
                        }
                        _results = [];
                        for (_i = 0, _len = indices.length; _i < _len; _i++) {
                          i = indices[_i];
                          if (isNaN(sx0[i] + sy0[i] + sx1[i] + sy1[i])) {
                            continue;
                          }
                          if (glyph_props.fill_properties.do_fill) {
                            glyph_props.fill_properties.set_vectorize(ctx, i);
                            ctx.fillRect(sx0[i], sy0[i], sx1[i] - sx0[i], sy1[i] - sy0[i]);
                          }
                          if (glyph_props.line_properties.do_stroke) {
                            ctx.beginPath();
                            ctx.rect(sx0[i], sy0[i], sx1[i] - sx0[i], sy1[i] - sy0[i]);
                            glyph_props.line_properties.set_vectorize(ctx, i);
                            _results.push(ctx.stroke());
                          } else {
                            _results.push(void 0);
                          }
                        }
                        return _results;
                      };
                
                      QuadView.prototype._hit_point = function(geometry) {
                        var hits, i, sx, sy, vx, vy, _i, _ref1, _ref2;
                        _ref1 = [geometry.vx, geometry.vy], vx = _ref1[0], vy = _ref1[1];
                        sx = this.plot_view.canvas.vx_to_sx(vx);
                        sy = this.plot_view.canvas.vy_to_sy(vy);
                        hits = [];
                        for (i = _i = 0, _ref2 = this.sx0.length; 0 <= _ref2 ? _i < _ref2 : _i > _ref2; i = 0 <= _ref2 ? ++_i : --_i) {
                          if (sx >= this.sx0[i] && sx <= this.sx1[i] && sy >= this.sy0[i] && sy < this.sy1[i]) {
                            hits.push(i);
                          }
                        }
                        return hits;
                      };
                
                      QuadView.prototype.draw_legend = function(ctx, x0, x1, y0, y1) {
                        return this._generic_area_legend(ctx, x0, x1, y0, y1);
                      };
                
                      return QuadView;
                
                    })(Glyph.View);
                    Quad = (function(_super) {
                      __extends(Quad, _super);
                
                      function Quad() {
                        _ref1 = Quad.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      Quad.prototype.default_view = QuadView;
                
                      Quad.prototype.type = 'Glyph';
                
                      Quad.prototype.display_defaults = function() {
                        return _.extend(Quad.__super__.display_defaults.call(this), {
                          fill_color: 'gray',
                          fill_alpha: 1.0,
                          line_color: 'red',
                          line_width: 1,
                          line_alpha: 1.0,
                          line_join: 'miter',
                          line_cap: 'butt',
                          line_dash: [],
                          line_dash_offset: 0
                        });
                      };
                
                      return Quad;
                
                    })(Glyph.Model);
                    return {
                      "Model": Quad,
                      "View": QuadView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=quad.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('renderer/glyph/quadratic',["underscore", "renderer/properties", "./glyph"], function(_, Properties, Glyph) {
                    var Quadratic, QuadraticView, _ref, _ref1;
                    QuadraticView = (function(_super) {
                      __extends(QuadraticView, _super);
                
                      function QuadraticView() {
                        _ref = QuadraticView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      QuadraticView.prototype._fields = ['x0', 'y0', 'x1', 'y1', 'cx', 'cy'];
                
                      QuadraticView.prototype._properties = ['line'];
                
                      QuadraticView.prototype._map_data = function() {
                        var _ref1, _ref2, _ref3;
                        _ref1 = this.plot_view.map_to_screen(this.x0, this.glyph_props.x0.units, this.y0, this.glyph_props.y0.units), this.sx0 = _ref1[0], this.sy0 = _ref1[1];
                        _ref2 = this.plot_view.map_to_screen(this.x1, this.glyph_props.x1.units, this.y1, this.glyph_props.y1.units), this.sx1 = _ref2[0], this.sy1 = _ref2[1];
                        return _ref3 = this.plot_view.map_to_screen(this.cx, this.glyph_props.cx.units, this.cy, this.glyph_props.cy.units), this.scx = _ref3[0], this.scy = _ref3[1], _ref3;
                      };
                
                      QuadraticView.prototype._render = function(ctx, indices, glyph_props) {
                        var i, _i, _len, _results;
                        if (glyph_props.line_properties.do_stroke) {
                          _results = [];
                          for (_i = 0, _len = indices.length; _i < _len; _i++) {
                            i = indices[_i];
                            if (isNaN(this.sx0[i] + this.sy0[i] + this.sx1[i] + this.sy1[i] + this.scx[i] + this.scy[i])) {
                              continue;
                            }
                            ctx.beginPath();
                            ctx.moveTo(this.sx0[i], this.sy0[i]);
                            ctx.quadraticCurveTo(this.scx[i], this.scy[i], this.sx1[i], this.sy1[i]);
                            glyph_props.line_properties.set_vectorize(ctx, i);
                            _results.push(ctx.stroke());
                          }
                          return _results;
                        }
                      };
                
                      QuadraticView.prototype.draw_legend = function(ctx, x0, x1, y0, y1) {
                        return this._generic_line_legend(ctx, x0, x1, y0, y1);
                      };
                
                      return QuadraticView;
                
                    })(Glyph.View);
                    Quadratic = (function(_super) {
                      __extends(Quadratic, _super);
                
                      function Quadratic() {
                        _ref1 = Quadratic.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      Quadratic.prototype.default_view = QuadraticView;
                
                      Quadratic.prototype.type = 'Glyph';
                
                      Quadratic.prototype.display_defaults = function() {
                        return _.extend(Quadratic.__super__.display_defaults.call(this), {
                          line_color: 'red',
                          line_width: 1,
                          line_alpha: 1.0,
                          line_join: 'miter',
                          line_cap: 'butt',
                          line_dash: [],
                          line_dash_offset: 0
                        });
                      };
                
                      return Quadratic;
                
                    })(Glyph.Model);
                    return {
                      "Model": Quadratic,
                      "View": QuadraticView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=quadratic.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('renderer/glyph/ray',["underscore", "renderer/properties", "./glyph"], function(_, Properties, Glyph) {
                    var Ray, RayView, _ref, _ref1;
                    RayView = (function(_super) {
                      __extends(RayView, _super);
                
                      function RayView() {
                        _ref = RayView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      RayView.prototype._fields = ['x', 'y', 'angle', 'length'];
                
                      RayView.prototype._properties = ['line'];
                
                      RayView.prototype._map_data = function() {
                        var height, i, inf_len, width, _i, _ref1, _ref2, _results;
                        _ref1 = this.plot_view.map_to_screen(this.x, this.glyph_props.x.units, this.y, this.glyph_props.y.units), this.sx = _ref1[0], this.sy = _ref1[1];
                        this.length = this.distance_vector('x', 'length', 'edge');
                        width = this.plot_view.frame.get('width');
                        height = this.plot_view.frame.get('height');
                        inf_len = 2 * (width + height);
                        _results = [];
                        for (i = _i = 0, _ref2 = this.length.length; 0 <= _ref2 ? _i < _ref2 : _i > _ref2; i = 0 <= _ref2 ? ++_i : --_i) {
                          if (this.length[i] === 0) {
                            _results.push(this.length[i] = inf_len);
                          } else {
                            _results.push(void 0);
                          }
                        }
                        return _results;
                      };
                
                      RayView.prototype._render = function(ctx, indices, glyph_props) {
                        var i, _i, _len, _results;
                        if (glyph_props.line_properties.do_stroke) {
                          _results = [];
                          for (_i = 0, _len = indices.length; _i < _len; _i++) {
                            i = indices[_i];
                            if (isNaN(this.sx[i] + this.sy[i] + this.angle[i] + this.length[i])) {
                              continue;
                            }
                            ctx.translate(this.sx[i], this.sy[i]);
                            ctx.rotate(this.angle[i]);
                            ctx.beginPath();
                            ctx.moveTo(0, 0);
                            ctx.lineTo(this.length[i], 0);
                            glyph_props.line_properties.set_vectorize(ctx, i);
                            ctx.stroke();
                            ctx.rotate(-this.angle[i]);
                            _results.push(ctx.translate(-this.sx[i], -this.sy[i]));
                          }
                          return _results;
                        }
                      };
                
                      RayView.prototype.draw_legend = function(ctx, x0, x1, y0, y1) {
                        return this._generic_line_legend(ctx, x0, x1, y0, y1);
                      };
                
                      return RayView;
                
                    })(Glyph.View);
                    Ray = (function(_super) {
                      __extends(Ray, _super);
                
                      function Ray() {
                        _ref1 = Ray.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      Ray.prototype.default_view = RayView;
                
                      Ray.prototype.type = 'Glyph';
                
                      Ray.prototype.display_defaults = function() {
                        return _.extend(Ray.__super__.display_defaults.call(this), {
                          line_color: 'red',
                          line_width: 1,
                          line_alpha: 1.0,
                          line_join: 'miter',
                          line_cap: 'butt',
                          line_dash: [],
                          line_dash_offset: 0
                        });
                      };
                
                      return Ray;
                
                    })(Glyph.Model);
                    return {
                      "Model": Ray,
                      "View": RayView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=ray.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('renderer/glyph/rect',["underscore", "rbush", "renderer/properties", "./glyph"], function(_, rbush, Properties, Glyph) {
                    var Rect, RectView, _ref, _ref1;
                    RectView = (function(_super) {
                      __extends(RectView, _super);
                
                      function RectView() {
                        _ref = RectView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      RectView.prototype._fields = ['x', 'y', 'width', 'height', 'angle'];
                
                      RectView.prototype._properties = ['line', 'fill'];
                
                      RectView.prototype._map_data = function() {
                        var i, sxi, syi, _i, _ref1, _ref2;
                        _ref1 = this.plot_view.map_to_screen(this.x, this.glyph_props.x.units, this.y, this.glyph_props.y.units), sxi = _ref1[0], syi = _ref1[1];
                        this.sw = this.distance_vector('x', 'width', 'center', this.mget('glyphspec')['dilate']);
                        this.sh = this.distance_vector('y', 'height', 'center', this.mget('glyphspec')['dilate']);
                        this.sx = new Array(sxi.length);
                        this.sy = new Array(sxi.length);
                        for (i = _i = 0, _ref2 = sxi.length; 0 <= _ref2 ? _i < _ref2 : _i > _ref2; i = 0 <= _ref2 ? ++_i : --_i) {
                          if (Math.abs(sxi[i] - this.sw[i]) < 2) {
                            this.sx[i] = Math.round(sxi[i]);
                          } else {
                            this.sx[i] = sxi[i];
                          }
                          if (Math.abs(syi[i] - this.sh[i]) < 2) {
                            this.sy[i] = Math.round(syi[i]);
                          } else {
                            this.sy[i] = syi[i];
                          }
                        }
                        this.max_width = _.max(this.width);
                        return this.max_height = _.max(this.height);
                      };
                
                      RectView.prototype._set_data = function() {
                        var i, pts, _i, _ref1;
                        this.index = rbush();
                        pts = [];
                        for (i = _i = 0, _ref1 = this.x.length; 0 <= _ref1 ? _i < _ref1 : _i > _ref1; i = 0 <= _ref1 ? ++_i : --_i) {
                          if (!isNaN(this.x[i] + this.y[i])) {
                            pts.push([
                              this.x[i], this.y[i], this.x[i], this.y[i], {
                                'i': i
                              }
                            ]);
                          }
                        }
                        return this.index.load(pts);
                      };
                
                      RectView.prototype._render = function(ctx, indices, glyph_props, sx, sy, sw, sh) {
                        var i, _i, _j, _len, _len1;
                        if (sx == null) {
                          sx = this.sx;
                        }
                        if (sy == null) {
                          sy = this.sy;
                        }
                        if (sw == null) {
                          sw = this.sw;
                        }
                        if (sh == null) {
                          sh = this.sh;
                        }
                        if (glyph_props.fill_properties.do_fill) {
                          for (_i = 0, _len = indices.length; _i < _len; _i++) {
                            i = indices[_i];
                            if (isNaN(sx[i] + sy[i] + sw[i] + sh[i] + this.angle[i])) {
                              continue;
                            }
                            glyph_props.fill_properties.set_vectorize(ctx, i);
                            if (this.angle[i]) {
                              ctx.translate(sx[i], sy[i]);
                              ctx.rotate(this.angle[i]);
                              ctx.fillRect(-sw[i] / 2, -sh[i] / 2, sw[i], sh[i]);
                              ctx.rotate(-this.angle[i]);
                              ctx.translate(-sx[i], -sy[i]);
                            } else {
                              ctx.fillRect(sx[i] - sw[i] / 2, sy[i] - sh[i] / 2, sw[i], sh[i]);
                            }
                          }
                        }
                        if (glyph_props.line_properties.do_stroke) {
                          ctx.beginPath();
                          for (_j = 0, _len1 = indices.length; _j < _len1; _j++) {
                            i = indices[_j];
                            if (isNaN(sx[i] + sy[i] + sw[i] + sh[i] + this.angle[i])) {
                              continue;
                            }
                            if (sw[i] === 0 || sh[i] === 0) {
                              continue;
                            }
                            if (this.angle[i]) {
                              ctx.translate(sx[i], sy[i]);
                              ctx.rotate(this.angle[i]);
                              ctx.rect(-sw[i] / 2, -sh[i] / 2, sw[i], sh[i]);
                              ctx.rotate(-this.angle[i]);
                              ctx.translate(-sx[i], -sy[i]);
                            } else {
                              ctx.rect(sx[i] - sw[i] / 2, sy[i] - sh[i] / 2, sw[i], sh[i]);
                            }
                            glyph_props.line_properties.set_vectorize(ctx, i);
                            ctx.stroke();
                            ctx.beginPath();
                          }
                          return ctx.stroke();
                        }
                      };
                
                      RectView.prototype._hit_rect = function(geometry) {
                        var x, x0, x1, y0, y1, _ref1, _ref2;
                        _ref1 = this.plot_view.xmapper.v_map_from_target([geometry.vx0, geometry.vx1]), x0 = _ref1[0], x1 = _ref1[1];
                        _ref2 = this.plot_view.ymapper.v_map_from_target([geometry.vy0, geometry.vy1]), y0 = _ref2[0], y1 = _ref2[1];
                        return (function() {
                          var _i, _len, _ref3, _results;
                          _ref3 = this.index.search([x0, y0, x1, y1]);
                          _results = [];
                          for (_i = 0, _len = _ref3.length; _i < _len; _i++) {
                            x = _ref3[_i];
                            _results.push(x[4].i);
                          }
                          return _results;
                        }).call(this);
                      };
                
                      RectView.prototype._hit_point = function(geometry) {
                        var c, candidates, d, height_in, hits, i, max_height, max_width, pt, px, py, s, sx, sy, vx, vx0, vx1, vy, vy0, vy1, width_in, x, x0, x1, xcat, y, y0, y1, ycat, _i, _len, _ref1, _ref2, _ref3;
                        _ref1 = [geometry.vx, geometry.vy], vx = _ref1[0], vy = _ref1[1];
                        x = this.plot_view.xmapper.map_from_target(vx);
                        y = this.plot_view.ymapper.map_from_target(vy);
                        xcat = typeof x === "string";
                        ycat = typeof y === "string";
                        if (xcat || ycat) {
                          candidates = (function() {
                            var _i, _ref2, _results;
                            _results = [];
                            for (i = _i = 0, _ref2 = this.x.length; 0 <= _ref2 ? _i < _ref2 : _i > _ref2; i = 0 <= _ref2 ? ++_i : --_i) {
                              _results.push(i);
                            }
                            return _results;
                          }).call(this);
                        } else {
                          if (this.width_units === "screen" || xcat) {
                            max_width = this.max_width;
                            if (xcat) {
                              max_width = this.plot_view.xmapper.map_to_target(max_width);
                            }
                            vx0 = vx - 2 * max_width;
                            vx1 = vx + 2 * max_width;
                            _ref2 = this.plot_view.xmapper.v_map_from_target([vx0, vx1]), x0 = _ref2[0], x1 = _ref2[1];
                          } else {
                            x0 = x - 2 * this.max_width;
                            x1 = x + 2 * this.max_width;
                          }
                          if (this.height_units === "screen" || ycat) {
                            max_height = this.max_height;
                            if (ycat) {
                              max_height = this.plot_view.ymapper.map_to_target(max_height);
                            }
                            vy0 = vy - 2 * max_height;
                            vy1 = vy + 2 * max_height;
                            _ref3 = this.plot_view.ymapper.v_map_from_target([vy0, vy1]), y0 = _ref3[0], y1 = _ref3[1];
                          } else {
                            y0 = y - 2 * this.max_height;
                            y1 = y + 2 * this.max_height;
                          }
                          candidates = (function() {
                            var _i, _len, _ref4, _results;
                            _ref4 = this.index.search([x0, y0, x1, y1]);
                            _results = [];
                            for (_i = 0, _len = _ref4.length; _i < _len; _i++) {
                              pt = _ref4[_i];
                              _results.push(pt[4].i);
                            }
                            return _results;
                          }).call(this);
                        }
                        hits = [];
                        for (_i = 0, _len = candidates.length; _i < _len; _i++) {
                          i = candidates[_i];
                          if (this.width_units === "screen" || xcat) {
                            sx = this.plot_view.canvas.vx_to_sx(vx);
                          } else {
                            sx = this.plot_view.canvas.vx_to_sx(this.plot_view.xmapper.map_to_target(x));
                          }
                          if (this.height_units === "screen" || ycat) {
                            sy = this.plot_view.canvas.vy_to_sy(vy);
                          } else {
                            sy = this.plot_view.canvas.vy_to_sy(this.plot_view.ymapper.map_to_target(y));
                          }
                          if (this.angle[i]) {
                            d = Math.sqrt(Math.pow(sx - this.sx[i], 2) + Math.pow(sy - this.sy[i], 2));
                            s = Math.sin(-this.angle[i]);
                            c = Math.cos(-this.angle[i]);
                            px = c * (sx - this.sx[i]) - s * (sy - this.sy[i]) + this.sx[i];
                            py = s * (sx - this.sx[i]) + c * (sy - this.sy[i]) + this.sy[i];
                            sx = px;
                            sy = py;
                          }
                          width_in = Math.abs(this.sx[i] - sx) <= this.sw[i] / 2;
                          height_in = Math.abs(this.sy[i] - sy) <= this.sh[i] / 2;
                          if (height_in && width_in) {
                            hits.push(i);
                          }
                        }
                        return hits;
                      };
                
                      RectView.prototype.draw_legend = function(ctx, x0, x1, y0, y1) {
                        return this._generic_area_legend(ctx, x0, x1, y0, y1);
                      };
                
                      return RectView;
                
                    })(Glyph.View);
                    Rect = (function(_super) {
                      __extends(Rect, _super);
                
                      function Rect() {
                        _ref1 = Rect.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      Rect.prototype.default_view = RectView;
                
                      Rect.prototype.type = 'Glyph';
                
                      Rect.prototype.display_defaults = function() {
                        return _.extend(Rect.__super__.display_defaults.call(this), {
                          fill_color: 'gray',
                          fill_alpha: 1.0,
                          line_color: 'red',
                          line_width: 1,
                          line_alpha: 1.0,
                          line_join: 'miter',
                          line_cap: 'butt',
                          line_dash: [],
                          line_dash_offset: 0,
                          angle: 0.0,
                          dilate: false
                        });
                      };
                
                      return Rect;
                
                    })(Glyph.Model);
                    return {
                      "Model": Rect,
                      "View": RectView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=rect.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('renderer/glyph/square',["underscore", "renderer/properties", "./marker"], function(_, Properties, Marker) {
                    var Square, SquareView, _ref, _ref1;
                    SquareView = (function(_super) {
                      __extends(SquareView, _super);
                
                      function SquareView() {
                        _ref = SquareView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      SquareView.prototype._properties = ['line', 'fill'];
                
                      SquareView.prototype._render = function(ctx, indices, glyph_props, sx, sy, size) {
                        var i, _i, _len, _results;
                        if (sx == null) {
                          sx = this.sx;
                        }
                        if (sy == null) {
                          sy = this.sy;
                        }
                        if (size == null) {
                          size = this.size;
                        }
                        _results = [];
                        for (_i = 0, _len = indices.length; _i < _len; _i++) {
                          i = indices[_i];
                          if (isNaN(sx[i] + sy[i] + size[i])) {
                            continue;
                          }
                          ctx.translate(sx[i], sy[i]);
                          ctx.beginPath();
                          ctx.rect(-size[i] / 2, -size[i] / 2, size[i], size[i]);
                          if (glyph_props.fill_properties.do_fill) {
                            glyph_props.fill_properties.set_vectorize(ctx, i);
                            ctx.fill();
                          }
                          if (glyph_props.line_properties.do_stroke) {
                            glyph_props.line_properties.set_vectorize(ctx, i);
                            ctx.stroke();
                          }
                          _results.push(ctx.translate(-sx[i], -sy[i]));
                        }
                        return _results;
                      };
                
                      return SquareView;
                
                    })(Marker.View);
                    Square = (function(_super) {
                      __extends(Square, _super);
                
                      function Square() {
                        _ref1 = Square.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      Square.prototype.default_view = SquareView;
                
                      Square.prototype.type = 'Glyph';
                
                      Square.prototype.display_defaults = function() {
                        return _.extend(Square.__super__.display_defaults.call(this), {
                          size_units: 'screen',
                          fill_color: 'gray',
                          fill_alpha: 1.0,
                          line_color: 'red',
                          line_width: 1,
                          line_alpha: 1.0,
                          line_join: 'miter',
                          line_cap: 'butt',
                          line_dash: [],
                          line_dash_offset: 0
                        });
                      };
                
                      return Square;
                
                    })(Marker.Model);
                    return {
                      "Model": Square,
                      "View": SquareView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=square.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('renderer/glyph/square_x',["underscore", "renderer/properties", "./marker"], function(_, Properties, Marker) {
                    var SquareX, SquareXView, _ref, _ref1;
                    SquareXView = (function(_super) {
                      __extends(SquareXView, _super);
                
                      function SquareXView() {
                        _ref = SquareXView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      SquareXView.prototype._properties = ['line', 'fill'];
                
                      SquareXView.prototype._render = function(ctx, indices, glyph_props, sx, sy, size) {
                        var i, r, _i, _len, _results;
                        if (sx == null) {
                          sx = this.sx;
                        }
                        if (sy == null) {
                          sy = this.sy;
                        }
                        if (size == null) {
                          size = this.size;
                        }
                        _results = [];
                        for (_i = 0, _len = indices.length; _i < _len; _i++) {
                          i = indices[_i];
                          if (isNaN(sx[i] + sy[i] + size[i])) {
                            continue;
                          }
                          ctx.translate(sx[i], sy[i]);
                          ctx.beginPath();
                          ctx.rect(-size[i] / 2, -size[i] / 2, size[i], size[i]);
                          if (glyph_props.fill_properties.do_fill) {
                            glyph_props.fill_properties.set_vectorize(ctx, i);
                            ctx.fill();
                          }
                          if (glyph_props.line_properties.do_stroke) {
                            glyph_props.line_properties.set_vectorize(ctx, i);
                            ctx.stroke();
                            r = size[i] / 2;
                            ctx.moveTo(-r, +r);
                            ctx.lineTo(+r, -r);
                            ctx.moveTo(-r, -r);
                            ctx.lineTo(+r, +r);
                            ctx.stroke();
                          }
                          _results.push(ctx.translate(-sx[i], -sy[i]));
                        }
                        return _results;
                      };
                
                      return SquareXView;
                
                    })(Marker.View);
                    SquareX = (function(_super) {
                      __extends(SquareX, _super);
                
                      function SquareX() {
                        _ref1 = SquareX.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      SquareX.prototype.default_view = SquareXView;
                
                      SquareX.prototype.type = 'Glyph';
                
                      SquareX.prototype.display_defaults = function() {
                        return _.extend(SquareX.__super__.display_defaults.call(this), {
                          size_units: 'screen',
                          fill_color: 'gray',
                          fill_alpha: 1.0,
                          line_color: 'red',
                          line_width: 1,
                          line_alpha: 1.0,
                          line_join: 'miter',
                          line_cap: 'butt',
                          line_dash: [],
                          line_dash_offset: 0
                        });
                      };
                
                      return SquareX;
                
                    })(Marker.Model);
                    return {
                      "Model": SquareX,
                      "View": SquareXView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=square_x.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('renderer/glyph/square_cross',["underscore", "renderer/properties", "./marker"], function(_, Properties, Marker) {
                    var SquareCross, SquareCrossView, _ref, _ref1;
                    SquareCrossView = (function(_super) {
                      __extends(SquareCrossView, _super);
                
                      function SquareCrossView() {
                        _ref = SquareCrossView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      SquareCrossView.prototype._properties = ['line', 'fill'];
                
                      SquareCrossView.prototype._render = function(ctx, indices, glyph_props, sx, sy, size) {
                        var i, r, _i, _len, _results;
                        if (sx == null) {
                          sx = this.sx;
                        }
                        if (sy == null) {
                          sy = this.sy;
                        }
                        if (size == null) {
                          size = this.size;
                        }
                        _results = [];
                        for (_i = 0, _len = indices.length; _i < _len; _i++) {
                          i = indices[_i];
                          if (isNaN(sx[i] + sy[i] + size[i])) {
                            continue;
                          }
                          ctx.translate(sx[i], sy[i]);
                          ctx.beginPath();
                          ctx.rect(-size[i] / 2, -size[i] / 2, size[i], size[i]);
                          if (glyph_props.fill_properties.do_fill) {
                            glyph_props.fill_properties.set_vectorize(ctx, i);
                            ctx.fill();
                          }
                          if (glyph_props.line_properties.do_stroke) {
                            glyph_props.line_properties.set_vectorize(ctx, i);
                            r = size[i] / 2;
                            ctx.moveTo(0, +r);
                            ctx.lineTo(0, -r);
                            ctx.moveTo(-r, 0);
                            ctx.lineTo(+r, 0);
                            ctx.stroke();
                          }
                          _results.push(ctx.translate(-sx[i], -sy[i]));
                        }
                        return _results;
                      };
                
                      return SquareCrossView;
                
                    })(Marker.View);
                    SquareCross = (function(_super) {
                      __extends(SquareCross, _super);
                
                      function SquareCross() {
                        _ref1 = SquareCross.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      SquareCross.prototype.default_view = SquareCrossView;
                
                      SquareCross.prototype.type = 'Glyph';
                
                      SquareCross.prototype.display_defaults = function() {
                        return _.extend(SquareCross.__super__.display_defaults.call(this), {
                          size_units: 'screen',
                          fill_color: 'gray',
                          fill_alpha: 1.0,
                          line_color: 'red',
                          line_width: 1,
                          line_alpha: 1.0,
                          line_join: 'miter',
                          line_cap: 'butt',
                          line_dash: [],
                          line_dash_offset: 0
                        });
                      };
                
                      return SquareCross;
                
                    })(Marker.Model);
                    return {
                      "Model": SquareCross,
                      "View": SquareCrossView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=square_cross.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('renderer/glyph/segment',["underscore", "renderer/properties", "./glyph"], function(_, Properties, Glyph) {
                    var Segment, SegmentView, _ref, _ref1;
                    SegmentView = (function(_super) {
                      __extends(SegmentView, _super);
                
                      function SegmentView() {
                        _ref = SegmentView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      SegmentView.prototype._fields = ['x0', 'y0', 'x1', 'y1'];
                
                      SegmentView.prototype._properties = ['line'];
                
                      SegmentView.prototype._map_data = function() {
                        var _ref1, _ref2;
                        _ref1 = this.plot_view.map_to_screen(this.x0, this.glyph_props.x0.units, this.y0, this.glyph_props.y0.units), this.sx0 = _ref1[0], this.sy0 = _ref1[1];
                        return _ref2 = this.plot_view.map_to_screen(this.x1, this.glyph_props.x1.units, this.y1, this.glyph_props.y1.units), this.sx1 = _ref2[0], this.sy1 = _ref2[1], _ref2;
                      };
                
                      SegmentView.prototype._render = function(ctx, indices, glyph_props) {
                        var i, _i, _len, _results;
                        if (glyph_props.line_properties.do_stroke) {
                          _results = [];
                          for (_i = 0, _len = indices.length; _i < _len; _i++) {
                            i = indices[_i];
                            if (isNaN(this.sx0[i] + this.sy0[i] + this.sx1[i] + this.sy1[i])) {
                              continue;
                            }
                            ctx.beginPath();
                            ctx.moveTo(this.sx0[i], this.sy0[i]);
                            ctx.lineTo(this.sx1[i], this.sy1[i]);
                            glyph_props.line_properties.set_vectorize(ctx, i);
                            _results.push(ctx.stroke());
                          }
                          return _results;
                        }
                      };
                
                      SegmentView.prototype.draw_legend = function(ctx, x0, x1, y0, y1) {
                        return this._generic_line_legend(ctx, x0, x1, y0, y1);
                      };
                
                      return SegmentView;
                
                    })(Glyph.View);
                    Segment = (function(_super) {
                      __extends(Segment, _super);
                
                      function Segment() {
                        _ref1 = Segment.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      Segment.prototype.default_view = SegmentView;
                
                      Segment.prototype.type = 'Glyph';
                
                      Segment.prototype.display_defaults = function() {
                        return _.extend(Segment.__super__.display_defaults.call(this), {
                          line_color: 'red',
                          line_width: 1,
                          line_alpha: 1.0,
                          line_join: 'miter',
                          line_cap: 'butt',
                          line_dash: [],
                          line_dash_offset: 0
                        });
                      };
                
                      return Segment;
                
                    })(Glyph.Model);
                    return {
                      "Model": Segment,
                      "View": SegmentView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=segment.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('renderer/glyph/text',["underscore", "renderer/properties", "./glyph"], function(_, Properties, Glyph) {
                    var Text, TextView, _ref, _ref1;
                    TextView = (function(_super) {
                      __extends(TextView, _super);
                
                      function TextView() {
                        _ref = TextView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      TextView.prototype._fields = ['x', 'y', 'angle', 'text:string'];
                
                      TextView.prototype._properties = ['text'];
                
                      TextView.prototype._map_data = function() {
                        var _ref1;
                        return _ref1 = this.plot_view.map_to_screen(this.x, this.glyph_props.x.units, this.y, this.glyph_props.y.units), this.sx = _ref1[0], this.sy = _ref1[1], _ref1;
                      };
                
                      TextView.prototype._render = function(ctx, indices, glyph_props) {
                        var i, _i, _len, _results;
                        _results = [];
                        for (_i = 0, _len = indices.length; _i < _len; _i++) {
                          i = indices[_i];
                          if (isNaN(this.sx[i] + this.sy[i] + this.angle[i])) {
                            continue;
                          }
                          ctx.translate(this.sx[i], this.sy[i]);
                          ctx.rotate(this.angle[i]);
                          glyph_props.text_properties.set_vectorize(ctx, i);
                          ctx.fillText(this.text[i], 0, 0);
                          ctx.rotate(-this.angle[i]);
                          _results.push(ctx.translate(-this.sx[i], -this.sy[i]));
                        }
                        return _results;
                      };
                
                      TextView.prototype.draw_legend = function(ctx, x1, x2, y1, y2) {
                        var glyph_props, glyph_settings, reference_point, text_props;
                        glyph_props = this.glyph_props;
                        text_props = glyph_props.text_properties;
                        ctx.save();
                        reference_point = this.get_reference_point();
                        if (reference_point != null) {
                          glyph_settings = reference_point;
                        } else {
                          glyph_settings = glyph_props;
                        }
                        text_props.set(ctx, glyph_settings);
                        ctx.font = text_props.font(12);
                        ctx.textAlign = "right";
                        ctx.textBaseline = "middle";
                        ctx.fillText("txt", x2, (y1 + y2) / 2);
                        return ctx.restore();
                      };
                
                      return TextView;
                
                    })(Glyph.View);
                    Text = (function(_super) {
                      __extends(Text, _super);
                
                      function Text() {
                        _ref1 = Text.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      Text.prototype.default_view = TextView;
                
                      Text.prototype.type = 'Glyph';
                
                      Text.prototype.display_defaults = function() {
                        return _.extend(Text.__super__.display_defaults.call(this), {
                          text_font: "helvetica",
                          text_font_size: "12pt",
                          text_font_style: "normal",
                          text_color: "#444444",
                          text_alpha: 1.0,
                          text_align: "left",
                          text_baseline: "bottom"
                        });
                      };
                
                      return Text;
                
                    })(Glyph.Model);
                    return {
                      "Model": Text,
                      "View": TextView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=text.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('renderer/glyph/triangle',["underscore", "renderer/properties", "./marker"], function(_, Properties, Marker) {
                    var Triangle, TriangleView, _ref, _ref1;
                    TriangleView = (function(_super) {
                      __extends(TriangleView, _super);
                
                      function TriangleView() {
                        _ref = TriangleView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      TriangleView.prototype._properties = ['line', 'fill'];
                
                      TriangleView.prototype._render = function(ctx, indices, glyph_props, sx, sy, size) {
                        var a, h, i, r, _i, _len, _results;
                        if (sx == null) {
                          sx = this.sx;
                        }
                        if (sy == null) {
                          sy = this.sy;
                        }
                        if (size == null) {
                          size = this.size;
                        }
                        _results = [];
                        for (_i = 0, _len = indices.length; _i < _len; _i++) {
                          i = indices[_i];
                          if (isNaN(sx[i] + sy[i] + size[i])) {
                            continue;
                          }
                          a = size[i] * Math.sqrt(3) / 6;
                          r = size[i] / 2;
                          h = size[i] * Math.sqrt(3) / 2;
                          ctx.beginPath();
                          ctx.moveTo(sx[i] - r, sy[i] + a);
                          ctx.lineTo(sx[i] + r, sy[i] + a);
                          ctx.lineTo(sx[i], sy[i] + a - h);
                          ctx.closePath();
                          if (glyph_props.fill_properties.do_fill) {
                            glyph_props.fill_properties.set_vectorize(ctx, i);
                            ctx.fill();
                          }
                          if (glyph_props.line_properties.do_stroke) {
                            glyph_props.line_properties.set_vectorize(ctx, i);
                            _results.push(ctx.stroke());
                          } else {
                            _results.push(void 0);
                          }
                        }
                        return _results;
                      };
                
                      return TriangleView;
                
                    })(Marker.View);
                    Triangle = (function(_super) {
                      __extends(Triangle, _super);
                
                      function Triangle() {
                        _ref1 = Triangle.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      Triangle.prototype.default_view = TriangleView;
                
                      Triangle.prototype.type = 'Glyph';
                
                      Triangle.prototype.display_defaults = function() {
                        return _.extend(Triangle.__super__.display_defaults.call(this), {
                          fill_color: 'gray',
                          fill_alpha: 1.0,
                          line_color: 'red',
                          line_width: 1,
                          line_alpha: 1.0,
                          line_join: 'miter',
                          line_cap: 'butt',
                          line_dash: [],
                          line_dash_offset: 0
                        });
                      };
                
                      return Triangle;
                
                    })(Marker.Model);
                    return {
                      "Model": Triangle,
                      "View": TriangleView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=triangle.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('renderer/glyph/wedge',["underscore", "rbush", "common/mathutils", "renderer/properties", "./glyph"], function(_, rbush, mathutils, Properties, Glyph) {
                    var Wedge, WedgeView, _ref, _ref1;
                    WedgeView = (function(_super) {
                      __extends(WedgeView, _super);
                
                      function WedgeView() {
                        _ref = WedgeView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      WedgeView.prototype._fields = ['x', 'y', 'radius', 'start_angle', 'end_angle', 'direction:string'];
                
                      WedgeView.prototype._properties = ['line', 'fill'];
                
                      WedgeView.prototype._set_data = function() {
                        var i, pts, _i, _ref1;
                        this.max_radius = _.max(this.radius);
                        this.index = rbush();
                        pts = [];
                        for (i = _i = 0, _ref1 = this.x.length; 0 <= _ref1 ? _i < _ref1 : _i > _ref1; i = 0 <= _ref1 ? ++_i : --_i) {
                          if (!isNaN(this.x[i] + this.y[i])) {
                            pts.push([
                              this.x[i], this.y[i], this.x[i], this.y[i], {
                                'i': i
                              }
                            ]);
                          }
                        }
                        return this.index.load(pts);
                      };
                
                      WedgeView.prototype._map_data = function() {
                        var _ref1;
                        _ref1 = this.plot_view.map_to_screen(this.x, this.glyph_props.x.units, this.y, this.glyph_props.y.units), this.sx = _ref1[0], this.sy = _ref1[1];
                        return this.radius = this.distance_vector('x', 'radius', 'edge');
                      };
                
                      WedgeView.prototype._render = function(ctx, indices, glyph_props, sx, sy, radius) {
                        var i, _i, _len, _results;
                        if (sx == null) {
                          sx = this.sx;
                        }
                        if (sy == null) {
                          sy = this.sy;
                        }
                        if (radius == null) {
                          radius = this.radius;
                        }
                        _results = [];
                        for (_i = 0, _len = indices.length; _i < _len; _i++) {
                          i = indices[_i];
                          if (isNaN(sx[i] + sy[i] + radius[i] + this.start_angle[i] + this.end_angle[i] + this.direction[i])) {
                            continue;
                          }
                          ctx.beginPath();
                          ctx.arc(sx[i], sy[i], radius[i], this.start_angle[i], this.end_angle[i], this.direction[i]);
                          ctx.lineTo(sx[i], sy[i]);
                          ctx.closePath();
                          if (glyph_props.fill_properties.do_fill) {
                            glyph_props.fill_properties.set_vectorize(ctx, i);
                            ctx.fill();
                          }
                          if (glyph_props.line_properties.do_stroke) {
                            glyph_props.line_properties.set_vectorize(ctx, i);
                            _results.push(ctx.stroke());
                          } else {
                            _results.push(void 0);
                          }
                        }
                        return _results;
                      };
                
                      WedgeView.prototype._hit_point = function(geometry) {
                        var angle, candidates, candidates2, dist, hits, i, pt, r2, sx, sx0, sx1, sy, sy0, sy1, vx, vx0, vx1, vy, vy0, vy1, x, x0, x1, y, y0, y1, _i, _j, _k, _len, _len1, _len2, _ref1, _ref2, _ref3, _ref4;
                        _ref1 = [geometry.vx, geometry.vy], vx = _ref1[0], vy = _ref1[1];
                        x = this.plot_view.xmapper.map_from_target(vx);
                        y = this.plot_view.ymapper.map_from_target(vy);
                        if (this.radius_units === "screen") {
                          vx0 = vx - this.max_radius;
                          vx1 = vx + this.max_radius;
                          _ref2 = this.plot_view.xmapper.v_map_from_target([vx0, vx1]), x0 = _ref2[0], x1 = _ref2[1];
                          vy0 = vy - this.max_radius;
                          vy1 = vy + this.max_radius;
                          _ref3 = this.plot_view.ymapper.v_map_from_target([vy0, vy1]), y0 = _ref3[0], y1 = _ref3[1];
                        } else {
                          x0 = x - this.max_radius;
                          x1 = x + this.max_radius;
                          y0 = y - this.max_radius;
                          y1 = y + this.max_radius;
                        }
                        candidates = (function() {
                          var _i, _len, _ref4, _results;
                          _ref4 = this.index.search([x0, y0, x1, y1]);
                          _results = [];
                          for (_i = 0, _len = _ref4.length; _i < _len; _i++) {
                            pt = _ref4[_i];
                            _results.push(pt[4].i);
                          }
                          return _results;
                        }).call(this);
                        candidates2 = [];
                        if (this.radius_units === "screen") {
                          sx = this.plot_view.canvas.vx_to_sx(vx);
                          sy = this.plot_view.canvas.vy_to_sy(vy);
                          for (_i = 0, _len = candidates.length; _i < _len; _i++) {
                            i = candidates[_i];
                            r2 = Math.pow(this.radius[i], 2);
                            dist = Math.pow(this.sx[i] - sx, 2) + Math.pow(this.sy[i] - sy, 2);
                            if (dist <= r2) {
                              candidates2.push([i, dist]);
                            }
                          }
                        } else {
                          for (_j = 0, _len1 = candidates.length; _j < _len1; _j++) {
                            i = candidates[_j];
                            r2 = Math.pow(this.radius[i], 2);
                            sx0 = this.plot_view.xmapper.map_to_target(x);
                            sx1 = this.plot_view.xmapper.map_to_target(this.x[i]);
                            sy0 = this.plot_view.ymapper.map_to_target(y);
                            sy1 = this.plot_view.ymapper.map_to_target(this.y[i]);
                            dist = Math.pow(sx0 - sx1, 2) + Math.pow(sy0 - sy1, 2);
                            if (dist <= r2) {
                              candidates2.push([i, dist]);
                            }
                          }
                        }
                        hits = [];
                        for (_k = 0, _len2 = candidates2.length; _k < _len2; _k++) {
                          _ref4 = candidates2[_k], i = _ref4[0], dist = _ref4[1];
                          sx = this.plot_view.canvas.vx_to_sx(vx);
                          sy = this.plot_view.canvas.vy_to_sy(vy);
                          angle = Math.atan2(sy - this.sy[i], sx - this.sx[i]);
                          if (mathutils.angle_between(-angle, -this.start_angle[i], -this.end_angle[i], this.direction[i])) {
                            hits.push([i, dist]);
                          }
                        }
                        hits = _.chain(hits).sortBy(function(elt) {
                          return elt[1];
                        }).map(function(elt) {
                          return elt[0];
                        }).value();
                        return hits;
                      };
                
                      WedgeView.prototype.draw_legend = function(ctx, x0, x1, y0, y1) {
                        var indices, radius, reference_point, sx, sy, _ref1;
                        reference_point = (_ref1 = this.get_reference_point()) != null ? _ref1 : 0;
                        indices = [reference_point];
                        sx = {};
                        sx[reference_point] = (x0 + x1) / 2;
                        sy = {};
                        sy[reference_point] = (y0 + y1) / 2;
                        radius = {};
                        radius[reference_point] = Math.min(Math.abs(x1 - x0), Math.abs(y1 - y0)) * 0.4;
                        return this._render(ctx, indices, this.glyph_props, sx, sy, radius);
                      };
                
                      return WedgeView;
                
                    })(Glyph.View);
                    Wedge = (function(_super) {
                      __extends(Wedge, _super);
                
                      function Wedge() {
                        _ref1 = Wedge.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      Wedge.prototype.default_view = WedgeView;
                
                      Wedge.prototype.type = 'Glyph';
                
                      Wedge.prototype.display_defaults = function() {
                        return _.extend(Wedge.__super__.display_defaults.call(this), {
                          direction: 'anticlock',
                          fill_color: 'gray',
                          fill_alpha: 1.0,
                          line_color: 'red',
                          line_width: 1,
                          line_alpha: 1.0,
                          line_join: 'miter',
                          line_cap: 'butt',
                          line_dash: [],
                          line_dash_offset: 0
                        });
                      };
                
                      return Wedge;
                
                    })(Glyph.Model);
                    return {
                      "Model": Wedge,
                      "View": WedgeView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=wedge.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('renderer/glyph/x',["underscore", "renderer/properties", "./marker"], function(_, Properties, Marker) {
                    var X, XView, _ref, _ref1;
                    XView = (function(_super) {
                      __extends(XView, _super);
                
                      function XView() {
                        _ref = XView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      XView.prototype._properties = ['line'];
                
                      XView.prototype._render = function(ctx, indices, glyph_props, sx, sy, size) {
                        var i, r, _i, _len, _results;
                        if (sx == null) {
                          sx = this.sx;
                        }
                        if (sy == null) {
                          sy = this.sy;
                        }
                        if (size == null) {
                          size = this.size;
                        }
                        _results = [];
                        for (_i = 0, _len = indices.length; _i < _len; _i++) {
                          i = indices[_i];
                          if (isNaN(sx[i] + sy[i] + size[i])) {
                            continue;
                          }
                          r = size[i] / 2;
                          ctx.beginPath();
                          ctx.moveTo(sx[i] - r, sy[i] + r);
                          ctx.lineTo(sx[i] + r, sy[i] - r);
                          ctx.moveTo(sx[i] - r, sy[i] - r);
                          ctx.lineTo(sx[i] + r, sy[i] + r);
                          if (glyph_props.line_properties.do_stroke) {
                            glyph_props.line_properties.set_vectorize(ctx, i);
                            _results.push(ctx.stroke());
                          } else {
                            _results.push(void 0);
                          }
                        }
                        return _results;
                      };
                
                      return XView;
                
                    })(Marker.View);
                    X = (function(_super) {
                      __extends(X, _super);
                
                      function X() {
                        _ref1 = X.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      X.prototype.default_view = XView;
                
                      X.prototype.type = 'Glyph';
                
                      X.prototype.display_defaults = function() {
                        return _.extend(X.__super__.display_defaults.call(this), {
                          line_color: 'red',
                          line_width: 1,
                          line_alpha: 1.0,
                          line_join: 'miter',
                          line_cap: 'butt',
                          line_dash: [],
                          line_dash_offset: 0
                        });
                      };
                
                      return X;
                
                    })(Marker.Model);
                    return {
                      "Model": X,
                      "View": XView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=x.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('renderer/glyph/glyph_factory',['require','exports','module','underscore','common/has_parent','common/plot_widget','./annular_wedge','./annulus','./arc','./asterisk','./bezier','./circle','./circle_x','./circle_cross','./diamond','./diamond_cross','./gear','./image','./image_rgba','./image_url','./inverted_triangle','./line','./multi_line','./oval','./patch','./patches','./cross','./quad','./quadratic','./ray','./rect','./square','./square_x','./square_cross','./segment','./text','./triangle','./wedge','./x'],function(require, exports, module) {
                    var Glyph, HasParent, PlotWidget, annular_wedge, annulus, arc, asterisk, bezier, circle, circle_cross, circle_x, cross, diamond, diamond_cross, gear, glyphs, image, image_rgba, image_url, inverted_triangle, line, multi_line, oval, patch, patches, quad, quadratic, ray, rect, segment, square, square_cross, square_x, text, triangle, wedge, x, _, _ref;
                    _ = require("underscore");
                    HasParent = require("common/has_parent");
                    PlotWidget = require("common/plot_widget");
                    annular_wedge = require("./annular_wedge");
                    annulus = require("./annulus");
                    arc = require("./arc");
                    asterisk = require("./asterisk");
                    bezier = require("./bezier");
                    circle = require("./circle");
                    circle_x = require("./circle_x");
                    circle_cross = require("./circle_cross");
                    diamond = require("./diamond");
                    diamond_cross = require("./diamond_cross");
                    gear = require("./gear");
                    image = require("./image");
                    image_rgba = require("./image_rgba");
                    image_url = require("./image_url");
                    inverted_triangle = require("./inverted_triangle");
                    line = require("./line");
                    multi_line = require("./multi_line");
                    oval = require("./oval");
                    patch = require("./patch");
                    patches = require("./patches");
                    cross = require("./cross");
                    quad = require("./quad");
                    quadratic = require("./quadratic");
                    ray = require("./ray");
                    rect = require("./rect");
                    square = require("./square");
                    square_x = require("./square_x");
                    square_cross = require("./square_cross");
                    segment = require("./segment");
                    text = require("./text");
                    triangle = require("./triangle");
                    wedge = require("./wedge");
                    x = require("./x");
                    glyphs = {
                      "annular_wedge": annular_wedge.Model,
                      "annulus": annulus.Model,
                      "arc": arc.Model,
                      "asterisk": asterisk.Model,
                      "bezier": bezier.Model,
                      "circle": circle.Model,
                      "circle_x": circle_x.Model,
                      "circle_cross": circle_cross.Model,
                      "diamond": diamond.Model,
                      "diamond_cross": diamond_cross.Model,
                      "gear": gear.Model,
                      "image": image.Model,
                      "image_rgba": image_rgba.Model,
                      "image_url": image_url.Model,
                      "inverted_triangle": inverted_triangle.Model,
                      "line": line.Model,
                      "multi_line": multi_line.Model,
                      "oval": oval.Model,
                      "patch": patch.Model,
                      "patches": patches.Model,
                      "cross": cross.Model,
                      "quad": quad.Model,
                      "quadratic": quadratic.Model,
                      "ray": ray.Model,
                      "square": square.Model,
                      "square_x": square_x.Model,
                      "square_cross": square_cross.Model,
                      "rect": rect.Model,
                      "segment": segment.Model,
                      "text": text.Model,
                      "triangle": triangle.Model,
                      "wedge": wedge.Model,
                      "x": x.Model
                    };
                    Glyph = (function(_super) {
                      __extends(Glyph, _super);
                
                      function Glyph() {
                        _ref = Glyph.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      Glyph.prototype.model = function(attrs, options) {
                        var model, type, _ref1;
                        if (((_ref1 = attrs.glyphspec) != null ? _ref1.type : void 0) == null) {
                          console.log("missing glyph type");
                          return;
                        }
                        type = attrs.glyphspec.type;
                        if (!(type in glyphs)) {
                          console.log("unknown glyph type '" + type + "'");
                          return;
                        }
                        model = glyphs[type];
                        return new model(attrs, options);
                      };
                
                      return Glyph;
                
                    })(Backbone.Collection);
                    return {
                      "Collection": new Glyph()
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=glyph_factory.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('renderer/guide/axis',["underscore", "backbone", "kiwi", "common/has_parent", "common/layout_box", "common/plot_widget", "renderer/properties"], function(_, Backbone, kiwi, HasParent, LayoutBox, PlotWidget, Properties) {
                    var ALPHABETIC, Axis, AxisView, CENTER, HANGING, LEFT, MIDDLE, RIGHT, glyph_properties, line_properties, pi2, text_properties, _align_lookup, _align_lookup_negative, _align_lookup_positive, _angle_lookup, _apply_location_heuristics, _baseline_lookup, _ref, _ref1;
                    glyph_properties = Properties.glyph_properties;
                    line_properties = Properties.line_properties;
                    text_properties = Properties.text_properties;
                    pi2 = Math.PI / 2;
                    ALPHABETIC = 'alphabetic';
                    MIDDLE = 'middle';
                    HANGING = 'hanging';
                    LEFT = 'left';
                    RIGHT = 'right';
                    CENTER = 'center';
                    _angle_lookup = {
                      above: {
                        parallel: 0,
                        normal: -pi2,
                        horizontal: 0,
                        vertical: -pi2
                      },
                      below: {
                        parallel: 0,
                        normal: pi2,
                        horizontal: 0,
                        vertical: pi2
                      },
                      left: {
                        parallel: -pi2,
                        normal: 0,
                        horizontal: 0,
                        vertical: -pi2
                      },
                      right: {
                        parallel: pi2,
                        normal: 0,
                        horizontal: 0,
                        vertical: pi2
                      }
                    };
                    _baseline_lookup = {
                      above: {
                        parallel: ALPHABETIC,
                        normal: MIDDLE,
                        horizontal: ALPHABETIC,
                        vertical: MIDDLE
                      },
                      below: {
                        parallel: HANGING,
                        normal: MIDDLE,
                        horizontal: HANGING,
                        vertical: MIDDLE
                      },
                      left: {
                        parallel: ALPHABETIC,
                        normal: MIDDLE,
                        horizontal: MIDDLE,
                        vertical: ALPHABETIC
                      },
                      right: {
                        parallel: ALPHABETIC,
                        normal: MIDDLE,
                        horizontal: MIDDLE,
                        vertical: ALPHABETIC
                      }
                    };
                    _align_lookup = {
                      above: {
                        parallel: CENTER,
                        normal: LEFT,
                        horizontal: CENTER,
                        vertical: LEFT
                      },
                      below: {
                        parallel: CENTER,
                        normal: LEFT,
                        horizontal: CENTER,
                        vertical: RIGHT
                      },
                      left: {
                        parallel: CENTER,
                        normal: RIGHT,
                        horizontal: RIGHT,
                        vertical: CENTER
                      },
                      right: {
                        parallel: CENTER,
                        normal: LEFT,
                        horizontal: LEFT,
                        vertical: CENTER
                      }
                    };
                    _align_lookup_negative = {
                      above: RIGHT,
                      below: LEFT,
                      left: RIGHT,
                      right: LEFT
                    };
                    _align_lookup_positive = {
                      above: LEFT,
                      below: RIGHT,
                      left: RIGHT,
                      right: LEFT
                    };
                    _apply_location_heuristics = function(ctx, side, orient) {
                      var align, baseline;
                      if (_.isString(orient)) {
                        baseline = _baseline_lookup[side][orient];
                        align = _align_lookup[side][orient];
                      } else if (orient === 0) {
                        baseline = _baseline_lookup[side][orient];
                        align = _align_lookup[side][orient];
                      } else if (orient < 0) {
                        baseline = 'middle';
                        align = _align_lookup_negative[side];
                      } else if (orient > 0) {
                        baseline = 'middle';
                        align = _align_lookup_positive[side];
                      }
                      ctx.textBaseline = baseline;
                      return ctx.textAlign = align;
                    };
                    AxisView = (function(_super) {
                      __extends(AxisView, _super);
                
                      function AxisView() {
                        _ref = AxisView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      AxisView.prototype.initialize = function(options) {
                        AxisView.__super__.initialize.call(this, options);
                        this.rule_props = new line_properties(this, null, 'axis_');
                        this.major_tick_props = new line_properties(this, null, 'major_tick_');
                        this.minor_tick_props = new line_properties(this, null, 'minor_tick_');
                        this.major_label_props = new text_properties(this, null, 'major_label_');
                        return this.axis_label_props = new text_properties(this, null, 'axis_label_');
                      };
                
                      AxisView.prototype.render = function() {
                        var ctx;
                        ctx = this.plot_view.canvas_view.ctx;
                        ctx.save();
                        this._draw_rule(ctx);
                        this._draw_major_ticks(ctx);
                        this._draw_minor_ticks(ctx);
                        this._draw_major_labels(ctx);
                        this._draw_axis_label(ctx);
                        return ctx.restore();
                      };
                
                      AxisView.prototype.bind_bokeh_events = function() {
                        return this.listenTo(this.model, 'change', this.plot_view.request_render);
                      };
                
                      AxisView.prototype._draw_rule = function(ctx) {
                        var coords, i, nx, ny, sx, sy, x, y, _i, _ref1, _ref2, _ref3, _ref4;
                        if (!this.rule_props.do_stroke) {
                          return;
                        }
                        _ref1 = coords = this.mget('rule_coords'), x = _ref1[0], y = _ref1[1];
                        _ref2 = this.plot_view.map_to_screen(x, "data", y, "data"), sx = _ref2[0], sy = _ref2[1];
                        _ref3 = this.mget('normals'), nx = _ref3[0], ny = _ref3[1];
                        this.rule_props.set(ctx, this);
                        ctx.beginPath();
                        ctx.moveTo(Math.round(sx[0]), Math.round(sy[0]));
                        for (i = _i = 1, _ref4 = sx.length; 1 <= _ref4 ? _i < _ref4 : _i > _ref4; i = 1 <= _ref4 ? ++_i : --_i) {
                          ctx.lineTo(Math.round(sx[i]), Math.round(sy[i]));
                        }
                        return ctx.stroke();
                      };
                
                      AxisView.prototype._draw_major_ticks = function(ctx) {
                        var coords, i, nx, ny, sx, sy, tin, tout, x, y, _i, _ref1, _ref2, _ref3, _ref4, _results;
                        if (!this.major_tick_props.do_stroke) {
                          return;
                        }
                        coords = this.mget('tick_coords');
                        _ref1 = coords.major, x = _ref1[0], y = _ref1[1];
                        _ref2 = this.plot_view.map_to_screen(x, "data", y, "data"), sx = _ref2[0], sy = _ref2[1];
                        _ref3 = this.mget('normals'), nx = _ref3[0], ny = _ref3[1];
                        tin = this.mget('major_tick_in');
                        tout = this.mget('major_tick_out');
                        this.major_tick_props.set(ctx, this);
                        _results = [];
                        for (i = _i = 0, _ref4 = sx.length; 0 <= _ref4 ? _i < _ref4 : _i > _ref4; i = 0 <= _ref4 ? ++_i : --_i) {
                          ctx.beginPath();
                          ctx.moveTo(Math.round(sx[i] + nx * tout), Math.round(sy[i] + ny * tout));
                          ctx.lineTo(Math.round(sx[i] - nx * tin), Math.round(sy[i] - ny * tin));
                          _results.push(ctx.stroke());
                        }
                        return _results;
                      };
                
                      AxisView.prototype._draw_minor_ticks = function(ctx) {
                        var coords, i, nx, ny, sx, sy, tin, tout, x, y, _i, _ref1, _ref2, _ref3, _ref4, _results;
                        if (!this.minor_tick_props.do_stroke) {
                          return;
                        }
                        coords = this.mget('tick_coords');
                        _ref1 = coords.minor, x = _ref1[0], y = _ref1[1];
                        _ref2 = this.plot_view.map_to_screen(x, "data", y, "data"), sx = _ref2[0], sy = _ref2[1];
                        _ref3 = this.mget('normals'), nx = _ref3[0], ny = _ref3[1];
                        tin = this.mget('minor_tick_in');
                        tout = this.mget('minor_tick_out');
                        this.minor_tick_props.set(ctx, this);
                        _results = [];
                        for (i = _i = 0, _ref4 = sx.length; 0 <= _ref4 ? _i < _ref4 : _i > _ref4; i = 0 <= _ref4 ? ++_i : --_i) {
                          ctx.beginPath();
                          ctx.moveTo(Math.round(sx[i] + nx * tout), Math.round(sy[i] + ny * tout));
                          ctx.lineTo(Math.round(sx[i] - nx * tin), Math.round(sy[i] - ny * tin));
                          _results.push(ctx.stroke());
                        }
                        return _results;
                      };
                
                      AxisView.prototype._draw_major_labels = function(ctx) {
                        var angle, coords, dim, i, labels, nx, ny, orient, side, standoff, sx, sy, x, y, _i, _ref1, _ref2, _ref3, _ref4, _results;
                        coords = this.mget('tick_coords');
                        _ref1 = coords.major, x = _ref1[0], y = _ref1[1];
                        _ref2 = this.plot_view.map_to_screen(x, "data", y, "data"), sx = _ref2[0], sy = _ref2[1];
                        _ref3 = this.mget('normals'), nx = _ref3[0], ny = _ref3[1];
                        dim = this.mget('dimension');
                        side = this.mget('location');
                        orient = this.mget('major_label_orientation');
                        if (_.isString(orient)) {
                          angle = _angle_lookup[side][orient];
                        } else {
                          angle = -orient;
                        }
                        standoff = this.model._tick_extent(this) + this.mget('major_label_standoff');
                        labels = this.mget('formatter').format(coords.major[dim]);
                        this.major_label_props.set(ctx, this);
                        _apply_location_heuristics(ctx, side, orient);
                        _results = [];
                        for (i = _i = 0, _ref4 = sx.length; 0 <= _ref4 ? _i < _ref4 : _i > _ref4; i = 0 <= _ref4 ? ++_i : --_i) {
                          if (angle) {
                            ctx.translate(sx[i] + nx * standoff, sy[i] + ny * standoff);
                            ctx.rotate(angle);
                            ctx.fillText(labels[i], 0, 0);
                            ctx.rotate(-angle);
                            _results.push(ctx.translate(-sx[i] - nx * standoff, -sy[i] - ny * standoff));
                          } else {
                            _results.push(ctx.fillText(labels[i], Math.round(sx[i] + nx * standoff), Math.round(sy[i] + ny * standoff)));
                          }
                        }
                        return _results;
                      };
                
                      AxisView.prototype._draw_axis_label = function(ctx) {
                        var angle, label, nx, ny, orient, side, standoff, sx, sy, x, y, _ref1, _ref2, _ref3;
                        label = this.mget('axis_label');
                        if (label == null) {
                          return;
                        }
                        _ref1 = this.mget('rule_coords'), x = _ref1[0], y = _ref1[1];
                        _ref2 = this.plot_view.map_to_screen(x, "data", y, "data"), sx = _ref2[0], sy = _ref2[1];
                        _ref3 = this.mget('normals'), nx = _ref3[0], ny = _ref3[1];
                        side = this.mget('location');
                        orient = 'parallel';
                        angle = _angle_lookup[side][orient];
                        standoff = this.model._tick_extent(this) + this.model._tick_label_extent(this) + this.mget('axis_label_standoff');
                        sx = (sx[0] + sx[sx.length - 1]) / 2;
                        sy = (sy[0] + sy[sy.length - 1]) / 2;
                        this.axis_label_props.set(ctx, this);
                        _apply_location_heuristics(ctx, side, orient);
                        if (angle) {
                          ctx.translate(sx + nx * standoff, sy + ny * standoff);
                          ctx.rotate(angle);
                          ctx.fillText(label, 0, 0);
                          ctx.rotate(-angle);
                          return ctx.translate(-sx - nx * standoff, -sy - ny * standoff);
                        } else {
                          return ctx.fillText(label, sx + nx * standoff, sy + ny * standoff);
                        }
                      };
                
                      return AxisView;
                
                    })(PlotWidget);
                    Axis = (function(_super) {
                      __extends(Axis, _super);
                
                      function Axis() {
                        _ref1 = Axis.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      Axis.prototype.default_view = AxisView;
                
                      Axis.prototype.type = 'Axis';
                
                      Axis.prototype.initialize = function(attrs, options) {
                        Axis.__super__.initialize.call(this, attrs, options);
                        this.register_property('computed_bounds', this._computed_bounds, false);
                        this.add_dependencies('computed_bounds', this, ['bounds']);
                        this.add_dependencies('computed_bounds', this.get('plot'), ['x_range', 'y_range']);
                        this.register_property('rule_coords', this._rule_coords, false);
                        this.add_dependencies('rule_coords', this, ['computed_bounds', 'side']);
                        this.register_property('tick_coords', this._tick_coords, false);
                        this.add_dependencies('tick_coords', this, ['computed_bounds', 'location']);
                        this.register_property('ranges', this._ranges, true);
                        this.register_property('normals', (function() {
                          return this._normals;
                        }), true);
                        return this.register_property('dimension', (function() {
                          return this._dim;
                        }), true);
                      };
                
                      Axis.prototype.initialize_layout = function(solver) {
                        var panel, side;
                        panel = new LayoutBox.Model({
                          solver: solver
                        });
                        this.panel = panel;
                        this._top = panel._top;
                        this._bottom = panel._bottom;
                        this._left = panel._left;
                        this._right = panel._right;
                        this._width = panel._width;
                        this._height = panel._height;
                        side = this.get('location');
                        if (side === "above") {
                          this._dim = 0;
                          this._normals = [0, -1];
                          this._size = panel._height;
                          return this._anchor = panel._bottom;
                        } else if (side === "below") {
                          this._dim = 0;
                          this._normals = [0, 1];
                          this._size = panel._height;
                          return this._anchor = panel._top;
                        } else if (side === "left") {
                          this._dim = 1;
                          this._normals = [-1, 0];
                          this._size = panel._width;
                          return this._anchor = panel._right;
                        } else if (side === "right") {
                          this._dim = 1;
                          this._normals = [1, 0];
                          this._size = panel._width;
                          return this._anchor = panel._left;
                        } else {
                          return console.log("ERROR: unrecognized side: '" + side + "'");
                        }
                      };
                
                      Axis.prototype.update_layout = function(view, solver) {
                        var size;
                        size = this._tick_extent(view) + this._tick_label_extent(view) + this._axis_label_extent(view);
                        if (this._last_size == null) {
                          this._last_size = -1;
                        }
                        if (size === this._last_size) {
                          return;
                        }
                        this._last_size = size;
                        if (this._size_constraint != null) {
                          solver.remove_constraint(this._size_constraint);
                        }
                        this._size_constraint = new kiwi.Constraint(new kiwi.Expression(this._size, -size), kiwi.Operator.Eq);
                        return solver.add_constraint(this._size_constraint);
                      };
                
                      Axis.prototype._ranges = function() {
                        var i, j, ranges;
                        i = this.get('dimension');
                        j = (i + 1) % 2;
                        ranges = [this.get('plot').get('frame').get('x_range'), this.get('plot').get('frame').get('y_range')];
                        return [ranges[i], ranges[j]];
                      };
                
                      Axis.prototype._computed_bounds = function() {
                        var cross_range, end, range, range_bounds, start, user_bounds, _ref2, _ref3;
                        _ref2 = this.get('ranges'), range = _ref2[0], cross_range = _ref2[1];
                        user_bounds = (_ref3 = this.get('bounds')) != null ? _ref3 : 'auto';
                        range_bounds = [range.get('min'), range.get('max')];
                        if (user_bounds === 'auto') {
                          return range_bounds;
                        }
                        if (_.isArray(user_bounds)) {
                          if (Math.abs(user_bounds[0] - user_bounds[1]) > Math.abs(range_bounds[0] - range_bounds[1])) {
                            start = Math.max(Math.min(user_bounds[0], user_bounds[1]), range_bounds[0]);
                            end = Math.min(Math.max(user_bounds[0], user_bounds[1]), range_bounds[1]);
                          } else {
                            start = Math.min(user_bounds[0], user_bounds[1]);
                            end = Math.max(user_bounds[0], user_bounds[1]);
                          }
                          return [start, end];
                        }
                        console.log("error: user bounds '" + user_bounds + "' not understood");
                        return null;
                      };
                
                      Axis.prototype._rule_coords = function() {
                        var coords, cross_range, end, i, j, loc, range, start, xs, ys, _ref2, _ref3;
                        i = this.get('dimension');
                        j = (i + 1) % 2;
                        _ref2 = this.get('ranges'), range = _ref2[0], cross_range = _ref2[1];
                        _ref3 = this.get('computed_bounds'), start = _ref3[0], end = _ref3[1];
                        xs = new Array(2);
                        ys = new Array(2);
                        coords = [xs, ys];
                        loc = this._get_loc(cross_range);
                        coords[i][0] = Math.max(start, range.get('min'));
                        coords[i][1] = Math.min(end, range.get('max'));
                        if (coords[i][0] > coords[i][1]) {
                          coords[i][0] = coords[i][1] = NaN;
                        }
                        coords[j][0] = loc;
                        coords[j][1] = loc;
                        return coords;
                      };
                
                      Axis.prototype._tick_coords = function() {
                        var coords, cross_range, end, i, ii, j, loc, majors, minor_coords, minor_xs, minor_ys, minors, range, range_max, range_min, start, ticks, xs, ys, _i, _j, _k, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7;
                        i = this.get('dimension');
                        j = (i + 1) % 2;
                        _ref2 = this.get('ranges'), range = _ref2[0], cross_range = _ref2[1];
                        _ref3 = this.get('computed_bounds'), start = _ref3[0], end = _ref3[1];
                        ticks = this.get('ticker').get_ticks(start, end, range, {});
                        majors = ticks.major;
                        minors = ticks.minor;
                        loc = this._get_loc(cross_range);
                        xs = [];
                        ys = [];
                        coords = [xs, ys];
                        minor_xs = [];
                        minor_ys = [];
                        minor_coords = [minor_xs, minor_ys];
                        if (range.type === "FactorRange") {
                          for (ii = _i = 0, _ref4 = majors.length; 0 <= _ref4 ? _i < _ref4 : _i > _ref4; ii = 0 <= _ref4 ? ++_i : --_i) {
                            coords[i].push(majors[ii]);
                            coords[j].push(loc);
                          }
                        } else {
                          _ref5 = [range.get('min'), range.get('max')], range_min = _ref5[0], range_max = _ref5[1];
                          for (ii = _j = 0, _ref6 = majors.length; 0 <= _ref6 ? _j < _ref6 : _j > _ref6; ii = 0 <= _ref6 ? ++_j : --_j) {
                            if (majors[ii] < range_min || majors[ii] > range_max) {
                              continue;
                            }
                            coords[i].push(majors[ii]);
                            coords[j].push(loc);
                          }
                          for (ii = _k = 0, _ref7 = minors.length; 0 <= _ref7 ? _k < _ref7 : _k > _ref7; ii = 0 <= _ref7 ? ++_k : --_k) {
                            if (minors[ii] < range_min || minors[ii] > range_max) {
                              continue;
                            }
                            minor_coords[i].push(minors[ii]);
                            minor_coords[j].push(loc);
                          }
                        }
                        return {
                          "major": coords,
                          "minor": minor_coords
                        };
                      };
                
                      Axis.prototype._get_loc = function(cross_range) {
                        var cend, cstart, loc, side;
                        cstart = cross_range.get('start');
                        cend = cross_range.get('end');
                        side = this.get('location');
                        if (side === 'left' || side === 'below') {
                          if (cstart < cend) {
                            loc = 'start';
                          } else {
                            loc = 'end';
                          }
                        } else if (side === 'right' || side === 'above') {
                          if (cstart < cend) {
                            loc = 'end';
                          } else {
                            loc = 'start';
                          }
                        }
                        return cross_range.get(loc);
                      };
                
                      Axis.prototype._tick_extent = function(view) {
                        return this.get('major_tick_out');
                      };
                
                      Axis.prototype._tick_label_extent = function(view) {
                        var angle, c, coords, ctx, dim, extent, h, hfactor, hscale, i, labels, orient, s, side, val, w, wfactor, _i, _ref2;
                        extent = 0;
                        dim = this.get('dimension');
                        ctx = view.plot_view.canvas_view.ctx;
                        coords = this.get('tick_coords').major;
                        side = this.get('location');
                        orient = this.get('major_label_orientation');
                        labels = this.get('formatter').format(coords[dim]);
                        view.major_label_props.set(ctx, view);
                        if (_.isString(orient)) {
                          hscale = 1;
                          angle = _angle_lookup[side][orient];
                        } else {
                          hscale = 2;
                          angle = -orient;
                        }
                        angle = Math.abs(angle);
                        c = Math.cos(angle);
                        s = Math.sin(angle);
                        if (side === "above" || side === "below") {
                          wfactor = s;
                          hfactor = c;
                        } else {
                          wfactor = c;
                          hfactor = s;
                        }
                        for (i = _i = 0, _ref2 = labels.length; 0 <= _ref2 ? _i < _ref2 : _i > _ref2; i = 0 <= _ref2 ? ++_i : --_i) {
                          if (labels[i] == null) {
                            continue;
                          }
                          w = ctx.measureText(labels[i]).width * 1.1;
                          h = ctx.measureText(labels[i]).ascent * 0.9;
                          val = w * wfactor + (h / hscale) * hfactor;
                          if (val > extent) {
                            extent = val;
                          }
                        }
                        if (extent > 0) {
                          extent += this.get('major_label_standoff');
                        }
                        return extent;
                      };
                
                      Axis.prototype._axis_label_extent = function(view) {
                        var angle, c, ctx, extent, h, orient, s, side, w;
                        extent = 0;
                        side = this.get('location');
                        orient = 'parallel';
                        ctx = view.plot_view.canvas_view.ctx;
                        view.axis_label_props.set(ctx, view);
                        angle = Math.abs(_angle_lookup[side][orient]);
                        c = Math.cos(angle);
                        s = Math.sin(angle);
                        if (this.get('axis_label')) {
                          extent += this.get('axis_label_standoff');
                          view.axis_label_props.set(ctx, view);
                          w = ctx.measureText(this.get('axis_label')).width * 1.1;
                          h = ctx.measureText(this.get('axis_label')).ascent * 0.9;
                          if (side === "above" || side === "below") {
                            extent += w * s + h * c;
                          } else {
                            extent += w * c + h * s;
                          }
                        }
                        return extent;
                      };
                
                      Axis.prototype.display_defaults = function() {
                        return {
                          level: 'overlay',
                          axis_line_color: 'black',
                          axis_line_width: 1,
                          axis_line_alpha: 1.0,
                          axis_line_join: 'miter',
                          axis_line_cap: 'butt',
                          axis_line_dash: [],
                          axis_line_dash_offset: 0,
                          major_tick_in: 2,
                          major_tick_out: 6,
                          major_tick_line_color: 'black',
                          major_tick_line_width: 1,
                          major_tick_line_alpha: 1.0,
                          major_tick_line_join: 'miter',
                          major_tick_line_cap: 'butt',
                          major_tick_line_dash: [],
                          major_tick_line_dash_offset: 0,
                          minor_tick_in: 0,
                          minor_tick_out: 4,
                          minor_tick_line_color: 'black',
                          minor_tick_line_width: 1,
                          minor_tick_line_alpha: 1.0,
                          minor_tick_line_join: 'miter',
                          minor_tick_line_cap: 'butt',
                          minor_tick_line_dash: [],
                          minor_tick_line_dash_offset: 0,
                          major_label_standoff: 5,
                          major_label_orientation: "horizontal",
                          major_label_text_font: "helvetica",
                          major_label_text_font_size: "10pt",
                          major_label_text_font_style: "normal",
                          major_label_text_color: "#444444",
                          major_label_text_alpha: 1.0,
                          major_label_text_align: "center",
                          major_label_text_baseline: "alphabetic",
                          axis_label: "",
                          axis_label_standoff: 5,
                          axis_label_text_font: "helvetica",
                          axis_label_text_font_size: "16pt",
                          axis_label_text_font_style: "normal",
                          axis_label_text_color: "#444444",
                          axis_label_text_alpha: 1.0,
                          axis_label_text_align: "center",
                          axis_label_text_baseline: "alphabetic"
                        };
                      };
                
                      return Axis;
                
                    })(HasParent);
                    return {
                      "Model": Axis,
                      "View": AxisView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=axis.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('ticking/categorical_ticker',["backbone", "common/has_properties"], function(Backbone, HasProperties) {
                    var CategoricalTicker, CategoricalTickers, _ref, _ref1;
                    CategoricalTicker = (function(_super) {
                      __extends(CategoricalTicker, _super);
                
                      function CategoricalTicker() {
                        _ref = CategoricalTicker.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      CategoricalTicker.prototype.type = 'CategoricalTicker';
                
                      CategoricalTicker.prototype.get_ticks = function(start, end, range, _arg) {
                        var desired_n_ticks;
                        desired_n_ticks = _arg.desired_n_ticks;
                        return {
                          "major": range.get("factors"),
                          "minor": []
                        };
                      };
                
                      CategoricalTicker.prototype.defaults = function() {
                        return CategoricalTicker.__super__.defaults.call(this);
                      };
                
                      return CategoricalTicker;
                
                    })(HasProperties);
                    CategoricalTickers = (function(_super) {
                      __extends(CategoricalTickers, _super);
                
                      function CategoricalTickers() {
                        _ref1 = CategoricalTickers.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      CategoricalTickers.prototype.model = CategoricalTicker;
                
                      return CategoricalTickers;
                
                    })(Backbone.Collection);
                    return {
                      "Model": CategoricalTicker,
                      "Collection": new CategoricalTickers()
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=categorical_ticker.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('ticking/categorical_tick_formatter',["backbone", "common/has_properties"], function(Backbone, HasProperties) {
                    var CategoricalTickFormatter, CategoricalTickFormatters, _ref, _ref1;
                    CategoricalTickFormatter = (function(_super) {
                      __extends(CategoricalTickFormatter, _super);
                
                      function CategoricalTickFormatter() {
                        _ref = CategoricalTickFormatter.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      CategoricalTickFormatter.prototype.type = 'CategoricalTickFormatter';
                
                      CategoricalTickFormatter.prototype.initialize = function(attrs, options) {
                        return CategoricalTickFormatter.__super__.initialize.call(this, attrs, options);
                      };
                
                      CategoricalTickFormatter.prototype.format = function(ticks) {
                        return ticks;
                      };
                
                      return CategoricalTickFormatter;
                
                    })(HasProperties);
                    CategoricalTickFormatters = (function(_super) {
                      __extends(CategoricalTickFormatters, _super);
                
                      function CategoricalTickFormatters() {
                        _ref1 = CategoricalTickFormatters.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      CategoricalTickFormatters.prototype.model = CategoricalTickFormatter;
                
                      CategoricalTickFormatters.prototype.defaults = function() {
                        return CategoricalTickFormatters.__super__.defaults.call(this);
                      };
                
                      return CategoricalTickFormatters;
                
                    })(Backbone.Collection);
                    return {
                      "Model": CategoricalTickFormatter,
                      "Collection": new CategoricalTickFormatters()
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=categorical_tick_formatter.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('renderer/guide/categorical_axis',["backbone", "./axis", "range/factor_range", "ticking/categorical_ticker", "ticking/categorical_tick_formatter"], function(Backbone, Axis, FactorRange, CategoricalTicker, CategoricalTickFormatter) {
                    var CategoricalAxes, CategoricalAxis, CategoricalAxisView, _ref, _ref1, _ref2;
                    CategoricalAxisView = (function(_super) {
                      __extends(CategoricalAxisView, _super);
                
                      function CategoricalAxisView() {
                        _ref = CategoricalAxisView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      return CategoricalAxisView;
                
                    })(Axis.View);
                    CategoricalAxis = (function(_super) {
                      __extends(CategoricalAxis, _super);
                
                      function CategoricalAxis() {
                        _ref1 = CategoricalAxis.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      CategoricalAxis.prototype.default_view = CategoricalAxisView;
                
                      CategoricalAxis.prototype.type = 'CategoricalAxis';
                
                      CategoricalAxis.prototype.initialize = function(attrs, objects) {
                        CategoricalAxis.__super__.initialize.call(this, attrs, objects);
                        if (this.get('ticker') == null) {
                          this.set_obj('ticker', CategoricalTicker.Collection.create());
                        }
                        if (this.get('formatter') == null) {
                          return this.set_obj('formatter', CategoricalTickFormatter.Collection.create());
                        }
                      };
                
                      CategoricalAxis.prototype._bounds = function() {
                        var i, range_bounds, ranges, user_bounds, _ref2;
                        i = this.get('dimension');
                        ranges = [this.get('plot').get('x_range'), this.get('plot').get('y_range')];
                        user_bounds = (_ref2 = this.get('bounds')) != null ? _ref2 : 'auto';
                        if (user_bounds !== 'auto') {
                          console.log("Categorical Axes only support user_bounds='auto', ignoring");
                        }
                        range_bounds = [ranges[i].get('min'), ranges[i].get('max')];
                        return range_bounds;
                      };
                
                      return CategoricalAxis;
                
                    })(Axis.Model);
                    CategoricalAxes = (function(_super) {
                      __extends(CategoricalAxes, _super);
                
                      function CategoricalAxes() {
                        _ref2 = CategoricalAxes.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      CategoricalAxes.prototype.model = CategoricalAxis;
                
                      return CategoricalAxes;
                
                    })(Backbone.Collection);
                    return {
                      "Model": CategoricalAxis,
                      "Collection": new CategoricalAxes(),
                      "View": CategoricalAxisView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=categorical_axis.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('ticking/abstract_ticker',["underscore", "backbone", "common/has_properties"], function(_, Backbone, HasProperties) {
                    var AbstractTicker, AbstractTickers, DEFAULT_DESIRED_N_TICKS, repr, _ref, _ref1;
                    repr = function(obj) {
                      var elem, elems_str, key, obj_as_string, props_str;
                      if (obj === null) {
                        return "null";
                      }
                      if (obj == null) {
                        return "undefined";
                      } else if (obj.constructor === Array) {
                        elems_str = ((function() {
                          var _i, _len, _results;
                          _results = [];
                          for (_i = 0, _len = obj.length; _i < _len; _i++) {
                            elem = obj[_i];
                            _results.push(repr(elem));
                          }
                          return _results;
                        })()).join(", ");
                        return "[" + elems_str + "]";
                      } else if (obj.constructor === Object) {
                        props_str = ((function() {
                          var _results;
                          _results = [];
                          for (key in obj) {
                            _results.push("" + key + ": " + (repr(obj[key])));
                          }
                          return _results;
                        })()).join(", ");
                        return "{" + props_str + "}";
                      } else if (obj.constructor === String) {
                        return "\"" + obj + "\"";
                      } else if (obj.constructor === Function) {
                        return "<Function: " + obj.name + ">";
                      } else {
                        obj_as_string = obj.toString();
                        if (obj_as_string === "[object Object]") {
                          return "<" + obj.constructor.name + ">";
                        } else {
                          return obj_as_string;
                        }
                      }
                    };
                    DEFAULT_DESIRED_N_TICKS = 6;
                    AbstractTicker = (function(_super) {
                      __extends(AbstractTicker, _super);
                
                      function AbstractTicker() {
                        _ref = AbstractTicker.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      AbstractTicker.prototype.type = 'AbstractTicker';
                
                      AbstractTicker.prototype.initialize = function(attrs, options) {
                        return AbstractTicker.__super__.initialize.call(this, attrs, options);
                      };
                
                      AbstractTicker.prototype.get_ticks = function(data_low, data_high, range, _arg) {
                        var desired_n_ticks;
                        desired_n_ticks = _arg.desired_n_ticks;
                        if (desired_n_ticks == null) {
                          desired_n_ticks = DEFAULT_DESIRED_N_TICKS;
                        }
                        return this.get_ticks_no_defaults(data_low, data_high, desired_n_ticks);
                      };
                
                      AbstractTicker.prototype.get_ticks_no_defaults = function(data_low, data_high, desired_n_ticks) {
                        var end_factor, factor, factors, i, interval, minor_interval, minor_offsets, minor_ticks, num_minor_ticks, start_factor, tick, ticks, x, _i, _j, _k, _len, _len1, _len2;
                        interval = this.get_interval(data_low, data_high, desired_n_ticks);
                        start_factor = Math.floor(data_low / interval);
                        end_factor = Math.ceil(data_high / interval);
                        if (_.isNaN(start_factor) || _.isNaN(end_factor)) {
                          factors = [];
                        } else {
                          factors = _.range(start_factor, end_factor + 1);
                        }
                        ticks = (function() {
                          var _i, _len, _results;
                          _results = [];
                          for (_i = 0, _len = factors.length; _i < _len; _i++) {
                            factor = factors[_i];
                            _results.push(factor * interval);
                          }
                          return _results;
                        })();
                        num_minor_ticks = this.get("num_minor_ticks");
                        minor_ticks = [];
                        if (num_minor_ticks > 1) {
                          minor_interval = interval / num_minor_ticks;
                          minor_offsets = (function() {
                            var _i, _results;
                            _results = [];
                            for (i = _i = 1; 1 <= num_minor_ticks ? _i <= num_minor_ticks : _i >= num_minor_ticks; i = 1 <= num_minor_ticks ? ++_i : --_i) {
                              _results.push(i * minor_interval);
                            }
                            return _results;
                          })();
                          for (_i = 0, _len = minor_offsets.length; _i < _len; _i++) {
                            x = minor_offsets[_i];
                            minor_ticks.push(ticks[0] - x);
                          }
                          for (_j = 0, _len1 = ticks.length; _j < _len1; _j++) {
                            tick = ticks[_j];
                            for (_k = 0, _len2 = minor_offsets.length; _k < _len2; _k++) {
                              x = minor_offsets[_k];
                              minor_ticks.push(tick + x);
                            }
                          }
                        }
                        return {
                          "major": ticks,
                          "minor": minor_ticks
                        };
                      };
                
                      AbstractTicker.prototype.get_interval = void 0;
                
                      AbstractTicker.prototype.get_min_interval = function() {
                        return this.get('min_interval');
                      };
                
                      AbstractTicker.prototype.get_max_interval = function() {
                        return this.get('max_interval');
                      };
                
                      AbstractTicker.prototype.toString = function() {
                        var class_name, key, params_str, props;
                        class_name = typeof this;
                        props = this.get('toString_properties');
                        params_str = ((function() {
                          var _i, _len, _results;
                          _results = [];
                          for (_i = 0, _len = props.length; _i < _len; _i++) {
                            key = props[_i];
                            _results.push("" + key + "=" + (repr(this[key])));
                          }
                          return _results;
                        }).call(this)).join(", ");
                        return "" + class_name + "(" + params_str + ")";
                      };
                
                      AbstractTicker.prototype.get_ideal_interval = function(data_low, data_high, desired_n_ticks) {
                        var data_range;
                        data_range = data_high - data_low;
                        return data_range / desired_n_ticks;
                      };
                
                      AbstractTicker.prototype.defaults = function() {
                        return _.extend(AbstractTicker.__super__.defaults.call(this), {
                          toString_properties: [],
                          num_minor_ticks: 5
                        });
                      };
                
                      return AbstractTicker;
                
                    })(HasProperties);
                    AbstractTickers = (function(_super) {
                      __extends(AbstractTickers, _super);
                
                      function AbstractTickers() {
                        _ref1 = AbstractTickers.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      AbstractTickers.prototype.model = AbstractTicker;
                
                      return AbstractTickers;
                
                    })(Backbone.Collection);
                    return {
                      "Model": AbstractTicker,
                      "Collection": new AbstractTickers()
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=abstract_ticker.js.map
                */;
                (function() {
                  define('ticking/util',["underscore", "backbone"], function(_, Backbone) {
                    var ONE_DAY, ONE_HOUR, ONE_MILLI, ONE_MINUTE, ONE_MONTH, ONE_SECOND, ONE_YEAR, argmin, copy_date, last_month_no_later_than, last_year_no_later_than;
                    ONE_MILLI = 1.0;
                    ONE_SECOND = 1000.0;
                    ONE_MINUTE = 60.0 * ONE_SECOND;
                    ONE_HOUR = 60 * ONE_MINUTE;
                    ONE_DAY = 24 * ONE_HOUR;
                    ONE_MONTH = 30 * ONE_DAY;
                    ONE_YEAR = 365 * ONE_DAY;
                    argmin = function(arr) {
                      var ret;
                      ret = _.min(_.range(arr.length), (function(i) {
                        return arr[i];
                      }));
                      return ret;
                    };
                    copy_date = function(date) {
                      return new Date(date.getTime());
                    };
                    last_month_no_later_than = function(date) {
                      date = copy_date(date);
                      date.setUTCDate(1);
                      date.setUTCHours(0);
                      date.setUTCMinutes(0);
                      date.setUTCSeconds(0);
                      date.setUTCMilliseconds(0);
                      return date;
                    };
                    last_year_no_later_than = function(date) {
                      date = last_month_no_later_than(date);
                      date.setUTCMonth(0);
                      return date;
                    };
                    return {
                      "argmin": argmin,
                      "copy_date": copy_date,
                      "last_month_no_later_than": last_month_no_later_than,
                      "last_year_no_later_than": last_year_no_later_than,
                      "ONE_MILLI": ONE_MILLI,
                      "ONE_SECOND": ONE_SECOND,
                      "ONE_MINUTE": ONE_MINUTE,
                      "ONE_HOUR": ONE_HOUR,
                      "ONE_DAY": ONE_DAY,
                      "ONE_MONTH": ONE_MONTH,
                      "ONE_YEAR": ONE_YEAR
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=util.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('ticking/adaptive_ticker',["underscore", "backbone", "ticking/abstract_ticker", "ticking/util"], function(_, Backbone, AbstractTicker, util) {
                    var AdaptiveTicker, AdaptiveTickers, argmin, clamp, log, _ref, _ref1;
                    argmin = util.argmin;
                    clamp = function(x, min_val, max_val) {
                      return Math.max(min_val, Math.min(max_val, x));
                    };
                    log = function(x, base) {
                      if (base == null) {
                        base = Math.E;
                      }
                      return Math.log(x) / Math.log(base);
                    };
                    AdaptiveTicker = (function(_super) {
                      __extends(AdaptiveTicker, _super);
                
                      function AdaptiveTicker() {
                        _ref = AdaptiveTicker.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      AdaptiveTicker.prototype.type = 'AdaptiveTicker';
                
                      AdaptiveTicker.prototype.initialize = function(attrs, options) {
                        var prefix_mantissa, suffix_mantissa;
                        AdaptiveTicker.__super__.initialize.call(this, attrs, options);
                        prefix_mantissa = _.last(this.get('mantissas')) / this.get('base');
                        suffix_mantissa = _.first(this.get('mantissas')) * this.get('base');
                        this.extended_mantissas = _.flatten([prefix_mantissa, this.get('mantissas'), suffix_mantissa]);
                        return this.base_factor = this.get('min_interval') === 0.0 ? 1.0 : this.get('min_interval');
                      };
                
                      AdaptiveTicker.prototype.get_interval = function(data_low, data_high, desired_n_ticks) {
                        var best_mantissa, candidate_mantissas, data_range, errors, ideal_interval, ideal_magnitude, ideal_mantissa, interval, interval_exponent;
                        data_range = data_high - data_low;
                        ideal_interval = this.get_ideal_interval(data_low, data_high, desired_n_ticks);
                        interval_exponent = Math.floor(log(ideal_interval / this.base_factor, this.get('base')));
                        ideal_magnitude = Math.pow(this.get('base'), interval_exponent) * this.base_factor;
                        ideal_mantissa = ideal_interval / ideal_magnitude;
                        candidate_mantissas = this.extended_mantissas;
                        errors = candidate_mantissas.map(function(mantissa) {
                          return Math.abs(desired_n_ticks - (data_range / (mantissa * ideal_magnitude)));
                        });
                        best_mantissa = candidate_mantissas[argmin(errors)];
                        interval = best_mantissa * ideal_magnitude;
                        return clamp(interval, this.get('min_interval'), this.get('max_interval'));
                      };
                
                      AdaptiveTicker.prototype.defaults = function() {
                        return _.extend(AdaptiveTicker.__super__.defaults.call(this), {
                          toString_properties: ['mantissas', 'base', 'min_magnitude', 'max_magnitude'],
                          base: 10.0,
                          mantissas: [2, 5, 10],
                          min_interval: 0.0,
                          max_interval: Infinity
                        });
                      };
                
                      return AdaptiveTicker;
                
                    })(AbstractTicker.Model);
                    AdaptiveTickers = (function(_super) {
                      __extends(AdaptiveTickers, _super);
                
                      function AdaptiveTickers() {
                        _ref1 = AdaptiveTickers.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      AdaptiveTickers.prototype.model = AdaptiveTicker;
                
                      return AdaptiveTickers;
                
                    })(Backbone.Collection);
                    return {
                      "Model": AdaptiveTicker,
                      "Collection": new AdaptiveTickers()
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=adaptive_ticker.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('ticking/composite_ticker',["underscore", "backbone", "ticking/abstract_ticker", "ticking/util"], function(_, Backbone, AbstractTicker, util) {
                    var CompositeTicker, CompositeTickers, argmin, _ref, _ref1;
                    argmin = util.argmin;
                    CompositeTicker = (function(_super) {
                      __extends(CompositeTicker, _super);
                
                      function CompositeTicker() {
                        _ref = CompositeTicker.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      CompositeTicker.prototype.type = 'CompositeTicker';
                
                      CompositeTicker.prototype.initialize = function(attrs, options) {
                        var tickers;
                        CompositeTicker.__super__.initialize.call(this, attrs, options);
                        tickers = this.get('tickers');
                        this.register_property('min_intervals', function() {
                          return _.invoke(tickers, 'get_min_interval');
                        }, true);
                        this.add_dependencies('min_intervals', this, ['tickers']);
                        this.register_property('max_intervals', function() {
                          return _.invoke(tickers, 'get_max_interval');
                        }, true);
                        this.add_dependencies('max_intervals', this, ['tickers']);
                        this.register_property('min_interval', function() {
                          return _.first(this.get('min_intervals'));
                        }, true);
                        this.add_dependencies('min_interval', this, ['min_intervals']);
                        this.register_property('max_interval', function() {
                          return _.first(this.get('max_intervals'));
                        }, true);
                        return this.add_dependencies('max_interval', this, ['max_interval']);
                      };
                
                      CompositeTicker.prototype.get_best_ticker = function(data_low, data_high, desired_n_ticks) {
                        var best_index, best_ticker, best_ticker_ndx, data_range, errors, ideal_interval, intervals, ticker_ndxs;
                        data_range = data_high - data_low;
                        ideal_interval = this.get_ideal_interval(data_low, data_high, desired_n_ticks);
                        ticker_ndxs = [_.sortedIndex(this.get('min_intervals'), ideal_interval) - 1, _.sortedIndex(this.get('max_intervals'), ideal_interval)];
                        intervals = [this.get('min_intervals')[ticker_ndxs[0]], this.get('max_intervals')[ticker_ndxs[1]]];
                        errors = intervals.map(function(interval) {
                          return Math.abs(desired_n_ticks - (data_range / interval));
                        });
                        best_index = argmin(errors);
                        if (best_index === Infinity) {
                          return this.get('tickers')[0];
                        }
                        best_ticker_ndx = ticker_ndxs[best_index];
                        best_ticker = this.get('tickers')[best_ticker_ndx];
                        return best_ticker;
                      };
                
                      CompositeTicker.prototype.get_interval = function(data_low, data_high, desired_n_ticks) {
                        var best_ticker;
                        best_ticker = this.get_best_ticker(data_low, data_high, desired_n_ticks);
                        return best_ticker.get_interval(data_low, data_high, desired_n_ticks);
                      };
                
                      CompositeTicker.prototype.get_ticks_no_defaults = function(data_low, data_high, desired_n_ticks) {
                        var best_ticker, ticks;
                        best_ticker = this.get_best_ticker(data_low, data_high, desired_n_ticks);
                        ticks = best_ticker.get_ticks_no_defaults(data_low, data_high, desired_n_ticks);
                        return ticks;
                      };
                
                      CompositeTicker.prototype.defaults = function() {
                        return CompositeTicker.__super__.defaults.call(this);
                      };
                
                      return CompositeTicker;
                
                    })(AbstractTicker.Model);
                    CompositeTickers = (function(_super) {
                      __extends(CompositeTickers, _super);
                
                      function CompositeTickers() {
                        _ref1 = CompositeTickers.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      CompositeTickers.prototype.model = CompositeTicker;
                
                      return CompositeTickers;
                
                    })(Backbone.Collection);
                    return {
                      "Model": CompositeTicker,
                      "Collection": new CompositeTickers()
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=composite_ticker.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('ticking/single_interval_ticker',["underscore", "backbone", "ticking/abstract_ticker"], function(_, Backbone, AbstractTicker) {
                    var SingleIntervalTicker, SingleIntervalTickers, _ref, _ref1;
                    SingleIntervalTicker = (function(_super) {
                      __extends(SingleIntervalTicker, _super);
                
                      function SingleIntervalTicker() {
                        _ref = SingleIntervalTicker.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      SingleIntervalTicker.prototype.type = 'SingleIntervalTicker';
                
                      SingleIntervalTicker.prototype.initialize = function(attrs, options) {
                        SingleIntervalTicker.__super__.initialize.call(this, attrs, options);
                        this.register_property('min_interval', function() {
                          return this.get('interval');
                        }, true);
                        this.add_dependencies('min_interval', this, ['interval']);
                        this.register_property('max_interval', function() {
                          return this.get('interval');
                        }, true);
                        return this.add_dependencies('max_interval', this, ['interval']);
                      };
                
                      SingleIntervalTicker.prototype.get_interval = function(data_low, data_high, n_desired_ticks) {
                        return this.get('interval');
                      };
                
                      SingleIntervalTicker.prototype.defaults = function() {
                        return _.extend(SingleIntervalTicker.__super__.defaults.call(this), {
                          toString_properties: ['interval']
                        });
                      };
                
                      return SingleIntervalTicker;
                
                    })(AbstractTicker.Model);
                    SingleIntervalTickers = (function(_super) {
                      __extends(SingleIntervalTickers, _super);
                
                      function SingleIntervalTickers() {
                        _ref1 = SingleIntervalTickers.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      SingleIntervalTickers.prototype.model = SingleIntervalTicker;
                
                      return SingleIntervalTickers;
                
                    })(Backbone.Collection);
                    return {
                      "Model": SingleIntervalTicker,
                      "Collection": new SingleIntervalTickers()
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=single_interval_ticker.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('ticking/days_ticker',["underscore", "backbone", "ticking/single_interval_ticker", "ticking/util"], function(_, Backbone, SingleIntervalTicker, util) {
                    var DaysTicker, DaysTickers, ONE_DAY, copy_date, date_range_by_month, last_month_no_later_than, _ref, _ref1;
                    copy_date = util.copy_date;
                    last_month_no_later_than = util.last_month_no_later_than;
                    ONE_DAY = util.ONE_DAY;
                    date_range_by_month = function(start_time, end_time) {
                      var date, dates, end_date, prev_end_date, start_date;
                      start_date = last_month_no_later_than(new Date(start_time));
                      end_date = last_month_no_later_than(new Date(end_time));
                      prev_end_date = copy_date(end_date);
                      end_date.setUTCMonth(end_date.getUTCMonth() + 1);
                      dates = [];
                      date = start_date;
                      while (true) {
                        dates.push(copy_date(date));
                        date.setUTCMonth(date.getUTCMonth() + 1);
                        if (date > end_date) {
                          break;
                        }
                      }
                      return dates;
                    };
                    DaysTicker = (function(_super) {
                      __extends(DaysTicker, _super);
                
                      function DaysTicker() {
                        _ref = DaysTicker.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      DaysTicker.prototype.type = 'DaysTicker';
                
                      DaysTicker.prototype.initialize = function(attrs, options) {
                        var days, interval;
                        attrs.num_minor_ticks = 0;
                        DaysTicker.__super__.initialize.call(this, attrs, options);
                        days = this.get('days');
                        interval = days.length > 1 ? (days[1] - days[0]) * ONE_DAY : 31 * ONE_DAY;
                        return this.set('interval', interval);
                      };
                
                      DaysTicker.prototype.get_ticks_no_defaults = function(data_low, data_high, desired_n_ticks) {
                        var all_ticks, date, day_dates, days, days_of_month, interval, month_dates, ticks_in_range,
                          _this = this;
                        month_dates = date_range_by_month(data_low, data_high);
                        days = this.get('days');
                        days_of_month = function(month_date, interval) {
                          var dates, day, day_date, future_date, _i, _len;
                          dates = [];
                          for (_i = 0, _len = days.length; _i < _len; _i++) {
                            day = days[_i];
                            day_date = copy_date(month_date);
                            day_date.setUTCDate(day);
                            future_date = new Date(day_date.getTime() + (interval / 2));
                            if (future_date.getUTCMonth() === month_date.getUTCMonth()) {
                              dates.push(day_date);
                            }
                          }
                          return dates;
                        };
                        interval = this.get('interval');
                        day_dates = _.flatten((function() {
                          var _i, _len, _results;
                          _results = [];
                          for (_i = 0, _len = month_dates.length; _i < _len; _i++) {
                            date = month_dates[_i];
                            _results.push(days_of_month(date, interval));
                          }
                          return _results;
                        })());
                        all_ticks = _.invoke(day_dates, 'getTime');
                        ticks_in_range = _.filter(all_ticks, (function(tick) {
                          return (data_low <= tick && tick <= data_high);
                        }));
                        return {
                          "major": ticks_in_range,
                          "minor": []
                        };
                      };
                
                      DaysTicker.prototype.defaults = function() {
                        return _.extend(DaysTicker.__super__.defaults.call(this), {
                          toString_properties: ['days']
                        });
                      };
                
                      return DaysTicker;
                
                    })(SingleIntervalTicker.Model);
                    DaysTickers = (function(_super) {
                      __extends(DaysTickers, _super);
                
                      function DaysTickers() {
                        _ref1 = DaysTickers.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      DaysTickers.prototype.model = DaysTicker;
                
                      return DaysTickers;
                
                    })(Backbone.Collection);
                    return {
                      "Model": DaysTicker,
                      "Collection": new DaysTickers()
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=days_ticker.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('ticking/months_ticker',["underscore", "backbone", "ticking/single_interval_ticker", "ticking/util"], function(_, Backbone, SingleIntervalTicker, util) {
                    var MonthsTicker, MonthsTickers, ONE_MONTH, copy_date, date_range_by_year, last_year_no_later_than, _ref, _ref1;
                    copy_date = util.copy_date;
                    last_year_no_later_than = util.last_year_no_later_than;
                    ONE_MONTH = util.ONE_MONTH;
                    date_range_by_year = function(start_time, end_time) {
                      var date, dates, end_date, start_date;
                      start_date = last_year_no_later_than(new Date(start_time));
                      end_date = last_year_no_later_than(new Date(end_time));
                      end_date.setUTCFullYear(end_date.getUTCFullYear() + 1);
                      dates = [];
                      date = start_date;
                      while (true) {
                        dates.push(copy_date(date));
                        date.setUTCFullYear(date.getUTCFullYear() + 1);
                        if (date > end_date) {
                          break;
                        }
                      }
                      return dates;
                    };
                    MonthsTicker = (function(_super) {
                      __extends(MonthsTicker, _super);
                
                      function MonthsTicker() {
                        _ref = MonthsTicker.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      MonthsTicker.prototype.type = 'MonthsTicker';
                
                      MonthsTicker.prototype.initialize = function(attrs, options) {
                        var interval, months;
                        MonthsTicker.__super__.initialize.call(this, attrs, options);
                        months = this.get('months');
                        interval = months.length > 1 ? (months[1] - months[0]) * ONE_MONTH : 12 * ONE_MONTH;
                        return this.set('interval', interval);
                      };
                
                      MonthsTicker.prototype.get_ticks_no_defaults = function(data_low, data_high, desired_n_ticks) {
                        var all_ticks, date, month_dates, months, months_of_year, ticks_in_range, year_dates;
                        year_dates = date_range_by_year(data_low, data_high);
                        months = this.get('months');
                        months_of_year = function(year_date) {
                          return months.map(function(month) {
                            var month_date;
                            month_date = copy_date(year_date);
                            month_date.setUTCMonth(month);
                            return month_date;
                          });
                        };
                        month_dates = _.flatten((function() {
                          var _i, _len, _results;
                          _results = [];
                          for (_i = 0, _len = year_dates.length; _i < _len; _i++) {
                            date = year_dates[_i];
                            _results.push(months_of_year(date));
                          }
                          return _results;
                        })());
                        all_ticks = _.invoke(month_dates, 'getTime');
                        ticks_in_range = _.filter(all_ticks, (function(tick) {
                          return (data_low <= tick && tick <= data_high);
                        }));
                        return {
                          "major": ticks_in_range,
                          "minor": []
                        };
                      };
                
                      MonthsTicker.prototype.defaults = function() {
                        return _.extend(MonthsTicker.__super__.defaults.call(this), {
                          toString_properties: ['months']
                        });
                      };
                
                      return MonthsTicker;
                
                    })(SingleIntervalTicker.Model);
                    MonthsTickers = (function(_super) {
                      __extends(MonthsTickers, _super);
                
                      function MonthsTickers() {
                        _ref1 = MonthsTickers.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      MonthsTickers.prototype.model = MonthsTicker;
                
                      return MonthsTickers;
                
                    })(Backbone.Collection);
                    return {
                      "Model": MonthsTicker,
                      "Collection": new MonthsTickers()
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=months_ticker.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('ticking/basic_ticker',["ticking/adaptive_ticker"], function(AdaptiveTicker) {
                    var BasicTicker, BasicTickers, _ref, _ref1;
                    BasicTicker = (function(_super) {
                      __extends(BasicTicker, _super);
                
                      function BasicTicker() {
                        _ref = BasicTicker.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      BasicTicker.prototype.type = 'BasicTicker';
                
                      BasicTicker.prototype.initialize = function(attrs, options) {
                        return BasicTicker.__super__.initialize.call(this, attrs, options);
                      };
                
                      BasicTicker.prototype.defaults = function() {
                        return _.extend(BasicTicker.__super__.defaults.call(this), {
                          mantissas: [1, 2, 5]
                        });
                      };
                
                      return BasicTicker;
                
                    })(AdaptiveTicker.Model);
                    BasicTickers = (function(_super) {
                      __extends(BasicTickers, _super);
                
                      function BasicTickers() {
                        _ref1 = BasicTickers.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      BasicTickers.prototype.model = BasicTicker;
                
                      return BasicTickers;
                
                    })(Backbone.Collection);
                    return {
                      "Model": BasicTicker,
                      "Collection": new BasicTickers()
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=basic_ticker.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('ticking/years_ticker',["underscore", "backbone", "ticking/basic_ticker", "ticking/single_interval_ticker", "ticking/util"], function(_, Backbone, BasicTicker, SingleIntervalTicker, util) {
                    var ONE_YEAR, YearsTicker, YearsTickers, last_year_no_later_than, _ref, _ref1;
                    last_year_no_later_than = util.last_year_no_later_than;
                    ONE_YEAR = util.ONE_YEAR;
                    YearsTicker = (function(_super) {
                      __extends(YearsTicker, _super);
                
                      function YearsTicker() {
                        _ref = YearsTicker.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      YearsTicker.prototype.type = 'YearsTicker';
                
                      YearsTicker.prototype.initialize = function(attrs, options) {
                        YearsTicker.__super__.initialize.call(this, attrs, options);
                        this.set('interval', ONE_YEAR);
                        return this.basic_ticker = new BasicTicker.Model({
                          num_minor_ticks: 0
                        });
                      };
                
                      YearsTicker.prototype.get_ticks_no_defaults = function(data_low, data_high, desired_n_ticks) {
                        var all_ticks, end_year, start_year, ticks_in_range, year, years;
                        start_year = last_year_no_later_than(new Date(data_low)).getUTCFullYear();
                        end_year = last_year_no_later_than(new Date(data_high)).getUTCFullYear();
                        years = this.basic_ticker.get_ticks_no_defaults(start_year, end_year, desired_n_ticks).major;
                        all_ticks = (function() {
                          var _i, _len, _results;
                          _results = [];
                          for (_i = 0, _len = years.length; _i < _len; _i++) {
                            year = years[_i];
                            _results.push(Date.UTC(year, 0, 1));
                          }
                          return _results;
                        })();
                        ticks_in_range = _.filter(all_ticks, (function(tick) {
                          return (data_low <= tick && tick <= data_high);
                        }));
                        return {
                          "major": ticks_in_range,
                          "minor": []
                        };
                      };
                
                      YearsTicker.prototype.defaults = function() {
                        return _.extend(YearsTicker.__super__.defaults.call(this), {
                          toString_properties: ['years']
                        });
                      };
                
                      return YearsTicker;
                
                    })(SingleIntervalTicker.Model);
                    YearsTickers = (function(_super) {
                      __extends(YearsTickers, _super);
                
                      function YearsTickers() {
                        _ref1 = YearsTickers.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      YearsTickers.prototype.model = YearsTicker;
                
                      return YearsTickers;
                
                    })(Backbone.Collection);
                    return {
                      "Model": YearsTicker,
                      "Collection": new YearsTickers()
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=years_ticker.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('ticking/datetime_ticker',["underscore", "ticking/adaptive_ticker", "ticking/composite_ticker", "ticking/days_ticker", "ticking/months_ticker", "ticking/years_ticker", "ticking/util"], function(_, AdaptiveTicker, CompositeTicker, DaysTicker, MonthsTicker, YearsTicker, util) {
                    var DatetimeTicker, DatetimeTickers, ONE_HOUR, ONE_MILLI, ONE_MINUTE, ONE_MONTH, ONE_SECOND, _ref, _ref1;
                    ONE_MILLI = util.ONE_MILLI;
                    ONE_SECOND = util.ONE_SECOND;
                    ONE_MINUTE = util.ONE_MINUTE;
                    ONE_HOUR = util.ONE_HOUR;
                    ONE_MONTH = util.ONE_MONTH;
                    DatetimeTicker = (function(_super) {
                      __extends(DatetimeTicker, _super);
                
                      function DatetimeTicker() {
                        _ref = DatetimeTicker.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      DatetimeTicker.prototype.type = 'DatetimeTicker';
                
                      DatetimeTicker.prototype.defaults = function() {
                        return _.extend(DatetimeTicker.__super__.defaults.call(this), {
                          num_minor_ticks: 0,
                          tickers: [
                            new AdaptiveTicker.Model({
                              mantissas: [1, 2, 5],
                              base: 10,
                              min_interval: 0,
                              max_interval: 500 * ONE_MILLI,
                              num_minor_ticks: 0
                            }), new AdaptiveTicker.Model({
                              mantissas: [1, 2, 5, 10, 15, 20, 30],
                              base: 60,
                              min_interval: ONE_SECOND,
                              max_interval: 30 * ONE_MINUTE,
                              num_minor_ticks: 0
                            }), new AdaptiveTicker.Model({
                              mantissas: [1, 2, 4, 6, 8, 12],
                              base: 24.0,
                              min_interval: ONE_HOUR,
                              max_interval: 12 * ONE_HOUR,
                              num_minor_ticks: 0
                            }), new DaysTicker.Model({
                              days: _.range(1, 32)
                            }), new DaysTicker.Model({
                              days: _.range(1, 31, 3)
                            }), new DaysTicker.Model({
                              days: [1, 8, 15, 22]
                            }), new DaysTicker.Model({
                              days: [1, 15]
                            }), new MonthsTicker.Model({
                              months: _.range(0, 12, 1)
                            }), new MonthsTicker.Model({
                              months: _.range(0, 12, 2)
                            }), new MonthsTicker.Model({
                              months: _.range(0, 12, 4)
                            }), new MonthsTicker.Model({
                              months: _.range(0, 12, 6)
                            }), new YearsTicker.Model({})
                          ]
                        });
                      };
                
                      return DatetimeTicker;
                
                    })(CompositeTicker.Model);
                    DatetimeTickers = (function(_super) {
                      __extends(DatetimeTickers, _super);
                
                      function DatetimeTickers() {
                        _ref1 = DatetimeTickers.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      DatetimeTickers.prototype.model = DatetimeTicker;
                
                      return DatetimeTickers;
                
                    })(Backbone.Collection);
                    return {
                      "Model": DatetimeTicker,
                      "Collection": new DatetimeTickers()
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=datetime_ticker.js.map
                */;
                (function(root) {
                define("sprintf", [], function() {
                  return (function() {
                /*! sprintf.js | Copyright (c) 2007-2013 Alexandru Marasteanu <hello at alexei dot ro> | 3 clause BSD license */
                
                (function(ctx) {
                	var sprintf = function() {
                		if (!sprintf.cache.hasOwnProperty(arguments[0])) {
                			sprintf.cache[arguments[0]] = sprintf.parse(arguments[0]);
                		}
                		return sprintf.format.call(null, sprintf.cache[arguments[0]], arguments);
                	};
                
                	sprintf.format = function(parse_tree, argv) {
                		var cursor = 1, tree_length = parse_tree.length, node_type = '', arg, output = [], i, k, match, pad, pad_character, pad_length;
                		for (i = 0; i < tree_length; i++) {
                			node_type = get_type(parse_tree[i]);
                			if (node_type === 'string') {
                				output.push(parse_tree[i]);
                			}
                			else if (node_type === 'array') {
                				match = parse_tree[i]; // convenience purposes only
                				if (match[2]) { // keyword argument
                					arg = argv[cursor];
                					for (k = 0; k < match[2].length; k++) {
                						if (!arg.hasOwnProperty(match[2][k])) {
                							throw(sprintf('[sprintf] property "%s" does not exist', match[2][k]));
                						}
                						arg = arg[match[2][k]];
                					}
                				}
                				else if (match[1]) { // positional argument (explicit)
                					arg = argv[match[1]];
                				}
                				else { // positional argument (implicit)
                					arg = argv[cursor++];
                				}
                
                				if (/[^s]/.test(match[8]) && (get_type(arg) != 'number')) {
                					throw(sprintf('[sprintf] expecting number but found %s', get_type(arg)));
                				}
                				switch (match[8]) {
                					case 'b': arg = arg.toString(2); break;
                					case 'c': arg = String.fromCharCode(arg); break;
                					case 'd': arg = parseInt(arg, 10); break;
                					case 'e': arg = match[7] ? arg.toExponential(match[7]) : arg.toExponential(); break;
                					case 'f': arg = match[7] ? parseFloat(arg).toFixed(match[7]) : parseFloat(arg); break;
                					case 'o': arg = arg.toString(8); break;
                					case 's': arg = ((arg = String(arg)) && match[7] ? arg.substring(0, match[7]) : arg); break;
                					case 'u': arg = arg >>> 0; break;
                					case 'x': arg = arg.toString(16); break;
                					case 'X': arg = arg.toString(16).toUpperCase(); break;
                				}
                				arg = (/[def]/.test(match[8]) && match[3] && arg >= 0 ? '+'+ arg : arg);
                				pad_character = match[4] ? match[4] == '0' ? '0' : match[4].charAt(1) : ' ';
                				pad_length = match[6] - String(arg).length;
                				pad = match[6] ? str_repeat(pad_character, pad_length) : '';
                				output.push(match[5] ? arg + pad : pad + arg);
                			}
                		}
                		return output.join('');
                	};
                
                	sprintf.cache = {};
                
                	sprintf.parse = function(fmt) {
                		var _fmt = fmt, match = [], parse_tree = [], arg_names = 0;
                		while (_fmt) {
                			if ((match = /^[^\x25]+/.exec(_fmt)) !== null) {
                				parse_tree.push(match[0]);
                			}
                			else if ((match = /^\x25{2}/.exec(_fmt)) !== null) {
                				parse_tree.push('%');
                			}
                			else if ((match = /^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(_fmt)) !== null) {
                				if (match[2]) {
                					arg_names |= 1;
                					var field_list = [], replacement_field = match[2], field_match = [];
                					if ((field_match = /^([a-z_][a-z_\d]*)/i.exec(replacement_field)) !== null) {
                						field_list.push(field_match[1]);
                						while ((replacement_field = replacement_field.substring(field_match[0].length)) !== '') {
                							if ((field_match = /^\.([a-z_][a-z_\d]*)/i.exec(replacement_field)) !== null) {
                								field_list.push(field_match[1]);
                							}
                							else if ((field_match = /^\[(\d+)\]/.exec(replacement_field)) !== null) {
                								field_list.push(field_match[1]);
                							}
                							else {
                								throw('[sprintf] huh?');
                							}
                						}
                					}
                					else {
                						throw('[sprintf] huh?');
                					}
                					match[2] = field_list;
                				}
                				else {
                					arg_names |= 2;
                				}
                				if (arg_names === 3) {
                					throw('[sprintf] mixing positional and named placeholders is not (yet) supported');
                				}
                				parse_tree.push(match);
                			}
                			else {
                				throw('[sprintf] huh?');
                			}
                			_fmt = _fmt.substring(match[0].length);
                		}
                		return parse_tree;
                	};
                
                	var vsprintf = function(fmt, argv, _argv) {
                		_argv = argv.slice(0);
                		_argv.splice(0, 0, fmt);
                		return sprintf.apply(null, _argv);
                	};
                
                	/**
                	 * helpers
                	 */
                	function get_type(variable) {
                		return Object.prototype.toString.call(variable).slice(8, -1).toLowerCase();
                	}
                
                	function str_repeat(input, multiplier) {
                		for (var output = []; multiplier > 0; output[--multiplier] = input) {/* do nothing */}
                		return output.join('');
                	}
                
                	/**
                	 * export to either browser or node.js
                	 */
                	ctx.sprintf = sprintf;
                	ctx.vsprintf = vsprintf;
                })(typeof exports != "undefined" ? exports : window);
                
                return root.sprintf = sprintf;
                  }).apply(root, arguments);
                });
                }(this));
                
                !function (definition) {
                  if (typeof module == "object" && module.exports) module.exports = definition();
                  else if (typeof define == "function") define('timezone',definition);
                  else this.tz = definition();
                } (function () {
                /*
                  function die () {
                    console.log.apply(console, __slice.call(arguments, 0));
                    return process.exit(1);
                  }
                
                  function say () { return console.log.apply(console, __slice.call(arguments, 0)) }
                */
                  function actualize (entry, rule, year) {
                    var actualized, date = rule.day[1];
                
                    do {
                      actualized = new Date(Date.UTC(year, rule.month, Math.abs(date++)));
                    } while (rule.day[0] < 7 && actualized.getUTCDay() != rule.day[0])
                
                    actualized = {
                      clock: rule.clock,
                      sort: actualized.getTime(),
                      rule: rule,
                      save: rule.save * 6e4,
                      offset: entry.offset
                    };
                
                    actualized[actualized.clock] = actualized.sort + rule.time * 6e4;
                
                    if (actualized.posix) {
                      actualized.wallclock = actualized[actualized.clock] + (entry.offset + rule.saved);
                    } else {
                      actualized.posix = actualized[actualized.clock] - (entry.offset + rule.saved);
                    }
                
                    return actualized;
                  }
                
                  function find (request, clock, time) {
                    var i, I, entry, found, zone = request[request.zone], actualized = [], abbrev, rules
                      , j, year = new Date(time).getUTCFullYear(), off = 1;
                    for (i = 1, I = zone.length; i < I; i++) if (zone[i][clock] <= time) break;
                    entry = zone[i];
                    if (entry.rules) {
                      rules = request[entry.rules];
                      for (j = year + 1; j >= year - off; --j)
                        for (i = 0, I = rules.length; i < I; i++)
                          if (rules[i].from <= j && j <= rules[i].to) actualized.push(actualize(entry, rules[i], j));
                          else if (rules[i].to < j && off == 1) off = j - rules[i].to;
                      actualized.sort(function (a, b) { return a.sort - b.sort });
                      for (i = 0, I = actualized.length; i < I; i++) {
                        if (time >= actualized[i][clock] && actualized[i][actualized[i].clock] > entry[actualized[i].clock]) found = actualized[i];
                      }
                    }
                    if (found) {
                      if (abbrev = /^(.*)\/(.*)$/.exec(entry.format)) {
                        found.abbrev = abbrev[found.save ? 2 : 1];
                      } else {
                        found.abbrev = entry.format.replace(/%s/, found.rule.letter);
                      }
                    }
                    return found || entry;
                  }
                
                  function convertToWallclock (request, posix) {
                    if (request.zone == "UTC") return posix;
                    request.entry = find(request, "posix", posix);
                    return posix + request.entry.offset + request.entry.save;
                  }
                
                  function convertToPOSIX (request, wallclock) {
                    if (request.zone == "UTC") return wallclock;
                
                    var entry, diff;
                    request.entry = entry = find(request, "wallclock", wallclock);
                    diff = wallclock - entry.wallclock;
                
                    return 0 < diff && diff < entry.save ? null : wallclock - entry.offset - entry.save;
                  }
                
                  function adjust (request, posix, match) {
                    var increment = +(match[1] + 1) // conversion necessary for week day addition
                      , offset = match[2] * increment
                      , index = UNITS.indexOf(match[3].toLowerCase())
                      , date
                      ;
                    if (index > 9) {
                      posix += offset * TIME[index - 10];
                    } else {
                      date = new Date(convertToWallclock(request, posix));
                      if (index < 7) {
                        while (offset) {
                          date.setUTCDate(date.getUTCDate() + increment);
                          if (date.getUTCDay() == index) offset -= increment;
                        }
                      } else if (index == 7) {
                        date.setUTCFullYear(date.getUTCFullYear() + offset);
                      } else if (index == 8) {
                        date.setUTCMonth(date.getUTCMonth() + offset);
                      } else {
                        date.setUTCDate(date.getUTCDate() + offset);
                      }
                      if ((posix = convertToPOSIX(request, date.getTime())) == null) {
                        posix = convertToPOSIX(request, date.getTime() + 864e5 * increment) - 864e5 * increment;
                      }
                    }
                    return posix;
                  }
                
                  function convert (vargs) {
                    if (!vargs.length) return "0.0.23";
                
                    var request = Object.create(this)
                      , adjustments = []
                      , i, I, $, argument, date
                      ;
                
                    for (i = 0; i < vargs.length; i++) { // leave the for loop alone, it works.
                      argument = vargs[i];
                      // https://twitter.com/bigeasy/status/215112186572439552
                      if (Array.isArray(argument)) {
                        if (!i && !isNaN(argument[1])) {
                          date = argument;
                        } else {
                          argument.splice.apply(vargs, [ i--, 1 ].concat(argument));
                        }
                      } else if (isNaN(argument)) {
                        $ = typeof argument;
                        if ($ == "string") {
                          if (~argument.indexOf("%")) {
                            request.format = argument;
                          } else if (!i && argument == "*") {
                            date = argument;
                          } else if (!i && ($ = /^(\d{4})-(\d{2})-(\d{2})(?:[T\s](\d{2}):(\d{2})(?::(\d{2})(?:\.(\d+))?)?(Z|(([+-])(\d{2}(:\d{2}){0,2})))?)?$/.exec(argument))) {
                            date = [];
                            date.push.apply(date, $.slice(1, 8));
                            if ($[9]) {
                              date.push($[10] + 1);
                              date.push.apply(date, $[11].split(/:/));
                            } else if ($[8]) {
                              date.push(1);
                            }
                          } else if (/^\w{2,3}_\w{2}$/.test(argument)) {
                            request.locale = argument;
                          } else if ($ = UNIT_RE.exec(argument)) {
                            adjustments.push($);
                          } else {
                            request.zone = argument;
                          }
                        } else if ($ == "function") {
                          if ($ = argument.call(request)) return $;
                        } else if (/^\w{2,3}_\w{2}$/.test(argument.name)) {
                          request[argument.name] = argument;
                        } else if (argument.zones) {
                          for ($ in argument.zones) request[$] = argument.zones[$];
                          for ($ in argument.rules) request[$] = argument.rules[$];
                        }
                      } else if (!i) {
                        date = argument;
                      }
                    }
                
                    if (!request[request.locale]) delete request.locale;
                    if (!request[request.zone]) delete request.zone;
                
                    if (date != null) {
                      if (date == "*") {
                        date = request.clock();
                      } else if (Array.isArray(date)) {
                        I = !date[7];
                        for (i = 0; i < 11; i++) date[i] = +(date[i] || 0); // conversion necessary for decrement
                        --date[1]; // Grr..
                        date = Date.UTC.apply(Date.UTC, date.slice(0, 8)) +
                          -date[7] * (date[8] * 36e5 + date[9] * 6e4 + date[10] * 1e3);
                      } else {
                        date = Math.floor(date);
                      }
                      if (!isNaN(date)) {
                        if (I) date = convertToPOSIX(request, date);
                
                        if (date == null) return date;
                
                        for (i = 0, I = adjustments.length; i < I; i++) {
                          date = adjust(request, date, adjustments[i]);
                        }
                
                        if (!request.format) return date;
                
                        $ = new Date(convertToWallclock(request, date));
                        return request.format.replace(/%([-0_^]?)(:{0,3})(\d*)(.)/g,
                        function (value, flag, colons, padding, specifier) {
                          var f, fill = "0", pad;
                          if (f = request[specifier]) {
                            value = String(f.call(request, $, date, flag, colons.length));
                            if ((flag || f.style) == "_") fill = " ";
                            pad = flag == "-" ? 0 : f.pad || 0;
                            while (value.length < pad) value = fill + value;
                            pad = flag == "-" ? 0 : padding || f.pad;
                            while (value.length < pad) value = fill + value;
                            if (specifier == "N" && pad < value.length) value = value.slice(0, pad);
                            if (flag == "^") value = value.toUpperCase();
                          }
                          return value;
                        });
                      }
                    }
                
                    return function () { return request.convert(arguments) };
                  }
                
                  var context =
                    { clock: function () { return +(new Date()) }
                    , zone: "UTC"
                    , entry: { abbrev: "UTC", offset: 0, save: 0 }
                    , UTC: 1
                    , z: function(date, posix, flag, delimiters) {
                        var offset = this.entry.offset + this.entry.save
                          , seconds = Math.abs(offset / 1000), parts = [], part = 3600, i, z;
                        for (i = 0; i < 3; i++) {
                          parts.push(("0" + Math.floor(seconds / part)).slice(-2));
                          seconds %= part;
                          part /= 60;
                        }
                        if (flag == "^" && !offset) return "Z";
                        if (flag == "^") delimiters = 3;
                        if (delimiters == 3) {
                          z = parts.join(":");
                          z = z.replace(/:00$/, "");
                          if (flag != "^") z = z.replace(/:00$/, "");
                        } else if (delimiters) {
                          z = parts.slice(0, delimiters + 1).join(":");
                          if (flag == "^") z = z.replace(/:00$/, "");
                        } else {
                          z = parts.slice(0, 2).join("");
                        }
                        z = (offset < 0 ? "-" : "+") + z;
                        z = z.replace(/([-+])(0)/, { "_": " $1", "-": "$1" }[flag] || "$1$2");
                        return z;
                      }
                    , "%": function(date) { return "%" }
                    , n: function (date) { return "\n" }
                    , t: function (date) { return "\t" }
                    , U: function (date) { return weekOfYear(date, 0) }
                    , W: function (date) { return weekOfYear(date, 1) }
                    , V: function (date) { return isoWeek(date)[0] }
                    , G: function (date) { return isoWeek(date)[1] }
                    , g: function (date) { return isoWeek(date)[1] % 100 }
                    , j: function (date) { return Math.floor((date.getTime() - Date.UTC(date.getUTCFullYear(), 0)) / 864e5) + 1 }
                    , s: function (date) { return Math.floor(date.getTime() / 1000) }
                    , C: function (date) { return Math.floor(date.getUTCFullYear() / 100) }
                    , N: function (date) { return date.getTime() % 1000 * 1000000 }
                    , m: function (date) { return date.getUTCMonth() + 1 }
                    , Y: function (date) { return date.getUTCFullYear() }
                    , y: function (date) { return date.getUTCFullYear() % 100 }
                    , H: function (date) { return date.getUTCHours() }
                    , M: function (date) { return date.getUTCMinutes() }
                    , S: function (date) { return date.getUTCSeconds() }
                    , e: function (date) { return date.getUTCDate() }
                    , d: function (date) { return date.getUTCDate() }
                    , u: function (date) { return date.getUTCDay() || 7 }
                    , w: function (date) { return date.getUTCDay() }
                    , l: function (date) { return date.getUTCHours() % 12 || 12 }
                    , I: function (date) { return date.getUTCHours() % 12 || 12 }
                    , k: function (date) { return date.getUTCHours() }
                    , Z: function (date) { return this.entry.abbrev }
                    , a: function (date) { return this[this.locale].day.abbrev[date.getUTCDay()] }
                    , A: function (date) { return this[this.locale].day.full[date.getUTCDay()] }
                    , h: function (date) { return this[this.locale].month.abbrev[date.getUTCMonth()] }
                    , b: function (date) { return this[this.locale].month.abbrev[date.getUTCMonth()] }
                    , B: function (date) { return this[this.locale].month.full[date.getUTCMonth()] }
                    , P: function (date) { return this[this.locale].meridiem[Math.floor(date.getUTCHours() / 12)].toLowerCase() }
                    , p: function (date) { return this[this.locale].meridiem[Math.floor(date.getUTCHours() / 12)] }
                    , R: function (date, posix) { return this.convert([ posix, "%H:%M" ]) }
                    , T: function (date, posix) { return this.convert([ posix, "%H:%M:%S" ]) }
                    , D: function (date, posix) { return this.convert([ posix, "%m/%d/%y" ]) }
                    , F: function (date, posix) { return this.convert([ posix, "%Y-%m-%d" ]) }
                    , x: function (date, posix) { return this.convert([ posix, this[this.locale].date ]) }
                    , r: function (date, posix) { return this.convert([ posix, this[this.locale].time12 || '%I:%M:%S' ]) }
                    , X: function (date, posix) { return this.convert([ posix, this[this.locale].time24 ]) }
                    , c: function (date, posix) { return this.convert([ posix, this[this.locale].dateTime ]) }
                    , convert: convert
                    , locale: "en_US"
                    , en_US: {
                        date: "%m/%d/%Y",
                        time24: "%I:%M:%S %p",
                        time12: "%I:%M:%S %p",
                        dateTime: "%a %d %b %Y %I:%M:%S %p %Z",
                        meridiem: [ "AM", "PM" ],
                        month: {
                          abbrev: "Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec".split("|"),
                          full: "January|February|March|April|May|June|July|August|September|October|November|December".split("|")
                        },
                        day: {
                          abbrev: "Sun|Mon|Tue|Wed|Thu|Fri|Sat".split("|"),
                          full: "Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday".split("|")
                        }
                      }
                    };
                  var UNITS = "Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|year|month|day|hour|minute|second|millisecond"
                    , UNIT_RE = new RegExp("^\\s*([+-])(\\d+)\\s+(" + UNITS + ")s?\\s*$", "i")
                    , TIME = [ 36e5, 6e4, 1e3, 1 ]
                    ;
                  UNITS = UNITS.toLowerCase().split("|");
                
                  "delmHMSUWVgCIky".replace(/./g, function (e) { context[e].pad = 2 });
                
                  context.N.pad = 9;
                  context.j.pad = 3;
                
                  context.k.style = "_";
                  context.l.style = "_";
                  context.e.style = "_";
                
                  function weekOfYear (date, startOfWeek) {
                    var diff, nyd, weekStart;
                    nyd = new Date(Date.UTC(date.getUTCFullYear(), 0));
                    diff = Math.floor((date.getTime() - nyd.getTime()) / 864e5);
                    if (nyd.getUTCDay() == startOfWeek) {
                      weekStart = 0;
                    } else {
                      weekStart = 7 - nyd.getUTCDay() + startOfWeek;
                      if (weekStart == 8) {
                        weekStart = 1;
                      }
                    }
                    return diff >= weekStart ? Math.floor((diff - weekStart) / 7) + 1 : 0;
                  }
                
                  function isoWeek (date) {
                    var nyd, nyy, week;
                    nyy = date.getUTCFullYear();
                    nyd = new Date(Date.UTC(nyy, 0)).getUTCDay();
                    week = weekOfYear(date, 1) + (nyd > 1 && nyd <= 4 ? 1 : 0);
                    if (!week) {
                      nyy = date.getUTCFullYear() - 1;
                      nyd = new Date(Date.UTC(nyy, 0)).getUTCDay();
                      week = nyd == 4 || (nyd == 3 && new Date(nyy, 1, 29).getDate() == 29) ? 53 : 52;
                      return [week, date.getUTCFullYear() - 1];
                    } else if (week == 53 && !(nyd == 4 || (nyd == 3 && new Date(nyy, 1, 29).getDate() == 29))) {
                      return [1, date.getUTCFullYear() + 1];
                    } else {
                      return [week, date.getUTCFullYear()];
                    }
                  }
                
                  return function () { return context.convert(arguments) };
                });
                
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('ticking/datetime_tick_formatter',["underscore", "backbone", "common/has_properties", "sprintf", "timezone"], function(_, Backbone, HasProperties, sprintf, tz) {
                    var DatetimeTickFormatter, DatetimeTickFormatters, _array, _four_digit_year, _ms_dot_us, _ref, _ref1, _strftime, _two_digit_year, _us;
                    _us = function(t) {
                      return sprintf("%3dus", Math.floor((t % 1) * 1000));
                    };
                    _ms_dot_us = function(t) {
                      var ms, us;
                      ms = Math.floor(((t / 1000) % 1) * 1000);
                      us = Math.floor((t % 1) * 1000);
                      return sprintf("%3d.%3dms", ms, us);
                    };
                    _two_digit_year = function(t) {
                      var dt, year;
                      dt = new Date(t);
                      year = dt.getFullYear();
                      if (dt.getMonth() >= 7) {
                        year += 1;
                      }
                      return sprintf("'%02d", year % 100);
                    };
                    _four_digit_year = function(t) {
                      var dt, year;
                      dt = new Date(t);
                      year = dt.getFullYear();
                      if (dt.getMonth() >= 7) {
                        year += 1;
                      }
                      return sprintf("%d", year);
                    };
                    _array = function(t) {
                      return tz(t, "%Y %m %d %H %M %S").split(/\s+/).map(function(e) {
                        return parseInt(e, 10);
                      });
                    };
                    _strftime = function(t, format) {
                      if (_.isFunction(format)) {
                        return format(t);
                      } else {
                        return tz(t, format);
                      }
                    };
                    DatetimeTickFormatter = (function(_super) {
                      __extends(DatetimeTickFormatter, _super);
                
                      function DatetimeTickFormatter() {
                        _ref = DatetimeTickFormatter.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      DatetimeTickFormatter.prototype.type = 'DatetimeTickFormatter';
                
                      DatetimeTickFormatter.prototype.format_order = ['microseconds', 'milliseconds', 'seconds', 'minsec', 'minutes', 'hourmin', 'hours', 'days', 'months', 'years'];
                
                      DatetimeTickFormatter.prototype._formats = {
                        'microseconds': [_us, _ms_dot_us],
                        'milliseconds': ['%3Nms', '%S.%3Ns'],
                        'seconds': ['%Ss'],
                        'minsec': [':%M:%S'],
                        'minutes': [':%M', '%Mm'],
                        'hourmin': ['%H:%M'],
                        'hours': ['%Hh', '%H:%M'],
                        'days': ['%m/%d', '%a%d'],
                        'months': ['%m/%Y', '%b%y'],
                        'years': ['%Y', _two_digit_year, _four_digit_year]
                      };
                
                      DatetimeTickFormatter.prototype.strip_leading_zeros = true;
                
                      DatetimeTickFormatter.prototype.initialize = function(attrs, options) {
                        var fmt, fmt_name, fmt_string, fmt_strings, now, sizes, sorted, _results;
                        DatetimeTickFormatter.__super__.initialize.call(this, attrs, options);
                        fmt = _.extend({}, this._formats, this.get("formats"));
                        now = tz(new Date());
                        this.formats = {};
                        _results = [];
                        for (fmt_name in fmt) {
                          fmt_strings = fmt[fmt_name];
                          sizes = (function() {
                            var _i, _len, _results1;
                            _results1 = [];
                            for (_i = 0, _len = fmt_strings.length; _i < _len; _i++) {
                              fmt_string = fmt_strings[_i];
                              _results1.push(_strftime(now, fmt_string).length);
                            }
                            return _results1;
                          })();
                          sorted = _.sortBy(_.zip(sizes, fmt_strings), function(_arg) {
                            var fmt, size;
                            size = _arg[0], fmt = _arg[1];
                            return size;
                          });
                          _results.push(this.formats[fmt_name] = _.zip.apply(_, sorted));
                        }
                        return _results;
                      };
                
                      DatetimeTickFormatter.prototype._get_resolution_str = function(resolution_secs, span_secs) {
                        var adjusted_resolution_secs, str;
                        adjusted_resolution_secs = resolution_secs * 1.1;
                        if (adjusted_resolution_secs < 1e-3) {
                          str = "microseconds";
                        } else if (adjusted_resolution_secs < 1.0) {
                          str = "milliseconds";
                        } else if (adjusted_resolution_secs < 60) {
                          if (span_secs >= 60) {
                            str = "minsec";
                          } else {
                            str = "seconds";
                          }
                        } else if (adjusted_resolution_secs < 3600) {
                          if (span_secs >= 3600) {
                            str = "hourmin";
                          } else {
                            str = "minutes";
                          }
                        } else if (adjusted_resolution_secs < 24 * 3600) {
                          str = "hours";
                        } else if (adjusted_resolution_secs < 31 * 24 * 3600) {
                          str = "days";
                        } else if (adjusted_resolution_secs < 365 * 24 * 3600) {
                          str = "months";
                        } else {
                          str = "years";
                        }
                        return str;
                      };
                
                      DatetimeTickFormatter.prototype.format = function(ticks, num_labels, char_width, fill_ratio, ticker) {
                        var error, fmt, format, formats, good_formats, hybrid_handled, i, labels, next_format, next_ndx, r, resol, resol_ndx, s, span, ss, t, time_tuple_ndx_for_resol, tm, widths, _i, _j, _k, _len, _len1, _ref1, _ref2, _ref3;
                        if (num_labels == null) {
                          num_labels = null;
                        }
                        if (char_width == null) {
                          char_width = null;
                        }
                        if (fill_ratio == null) {
                          fill_ratio = 0.3;
                        }
                        if (ticker == null) {
                          ticker = null;
                        }
                        if (ticks.length === 0) {
                          return [];
                        }
                        span = Math.abs(ticks[ticks.length - 1] - ticks[0]) / 1000.0;
                        if (ticker) {
                          r = ticker.resolution;
                        } else {
                          r = span / (ticks.length - 1);
                        }
                        resol = this._get_resolution_str(r, span);
                        _ref1 = this.formats[resol], widths = _ref1[0], formats = _ref1[1];
                        format = formats[0];
                        if (char_width) {
                          good_formats = [];
                          for (i = _i = 0, _ref2 = widths.length; 0 <= _ref2 ? _i < _ref2 : _i > _ref2; i = 0 <= _ref2 ? ++_i : --_i) {
                            if (widths[i] * ticks.length < fill_ratio * char_width) {
                              good_formats.push(this.formats[i]);
                            }
                          }
                          if (good_formats.length > 0) {
                            format = _.last(good_formats);
                          }
                        }
                        labels = [];
                        resol_ndx = this.format_order.indexOf(resol);
                        time_tuple_ndx_for_resol = {};
                        _ref3 = this.format_order;
                        for (_j = 0, _len = _ref3.length; _j < _len; _j++) {
                          fmt = _ref3[_j];
                          time_tuple_ndx_for_resol[fmt] = 0;
                        }
                        time_tuple_ndx_for_resol["seconds"] = 5;
                        time_tuple_ndx_for_resol["minsec"] = 4;
                        time_tuple_ndx_for_resol["minutes"] = 4;
                        time_tuple_ndx_for_resol["hourmin"] = 3;
                        time_tuple_ndx_for_resol["hours"] = 3;
                        for (_k = 0, _len1 = ticks.length; _k < _len1; _k++) {
                          t = ticks[_k];
                          try {
                            tm = _array(t);
                            s = _strftime(t, format);
                          } catch (_error) {
                            error = _error;
                            console.log(error);
                            console.log("Unable to convert tick for timestamp " + t);
                            labels.push("ERR");
                            continue;
                          }
                          hybrid_handled = false;
                          next_ndx = resol_ndx;
                          while (tm[time_tuple_ndx_for_resol[this.format_order[next_ndx]]] === 0) {
                            next_ndx += 1;
                            if (next_ndx === this.format_order.length) {
                              break;
                            }
                            if ((resol === "minsec" || resol === "hourmin") && !hybrid_handled) {
                              if ((resol === "minsec" && tm[4] === 0 && tm[5] !== 0) || (resol === "hourmin" && tm[3] === 0 && tm[4] !== 0)) {
                                next_format = this.formats[this.format_order[resol_ndx - 1]][1][0];
                                s = _strftime(t, next_format);
                                break;
                              } else {
                                hybrid_handled = true;
                              }
                            }
                            next_format = this.formats[this.format_order[next_ndx]][1][0];
                            s = _strftime(t, next_format);
                          }
                          if (this.strip_leading_zeros) {
                            ss = s.replace(/^0+/g, "");
                            if (ss !== s && (ss === '' || !isFinite(ss[0]))) {
                              ss = '0' + ss;
                            }
                            labels.push(ss);
                          } else {
                            labels.push(s);
                          }
                        }
                        return labels;
                      };
                
                      DatetimeTickFormatter.prototype.defaults = function() {
                        return _.extend(DatetimeTickFormatter.__super__.defaults.call(this), {
                          formats: {}
                        });
                      };
                
                      return DatetimeTickFormatter;
                
                    })(HasProperties);
                    DatetimeTickFormatters = (function(_super) {
                      __extends(DatetimeTickFormatters, _super);
                
                      function DatetimeTickFormatters() {
                        _ref1 = DatetimeTickFormatters.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      DatetimeTickFormatters.prototype.model = DatetimeTickFormatter;
                
                      return DatetimeTickFormatters;
                
                    })(Backbone.Collection);
                    return {
                      "Model": DatetimeTickFormatter,
                      "Collection": new DatetimeTickFormatters()
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=datetime_tick_formatter.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('renderer/guide/datetime_axis',["backbone", "./axis", "ticking/datetime_ticker", "ticking/datetime_tick_formatter"], function(Backbone, Axis, DatetimeTicker, DatetimeTickFormatter) {
                    var DatetimeAxes, DatetimeAxis, DatetimeAxisView, _ref, _ref1, _ref2;
                    DatetimeAxisView = (function(_super) {
                      __extends(DatetimeAxisView, _super);
                
                      function DatetimeAxisView() {
                        _ref = DatetimeAxisView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      return DatetimeAxisView;
                
                    })(Axis.View);
                    DatetimeAxis = (function(_super) {
                      __extends(DatetimeAxis, _super);
                
                      function DatetimeAxis() {
                        _ref1 = DatetimeAxis.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      DatetimeAxis.prototype.default_view = DatetimeAxisView;
                
                      DatetimeAxis.prototype.type = 'DatetimeAxis';
                
                      DatetimeAxis.prototype.initialize = function(attrs, objects) {
                        DatetimeAxis.__super__.initialize.call(this, attrs, objects);
                        if (this.get('ticker') == null) {
                          this.set_obj('ticker', DatetimeTicker.Collection.create());
                        }
                        if (this.get('formatter') == null) {
                          return this.set_obj('formatter', DatetimeTickFormatter.Collection.create());
                        }
                      };
                
                      return DatetimeAxis;
                
                    })(Axis.Model);
                    DatetimeAxes = (function(_super) {
                      __extends(DatetimeAxes, _super);
                
                      function DatetimeAxes() {
                        _ref2 = DatetimeAxes.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      DatetimeAxes.prototype.model = DatetimeAxis;
                
                      return DatetimeAxes;
                
                    })(Backbone.Collection);
                    return {
                      "Model": DatetimeAxis,
                      "Collection": new DatetimeAxes(),
                      "View": DatetimeAxisView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=datetime_axis.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('renderer/guide/grid',["underscore", "common/has_parent", "renderer/properties", "common/plot_widget"], function(_, HasParent, Properties, PlotWidget) {
                    var Grid, GridView, Grids, line_properties, _ref, _ref1, _ref2;
                    line_properties = Properties.line_properties;
                    GridView = (function(_super) {
                      __extends(GridView, _super);
                
                      function GridView() {
                        _ref = GridView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      GridView.prototype.initialize = function(attrs, options) {
                        GridView.__super__.initialize.call(this, attrs, options);
                        return this.grid_props = new line_properties(this, null, 'grid_');
                      };
                
                      GridView.prototype.render = function() {
                        var ctx;
                        ctx = this.plot_view.canvas_view.ctx;
                        ctx.save();
                        this._draw_grids(ctx);
                        return ctx.restore();
                      };
                
                      GridView.prototype.bind_bokeh_events = function() {
                        return this.listenTo(this.model, 'change', this.request_render);
                      };
                
                      GridView.prototype._draw_grids = function(ctx) {
                        var i, sx, sy, xs, ys, _i, _j, _ref1, _ref2, _ref3, _ref4;
                        if (!this.grid_props.do_stroke) {
                          return;
                        }
                        _ref1 = this.mget('grid_coords'), xs = _ref1[0], ys = _ref1[1];
                        this.grid_props.set(ctx, this);
                        for (i = _i = 0, _ref2 = xs.length; 0 <= _ref2 ? _i < _ref2 : _i > _ref2; i = 0 <= _ref2 ? ++_i : --_i) {
                          _ref3 = this.plot_view.map_to_screen(xs[i], "data", ys[i], "data"), sx = _ref3[0], sy = _ref3[1];
                          ctx.beginPath();
                          ctx.moveTo(Math.round(sx[0]), Math.round(sy[0]));
                          for (i = _j = 1, _ref4 = sx.length; 1 <= _ref4 ? _j < _ref4 : _j > _ref4; i = 1 <= _ref4 ? ++_j : --_j) {
                            ctx.lineTo(Math.round(sx[i]), Math.round(sy[i]));
                          }
                          ctx.stroke();
                        }
                      };
                
                      return GridView;
                
                    })(PlotWidget);
                    Grid = (function(_super) {
                      __extends(Grid, _super);
                
                      function Grid() {
                        _ref1 = Grid.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      Grid.prototype.default_view = GridView;
                
                      Grid.prototype.type = 'Grid';
                
                      Grid.prototype.initialize = function(attrs, options) {
                        Grid.__super__.initialize.call(this, attrs, options);
                        this.register_property('computed_bounds', this._bounds, false);
                        this.add_dependencies('computed_bounds', this, ['bounds']);
                        this.register_property('grid_coords', this._grid_coords, false);
                        this.add_dependencies('grid_coords', this, ['computed_bounds', 'dimension', 'ticker']);
                        return this.register_property('ranges', this._ranges, true);
                      };
                
                      Grid.prototype._ranges = function() {
                        var i, j, ranges;
                        i = this.get('dimension');
                        j = (i + 1) % 2;
                        ranges = [this.get('plot').get('frame').get('x_range'), this.get('plot').get('frame').get('y_range')];
                        return [ranges[i], ranges[j]];
                      };
                
                      Grid.prototype._bounds = function() {
                        var cross_range, end, range, range_bounds, start, user_bounds, _ref2, _ref3;
                        _ref2 = this.get('ranges'), range = _ref2[0], cross_range = _ref2[1];
                        user_bounds = (_ref3 = this.get('bounds')) != null ? _ref3 : 'auto';
                        range_bounds = [range.get('min'), range.get('max')];
                        if (_.isArray(user_bounds)) {
                          start = Math.min(user_bounds[0], user_bounds[1]);
                          end = Math.max(user_bounds[0], user_bounds[1]);
                          if (start < range_bounds[0]) {
                            start = range_bounds[0];
                          } else if (start > range_bounds[1]) {
                            start = null;
                          }
                          if (end > range_bounds[1]) {
                            end = range_bounds[1];
                          } else if (end < range_bounds[0]) {
                            end = null;
                          }
                        } else {
                          start = range_bounds[0], end = range_bounds[1];
                        }
                        return [start, end];
                      };
                
                      Grid.prototype._grid_coords = function() {
                        var N, cmax, cmin, coords, cross_range, dim_i, dim_j, end, i, ii, j, loc, max, min, n, range, start, ticks, tmp, _i, _j, _ref2, _ref3, _ref4;
                        i = this.get('dimension');
                        j = (i + 1) % 2;
                        _ref2 = this.get('ranges'), range = _ref2[0], cross_range = _ref2[1];
                        _ref3 = this.get('computed_bounds'), start = _ref3[0], end = _ref3[1];
                        tmp = Math.min(start, end);
                        end = Math.max(start, end);
                        start = tmp;
                        ticks = this.get('ticker').get_ticks(start, end, range, {}).major;
                        min = range.get('min');
                        max = range.get('max');
                        cmin = cross_range.get('min');
                        cmax = cross_range.get('max');
                        coords = [[], []];
                        for (ii = _i = 0, _ref4 = ticks.length; 0 <= _ref4 ? _i < _ref4 : _i > _ref4; ii = 0 <= _ref4 ? ++_i : --_i) {
                          if (ticks[ii] === min || ticks[ii] === max) {
                            continue;
                          }
                          dim_i = [];
                          dim_j = [];
                          N = 2;
                          for (n = _j = 0; 0 <= N ? _j < N : _j > N; n = 0 <= N ? ++_j : --_j) {
                            loc = cmin + (cmax - cmin) / (N - 1) * n;
                            dim_i.push(ticks[ii]);
                            dim_j.push(loc);
                          }
                          coords[i].push(dim_i);
                          coords[j].push(dim_j);
                        }
                        return coords;
                      };
                
                      Grid.prototype.display_defaults = function() {
                        return {
                          level: 'underlay',
                          grid_line_color: '#cccccc',
                          grid_line_width: 1,
                          grid_line_alpha: 1.0,
                          grid_line_join: 'miter',
                          grid_line_cap: 'butt',
                          grid_line_dash: [],
                          grid_line_dash_offset: 0
                        };
                      };
                
                      return Grid;
                
                    })(HasParent);
                    Grids = (function(_super) {
                      __extends(Grids, _super);
                
                      function Grids() {
                        _ref2 = Grids.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      Grids.prototype.model = Grid;
                
                      return Grids;
                
                    })(Backbone.Collection);
                    return {
                      "Model": Grid,
                      "Collection": new Grids(),
                      "View": GridView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=grid.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('ticking/basic_tick_formatter',["underscore", "backbone", "common/has_properties"], function(_, Backbone, HasProperties) {
                    var BasicTickFormatter, BasicTickFormatters, _ref, _ref1;
                    BasicTickFormatter = (function(_super) {
                      __extends(BasicTickFormatter, _super);
                
                      function BasicTickFormatter() {
                        _ref = BasicTickFormatter.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      BasicTickFormatter.prototype.type = 'BasicTickFormatter';
                
                      BasicTickFormatter.prototype.initialize = function(attrs, options) {
                        BasicTickFormatter.__super__.initialize.call(this, attrs, options);
                        this.register_property('scientific_limit_low', function() {
                          return Math.pow(10.0, this.get('power_limit_low'));
                        }, true);
                        this.add_dependencies('scientific_limit_low', this, ['power_limit_low']);
                        this.register_property('scientific_limit_high', function() {
                          return Math.pow(10.0, this.get('power_limit_high'));
                        }, true);
                        this.add_dependencies('scientific_limit_high', this, ['power_limit_high']);
                        return this.last_precision = 3;
                      };
                
                      BasicTickFormatter.prototype.format = function(ticks) {
                        var i, is_ok, labels, need_sci, precision, tick, tick_abs, x, zero_eps, _i, _j, _k, _l, _len, _m, _n, _ref1, _ref2, _ref3, _ref4, _ref5;
                        if (ticks.length === 0) {
                          return [];
                        }
                        zero_eps = 0;
                        if (ticks.length >= 2) {
                          zero_eps = Math.abs(ticks[1] - ticks[0]) / 10000;
                        }
                        need_sci = false;
                        if (this.get('use_scientific')) {
                          for (_i = 0, _len = ticks.length; _i < _len; _i++) {
                            tick = ticks[_i];
                            tick_abs = Math.abs(tick);
                            if (tick_abs > zero_eps && (tick_abs >= this.get('scientific_limit_high') || tick_abs <= this.get('scientific_limit_low'))) {
                              need_sci = true;
                              break;
                            }
                          }
                        }
                        precision = this.get('precision');
                        if ((precision == null) || _.isNumber(precision)) {
                          labels = new Array(ticks.length);
                          if (need_sci) {
                            for (i = _j = 0, _ref1 = ticks.length; 0 <= _ref1 ? _j < _ref1 : _j > _ref1; i = 0 <= _ref1 ? ++_j : --_j) {
                              labels[i] = ticks[i].toExponential(precision || void 0);
                            }
                          } else {
                            for (i = _k = 0, _ref2 = ticks.length; 0 <= _ref2 ? _k < _ref2 : _k > _ref2; i = 0 <= _ref2 ? ++_k : --_k) {
                              labels[i] = ticks[i].toFixed(precision || void 0).replace(/(\.[0-9]*?)0+$/, "$1").replace(/\.$/, "");
                            }
                          }
                          return labels;
                        } else if (precision === 'auto') {
                          labels = new Array(ticks.length);
                          for (x = _l = _ref3 = this.last_precision; _ref3 <= 15 ? _l <= 15 : _l >= 15; x = _ref3 <= 15 ? ++_l : --_l) {
                            is_ok = true;
                            if (need_sci) {
                              for (i = _m = 0, _ref4 = ticks.length; 0 <= _ref4 ? _m < _ref4 : _m > _ref4; i = 0 <= _ref4 ? ++_m : --_m) {
                                labels[i] = ticks[i].toExponential(x);
                                if (i > 0) {
                                  if (labels[i] === labels[i - 1]) {
                                    is_ok = false;
                                    break;
                                  }
                                }
                              }
                              if (is_ok) {
                                break;
                              }
                            } else {
                              for (i = _n = 0, _ref5 = ticks.length; 0 <= _ref5 ? _n < _ref5 : _n > _ref5; i = 0 <= _ref5 ? ++_n : --_n) {
                                labels[i] = ticks[i].toFixed(x).replace(/(\.[0-9]*?)0+$/, "$1").replace(/\.$/, "");
                                if (i > 0) {
                                  if (labels[i] === labels[i - 1]) {
                                    is_ok = false;
                                    break;
                                  }
                                }
                              }
                              if (is_ok) {
                                break;
                              }
                            }
                            if (is_ok) {
                              this.last_precision = x;
                              return labels;
                            }
                          }
                        }
                        return labels;
                      };
                
                      BasicTickFormatter.prototype.defaults = function() {
                        return {
                          precision: 'auto',
                          use_scientific: true,
                          power_limit_high: 5,
                          power_limit_low: -3
                        };
                      };
                
                      return BasicTickFormatter;
                
                    })(HasProperties);
                    BasicTickFormatters = (function(_super) {
                      __extends(BasicTickFormatters, _super);
                
                      function BasicTickFormatters() {
                        _ref1 = BasicTickFormatters.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      BasicTickFormatters.prototype.model = BasicTickFormatter;
                
                      return BasicTickFormatters;
                
                    })(Backbone.Collection);
                    return {
                      "Model": BasicTickFormatter,
                      "Collection": new BasicTickFormatters()
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=basic_tick_formatter.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('renderer/guide/linear_axis',["underscore", "backbone", "./axis", "ticking/basic_ticker", "ticking/basic_tick_formatter"], function(_, Backbone, Axis, BasicTicker, BasicTickFormatter) {
                    var LinearAxes, LinearAxis, LinearAxisView, _ref, _ref1, _ref2;
                    LinearAxisView = (function(_super) {
                      __extends(LinearAxisView, _super);
                
                      function LinearAxisView() {
                        _ref = LinearAxisView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      return LinearAxisView;
                
                    })(Axis.View);
                    LinearAxis = (function(_super) {
                      __extends(LinearAxis, _super);
                
                      function LinearAxis() {
                        _ref1 = LinearAxis.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      LinearAxis.prototype.default_view = LinearAxisView;
                
                      LinearAxis.prototype.type = 'LinearAxis';
                
                      LinearAxis.prototype.initialize = function(attrs, objects) {
                        LinearAxis.__super__.initialize.call(this, attrs, objects);
                        if (this.get('ticker') == null) {
                          this.set_obj('ticker', BasicTicker.Collection.create());
                        }
                        if (this.get('formatter') == null) {
                          return this.set_obj('formatter', BasicTickFormatter.Collection.create());
                        }
                      };
                
                      return LinearAxis;
                
                    })(Axis.Model);
                    LinearAxes = (function(_super) {
                      __extends(LinearAxes, _super);
                
                      function LinearAxes() {
                        _ref2 = LinearAxes.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      LinearAxes.prototype.model = LinearAxis;
                
                      return LinearAxes;
                
                    })(Backbone.Collection);
                    return {
                      "Model": LinearAxis,
                      "Collection": new LinearAxes(),
                      "View": LinearAxisView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=linear_axis.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('ticking/log_ticker',["ticking/adaptive_ticker"], function(AdaptiveTicker) {
                    var LogTicker, LogTickers, range, _ref, _ref1;
                    range = function(start, stop, step) {
                      var i, result;
                      if (typeof stop === "undefined") {
                        stop = start;
                        start = 0;
                      }
                      if (typeof step === "undefined") {
                        step = 1;
                      }
                      if ((step > 0 && start >= stop) || (step < 0 && start <= stop)) {
                        return [];
                      }
                      result = [];
                      i = start;
                      while ((step > 0 ? i < stop : i > stop)) {
                        result.push(i);
                        i += step;
                      }
                      return result;
                    };
                    LogTicker = (function(_super) {
                      __extends(LogTicker, _super);
                
                      function LogTicker() {
                        _ref = LogTicker.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      LogTicker.prototype.type = 'LogTicker';
                
                      LogTicker.prototype.initialize = function(attrs, options) {
                        return LogTicker.__super__.initialize.call(this, attrs, options);
                      };
                
                      LogTicker.prototype.get_ticks_no_defaults = function(data_low, data_high, desired_n_ticks) {
                        var end_factor, endlog, factor, factors, i, interval, log_high, log_interval, log_low, minor_interval, minor_offsets, minor_ticks, num_minor_ticks, start_factor, startlog, tick, ticks, x, _i, _j, _k, _l, _len, _len1, _len2, _len3, _len4, _len5, _m, _n, _ref1;
                        num_minor_ticks = this.get('num_minor_ticks');
                        minor_ticks = [];
                        if (data_low <= 0) {
                          data_low = 1;
                        }
                        if (data_low > data_high) {
                          _ref1 = [data_high, data_low], data_low = _ref1[0], data_high = _ref1[1];
                        }
                        log_low = Math.log(data_low) / Math.log(10);
                        log_high = Math.log(data_high) / Math.log(10);
                        log_interval = log_high - log_low;
                        if (log_interval < 2) {
                          interval = this.get_interval(data_low, data_high, desired_n_ticks);
                          start_factor = Math.floor(data_low / interval);
                          end_factor = Math.ceil(data_high / interval);
                          if (_.isNaN(start_factor) || _.isNaN(end_factor)) {
                            factors = [];
                          } else {
                            factors = _.range(start_factor, end_factor + 1);
                          }
                          ticks = (function() {
                            var _i, _len, _results;
                            _results = [];
                            for (_i = 0, _len = factors.length; _i < _len; _i++) {
                              factor = factors[_i];
                              if (factor !== 0) {
                                _results.push(factor * interval);
                              }
                            }
                            return _results;
                          })();
                          if (num_minor_ticks > 1) {
                            minor_interval = interval / num_minor_ticks;
                            minor_offsets = (function() {
                              var _i, _results;
                              _results = [];
                              for (i = _i = 1; 1 <= num_minor_ticks ? _i <= num_minor_ticks : _i >= num_minor_ticks; i = 1 <= num_minor_ticks ? ++_i : --_i) {
                                _results.push(i * minor_interval);
                              }
                              return _results;
                            })();
                            for (_i = 0, _len = minor_offsets.length; _i < _len; _i++) {
                              x = minor_offsets[_i];
                              minor_ticks.push(ticks[0] - x);
                            }
                            for (_j = 0, _len1 = ticks.length; _j < _len1; _j++) {
                              tick = ticks[_j];
                              for (_k = 0, _len2 = minor_offsets.length; _k < _len2; _k++) {
                                x = minor_offsets[_k];
                                minor_ticks.push(tick + x);
                              }
                            }
                          }
                        } else {
                          startlog = Math.ceil(log_low);
                          endlog = Math.floor(log_high);
                          interval = Math.ceil((endlog - startlog) / 9.0);
                          ticks = range(startlog, endlog, interval);
                          if ((endlog - startlog) % interval === 0) {
                            ticks = ticks.concat([endlog]);
                          }
                          ticks = ticks.map(function(i) {
                            return Math.pow(10, i);
                          });
                          if (num_minor_ticks > 1) {
                            minor_interval = Math.pow(10, interval) / num_minor_ticks;
                            minor_offsets = (function() {
                              var _l, _results;
                              _results = [];
                              for (i = _l = 1; 1 <= num_minor_ticks ? _l <= num_minor_ticks : _l >= num_minor_ticks; i = 1 <= num_minor_ticks ? ++_l : --_l) {
                                _results.push(i * minor_interval);
                              }
                              return _results;
                            })();
                            for (_l = 0, _len3 = minor_offsets.length; _l < _len3; _l++) {
                              x = minor_offsets[_l];
                              minor_ticks.push(ticks[0] / x);
                            }
                            for (_m = 0, _len4 = ticks.length; _m < _len4; _m++) {
                              tick = ticks[_m];
                              for (_n = 0, _len5 = minor_offsets.length; _n < _len5; _n++) {
                                x = minor_offsets[_n];
                                minor_ticks.push(tick * x);
                              }
                            }
                          }
                        }
                        return {
                          "major": ticks,
                          "minor": minor_ticks
                        };
                      };
                
                      LogTicker.prototype.defaults = function() {
                        return _.extend(LogTicker.__super__.defaults.call(this), {
                          mantissas: [1, 5]
                        });
                      };
                
                      return LogTicker;
                
                    })(AdaptiveTicker.Model);
                    LogTickers = (function(_super) {
                      __extends(LogTickers, _super);
                
                      function LogTickers() {
                        _ref1 = LogTickers.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      LogTickers.prototype.model = LogTicker;
                
                      return LogTickers;
                
                    })(Backbone.Collection);
                    return {
                      "Model": LogTicker,
                      "Collection": new LogTickers()
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=log_ticker.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('ticking/log_tick_formatter',["underscore", "backbone", "common/has_properties", "ticking/basic_tick_formatter"], function(_, Backbone, HasProperties, BasicTickFormatter) {
                    var LogTickFormatter, LogTickFormatters, _ref, _ref1;
                    LogTickFormatter = (function(_super) {
                      __extends(LogTickFormatter, _super);
                
                      function LogTickFormatter() {
                        _ref = LogTickFormatter.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      LogTickFormatter.prototype.type = 'LogTickFormatter';
                
                      LogTickFormatter.prototype.initialize = function(attrs, options) {
                        LogTickFormatter.__super__.initialize.call(this, attrs, options);
                        return this.basic_formatter = new BasicTickFormatter.Model();
                      };
                
                      LogTickFormatter.prototype.format = function(ticks) {
                        var i, labels, small_interval, _i, _ref1;
                        if (ticks.length === 0) {
                          return [];
                        }
                        small_interval = false;
                        labels = new Array(ticks.length);
                        for (i = _i = 0, _ref1 = ticks.length; 0 <= _ref1 ? _i < _ref1 : _i > _ref1; i = 0 <= _ref1 ? ++_i : --_i) {
                          labels[i] = "10^" + (Math.round(Math.log(ticks[i]) / Math.log(10)));
                          if ((i > 0) && (labels[i] === labels[i - 1])) {
                            small_interval = true;
                            break;
                          }
                        }
                        if (small_interval) {
                          labels = this.basic_formatter.format(ticks);
                        }
                        return labels;
                      };
                
                      return LogTickFormatter;
                
                    })(HasProperties);
                    LogTickFormatters = (function(_super) {
                      __extends(LogTickFormatters, _super);
                
                      function LogTickFormatters() {
                        _ref1 = LogTickFormatters.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      LogTickFormatters.prototype.model = LogTickFormatter;
                
                      return LogTickFormatters;
                
                    })(Backbone.Collection);
                    return {
                      "Model": LogTickFormatter,
                      "Collection": new LogTickFormatters()
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=log_tick_formatter.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('renderer/guide/log_axis',["underscore", "backbone", "./axis", "ticking/log_ticker", "ticking/log_tick_formatter"], function(_, Backbone, Axis, LogTicker, LogTickFormatter) {
                    var LogAxes, LogAxis, LogAxisView, _ref, _ref1, _ref2;
                    LogAxisView = (function(_super) {
                      __extends(LogAxisView, _super);
                
                      function LogAxisView() {
                        _ref = LogAxisView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      return LogAxisView;
                
                    })(Axis.View);
                    LogAxis = (function(_super) {
                      __extends(LogAxis, _super);
                
                      function LogAxis() {
                        _ref1 = LogAxis.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      LogAxis.prototype.default_view = LogAxisView;
                
                      LogAxis.prototype.type = 'LogAxis';
                
                      LogAxis.prototype.initialize = function(attrs, objects) {
                        LogAxis.__super__.initialize.call(this, attrs, objects);
                        if (this.get('ticker') == null) {
                          this.set_obj('ticker', LogTicker.Collection.create());
                        }
                        if (this.get('formatter') == null) {
                          return this.set_obj('formatter', LogTickFormatter.Collection.create());
                        }
                      };
                
                      return LogAxis;
                
                    })(Axis.Model);
                    LogAxes = (function(_super) {
                      __extends(LogAxes, _super);
                
                      function LogAxes() {
                        _ref2 = LogAxes.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      LogAxes.prototype.model = LogAxis;
                
                      return LogAxes;
                
                    })(Backbone.Collection);
                    return {
                      "Model": LogAxis,
                      "Collection": new LogAxes(),
                      "View": LogAxisView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=log_axis.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('renderer/overlay/box_selection',["underscore", "common/has_parent", "common/plot_widget"], function(_, HasParent, PlotWidget) {
                    var BoxSelection, BoxSelectionView, BoxSelections, _ref, _ref1, _ref2;
                    BoxSelectionView = (function(_super) {
                      __extends(BoxSelectionView, _super);
                
                      function BoxSelectionView() {
                        _ref = BoxSelectionView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      BoxSelectionView.prototype.initialize = function(options) {
                        this.selecting = false;
                        this.xrange = [null, null];
                        this.yrange = [null, null];
                        BoxSelectionView.__super__.initialize.call(this, options);
                        return this.plot_view.$el.find('.bokeh_canvas_wrapper').append(this.$el);
                      };
                
                      BoxSelectionView.prototype.boxselect = function(xrange, yrange) {
                        this.xrange = xrange;
                        this.yrange = yrange;
                        return this.request_render();
                      };
                
                      BoxSelectionView.prototype.startselect = function() {
                        this.selecting = true;
                        this.xrange = [null, null];
                        this.yrange = [null, null];
                        return this.request_render();
                      };
                
                      BoxSelectionView.prototype.stopselect = function() {
                        this.selecting = false;
                        this.xrange = [null, null];
                        this.yrange = [null, null];
                        return this.request_render();
                      };
                
                      BoxSelectionView.prototype.bind_bokeh_events = function(options) {
                        this.toolview = this.plot_view.tools[this.mget('tool').id];
                        this.listenTo(this.toolview, 'boxselect', this.boxselect);
                        this.listenTo(this.toolview, 'startselect', this.startselect);
                        return this.listenTo(this.toolview, 'stopselect', this.stopselect);
                      };
                
                      BoxSelectionView.prototype.render = function() {
                        var height, style_string, width, xpos, xrange, ypos, yrange;
                        if (!this.selecting) {
                          this.$el.removeClass('shading');
                          return;
                        }
                        xrange = this.xrange;
                        yrange = this.yrange;
                        if (_.any(_.map(xrange, _.isNullOrUndefined)) || _.any(_.map(yrange, _.isNullOrUndefined))) {
                          this.$el.removeClass('shading');
                          return;
                        }
                        style_string = "";
                        if (xrange) {
                          xpos = this.plot_view.canvas.vx_to_sx(Math.min(xrange[0], xrange[1]));
                          width = Math.abs(xrange[1] - xrange[0]);
                        } else {
                          xpos = 0;
                          width = this.plot_view.frame.get('width');
                        }
                        style_string += "; left:" + xpos + "px; width:" + width + "px; ";
                        if (yrange) {
                          ypos = this.plot_view.canvas.vy_to_sy(Math.max(yrange[0], yrange[1]));
                          height = Math.abs(yrange[1] - yrange[0]);
                        } else {
                          ypos = 0;
                          height = this.plot_view.frame.get('height');
                        }
                        this.$el.addClass('shading');
                        style_string += "top:" + ypos + "px; height:" + height + "px";
                        return this.$el.attr('style', style_string);
                      };
                
                      return BoxSelectionView;
                
                    })(PlotWidget);
                    BoxSelection = (function(_super) {
                      __extends(BoxSelection, _super);
                
                      function BoxSelection() {
                        _ref1 = BoxSelection.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      BoxSelection.prototype.default_view = BoxSelectionView;
                
                      BoxSelection.prototype.type = "BoxSelection";
                
                      BoxSelection.prototype.defaults = function() {
                        return {
                          tool: null,
                          level: 'overlay'
                        };
                      };
                
                      return BoxSelection;
                
                    })(HasParent);
                    BoxSelections = (function(_super) {
                      __extends(BoxSelections, _super);
                
                      function BoxSelections() {
                        _ref2 = BoxSelections.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      BoxSelections.prototype.model = BoxSelection;
                
                      return BoxSelections;
                
                    })(Backbone.Collection);
                    return {
                      "Model": BoxSelection,
                      "Collection": new BoxSelections(),
                      "View": BoxSelectionView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=box_selection.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('source/column_data_source',["underscore", "backbone", "common/has_properties"], function(_, Backbone, HasProperties) {
                    var ColumnDataSource, ColumnDataSources, _ref, _ref1;
                    ColumnDataSource = (function(_super) {
                      __extends(ColumnDataSource, _super);
                
                      function ColumnDataSource() {
                        _ref = ColumnDataSource.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      ColumnDataSource.prototype.type = 'ColumnDataSource';
                
                      ColumnDataSource.prototype.initialize = function(attrs, options) {
                        ColumnDataSource.__super__.initialize.call(this, attrs, options);
                        this.cont_ranges = {};
                        return this.discrete_ranges = {};
                      };
                
                      ColumnDataSource.prototype.getcolumn = function(colname) {
                        var _ref1;
                        return (_ref1 = this.get('data')[colname]) != null ? _ref1 : null;
                      };
                
                      ColumnDataSource.prototype.getcolumn_with_default = function(colname, default_value) {
                        " returns the column, with any undefineds replaced with default";
                        var _ref1;
                        return (_ref1 = this.get('data')[colname]) != null ? _ref1 : null;
                      };
                
                      ColumnDataSource.prototype.get_length = function() {
                        var data;
                        data = this.get('data');
                        return data[_.keys(data)[0]].length;
                      };
                
                      ColumnDataSource.prototype.columns = function() {
                        return _.keys(this.get('data'));
                      };
                
                      ColumnDataSource.prototype.datapoints = function() {
                        var data, field, fields, i, point, points, _i, _j, _len, _ref1;
                        data = this.get('data');
                        fields = _.keys(data);
                        points = [];
                        for (i = _i = 0, _ref1 = data[fields[0]].length; 0 <= _ref1 ? _i < _ref1 : _i > _ref1; i = 0 <= _ref1 ? ++_i : --_i) {
                          point = {};
                          for (_j = 0, _len = fields.length; _j < _len; _j++) {
                            field = fields[_j];
                            point[field] = data[field][i];
                          }
                          points.push(point);
                        }
                        return points;
                      };
                
                      ColumnDataSource.prototype.defaults = function() {
                        return ColumnDataSource.__super__.defaults.call(this);
                      };
                
                      return ColumnDataSource;
                
                    })(HasProperties);
                    ColumnDataSources = (function(_super) {
                      __extends(ColumnDataSources, _super);
                
                      function ColumnDataSources() {
                        _ref1 = ColumnDataSources.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      ColumnDataSources.prototype.model = ColumnDataSource;
                
                      return ColumnDataSources;
                
                    })(Backbone.Collection);
                    return {
                      "Model": ColumnDataSource,
                      "Collection": new ColumnDataSources()
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=column_data_source.js.map
                */;
                (function() {
                  var __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
                    __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('source/server_data_source',["underscore", "backbone", "common/has_properties", "range/range1d"], function(_, Backbone, HasProperties, Range1d) {
                    var ServerDataSource, ServerDataSources, ajax_throttle, _ref, _ref1;
                    ajax_throttle = function(func) {
                      var busy, callback, has_callback, resp;
                      busy = false;
                      resp = null;
                      has_callback = false;
                      callback = function() {
                        if (busy) {
                          if (has_callback) {
                            return console.log('already bound, ignoreing');
                          } else {
                            console.log('busy, so doing it later');
                            has_callback = true;
                            return resp.done(function() {
                              has_callback = false;
                              return callback();
                            });
                          }
                        } else {
                          console.log('executing');
                          busy = true;
                          resp = func();
                          return resp.done(function() {
                            console.log('done, setting to false');
                            busy = false;
                            return resp = null;
                          });
                        }
                      };
                      return callback;
                    };
                    ServerDataSource = (function(_super) {
                      __extends(ServerDataSource, _super);
                
                      function ServerDataSource() {
                        this.heatmap_update = __bind(this.heatmap_update, this);
                        this.line1d_update = __bind(this.line1d_update, this);
                        this.initialize = __bind(this.initialize, this);
                        _ref = ServerDataSource.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      ServerDataSource.prototype.type = 'ServerDataSource';
                
                      ServerDataSource.prototype.initialize = function(attrs, options) {
                        ServerDataSource.__super__.initialize.call(this, attrs, options);
                        return this.callbacks = {};
                      };
                
                      ServerDataSource.prototype.stoplistening_for_updates = function(column_data_source) {
                        var entry, _i, _len, _ref1, _results;
                        if (this.callbacks[column_data_source.get('id')]) {
                          _ref1 = this.callbacks[column_data_source.get('id')];
                          _results = [];
                          for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
                            entry = _ref1[_i];
                            _results.push(this.stopListening.apply(this, entry));
                          }
                          return _results;
                        }
                      };
                
                      ServerDataSource.prototype.update_url = function() {
                        var owner_username, prefix, url;
                        owner_username = this.get('owner_username');
                        prefix = this.get_base().Config.prefix;
                        return url = "" + prefix + "bokeh/data/" + owner_username + "/" + (this.get('doc')) + "/" + (this.get('id'));
                      };
                
                      ServerDataSource.prototype.listen_for_line1d_updates = function(column_data_source, plot_x_span, plot_y_span, domain_span, range_span, screen_span, primary_column, domain_name, columns, input_params) {
                        var callback, plot_state, throttle,
                          _this = this;
                        plot_state = {
                          screen_x: plot_x_span,
                          screen_y: plot_y_span
                        };
                        this.stoplistening_for_updates(column_data_source);
                        this.line1d_update(column_data_source, plot_state, domain_span, range_span, screen_span, primary_column, domain_name, columns, input_params);
                        throttle = _.throttle(this.line1d_update, 300);
                        callback = function() {
                          return throttle(column_data_source, plot_state, domain_span, range_span, screen_span, primary_column, domain_name, columns, input_params);
                        };
                        this.listenTo(screen_span, 'change', callback);
                        this.listenTo(domain_span, 'change', callback);
                        return this.callbacks[column_data_source.get('id')] = [[screen_span, 'change', callback], [domain_span, 'change', callback]];
                      };
                
                      ServerDataSource.prototype.line1d_update = function(column_data_source, plot_state, domain_span, range_span, screen_span, primary_column, domain_name, columns, input_params) {
                        var domain_limit, domain_resolution, params, range_limit;
                        domain_resolution = (screen_span.get('end') - screen_span.get('start')) / 2;
                        domain_resolution = Math.floor(domain_resolution);
                        domain_limit = [domain_span.get('start'), domain_span.get('end')];
                        range_limit = [range_span.get('start'), range_span.get('end')];
                        if (plot_state['screen_x'].get('start') === plot_state['screen_x'].get('end') || plot_state['screen_y'].get('start') === plot_state['screen_y'].get('end') || domain_limit[0] > domain_limit[1] || range_limit[0] > range_limit[1]) {
                          return $.ajax();
                        }
                        if (_.any(_.map(domain_limit, function(x) {
                          return _.isNaN(x);
                        })) || _.every(_.map(domain_limit, function(x) {
                          return _.isEqual(0, x);
                        }))) {
                          domain_limit = 'auto';
                        }
                        if (_.any(_.map(range_limit, function(x) {
                          return _.isNaN(x);
                        })) || _.every(_.map(range_limit, function(x) {
                          return _.isEqual(0, x);
                        }))) {
                          range_limit = 'auto';
                        }
                        params = [primary_column, domain_name, columns, domain_limit, range_limit, domain_resolution, input_params];
                        return $.ajax({
                          dataType: 'json',
                          url: this.update_url(),
                          xhrField: {
                            withCredentials: true
                          },
                          success: function(data) {
                            if (domain_limit === 'auto') {
                              domain_span.set({
                                start: data.domain_limit[0],
                                end: data.domain_limit[1]
                              });
                            }
                            if (range_limit === 'auto') {
                              range_span.set({
                                start: data.range_limit[0],
                                end: data.range_limit[1]
                              });
                            }
                            return column_data_source.set('data', data.data);
                          },
                          data: {
                            resample_parameters: JSON.stringify(params),
                            plot_state: JSON.stringify(plot_state)
                          }
                        });
                      };
                
                      ServerDataSource.prototype.listen_for_ar_updates = function(plot_view, column_data_source, plot_x_range, plot_y_range, x_data_range, y_data_range, input_params) {
                        var callback, param, plot_state, _i, _len, _ref1,
                          _this = this;
                        plot_state = {
                          data_x: x_data_range,
                          data_y: y_data_range,
                          screen_x: plot_x_range,
                          screen_y: plot_y_range
                        };
                        this.stoplistening_for_updates(column_data_source);
                        callback = ajax_throttle(function() {
                          return _this.ar_update(plot_view, column_data_source, plot_state, input_params);
                        });
                        callback();
                        this.callbacks[column_data_source.get('id')] = [];
                        _ref1 = [x_data_range, y_data_range, plot_x_range, plot_y_range];
                        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
                          param = _ref1[_i];
                          this.listenTo(param, 'change', callback);
                          this.callbacks[column_data_source.get('id')].push([param, 'change', callback]);
                        }
                        this.listenTo(this, 'change:index_slice', callback);
                        this.callbacks[column_data_source.get('id')].push([this, 'change:index_slice', callback]);
                        this.listenTo(this, 'change:data_slice', callback);
                        this.callbacks[column_data_source.get('id')].push([this, 'change:data_slice', callback]);
                        return null;
                      };
                
                      ServerDataSource.prototype.ar_update = function(plot_view, column_data_source, plot_state, input_params) {
                        var domain_limit, k, proxy, range, resp, sendable_plot_state;
                        domain_limit = 'not auto';
                        if (plot_state['screen_x'].get('start') === plot_state['screen_x'].get('end') || plot_state['screen_y'].get('start') === plot_state['screen_y'].get('end')) {
                          console.log("Skipping due to under-defined view state");
                          return $.ajax();
                        }
                        if (plot_view.x_range.get('start') === plot_view.x_range.get('end') || _.isNaN(plot_view.x_range.get('start')) || _.isNaN(plot_view.x_range.get('end')) || plot_view.y_range.get('start') === plot_view.y_range.get('end') || _.isNaN(plot_view.y_range.get('start')) || _.isNaN(plot_view.y_range.get('end'))) {
                          domain_limit = 'auto';
                        }
                        sendable_plot_state = {};
                        for (k in plot_state) {
                          range = plot_state[k];
                          proxy = new Range1d.Model();
                          proxy.set('start', range.get('start'));
                          proxy.set('end', range.get('end'));
                          sendable_plot_state[k] = proxy;
                        }
                        resp = $.ajax({
                          dataType: 'json',
                          url: this.update_url(),
                          xhrField: {
                            withCredentials: true
                          },
                          success: function(data) {
                            var new_data;
                            if (domain_limit === 'auto') {
                              plot_state['data_x'].set({
                                start: data.x_range.start,
                                end: data.x_range.end
                              });
                              plot_state['data_y'].set({
                                start: data.y_range.start,
                                end: data.y_range.end
                              });
                            }
                            new_data = _.clone(column_data_source.get('data'));
                            _.extend(new_data, data);
                            column_data_source.set('data', new_data);
                            return plot_view.request_render();
                          },
                          data: {
                            resample_parameters: JSON.stringify([input_params]),
                            plot_state: JSON.stringify(sendable_plot_state)
                          }
                        });
                        return resp;
                      };
                
                      ServerDataSource.prototype.listen_for_heatmap_updates = function(column_data_source, plot_x_range, plot_y_range, x_data_range, y_data_range, input_params) {
                        var callback, param, plot_state, _i, _len, _ref1,
                          _this = this;
                        plot_state = {
                          data_x: x_data_range,
                          data_y: y_data_range,
                          screen_x: plot_x_range,
                          screen_y: plot_y_range
                        };
                        this.stoplistening_for_updates(column_data_source);
                        callback = ajax_throttle(function() {
                          return _this.heatmap_update(column_data_source, plot_state, input_params);
                        });
                        callback();
                        this.callbacks[column_data_source.get('id')] = [];
                        _ref1 = [x_data_range, y_data_range, plot_x_range, plot_y_range];
                        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
                          param = _ref1[_i];
                          this.listenTo(param, 'change', callback);
                          this.callbacks[column_data_source.get('id')].push([param, 'change', callback]);
                        }
                        this.listenTo(this, 'change:index_slice', callback);
                        this.callbacks[column_data_source.get('id')].push([this, 'change:index_slice', callback]);
                        this.listenTo(this, 'change:data_slice', callback);
                        this.callbacks[column_data_source.get('id')].push([this, 'change:data_slice', callback]);
                        return null;
                      };
                
                      ServerDataSource.prototype.heatmap_update = function(column_data_source, plot_state, input_params) {
                        var data_slice, global_offset_x, global_offset_y, global_x_range, global_y_range, index_slice, params;
                        global_x_range = this.get('data').global_x_range;
                        global_y_range = this.get('data').global_y_range;
                        global_offset_x = this.get('data').global_offset_x[0];
                        global_offset_y = this.get('data').global_offset_y[0];
                        index_slice = this.get('index_slice');
                        data_slice = this.get('data_slice');
                        if (plot_state['screen_x'].get('start') === plot_state['screen_x'].get('end') || plot_state['screen_y'].get('start') === plot_state['screen_y'].get('end')) {
                          console.log("Skipping due to under-defined view state");
                          return $.ajax();
                        }
                        params = [global_x_range, global_y_range, global_offset_x, global_offset_y, index_slice, data_slice, this.get('transpose'), input_params];
                        return $.ajax({
                          dataType: 'json',
                          url: this.update_url(),
                          xhrField: {
                            withCredentials: true
                          },
                          success: function(data) {
                            var new_data;
                            new_data = _.clone(column_data_source.get('data'));
                            _.extend(new_data, data);
                            return column_data_source.set('data', new_data);
                          },
                          data: {
                            resample_parameters: JSON.stringify(params),
                            plot_state: JSON.stringify(plot_state)
                          }
                        });
                      };
                
                      return ServerDataSource;
                
                    })(HasProperties);
                    ServerDataSources = (function(_super) {
                      __extends(ServerDataSources, _super);
                
                      function ServerDataSources() {
                        _ref1 = ServerDataSources.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      ServerDataSources.prototype.model = ServerDataSource;
                
                      return ServerDataSources;
                
                    })(Backbone.Collection);
                    return {
                      "Model": ServerDataSource,
                      "Collection": new ServerDataSources()
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=server_data_source.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('tool/tool',["underscore", "common/plot_widget", "common/has_parent"], function(_, PlotWidget, HasParent) {
                    var Tool, ToolView, _ref, _ref1;
                    ToolView = (function(_super) {
                      __extends(ToolView, _super);
                
                      function ToolView() {
                        _ref = ToolView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      ToolView.prototype.initialize = function(options) {
                        return ToolView.__super__.initialize.call(this, options);
                      };
                
                      ToolView.prototype.bind_bokeh_events = function() {
                        var eventSink, evgen, evgen_options, evgen_options2,
                          _this = this;
                        eventSink = this.plot_view.eventSink;
                        evgen_options = {
                          eventBasename: this.cid,
                          buttonIcon: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNui8sowAAADfSURBVEiJ1ZXhDYIwEEbfZxzADWQDR5ANXMFRHMERdBLZQDdQN9AJPv+gIajQClZ8SUNy6d0j5a7INikZJbUNVijpaQFLYAesa/FGxh1etgBOwCUqy3brKvflto9up7lWiND2KkAUJAxtmgK4Rh3dGxQyh5KwPQE2wKRle96LsI7tDJgCV0mHSry5WGjTvMi7f9cipl6Xwc/K5zwmqQ9hFMO82oYifIyH7TyFcPZJ0l8d6U+F+VeFMU3Si7DCOalQUgZskwlt74EFEddcl9/TsiJaS7qU8e7CPvnbOQzmBk+aLHum0l/aAAAAAElFTkSuQmCC"
                        };
                        evgen_options2 = _.extend(evgen_options, this.evgen_options);
                        evgen = new this.eventGeneratorClass(evgen_options2);
                        evgen.bind_bokeh_events(this.plot_view, eventSink);
                        _.each(this.tool_events, function(handler_f, event_name) {
                          var full_event_name, wrap;
                          full_event_name = "" + _this.cid + ":" + event_name;
                          wrap = function(e) {
                            return _this[handler_f](e);
                          };
                          return eventSink.on(full_event_name, wrap);
                        });
                        this.evgen = evgen;
                        return {
                          render: function() {}
                        };
                      };
                
                      return ToolView;
                
                    })(PlotWidget);
                    Tool = (function(_super) {
                      __extends(Tool, _super);
                
                      function Tool() {
                        _ref1 = Tool.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      Tool.prototype.display_defaults = function() {
                        return {
                          level: 'tool'
                        };
                      };
                
                      return Tool;
                
                    })(HasParent);
                    return {
                      "Model": Tool,
                      "View": ToolView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=tool.js.map
                */;
                /*! Copyright (c) 2013 Brandon Aaron (http://brandon.aaron.sh)
                 * Licensed under the MIT License (LICENSE.txt).
                 *
                 * Version: 3.1.12
                 *
                 * Requires: jQuery 1.2.2+
                 */
                !function(a){"function"==typeof define&&define.amd?define('jquery_mousewheel',["jquery"],a):"object"==typeof exports?module.exports=a:a(jQuery)}(function(a){function b(b){var g=b||window.event,h=i.call(arguments,1),j=0,l=0,m=0,n=0,o=0,p=0;if(b=a.event.fix(g),b.type="mousewheel","detail"in g&&(m=-1*g.detail),"wheelDelta"in g&&(m=g.wheelDelta),"wheelDeltaY"in g&&(m=g.wheelDeltaY),"wheelDeltaX"in g&&(l=-1*g.wheelDeltaX),"axis"in g&&g.axis===g.HORIZONTAL_AXIS&&(l=-1*m,m=0),j=0===m?l:m,"deltaY"in g&&(m=-1*g.deltaY,j=m),"deltaX"in g&&(l=g.deltaX,0===m&&(j=-1*l)),0!==m||0!==l){if(1===g.deltaMode){var q=a.data(this,"mousewheel-line-height");j*=q,m*=q,l*=q}else if(2===g.deltaMode){var r=a.data(this,"mousewheel-page-height");j*=r,m*=r,l*=r}if(n=Math.max(Math.abs(m),Math.abs(l)),(!f||f>n)&&(f=n,d(g,n)&&(f/=40)),d(g,n)&&(j/=40,l/=40,m/=40),j=Math[j>=1?"floor":"ceil"](j/f),l=Math[l>=1?"floor":"ceil"](l/f),m=Math[m>=1?"floor":"ceil"](m/f),k.settings.normalizeOffset&&this.getBoundingClientRect){var s=this.getBoundingClientRect();o=b.clientX-s.left,p=b.clientY-s.top}return b.deltaX=l,b.deltaY=m,b.deltaFactor=f,b.offsetX=o,b.offsetY=p,b.deltaMode=0,h.unshift(b,j,l,m),e&&clearTimeout(e),e=setTimeout(c,200),(a.event.dispatch||a.event.handle).apply(this,h)}}function c(){f=null}function d(a,b){return k.settings.adjustOldDeltas&&"mousewheel"===a.type&&b%120===0}var e,f,g=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],h="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],i=Array.prototype.slice;if(a.event.fixHooks)for(var j=g.length;j;)a.event.fixHooks[g[--j]]=a.event.mouseHooks;var k=a.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var c=h.length;c;)this.addEventListener(h[--c],b,!1);else this.onmousewheel=b;a.data(this,"mousewheel-line-height",k.getLineHeight(this)),a.data(this,"mousewheel-page-height",k.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var c=h.length;c;)this.removeEventListener(h[--c],b,!1);else this.onmousewheel=null;a.removeData(this,"mousewheel-line-height"),a.removeData(this,"mousewheel-page-height")},getLineHeight:function(b){var c=a(b),d=c["offsetParent"in a.fn?"offsetParent":"parent"]();return d.length||(d=a("body")),parseInt(d.css("fontSize"),10)||parseInt(c.css("fontSize"),10)||16},getPageHeight:function(b){return a(b).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})});
                (function() {
                  define('tool/event_generators',["jquery_mousewheel"], function(mousewheel) {
                    var ButtonEventGenerator, OnePointWheelEventGenerator, TwoPointEventGenerator, set_bokehXY;
                    set_bokehXY = function(event) {
                      var left, offset, top;
                      offset = $(event.currentTarget).offset();
                      left = offset != null ? offset.left : 0;
                      top = offset != null ? offset.top : 0;
                      event.bokehX = event.pageX - left;
                      return event.bokehY = event.pageY - top;
                    };
                    TwoPointEventGenerator = (function() {
                      function TwoPointEventGenerator(options) {
                        this.restrict_to_innercanvas = options.restrict_to_innercanvas;
                        this.options = options;
                        this.toolName = this.options.eventBasename;
                        this.dragging = false;
                        this.basepoint_set = false;
                        this.button_activated = false;
                        this.tool_active = false;
                      }
                
                      TwoPointEventGenerator.prototype.bind_bokeh_events = function(plotview, eventSink) {
                        var callbacks, toolName,
                          _this = this;
                        toolName = this.toolName;
                        this.plotview = plotview;
                        this.eventSink = eventSink;
                        callbacks = this.plotview.canvas.get('mousemove_callbacks');
                        callbacks.push(function(e, x, y) {
                          if (!_this.dragging) {
                            return;
                          }
                          if (!_this.tool_active) {
                            return;
                          }
                          set_bokehXY(e);
                          if (!_this.basepoint_set) {
                            _this.dragging = true;
                            _this.basepoint_set = true;
                            return eventSink.trigger("" + toolName + ":SetBasepoint", e);
                          } else {
                            eventSink.trigger("" + toolName + ":UpdatingMouseMove", e);
                            e.preventDefault();
                            return e.stopPropagation();
                          }
                        });
                        callbacks.push(function(e, x, y) {
                          var h_range, v_range, xend, xstart, yend, ystart;
                          if (_this.dragging) {
                            set_bokehXY(e);
                            h_range = _this.plotview.frame.get('h_range');
                            v_range = _this.plotview.frame.get('v_range');
                            x = _this.plotview.canvas.sx_to_vx(e.bokehX);
                            y = _this.plotview.canvas.sy_to_vy(e.bokehY);
                            if (_this.restrict_to_innercanvas) {
                              xstart = h_range.get('start');
                              xend = h_range.get('end');
                              ystart = v_range.get('start');
                              yend = v_range.get('end');
                            } else {
                              xstart = 0;
                              xend = _this.plotview.canvas.get('width');
                              ystart = 0;
                              yend = _this.plotview.canvas.get('height');
                            }
                            if (x < xstart || x > xend) {
                              _this._stop_drag(e);
                              return false;
                            }
                            if (y < ystart || y > yend) {
                              _this._stop_drag(e);
                              return false;
                            }
                          }
                        });
                        this.plotview.canvas.set('mousemove_callbacks', callbacks);
                        $(document).bind('keydown', function(e) {
                          if (e.keyCode === 27) {
                            return eventSink.trigger("clear_active_tool");
                          }
                        });
                        $(document).bind('keyup', function(e) {
                          if (!e[_this.options.keyName]) {
                            return _this._stop_drag(e);
                          }
                        });
                        this.plotview.canvas_view.canvas_wrapper.bind('mousedown', function(e) {
                          var start;
                          start = false;
                          if (_this.button_activated || _this.eventSink.active === _this.toolName) {
                            start = true;
                          } else if (!_this.eventSink.active) {
                            if (_this.options.keyName === null && !e.ctrlKey && !e.altKey && !e.metaKey && !e.shiftKey) {
                              start = true;
                            } else if (e[_this.options.keyName] === true) {
                              start = true;
                            }
                          }
                          if (start) {
                            _this._start_drag();
                            return false;
                          }
                        });
                        this.plotview.canvas_view.canvas_wrapper.bind('mouseup', function(e) {
                          if (_this.button_activated) {
                            _this._stop_drag(e);
                            return false;
                          }
                        });
                        this.plotview.canvas_view.canvas_wrapper.bind('mouseleave', function(e) {
                          if (_this.button_activated) {
                            _this._stop_drag(e);
                            return false;
                          }
                        });
                        this.$tool_button = $("<button class='bk-toolbar-button' title='" + this.options.buttonText + "'><img class='bk-btn-icon' src='" + this.options.buttonIcon + "'/><span class='tip'>" + this.options.buttonText + "</span></button>");
                        this.plotview;
                        this.plotview.$el.find('.bk-button-bar').append(this.$tool_button);
                        this.$tool_button.click(function() {
                          if (_this.button_activated) {
                            return eventSink.trigger("clear_active_tool");
                          } else {
                            return eventSink.trigger("active_tool", toolName);
                          }
                        });
                        eventSink.on("" + toolName + ":deactivated", function() {
                          _this.tool_active = false;
                          _this.button_activated = false;
                          return _this.$tool_button.removeClass('active');
                        });
                        eventSink.on("" + toolName + ":activated", function() {
                          _this.tool_active = true;
                          _this.$tool_button.addClass('active');
                          return _this.button_activated = true;
                        });
                        return eventSink;
                      };
                
                      TwoPointEventGenerator.prototype.hide_button = function() {
                        return this.$tool_button.hide();
                      };
                
                      TwoPointEventGenerator.prototype._start_drag = function() {
                        this._activated_with_button = this.button_activated;
                        this.eventSink.trigger("active_tool", this.toolName);
                        if (!this.dragging) {
                          this.dragging = true;
                          if (!this.button_activated) {
                            this.$tool_button.addClass('active');
                          }
                          if (this.options.cursor != null) {
                            return this.plotview.canvas_view.canvas_wrapper.css('cursor', this.options.cursor);
                          }
                        }
                      };
                
                      TwoPointEventGenerator.prototype._stop_drag = function(e) {
                        this.basepoint_set = false;
                        if (this.dragging) {
                          this.dragging = false;
                          if (this._activated_with_button === false && this.options.auto_deactivate === true) {
                            this.eventSink.trigger("clear_active_tool");
                          }
                          if (!this.button_activated) {
                            this.$tool_button.removeClass('active');
                          }
                          if (this.options.cursor != null) {
                            this.plotview.canvas_view.canvas_wrapper.css('cursor', '');
                          }
                          set_bokehXY(e);
                          this.eventSink.trigger("" + this.options.eventBasename + ":DragEnd", e);
                        }
                        return this._activated_with_button = null;
                      };
                
                      return TwoPointEventGenerator;
                
                    })();
                    OnePointWheelEventGenerator = (function() {
                      function OnePointWheelEventGenerator(options) {
                        this.options = options;
                        this.toolName = this.options.eventBasename;
                        this.dragging = false;
                        this.basepoint_set = false;
                        this.button_activated = false;
                        this.tool_active = false;
                      }
                
                      OnePointWheelEventGenerator.prototype.bind_bokeh_events = function(plotview, eventSink) {
                        var no_scroll, restore_scroll, toolName,
                          _this = this;
                        toolName = this.toolName;
                        this.plotview = plotview;
                        this.eventSink = eventSink;
                        this.plotview.canvas_view.canvas_wrapper.mousewheel(function(e, delta) {
                          if (_this.tool_active || (!_this.eventSink.active && e.shiftKey)) {
                            set_bokehXY(e);
                            e.delta = delta;
                            eventSink.trigger("" + toolName + ":zoom", e);
                            e.preventDefault();
                            return e.stopPropagation();
                          }
                        });
                        $(document).bind('keydown', function(e) {
                          if (e.keyCode === 27) {
                            return eventSink.trigger("clear_active_tool");
                          }
                        });
                        this.plotview.$el.bind("mousein", function(e) {
                          return eventSink.trigger("clear_active_tool");
                        });
                        this.plotview.$el.bind("mouseover", function(e) {
                          return _this.mouseover_count += 1;
                        });
                        this.$tool_button = $("<button class='bk-toolbar-button' title='" + this.options.buttonText + "'><img class='bk-btn-icon' src='" + this.options.buttonIcon + "'/><span class='tip'>" + this.options.buttonText + "</span></button>");
                        this.plotview.$el.find('.bk-button-bar').append(this.$tool_button);
                        this.$tool_button.click(function() {
                          if (_this.button_activated) {
                            return eventSink.trigger("clear_active_tool");
                          } else {
                            eventSink.trigger("active_tool", toolName);
                            return _this.button_activated = true;
                          }
                        });
                        no_scroll = function(el) {
                          el.setAttribute("old_overflow", el.style.overflow);
                          el.style.overflow = "hidden";
                          if (el === document.body) {
                
                          } else {
                            return no_scroll(el.parentNode);
                          }
                        };
                        restore_scroll = function(el) {
                          el.style.overflow = el.getAttribute("old_overflow");
                          if (el === document.body) {
                
                          } else {
                            return restore_scroll(el.parentNode);
                          }
                        };
                        eventSink.on("" + toolName + ":deactivated", function() {
                          _this.tool_active = false;
                          _this.button_activated = false;
                          _this.$tool_button.removeClass('active');
                          return document.body.style.overflow = _this.old_overflow;
                        });
                        eventSink.on("" + toolName + ":activated", function() {
                          _this.tool_active = true;
                          return _this.$tool_button.addClass('active');
                        });
                        return eventSink;
                      };
                
                      OnePointWheelEventGenerator.prototype.hide_button = function() {
                        return this.$tool_button.hide();
                      };
                
                      return OnePointWheelEventGenerator;
                
                    })();
                    ButtonEventGenerator = (function() {
                      function ButtonEventGenerator(options) {
                        this.options = options;
                        this.toolName = this.options.eventBasename;
                        this.button_activated = false;
                        this.tool_active = false;
                      }
                
                      ButtonEventGenerator.prototype.bind_bokeh_events = function(plotview, eventSink) {
                        var no_scroll, restore_scroll, toolName,
                          _this = this;
                        toolName = this.toolName;
                        this.plotview = plotview;
                        this.eventSink = eventSink;
                        $(document).bind('keydown', function(e) {
                          if (e.keyCode === 27) {
                            return eventSink.trigger("clear_active_tool");
                          }
                        });
                        this.plotview.$el.bind("mouseover", function(e) {
                          return _this.mouseover_count += 1;
                        });
                        this.$tool_button = $("<button class='bk-toolbar-button' title='" + this.options.buttonText + "'><img class='bk-btn-icon' src='" + this.options.buttonIcon + "'/><span class='tip'>" + this.options.buttonText + "</span></button>");
                        this.plotview.$el.find('.bk-button-bar').append(this.$tool_button);
                        this.$tool_button.click(function() {
                          if (_this.button_activated) {
                            return eventSink.trigger("clear_active_tool");
                          } else {
                            eventSink.trigger("active_tool", toolName);
                            return _this.button_activated = true;
                          }
                        });
                        no_scroll = function(el) {
                          el.setAttribute("old_overflow", el.style.overflow);
                          el.style.overflow = "hidden";
                          if (el === document.body) {
                
                          } else {
                            return no_scroll(el.parentNode);
                          }
                        };
                        restore_scroll = function(el) {
                          el.style.overflow = el.getAttribute("old_overflow");
                          if (el === document.body) {
                
                          } else {
                            return restore_scroll(el.parentNode);
                          }
                        };
                        eventSink.on("" + toolName + ":deactivated", function() {
                          _this.tool_active = false;
                          _this.button_activated = false;
                          _this.$tool_button.removeClass('active');
                          return document.body.style.overflow = _this.old_overflow;
                        });
                        eventSink.on("" + toolName + ":activated", function() {
                          _this.tool_active = true;
                          return _this.$tool_button.addClass('active');
                        });
                        return eventSink;
                      };
                
                      ButtonEventGenerator.prototype.hide_button = function() {
                        return this.$tool_button.hide();
                      };
                
                      return ButtonEventGenerator;
                
                    })();
                    return {
                      "TwoPointEventGenerator": TwoPointEventGenerator,
                      "OnePointWheelEventGenerator": OnePointWheelEventGenerator,
                      "ButtonEventGenerator": ButtonEventGenerator
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=event_generators.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('tool/box_select_tool',["underscore", "backbone", "./tool", "./event_generators"], function(_, Backbone, Tool, EventGenerators) {
                    var BoxSelectTool, BoxSelectToolView, BoxSelectTools, TwoPointEventGenerator, _ref, _ref1, _ref2;
                    TwoPointEventGenerator = EventGenerators.TwoPointEventGenerator;
                    BoxSelectToolView = (function(_super) {
                      __extends(BoxSelectToolView, _super);
                
                      function BoxSelectToolView() {
                        _ref = BoxSelectToolView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      BoxSelectToolView.prototype.initialize = function(options) {
                        BoxSelectToolView.__super__.initialize.call(this, options);
                        return this.select_every_mousemove = this.mget('select_every_mousemove');
                      };
                
                      BoxSelectToolView.prototype.bind_bokeh_events = function() {
                        var renderer, rendererview, _i, _len, _ref1, _results;
                        BoxSelectToolView.__super__.bind_bokeh_events.call(this);
                        _ref1 = this.mget('renderers');
                        _results = [];
                        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
                          renderer = _ref1[_i];
                          rendererview = this.plot_view.renderers[renderer.id];
                          this.listenTo(rendererview.xrange(), 'change', this.select_callback);
                          this.listenTo(rendererview.yrange(), 'change', this.select_callback);
                          _results.push(this.listenTo(renderer, 'change', this.select_callback));
                        }
                        return _results;
                      };
                
                      BoxSelectToolView.prototype.eventGeneratorClass = TwoPointEventGenerator;
                
                      BoxSelectToolView.prototype.toolType = "BoxSelectTool";
                
                      BoxSelectToolView.prototype.evgen_options = {
                        keyName: "shiftKey",
                        buttonText: "Select",
                        buttonIcon: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNui8sowAAAE1SURBVEiJ7ZXNUcQwDIU/7VDA3rnkQAF0QEpJCZSQEihhSxEFMLMlmA44cH8col2CsVlCfmYPvJlMLMnjJ8mSbJLYErtN2a6BsAPczM5roAvZJ9ruS4Q3BV0a/X0ke7anZvMgLcLGRRMeLoZSQe6yDZ2kpwWIXFIxpfkdNlRyPxEPwL7mzfhrap5NgaRW0j47G0nbt0XuQS/JFzhTEeXFCBNwnEsIPANvJcN/W/wV19MWpVk6G2bmQfzNVnotZt1h1IHXaiGPMDG/LRqGOyziC6GZHWaSXYRlee6A1sw6SQ2Dt8nMkqQ2nPKCrePzDbwDboF34CV0R+ARKI42hb6PEdWHrB9sJ7kGP3EsMmki+jbEluEOX4FD6NJ5PY5wCYyidf1ieK+ONRrf459KxrxKV8fmKf0AQEJj/A0qfJ8AAAAASUVORK5CYII=",
                        cursor: "crosshair",
                        restrict_to_innercanvas: true
                      };
                
                      BoxSelectToolView.prototype.tool_events = {
                        SetBasepoint: "_start_selecting",
                        UpdatingMouseMove: "_selecting",
                        deactivated: "_stop_selecting",
                        DragEnd: "_dragend"
                      };
                
                      BoxSelectToolView.prototype.pause = function() {
                        return null;
                      };
                
                      BoxSelectToolView.prototype.view_coords = function(sx, sy) {
                        var vx, vy, _ref1;
                        _ref1 = [this.plot_view.canvas.sx_to_vx(sx), this.plot_view.canvas.sy_to_vy(sy)], vx = _ref1[0], vy = _ref1[1];
                        return [vx, vy];
                      };
                
                      BoxSelectToolView.prototype._stop_selecting = function() {
                        this.trigger('stopselect');
                        this.basepoint_set = false;
                        return this.plot_view.unpause();
                      };
                
                      BoxSelectToolView.prototype._start_selecting = function(e) {
                        var vx, vy, _ref1;
                        this.plot_view.pause();
                        this.trigger('startselect');
                        _ref1 = this.view_coords(e.bokehX, e.bokehY), vx = _ref1[0], vy = _ref1[1];
                        this.mset({
                          'start_vx': vx,
                          'start_vy': vy,
                          'current_vx': null,
                          'current_vy': null
                        });
                        return this.basepoint_set = true;
                      };
                
                      BoxSelectToolView.prototype._get_selection_range = function() {
                        var range, xrange, yrange;
                        if (this.mget('select_x')) {
                          xrange = [this.mget('start_vx'), this.mget('current_vx')];
                          xrange = [_.min(xrange), _.max(xrange)];
                        } else {
                          range = this.plot_view.view_state.get('h_range');
                          xrange = [range.get('start'), range.get('end')];
                        }
                        if (this.mget('select_y')) {
                          yrange = [this.mget('start_vy'), this.mget('current_vy')];
                          yrange = [_.min(yrange), _.max(yrange)];
                        } else {
                          range = this.plot_view.view_state.get('v_range');
                          yrange = [range.get('start'), range.get('end')];
                        }
                        return [xrange, yrange];
                      };
                
                      BoxSelectToolView.prototype._selecting = function(e, x_, y_) {
                        var vx, vy, _ref1, _ref2;
                        _ref1 = this.view_coords(e.bokehX, e.bokehY), vx = _ref1[0], vy = _ref1[1];
                        this.mset({
                          'current_vx': vx,
                          'current_vy': vy
                        });
                        _ref2 = this._get_selection_range(), this.xrange = _ref2[0], this.yrange = _ref2[1];
                        this.trigger('boxselect', this.xrange, this.yrange);
                        if (this.select_every_mousemove) {
                          this._select_data();
                        }
                        this.plot_view._render_levels(this.plot_view.ctx, ['overlay'], true);
                        return null;
                      };
                
                      BoxSelectToolView.prototype._dragend = function() {
                        return this._select_data();
                      };
                
                      BoxSelectToolView.prototype._select_data = function() {
                        var datasource, datasource_id, datasource_selections, datasources, ds, geometry, k, renderer, selected, v, _i, _j, _len, _len1, _ref1, _ref2;
                        if (!this.basepoint_set) {
                          return;
                        }
                        geometry = {
                          type: 'rect',
                          vx0: this.xrange[0],
                          vx1: this.xrange[1],
                          vy0: this.yrange[0],
                          vy1: this.yrange[1]
                        };
                        datasources = {};
                        datasource_selections = {};
                        _ref1 = this.mget('renderers');
                        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
                          renderer = _ref1[_i];
                          datasource = renderer.get('data_source');
                          datasources[datasource.id] = datasource;
                        }
                        _ref2 = this.mget('renderers');
                        for (_j = 0, _len1 = _ref2.length; _j < _len1; _j++) {
                          renderer = _ref2[_j];
                          datasource_id = renderer.get('data_source').id;
                          _.setdefault(datasource_selections, datasource_id, []);
                          selected = this.plot_view.renderers[renderer.id].hit_test(geometry);
                          datasource_selections[datasource_id].push(selected);
                        }
                        for (k in datasource_selections) {
                          if (!__hasProp.call(datasource_selections, k)) continue;
                          v = datasource_selections[k];
                          selected = _.intersection.apply(_, v);
                          ds = datasources[k];
                          ds.save({
                            selected: selected
                          }, {
                            patch: true
                          });
                          this.plot_view.unpause();
                        }
                        return null;
                      };
                
                      return BoxSelectToolView;
                
                    })(Tool.View);
                    BoxSelectTool = (function(_super) {
                      __extends(BoxSelectTool, _super);
                
                      function BoxSelectTool() {
                        _ref1 = BoxSelectTool.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      BoxSelectTool.prototype.default_view = BoxSelectToolView;
                
                      BoxSelectTool.prototype.type = "BoxSelectTool";
                
                      BoxSelectTool.prototype.defaults = function() {
                        return _.extend(BoxSelectTool.__super__.defaults.call(this), {
                          renderers: [],
                          select_x: true,
                          select_y: true,
                          select_every_mousemove: false,
                          data_source_options: {}
                        });
                      };
                
                      BoxSelectTool.prototype.display_defaults = function() {
                        return BoxSelectTool.__super__.display_defaults.call(this);
                      };
                
                      return BoxSelectTool;
                
                    })(Tool.Model);
                    BoxSelectTools = (function(_super) {
                      __extends(BoxSelectTools, _super);
                
                      function BoxSelectTools() {
                        _ref2 = BoxSelectTools.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      BoxSelectTools.prototype.model = BoxSelectTool;
                
                      return BoxSelectTools;
                
                    })(Backbone.Collection);
                    return {
                      "Model": BoxSelectTool,
                      "Collection": new BoxSelectTools(),
                      "View": BoxSelectToolView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=box_select_tool.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('tool/box_zoom_tool',["underscore", "backbone", "./tool", "./event_generators"], function(_, Backbone, Tool, EventGenerators) {
                    var BoxZoomTool, BoxZoomToolView, BoxZoomTools, TwoPointEventGenerator, _ref, _ref1, _ref2;
                    TwoPointEventGenerator = EventGenerators.TwoPointEventGenerator;
                    BoxZoomToolView = (function(_super) {
                      __extends(BoxZoomToolView, _super);
                
                      function BoxZoomToolView() {
                        _ref = BoxZoomToolView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      BoxZoomToolView.prototype.initialize = function(options) {
                        return BoxZoomToolView.__super__.initialize.call(this, options);
                      };
                
                      BoxZoomToolView.prototype.bind_bokeh_events = function() {
                        return BoxZoomToolView.__super__.bind_bokeh_events.call(this);
                      };
                
                      BoxZoomToolView.prototype.eventGeneratorClass = TwoPointEventGenerator;
                
                      BoxZoomToolView.prototype.toolType = "BoxZoomTool";
                
                      BoxZoomToolView.prototype.evgen_options = {
                        keyName: "ctrlKey",
                        buttonText: "Box Zoom",
                        buttonIcon: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNui8sowAAAFKSURBVEiJ7ZZhecMgEIZhzwRUAhIigTmYhEiJg0mIhElAQiWkDlIH737saCnlgLTNr+37UyjHvbl8XBILGGut2VPAZfy2K6mgPwbkV0HGkzL/zPY4YAZWrlqAL+BgjLk9I6mhQMgT1gSM1LUCQ+QAt8AtAnyWeJL/vFSXrrkiUDa5TmDIq8jWhwQ6a0AA3wFzSbKxEhcrXTVgKF1tIdHldvbGReB7GmCt/WjBnlXeFr0enpI9tVPt5fecQtJxl4cSu0j8gvRbtj5w7U310HR5KLHxQRChoxwmJ2sRprdFr2g3fNQa75hWYdPDDLbK/LsAm9NcGhAqHhZgQ7buNUs2e9iCtbTJw2dhKlDzEDgK7NjyuHChvgYseggc5BDc9VsDGICpBlQ9fETNCvdUBD76LO2FjHcWFTxsfdO05sg8vpqmtELL/4fwi/UDzP86Q6mEI4kAAAAASUVORK5CYII=",
                        cursor: "crosshair",
                        auto_deactivate: true,
                        restrict_to_innercanvas: true
                      };
                
                      BoxZoomToolView.prototype.tool_events = {
                        SetBasepoint: "_start_selecting",
                        UpdatingMouseMove: "_selecting",
                        DragEnd: "_dragend"
                      };
                
                      BoxZoomToolView.prototype.pause = function() {
                        return null;
                      };
                
                      BoxZoomToolView.prototype.view_coords = function(sx, sy) {
                        var vx, vy, _ref1;
                        _ref1 = [this.plot_view.canvas.sx_to_vx(sx), this.plot_view.canvas.sy_to_vy(sy)], vx = _ref1[0], vy = _ref1[1];
                        return [vx, vy];
                      };
                
                      BoxZoomToolView.prototype._start_selecting = function(e) {
                        var vx, vy, _ref1;
                        this.plot_view.pause();
                        this.trigger('startselect');
                        _ref1 = this.view_coords(e.bokehX, e.bokehY), vx = _ref1[0], vy = _ref1[1];
                        this.mset({
                          'start_vx': vx,
                          'start_vy': vy,
                          'current_vx': null,
                          'current_vy': null
                        });
                        return this.basepoint_set = true;
                      };
                
                      BoxZoomToolView.prototype._get_selection_range = function() {
                        var xrange, yrange;
                        if (this.mget('select_x')) {
                          xrange = [this.mget('start_vx'), this.mget('current_vx')];
                          xrange = [_.min(xrange), _.max(xrange)];
                        } else {
                          xrange = null;
                        }
                        if (this.mget('select_y')) {
                          yrange = [this.mget('start_vy'), this.mget('current_vy')];
                          yrange = [_.min(yrange), _.max(yrange)];
                        } else {
                          yrange = null;
                        }
                        return [xrange, yrange];
                      };
                
                      BoxZoomToolView.prototype._selecting = function(e, x_, y_) {
                        var vx, vy, _ref1, _ref2;
                        _ref1 = this.view_coords(e.bokehX, e.bokehY), vx = _ref1[0], vy = _ref1[1];
                        this.mset({
                          'current_vx': vx,
                          'current_vy': vy
                        });
                        _ref2 = this._get_selection_range(), this.xrange = _ref2[0], this.yrange = _ref2[1];
                        this.trigger('boxselect', this.xrange, this.yrange);
                        this.plot_view._render_levels(this.plot_view.ctx, ['overlay'], true);
                        return null;
                      };
                
                      BoxZoomToolView.prototype._dragend = function() {
                        this._select_data();
                        this.basepoint_set = false;
                        this.plot_view.unpause();
                        return this.trigger('stopselect');
                      };
                
                      BoxZoomToolView.prototype._select_data = function() {
                        var xend, xstart, yend, ystart, zoom_info, _ref1, _ref2;
                        if (!this.basepoint_set) {
                          return;
                        }
                        _ref1 = this.plot_view.xmapper.v_map_from_target([this.xrange[0], this.xrange[1]]), xstart = _ref1[0], xend = _ref1[1];
                        _ref2 = this.plot_view.ymapper.v_map_from_target([this.yrange[0], this.yrange[1]]), ystart = _ref2[0], yend = _ref2[1];
                        zoom_info = {
                          xr: {
                            start: xstart,
                            end: xend
                          },
                          yr: {
                            start: ystart,
                            end: yend
                          }
                        };
                        return this.plot_view.update_range(zoom_info);
                      };
                
                      return BoxZoomToolView;
                
                    })(Tool.View);
                    BoxZoomTool = (function(_super) {
                      __extends(BoxZoomTool, _super);
                
                      function BoxZoomTool() {
                        _ref1 = BoxZoomTool.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      BoxZoomTool.prototype.default_view = BoxZoomToolView;
                
                      BoxZoomTool.prototype.type = "BoxZoomTool";
                
                      BoxZoomTool.prototype.defaults = function() {
                        return _.extend(BoxZoomTool.__super__.defaults.call(this), {
                          renderers: [],
                          select_x: true,
                          select_y: true,
                          select_every_mousemove: false,
                          data_source_options: {}
                        });
                      };
                
                      BoxZoomTool.prototype.display_defaults = function() {
                        return BoxZoomTool.__super__.display_defaults.call(this);
                      };
                
                      return BoxZoomTool;
                
                    })(Tool.Model);
                    BoxZoomTools = (function(_super) {
                      __extends(BoxZoomTools, _super);
                
                      function BoxZoomTools() {
                        _ref2 = BoxZoomTools.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      BoxZoomTools.prototype.model = BoxZoomTool;
                
                      return BoxZoomTools;
                
                    })(Backbone.Collection);
                    return {
                      "Model": BoxZoomTool,
                      "Collection": new BoxZoomTools(),
                      "View": BoxZoomToolView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=box_zoom_tool.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('tool/click_tool',["underscore", "backbone", "./tool"], function(_, Backbone, Tool) {
                    var ClickTool, ClickToolView, ClickTools, _ref, _ref1, _ref2;
                    ClickToolView = (function(_super) {
                      __extends(ClickToolView, _super);
                
                      function ClickToolView() {
                        _ref = ClickToolView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      ClickToolView.prototype.initialize = function(options) {
                        ClickToolView.__super__.initialize.call(this, options);
                        this.listenTo(this, 'clicked', (function(selected, ds) {
                          return console.log(selected, ds);
                        }));
                        return this.active = false;
                      };
                
                      ClickToolView.prototype.view_coords = function(sx, sy) {
                        var vx, vy, _ref1;
                        _ref1 = [this.plot_view.canvas.sx_to_vx(sx), this.plot_view.canvas.sy_to_vy(sy)], vx = _ref1[0], vy = _ref1[1];
                        return [vx, vy];
                      };
                
                      ClickToolView.prototype.bind_bokeh_events = function() {
                        var tool_name,
                          _this = this;
                        tool_name = "click_tool";
                        if (!this.mget('always_active')) {
                          this.tool_button = $("<button class='bk-toolbar-button'> Click </button>");
                          this.plot_view.$el.find('.bk-button-bar').append(this.tool_button);
                          this.tool_button.click(function() {
                            if (_this.active) {
                              return _this.plot_view.eventSink.trigger("clear_active_tool");
                            } else {
                              return _this.plot_view.eventSink.trigger("active_tool", tool_name);
                            }
                          });
                          this.plot_view.eventSink.on("" + tool_name + ":deactivated", function() {
                            _this.active = false;
                            return _this.tool_button.removeClass('active');
                          });
                          this.plot_view.eventSink.on("" + tool_name + ":activated", function() {
                            _this.active = true;
                            return _this.tool_button.addClass('active');
                          });
                        }
                        this.plot_view.canvas_view.canvas_wrapper.bind("mousedown", function(e) {
                          if (!_this.active && !_this.mget('always_active')) {
                            return;
                          }
                          _this.start_posx = e.pageX;
                          return _this.start_posy = e.pageY;
                        });
                        return this.plot_view.canvas_view.canvas_wrapper.bind("mouseup", function(e) {
                          var left, offset, top, vx, vy, _ref1;
                          if (!_this.active && !_this.mget('always_active')) {
                            return;
                          }
                          if (_this.start_posx !== e.pageX || _this.start_posy !== e.pageY) {
                            return;
                          }
                          offset = $(e.currentTarget).offset();
                          left = offset != null ? offset.left : 0;
                          top = offset != null ? offset.top : 0;
                          e.bokehX = e.pageX - left;
                          e.bokehY = e.pageY - top;
                          _ref1 = _this.view_coords(e.bokehX, e.bokehY), vx = _ref1[0], vy = _ref1[1];
                          return _this._select(vx, vy, e);
                        });
                      };
                
                      ClickToolView.prototype._select = function(vx, vy, e) {
                        var datasource, datasource_id, datasource_selections, datasources, ds, geometry, renderer, renderers, selected, x, y, _i, _j, _len, _len1;
                        geometry = {
                          type: 'point',
                          vx: vx,
                          vy: vy
                        };
                        x = this.plot_view.xmapper.map_from_target(vx);
                        y = this.plot_view.ymapper.map_from_target(vy);
                        datasources = {};
                        datasource_selections = {};
                        renderers = this.mget('renderers');
                        for (_i = 0, _len = renderers.length; _i < _len; _i++) {
                          renderer = renderers[_i];
                          datasource = renderer.get('data_source');
                          datasources[datasource.id] = datasource;
                        }
                        for (_j = 0, _len1 = renderers.length; _j < _len1; _j++) {
                          renderer = renderers[_j];
                          datasource_id = renderer.get('data_source').id;
                          _.setdefault(datasource_selections, datasource_id, []);
                          selected = this.plot_view.renderers[renderer.id].hit_test(geometry);
                          ds = datasources[datasource_id];
                          if (selected === null) {
                            continue;
                          }
                          if (selected.length === 0) {
                            continue;
                          }
                          this.trigger('clicked', selected, ds);
                        }
                        return null;
                      };
                
                      return ClickToolView;
                
                    })(Tool.View);
                    ClickTool = (function(_super) {
                      __extends(ClickTool, _super);
                
                      function ClickTool() {
                        _ref1 = ClickTool.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      ClickTool.prototype.default_view = ClickToolView;
                
                      ClickTool.prototype.type = "ClickTool";
                
                      ClickTool.prototype.initialize = function(attrs, options) {
                        var all_renderers, names, r, renderers;
                        ClickTool.__super__.initialize.call(this, attrs, options);
                        names = this.get('names');
                        all_renderers = this.get('plot').get('renderers');
                        renderers = (function() {
                          var _i, _len, _results;
                          _results = [];
                          for (_i = 0, _len = all_renderers.length; _i < _len; _i++) {
                            r = all_renderers[_i];
                            if (r.type === "Glyph") {
                              _results.push(r);
                            }
                          }
                          return _results;
                        })();
                        if (names.length > 0) {
                          renderers = (function() {
                            var _i, _len, _results;
                            _results = [];
                            for (_i = 0, _len = renderers.length; _i < _len; _i++) {
                              r = renderers[_i];
                              if (names.indexOf(r.get('name')) >= 0) {
                                _results.push(r);
                              }
                            }
                            return _results;
                          })();
                        }
                        return this.set('renderers', renderers);
                      };
                
                      ClickTool.prototype.defaults = function() {
                        return _.extend(ClickTool.__super__.defaults.call(this), {
                          renderers: [],
                          names: [],
                          always_active: []
                        });
                      };
                
                      ClickTool.prototype.display_defaults = function() {
                        return ClickTool.__super__.display_defaults.call(this);
                      };
                
                      return ClickTool;
                
                    })(Tool.Model);
                    ClickTools = (function(_super) {
                      __extends(ClickTools, _super);
                
                      function ClickTools() {
                        _ref2 = ClickTools.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      ClickTools.prototype.model = ClickTool;
                
                      return ClickTools;
                
                    })(Backbone.Collection);
                    return {
                      "Model": ClickTool,
                      "Collection": new ClickTools(),
                      "View": ClickToolView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=click_tool.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('tool/crosshair_tool',["underscore", "backbone", "./tool", "./event_generators", "sprintf"], function(_, Backbone, Tool, EventGenerators, sprintf) {
                    var CrosshairTool, CrosshairToolView, CrosshairTools, TwoPointEventGenerator, _ref, _ref1, _ref2;
                    TwoPointEventGenerator = EventGenerators.TwoPointEventGenerator;
                    CrosshairToolView = (function(_super) {
                      __extends(CrosshairToolView, _super);
                
                      function CrosshairToolView() {
                        _ref = CrosshairToolView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      CrosshairToolView.prototype.initialize = function(options) {
                        CrosshairToolView.__super__.initialize.call(this, options);
                        return this.active = false;
                      };
                
                      CrosshairToolView.prototype.bind_events = function(plotview) {
                        return CrosshairToolView.__super__.bind_events.call(this, plotview);
                      };
                
                      CrosshairToolView.prototype.eventGeneratorClass = TwoPointEventGenerator;
                
                      CrosshairToolView.prototype.toolType = "CrosshairTool";
                
                      CrosshairToolView.prototype.evgen_options = {
                        keyName: "",
                        buttonText: "Crosshair",
                        cursor: "crosshair"
                      };
                
                      CrosshairToolView.prototype.tool_events = {
                        activated: "_activate",
                        deactivated: "_deactivate",
                        UpdatingMouseMove: "_drag",
                        SetBasepoint: "_set_base_point"
                      };
                
                      CrosshairToolView.prototype.render = function() {
                        var ch, ctx, cw, line_width;
                        if (!this.active) {
                          return;
                        }
                        ctx = this.plot_view.canvas_view.ctx;
                        cw = this.plot_view.canvas.get('width');
                        ch = this.plot_view.canvas.get('height');
                        line_width = 1;
                        ctx.save();
                        ctx.strokeStyle = 'red';
                        ctx.globalAlpha = 0.7;
                        ctx.lineWidth = line_width;
                        ctx.setLineDash([]);
                        ctx.beginPath();
                        ctx.moveTo(0, this.y);
                        ctx.lineTo(cw, this.y);
                        console.log(this.x, this.y);
                        ctx.moveTo(this.x, 0);
                        ctx.lineTo(this.x, ch);
                        ctx.stroke();
                        return ctx.restore();
                      };
                
                      CrosshairToolView.prototype.mouse_coords = function(e, x, y) {
                        return [x, y];
                      };
                
                      CrosshairToolView.prototype._activate = function(e) {
                        var bbar, ch, cw;
                        if (this.active) {
                          return;
                        }
                        this.active = true;
                        this.popup = $('<div class="resize_popup pull-right"\nstyle="border-radius: 10px; background-color: lightgrey; padding:3px 8px; font-size: 14px;\nposition:absolute; right:20px; top: 20px; "></div>');
                        bbar = this.plot_view.$el.find('.bokeh_canvas_wrapper');
                        this.popup.appendTo(bbar);
                        ch = this.plot_view.canvas.get('height');
                        cw = this.plot_view.canvas.get('width');
                        this.popup.text("x: 0 y:0");
                        this.plot_view.$el.css("cursor", "crosshair");
                        return null;
                      };
                
                      CrosshairToolView.prototype._deactivate = function(e) {
                        this.active = false;
                        this.plot_view.$el.css("cursor", "default");
                        this.popup.remove();
                        this.request_render();
                        this.plot_view.request_render();
                        return null;
                      };
                
                      CrosshairToolView.prototype._set_base_point = function(e) {
                        var _ref1;
                        _ref1 = this.mouse_coords(e, e.bokehX, e.bokehY), this.x = _ref1[0], this.y = _ref1[1];
                        return null;
                      };
                
                      CrosshairToolView.prototype._drag = function(e) {
                        var data_x, data_y, _ref1;
                        this.plot_view.pause();
                        _ref1 = this.mouse_coords(e, e.bokehX, e.bokehY), this.x = _ref1[0], this.y = _ref1[1];
                        data_x = sprintf("%.4f", this.plot_view.xmapper.map_from_target(x));
                        data_y = sprintf("%.4f", this.plot_view.ymapper.map_from_target(y));
                        this.popup.text("x: " + data_x + " y: " + data_y);
                        this.request_render();
                        this.plot_view.request_render();
                        this.plot_view.unpause(true);
                        return null;
                      };
                
                      return CrosshairToolView;
                
                    })(Tool.View);
                    CrosshairTool = (function(_super) {
                      __extends(CrosshairTool, _super);
                
                      function CrosshairTool() {
                        _ref1 = CrosshairTool.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      CrosshairTool.prototype.default_view = CrosshairToolView;
                
                      CrosshairTool.prototype.type = "CrosshairTool";
                
                      CrosshairTool.prototype.display_defaults = function() {
                        return CrosshairTool.__super__.display_defaults.call(this);
                      };
                
                      return CrosshairTool;
                
                    })(Tool.Model);
                    CrosshairTools = (function(_super) {
                      __extends(CrosshairTools, _super);
                
                      function CrosshairTools() {
                        _ref2 = CrosshairTools.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      CrosshairTools.prototype.model = CrosshairTool;
                
                      return CrosshairTools;
                
                    })(Backbone.Collection);
                    return {
                      "Model": CrosshairTool,
                      "Collection": new CrosshairTools(),
                      "View": CrosshairToolView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=crosshair_tool.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('tool/data_range_box_select_tool',["underscore", "backbone", "./box_select_tool"], function(_, Backbone, BoxSelectTool) {
                    var DataRangeBoxSelectTool, DataRangeBoxSelectToolView, DataRangeBoxSelectTools, _ref, _ref1, _ref2;
                    DataRangeBoxSelectToolView = (function(_super) {
                      __extends(DataRangeBoxSelectToolView, _super);
                
                      function DataRangeBoxSelectToolView() {
                        _ref = DataRangeBoxSelectToolView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      DataRangeBoxSelectToolView.prototype.bind_bokeh_events = function() {
                        return tool.ToolView.prototype.bind_bokeh_events.call(this);
                      };
                
                      DataRangeBoxSelectToolView.prototype._select_data = function() {
                        var xend, xstart, yend, ystart, _ref1, _ref2;
                        _ref1 = this.plot_view.mapper.map_from_target(this.xrange[0], this.yrange[0]), xstart = _ref1[0], ystart = _ref1[1];
                        _ref2 = this.plot_view.mapper.map_from_target(this.xrange[1], this.yrange[1]), xend = _ref2[0], yend = _ref2[1];
                        this.mset('xselect', [xstart, xend]);
                        this.mset('yselect', [ystart, yend]);
                        return this.model.save();
                      };
                
                      return DataRangeBoxSelectToolView;
                
                    })(BoxSelectTool.View);
                    DataRangeBoxSelectTool = (function(_super) {
                      __extends(DataRangeBoxSelectTool, _super);
                
                      function DataRangeBoxSelectTool() {
                        _ref1 = DataRangeBoxSelectTool.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      DataRangeBoxSelectTool.prototype.default_view = DataRangeBoxSelectToolView;
                
                      DataRangeBoxSelectTool.prototype.type = "DataRangeBoxSelectTool";
                
                      return DataRangeBoxSelectTool;
                
                    })(BoxSelectTool.Model);
                    DataRangeBoxSelectTools = (function(_super) {
                      __extends(DataRangeBoxSelectTools, _super);
                
                      function DataRangeBoxSelectTools() {
                        _ref2 = DataRangeBoxSelectTools.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      DataRangeBoxSelectTools.prototype.model = DataRangeBoxSelectToolView;
                
                      DataRangeBoxSelectTools.prototype.display_defaults = function() {
                        return DataRangeBoxSelectTools.__super__.display_defaults.call(this);
                      };
                
                      return DataRangeBoxSelectTools;
                
                    })(Backbone.Collection);
                    return {
                      "Model": DataRangeBoxSelectTool,
                      "Collection": new DataRangeBoxSelectTools(),
                      "View": DataRangeBoxSelectToolView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=data_range_box_select_tool.js.map
                */;
                define('bootstrap/modal',["jquery"], function(jQuery) {
                
                /* ========================================================================
                 * Bootstrap: modal.js v3.1.1
                 * http://getbootstrap.com/javascript/#modals
                 * ========================================================================
                 * Copyright 2011-2014 Twitter, Inc.
                 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
                 * ======================================================================== */
                
                
                +function ($) {
                  
                
                  // MODAL CLASS DEFINITION
                  // ======================
                
                  var Modal = function (element, options) {
                    this.options   = options
                    this.$element  = $(element)
                    this.$backdrop =
                    this.isShown   = null
                
                    if (this.options.remote) {
                      this.$element
                        .find('.bk-bs-modal-content')
                        .load(this.options.remote, $.proxy(function () {
                          this.$element.trigger('loaded.bk-bs.modal')
                        }, this))
                    }
                  }
                
                  Modal.DEFAULTS = {
                    backdrop: true,
                    keyboard: true,
                    show: true
                  }
                
                  Modal.prototype.toggle = function (_relatedTarget) {
                    return this[!this.isShown ? 'show' : 'hide'](_relatedTarget)
                  }
                
                  Modal.prototype.show = function (_relatedTarget) {
                    var that = this
                    var e    = $.Event('show.bk-bs.modal', { relatedTarget: _relatedTarget })
                
                    this.$element.trigger(e)
                
                    if (this.isShown || e.isDefaultPrevented()) return
                
                    this.isShown = true
                
                    this.escape()
                
                    this.$element.on('click.dismiss.bk-bs.modal', '[data-bk-bs-dismiss="modal"]', $.proxy(this.hide, this))
                
                    this.backdrop(function () {
                      var transition = $.support.transition && that.$element.hasClass('bk-bs-fade')
                
                      if (!that.$element.parent().length) {
                        that.$element.appendTo(document.body) // don't move modals dom position
                      }
                
                      that.$element
                        .show()
                        .scrollTop(0)
                
                      if (transition) {
                        that.$element[0].offsetWidth // force reflow
                      }
                
                      that.$element
                        .addClass('bk-bs-in')
                        .attr('aria-hidden', false)
                
                      that.enforceFocus()
                
                      var e = $.Event('shown.bk-bs.modal', { relatedTarget: _relatedTarget })
                
                      transition ?
                        that.$element.find('.bk-bs-modal-dialog') // wait for modal to slide in
                          .one($.support.transition.end, function () {
                            that.$element.focus().trigger(e)
                          })
                          .emulateTransitionEnd(300) :
                        that.$element.focus().trigger(e)
                    })
                  }
                
                  Modal.prototype.hide = function (e) {
                    if (e) e.preventDefault()
                
                    e = $.Event('hide.bk-bs.modal')
                
                    this.$element.trigger(e)
                
                    if (!this.isShown || e.isDefaultPrevented()) return
                
                    this.isShown = false
                
                    this.escape()
                
                    $(document).off('focusin.bk-bs.modal')
                
                    this.$element
                      .removeClass('bk-bs-in')
                      .attr('aria-hidden', true)
                      .off('click.dismiss.bk-bs.modal')
                
                    $.support.transition && this.$element.hasClass('bk-bs-fade') ?
                      this.$element
                        .one($.support.transition.end, $.proxy(this.hideModal, this))
                        .emulateTransitionEnd(300) :
                      this.hideModal()
                  }
                
                  Modal.prototype.enforceFocus = function () {
                    $(document)
                      .off('focusin.bk-bs.modal') // guard against infinite focus loop
                      .on('focusin.bk-bs.modal', $.proxy(function (e) {
                        if (this.$element[0] !== e.target && !this.$element.has(e.target).length) {
                          this.$element.focus()
                        }
                      }, this))
                  }
                
                  Modal.prototype.escape = function () {
                    if (this.isShown && this.options.keyboard) {
                      this.$element.on('keyup.dismiss.bk-bs.modal', $.proxy(function (e) {
                        e.which == 27 && this.hide()
                      }, this))
                    } else if (!this.isShown) {
                      this.$element.off('keyup.dismiss.bk-bs.modal')
                    }
                  }
                
                  Modal.prototype.hideModal = function () {
                    var that = this
                    this.$element.hide()
                    this.backdrop(function () {
                      that.removeBackdrop()
                      that.$element.trigger('hidden.bk-bs.modal')
                    })
                  }
                
                  Modal.prototype.removeBackdrop = function () {
                    this.$backdrop && this.$backdrop.remove()
                    this.$backdrop = null
                  }
                
                  Modal.prototype.backdrop = function (callback) {
                    var animate = this.$element.hasClass('bk-bs-fade') ? 'bk-bs-fade' : ''
                
                    if (this.isShown && this.options.backdrop) {
                      var doAnimate = $.support.transition && animate
                
                      this.$backdrop = $('<div class="bk-bs-modal-backdrop ' + animate + '" />')
                        .appendTo(document.body)
                
                      this.$element.on('click.dismiss.bk-bs.modal', $.proxy(function (e) {
                        if (e.target !== e.currentTarget) return
                        this.options.backdrop == 'static'
                          ? this.$element[0].focus.call(this.$element[0])
                          : this.hide.call(this)
                      }, this))
                
                      if (doAnimate) this.$backdrop[0].offsetWidth // force reflow
                
                      this.$backdrop.addClass('bk-bs-in')
                
                      if (!callback) return
                
                      doAnimate ?
                        this.$backdrop
                          .one($.support.transition.end, callback)
                          .emulateTransitionEnd(150) :
                        callback()
                
                    } else if (!this.isShown && this.$backdrop) {
                      this.$backdrop.removeClass('bk-bs-in')
                
                      $.support.transition && this.$element.hasClass('bk-bs-fade') ?
                        this.$backdrop
                          .one($.support.transition.end, callback)
                          .emulateTransitionEnd(150) :
                        callback()
                
                    } else if (callback) {
                      callback()
                    }
                  }
                
                
                  // MODAL PLUGIN DEFINITION
                  // =======================
                
                  var old = $.fn.modal
                
                  $.fn.modal = function (option, _relatedTarget) {
                    return this.each(function () {
                      var $this   = $(this)
                      var data    = $this.data('bk-bs.modal')
                      var options = $.extend({}, Modal.DEFAULTS, $this.data(), typeof option == 'object' && option)
                
                      if (!data) $this.data('bk-bs.modal', (data = new Modal(this, options)))
                      if (typeof option == 'string') data[option](_relatedTarget)
                      else if (options.show) data.show(_relatedTarget)
                    })
                  }
                
                  $.fn.modal.Constructor = Modal
                
                
                  // MODAL NO CONFLICT
                  // =================
                
                  $.fn.modal.noConflict = function () {
                    $.fn.modal = old
                    return this
                  }
                
                
                  // MODAL DATA-API
                  // ==============
                
                  $(document).on('click.bk-bs.modal.data-api', '[data-bk-bs-toggle="modal"]', function (e) {
                    var $this   = $(this)
                    var href    = $this.attr('href')
                    var $target = $($this.attr('data-bk-bs-target') || (href && href.replace(/.*(?=#[^\s]+$)/, ''))) //strip for ie7
                    var option  = $target.data('bk-bs.modal') ? 'toggle' : $.extend({ remote: !/#/.test(href) && href }, $target.data(), $this.data())
                
                    if ($this.is('a')) e.preventDefault()
                
                    $target
                      .modal(option, this)
                      .one('hide', function () {
                        $this.is(':visible') && $this.focus()
                      })
                  })
                
                  $(document)
                    .on('show.bk-bs.modal', '.bk-bs-modal', function () { $(document.body).addClass('bk-bs-modal-open') })
                    .on('hidden.bk-bs.modal', '.bk-bs-modal', function () { $(document.body).removeClass('bk-bs-modal-open') })
                
                }(jQuery);
                
                });
                
                define('tool/embed_tool_template',[],function(){
                  var template = function(__obj) {
                  var _safe = function(value) {
                    if (typeof value === 'undefined' && value == null)
                      value = '';
                    var result = new String(value);
                    result.ecoSafe = true;
                    return result;
                  };
                  return (function() {
                    var __out = [], __self = this, _print = function(value) {
                      if (typeof value !== 'undefined' && value != null)
                        __out.push(value.ecoSafe ? value : __self.escape(value));
                    }, _capture = function(callback) {
                      var out = __out, result;
                      __out = [];
                      callback.call(this);
                      result = __out.join('');
                      __out = out;
                      return _safe(result);
                    };
                    (function() {
                      _print(_safe('<div class="bk-bs-modal" tabindex="-1">\n  <div class="bk-bs-modal-dialog">\n    <div class="bk-bs-modal-content">\n      <div class="bk-bs-modal-header">\n        <button type="button" class="bk-bs-close" data-bk-bs-dismiss="modal">&times;</button>\n        <h4 class="bk-bs-modal-title">HTML Embed code</h4>\n      </div>\n      <div class="bk-bs-modal-body">\n        '));
                    
                      _print(this.script_inject_escaped);
                    
                      _print(_safe('\n      </div>\n      <div class="bk-bs-modal-footer">\n        <button type="button" class="bk-bs-btn bk-bs-btn-primary" data-bk-bs-dismiss="modal">Close</button>\n      </div>\n    </div>\n  </div>\n</div>\n'));
                    
                    }).call(this);
                    
                    return __out.join('');
                  }).call((function() {
                    var obj = {
                      escape: function(value) {
                        return ('' + value)
                          .replace(/&/g, '&amp;')
                          .replace(/</g, '&lt;')
                          .replace(/>/g, '&gt;')
                          .replace(/"/g, '&quot;');
                      },
                      safe: _safe
                    }, key;
                    for (key in __obj) obj[key] = __obj[key];
                    return obj;
                  })());
                };
                  return template;
                });
                
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('tool/embed_tool',["underscore", "jquery", "bootstrap/modal", "backbone", "./tool", "./event_generators", "./embed_tool_template"], function(_, $, $$1, Backbone, Tool, EventGenerators, embed_tool_template) {
                    var ButtonEventGenerator, EmbedTool, EmbedToolView, EmbedTools, escapeHTML, _ref, _ref1, _ref2;
                    ButtonEventGenerator = EventGenerators.ButtonEventGenerator;
                    escapeHTML = function(unsafe_str) {
                      return unsafe_str.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;').replace(/\'/g, '&#39;');
                    };
                    EmbedToolView = (function(_super) {
                      __extends(EmbedToolView, _super);
                
                      function EmbedToolView() {
                        _ref = EmbedToolView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      EmbedToolView.prototype.initialize = function(options) {
                        return EmbedToolView.__super__.initialize.call(this, options);
                      };
                
                      EmbedToolView.prototype.eventGeneratorClass = ButtonEventGenerator;
                
                      EmbedToolView.prototype.evgen_options = {
                        buttonText: "Embed Html"
                      };
                
                      EmbedToolView.prototype.toolType = "EmbedTool";
                
                      EmbedToolView.prototype.tool_events = {
                        activated: "_activated",
                        deactivated: "_close_modal"
                      };
                
                      EmbedToolView.prototype._activated = function(e) {
                        var baseurl, doc_apikey, doc_id, model_id, script_inject_escaped,
                          _this = this;
                        console.log("EmbedToolView._activated");
                        window.tool_view = this;
                        model_id = this.plot_model.get('id');
                        doc_id = this.plot_model.get('doc');
                        doc_apikey = this.plot_model.get('docapikey');
                        baseurl = this.plot_model.get('baseurl');
                        script_inject_escaped = escapeHTML(this.plot_model.get('script_inject_snippet'));
                        this.$modal = $(embed_tool_template({
                          script_inject_escaped: script_inject_escaped
                        }));
                        $('body').append(this.$modal);
                        this.$modal.on('hidden', function() {
                          return _this.plot_view.eventSink.trigger("clear_active_tool");
                        });
                        return this.$modal.modal({
                          show: true
                        });
                      };
                
                      EmbedToolView.prototype._close_modal = function() {
                        return this.$modal.remove();
                      };
                
                      return EmbedToolView;
                
                    })(Tool.View);
                    EmbedTool = (function(_super) {
                      __extends(EmbedTool, _super);
                
                      function EmbedTool() {
                        _ref1 = EmbedTool.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      EmbedTool.prototype.default_view = EmbedToolView;
                
                      EmbedTool.prototype.type = "EmbedTool";
                
                      return EmbedTool;
                
                    })(Tool.Model);
                    EmbedTools = (function(_super) {
                      __extends(EmbedTools, _super);
                
                      function EmbedTools() {
                        _ref2 = EmbedTools.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      EmbedTools.prototype.model = EmbedTool;
                
                      EmbedTools.prototype.display_defaults = function() {
                        return EmbedTools.__super__.display_defaults.call(this);
                      };
                
                      return EmbedTools;
                
                    })(Backbone.Collection);
                    return {
                      Model: EmbedTool,
                      Collection: new EmbedTools(),
                      View: EmbedToolView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=embed_tool.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('tool/hover_tool',["underscore", "backbone", "sprintf", "./tool"], function(_, Backbone, sprintf, Tool) {
                    var HoverTool, HoverToolView, HoverTools, _color_to_hex, _format_number, _ref, _ref1, _ref2;
                    _color_to_hex = function(color) {
                      var blue, digits, green, red, rgb;
                      if (color.substr(0, 1) === '#') {
                        return color;
                      }
                      digits = /(.*?)rgb\((\d+), (\d+), (\d+)\)/.exec(color);
                      red = parseInt(digits[2]);
                      green = parseInt(digits[3]);
                      blue = parseInt(digits[4]);
                      rgb = blue | (green << 8) | (red << 16);
                      return digits[1] + '#' + rgb.toString(16);
                    };
                    _format_number = function(number) {
                      if (typeof number === "string") {
                        return number;
                      }
                      if (Math.floor(number) === number) {
                        return sprintf("%d", number);
                      }
                      if (Math.abs(number) > 0.1 && Math.abs(number) < 1000) {
                        return sprintf("%0.3f", number);
                      }
                      return sprintf("%0.3e", number);
                    };
                    HoverToolView = (function(_super) {
                      __extends(HoverToolView, _super);
                
                      function HoverToolView() {
                        _ref = HoverToolView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      HoverToolView.prototype.initialize = function(options) {
                        HoverToolView.__super__.initialize.call(this, options);
                        this.div = $('<div class="bokeh_tooltip" />').appendTo('body');
                        this.div.hide();
                        return this.active = false;
                      };
                
                      HoverToolView.prototype.bind_bokeh_events = function() {
                        var tool_name,
                          _this = this;
                        tool_name = "hover_tool";
                        if (!this.mget('always_active')) {
                          this.tool_button = $("<button class='bk-toolbar-button'> Hover </button>");
                          this.plot_view.$el.find('.bk-button-bar').append(this.tool_button);
                          this.tool_button.click(function() {
                            if (_this.active) {
                              return _this.plot_view.eventSink.trigger("clear_active_tool");
                            } else {
                              return _this.plot_view.eventSink.trigger("active_tool", tool_name);
                            }
                          });
                          this.plot_view.eventSink.on("" + tool_name + ":deactivated", function() {
                            _this.active = false;
                            _this.tool_button.removeClass('active');
                            return _this.div.hide();
                          });
                          this.plot_view.eventSink.on("" + tool_name + ":activated", function() {
                            _this.active = true;
                            return _this.tool_button.addClass('active');
                          });
                        }
                        this.plot_view.canvas_view.canvas.bind("mousemove", function(e) {
                          var irh, irv, left, offset, top, vx, vy, xend, xstart, yend, ystart, _ref1;
                          if (!_this.active && !_this.mget('always_active')) {
                            return;
                          }
                          offset = $(e.currentTarget).offset();
                          left = offset != null ? offset.left : 0;
                          top = offset != null ? offset.top : 0;
                          e.bokehX = e.pageX - left;
                          e.bokehY = e.pageY - top;
                          _ref1 = _this.view_coords(e.bokehX, e.bokehY), vx = _ref1[0], vy = _ref1[1];
                          irh = _this.plot_view.frame.get('h_range');
                          irv = _this.plot_view.frame.get('v_range');
                          xstart = irh.get('start');
                          xend = irh.get('end');
                          ystart = irv.get('start');
                          yend = irv.get('end');
                          if (vx < xstart || vx > xend || vy < ystart || vy > yend) {
                            _this.div.hide();
                            return;
                          }
                          return _this._select(vx, vy, e);
                        });
                        return this.plot_view.canvas_view.canvas_wrapper.css('cursor', 'crosshair');
                      };
                
                      HoverToolView.prototype.view_coords = function(sx, sy) {
                        var vx, vy, _ref1;
                        _ref1 = [this.plot_view.canvas.sx_to_vx(sx), this.plot_view.canvas.sy_to_vy(sy)], vx = _ref1[0], vy = _ref1[1];
                        return [vx, vy];
                      };
                
                      HoverToolView.prototype._select = function(vx, vy, e) {
                        var colname, color, column, column_name, datasource, datasource_id, datasource_selections, datasources, ds, dsvalue, geometry, hex, i, label, match, opts, ow, renderer, row, selected, span, swatch, table, td, unused, value, x, y, _i, _j, _len, _len1, _ref1, _ref2, _ref3, _ref4, _ref5;
                        geometry = {
                          type: 'point',
                          vx: vx,
                          vy: vy
                        };
                        x = this.plot_view.xmapper.map_from_target(vx);
                        y = this.plot_view.ymapper.map_from_target(vy);
                        datasources = {};
                        datasource_selections = {};
                        _ref1 = this.mget('renderers');
                        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
                          renderer = _ref1[_i];
                          datasource = renderer.get('data_source');
                          datasources[datasource.id] = datasource;
                        }
                        _ref2 = this.mget('renderers');
                        for (_j = 0, _len1 = _ref2.length; _j < _len1; _j++) {
                          renderer = _ref2[_j];
                          datasource_id = renderer.get('data_source').id;
                          _.setdefault(datasource_selections, datasource_id, []);
                          selected = this.plot_view.renderers[renderer.id].hit_test(geometry);
                          ds = datasources[datasource_id];
                          if (selected === null) {
                            continue;
                          }
                          if (selected.length > 0) {
                            i = selected[0];
                            this.div.empty();
                            table = $('<table></table>');
                            _ref3 = this.mget("tooltips");
                            for (label in _ref3) {
                              value = _ref3[label];
                              row = $("<tr></tr>");
                              row.append($("<td class='bokeh_tooltip_row_label'>" + label + ": </td>"));
                              td = $("<td class='bokeh_tooltip_row_value'></td>");
                              if (value.indexOf("$color") >= 0) {
                                _ref4 = value.match(/\$color(\[.*\])?:(\w*)/), match = _ref4[0], opts = _ref4[1], colname = _ref4[2];
                                column = ds.getcolumn(colname);
                                if (column == null) {
                                  span = $("<span>" + colname + " unknown</span>");
                                  td.append(span);
                                  continue;
                                }
                                hex = (opts != null ? opts.indexOf("hex") : void 0) >= 0;
                                swatch = (opts != null ? opts.indexOf("swatch") : void 0) >= 0;
                                color = column[i];
                                if (color == null) {
                                  span = $("<span>(null)</span>");
                                  td.append(span);
                                  continue;
                                }
                                if (hex) {
                                  color = _color_to_hex(color);
                                }
                                span = $("<span>" + color + "</span>");
                                td.append(span);
                                if (swatch) {
                                  span = $("<span class='bokeh_tooltip_color_block'> </span>");
                                  span.css({
                                    backgroundColor: color
                                  });
                                }
                                td.append(span);
                              } else {
                                value = value.replace("$index", "" + i);
                                value = value.replace("$x", "" + (_format_number(x)));
                                value = value.replace("$y", "" + (_format_number(y)));
                                value = value.replace("$vx", "" + vx);
                                value = value.replace("$vy", "" + vy);
                                value = value.replace("$sx", "" + e.bokehX);
                                value = value.replace("$sy", "" + e.bokehY);
                                while (value.indexOf("@") >= 0) {
                                  _ref5 = value.match(/(@)(\w*)/), match = _ref5[0], unused = _ref5[1], column_name = _ref5[2];
                                  column = ds.getcolumn(column_name);
                                  if (column == null) {
                                    value = value.replace(column_name, "" + column_name + " unknown");
                                    break;
                                  }
                                  column = ds.getcolumn(column_name);
                                  dsvalue = column[i];
                                  if (typeof dsvalue === "number") {
                                    value = value.replace(match, "" + (_format_number(dsvalue)));
                                  } else {
                                    value = value.replace(match, "" + dsvalue);
                                  }
                                }
                                span = $("<span>" + value + "</span>");
                                td.append(span);
                              }
                              row.append(td);
                              table.append(row);
                            }
                            this.div.append(table);
                            ow = this.plot_view.frame.get('width');
                            if (vx < ow / 2) {
                              this.div.removeClass('right');
                              this.div.addClass('left');
                              this.div.css({
                                top: e.pageY - this.div.height() / 2,
                                left: e.pageX + 18
                              });
                            } else {
                              this.div.removeClass('left');
                              this.div.addClass('right');
                              this.div.css({
                                top: e.pageY - this.div.height() / 2,
                                left: e.pageX - this.div.width() - 23
                              });
                            }
                            this.div.show();
                            break;
                          } else {
                            this.div.hide();
                          }
                          datasource_selections[datasource_id].push(selected);
                        }
                        return null;
                      };
                
                      return HoverToolView;
                
                    })(Tool.View);
                    HoverTool = (function(_super) {
                      __extends(HoverTool, _super);
                
                      function HoverTool() {
                        _ref1 = HoverTool.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      HoverTool.prototype.default_view = HoverToolView;
                
                      HoverTool.prototype.type = "HoverTool";
                
                      HoverTool.prototype.initialize = function(attrs, options) {
                        var all_renderers, names, r, renderers;
                        HoverTool.__super__.initialize.call(this, attrs, options);
                        names = this.get('names');
                        all_renderers = this.get('plot').get('renderers');
                        renderers = (function() {
                          var _i, _len, _results;
                          _results = [];
                          for (_i = 0, _len = all_renderers.length; _i < _len; _i++) {
                            r = all_renderers[_i];
                            if (r.type === "Glyph") {
                              _results.push(r);
                            }
                          }
                          return _results;
                        })();
                        if (names.length > 0) {
                          renderers = (function() {
                            var _i, _len, _results;
                            _results = [];
                            for (_i = 0, _len = renderers.length; _i < _len; _i++) {
                              r = renderers[_i];
                              if (names.indexOf(r.get('name')) >= 0) {
                                _results.push(r);
                              }
                            }
                            return _results;
                          })();
                        }
                        return this.set('renderers', renderers);
                      };
                
                      HoverTool.prototype.defaults = function() {
                        return _.extend(HoverTool.__super__.defaults.call(this), {
                          renderers: [],
                          names: [],
                          tooltips: {
                            "index": "$index",
                            "data (x, y)": "($x, $y)",
                            "canvas (x, y)": "($sx, $sy)"
                          }
                        });
                      };
                
                      HoverTool.prototype.display_defaults = function() {
                        return HoverTool.__super__.display_defaults.call(this);
                      };
                
                      return HoverTool;
                
                    })(Tool.Model);
                    HoverTools = (function(_super) {
                      __extends(HoverTools, _super);
                
                      function HoverTools() {
                        _ref2 = HoverTools.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      HoverTools.prototype.model = HoverTool;
                
                      return HoverTools;
                
                    })(Backbone.Collection);
                    return {
                      "Model": HoverTool,
                      "Collection": new HoverTools(),
                      "View": HoverToolView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=hover_tool.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('tool/pan_tool',["underscore", "backbone", "./tool", "./event_generators"], function(_, Backbone, Tool, EventGenerators) {
                    var PanTool, PanToolView, PanTools, TwoPointEventGenerator, _ref, _ref1, _ref2;
                    TwoPointEventGenerator = EventGenerators.TwoPointEventGenerator;
                    window.render_count = 0;
                    PanToolView = (function(_super) {
                      __extends(PanToolView, _super);
                
                      function PanToolView() {
                        _ref = PanToolView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      PanToolView.prototype.initialize = function(options) {
                        var dims;
                        PanToolView.__super__.initialize.call(this, options);
                        dims = this.mget('dimensions');
                        if (dims.length === 0) {
                          return console.log("WARN: pan tool given empty dimensions");
                        } else if (dims.length === 1) {
                          if (dims[0] === 'width') {
                            return this.evgen_options.buttonText = "Pan (x-axis)";
                          } else if (dims[0] === 'height') {
                            return this.evgen_options.buttonText = "Pan (y-axis)";
                          } else {
                            return console.log("WARN: pan tool given unrecognized dimensions: " + dims);
                          }
                        } else if (dims.length === 2) {
                          if (dims.indexOf('width') < 0 || dims.indexOf('height') < 0) {
                            return console.log("WARN: pan tool given unrecognized dimensions: " + dims);
                          }
                        } else {
                          return console.log("WARN: pan tool given more than two dimensions: " + dims);
                        }
                      };
                
                      PanToolView.prototype.bind_bokeh_events = function() {
                        return PanToolView.__super__.bind_bokeh_events.call(this);
                      };
                
                      PanToolView.prototype.eventGeneratorClass = TwoPointEventGenerator;
                
                      PanToolView.prototype.toolType = "PanTool";
                
                      PanToolView.prototype.evgen_options = {
                        keyName: null,
                        buttonText: "Pan",
                        buttonIcon: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNui8sowAAAEwSURBVEiJ5ZbtUcMwDIZfcR0gGxAmICNkhI5QJiEb9DpB2QA2KBskG8AGZYOHH3XAl+bDjpMed7y/fD5Jj2VJTgToFgIE6G6mc55EjrTPgA9gH8sB4oAOVvOr3drAI9cqVwEC+x4YwDmkprMydI5lS4r0m9+lKfqnQGCbEhTIB2P4tffm7DQSbLJpPJvK5wDaeBuFpJOkTFIzMl+FH3jC5hl4lPQk6csnbwdmbCnV3bF4l/Q2dEUL6PCz6tSwcidaqoZnV6r+wTezSv59p6mR9GBmTfc0fSfMhqIEZnjl35thKzNLynDM/2+8NGtqM21yEZevey7p3tur3PLFzD5DA4XaFa7Nu3oN5TDjF6PswOqxjk4GOsedN9RBsCSgc67aFyQWaIDMLBoaC2t187H4BqwdDXMWZF/nAAAAAElFTkSuQmCC",
                        cursor: "move",
                        auto_deactivate: true,
                        restrict_to_innercanvas: true
                      };
                
                      PanToolView.prototype.tool_events = {
                        UpdatingMouseMove: "_drag",
                        SetBasepoint: "_set_base_point"
                      };
                
                      PanToolView.prototype.mouse_coords = function(e, x, y) {
                        var x_, y_, _ref1;
                        _ref1 = [this.plot_view.canvas.sx_to_vx(x), this.plot_view.canvas.sy_to_vy(y)], x_ = _ref1[0], y_ = _ref1[1];
                        return [x_, y_];
                      };
                
                      PanToolView.prototype._set_base_point = function(e) {
                        var _ref1;
                        _ref1 = this.mouse_coords(e, e.bokehX, e.bokehY), this.x = _ref1[0], this.y = _ref1[1];
                        return null;
                      };
                
                      PanToolView.prototype._drag = function(e) {
                        var dims, pan_info, sdx, sdy, sx_high, sx_low, sy_high, sy_low, x, xdiff, xend, xr, xstart, y, ydiff, yend, yr, ystart, _ref1, _ref2;
                        _ref1 = this.mouse_coords(e, e.bokehX, e.bokehY), x = _ref1[0], y = _ref1[1];
                        xdiff = x - this.x;
                        ydiff = y - this.y;
                        _ref2 = [x, y], this.x = _ref2[0], this.y = _ref2[1];
                        xr = this.plot_view.frame.get('h_range');
                        sx_low = xr.get('start') - xdiff;
                        sx_high = xr.get('end') - xdiff;
                        yr = this.plot_view.frame.get('v_range');
                        sy_low = yr.get('start') - ydiff;
                        sy_high = yr.get('end') - ydiff;
                        dims = this.mget('dimensions');
                        if (dims.indexOf('width') > -1) {
                          xstart = this.plot_view.xmapper.map_from_target(sx_low);
                          xend = this.plot_view.xmapper.map_from_target(sx_high);
                          sdx = -xdiff;
                        } else {
                          xstart = this.plot_view.xmapper.map_from_target(xr.get('start'));
                          xend = this.plot_view.xmapper.map_from_target(xr.get('end'));
                          sdx = 0;
                        }
                        if (dims.indexOf('height') > -1) {
                          ystart = this.plot_view.ymapper.map_from_target(sy_low);
                          yend = this.plot_view.ymapper.map_from_target(sy_high);
                          sdy = ydiff;
                        } else {
                          ystart = this.plot_view.ymapper.map_from_target(yr.get('start'));
                          yend = this.plot_view.ymapper.map_from_target(yr.get('end'));
                          sdy = 0;
                        }
                        pan_info = {
                          xr: {
                            start: xstart,
                            end: xend
                          },
                          yr: {
                            start: ystart,
                            end: yend
                          },
                          sdx: sdx,
                          sdy: sdy
                        };
                        this.plot_view.update_range(pan_info);
                        return null;
                      };
                
                      return PanToolView;
                
                    })(Tool.View);
                    PanTool = (function(_super) {
                      __extends(PanTool, _super);
                
                      function PanTool() {
                        _ref1 = PanTool.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      PanTool.prototype.default_view = PanToolView;
                
                      PanTool.prototype.type = "PanTool";
                
                      PanTool.prototype.defaults = function() {
                        return {
                          dimensions: ["width", "height"]
                        };
                      };
                
                      PanTool.prototype.display_defaults = function() {
                        return PanTool.__super__.display_defaults.call(this);
                      };
                
                      return PanTool;
                
                    })(Tool.Model);
                    PanTools = (function(_super) {
                      __extends(PanTools, _super);
                
                      function PanTools() {
                        _ref2 = PanTools.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      PanTools.prototype.model = PanTool;
                
                      return PanTools;
                
                    })(Backbone.Collection);
                    return {
                      "Model": PanTool,
                      "Collection": new PanTools(),
                      "View": PanToolView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=pan_tool.js.map
                */;
                (function() {
                  define('common/load_models',["require", "./base"], function(require, base) {
                    var load_models;
                    return load_models = function(modelspecs) {
                      var Collections, attrs, coll, coll_attrs, model, newspecs, oldspecs, _i, _j, _k, _l, _len, _len1, _len2, _len3, _len4, _m;
                      newspecs = [];
                      oldspecs = [];
                      Collections = require("./base").Collections;
                      for (_i = 0, _len = modelspecs.length; _i < _len; _i++) {
                        model = modelspecs[_i];
                        coll = Collections(model['type']);
                        attrs = model['attributes'];
                        if (coll && coll.get(attrs['id'])) {
                          oldspecs.push([coll, attrs]);
                        } else {
                          newspecs.push([coll, attrs]);
                        }
                      }
                      for (_j = 0, _len1 = newspecs.length; _j < _len1; _j++) {
                        coll_attrs = newspecs[_j];
                        coll = coll_attrs[0], attrs = coll_attrs[1];
                        if (coll) {
                          coll.add(attrs, {
                            'silent': true,
                            'defer_initialization': true
                          });
                        }
                      }
                      for (_k = 0, _len2 = newspecs.length; _k < _len2; _k++) {
                        coll_attrs = newspecs[_k];
                        coll = coll_attrs[0], attrs = coll_attrs[1];
                        if (coll) {
                          coll.get(attrs['id']).initialize(attrs);
                        }
                      }
                      for (_l = 0, _len3 = newspecs.length; _l < _len3; _l++) {
                        coll_attrs = newspecs[_l];
                        coll = coll_attrs[0], attrs = coll_attrs[1];
                        if (coll) {
                          model = coll.get(attrs.id);
                          model.trigger('add', model, coll, {});
                        }
                      }
                      for (_m = 0, _len4 = oldspecs.length; _m < _len4; _m++) {
                        coll_attrs = oldspecs[_m];
                        coll = coll_attrs[0], attrs = coll_attrs[1];
                        if (coll) {
                          coll.get(attrs['id']).set(attrs);
                        }
                      }
                      return null;
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=load_models.js.map
                */;
                (function() {
                  define('common/bulk_save',["underscore", "jquery", "require", "./base", "./load_models"], function(_, $, require, base, load_models) {
                    var bulk_save;
                    return bulk_save = function(models) {
                      var Config, doc, jsondata, m, url, xhr;
                      Config = require("./base").Config;
                      doc = models[0].get('doc');
                      if (doc == null) {
                        throw new Error("Unset 'doc' in " + models[0]);
                      }
                      jsondata = (function() {
                        var _i, _len, _results;
                        _results = [];
                        for (_i = 0, _len = models.length; _i < _len; _i++) {
                          m = models[_i];
                          _results.push({
                            type: m.type,
                            attributes: _.clone(m.attributes)
                          });
                        }
                        return _results;
                      })();
                      jsondata = JSON.stringify(jsondata);
                      url = Config.prefix + "bokeh/bb/" + doc + "/bulkupsert";
                      xhr = $.ajax({
                        type: 'POST',
                        url: url,
                        contentType: "application/json",
                        data: jsondata,
                        header: {
                          client: "javascript"
                        }
                      });
                      xhr.done(function(data) {
                        return load_models(data.modelspecs);
                      });
                      return xhr;
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=bulk_save.js.map
                */;
                define('tool/preview_save_tool_template',[],function(){
                  var template = function(__obj) {
                  var _safe = function(value) {
                    if (typeof value === 'undefined' && value == null)
                      value = '';
                    var result = new String(value);
                    result.ecoSafe = true;
                    return result;
                  };
                  return (function() {
                    var __out = [], __self = this, _print = function(value) {
                      if (typeof value !== 'undefined' && value != null)
                        __out.push(value.ecoSafe ? value : __self.escape(value));
                    }, _capture = function(callback) {
                      var out = __out, result;
                      __out = [];
                      callback.call(this);
                      result = __out.join('');
                      __out = out;
                      return _safe(result);
                    };
                    (function() {
                      _print(_safe('<div class="bk-bs-modal" tabindex="-1">\n  <div class="bk-bs-modal-dialog">\n    <div class="bk-bs-modal-content">\n      <div class="bk-bs-modal-header">\n        <button type="button" class="bk-bs-close" data-bk-bs-dismiss="modal">&times;</button>\n        <h4 class="bk-bs-modal-title">Image Preview (right click -> \'Save As\' to save PNG)</h4>\n      </div>\n      <div class="bk-bs-modal-body">\n        <img src="'));
                    
                      _print(this.data_uri);
                    
                      _print(_safe('" style="max-height: 300px; max-width: 400px">\n      </div>\n      <div class="bk-bs-modal-footer">\n        <button type="button" class="bk-bs-btn bk-bs-btn-primary" data-bk-bs-dismiss="modal">Close</button>\n      </div>\n    </div>\n  </div>\n</div>\n'));
                    
                    }).call(this);
                    
                    return __out.join('');
                  }).call((function() {
                    var obj = {
                      escape: function(value) {
                        return ('' + value)
                          .replace(/&/g, '&amp;')
                          .replace(/</g, '&lt;')
                          .replace(/>/g, '&gt;')
                          .replace(/"/g, '&quot;');
                      },
                      safe: _safe
                    }, key;
                    for (key in __obj) obj[key] = __obj[key];
                    return obj;
                  })());
                };
                  return template;
                });
                
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('tool/preview_save_tool',["underscore", "jquery", "bootstrap/modal", "backbone", "common/bulk_save", "./tool", "./event_generators", "./preview_save_tool_template"], function(_, $, $$1, Backbone, bulk_save, Tool, EventGenerators, preview_save_tool_template) {
                    var ButtonEventGenerator, PreviewSaveTool, PreviewSaveToolView, PreviewSaveTools, _ref, _ref1, _ref2;
                    ButtonEventGenerator = EventGenerators.ButtonEventGenerator;
                    PreviewSaveToolView = (function(_super) {
                      __extends(PreviewSaveToolView, _super);
                
                      function PreviewSaveToolView() {
                        _ref = PreviewSaveToolView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      PreviewSaveToolView.prototype.initialize = function(options) {
                        return PreviewSaveToolView.__super__.initialize.call(this, options);
                      };
                
                      PreviewSaveToolView.prototype.eventGeneratorClass = ButtonEventGenerator;
                
                      PreviewSaveToolView.prototype.evgen_options = {
                        buttonText: "Preview/Save",
                        buttonIcon: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNui8sowAAAE4SURBVEiJ5ZbhTcMwEIW/h/hPN6AbUCagbNANKJNQJqiYgI7SbpARygRNJ3j8iFOq1E6s0BSpPClK4rPv+XzvbMs2l8TNRdn+gvA20jYCHvo4k7RJ2Q6ps918CvfHzvYsRWgbRURj4AtYAVPgKTL+AyjD94xqRTbABLgDXiWtciO07XWwLWJhNBzVfaa2J7bL8D+PRXhW0UgqqFZlD3w2SWEAlXaRDlIWDdKl7dGvCI8dUJVRinQR7AflxurwGGWifZe5JRbhPc4lXFFJfdzejULSOmcGrYSSSmCe4ygX/3PzPiCocUl3Dpt4T+W0SzRz+uVQVHV4gq4lrWvsWZnomsn1i+b6CVMqvbf9xs9p/2I7dvKnUI8fNw2xK0ZBz0tUCx6D31NCSdienpFsK2lb88QiHBQXF803MWL34Bj7qCQAAAAASUVORK5CYII="
                      };
                
                      PreviewSaveToolView.prototype.toolType = "PreviewSaveTool";
                
                      PreviewSaveToolView.prototype.tool_events = {
                        activated: "_activated",
                        deactivated: "_close_modal"
                      };
                
                      PreviewSaveToolView.prototype._activated = function(e) {
                        var data_uri,
                          _this = this;
                        data_uri = this.plot_view.canvas_view.canvas[0].toDataURL();
                        this.plot_model.set('png', this.plot_view.canvas_view.canvas[0].toDataURL());
                        this.$modal = $(preview_save_tool_template({
                          data_uri: data_uri
                        }));
                        $('body').append(this.$modal);
                        this.$modal.on('hidden', function() {
                          return _this.plot_view.eventSink.trigger("clear_active_tool");
                        });
                        return this.$modal.modal({
                          show: true
                        });
                      };
                
                      PreviewSaveToolView.prototype._close_modal = function() {
                        return this.$modal.remove();
                      };
                
                      return PreviewSaveToolView;
                
                    })(Tool.View);
                    PreviewSaveTool = (function(_super) {
                      __extends(PreviewSaveTool, _super);
                
                      function PreviewSaveTool() {
                        _ref1 = PreviewSaveTool.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      PreviewSaveTool.prototype.default_view = PreviewSaveToolView;
                
                      PreviewSaveTool.prototype.type = "PreviewSaveTool";
                
                      PreviewSaveTool.prototype.display_defaults = function() {
                        return PreviewSaveTool.__super__.display_defaults.call(this);
                      };
                
                      return PreviewSaveTool;
                
                    })(Tool.Model);
                    PreviewSaveTools = (function(_super) {
                      __extends(PreviewSaveTools, _super);
                
                      function PreviewSaveTools() {
                        _ref2 = PreviewSaveTools.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      PreviewSaveTools.prototype.model = PreviewSaveTool;
                
                      return PreviewSaveTools;
                
                    })(Backbone.Collection);
                    return {
                      Model: PreviewSaveTool,
                      Collection: new PreviewSaveTools(),
                      View: PreviewSaveToolView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=preview_save_tool.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('tool/reset_tool',["underscore", "backbone", "./tool", "./event_generators"], function(_, Backbone, Tool, EventGenerators) {
                    var ButtonEventGenerator, ResetTool, ResetToolView, ResetTools, _ref, _ref1, _ref2;
                    ButtonEventGenerator = EventGenerators.ButtonEventGenerator;
                    ResetToolView = (function(_super) {
                      __extends(ResetToolView, _super);
                
                      function ResetToolView() {
                        _ref = ResetToolView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      ResetToolView.prototype.initialize = function(options) {
                        return ResetToolView.__super__.initialize.call(this, options);
                      };
                
                      ResetToolView.prototype.eventGeneratorClass = ButtonEventGenerator;
                
                      ResetToolView.prototype.evgen_options = {
                        buttonText: "Reset View",
                        buttonIcon: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNui8sowAAAJASURBVEiJ3Za9axVBEMB/K3nRSBqLoEkhIY36ED8wgp02FsaPwsrSIiAYSOVLQCG9liqCqPgPSAqJWGhjkZhKNCZYKoIYsLIxHybvZ3EbuVzu7r2nUcGBKXZvZn47uzc7G1T+pmz5q7R/AWxLD0IIuUZqBegGTgKHgUPAMvAGeA+MA/MhhJWMX26wn1oA61cfqKsWy6p6X63mxO5MM0IalM1QHQauA9vi1IuY0Yc41wXsjpkDLAEjIYSb0f80cA641DBDdSyVwSP1lNpesAsD6kTK/ppaU1fUuXWMPKA6lHKuFYEy0A71as52T5YC1aq6HI2vNAJloIMp3zWZKgTW6/WgPoyG4+rWJkG96tPoVy8DrqvDEMJ+4CLJL38rhLDUZHLHgB3ACpBfW6nVpXWvOqM+N6m9lkQ9q95TF1s5w261r1VYBtyvjqjz6mwpcDNF7VGPFgLjx55NBG7Q7MSs+tmk9o78JqwaMywFTqYO+1v8Ac78AqyiTqtv1T1lwCk3ynf1pXqhBeCJuGDVA4V1mOdL0sK+AtNNwjqBUaADuAPMZA3KMlxWB5vNLMarRd8FdV/2DNuy9plxBehSO0IICw1A24Eh4Eacugy8yzNM65xJS6mZtJg1mVAHCkAVk9aVbk9jObE3NmDgLvA4hPAkOgzHFa9d4s+Aj8CXON4F9ALHSe7QRWA01YBzV5jWzpzvVRs/MerqbbW/JHbjJ0Z624CdwHmgDzgItAOvgVcx808hhNUsMCvZLf3j8v8/hH8At02YtB91tJYAAAAASUVORK5CYII="
                      };
                
                      ResetToolView.prototype.toolType = "ResetTool";
                
                      ResetToolView.prototype.tool_events = {
                        activated: "_activated"
                      };
                
                      ResetToolView.prototype._activated = function(e) {
                        var _this = this;
                        this.plot_view.update_range();
                        return _.delay((function() {
                          return _this.plot_view.eventSink.trigger("clear_active_tool");
                        }), 100);
                      };
                
                      return ResetToolView;
                
                    })(Tool.View);
                    ResetTool = (function(_super) {
                      __extends(ResetTool, _super);
                
                      function ResetTool() {
                        _ref1 = ResetTool.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      ResetTool.prototype.default_view = ResetToolView;
                
                      ResetTool.prototype.type = "ResetTool";
                
                      return ResetTool;
                
                    })(Tool.Model);
                    ResetTools = (function(_super) {
                      __extends(ResetTools, _super);
                
                      function ResetTools() {
                        _ref2 = ResetTools.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      ResetTools.prototype.model = ResetTool;
                
                      ResetTools.prototype.display_defaults = function() {
                        return ResetTools.__super__.display_defaults.call(this);
                      };
                
                      return ResetTools;
                
                    })(Backbone.Collection);
                    return {
                      "Model": ResetTool,
                      "Collection": new ResetTools(),
                      "View": ResetToolView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=reset_tool.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('tool/resize_tool',["underscore", "backbone", "./tool", "./event_generators"], function(_, Backbone, Tool, EventGenerators) {
                    var ResizeTool, ResizeToolView, ResizeTools, TwoPointEventGenerator, _ref, _ref1, _ref2;
                    TwoPointEventGenerator = EventGenerators.TwoPointEventGenerator;
                    ResizeToolView = (function(_super) {
                      __extends(ResizeToolView, _super);
                
                      function ResizeToolView() {
                        _ref = ResizeToolView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      ResizeToolView.prototype.initialize = function(options) {
                        ResizeToolView.__super__.initialize.call(this, options);
                        return this.active = false;
                      };
                
                      ResizeToolView.prototype.bind_events = function(plotview) {
                        return ResizeToolView.__super__.bind_events.call(this, plotview);
                      };
                
                      ResizeToolView.prototype.eventGeneratorClass = TwoPointEventGenerator;
                
                      ResizeToolView.prototype.toolType = "ResizeTool";
                
                      ResizeToolView.prototype.evgen_options = {
                        keyName: "",
                        buttonText: "Resize",
                        buttonIcon: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNui8sowAAAB7SURBVEiJ7ZZLDsAgCESdxvtfmW5aUpAQE6gmhtnpgsdHM4CI2kpdS2k7gF2dub8AEAlMclYcSwPDoG+chykeyQA0sgtx9YWYYVZ1HtSsMJqA16Hzv0UBC1jAAh4IdN0i0RdZosI/AG3G8bOM2Mp/AL5VJi9RLNQinK0b0hcrObYWZu0AAAAASUVORK5CYII=",
                        cursor: "move"
                      };
                
                      ResizeToolView.prototype.tool_events = {
                        activated: "_activate",
                        deactivated: "_deactivate",
                        UpdatingMouseMove: "_drag",
                        SetBasepoint: "_set_base_point"
                      };
                
                      ResizeToolView.prototype.render = function() {
                        var ch, ctx, cw, line_width;
                        if (!this.active) {
                          return;
                        }
                        ctx = this.plot_view.canvas_view.ctx;
                        cw = this.plot_view.canvas.get('width');
                        ch = this.plot_view.canvas.get('height');
                        line_width = 8;
                        ctx.save();
                        ctx.strokeStyle = 'transparent';
                        ctx.globalAlpha = 0.7;
                        ctx.lineWidth = line_width;
                        ctx.setLineDash([]);
                        ctx.beginPath();
                        ctx.rect(line_width, line_width, cw - line_width * 2, ch - line_width * 2);
                        ctx.moveTo(line_width, line_width);
                        ctx.lineTo(cw - line_width, ch - line_width);
                        ctx.moveTo(line_width, ch - line_width);
                        ctx.lineTo(cw - line_width, line_width);
                        ctx.stroke();
                        return ctx.restore();
                      };
                
                      ResizeToolView.prototype.mouse_coords = function(e, x, y) {
                        return [x, y];
                      };
                
                      ResizeToolView.prototype._activate = function(e) {
                        var bbar, ch, cw, plotarea;
                        if (this.active) {
                          return;
                        }
                        this.active = true;
                        this.popup = $('<div class="resize_bokeh_plot pull-right hide"/>');
                        bbar = this.plot_view.$el.find('.bokeh_canvas_wrapper');
                        plotarea = this.plot_view.$el.find('.plotarea');
                        this.popup.appendTo(bbar);
                        ch = this.plot_view.canvas.get('height');
                        cw = this.plot_view.canvas.get('width');
                        this.plot_view.request_render(true);
                        return null;
                      };
                
                      ResizeToolView.prototype._deactivate = function(e) {
                        this.active = false;
                        this.popup.remove();
                        this.request_render();
                        this.plot_view.request_render();
                        return null;
                      };
                
                      ResizeToolView.prototype._set_base_point = function(e) {
                        var _ref1;
                        _ref1 = this.mouse_coords(e, e.bokehX, e.bokehY), this.x = _ref1[0], this.y = _ref1[1];
                        return null;
                      };
                
                      ResizeToolView.prototype._drag = function(e) {
                        var ch, cw, x, xdiff, y, ydiff, _ref1, _ref2;
                        this.plot_view.pause();
                        _ref1 = this.mouse_coords(e, e.bokehX, e.bokehY), x = _ref1[0], y = _ref1[1];
                        xdiff = x - this.x;
                        ydiff = y - this.y;
                        _ref2 = [x, y], this.x = _ref2[0], this.y = _ref2[1];
                        ch = this.plot_view.canvas.get('height');
                        cw = this.plot_view.canvas.get('width');
                        this.plot_view.canvas._set_dims([cw + xdiff, ch + ydiff]);
                        this.plot_view.request_render();
                        this.plot_view.unpause(true);
                        return null;
                      };
                
                      return ResizeToolView;
                
                    })(Tool.View);
                    ResizeTool = (function(_super) {
                      __extends(ResizeTool, _super);
                
                      function ResizeTool() {
                        _ref1 = ResizeTool.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      ResizeTool.prototype.default_view = ResizeToolView;
                
                      ResizeTool.prototype.type = "ResizeTool";
                
                      ResizeTool.prototype.display_defaults = function() {
                        return ResizeTool.__super__.display_defaults.call(this);
                      };
                
                      return ResizeTool;
                
                    })(Tool.Model);
                    ResizeTools = (function(_super) {
                      __extends(ResizeTools, _super);
                
                      function ResizeTools() {
                        _ref2 = ResizeTools.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      ResizeTools.prototype.model = ResizeTool;
                
                      return ResizeTools;
                
                    })(Backbone.Collection);
                    return {
                      "Model": ResizeTool,
                      "Collection": new ResizeTools(),
                      "View": ResizeToolView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=resize_tool.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('tool/wheel_zoom_tool',["underscore", "backbone", "./tool", "./event_generators"], function(_, Backbone, Tool, EventGenerators) {
                    var OnePointWheelEventGenerator, WheelZoomTool, WheelZoomToolView, WheelZoomTools, _ref, _ref1, _ref2;
                    OnePointWheelEventGenerator = EventGenerators.OnePointWheelEventGenerator;
                    WheelZoomToolView = (function(_super) {
                      __extends(WheelZoomToolView, _super);
                
                      function WheelZoomToolView() {
                        _ref = WheelZoomToolView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      WheelZoomToolView.prototype.initialize = function(options) {
                        var dims;
                        WheelZoomToolView.__super__.initialize.call(this, options);
                        dims = this.mget('dimensions');
                        if (dims.length === 0) {
                          return console.log("WARN: wheel zoom tool given empty dimensions");
                        } else if (dims.length === 1) {
                          if (dims[0] === 'width') {
                            return this.evgen_options.buttonText = "Wheel Zoom (x-axis)";
                          } else if (dims[0] === 'height') {
                            return this.evgen_options.buttonText = "Wheel Zoom (y-axis)";
                          } else {
                            return console.log("WARN: wheel tool given unrecognized dimensions: " + dims);
                          }
                        } else if (dims.length === 2) {
                          if (dims.indexOf('width') < 0 || dims.indexOf('height') < 0) {
                            return console.log("WARN: pan tool given unrecognized dimensions: " + dims);
                          }
                        } else {
                          return console.log("WARN: wheel tool given more than two dimensions: " + dims);
                        }
                      };
                
                      WheelZoomToolView.prototype.eventGeneratorClass = OnePointWheelEventGenerator;
                
                      WheelZoomToolView.prototype.evgen_options = {
                        buttonText: "Wheel Zoom",
                        buttonIcon: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNui8sowAAAHFSURBVEiJ7ZbRceIwEIb/vbkCUgIl0EFcAlfBuYOkBHfApALTQUgF0AF0AFcBdPDlwStnsSXD3MA93OSf0ciWdveTrJVkA2RmeqSA/vnHQ0kZfQPvr7igoa0K5enGOBXwzqVOQAvMRkDgCVi60VDvF05j2DLjMwTPe6DDdt5Rx1kBi9A3z8DqEHiX/IEZ0IQJnIBZArYxoDts0qzC+yEDPAXY6PMD82DTJiBAHYLvhkF8xADVYN2SRrMPdk0yill69Hoh6Sxp6/WrJJlZ6o+Be7iZ7UtAjyVJ+jnsMbOVpNWEc/xsx5JRSaN9CLwOMmw54b8PfvWE3Us/wLCGVXBu+0W+HAxAM2jbhCysNNBgAk0W6IZNxjkHjFkI3Z5tvOxCe5eAJWBOOWCAHihrg2f7KGn+Rma2B94kpfXeer2X9GFm6f0+QNdvr9dm9qtkdJfbgu5ESvvzY8o2AidvBb6OrdwGr70+S1pfG508gzZX7NLxlDsvU8K0Od8cMJ2JbSFg2ktNpm8esnFxE9Drhe+ndGk2dPfcoQRzv9b7T1dhCllqZmtgq+7wfvZylvSmLvOOhRh/3G51C9DI/GI8Uv//X9s/B34CxIm8SDsIdkgAAAAASUVORK5CYII="
                      };
                
                      WheelZoomToolView.prototype.tool_events = {
                        zoom: "_zoom"
                      };
                
                      WheelZoomToolView.prototype.mouse_coords = function(e, x, y) {
                        var x_, y_, _ref1;
                        _ref1 = [this.plot_view.canvas.sx_to_vx(x), this.plot_view.canvas.sy_to_vy(y)], x_ = _ref1[0], y_ = _ref1[1];
                        return [x_, y_];
                      };
                
                      WheelZoomToolView.prototype._zoom = function(e) {
                        var delta, dims, factor, multiplier, speed, sx_high, sx_low, sy_high, sy_low, x, xend, xr, xstart, y, yend, yr, ystart, zoom_info, _ref1, _ref2, _ref3, _ref4, _ref5;
                        if (navigator.userAgent.toLowerCase().indexOf("firefox") > -1) {
                          multiplier = 20;
                        } else {
                          multiplier = 1;
                        }
                        if (e.originalEvent.deltaY != null) {
                          delta = -e.originalEvent.deltaY * multiplier;
                        } else {
                          delta = e.delta;
                        }
                        _ref1 = this.mouse_coords(e, e.bokehX, e.bokehY), x = _ref1[0], y = _ref1[1];
                        speed = this.mget('speed');
                        factor = speed * delta;
                        if (factor > 0.9) {
                          factor = 0.9;
                        } else if (factor < -0.9) {
                          factor = -0.9;
                        }
                        xr = this.plot_view.frame.get('h_range');
                        sx_low = xr.get('start');
                        sx_high = xr.get('end');
                        yr = this.plot_view.frame.get('v_range');
                        sy_low = yr.get('start');
                        sy_high = yr.get('end');
                        dims = this.mget('dimensions');
                        if (dims.indexOf('width') > -1) {
                          _ref2 = this.plot_view.xmapper.v_map_from_target([sx_low - (sx_low - x) * factor, sx_high - (sx_high - x) * factor]), xstart = _ref2[0], xend = _ref2[1];
                        } else {
                          _ref3 = this.plot_view.xmapper.v_map_from_target([sx_low, sx_high]), xstart = _ref3[0], xend = _ref3[1];
                        }
                        if (dims.indexOf('height') > -1) {
                          _ref4 = this.plot_view.ymapper.v_map_from_target([sy_low - (sy_low - y) * factor, sy_high - (sy_high - y) * factor]), ystart = _ref4[0], yend = _ref4[1];
                        } else {
                          _ref5 = this.plot_view.ymapper.v_map_from_target([sy_low, sy_high]), ystart = _ref5[0], yend = _ref5[1];
                        }
                        zoom_info = {
                          xr: {
                            start: xstart,
                            end: xend
                          },
                          yr: {
                            start: ystart,
                            end: yend
                          },
                          factor: factor
                        };
                        this.plot_view.update_range(zoom_info);
                        return null;
                      };
                
                      return WheelZoomToolView;
                
                    })(Tool.View);
                    WheelZoomTool = (function(_super) {
                      __extends(WheelZoomTool, _super);
                
                      function WheelZoomTool() {
                        _ref1 = WheelZoomTool.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      WheelZoomTool.prototype.default_view = WheelZoomToolView;
                
                      WheelZoomTool.prototype.type = "WheelZoomTool";
                
                      WheelZoomTool.prototype.defaults = function() {
                        return {
                          dimensions: ["width", "height"],
                          speed: 1 / 600
                        };
                      };
                
                      return WheelZoomTool;
                
                    })(Tool.Model);
                    WheelZoomTools = (function(_super) {
                      __extends(WheelZoomTools, _super);
                
                      function WheelZoomTools() {
                        _ref2 = WheelZoomTools.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      WheelZoomTools.prototype.model = WheelZoomTool;
                
                      WheelZoomTools.prototype.display_defaults = function() {
                        return WheelZoomTools.__super__.display_defaults.call(this);
                      };
                
                      return WheelZoomTools;
                
                    })(Backbone.Collection);
                    return {
                      "Model": WheelZoomTool,
                      "Collection": new WheelZoomTools(),
                      "View": WheelZoomToolView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=wheel_zoom_tool.js.map
                */;
                define('tool/object_explorer_tool_template',[],function(){
                  var template = function(__obj) {
                  var _safe = function(value) {
                    if (typeof value === 'undefined' && value == null)
                      value = '';
                    var result = new String(value);
                    result.ecoSafe = true;
                    return result;
                  };
                  return (function() {
                    var __out = [], __self = this, _print = function(value) {
                      if (typeof value !== 'undefined' && value != null)
                        __out.push(value.ecoSafe ? value : __self.escape(value));
                    }, _capture = function(callback) {
                      var out = __out, result;
                      __out = [];
                      callback.call(this);
                      result = __out.join('');
                      __out = out;
                      return _safe(result);
                    };
                    (function() {
                      _print(_safe('<div class="bk-bs-modal" tabindex="-1">\n  <div class="bk-bs-modal-dialog">\n    <div class="bk-bs-modal-content">\n      <div class="bk-bs-modal-header">\n        <button type="button" class="bk-bs-close" data-bk-bs-dismiss="modal">&times;</button>\n        <h4 class="bk-bs-modal-title">Object Explorer</h4>\n      </div>\n      <div class="bk-bs-modal-body">\n      </div>\n      <div class="bk-bs-modal-footer">\n        <button type="button" class="bk-bs-btn bk-bs-btn-primary" data-bk-bs-dismiss="modal">Close</button>\n      </div>\n    </div>\n  </div>\n</div>\n'));
                    
                    }).call(this);
                    
                    return __out.join('');
                  }).call((function() {
                    var obj = {
                      escape: function(value) {
                        return ('' + value)
                          .replace(/&/g, '&amp;')
                          .replace(/</g, '&lt;')
                          .replace(/>/g, '&gt;')
                          .replace(/"/g, '&quot;');
                      },
                      safe: _safe
                    }, key;
                    for (key in __obj) obj[key] = __obj[key];
                    return obj;
                  })());
                };
                  return template;
                });
                
                /*globals jQuery, define, exports, require, window, document */
                (function (factory) {
                	
                	if (typeof define === 'function' && define.amd) {
                		define('jstree',['jquery'], factory);
                	}
                	else if(typeof exports === 'object') {
                		factory(require('jquery'));
                	}
                	else {
                		factory(jQuery);
                	}
                }(function ($, undefined) {
                	
                /*!
                 * jsTree 3.0.0
                 * http://jstree.com/
                 *
                 * Copyright (c) 2013 Ivan Bozhanov (http://vakata.com)
                 *
                 * Licensed same as jquery - under the terms of the MIT License
                 *   http://www.opensource.org/licenses/mit-license.php
                 */
                /*!
                 * if using jslint please allow for the jQuery global and use following options: 
                 * jslint: browser: true, ass: true, bitwise: true, continue: true, nomen: true, plusplus: true, regexp: true, unparam: true, todo: true, white: true
                 */
                
                	// prevent another load? maybe there is a better way?
                	if($.jstree) {
                		return;
                	}
                
                	/**
                	 * ### jsTree core functionality
                	 */
                
                	// internal variables
                	var instance_counter = 0,
                		ccp_node = false,
                		ccp_mode = false,
                		ccp_inst = false,
                		themes_loaded = [],
                		src = $('script:last').attr('src'),
                		_d = document, _node = _d.createElement('LI'), _temp1, _temp2;
                
                	_node.setAttribute('role', 'treeitem');
                	_temp1 = _d.createElement('I');
                	_temp1.className = 'jstree-icon jstree-ocl';
                	_node.appendChild(_temp1);
                	_temp1 = _d.createElement('A');
                	_temp1.className = 'jstree-anchor';
                	_temp1.setAttribute('href','#');
                	_temp2 = _d.createElement('I');
                	_temp2.className = 'jstree-icon jstree-themeicon';
                	_temp1.appendChild(_temp2);
                	_node.appendChild(_temp1);
                	_temp1 = _temp2 = null;
                
                
                	/**
                	 * holds all jstree related functions and variables, including the actual class and methods to create, access and manipulate instances.
                	 * @name $.jstree
                	 */
                	$.jstree = {
                		/** 
                		 * specifies the jstree version in use
                		 * @name $.jstree.version
                		 */
                		version : '3.0.0-beta9',
                		/**
                		 * holds all the default options used when creating new instances
                		 * @name $.jstree.defaults
                		 */
                		defaults : {
                			/**
                			 * configure which plugins will be active on an instance. Should be an array of strings, where each element is a plugin name. The default is `[]`
                			 * @name $.jstree.defaults.plugins
                			 */
                			plugins : []
                		},
                		/**
                		 * stores all loaded jstree plugins (used internally)
                		 * @name $.jstree.plugins
                		 */
                		plugins : {},
                		path : src && src.indexOf('/') !== -1 ? src.replace(/\/[^\/]+$/,'') : ''
                	};
                	/**
                	 * creates a jstree instance
                	 * @name $.jstree.create(el [, options])
                	 * @param {DOMElement|jQuery|String} el the element to create the instance on, can be jQuery extended or a selector
                	 * @param {Object} options options for this instance (extends `$.jstree.defaults`)
                	 * @return {jsTree} the new instance
                	 */
                	$.jstree.create = function (el, options) {
                		var tmp = new $.jstree.core(++instance_counter),
                			opt = options;
                		options = $.extend(true, {}, $.jstree.defaults, options);
                		if(opt && opt.plugins) {
                			options.plugins = opt.plugins;
                		}
                		$.each(options.plugins, function (i, k) {
                			if(i !== 'core') {
                				tmp = tmp.plugin(k, options[k]);
                			}
                		});
                		tmp.init(el, options);
                		return tmp;
                	};
                	/**
                	 * the jstree class constructor, used only internally
                	 * @private
                	 * @name $.jstree.core(id)
                	 * @param {Number} id this instance's index
                	 */
                	$.jstree.core = function (id) {
                		this._id = id;
                		this._cnt = 0;
                		this._data = {
                			core : {
                				themes : {
                					name : false,
                					dots : false,
                					icons : false
                				},
                				selected : [],
                				last_error : {}
                			}
                		};
                	};
                	/**
                	 * get a reference to an existing instance
                	 *
                	 * __Examples__
                	 *
                	 *	// provided a container with an ID of "tree", and a nested node with an ID of "branch"
                	 *	// all of there will return the same instance
                	 *	$.jstree.reference('tree');
                	 *	$.jstree.reference('#tree');
                	 *	$.jstree.reference($('#tree'));
                	 *	$.jstree.reference(document.getElementByID('tree'));
                	 *	$.jstree.reference('branch');
                	 *	$.jstree.reference('#branch');
                	 *	$.jstree.reference($('#branch'));
                	 *	$.jstree.reference(document.getElementByID('branch'));
                	 *
                	 * @name $.jstree.reference(needle)
                	 * @param {DOMElement|jQuery|String} needle
                	 * @return {jsTree|null} the instance or `null` if not found
                	 */
                	$.jstree.reference = function (needle) {
                		if(needle && !$(needle).length) {
                			if(needle.id) {
                				needle = needle.id;
                			}
                			var tmp = null;
                			$('.jstree').each(function () {
                				var inst = $(this).data('jstree');
                				if(inst && inst._model.data[needle]) {
                					tmp = inst;
                					return false;
                				}
                			});
                			return tmp;
                		}
                		return $(needle).closest('.jstree').data('jstree');
                	};
                	/**
                	 * Create an instance, get an instance or invoke a command on a instance. 
                	 * 
                	 * If there is no instance associated with the current node a new one is created and `arg` is used to extend `$.jstree.defaults` for this new instance. There would be no return value (chaining is not broken).
                	 * 
                	 * If there is an existing instance and `arg` is a string the command specified by `arg` is executed on the instance, with any additional arguments passed to the function. If the function returns a value it will be returned (chaining could break depending on function).
                	 * 
                	 * If there is an existing instance and `arg` is not a string the instance itself is returned (similar to `$.jstree.reference`).
                	 * 
                	 * In any other case - nothing is returned and chaining is not broken.
                	 *
                	 * __Examples__
                	 *
                	 *	$('#tree1').jstree(); // creates an instance
                	 *	$('#tree2').jstree({ plugins : [] }); // create an instance with some options
                	 *	$('#tree1').jstree('open_node', '#branch_1'); // call a method on an existing instance, passing additional arguments
                	 *	$('#tree2').jstree(); // get an existing instance (or create an instance)
                	 *	$('#tree2').jstree(true); // get an existing instance (will not create new instance)
                	 *	$('#branch_1').jstree().select_node('#branch_1'); // get an instance (using a nested element and call a method)
                	 *
                	 * @name $().jstree([arg])
                	 * @param {String|Object} arg
                	 * @return {Mixed}
                	 */
                	$.fn.jstree = function (arg) {
                		// check for string argument
                		var is_method	= (typeof arg === 'string'),
                			args		= Array.prototype.slice.call(arguments, 1),
                			result		= null;
                		this.each(function () {
                			// get the instance (if there is one) and method (if it exists)
                			var instance = $.jstree.reference(this),
                				method = is_method && instance ? instance[arg] : null;
                			// if calling a method, and method is available - execute on the instance
                			result = is_method && method ?
                				method.apply(instance, args) :
                				null;
                			// if there is no instance and no method is being called - create one
                			if(!instance && !is_method && (arg === undefined || $.isPlainObject(arg))) {
                				$(this).data('jstree', new $.jstree.create(this, arg));
                			}
                			// if there is an instance and no method is called - return the instance
                			if(instance && !is_method) {
                				result = instance;
                			}
                			// if there was a method call which returned a result - break and return the value
                			if(result !== null && result !== undefined) {
                				return false;
                			}
                		});
                		// if there was a method call with a valid return value - return that, otherwise continue the chain
                		return result !== null && result !== undefined ?
                			result : this;
                	};
                	/**
                	 * used to find elements containing an instance
                	 *
                	 * __Examples__
                	 *
                	 *	$('div:jstree').each(function () {
                	 *		$(this).jstree('destroy');
                	 *	});
                	 *
                	 * @name $(':jstree')
                	 * @return {jQuery}
                	 */
                	$.expr[':'].jstree = $.expr.createPseudo(function(search) {
                		return function(a) {
                			return $(a).hasClass('jstree') &&
                				$(a).data('jstree') !== undefined;
                		};
                	});
                
                	/**
                	 * stores all defaults for the core
                	 * @name $.jstree.defaults.core
                	 */
                	$.jstree.defaults.core = {
                		/**
                		 * data configuration
                		 * 
                		 * If left as `false` the HTML inside the jstree container element is used to populate the tree (that should be an unordered list with list items).
                		 *
                		 * You can also pass in a HTML string or a JSON array here.
                		 * 
                		 * It is possible to pass in a standard jQuery-like AJAX config and jstree will automatically determine if the response is JSON or HTML and use that to populate the tree. 
                		 * In addition to the standard jQuery ajax options here you can suppy functions for `data` and `url`, the functions will be run in the current instance's scope and a param will be passed indicating which node is being loaded, the return value of those functions will be used.
                		 * 
                		 * The last option is to specify a function, that function will receive the node being loaded as argument and a second param which is a function which should be called with the result.
                		 *
                		 * __Examples__
                		 *
                		 *	// AJAX
                		 *	$('#tree').jstree({
                		 *		'core' : {
                		 *			'data' : {
                		 *				'url' : '/get/children/',
                		 *				'data' : function (node) {
                		 *					return { 'id' : node.id };
                		 *				}
                		 *			}
                		 *		});
                		 *
                		 *	// direct data
                		 *	$('#tree').jstree({
                		 *		'core' : {
                		 *			'data' : [
                		 *				'Simple root node',
                		 *				{
                		 *					'id' : 'node_2',
                		 *					'text' : 'Root node with options',
                		 *					'state' : { 'opened' : true, 'selected' : true },
                		 *					'children' : [ { 'text' : 'Child 1' }, 'Child 2']
                		 *				}
                		 *			]
                		 *		});
                		 *	
                		 *	// function
                		 *	$('#tree').jstree({
                		 *		'core' : {
                		 *			'data' : function (obj, callback) {
                		 *				callback.call(this, ['Root 1', 'Root 2']);
                		 *			}
                		 *		});
                		 * 
                		 * @name $.jstree.defaults.core.data
                		 */
                		data			: false,
                		/**
                		 * configure the various strings used throughout the tree
                		 *
                		 * You can use an object where the key is the string you need to replace and the value is your replacement.
                		 * Another option is to specify a function which will be called with an argument of the needed string and should return the replacement.
                		 * If left as `false` no replacement is made.
                		 *
                		 * __Examples__
                		 *
                		 *	$('#tree').jstree({
                		 *		'core' : {
                		 *			'strings' : {
                		 *				'Loading...' : 'Please wait ...'
                		 *			}
                		 *		}
                		 *	});
                		 *
                		 * @name $.jstree.defaults.core.strings
                		 */
                		strings			: false,
                		/**
                		 * determines what happens when a user tries to modify the structure of the tree
                		 * If left as `false` all operations like create, rename, delete, move or copy are prevented.
                		 * You can set this to `true` to allow all interactions or use a function to have better control.
                		 *
                		 * __Examples__
                		 *
                		 *	$('#tree').jstree({
                		 *		'core' : {
                		 *			'check_callback' : function (operation, node, node_parent, node_position) {
                		 *				// operation can be 'create_node', 'rename_node', 'delete_node', 'move_node' or 'copy_node'
                		 *				// in case of 'rename_node' node_position is filled with the new node name
                		 *				return operation === 'rename_node' ? true : false;
                		 *			}
                		 *		}
                		 *	});
                		 * 
                		 * @name $.jstree.defaults.core.check_callback
                		 */
                		check_callback	: false,
                		/**
                		 * a callback called with a single object parameter in the instance's scope when something goes wrong (operation prevented, ajax failed, etc)
                		 * @name $.jstree.defaults.core.error
                		 */
                		error			: $.noop,
                		/**
                		 * the open / close animation duration in milliseconds - set this to `false` to disable the animation (default is `200`)
                		 * @name $.jstree.defaults.core.animation
                		 */
                		animation		: 200,
                		/**
                		 * a boolean indicating if multiple nodes can be selected
                		 * @name $.jstree.defaults.core.multiple
                		 */
                		multiple		: true,
                		/**
                		 * theme configuration object
                		 * @name $.jstree.defaults.core.themes
                		 */
                		themes			: {
                			/**
                			 * the name of the theme to use (if left as `false` the default theme is used)
                			 * @name $.jstree.defaults.core.themes.name
                			 */
                			name			: false,
                			/**
                			 * the URL of the theme's CSS file, leave this as `false` if you have manually included the theme CSS (recommended). You can set this to `true` too which will try to autoload the theme.
                			 * @name $.jstree.defaults.core.themes.url
                			 */
                			url				: false,
                			/**
                			 * the location of all jstree themes - only used if `url` is set to `true`
                			 * @name $.jstree.defaults.core.themes.dir
                			 */
                			dir				: false,
                			/**
                			 * a boolean indicating if connecting dots are shown
                			 * @name $.jstree.defaults.core.themes.dots
                			 */
                			dots			: true,
                			/**
                			 * a boolean indicating if node icons are shown
                			 * @name $.jstree.defaults.core.themes.icons
                			 */
                			icons			: true,
                			/**
                			 * a boolean indicating if the tree background is striped
                			 * @name $.jstree.defaults.core.themes.stripes
                			 */
                			stripes			: false,
                			/**
                			 * a string (or boolean `false`) specifying the theme variant to use (if the theme supports variants)
                			 * @name $.jstree.defaults.core.themes.variant
                			 */
                			variant			: false,
                			/**
                			 * a boolean specifying if a reponsive version of the theme should kick in on smaller screens (if the theme supports it). Defaults to `true`.
                			 * @name $.jstree.defaults.core.themes.responsive
                			 */
                			responsive		: true
                		},
                		/**
                		 * if left as `true` all parents of all selected nodes will be opened once the tree loads (so that all selected nodes are visible to the user)
                		 * @name $.jstree.defaults.core.expand_selected_onload
                		 */
                		expand_selected_onload : true
                	};
                	$.jstree.core.prototype = {
                		/**
                		 * used to decorate an instance with a plugin. Used internally.
                		 * @private
                		 * @name plugin(deco [, opts])
                		 * @param  {String} deco the plugin to decorate with
                		 * @param  {Object} opts options for the plugin
                		 * @return {jsTree}
                		 */
                		plugin : function (deco, opts) {
                			var Child = $.jstree.plugins[deco];
                			if(Child) {
                				this._data[deco] = {};
                				Child.prototype = this;
                				return new Child(opts, this);
                			}
                			return this;
                		},
                		/**
                		 * used to decorate an instance with a plugin. Used internally.
                		 * @private
                		 * @name init(el, optons)
                		 * @param {DOMElement|jQuery|String} el the element we are transforming
                		 * @param {Object} options options for this instance
                		 * @trigger init.jstree, loading.jstree, loaded.jstree, ready.jstree, changed.jstree
                		 */
                		init : function (el, options) {
                			this._model = {
                				data : {
                					'#' : {
                						id : '#',
                						parent : null,
                						parents : [],
                						children : [],
                						children_d : [],
                						state : { loaded : false }
                					}
                				},
                				changed : [],
                				force_full_redraw : false,
                				redraw_timeout : false,
                				default_state : {
                					loaded : true,
                					opened : false,
                					selected : false,
                					disabled : false
                				}
                			};
                
                			this.element = $(el).addClass('jstree jstree-' + this._id);
                			this.settings = options;
                			this.element.bind("destroyed", $.proxy(this.teardown, this));
                
                			this._data.core.ready = false;
                			this._data.core.loaded = false;
                			this._data.core.rtl = (this.element.css("direction") === "rtl");
                			this.element[this._data.core.rtl ? 'addClass' : 'removeClass']("jstree-rtl");
                			this.element.attr('role','tree');
                
                			this.bind();
                			/**
                			 * triggered after all events are bound
                			 * @event
                			 * @name init.jstree
                			 */
                			this.trigger("init");
                
                			this._data.core.original_container_html = this.element.find(" > ul > li").clone(true);
                			this._data.core.original_container_html
                				.find("li").addBack()
                				.contents().filter(function() {
                					return this.nodeType === 3 && (!this.nodeValue || /^\s+$/.test(this.nodeValue));
                				})
                				.remove();
                			this.element.html("<"+"ul class='jstree-container-ul'><"+"li class='jstree-initial-node jstree-loading jstree-leaf jstree-last'><i class='jstree-icon jstree-ocl'></i><"+"a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>" + this.get_string("Loading ...") + "</a></li></ul>");
                			this._data.core.li_height = this.get_container_ul().children("li:eq(0)").height() || 18;
                			/**
                			 * triggered after the loading text is shown and before loading starts
                			 * @event
                			 * @name loading.jstree
                			 */
                			this.trigger("loading");
                			this.load_node('#');
                		},
                		/**
                		 * destroy an instance
                		 * @name destroy()
                		 */
                		destroy : function () {
                			this.element.unbind("destroyed", this.teardown);
                			this.teardown();
                		},
                		/**
                		 * part of the destroying of an instance. Used internally.
                		 * @private
                		 * @name teardown()
                		 */
                		teardown : function () {
                			this.unbind();
                			this.element
                				.removeClass('jstree')
                				.removeData('jstree')
                				.find("[class^='jstree']")
                					.addBack()
                					.attr("class", function () { return this.className.replace(/jstree[^ ]*|$/ig,''); });
                			this.element = null;
                		},
                		/**
                		 * bind all events. Used internally.
                		 * @private
                		 * @name bind()
                		 */
                		bind : function () {
                			this.element
                				.on("dblclick.jstree", function () {
                						if(document.selection && document.selection.empty) {
                							document.selection.empty();
                						}
                						else {
                							if(window.getSelection) {
                								var sel = window.getSelection();
                								try {
                									sel.removeAllRanges();
                									sel.collapse();
                								} catch (ignore) { }
                							}
                						}
                					})
                				.on("click.jstree", ".jstree-ocl", $.proxy(function (e) {
                						this.toggle_node(e.target);
                					}, this))
                				.on("click.jstree", ".jstree-anchor", $.proxy(function (e) {
                						e.preventDefault();
                						$(e.currentTarget).focus();
                						this.activate_node(e.currentTarget, e);
                					}, this))
                				.on('keydown.jstree', '.jstree-anchor', $.proxy(function (e) {
                						var o = null;
                						switch(e.which) {
                							case 13:
                							case 32:
                								e.type = "click";
                								$(e.currentTarget).trigger(e);
                								break;
                							case 37:
                								e.preventDefault();
                								if(this.is_open(e.currentTarget)) {
                									this.close_node(e.currentTarget);
                								}
                								else {
                									o = this.get_prev_dom(e.currentTarget);
                									if(o && o.length) { o.children('.jstree-anchor').focus(); }
                								}
                								break;
                							case 38:
                								e.preventDefault();
                								o = this.get_prev_dom(e.currentTarget);
                								if(o && o.length) { o.children('.jstree-anchor').focus(); }
                								break;
                							case 39:
                								e.preventDefault();
                								if(this.is_closed(e.currentTarget)) {
                									this.open_node(e.currentTarget, function (o) { this.get_node(o, true).children('.jstree-anchor').focus(); });
                								}
                								else {
                									o = this.get_next_dom(e.currentTarget);
                									if(o && o.length) { o.children('.jstree-anchor').focus(); }
                								}
                								break;
                							case 40:
                								e.preventDefault();
                								o = this.get_next_dom(e.currentTarget);
                								if(o && o.length) { o.children('.jstree-anchor').focus(); }
                								break;
                							// delete
                							case 46:
                								e.preventDefault();
                								o = this.get_node(e.currentTarget);
                								if(o && o.id && o.id !== '#') {
                									o = this.is_selected(o) ? this.get_selected() : o;
                									// this.delete_node(o);
                								}
                								break;
                							// f2
                							case 113:
                								e.preventDefault();
                								o = this.get_node(e.currentTarget);
                								/*!
                								if(o && o.id && o.id !== '#') {
                									// this.edit(o);
                								}
                								*/
                								break;
                							default:
                								// console.log(e.which);
                								break;
                						}
                					}, this))
                				.on("load_node.jstree", $.proxy(function (e, data) {
                						if(data.status) {
                							if(data.node.id === '#' && !this._data.core.loaded) {
                								this._data.core.loaded = true;
                								/**
                								 * triggered after the root node is loaded for the first time
                								 * @event
                								 * @name loaded.jstree
                								 */
                								this.trigger("loaded");
                							}
                							if(!this._data.core.ready && !this.get_container_ul().find('.jstree-loading:eq(0)').length) {
                								this._data.core.ready = true;
                								if(this._data.core.selected.length) {
                									if(this.settings.core.expand_selected_onload) {
                										var tmp = [], i, j;
                										for(i = 0, j = this._data.core.selected.length; i < j; i++) {
                											tmp = tmp.concat(this._model.data[this._data.core.selected[i]].parents);
                										}
                										tmp = $.vakata.array_unique(tmp);
                										for(i = 0, j = tmp.length; i < j; i++) {
                											this.open_node(tmp[i], false, 0);
                										}
                									}
                									this.trigger('changed', { 'action' : 'ready', 'selected' : this._data.core.selected });
                								}
                								/**
                								 * triggered after all nodes are finished loading
                								 * @event
                								 * @name ready.jstree
                								 */
                								setTimeout($.proxy(function () { this.trigger("ready"); }, this), 0);
                							}
                						}
                					}, this))
                				// THEME RELATED
                				.on("init.jstree", $.proxy(function () {
                						var s = this.settings.core.themes;
                						this._data.core.themes.dots			= s.dots;
                						this._data.core.themes.stripes		= s.stripes;
                						this._data.core.themes.icons		= s.icons;
                						this.set_theme(s.name || "default", s.url);
                						this.set_theme_variant(s.variant);
                					}, this))
                				.on("loading.jstree", $.proxy(function () {
                						this[ this._data.core.themes.dots ? "show_dots" : "hide_dots" ]();
                						this[ this._data.core.themes.icons ? "show_icons" : "hide_icons" ]();
                						this[ this._data.core.themes.stripes ? "show_stripes" : "hide_stripes" ]();
                					}, this))
                				.on('focus.jstree', '.jstree-anchor', $.proxy(function (e) {
                						this.element.find('.jstree-hovered').not(e.currentTarget).mouseleave();
                						$(e.currentTarget).mouseenter();
                					}, this))
                				.on('mouseenter.jstree', '.jstree-anchor', $.proxy(function (e) {
                						this.hover_node(e.currentTarget);
                					}, this))
                				.on('mouseleave.jstree', '.jstree-anchor', $.proxy(function (e) {
                						this.dehover_node(e.currentTarget);
                					}, this));
                		},
                		/**
                		 * part of the destroying of an instance. Used internally.
                		 * @private
                		 * @name unbind()
                		 */
                		unbind : function () {
                			this.element.off('.jstree');
                			$(document).off('.jstree-' + this._id);
                		},
                		/**
                		 * trigger an event. Used internally.
                		 * @private
                		 * @name trigger(ev [, data])
                		 * @param  {String} ev the name of the event to trigger
                		 * @param  {Object} data additional data to pass with the event
                		 */
                		trigger : function (ev, data) {
                			if(!data) {
                				data = {};
                			}
                			data.instance = this;
                			this.element.triggerHandler(ev.replace('.jstree','') + '.jstree', data);
                		},
                		/**
                		 * returns the jQuery extended instance container
                		 * @name get_container()
                		 * @return {jQuery}
                		 */
                		get_container : function () {
                			return this.element;
                		},
                		/**
                		 * returns the jQuery extended main UL node inside the instance container. Used internally.
                		 * @private
                		 * @name get_container_ul()
                		 * @return {jQuery}
                		 */
                		get_container_ul : function () {
                			return this.element.children("ul:eq(0)");
                		},
                		/**
                		 * gets string replacements (localization). Used internally.
                		 * @private
                		 * @name get_string(key)
                		 * @param  {String} key
                		 * @return {String}
                		 */
                		get_string : function (key) {
                			var a = this.settings.core.strings;
                			if($.isFunction(a)) { return a.call(this, key); }
                			if(a && a[key]) { return a[key]; }
                			return key;
                		},
                		/**
                		 * gets the first child of a DOM node. Used internally.
                		 * @private
                		 * @name _firstChild(dom)
                		 * @param  {DOMElement} dom
                		 * @return {DOMElement}
                		 */
                		_firstChild : function (dom) {
                			dom = dom ? dom.firstChild : null;
                			while(dom !== null && dom.nodeType !== 1) {
                				dom = dom.nextSibling;
                			}
                			return dom;
                		},
                		/**
                		 * gets the next sibling of a DOM node. Used internally.
                		 * @private
                		 * @name _nextSibling(dom)
                		 * @param  {DOMElement} dom
                		 * @return {DOMElement}
                		 */
                		_nextSibling : function (dom) {
                			dom = dom ? dom.nextSibling : null;
                			while(dom !== null && dom.nodeType !== 1) {
                				dom = dom.nextSibling;
                			}
                			return dom;
                		},
                		/**
                		 * gets the previous sibling of a DOM node. Used internally.
                		 * @private
                		 * @name _previousSibling(dom)
                		 * @param  {DOMElement} dom
                		 * @return {DOMElement}
                		 */
                		_previousSibling : function (dom) {
                			dom = dom ? dom.previousSibling : null;
                			while(dom !== null && dom.nodeType !== 1) {
                				dom = dom.previousSibling;
                			}
                			return dom;
                		},
                		/**
                		 * get the JSON representation of a node (or the actual jQuery extended DOM node) by using any input (child DOM element, ID string, selector, etc)
                		 * @name get_node(obj [, as_dom])
                		 * @param  {mixed} obj
                		 * @param  {Boolean} as_dom
                		 * @return {Object|jQuery}
                		 */
                		get_node : function (obj, as_dom) {
                			if(obj && obj.id) {
                				obj = obj.id;
                			}
                			var dom;
                			try {
                				if(this._model.data[obj]) {
                					obj = this._model.data[obj];
                				}
                				else if(((dom = $(obj, this.element)).length || (dom = $('#' + obj, this.element)).length) && this._model.data[dom.closest('li').attr('id')]) {
                					obj = this._model.data[dom.closest('li').attr('id')];
                				}
                				else if((dom = $(obj, this.element)).length && dom.hasClass('jstree')) {
                					obj = this._model.data['#'];
                				}
                				else {
                					return false;
                				}
                
                				if(as_dom) {
                					obj = obj.id === '#' ? this.element : $(document.getElementById(obj.id));
                				}
                				return obj;
                			} catch (ex) { return false; }
                		},
                		/**
                		 * get the path to a node, either consisting of node texts, or of node IDs, optionally glued together (otherwise an array)
                		 * @name get_path(obj [, glue, ids])
                		 * @param  {mixed} obj the node
                		 * @param  {String} glue if you want the path as a string - pass the glue here (for example '/'), if a falsy value is supplied here, an array is returned
                		 * @param  {Boolean} ids if set to true build the path using ID, otherwise node text is used
                		 * @return {mixed}
                		 */
                		get_path : function (obj, glue, ids) {
                			obj = obj.parents ? obj : this.get_node(obj);
                			if(!obj || obj.id === '#' || !obj.parents) {
                				return false;
                			}
                			var i, j, p = [];
                			p.push(ids ? obj.id : obj.text);
                			for(i = 0, j = obj.parents.length; i < j; i++) {
                				p.push(ids ? obj.parents[i] : this.get_text(obj.parents[i]));
                			}
                			p = p.reverse().slice(1);
                			return glue ? p.join(glue) : p;
                		},
                		/**
                		 * get the next visible node that is below the `obj` node. If `strict` is set to `true` only sibling nodes are returned.
                		 * @name get_next_dom(obj [, strict])
                		 * @param  {mixed} obj
                		 * @param  {Boolean} strict
                		 * @return {jQuery}
                		 */
                		get_next_dom : function (obj, strict) {
                			var tmp;
                			obj = this.get_node(obj, true);
                			if(obj[0] === this.element[0]) {
                				tmp = this._firstChild(this.get_container_ul()[0]);
                				return tmp ? $(tmp) : false;
                			}
                			if(!obj || !obj.length) {
                				return false;
                			}
                			if(strict) {
                				tmp = this._nextSibling(obj[0]);
                				return tmp ? $(tmp) : false;
                			}
                			if(obj.hasClass("jstree-open")) {
                				tmp = this._firstChild(obj.children('ul')[0]);
                				return tmp ? $(tmp) : false;
                			}
                			if((tmp = this._nextSibling(obj[0])) !== null) {
                				return $(tmp);
                			}
                			return obj.parentsUntil(".jstree","li").next("li").eq(0);
                		},
                		/**
                		 * get the previous visible node that is above the `obj` node. If `strict` is set to `true` only sibling nodes are returned.
                		 * @name get_prev_dom(obj [, strict])
                		 * @param  {mixed} obj
                		 * @param  {Boolean} strict
                		 * @return {jQuery}
                		 */
                		get_prev_dom : function (obj, strict) {
                			var tmp;
                			obj = this.get_node(obj, true);
                			if(obj[0] === this.element[0]) {
                				tmp = this.get_container_ul()[0].lastChild;
                				return tmp ? $(tmp) : false;
                			}
                			if(!obj || !obj.length) {
                				return false;
                			}
                			if(strict) {
                				tmp = this._previousSibling(obj[0]);
                				return tmp ? $(tmp) : false;
                			}
                			if((tmp = this._previousSibling(obj[0])) !== null) {
                				obj = $(tmp);
                				while(obj.hasClass("jstree-open")) {
                					obj = obj.children("ul:eq(0)").children("li:last");
                				}
                				return obj;
                			}
                			tmp = obj[0].parentNode.parentNode;
                			return tmp && tmp.tagName === 'LI' ? $(tmp) : false;
                		},
                		/**
                		 * get the parent ID of a node
                		 * @name get_parent(obj)
                		 * @param  {mixed} obj
                		 * @return {String}
                		 */
                		get_parent : function (obj) {
                			obj = this.get_node(obj);
                			if(!obj || obj.id === '#') {
                				return false;
                			}
                			return obj.parent;
                		},
                		/**
                		 * get a jQuery collection of all the children of a node (node must be rendered)
                		 * @name get_children_dom(obj)
                		 * @param  {mixed} obj
                		 * @return {jQuery}
                		 */
                		get_children_dom : function (obj) {
                			obj = this.get_node(obj, true);
                			if(obj[0] === this.element[0]) {
                				return this.get_container_ul().children("li");
                			}
                			if(!obj || !obj.length) {
                				return false;
                			}
                			return obj.children("ul").children("li");
                		},
                		/**
                		 * checks if a node has children
                		 * @name is_parent(obj)
                		 * @param  {mixed} obj
                		 * @return {Boolean}
                		 */
                		is_parent : function (obj) {
                			obj = this.get_node(obj);
                			return obj && (obj.state.loaded === false || obj.children.length > 0);
                		},
                		/**
                		 * checks if a node is loaded (its children are available)
                		 * @name is_loaded(obj)
                		 * @param  {mixed} obj
                		 * @return {Boolean}
                		 */
                		is_loaded : function (obj) {
                			obj = this.get_node(obj);
                			return obj && obj.state.loaded;
                		},
                		/**
                		 * check if a node is currently loading (fetching children)
                		 * @name is_loading(obj)
                		 * @param  {mixed} obj
                		 * @return {Boolean}
                		 */
                		is_loading : function (obj) {
                			obj = this.get_node(obj, true);
                			return obj && obj.hasClass("jstree-loading");
                		},
                		/**
                		 * check if a node is opened
                		 * @name is_open(obj)
                		 * @param  {mixed} obj
                		 * @return {Boolean}
                		 */
                		is_open : function (obj) {
                			obj = this.get_node(obj);
                			return obj && obj.state.opened;
                		},
                		/**
                		 * check if a node is in a closed state
                		 * @name is_closed(obj)
                		 * @param  {mixed} obj
                		 * @return {Boolean}
                		 */
                		is_closed : function (obj) {
                			obj = this.get_node(obj);
                			return obj && this.is_parent(obj) && !obj.state.opened;
                		},
                		/**
                		 * check if a node has no children
                		 * @name is_leaf(obj)
                		 * @param  {mixed} obj
                		 * @return {Boolean}
                		 */
                		is_leaf : function (obj) {
                			return !this.is_parent(obj);
                		},
                		/**
                		 * loads a node (fetches its children using the `core.data` setting). Multiple nodes can be passed to by using an array.
                		 * @name load_node(obj [, callback])
                		 * @param  {mixed} obj
                		 * @param  {function} callback a function to be executed once loading is conplete, the function is executed in the instance's scope and receives two arguments - the node and a boolean status
                		 * @return {Boolean}
                		 * @trigger load_node.jstree
                		 */
                		load_node : function (obj, callback) {
                			var t1, t2;
                			if($.isArray(obj)) {
                				obj = obj.slice();
                				for(t1 = 0, t2 = obj.length; t1 < t2; t1++) {
                					this.load_node(obj[t1], callback);
                				}
                				return true;
                			}
                			obj = this.get_node(obj);
                			if(!obj) {
                				callback.call(this, obj, false);
                				return false;
                			}
                			this.get_node(obj, true).addClass("jstree-loading");
                			this._load_node(obj, $.proxy(function (status) {
                				obj.state.loaded = status;
                				this.get_node(obj, true).removeClass("jstree-loading");
                				/**
                				 * triggered after a node is loaded
                				 * @event
                				 * @name load_node.jstree
                				 * @param {Object} node the node that was loading
                				 * @param {Boolean} status was the node loaded successfully
                				 */
                				this.trigger('load_node', { "node" : obj, "status" : status });
                				if(callback) {
                					callback.call(this, obj, status);
                				}
                			}, this));
                			return true;
                		},
                		/**
                		 * handles the actual loading of a node. Used only internally.
                		 * @private
                		 * @name _load_node(obj [, callback])
                		 * @param  {mixed} obj
                		 * @param  {function} callback a function to be executed once loading is conplete, the function is executed in the instance's scope and receives one argument - a boolean status
                		 * @return {Boolean}
                		 */
                		_load_node : function (obj, callback) {
                			var s = this.settings.core.data, t;
                			// use original HTML
                			if(!s) {
                				return callback.call(this, obj.id === '#' ? this._append_html_data(obj, this._data.core.original_container_html.clone(true)) : false);
                			}
                			if($.isFunction(s)) {
                				return s.call(this, obj, $.proxy(function (d) {
                					return d === false ? callback.call(this, false) : callback.call(this, this[typeof d === 'string' ? '_append_html_data' : '_append_json_data'](obj, typeof d === 'string' ? $(d) : d));
                				}, this));
                			}
                			if(typeof s === 'object') {
                				if(s.url) {
                					s = $.extend(true, {}, s);
                					if($.isFunction(s.url)) {
                						s.url = s.url.call(this, obj);
                					}
                					if($.isFunction(s.data)) {
                						s.data = s.data.call(this, obj);
                					}
                					return $.ajax(s)
                						.done($.proxy(function (d,t,x) {
                								var type = x.getResponseHeader('Content-Type');
                								if(type.indexOf('json') !== -1) {
                									return callback.call(this, this._append_json_data(obj, d));
                								}
                								if(type.indexOf('html') !== -1) {
                									return callback.call(this, this._append_html_data(obj, $(d)));
                								}
                							}, this))
                						.fail($.proxy(function () {
                								callback.call(this, false);
                								this._data.core.last_error = { 'error' : 'ajax', 'plugin' : 'core', 'id' : 'core_04', 'reason' : 'Could not load node', 'data' : JSON.stringify(s) };
                								this.settings.core.error.call(this, this._data.core.last_error);
                							}, this));
                				}
                				t = ($.isArray(s) || $.isPlainObject(s)) ? JSON.parse(JSON.stringify(s)) : s;
                				return callback.call(this, this._append_json_data(obj, t));
                			}
                			if(typeof s === 'string') {
                				return callback.call(this, this._append_html_data(obj, s));
                			}
                			return callback.call(this, false);
                		},
                		/**
                		 * adds a node to the list of nodes to redraw. Used only internally.
                		 * @private
                		 * @name _node_changed(obj [, callback])
                		 * @param  {mixed} obj
                		 */
                		_node_changed : function (obj) {
                			obj = this.get_node(obj);
                			if(obj) {
                				this._model.changed.push(obj.id);
                			}
                		},
                		/**
                		 * appends HTML content to the tree. Used internally.
                		 * @private
                		 * @name _append_html_data(obj, data)
                		 * @param  {mixed} obj the node to append to
                		 * @param  {String} data the HTML string to parse and append
                		 * @return {Boolean}
                		 * @trigger model.jstree, changed.jstree
                		 */
                		_append_html_data : function (dom, data) {
                			dom = this.get_node(dom);
                			dom.children = [];
                			dom.children_d = [];
                			var dat = data.is('ul') ? data.children() : data,
                				par = dom.id,
                				chd = [],
                				dpc = [],
                				m = this._model.data,
                				p = m[par],
                				s = this._data.core.selected.length,
                				tmp, i, j;
                			dat.each($.proxy(function (i, v) {
                				tmp = this._parse_model_from_html($(v), par, p.parents.concat());
                				if(tmp) {
                					chd.push(tmp);
                					dpc.push(tmp);
                					if(m[tmp].children_d.length) {
                						dpc = dpc.concat(m[tmp].children_d);
                					}
                				}
                			}, this));
                			p.children = chd;
                			p.children_d = dpc;
                			for(i = 0, j = p.parents.length; i < j; i++) {
                				m[p.parents[i]].children_d = m[p.parents[i]].children_d.concat(dpc);
                			}
                			/**
                			 * triggered when new data is inserted to the tree model
                			 * @event
                			 * @name model.jstree
                			 * @param {Array} nodes an array of node IDs
                			 * @param {String} parent the parent ID of the nodes
                			 */
                			this.trigger('model', { "nodes" : dpc, 'parent' : par });
                			if(par !== '#') {
                				this._node_changed(par);
                				this.redraw();
                			}
                			else {
                				this.get_container_ul().children('.jstree-initial-node').remove();
                				this.redraw(true);
                			}
                			if(this._data.core.selected.length !== s) {
                				this.trigger('changed', { 'action' : 'model', 'selected' : this._data.core.selected });
                			}
                			return true;
                		},
                		/**
                		 * appends JSON content to the tree. Used internally.
                		 * @private
                		 * @name _append_json_data(obj, data)
                		 * @param  {mixed} obj the node to append to
                		 * @param  {String} data the JSON object to parse and append
                		 * @return {Boolean}
                		 */
                		_append_json_data : function (dom, data) {
                			dom = this.get_node(dom);
                			dom.children = [];
                			dom.children_d = [];
                			var dat = data,
                				par = dom.id,
                				chd = [],
                				dpc = [],
                				m = this._model.data,
                				p = m[par],
                				s = this._data.core.selected.length,
                				tmp, i, j;
                			// *%$@!!!
                			if(dat.d) {
                				dat = dat.d;
                				if(typeof dat === "string") {
                					dat = JSON.parse(dat);
                				}
                			}
                			if(!$.isArray(dat)) { dat = [dat]; }
                			if(dat.length && dat[0].id !== undefined && dat[0].parent !== undefined) {
                				// Flat JSON support (for easy import from DB):
                				// 1) convert to object (foreach)
                				for(i = 0, j = dat.length; i < j; i++) {
                					if(!dat[i].children) {
                						dat[i].children = [];
                					}
                					m[dat[i].id] = dat[i];
                				}
                				// 2) populate children (foreach)
                				for(i = 0, j = dat.length; i < j; i++) {
                					m[dat[i].parent].children.push(dat[i].id);
                					// populate parent.children_d
                					p.children_d.push(dat[i].id);
                				}
                				// 3) normalize && populate parents and children_d with recursion
                				for(i = 0, j = p.children.length; i < j; i++) {
                					tmp = this._parse_model_from_flat_json(m[p.children[i]], par, p.parents.concat());
                					dpc.push(tmp);
                					if(m[tmp].children_d.length) {
                						dpc = dpc.concat(m[tmp].children_d);
                					}
                				}
                				// ?) three_state selection - p.state.selected && t - (if three_state foreach(dat => ch) -> foreach(parents) if(parent.selected) child.selected = true;
                			}
                			else {
                				for(i = 0, j = dat.length; i < j; i++) {
                					tmp = this._parse_model_from_json(dat[i], par, p.parents.concat());
                					if(tmp) {
                						chd.push(tmp);
                						dpc.push(tmp);
                						if(m[tmp].children_d.length) {
                							dpc = dpc.concat(m[tmp].children_d);
                						}
                					}
                				}
                				p.children = chd;
                				p.children_d = dpc;
                				for(i = 0, j = p.parents.length; i < j; i++) {
                					m[p.parents[i]].children_d = m[p.parents[i]].children_d.concat(dpc);
                				}
                			}
                			this.trigger('model', { "nodes" : dpc, 'parent' : par });
                
                			if(par !== '#') {
                				this._node_changed(par);
                				this.redraw();
                			}
                			else {
                				// this.get_container_ul().children('.jstree-initial-node').remove();
                				this.redraw(true);
                			}
                			if(this._data.core.selected.length !== s) {
                				this.trigger('changed', { 'action' : 'model', 'selected' : this._data.core.selected });
                			}
                			return true;
                		},
                		/**
                		 * parses a node from a jQuery object and appends them to the in memory tree model. Used internally.
                		 * @private
                		 * @name _parse_model_from_html(d [, p, ps])
                		 * @param  {jQuery} d the jQuery object to parse
                		 * @param  {String} p the parent ID
                		 * @param  {Array} ps list of all parents
                		 * @return {String} the ID of the object added to the model
                		 */
                		_parse_model_from_html : function (d, p, ps) {
                			if(!ps) { ps = []; }
                			else { ps = [].concat(ps); }
                			if(p) { ps.unshift(p); }
                			var c, e, m = this._model.data,
                				data = {
                					id			: false,
                					text		: false,
                					icon		: true,
                					parent		: p,
                					parents		: ps,
                					children	: [],
                					children_d	: [],
                					data		: null,
                					state		: { },
                					li_attr		: { id : false },
                					a_attr		: { href : '#' },
                					original	: false
                				}, i, tmp, tid;
                			for(i in this._model.default_state) {
                				if(this._model.default_state.hasOwnProperty(i)) {
                					data.state[i] = this._model.default_state[i];
                				}
                			}
                			tmp = $.vakata.attributes(d, true);
                			$.each(tmp, function (i, v) {
                				v = $.trim(v);
                				if(!v.length) { return true; }
                				data.li_attr[i] = v;
                				if(i === 'id') {
                					data.id = v;
                				}
                			});
                			tmp = d.children('a').eq(0);
                			if(tmp.length) {
                				tmp = $.vakata.attributes(tmp, true);
                				$.each(tmp, function (i, v) {
                					v = $.trim(v);
                					if(v.length) {
                						data.a_attr[i] = v;
                					}
                				});
                			}
                			tmp = d.children("a:eq(0)").length ? d.children("a:eq(0)").clone() : d.clone();
                			tmp.children("ins, i, ul").remove();
                			tmp = tmp.html();
                			tmp = $('<div />').html(tmp);
                			data.text = tmp.html();
                			tmp = d.data();
                			data.data = tmp ? $.extend(true, {}, tmp) : null;
                			data.state.opened = d.hasClass('jstree-open');
                			data.state.selected = d.children('a').hasClass('jstree-clicked');
                			data.state.disabled = d.children('a').hasClass('jstree-disabled');
                			if(data.data && data.data.jstree) {
                				for(i in data.data.jstree) {
                					if(data.data.jstree.hasOwnProperty(i)) {
                						data.state[i] = data.data.jstree[i];
                					}
                				}
                			}
                			tmp = d.children("a").children(".jstree-themeicon");
                			if(tmp.length) {
                				data.icon = tmp.hasClass('jstree-themeicon-hidden') ? false : tmp.attr('rel');
                			}
                			if(data.state.icon) {
                				data.icon = data.state.icon;
                			}
                			tmp = d.children("ul").children("li");
                			do {
                				tid = 'j' + this._id + '_' + (++this._cnt);
                			} while(m[tid]);
                			data.id = data.li_attr.id || tid;
                			if(tmp.length) {
                				tmp.each($.proxy(function (i, v) {
                					c = this._parse_model_from_html($(v), data.id, ps);
                					e = this._model.data[c];
                					data.children.push(c);
                					if(e.children_d.length) {
                						data.children_d = data.children_d.concat(e.children_d);
                					}
                				}, this));
                				data.children_d = data.children_d.concat(data.children);
                			}
                			else {
                				if(d.hasClass('jstree-closed')) {
                					data.state.loaded = false;
                				}
                			}
                			if(data.li_attr['class']) {
                				data.li_attr['class'] = data.li_attr['class'].replace('jstree-closed','').replace('jstree-open','');
                			}
                			if(data.a_attr['class']) {
                				data.a_attr['class'] = data.a_attr['class'].replace('jstree-clicked','').replace('jstree-disabled','');
                			}
                			m[data.id] = data;
                			if(data.state.selected) {
                				this._data.core.selected.push(data.id);
                			}
                			return data.id;
                		},
                		/**
                		 * parses a node from a JSON object (used when dealing with flat data, which has no nesting of children, but has id and parent properties) and appends it to the in memory tree model. Used internally.
                		 * @private
                		 * @name _parse_model_from_flat_json(d [, p, ps])
                		 * @param  {Object} d the JSON object to parse
                		 * @param  {String} p the parent ID
                		 * @param  {Array} ps list of all parents
                		 * @return {String} the ID of the object added to the model
                		 */
                		_parse_model_from_flat_json : function (d, p, ps) {
                			if(!ps) { ps = []; }
                			else { ps = ps.concat(); }
                			if(p) { ps.unshift(p); }
                			var tid = d.id,
                				m = this._model.data,
                				df = this._model.default_state,
                				i, j, c, e,
                				tmp = {
                					id			: tid,
                					text		: d.text || '',
                					icon		: d.icon !== undefined ? d.icon : true,
                					parent		: p,
                					parents		: ps,
                					children	: d.children || [],
                					children_d	: d.children_d || [],
                					data		: d.data,
                					state		: { },
                					li_attr		: { id : false },
                					a_attr		: { href : '#' },
                					original	: false
                				};
                			for(i in df) {
                				if(df.hasOwnProperty(i)) {
                					tmp.state[i] = df[i];
                				}
                			}
                			if(d && d.data && d.data.jstree && d.data.jstree.icon) {
                				tmp.icon = d.data.jstree.icon;
                			}
                			if(d && d.data) {
                				tmp.data = d.data;
                				if(d.data.jstree) {
                					for(i in d.data.jstree) {
                						if(d.data.jstree.hasOwnProperty(i)) {
                							tmp.state[i] = d.data.jstree[i];
                						}
                					}
                				}
                			}
                			if(d && typeof d.state === 'object') {
                				for (i in d.state) {
                					if(d.state.hasOwnProperty(i)) {
                						tmp.state[i] = d.state[i];
                					}
                				}
                			}
                			if(d && typeof d.li_attr === 'object') {
                				for (i in d.li_attr) {
                					if(d.li_attr.hasOwnProperty(i)) {
                						tmp.li_attr[i] = d.li_attr[i];
                					}
                				}
                			}
                			if(!tmp.li_attr.id) {
                				tmp.li_attr.id = tid;
                			}
                			if(d && typeof d.a_attr === 'object') {
                				for (i in d.a_attr) {
                					if(d.a_attr.hasOwnProperty(i)) {
                						tmp.a_attr[i] = d.a_attr[i];
                					}
                				}
                			}
                			if(d && d.children && d.children === true) {
                				tmp.state.loaded = false;
                				tmp.children = [];
                				tmp.children_d = [];
                			}
                			m[tmp.id] = tmp;
                			for(i = 0, j = tmp.children.length; i < j; i++) {
                				c = this._parse_model_from_flat_json(m[tmp.children[i]], tmp.id, ps);
                				e = m[c];
                				tmp.children_d.push(c);
                				if(e.children_d.length) {
                					tmp.children_d = tmp.children_d.concat(e.children_d);
                				}
                			}
                			delete d.data;
                			delete d.children;
                			m[tmp.id].original = d;
                			if(tmp.state.selected) {
                				this._data.core.selected.push(tmp.id);
                			}
                			return tmp.id;
                		},
                		/**
                		 * parses a node from a JSON object and appends it to the in memory tree model. Used internally.
                		 * @private
                		 * @name _parse_model_from_json(d [, p, ps])
                		 * @param  {Object} d the JSON object to parse
                		 * @param  {String} p the parent ID
                		 * @param  {Array} ps list of all parents
                		 * @return {String} the ID of the object added to the model
                		 */
                		_parse_model_from_json : function (d, p, ps) {
                			if(!ps) { ps = []; }
                			else { ps = ps.concat(); }
                			if(p) { ps.unshift(p); }
                			var tid = false, i, j, c, e, m = this._model.data, df = this._model.default_state, tmp;
                			do {
                				tid = 'j' + this._id + '_' + (++this._cnt);
                			} while(m[tid]);
                
                			tmp = {
                				id			: false,
                				text		: typeof d === 'string' ? d : '',
                				icon		: typeof d === 'object' && d.icon !== undefined ? d.icon : true,
                				parent		: p,
                				parents		: ps,
                				children	: [],
                				children_d	: [],
                				data		: null,
                				state		: { },
                				li_attr		: { id : false },
                				a_attr		: { href : '#' },
                				original	: false
                			};
                			for(i in df) {
                				if(df.hasOwnProperty(i)) {
                					tmp.state[i] = df[i];
                				}
                			}
                			if(d && d.id) { tmp.id = d.id; }
                			if(d && d.text) { tmp.text = d.text; }
                			if(d && d.data && d.data.jstree && d.data.jstree.icon) {
                				tmp.icon = d.data.jstree.icon;
                			}
                			if(d && d.data) {
                				tmp.data = d.data;
                				if(d.data.jstree) {
                					for(i in d.data.jstree) {
                						if(d.data.jstree.hasOwnProperty(i)) {
                							tmp.state[i] = d.data.jstree[i];
                						}
                					}
                				}
                			}
                			if(d && typeof d.state === 'object') {
                				for (i in d.state) {
                					if(d.state.hasOwnProperty(i)) {
                						tmp.state[i] = d.state[i];
                					}
                				}
                			}
                			if(d && typeof d.li_attr === 'object') {
                				for (i in d.li_attr) {
                					if(d.li_attr.hasOwnProperty(i)) {
                						tmp.li_attr[i] = d.li_attr[i];
                					}
                				}
                			}
                			if(tmp.li_attr.id && !tmp.id) {
                				tmp.id = tmp.li_attr.id;
                			}
                			if(!tmp.id) {
                				tmp.id = tid;
                			}
                			if(!tmp.li_attr.id) {
                				tmp.li_attr.id = tmp.id;
                			}
                			if(d && typeof d.a_attr === 'object') {
                				for (i in d.a_attr) {
                					if(d.a_attr.hasOwnProperty(i)) {
                						tmp.a_attr[i] = d.a_attr[i];
                					}
                				}
                			}
                			if(d && d.children && d.children.length) {
                				for(i = 0, j = d.children.length; i < j; i++) {
                					c = this._parse_model_from_json(d.children[i], tmp.id, ps);
                					e = m[c];
                					tmp.children.push(c);
                					if(e.children_d.length) {
                						tmp.children_d = tmp.children_d.concat(e.children_d);
                					}
                				}
                				tmp.children_d = tmp.children_d.concat(tmp.children);
                			}
                			if(d && d.children && d.children === true) {
                				tmp.state.loaded = false;
                				tmp.children = [];
                				tmp.children_d = [];
                			}
                			delete d.data;
                			delete d.children;
                			tmp.original = d;
                			m[tmp.id] = tmp;
                			if(tmp.state.selected) {
                				this._data.core.selected.push(tmp.id);
                			}
                			return tmp.id;
                		},
                		/**
                		 * redraws all nodes that need to be redrawn. Used internally.
                		 * @private
                		 * @name _redraw()
                		 * @trigger redraw.jstree
                		 */
                		_redraw : function () {
                			var nodes = this._model.force_full_redraw ? this._model.data['#'].children.concat([]) : this._model.changed.concat([]),
                				f = document.createElement('UL'), tmp, i, j;
                			for(i = 0, j = nodes.length; i < j; i++) {
                				tmp = this.redraw_node(nodes[i], true, this._model.force_full_redraw);
                				if(tmp && this._model.force_full_redraw) {
                					f.appendChild(tmp);
                				}
                			}
                			if(this._model.force_full_redraw) {
                				f.className = this.get_container_ul()[0].className;
                				this.element.empty().append(f);
                				//this.get_container_ul()[0].appendChild(f);
                			}
                			this._model.force_full_redraw = false;
                			this._model.changed = [];
                			/**
                			 * triggered after nodes are redrawn
                			 * @event
                			 * @name redraw.jstree
                			 * @param {array} nodes the redrawn nodes
                			 */
                			this.trigger('redraw', { "nodes" : nodes });
                		},
                		/**
                		 * redraws all nodes that need to be redrawn or optionally - the whole tree
                		 * @name redraw([full])
                		 * @param {Boolean} full if set to `true` all nodes are redrawn.
                		 */
                		redraw : function (full) {
                			if(full) {
                				this._model.force_full_redraw = true;
                			}
                			//if(this._model.redraw_timeout) {
                			//	clearTimeout(this._model.redraw_timeout);
                			//}
                			//this._model.redraw_timeout = setTimeout($.proxy(this._redraw, this),0);
                			this._redraw();
                		},
                		/**
                		 * redraws a single node. Used internally.
                		 * @private
                		 * @name redraw_node(node, deep, is_callback)
                		 * @param {mixed} node the node to redraw
                		 * @param {Boolean} deep should child nodes be redrawn too
                		 * @param {Boolean} is_callback is this a recursion call
                		 */
                		redraw_node : function (node, deep, is_callback) {
                			var obj = this.get_node(node),
                				par = false,
                				ind = false,
                				old = false,
                				i = false,
                				j = false,
                				k = false,
                				c = '',
                				d = document,
                				m = this._model.data,
                				f = false,
                				s = false;
                			if(!obj) { return false; }
                			if(obj.id === '#') {  return this.redraw(true); }
                			deep = deep || obj.children.length === 0;
                			node = d.getElementById(obj.id); //, this.element);
                			if(!node) {
                				deep = true;
                				//node = d.createElement('LI');
                				if(!is_callback) {
                					par = obj.parent !== '#' ? $('#' + obj.parent, this.element)[0] : null;
                					if(par !== null && (!par || !m[obj.parent].state.opened)) {
                						return false;
                					}
                					ind = $.inArray(obj.id, par === null ? m['#'].children : m[obj.parent].children);
                				}
                			}
                			else {
                				node = $(node);
                				if(!is_callback) {
                					par = node.parent().parent()[0];
                					if(par === this.element[0]) {
                						par = null;
                					}
                					ind = node.index();
                				}
                				// m[obj.id].data = node.data(); // use only node's data, no need to touch jquery storage
                				if(!deep && obj.children.length && !node.children('ul').length) {
                					deep = true;
                				}
                				if(!deep) {
                					old = node.children('UL')[0];
                				}
                				s = node.attr('aria-selected');
                				f = node.children('.jstree-anchor')[0] === document.activeElement;
                				node.remove();
                				//node = d.createElement('LI');
                				//node = node[0];
                			}
                			node = _node.cloneNode(true);
                			// node is DOM, deep is boolean
                
                			c = 'jstree-node ';
                			for(i in obj.li_attr) {
                				if(obj.li_attr.hasOwnProperty(i)) {
                					if(i === 'id') { continue; }
                					if(i !== 'class') {
                						node.setAttribute(i, obj.li_attr[i]);
                					}
                					else {
                						c += obj.li_attr[i];
                					}
                				}
                			}
                			if(s && s !== "false") {
                				node.setAttribute('aria-selected', true);
                			}
                			if(!obj.children.length && obj.state.loaded) {
                				c += ' jstree-leaf';
                			}
                			else {
                				c += obj.state.opened ? ' jstree-open' : ' jstree-closed';
                				node.setAttribute('aria-expanded', obj.state.opened);
                			}
                			if(obj.parent !== null && m[obj.parent].children[m[obj.parent].children.length - 1] === obj.id) {
                				c += ' jstree-last';
                			}
                			node.id = obj.id;
                			node.className = c;
                			c = ( obj.state.selected ? ' jstree-clicked' : '') + ( obj.state.disabled ? ' jstree-disabled' : '');
                			for(j in obj.a_attr) {
                				if(obj.a_attr.hasOwnProperty(j)) {
                					if(j === 'href' && obj.a_attr[j] === '#') { continue; }
                					if(j !== 'class') {
                						node.childNodes[1].setAttribute(j, obj.a_attr[j]);
                					}
                					else {
                						c += ' ' + obj.a_attr[j];
                					}
                				}
                			}
                			if(c.length) {
                				node.childNodes[1].className = 'jstree-anchor ' + c;
                			}
                			if((obj.icon && obj.icon !== true) || obj.icon === false) {
                				if(obj.icon === false) {
                					node.childNodes[1].childNodes[0].className += ' jstree-themeicon-hidden';
                				}
                				else if(obj.icon.indexOf('/') === -1 && obj.icon.indexOf('.') === -1) {
                					node.childNodes[1].childNodes[0].className += ' ' + obj.icon + ' jstree-themeicon-custom';
                				}
                				else {
                					node.childNodes[1].childNodes[0].style.backgroundImage = 'url('+obj.icon+')';
                					node.childNodes[1].childNodes[0].style.backgroundPosition = 'center center';
                					node.childNodes[1].childNodes[0].style.backgroundSize = 'auto';
                					node.childNodes[1].childNodes[0].className += ' jstree-themeicon-custom';
                				}
                			}
                			//node.childNodes[1].appendChild(d.createTextNode(obj.text));
                			node.childNodes[1].innerHTML += obj.text;
                			// if(obj.data) { $.data(node, obj.data); } // always work with node's data, no need to touch jquery store
                
                			if(deep && obj.children.length && obj.state.opened) {
                				k = d.createElement('UL');
                				k.setAttribute('role', 'group');
                				k.className = 'jstree-children';
                				for(i = 0, j = obj.children.length; i < j; i++) {
                					k.appendChild(this.redraw_node(obj.children[i], deep, true));
                				}
                				node.appendChild(k);
                			}
                			if(old) {
                				node.appendChild(old);
                			}
                			if(!is_callback) {
                				// append back using par / ind
                				if(!par) {
                					par = this.element[0];
                				}
                				if(!par.getElementsByTagName('UL').length) {
                					i = d.createElement('UL');
                					i.setAttribute('role', 'group');
                					i.className = 'jstree-children';
                					par.appendChild(i);
                					par = i;
                				}
                				else {
                					par = par.getElementsByTagName('UL')[0];
                				}
                
                				if(ind < par.childNodes.length) {
                					par.insertBefore(node, par.childNodes[ind]);
                				}
                				else {
                					par.appendChild(node);
                				}
                				if(f) {
                					node.childNodes[1].focus();
                				}
                			}
                			return node;
                		},
                		/**
                		 * opens a node, revaling its children. If the node is not loaded it will be loaded and opened once ready.
                		 * @name open_node(obj [, callback, animation])
                		 * @param {mixed} obj the node to open
                		 * @param {Function} callback a function to execute once the node is opened
                		 * @param {Number} animation the animation duration in milliseconds when opening the node (overrides the `core.animation` setting). Use `false` for no animation.
                		 * @trigger open_node.jstree, after_open.jstree
                		 */
                		open_node : function (obj, callback, animation) {
                			var t1, t2, d, t;
                			if($.isArray(obj)) {
                				obj = obj.slice();
                				for(t1 = 0, t2 = obj.length; t1 < t2; t1++) {
                					this.open_node(obj[t1], callback, animation);
                				}
                				return true;
                			}
                			obj = this.get_node(obj);
                			if(!obj || obj.id === '#') {
                				return false;
                			}
                			animation = animation === undefined ? this.settings.core.animation : animation;
                			if(!this.is_closed(obj)) {
                				if(callback) {
                					callback.call(this, obj, false);
                				}
                				return false;
                			}
                			if(!this.is_loaded(obj)) {
                				if(this.is_loading(obj)) {
                					return setTimeout($.proxy(function () {
                						this.open_node(obj, callback, animation);
                					}, this), 500);
                				}
                				this.load_node(obj, function (o, ok) {
                					return ok ? this.open_node(o, callback, animation) : (callback ? callback.call(this, o, false) : false);
                				});
                			}
                			else {
                				d = this.get_node(obj, true);
                				t = this;
                				if(d.length) {
                					if(obj.children.length && !this._firstChild(d.children('ul')[0])) {
                						obj.state.opened = true;
                						this.redraw_node(obj, true);
                						d = this.get_node(obj, true);
                					}
                					if(!animation) {
                						d[0].className = d[0].className.replace('jstree-closed', 'jstree-open');
                						d[0].setAttribute("aria-expanded", true);
                					}
                					else {
                						d
                							.children("ul").css("display","none").end()
                							.removeClass("jstree-closed").addClass("jstree-open").attr("aria-expanded", true)
                							.children("ul").stop(true, true)
                								.slideDown(animation, function () {
                									this.style.display = "";
                									t.trigger("after_open", { "node" : obj });
                								});
                					}
                				}
                				obj.state.opened = true;
                				if(callback) {
                					callback.call(this, obj, true);
                				}
                				/**
                				 * triggered when a node is opened (if there is an animation it will not be completed yet)
                				 * @event
                				 * @name open_node.jstree
                				 * @param {Object} node the opened node
                				 */
                				this.trigger('open_node', { "node" : obj });
                				if(!animation || !d.length) {
                					/**
                					 * triggered when a node is opened and the animation is complete
                					 * @event
                					 * @name after_open.jstree
                					 * @param {Object} node the opened node
                					 */
                					this.trigger("after_open", { "node" : obj });
                				}
                			}
                		},
                		/**
                		 * opens every parent of a node (node should be loaded)
                		 * @name _open_to(obj)
                		 * @param {mixed} obj the node to reveal
                		 * @private
                		 */
                		_open_to : function (obj) {
                			obj = this.get_node(obj);
                			if(!obj || obj.id === '#') {
                				return false;
                			}
                			var i, j, p = obj.parents;
                			for(i = 0, j = p.length; i < j; i+=1) {
                				if(i !== '#') {
                					this.open_node(p[i], false, 0);
                				}
                			}
                			return $(document.getElementById(obj.id));
                		},
                		/**
                		 * closes a node, hiding its children
                		 * @name close_node(obj [, animation])
                		 * @param {mixed} obj the node to close
                		 * @param {Number} animation the animation duration in milliseconds when closing the node (overrides the `core.animation` setting). Use `false` for no animation.
                		 * @trigger close_node.jstree, after_close.jstree
                		 */
                		close_node : function (obj, animation) {
                			var t1, t2, t, d;
                			if($.isArray(obj)) {
                				obj = obj.slice();
                				for(t1 = 0, t2 = obj.length; t1 < t2; t1++) {
                					this.close_node(obj[t1], animation);
                				}
                				return true;
                			}
                			obj = this.get_node(obj);
                			if(!obj || obj.id === '#') {
                				return false;
                			}
                			animation = animation === undefined ? this.settings.core.animation : animation;
                			t = this;
                			d = this.get_node(obj, true);
                			if(d.length) {
                				if(!animation) {
                					d[0].className = d[0].className.replace('jstree-open', 'jstree-closed');
                					d.attr("aria-expanded", false).children('ul').remove();
                				}
                				else {
                					d
                						.children("ul").attr("style","display:block !important").end()
                						.removeClass("jstree-open").addClass("jstree-closed").attr("aria-expanded", false)
                						.children("ul").stop(true, true).slideUp(animation, function () {
                							this.style.display = "";
                							d.children('ul').remove();
                							t.trigger("after_close", { "node" : obj });
                						});
                				}
                			}
                			obj.state.opened = false;
                			/**
                			 * triggered when a node is closed (if there is an animation it will not be complete yet)
                			 * @event
                			 * @name close_node.jstree
                			 * @param {Object} node the closed node
                			 */
                			this.trigger('close_node',{ "node" : obj });
                			if(!animation || !d.length) {
                				/**
                				 * triggered when a node is closed and the animation is complete
                				 * @event
                				 * @name after_close.jstree
                				 * @param {Object} node the closed node
                				 */
                				this.trigger("after_close", { "node" : obj });
                			}
                		},
                		/**
                		 * toggles a node - closing it if it is open, opening it if it is closed
                		 * @name toggle_node(obj)
                		 * @param {mixed} obj the node to toggle
                		 */
                		toggle_node : function (obj) {
                			var t1, t2;
                			if($.isArray(obj)) {
                				obj = obj.slice();
                				for(t1 = 0, t2 = obj.length; t1 < t2; t1++) {
                					this.toggle_node(obj[t1]);
                				}
                				return true;
                			}
                			if(this.is_closed(obj)) {
                				return this.open_node(obj);
                			}
                			if(this.is_open(obj)) {
                				return this.close_node(obj);
                			}
                		},
                		/**
                		 * opens all nodes within a node (or the tree), revaling their children. If the node is not loaded it will be loaded and opened once ready.
                		 * @name open_all([obj, animation, original_obj])
                		 * @param {mixed} obj the node to open recursively, omit to open all nodes in the tree
                		 * @param {Number} animation the animation duration in milliseconds when opening the nodes, the default is no animation
                		 * @param {jQuery} reference to the node that started the process (internal use)
                		 * @trigger open_all.jstree
                		 */
                		open_all : function (obj, animation, original_obj) {
                			if(!obj) { obj = '#'; }
                			obj = this.get_node(obj);
                			if(!obj) { return false; }
                			var dom = obj.id === '#' ? this.get_container_ul() : this.get_node(obj, true), i, j, _this;
                			if(!dom.length) {
                				for(i = 0, j = obj.children_d.length; i < j; i++) {
                					if(this.is_closed(this._model.data[obj.children_d[i]])) {
                						this._model.data[obj.children_d[i]].state.opened = true;
                					}
                				}
                				return this.trigger('open_all', { "node" : obj });
                			}
                			original_obj = original_obj || dom;
                			_this = this;
                			dom = this.is_closed(obj) ? dom.find('li.jstree-closed').addBack() : dom.find('li.jstree-closed');
                			dom.each(function () {
                				_this.open_node(
                					this,
                					function(node, status) { if(status && this.is_parent(node)) { this.open_all(node, animation, original_obj); } },
                					animation || 0
                				);
                			});
                			if(original_obj.find('li.jstree-closed').length === 0) {
                				/**
                				 * triggered when an `open_all` call completes
                				 * @event
                				 * @name open_all.jstree
                				 * @param {Object} node the opened node
                				 */
                				this.trigger('open_all', { "node" : this.get_node(original_obj) });
                			}
                		},
                		/**
                		 * closes all nodes within a node (or the tree), revaling their children
                		 * @name close_all([obj, animation])
                		 * @param {mixed} obj the node to close recursively, omit to close all nodes in the tree
                		 * @param {Number} animation the animation duration in milliseconds when closing the nodes, the default is no animation
                		 * @trigger close_all.jstree
                		 */
                		close_all : function (obj, animation) {
                			if(!obj) { obj = '#'; }
                			obj = this.get_node(obj);
                			if(!obj) { return false; }
                			var dom = obj.id === '#' ? this.get_container_ul() : this.get_node(obj, true),
                				_this = this, i, j;
                			if(!dom.length) {
                				for(i = 0, j = obj.children_d.length; i < j; i++) {
                					this._model.data[obj.children_d[i]].state.opened = false;
                				}
                				return this.trigger('close_all', { "node" : obj });
                			}
                			dom = this.is_open(obj) ? dom.find('li.jstree-open').addBack() : dom.find('li.jstree-open');
                			dom.vakata_reverse().each(function () { _this.close_node(this, animation || 0); });
                			/**
                			 * triggered when an `close_all` call completes
                			 * @event
                			 * @name close_all.jstree
                			 * @param {Object} node the closed node
                			 */
                			this.trigger('close_all', { "node" : obj });
                		},
                		/**
                		 * checks if a node is disabled (not selectable)
                		 * @name is_disabled(obj)
                		 * @param  {mixed} obj
                		 * @return {Boolean}
                		 */
                		is_disabled : function (obj) {
                			obj = this.get_node(obj);
                			return obj && obj.state && obj.state.disabled;
                		},
                		/**
                		 * enables a node - so that it can be selected
                		 * @name enable_node(obj)
                		 * @param {mixed} obj the node to enable
                		 * @trigger enable_node.jstree
                		 */
                		enable_node : function (obj) {
                			var t1, t2;
                			if($.isArray(obj)) {
                				obj = obj.slice();
                				for(t1 = 0, t2 = obj.length; t1 < t2; t1++) {
                					this.enable_node(obj[t1]);
                				}
                				return true;
                			}
                			obj = this.get_node(obj);
                			if(!obj || obj.id === '#') {
                				return false;
                			}
                			obj.state.disabled = false;
                			this.get_node(obj,true).children('.jstree-anchor').removeClass('jstree-disabled');
                			/**
                			 * triggered when an node is enabled
                			 * @event
                			 * @name enable_node.jstree
                			 * @param {Object} node the enabled node
                			 */
                			this.trigger('enable_node', { 'node' : obj });
                		},
                		/**
                		 * disables a node - so that it can not be selected
                		 * @name disable_node(obj)
                		 * @param {mixed} obj the node to disable
                		 * @trigger disable_node.jstree
                		 */
                		disable_node : function (obj) {
                			var t1, t2;
                			if($.isArray(obj)) {
                				obj = obj.slice();
                				for(t1 = 0, t2 = obj.length; t1 < t2; t1++) {
                					this.disable_node(obj[t1]);
                				}
                				return true;
                			}
                			obj = this.get_node(obj);
                			if(!obj || obj.id === '#') {
                				return false;
                			}
                			obj.state.disabled = true;
                			this.get_node(obj,true).children('.jstree-anchor').addClass('jstree-disabled');
                			/**
                			 * triggered when an node is disabled
                			 * @event
                			 * @name disable_node.jstree
                			 * @param {Object} node the disabled node
                			 */
                			this.trigger('disable_node', { 'node' : obj });
                		},
                		/**
                		 * called when a node is selected by the user. Used internally.
                		 * @private
                		 * @name activate_node(obj, e)
                		 * @param {mixed} obj the node
                		 * @param {Object} e the related event
                		 * @trigger activate_node.jstree
                		 */
                		activate_node : function (obj, e) {
                			if(this.is_disabled(obj)) {
                				return false;
                			}
                			if(!this.settings.core.multiple || (!e.metaKey && !e.ctrlKey && !e.shiftKey) || (e.shiftKey && (!this._data.core.last_clicked || !this.get_parent(obj) || this.get_parent(obj) !== this._data.core.last_clicked.parent ) )) {
                				if(!this.settings.core.multiple && (e.metaKey || e.ctrlKey || e.shiftKey) && this.is_selected(obj)) {
                					this.deselect_node(obj, false, false, e);
                				}
                				else {
                					this.deselect_all(true);
                					this.select_node(obj, false, false, e);
                					this._data.core.last_clicked = this.get_node(obj);
                				}
                			}
                			else {
                				if(e.shiftKey) {
                					var o = this.get_node(obj).id,
                						l = this._data.core.last_clicked.id,
                						p = this.get_node(this._data.core.last_clicked.parent).children,
                						c = false,
                						i, j;
                					for(i = 0, j = p.length; i < j; i += 1) {
                						// separate IFs work whem o and l are the same
                						if(p[i] === o) {
                							c = !c;
                						}
                						if(p[i] === l) {
                							c = !c;
                						}
                						if(c || p[i] === o || p[i] === l) {
                							this.select_node(p[i], false, false, e);
                						}
                						else {
                							this.deselect_node(p[i], false, false, e);
                						}
                					}
                				}
                				else {
                					if(!this.is_selected(obj)) {
                						this.select_node(obj, false, false, e);
                					}
                					else {
                						this.deselect_node(obj, false, false, e);
                					}
                				}
                			}
                			/**
                			 * triggered when an node is clicked or intercated with by the user
                			 * @event
                			 * @name activate_node.jstree
                			 * @param {Object} node
                			 */
                			this.trigger('activate_node', { 'node' : this.get_node(obj) });
                		},
                		/**
                		 * applies the hover state on a node, called when a node is hovered by the user. Used internally.
                		 * @private
                		 * @name hover_node(obj)
                		 * @param {mixed} obj
                		 * @trigger hover_node.jstree
                		 */
                		hover_node : function (obj) {
                			obj = this.get_node(obj, true);
                			if(!obj || !obj.length || obj.children('.jstree-hovered').length) {
                				return false;
                			}
                			var o = this.element.find('.jstree-hovered'), t = this.element;
                			if(o && o.length) { this.dehover_node(o); }
                
                			obj.children('.jstree-anchor').addClass('jstree-hovered');
                			/**
                			 * triggered when an node is hovered
                			 * @event
                			 * @name hover_node.jstree
                			 * @param {Object} node
                			 */
                			this.trigger('hover_node', { 'node' : this.get_node(obj) });
                			setTimeout(function () { t.attr('aria-activedescendant', obj[0].id); obj.attr('aria-selected', true); }, 0);
                		},
                		/**
                		 * removes the hover state from a nodecalled when a node is no longer hovered by the user. Used internally.
                		 * @private
                		 * @name dehover_node(obj)
                		 * @param {mixed} obj
                		 * @trigger dehover_node.jstree
                		 */
                		dehover_node : function (obj) {
                			obj = this.get_node(obj, true);
                			if(!obj || !obj.length || !obj.children('.jstree-hovered').length) {
                				return false;
                			}
                			obj.attr('aria-selected', false).children('.jstree-anchor').removeClass('jstree-hovered');
                			/**
                			 * triggered when an node is no longer hovered
                			 * @event
                			 * @name dehover_node.jstree
                			 * @param {Object} node
                			 */
                			this.trigger('dehover_node', { 'node' : this.get_node(obj) });
                		},
                		/**
                		 * select a node
                		 * @name select_node(obj [, supress_event, prevent_open])
                		 * @param {mixed} obj an array can be used to select multiple nodes
                		 * @param {Boolean} supress_event if set to `true` the `changed.jstree` event won't be triggered
                		 * @param {Boolean} prevent_open if set to `true` parents of the selected node won't be opened
                		 * @trigger select_node.jstree, changed.jstree
                		 */
                		select_node : function (obj, supress_event, prevent_open, e) {
                			var dom, t1, t2, th;
                			if($.isArray(obj)) {
                				obj = obj.slice();
                				for(t1 = 0, t2 = obj.length; t1 < t2; t1++) {
                					this.select_node(obj[t1], supress_event, prevent_open, e);
                				}
                				return true;
                			}
                			obj = this.get_node(obj);
                			if(!obj || obj.id === '#') {
                				return false;
                			}
                			dom = this.get_node(obj, true);
                			if(!obj.state.selected) {
                				obj.state.selected = true;
                				this._data.core.selected.push(obj.id);
                				if(!prevent_open) {
                					dom = this._open_to(obj);
                				}
                				if(dom && dom.length) {
                					dom.children('.jstree-anchor').addClass('jstree-clicked');
                				}
                				/**
                				 * triggered when an node is selected
                				 * @event
                				 * @name select_node.jstree
                				 * @param {Object} node
                				 * @param {Array} selected the current selection
                				 * @param {Object} event the event (if any) that triggered this select_node
                				 */
                				this.trigger('select_node', { 'node' : obj, 'selected' : this._data.core.selected, 'event' : e });
                				if(!supress_event) {
                					/**
                					 * triggered when selection changes
                					 * @event
                					 * @name changed.jstree
                					 * @param {Object} node
                					 * @param {Object} action the action that caused the selection to change
                					 * @param {Array} selected the current selection
                					 * @param {Object} event the event (if any) that triggered this changed event
                					 */
                					this.trigger('changed', { 'action' : 'select_node', 'node' : obj, 'selected' : this._data.core.selected, 'event' : e });
                				}
                			}
                		},
                		/**
                		 * deselect a node
                		 * @name deselect_node(obj [, supress_event])
                		 * @param {mixed} obj an array can be used to deselect multiple nodes
                		 * @param {Boolean} supress_event if set to `true` the `changed.jstree` event won't be triggered
                		 * @trigger deselect_node.jstree, changed.jstree
                		 */
                		deselect_node : function (obj, supress_event, e) {
                			var t1, t2, dom;
                			if($.isArray(obj)) {
                				obj = obj.slice();
                				for(t1 = 0, t2 = obj.length; t1 < t2; t1++) {
                					this.deselect_node(obj[t1], supress_event, e);
                				}
                				return true;
                			}
                			obj = this.get_node(obj);
                			if(!obj || obj.id === '#') {
                				return false;
                			}
                			dom = this.get_node(obj, true);
                			if(obj.state.selected) {
                				obj.state.selected = false;
                				this._data.core.selected = $.vakata.array_remove_item(this._data.core.selected, obj.id);
                				if(dom.length) {
                					dom.children('.jstree-anchor').removeClass('jstree-clicked');
                				}
                				/**
                				 * triggered when an node is deselected
                				 * @event
                				 * @name deselect_node.jstree
                				 * @param {Object} node
                				 * @param {Array} selected the current selection
                				 * @param {Object} event the event (if any) that triggered this deselect_node
                				 */
                				this.trigger('deselect_node', { 'node' : obj, 'selected' : this._data.core.selected, 'event' : e });
                				if(!supress_event) {
                					this.trigger('changed', { 'action' : 'deselect_node', 'node' : obj, 'selected' : this._data.core.selected, 'event' : e });
                				}
                			}
                		},
                		/**
                		 * select all nodes in the tree
                		 * @name select_all([supress_event])
                		 * @param {Boolean} supress_event if set to `true` the `changed.jstree` event won't be triggered
                		 * @trigger select_all.jstree, changed.jstree
                		 */
                		select_all : function (supress_event) {
                			var tmp = this._data.core.selected.concat([]), i, j;
                			this._data.core.selected = this._model.data['#'].children_d.concat();
                			for(i = 0, j = this._data.core.selected.length; i < j; i++) {
                				if(this._model.data[this._data.core.selected[i]]) {
                					this._model.data[this._data.core.selected[i]].state.selected = true;
                				}
                			}
                			this.redraw(true);
                			/**
                			 * triggered when all nodes are selected
                			 * @event
                			 * @name select_all.jstree
                			 * @param {Array} selected the current selection
                			 */
                			this.trigger('select_all', { 'selected' : this._data.core.selected });
                			if(!supress_event) {
                				this.trigger('changed', { 'action' : 'select_all', 'selected' : this._data.core.selected, 'old_selection' : tmp });
                			}
                		},
                		/**
                		 * deselect all selected nodes
                		 * @name deselect_all([supress_event])
                		 * @param {Boolean} supress_event if set to `true` the `changed.jstree` event won't be triggered
                		 * @trigger deselect_all.jstree, changed.jstree
                		 */
                		deselect_all : function (supress_event) {
                			var tmp = this._data.core.selected.concat([]), i, j;
                			for(i = 0, j = this._data.core.selected.length; i < j; i++) {
                				if(this._model.data[this._data.core.selected[i]]) {
                					this._model.data[this._data.core.selected[i]].state.selected = false;
                				}
                			}
                			this._data.core.selected = [];
                			this.element.find('.jstree-clicked').removeClass('jstree-clicked');
                			/**
                			 * triggered when all nodes are deselected
                			 * @event
                			 * @name deselect_all.jstree
                			 * @param {Object} node the previous selection
                			 * @param {Array} selected the current selection
                			 */
                			this.trigger('deselect_all', { 'selected' : this._data.core.selected, 'node' : tmp });
                			if(!supress_event) {
                				this.trigger('changed', { 'action' : 'deselect_all', 'selected' : this._data.core.selected, 'old_selection' : tmp });
                			}
                		},
                		/**
                		 * checks if a node is selected
                		 * @name is_selected(obj)
                		 * @param  {mixed}  obj
                		 * @return {Boolean}
                		 */
                		is_selected : function (obj) {
                			obj = this.get_node(obj);
                			if(!obj || obj.id === '#') {
                				return false;
                			}
                			return obj.state.selected;
                		},
                		/**
                		 * get an array of all selected node IDs
                		 * @name get_selected([full])
                		 * @param  {mixed}  full if set to `true` the returned array will consist of the full node objects, otherwise - only IDs will be returned
                		 * @return {Array}
                		 */
                		get_selected : function (full) {
                			return full ? $.map(this._data.core.selected, $.proxy(function (i) { return this.get_node(i); }, this)) : this._data.core.selected;
                		},
                		/**
                		 * gets the current state of the tree so that it can be restored later with `set_state(state)`. Used internally.
                		 * @name get_state()
                		 * @private
                		 * @return {Object}
                		 */
                		get_state : function () {
                			var state	= {
                				'core' : {
                					'open' : [],
                					'scroll' : {
                						'left' : this.element.scrollLeft(),
                						'top' : this.element.scrollTop()
                					},
                					/*!
                					'themes' : {
                						'name' : this.get_theme(),
                						'icons' : this._data.core.themes.icons,
                						'dots' : this._data.core.themes.dots
                					},
                					*/
                					'selected' : []
                				}
                			}, i;
                			for(i in this._model.data) {
                				if(this._model.data.hasOwnProperty(i)) {
                					if(i !== '#') {
                						if(this._model.data[i].state.opened) {
                							state.core.open.push(i);
                						}
                						if(this._model.data[i].state.selected) {
                							state.core.selected.push(i);
                						}
                					}
                				}
                			}
                			return state;
                		},
                		/**
                		 * sets the state of the tree. Used internally.
                		 * @name set_state(state [, callback])
                		 * @private
                		 * @param {Object} state the state to restore
                		 * @param {Function} callback an optional function to execute once the state is restored.
                		 * @trigger set_state.jstree
                		 */
                		set_state : function (state, callback) {
                			if(state) {
                				if(state.core) {
                					var res, n, t, _this;
                					if(state.core.open) {
                						if(!$.isArray(state.core.open)) {
                							delete state.core.open;
                							this.set_state(state, callback);
                							return false;
                						}
                						res = true;
                						n = false;
                						t = this;
                						$.each(state.core.open.concat([]), function (i, v) {
                							n = t.get_node(v);
                							if(n) {
                								if(t.is_loaded(v)) {
                									if(t.is_closed(v)) {
                										t.open_node(v, false, 0);
                									}
                									if(state && state.core && state.core.open) {
                										$.vakata.array_remove_item(state.core.open, v);
                									}
                								}
                								else {
                									if(!t.is_loading(v)) {
                										t.open_node(v, $.proxy(function () { this.set_state(state, callback); }, t), 0);
                									}
                									// there will be some async activity - so wait for it
                									res = false;
                								}
                							}
                						});
                						if(res) {
                							delete state.core.open;
                							this.set_state(state, callback);
                						}
                						return false;
                					}
                					if(state.core.scroll) {
                						if(state.core.scroll && state.core.scroll.left !== undefined) {
                							this.element.scrollLeft(state.core.scroll.left);
                						}
                						if(state.core.scroll && state.core.scroll.top !== undefined) {
                							this.element.scrollTop(state.core.scroll.top);
                						}
                						delete state.core.scroll;
                						this.set_state(state, callback);
                						return false;
                					}
                					/*!
                					if(state.core.themes) {
                						if(state.core.themes.name) {
                							this.set_theme(state.core.themes.name);
                						}
                						if(typeof state.core.themes.dots !== 'undefined') {
                							this[ state.core.themes.dots ? "show_dots" : "hide_dots" ]();
                						}
                						if(typeof state.core.themes.icons !== 'undefined') {
                							this[ state.core.themes.icons ? "show_icons" : "hide_icons" ]();
                						}
                						delete state.core.themes;
                						delete state.core.open;
                						this.set_state(state, callback);
                						return false;
                					}
                					*/
                					if(state.core.selected) {
                						_this = this;
                						this.deselect_all();
                						$.each(state.core.selected, function (i, v) {
                							_this.select_node(v);
                						});
                						delete state.core.selected;
                						this.set_state(state, callback);
                						return false;
                					}
                					if($.isEmptyObject(state.core)) {
                						delete state.core;
                						this.set_state(state, callback);
                						return false;
                					}
                				}
                				if($.isEmptyObject(state)) {
                					state = null;
                					if(callback) { callback.call(this); }
                					/**
                					 * triggered when a `set_state` call completes
                					 * @event
                					 * @name set_state.jstree
                					 */
                					this.trigger('set_state');
                					return false;
                				}
                				return true;
                			}
                			return false;
                		},
                		/**
                		 * refreshes the tree - all nodes are reloaded with calls to `load_node`.
                		 * @name refresh()
                		 * @param {Boolean} skip_loading an option to skip showing the loading indicator
                		 * @trigger refresh.jstree
                		 */
                		refresh : function (skip_loading) {
                			this._data.core.state = this.get_state();
                			this._cnt = 0;
                			this._model.data = {
                				'#' : {
                					id : '#',
                					parent : null,
                					parents : [],
                					children : [],
                					children_d : [],
                					state : { loaded : false }
                				}
                			};
                			var c = this.get_container_ul()[0].className;
                			if(!skip_loading) {
                				this.element.html("<"+"ul class='jstree-container-ul'><"+"li class='jstree-initial-node jstree-loading jstree-leaf jstree-last'><i class='jstree-icon jstree-ocl'></i><"+"a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>" + this.get_string("Loading ...") + "</a></li></ul>");
                			}
                			this.load_node('#', function (o, s) {
                				if(s) {
                					this.get_container_ul()[0].className = c;
                					this.set_state($.extend(true, {}, this._data.core.state), function () {
                						/**
                						 * triggered when a `refresh` call completes
                						 * @event
                						 * @name refresh.jstree
                						 */
                						this.trigger('refresh');
                					});
                				}
                				this._data.core.state = null;
                			});
                		},
                		/**
                		 * set (change) the ID of a node
                		 * @name set_id(obj, id)
                		 * @param  {mixed} obj the node
                		 * @param  {String} id the new ID
                		 * @return {Boolean}
                		 */
                		set_id : function (obj, id) {
                			obj = this.get_node(obj);
                			if(!obj || obj.id === '#') { return false; }
                			var i, j, m = this._model.data;
                			// update parents (replace current ID with new one in children and children_d)
                			m[obj.parent].children[$.inArray(obj.id, m[obj.parent].children)] = id;
                			for(i = 0, j = obj.parents.length; i < j; i++) {
                				m[obj.parents[i]].children_d[$.inArray(obj.id, m[obj.parents[i]].children_d)] = id;
                			}
                			// update children (replace current ID with new one in parent and parents)
                			for(i = 0, j = obj.children.length; i < j; i++) {
                				m[obj.children[i]].parent = id;
                			}
                			for(i = 0, j = obj.children_d.length; i < j; i++) {
                				m[obj.children_d[i]].parents[$.inArray(obj.id, m[obj.children_d[i]].parents)] = id;
                			}
                			i = $.inArray(obj.id, this._data.core.selected);
                			if(i !== -1) { this._data.core.selected[i] = id; }
                			// update model and obj itself (obj.id, this._model.data[KEY])
                			i = this.get_node(obj.id, true);
                			if(i) {
                				i.attr('id', id);
                			}
                			delete m[obj.id];
                			obj.id = id;
                			m[id] = obj;
                			return true;
                		},
                		/**
                		 * get the text value of a node
                		 * @name get_text(obj)
                		 * @param  {mixed} obj the node
                		 * @return {String}
                		 */
                		get_text : function (obj) {
                			obj = this.get_node(obj);
                			return (!obj || obj.id === '#') ? false : obj.text;
                		},
                		/**
                		 * set the text value of a node. Used internally, please use `rename_node(obj, val)`.
                		 * @private
                		 * @name set_text(obj, val)
                		 * @param  {mixed} obj the node, you can pass an array to set the text on multiple nodes
                		 * @param  {String} val the new text value
                		 * @return {Boolean}
                		 * @trigger set_text.jstree
                		 */
                		set_text : function (obj, val) {
                			var t1, t2, dom, tmp;
                			if($.isArray(obj)) {
                				obj = obj.slice();
                				for(t1 = 0, t2 = obj.length; t1 < t2; t1++) {
                					this.set_text(obj[t1], val);
                				}
                				return true;
                			}
                			obj = this.get_node(obj);
                			if(!obj || obj.id === '#') { return false; }
                			obj.text = val;
                			dom = this.get_node(obj, true);
                			if(dom.length) {
                				dom = dom.children(".jstree-anchor:eq(0)");
                				tmp = dom.children("I").clone();
                				dom.html(val).prepend(tmp);
                				/**
                				 * triggered when a node text value is changed
                				 * @event
                				 * @name set_text.jstree
                				 * @param {Object} obj
                				 * @param {String} text the new value
                				 */
                				this.trigger('set_text',{ "obj" : obj, "text" : val });
                			}
                			return true;
                		},
                		/**
                		 * gets a JSON representation of a node (or the whole tree)
                		 * @name get_json([obj, options])
                		 * @param  {mixed} obj
                		 * @param  {Object} options
                		 * @param  {Boolean} options.no_state do not return state information
                		 * @param  {Boolean} options.no_id do not return ID
                		 * @param  {Boolean} options.no_children do not include children
                		 * @param  {Boolean} options.no_data do not include node data
                		 * @param  {Boolean} options.flat return flat JSON instead of nested
                		 * @return {Object}
                		 */
                		get_json : function (obj, options, flat) {
                			obj = this.get_node(obj || '#');
                			if(!obj) { return false; }
                			if(options && options.flat && !flat) { flat = []; }
                			var tmp = {
                				'id' : obj.id,
                				'text' : obj.text,
                				'icon' : this.get_icon(obj),
                				'li_attr' : obj.li_attr,
                				'a_attr' : obj.a_attr,
                				'state' : {},
                				'data' : options && options.no_data ? false : obj.data
                				//( this.get_node(obj, true).length ? this.get_node(obj, true).data() : obj.data ),
                			}, i, j;
                			if(options && options.flat) {
                				tmp.parent = obj.parent;
                			}
                			else {
                				tmp.children = [];
                			}
                			if(!options || !options.no_state) {
                				for(i in obj.state) {
                					if(obj.state.hasOwnProperty(i)) {
                						tmp.state[i] = obj.state[i];
                					}
                				}
                			}
                			if(options && options.no_id) {
                				delete tmp.id;
                				if(tmp.li_attr && tmp.li_attr.id) {
                					delete tmp.li_attr.id;
                				}
                			}
                			if(options && options.flat && obj.id !== '#') {
                				flat.push(tmp);
                			}
                			if(!options || !options.no_children) {
                				for(i = 0, j = obj.children.length; i < j; i++) {
                					if(options && options.flat) {
                						this.get_json(obj.children[i], options, flat);
                					}
                					else {
                						tmp.children.push(this.get_json(obj.children[i], options));
                					}
                				}
                			}
                			return options && options.flat ? flat : (obj.id === '#' ? tmp.children : tmp);
                		},
                		/**
                		 * create a new node (do not confuse with load_node)
                		 * @name create_node([obj, node, pos, callback, is_loaded])
                		 * @param  {mixed}   par       the parent node
                		 * @param  {mixed}   node      the data for the new node (a valid JSON object, or a simple string with the name)
                		 * @param  {mixed}   pos       the index at which to insert the node, "first" and "last" are also supported, default is "last"
                		 * @param  {Function} callback a function to be called once the node is created
                		 * @param  {Boolean} is_loaded internal argument indicating if the parent node was succesfully loaded
                		 * @return {String}            the ID of the newly create node
                		 * @trigger model.jstree, create_node.jstree
                		 */
                		create_node : function (par, node, pos, callback, is_loaded) {
                			par = this.get_node(par);
                			if(!par) { return false; }
                			pos = pos === undefined ? "last" : pos;
                			if(!pos.toString().match(/^(before|after)$/) && !is_loaded && !this.is_loaded(par)) {
                				return this.load_node(par, function () { this.create_node(par, node, pos, callback, true); });
                			}
                			if(!node) { node = { "text" : this.get_string('New node') }; }
                			if(node.text === undefined) { node.text = this.get_string('New node'); }
                			var tmp, dpc, i, j;
                
                			if(par.id === '#') {
                				if(pos === "before") { pos = "first"; }
                				if(pos === "after") { pos = "last"; }
                			}
                			switch(pos) {
                				case "before":
                					tmp = this.get_node(par.parent);
                					pos = $.inArray(par.id, tmp.children);
                					par = tmp;
                					break;
                				case "after" :
                					tmp = this.get_node(par.parent);
                					pos = $.inArray(par.id, tmp.children) + 1;
                					par = tmp;
                					break;
                				case "inside":
                				case "first":
                					pos = 0;
                					break;
                				case "last":
                					pos = par.children.length;
                					break;
                				default:
                					if(!pos) { pos = 0; }
                					break;
                			}
                			if(pos > par.children.length) { pos = par.children.length; }
                			if(!node.id) { node.id = true; }
                			if(!this.check("create_node", node, par, pos)) {
                				this.settings.core.error.call(this, this._data.core.last_error);
                				return false;
                			}
                			if(node.id === true) { delete node.id; }
                			node = this._parse_model_from_json(node, par.id, par.parents.concat());
                			if(!node) { return false; }
                			tmp = this.get_node(node);
                			dpc = [];
                			dpc.push(node);
                			dpc = dpc.concat(tmp.children_d);
                			this.trigger('model', { "nodes" : dpc, "parent" : par.id });
                
                			par.children_d = par.children_d.concat(dpc);
                			for(i = 0, j = par.parents.length; i < j; i++) {
                				this._model.data[par.parents[i]].children_d = this._model.data[par.parents[i]].children_d.concat(dpc);
                			}
                			node = tmp;
                			tmp = [];
                			for(i = 0, j = par.children.length; i < j; i++) {
                				tmp[i >= pos ? i+1 : i] = par.children[i];
                			}
                			tmp[pos] = node.id;
                			par.children = tmp;
                
                			this.redraw_node(par, true);
                			if(callback) { callback.call(this, this.get_node(node)); }
                			/**
                			 * triggered when a node is created
                			 * @event
                			 * @name create_node.jstree
                			 * @param {Object} node
                			 * @param {String} parent the parent's ID
                			 * @param {Number} position the position of the new node among the parent's children
                			 */
                			this.trigger('create_node', { "node" : this.get_node(node), "parent" : par.id, "position" : pos });
                			return node.id;
                		},
                		/**
                		 * set the text value of a node
                		 * @name rename_node(obj, val)
                		 * @param  {mixed} obj the node, you can pass an array to rename multiple nodes to the same name
                		 * @param  {String} val the new text value
                		 * @return {Boolean}
                		 * @trigger rename_node.jstree
                		 */
                		rename_node : function (obj, val) {
                			var t1, t2, old;
                			if($.isArray(obj)) {
                				obj = obj.slice();
                				for(t1 = 0, t2 = obj.length; t1 < t2; t1++) {
                					this.rename_node(obj[t1], val);
                				}
                				return true;
                			}
                			obj = this.get_node(obj);
                			if(!obj || obj.id === '#') { return false; }
                			old = obj.text;
                			if(!this.check("rename_node", obj, this.get_parent(obj), val)) {
                				this.settings.core.error.call(this, this._data.core.last_error);
                				return false;
                			}
                			this.set_text(obj, val); // .apply(this, Array.prototype.slice.call(arguments))
                			/**
                			 * triggered when a node is renamed
                			 * @event
                			 * @name rename_node.jstree
                			 * @param {Object} node
                			 * @param {String} text the new value
                			 * @param {String} old the old value
                			 */
                			this.trigger('rename_node', { "node" : obj, "text" : val, "old" : old });
                			return true;
                		},
                		/**
                		 * remove a node
                		 * @name delete_node(obj)
                		 * @param  {mixed} obj the node, you can pass an array to delete multiple nodes
                		 * @return {Boolean}
                		 * @trigger delete_node.jstree, changed.jstree
                		 */
                		delete_node : function (obj) {
                			var t1, t2, par, pos, tmp, i, j, k, l, c;
                			if($.isArray(obj)) {
                				obj = obj.slice();
                				for(t1 = 0, t2 = obj.length; t1 < t2; t1++) {
                					this.delete_node(obj[t1]);
                				}
                				return true;
                			}
                			obj = this.get_node(obj);
                			if(!obj || obj.id === '#') { return false; }
                			par = this.get_node(obj.parent);
                			pos = $.inArray(obj.id, par.children);
                			c = false;
                			if(!this.check("delete_node", obj, par, pos)) {
                				this.settings.core.error.call(this, this._data.core.last_error);
                				return false;
                			}
                			if(pos !== -1) {
                				par.children = $.vakata.array_remove(par.children, pos);
                			}
                			tmp = obj.children_d.concat([]);
                			tmp.push(obj.id);
                			for(k = 0, l = tmp.length; k < l; k++) {
                				for(i = 0, j = obj.parents.length; i < j; i++) {
                					pos = $.inArray(tmp[k], this._model.data[obj.parents[i]].children_d);
                					if(pos !== -1) {
                						this._model.data[obj.parents[i]].children_d = $.vakata.array_remove(this._model.data[obj.parents[i]].children_d, pos);
                					}
                				}
                				if(this._model.data[tmp[k]].state.selected) {
                					c = true;
                					pos = $.inArray(tmp[k], this._data.core.selected);
                					if(pos !== -1) {
                						this._data.core.selected = $.vakata.array_remove(this._data.core.selected, pos);
                					}
                				}
                			}
                			/**
                			 * triggered when a node is deleted
                			 * @event
                			 * @name delete_node.jstree
                			 * @param {Object} node
                			 * @param {String} parent the parent's ID
                			 */
                			this.trigger('delete_node', { "node" : obj, "parent" : par.id });
                			if(c) {
                				this.trigger('changed', { 'action' : 'delete_node', 'node' : obj, 'selected' : this._data.core.selected, 'parent' : par.id });
                			}
                			for(k = 0, l = tmp.length; k < l; k++) {
                				delete this._model.data[tmp[k]];
                			}
                			this.redraw_node(par, true);
                			return true;
                		},
                		/**
                		 * check if an operation is premitted on the tree. Used internally.
                		 * @private
                		 * @name check(chk, obj, par, pos)
                		 * @param  {String} chk the operation to check, can be "create_node", "rename_node", "delete_node", "copy_node" or "move_node"
                		 * @param  {mixed} obj the node
                		 * @param  {mixed} par the parent
                		 * @param  {mixed} pos the position to insert at, or if "rename_node" - the new name
                		 * @return {Boolean}
                		 */
                		check : function (chk, obj, par, pos) {
                			obj = obj && obj.id ? obj : this.get_node(obj);
                			par = par && par.id ? par : this.get_node(par);
                			var tmp = chk.match(/^move_node|copy_node|create_node$/i) ? par : obj,
                				chc = this.settings.core.check_callback;
                			if(chk === "move_node") {
                				if(obj.id === par.id || $.inArray(obj.id, par.children) === pos || $.inArray(par.id, obj.children_d) !== -1) {
                					this._data.core.last_error = { 'error' : 'check', 'plugin' : 'core', 'id' : 'core_01', 'reason' : 'Moving parent inside child', 'data' : JSON.stringify({ 'chk' : chk, 'pos' : pos, 'obj' : obj && obj.id ? obj.id : false, 'par' : par && par.id ? par.id : false }) };
                					return false;
                				}
                			}
                			tmp = this.get_node(tmp, true);
                			if(tmp.length) { tmp = tmp.data('jstree'); }
                			if(tmp && tmp.functions && (tmp.functions[chk] === false || tmp.functions[chk] === true)) {
                				if(tmp.functions[chk] === false) {
                					this._data.core.last_error = { 'error' : 'check', 'plugin' : 'core', 'id' : 'core_02', 'reason' : 'Node data prevents function: ' + chk, 'data' : JSON.stringify({ 'chk' : chk, 'pos' : pos, 'obj' : obj && obj.id ? obj.id : false, 'par' : par && par.id ? par.id : false }) };
                				}
                				return tmp.functions[chk];
                			}
                			if(chc === false || ($.isFunction(chc) && chc.call(this, chk, obj, par, pos) === false) || (chc && chc[chk] === false)) {
                				this._data.core.last_error = { 'error' : 'check', 'plugin' : 'core', 'id' : 'core_03', 'reason' : 'User config for core.check_callback prevents function: ' + chk, 'data' : JSON.stringify({ 'chk' : chk, 'pos' : pos, 'obj' : obj && obj.id ? obj.id : false, 'par' : par && par.id ? par.id : false }) };
                				return false;
                			}
                			return true;
                		},
                		/**
                		 * get the last error
                		 * @name last_error()
                		 * @return {Object}
                		 */
                		last_error : function () {
                			return this._data.core.last_error;
                		},
                		/**
                		 * move a node to a new parent
                		 * @name move_node(obj, par [, pos, callback, is_loaded])
                		 * @param  {mixed} obj the node to move, pass an array to move multiple nodes
                		 * @param  {mixed} par the new parent
                		 * @param  {mixed} pos the position to insert at ("first" and "last" are supported, as well as "before" and "after"), defaults to `0`
                		 * @param  {function} callback a function to call once the move is completed, receives 3 arguments - the node, the new parent and the position
                		 * @param  {Boolean} internal parameter indicating if the parent node has been loaded
                		 * @trigger move_node.jstree
                		 */
                		move_node : function (obj, par, pos, callback, is_loaded) {
                			var t1, t2, old_par, new_par, old_ins, is_multi, dpc, tmp, i, j, k, l, p;
                			if($.isArray(obj)) {
                				obj = obj.reverse().slice();
                				for(t1 = 0, t2 = obj.length; t1 < t2; t1++) {
                					this.move_node(obj[t1], par, pos, callback, is_loaded);
                				}
                				return true;
                			}
                			obj = obj && obj.id ? obj : this.get_node(obj);
                			par = this.get_node(par);
                			pos = pos === undefined ? 0 : pos;
                
                			if(!par || !obj || obj.id === '#') { return false; }
                			if(!pos.toString().match(/^(before|after)$/) && !is_loaded && !this.is_loaded(par)) {
                				return this.load_node(par, function () { this.move_node(obj, par, pos, callback, true); });
                			}
                
                			old_par = (obj.parent || '#').toString();
                			new_par = (!pos.toString().match(/^(before|after)$/) || par.id === '#') ? par : this.get_node(par.parent);
                			old_ins = this._model.data[obj.id] ? this : $.jstree.reference(obj.id);
                			is_multi = !old_ins || !old_ins._id || (this._id !== old_ins._id);
                			if(is_multi) {
                				if(this.copy_node(obj, par, pos, callback, is_loaded)) {
                					if(old_ins) { old_ins.delete_node(obj); }
                					return true;
                				}
                				return false;
                			}
                			//var m = this._model.data;
                			if(new_par.id === '#') {
                				if(pos === "before") { pos = "first"; }
                				if(pos === "after") { pos = "last"; }
                			}
                			switch(pos) {
                				case "before":
                					pos = $.inArray(par.id, new_par.children);
                					break;
                				case "after" :
                					pos = $.inArray(par.id, new_par.children) + 1;
                					break;
                				case "inside":
                				case "first":
                					pos = 0;
                					break;
                				case "last":
                					pos = new_par.children.length;
                					break;
                				default:
                					if(!pos) { pos = 0; }
                					break;
                			}
                			if(pos > new_par.children.length) { pos = new_par.children.length; }
                			if(!this.check("move_node", obj, new_par, pos)) {
                				this.settings.core.error.call(this, this._data.core.last_error);
                				return false;
                			}
                			if(obj.parent === new_par.id) {
                				dpc = new_par.children.concat();
                				tmp = $.inArray(obj.id, dpc);
                				if(tmp !== -1) {
                					dpc = $.vakata.array_remove(dpc, tmp);
                					if(pos > tmp) { pos--; }
                				}
                				tmp = [];
                				for(i = 0, j = dpc.length; i < j; i++) {
                					tmp[i >= pos ? i+1 : i] = dpc[i];
                				}
                				tmp[pos] = obj.id;
                				new_par.children = tmp;
                				this._node_changed(new_par.id);
                				this.redraw(new_par.id === '#');
                			}
                			else {
                				// clean old parent and up
                				tmp = obj.children_d.concat();
                				tmp.push(obj.id);
                				for(i = 0, j = obj.parents.length; i < j; i++) {
                					dpc = [];
                					p = old_ins._model.data[obj.parents[i]].children_d;
                					for(k = 0, l = p.length; k < l; k++) {
                						if($.inArray(p[k], tmp) === -1) {
                							dpc.push(p[k]);
                						}
                					}
                					old_ins._model.data[obj.parents[i]].children_d = dpc;
                				}
                				old_ins._model.data[old_par].children = $.vakata.array_remove_item(old_ins._model.data[old_par].children, obj.id);
                
                				// insert into new parent and up
                				for(i = 0, j = new_par.parents.length; i < j; i++) {
                					this._model.data[new_par.parents[i]].children_d = this._model.data[new_par.parents[i]].children_d.concat(tmp);
                				}
                				dpc = [];
                				for(i = 0, j = new_par.children.length; i < j; i++) {
                					dpc[i >= pos ? i+1 : i] = new_par.children[i];
                				}
                				dpc[pos] = obj.id;
                				new_par.children = dpc;
                				new_par.children_d.push(obj.id);
                				new_par.children_d = new_par.children_d.concat(obj.children_d);
                
                				// update object
                				obj.parent = new_par.id;
                				tmp = new_par.parents.concat();
                				tmp.unshift(new_par.id);
                				p = obj.parents.length;
                				obj.parents = tmp;
                
                				// update object children
                				tmp = tmp.concat();
                				for(i = 0, j = obj.children_d.length; i < j; i++) {
                					this._model.data[obj.children_d[i]].parents = this._model.data[obj.children_d[i]].parents.slice(0,p*-1);
                					Array.prototype.push.apply(this._model.data[obj.children_d[i]].parents, tmp);
                				}
                
                				this._node_changed(old_par);
                				this._node_changed(new_par.id);
                				this.redraw(old_par === '#' || new_par.id === '#');
                			}
                			if(callback) { callback.call(this, obj, new_par, pos); }
                			/**
                			 * triggered when a node is moved
                			 * @event
                			 * @name move_node.jstree
                			 * @param {Object} node
                			 * @param {String} parent the parent's ID
                			 * @param {Number} position the position of the node among the parent's children
                			 * @param {String} old_parent the old parent of the node
                			 * @param {Boolean} is_multi do the node and new parent belong to different instances
                			 * @param {jsTree} old_instance the instance the node came from
                			 * @param {jsTree} new_instance the instance of the new parent
                			 */
                			this.trigger('move_node', { "node" : obj, "parent" : new_par.id, "position" : pos, "old_parent" : old_par, "is_multi" : is_multi, 'old_instance' : old_ins, 'new_instance' : this });
                			return true;
                		},
                		/**
                		 * copy a node to a new parent
                		 * @name copy_node(obj, par [, pos, callback, is_loaded])
                		 * @param  {mixed} obj the node to copy, pass an array to copy multiple nodes
                		 * @param  {mixed} par the new parent
                		 * @param  {mixed} pos the position to insert at ("first" and "last" are supported, as well as "before" and "after"), defaults to `0`
                		 * @param  {function} callback a function to call once the move is completed, receives 3 arguments - the node, the new parent and the position
                		 * @param  {Boolean} internal parameter indicating if the parent node has been loaded
                		 * @trigger model.jstree copy_node.jstree
                		 */
                		copy_node : function (obj, par, pos, callback, is_loaded) {
                			var t1, t2, dpc, tmp, i, j, node, old_par, new_par, old_ins, is_multi;
                			if($.isArray(obj)) {
                				obj = obj.reverse().slice();
                				for(t1 = 0, t2 = obj.length; t1 < t2; t1++) {
                					this.copy_node(obj[t1], par, pos, callback, is_loaded);
                				}
                				return true;
                			}
                			obj = obj && obj.id ? obj : this.get_node(obj);
                			par = this.get_node(par);
                			pos = pos === undefined ? 0 : pos;
                
                			if(!par || !obj || obj.id === '#') { return false; }
                			if(!pos.toString().match(/^(before|after)$/) && !is_loaded && !this.is_loaded(par)) {
                				return this.load_node(par, function () { this.copy_node(obj, par, pos, callback, true); });
                			}
                
                			old_par = (obj.parent || '#').toString();
                			new_par = (!pos.toString().match(/^(before|after)$/) || par.id === '#') ? par : this.get_node(par.parent);
                			old_ins = this._model.data[obj.id] ? this : $.jstree.reference(obj.id);
                			is_multi = !old_ins || !old_ins._id || (this._id !== old_ins._id);
                			if(new_par.id === '#') {
                				if(pos === "before") { pos = "first"; }
                				if(pos === "after") { pos = "last"; }
                			}
                			switch(pos) {
                				case "before":
                					pos = $.inArray(par.id, new_par.children);
                					break;
                				case "after" :
                					pos = $.inArray(par.id, new_par.children) + 1;
                					break;
                				case "inside":
                				case "first":
                					pos = 0;
                					break;
                				case "last":
                					pos = new_par.children.length;
                					break;
                				default:
                					if(!pos) { pos = 0; }
                					break;
                			}
                			if(pos > new_par.children.length) { pos = new_par.children.length; }
                			if(!this.check("copy_node", obj, new_par, pos)) {
                				this.settings.core.error.call(this, this._data.core.last_error);
                				return false;
                			}
                			node = old_ins ? old_ins.get_json(obj, { no_id : true, no_data : true, no_state : true }) : obj;
                			if(!node) { return false; }
                			if(node.id === true) { delete node.id; }
                			node = this._parse_model_from_json(node, new_par.id, new_par.parents.concat());
                			if(!node) { return false; }
                			tmp = this.get_node(node);
                			dpc = [];
                			dpc.push(node);
                			dpc = dpc.concat(tmp.children_d);
                			this.trigger('model', { "nodes" : dpc, "parent" : new_par.id });
                
                			// insert into new parent and up
                			for(i = 0, j = new_par.parents.length; i < j; i++) {
                				this._model.data[new_par.parents[i]].children_d = this._model.data[new_par.parents[i]].children_d.concat(dpc);
                			}
                			dpc = [];
                			for(i = 0, j = new_par.children.length; i < j; i++) {
                				dpc[i >= pos ? i+1 : i] = new_par.children[i];
                			}
                			dpc[pos] = tmp.id;
                			new_par.children = dpc;
                			new_par.children_d.push(tmp.id);
                			new_par.children_d = new_par.children_d.concat(tmp.children_d);
                
                			this._node_changed(new_par.id);
                			this.redraw(new_par.id === '#');
                			if(callback) { callback.call(this, tmp, new_par, pos); }
                			/**
                			 * triggered when a node is copied
                			 * @event
                			 * @name copy_node.jstree
                			 * @param {Object} node the copied node
                			 * @param {Object} original the original node
                			 * @param {String} parent the parent's ID
                			 * @param {Number} position the position of the node among the parent's children
                			 * @param {String} old_parent the old parent of the node
                			 * @param {Boolean} is_multi do the node and new parent belong to different instances
                			 * @param {jsTree} old_instance the instance the node came from
                			 * @param {jsTree} new_instance the instance of the new parent
                			 */
                			this.trigger('copy_node', { "node" : tmp, "original" : obj, "parent" : new_par.id, "position" : pos, "old_parent" : old_par, "is_multi" : is_multi, 'old_instance' : old_ins, 'new_instance' : this });
                			return tmp.id;
                		},
                		/**
                		 * cut a node (a later call to `paste(obj)` would move the node)
                		 * @name cut(obj)
                		 * @param  {mixed} obj multiple objects can be passed using an array
                		 * @trigger cut.jstree
                		 */
                		cut : function (obj) {
                			if(!obj) { obj = this._data.core.selected.concat(); }
                			if(!$.isArray(obj)) { obj = [obj]; }
                			if(!obj.length) { return false; }
                			var tmp = [], o, t1, t2;
                			for(t1 = 0, t2 = obj.length; t1 < t2; t1++) {
                				o = this.get_node(obj[t1]);
                				if(o && o.id && o.id !== '#') { tmp.push(o); }
                			}
                			if(!tmp.length) { return false; }
                			ccp_node = tmp;
                			ccp_inst = this;
                			ccp_mode = 'move_node';
                			/**
                			 * triggered when nodes are added to the buffer for moving
                			 * @event
                			 * @name cut.jstree
                			 * @param {Array} node
                			 */
                			this.trigger('cut', { "node" : obj });
                		},
                		/**
                		 * copy a node (a later call to `paste(obj)` would copy the node)
                		 * @name copy(obj)
                		 * @param  {mixed} obj multiple objects can be passed using an array
                		 * @trigger copy.jstre
                		 */
                		copy : function (obj) {
                			if(!obj) { obj = this._data.core.selected.concat(); }
                			if(!$.isArray(obj)) { obj = [obj]; }
                			if(!obj.length) { return false; }
                			var tmp = [], o, t1, t2;
                			for(t1 = 0, t2 = obj.length; t1 < t2; t1++) {
                				o = this.get_node(obj[t1]);
                				if(o && o.id && o.id !== '#') { tmp.push(o); }
                			}
                			if(!tmp.length) { return false; }
                			ccp_node = tmp;
                			ccp_inst = this;
                			ccp_mode = 'copy_node';
                			/**
                			 * triggered when nodes are added to the buffer for copying
                			 * @event
                			 * @name copy.jstree
                			 * @param {Array} node
                			 */
                			this.trigger('copy', { "node" : obj });
                		},
                		/**
                		 * get the current buffer (any nodes that are waiting for a paste operation)
                		 * @name get_buffer()
                		 * @return {Object} an object consisting of `mode` ("copy_node" or "move_node"), `node` (an array of objects) and `inst` (the instance)
                		 */
                		get_buffer : function () {
                			return { 'mode' : ccp_mode, 'node' : ccp_node, 'inst' : ccp_inst };
                		},
                		/**
                		 * check if there is something in the buffer to paste
                		 * @name can_paste()
                		 * @return {Boolean}
                		 */
                		can_paste : function () {
                			return ccp_mode !== false && ccp_node !== false; // && ccp_inst._model.data[ccp_node];
                		},
                		/**
                		 * copy or move the previously cut or copied nodes to a new parent
                		 * @name paste(obj)
                		 * @param  {mixed} obj the new parent
                		 * @trigger paste.jstree
                		 */
                		paste : function (obj) {
                			obj = this.get_node(obj);
                			if(!obj || !ccp_mode || !ccp_mode.match(/^(copy_node|move_node)$/) || !ccp_node) { return false; }
                			if(this[ccp_mode](ccp_node, obj)) {
                				/**
                				 * triggered when paste is invoked
                				 * @event
                				 * @name paste.jstree
                				 * @param {String} parent the ID of the receiving node
                				 * @param {Array} node the nodes in the buffer
                				 * @param {String} mode the performed operation - "copy_node" or "move_node"
                				 */
                				this.trigger('paste', { "parent" : obj.id, "node" : ccp_node, "mode" : ccp_mode });
                			}
                			ccp_node = false;
                			ccp_mode = false;
                			ccp_inst = false;
                		},
                		/**
                		 * put a node in edit mode (input field to rename the node)
                		 * @name edit(obj [, default_text])
                		 * @param  {mixed} obj
                		 * @param  {String} default_text the text to populate the input with (if omitted the node text value is used)
                		 */
                		edit : function (obj, default_text) {
                			obj = this._open_to(obj);
                			if(!obj || !obj.length) { return false; }
                			var rtl = this._data.core.rtl,
                				w  = this.element.width(),
                				a  = obj.children('.jstree-anchor'),
                				s  = $('<span>'),
                				/*!
                				oi = obj.children("i:visible"),
                				ai = a.children("i:visible"),
                				w1 = oi.width() * oi.length,
                				w2 = ai.width() * ai.length,
                				*/
                				t  = typeof default_text === 'string' ? default_text : this.get_text(obj),
                				h1 = $("<"+"div />", { css : { "position" : "absolute", "top" : "-200px", "left" : (rtl ? "0px" : "-1000px"), "visibility" : "hidden" } }).appendTo("body"),
                				h2 = $("<"+"input />", {
                						"value" : t,
                						"class" : "jstree-rename-input",
                						// "size" : t.length,
                						"css" : {
                							"padding" : "0",
                							"border" : "1px solid silver",
                							"box-sizing" : "border-box",
                							"display" : "inline-block",
                							"height" : (this._data.core.li_height) + "px",
                							"lineHeight" : (this._data.core.li_height) + "px",
                							"width" : "150px" // will be set a bit further down
                						},
                						"blur" : $.proxy(function () {
                							var i = s.children(".jstree-rename-input"),
                								v = i.val();
                							if(v === "") { v = t; }
                							h1.remove();
                							s.replaceWith(a);
                							s.remove();
                							this.set_text(obj, t);
                							if(this.rename_node(obj, v) === false) {
                								this.set_text(obj, t); // move this up? and fix #483
                							}
                						}, this),
                						"keydown" : function (event) {
                							var key = event.which;
                							if(key === 27) {
                								this.value = t;
                							}
                							if(key === 27 || key === 13 || key === 37 || key === 38 || key === 39 || key === 40 || key === 32) {
                								event.stopImmediatePropagation();
                							}
                							if(key === 27 || key === 13) {
                								event.preventDefault();
                								this.blur();
                							}
                						},
                						"click" : function (e) { e.stopImmediatePropagation(); },
                						"mousedown" : function (e) { e.stopImmediatePropagation(); },
                						"keyup" : function (event) {
                							h2.width(Math.min(h1.text("pW" + this.value).width(),w));
                						},
                						"keypress" : function(event) {
                							if(event.which === 13) { return false; }
                						}
                					}),
                				fn = {
                						fontFamily		: a.css('fontFamily')		|| '',
                						fontSize		: a.css('fontSize')			|| '',
                						fontWeight		: a.css('fontWeight')		|| '',
                						fontStyle		: a.css('fontStyle')		|| '',
                						fontStretch		: a.css('fontStretch')		|| '',
                						fontVariant		: a.css('fontVariant')		|| '',
                						letterSpacing	: a.css('letterSpacing')	|| '',
                						wordSpacing		: a.css('wordSpacing')		|| ''
                				};
                			this.set_text(obj, "");
                			s.attr('class', a.attr('class')).append(a.contents().clone()).append(h2);
                			a.replaceWith(s);
                			h1.css(fn);
                			h2.css(fn).width(Math.min(h1.text("pW" + h2[0].value).width(),w))[0].select();
                		},
                
                
                		/**
                		 * changes the theme
                		 * @name set_theme(theme_name [, theme_url])
                		 * @param {String} theme_name the name of the new theme to apply
                		 * @param {mixed} theme_url  the location of the CSS file for this theme. Omit or set to `false` if you manually included the file. Set to `true` to autoload from the `core.themes.dir` directory.
                		 * @trigger set_theme.jstree
                		 */
                		set_theme : function (theme_name, theme_url) {
                			if(!theme_name) { return false; }
                			if(theme_url === true) {
                				var dir = this.settings.core.themes.dir;
                				if(!dir) { dir = $.jstree.path + '/themes'; }
                				theme_url = dir + '/' + theme_name + '/style.css';
                			}
                			if(theme_url && $.inArray(theme_url, themes_loaded) === -1) {
                				$('head').append('<'+'link rel="stylesheet" href="' + theme_url + '" type="text/css" />');
                				themes_loaded.push(theme_url);
                			}
                			if(this._data.core.themes.name) {
                				this.element.removeClass('jstree-' + this._data.core.themes.name);
                			}
                			this._data.core.themes.name = theme_name;
                			this.element.addClass('jstree-' + theme_name);
                			this.element[this.settings.core.themes.responsive ? 'addClass' : 'removeClass' ]('jstree-' + theme_name + '-responsive');
                			/**
                			 * triggered when a theme is set
                			 * @event
                			 * @name set_theme.jstree
                			 * @param {String} theme the new theme
                			 */
                			this.trigger('set_theme', { 'theme' : theme_name });
                		},
                		/**
                		 * gets the name of the currently applied theme name
                		 * @name get_theme()
                		 * @return {String}
                		 */
                		get_theme : function () { return this._data.core.themes.name; },
                		/**
                		 * changes the theme variant (if the theme has variants)
                		 * @name set_theme_variant(variant_name)
                		 * @param {String|Boolean} variant_name the variant to apply (if `false` is used the current variant is removed)
                		 */
                		set_theme_variant : function (variant_name) {
                			if(this._data.core.themes.variant) {
                				this.element.removeClass('jstree-' + this._data.core.themes.name + '-' + this._data.core.themes.variant);
                			}
                			this._data.core.themes.variant = variant_name;
                			if(variant_name) {
                				this.element.addClass('jstree-' + this._data.core.themes.name + '-' + this._data.core.themes.variant);
                			}
                		},
                		/**
                		 * gets the name of the currently applied theme variant
                		 * @name get_theme()
                		 * @return {String}
                		 */
                		get_theme_variant : function () { return this._data.core.themes.variant; },
                		/**
                		 * shows a striped background on the container (if the theme supports it)
                		 * @name show_stripes()
                		 */
                		show_stripes : function () { this._data.core.themes.stripes = true; this.get_container_ul().addClass("jstree-striped"); },
                		/**
                		 * hides the striped background on the container
                		 * @name hide_stripes()
                		 */
                		hide_stripes : function () { this._data.core.themes.stripes = false; this.get_container_ul().removeClass("jstree-striped"); },
                		/**
                		 * toggles the striped background on the container
                		 * @name toggle_stripes()
                		 */
                		toggle_stripes : function () { if(this._data.core.themes.stripes) { this.hide_stripes(); } else { this.show_stripes(); } },
                		/**
                		 * shows the connecting dots (if the theme supports it)
                		 * @name show_dots()
                		 */
                		show_dots : function () { this._data.core.themes.dots = true; this.get_container_ul().removeClass("jstree-no-dots"); },
                		/**
                		 * hides the connecting dots
                		 * @name hide_dots()
                		 */
                		hide_dots : function () { this._data.core.themes.dots = false; this.get_container_ul().addClass("jstree-no-dots"); },
                		/**
                		 * toggles the connecting dots
                		 * @name toggle_dots()
                		 */
                		toggle_dots : function () { if(this._data.core.themes.dots) { this.hide_dots(); } else { this.show_dots(); } },
                		/**
                		 * show the node icons
                		 * @name show_icons()
                		 */
                		show_icons : function () { this._data.core.themes.icons = true; this.get_container_ul().removeClass("jstree-no-icons"); },
                		/**
                		 * hide the node icons
                		 * @name hide_icons()
                		 */
                		hide_icons : function () { this._data.core.themes.icons = false; this.get_container_ul().addClass("jstree-no-icons"); },
                		/**
                		 * toggle the node icons
                		 * @name toggle_icons()
                		 */
                		toggle_icons : function () { if(this._data.core.themes.icons) { this.hide_icons(); } else { this.show_icons(); } },
                		/**
                		 * set the node icon for a node
                		 * @name set_icon(obj, icon)
                		 * @param {mixed} obj
                		 * @param {String} icon the new icon - can be a path to an icon or a className, if using an image that is in the current directory use a `./` prefix, otherwise it will be detected as a class
                		 */
                		set_icon : function (obj, icon) {
                			var t1, t2, dom, old;
                			if($.isArray(obj)) {
                				obj = obj.slice();
                				for(t1 = 0, t2 = obj.length; t1 < t2; t1++) {
                					this.set_icon(obj[t1], icon);
                				}
                				return true;
                			}
                			obj = this.get_node(obj);
                			if(!obj || obj.id === '#') { return false; }
                			old = obj.icon;
                			obj.icon = icon;
                			dom = this.get_node(obj, true).children(".jstree-anchor").children(".jstree-themeicon");
                			if(icon === false) {
                				this.hide_icon(obj);
                			}
                			else if(icon === true) {
                				dom.removeClass('jstree-themeicon-custom ' + old).css("background","").removeAttr("rel");
                			}
                			else if(icon.indexOf("/") === -1 && icon.indexOf(".") === -1) {
                				dom.removeClass(old).css("background","");
                				dom.addClass(icon + ' jstree-themeicon-custom').attr("rel",icon);
                			}
                			else {
                				dom.removeClass(old).css("background","");
                				dom.addClass('jstree-themeicon-custom').css("background", "url('" + icon + "') center center no-repeat").attr("rel",icon);
                			}
                			return true;
                		},
                		/**
                		 * get the node icon for a node
                		 * @name get_icon(obj)
                		 * @param {mixed} obj
                		 * @return {String}
                		 */
                		get_icon : function (obj) {
                			obj = this.get_node(obj);
                			return (!obj || obj.id === '#') ? false : obj.icon;
                		},
                		/**
                		 * hide the icon on an individual node
                		 * @name hide_icon(obj)
                		 * @param {mixed} obj
                		 */
                		hide_icon : function (obj) {
                			var t1, t2;
                			if($.isArray(obj)) {
                				obj = obj.slice();
                				for(t1 = 0, t2 = obj.length; t1 < t2; t1++) {
                					this.hide_icon(obj[t1]);
                				}
                				return true;
                			}
                			obj = this.get_node(obj);
                			if(!obj || obj === '#') { return false; }
                			obj.icon = false;
                			this.get_node(obj, true).children("a").children(".jstree-themeicon").addClass('jstree-themeicon-hidden');
                			return true;
                		},
                		/**
                		 * show the icon on an individual node
                		 * @name show_icon(obj)
                		 * @param {mixed} obj
                		 */
                		show_icon : function (obj) {
                			var t1, t2, dom;
                			if($.isArray(obj)) {
                				obj = obj.slice();
                				for(t1 = 0, t2 = obj.length; t1 < t2; t1++) {
                					this.show_icon(obj[t1]);
                				}
                				return true;
                			}
                			obj = this.get_node(obj);
                			if(!obj || obj === '#') { return false; }
                			dom = this.get_node(obj, true);
                			obj.icon = dom.length ? dom.children("a").children(".jstree-themeicon").attr('rel') : true;
                			if(!obj.icon) { obj.icon = true; }
                			dom.children("a").children(".jstree-themeicon").removeClass('jstree-themeicon-hidden');
                			return true;
                		}
                	};
                
                	// helpers
                	$.vakata = {};
                	// reverse
                	$.fn.vakata_reverse = [].reverse;
                	// collect attributes
                	$.vakata.attributes = function(node, with_values) {
                		node = $(node)[0];
                		var attr = with_values ? {} : [];
                		if(node && node.attributes) {
                			$.each(node.attributes, function (i, v) {
                				if($.inArray(v.nodeName.toLowerCase(),['style','contenteditable','hasfocus','tabindex']) !== -1) { return; }
                				if(v.nodeValue !== null && $.trim(v.nodeValue) !== '') {
                					if(with_values) { attr[v.nodeName] = v.nodeValue; }
                					else { attr.push(v.nodeName); }
                				}
                			});
                		}
                		return attr;
                	};
                	$.vakata.array_unique = function(array) {
                		var a = [], i, j, l;
                		for(i = 0, l = array.length; i < l; i++) {
                			for(j = 0; j <= i; j++) {
                				if(array[i] === array[j]) {
                					break;
                				}
                			}
                			if(j === i) { a.push(array[i]); }
                		}
                		return a;
                	};
                	// remove item from array
                	$.vakata.array_remove = function(array, from, to) {
                		var rest = array.slice((to || from) + 1 || array.length);
                		array.length = from < 0 ? array.length + from : from;
                		array.push.apply(array, rest);
                		return array;
                	};
                	// remove item from array
                	$.vakata.array_remove_item = function(array, item) {
                		var tmp = $.inArray(item, array);
                		return tmp !== -1 ? $.vakata.array_remove(array, tmp) : array;
                	};
                	// browser sniffing
                	(function () {
                		var browser = {},
                			b_match = function(ua) {
                			ua = ua.toLowerCase();
                
                			var match =	/(chrome)[ \/]([\w.]+)/.exec( ua ) ||
                						/(webkit)[ \/]([\w.]+)/.exec( ua ) ||
                						/(opera)(?:.*version|)[ \/]([\w.]+)/.exec( ua ) ||
                						/(msie) ([\w.]+)/.exec( ua ) ||
                						(ua.indexOf("compatible") < 0 && /(mozilla)(?:.*? rv:([\w.]+)|)/.exec( ua )) ||
                						[];
                				return {
                					browser: match[1] || "",
                					version: match[2] || "0"
                				};
                			},
                			matched = b_match(window.navigator.userAgent);
                		if(matched.browser) {
                			browser[ matched.browser ] = true;
                			browser.version = matched.version;
                		}
                		if(browser.chrome) {
                			browser.webkit = true;
                		}
                		else if(browser.webkit) {
                			browser.safari = true;
                		}
                		$.vakata.browser = browser;
                	}());
                	if($.vakata.browser.msie && $.vakata.browser.version < 8) {
                		$.jstree.defaults.core.animation = 0;
                	}
                
                /**
                 * ### Checkbox plugin
                 *
                 * This plugin renders checkbox icons in front of each node, making multiple selection much easier. 
                 * It also supports tri-state behavior, meaning that if a node has a few of its children checked it will be rendered as undetermined, and state will be propagated up.
                 */
                
                	var _i = document.createElement('I');
                	_i.className = 'jstree-icon jstree-checkbox';
                	/**
                	 * stores all defaults for the checkbox plugin
                	 * @name $.jstree.defaults.checkbox
                	 * @plugin checkbox
                	 */
                	$.jstree.defaults.checkbox = {
                		/**
                		 * a boolean indicating if checkboxes should be visible (can be changed at a later time using `show_checkboxes()` and `hide_checkboxes`). Defaults to `true`.
                		 * @name $.jstree.defaults.checkbox.visible
                		 * @plugin checkbox
                		 */
                		visible				: true,
                		/**
                		 * a boolean indicating if checkboxes should cascade down and have an undetermined state. Defaults to `true`.
                		 * @name $.jstree.defaults.checkbox.three_state
                		 * @plugin checkbox
                		 */
                		three_state			: true,
                		/**
                		 * a boolean indicating if clicking anywhere on the node should act as clicking on the checkbox. Defaults to `true`.
                		 * @name $.jstree.defaults.checkbox.whole_node
                		 * @plugin checkbox
                		 */
                		whole_node			: true,
                		/**
                		 * a boolean indicating if the selected style of a node should be kept, or removed. Defaults to `true`.
                		 * @name $.jstree.defaults.checkbox.keep_selected_style
                		 * @plugin checkbox
                		 */
                		keep_selected_style	: true
                	};
                	$.jstree.plugins.checkbox = function (options, parent) {
                		this.bind = function () {
                			parent.bind.call(this);
                			this._data.checkbox.uto = false;
                			this.element
                				.on("init.jstree", $.proxy(function () {
                						this._data.checkbox.visible = this.settings.checkbox.visible;
                						if(!this.settings.checkbox.keep_selected_style) {
                							this.element.addClass('jstree-checkbox-no-clicked');
                						}
                					}, this))
                				.on("loading.jstree", $.proxy(function () {
                						this[ this._data.checkbox.visible ? 'show_checkboxes' : 'hide_checkboxes' ]();
                					}, this));
                			if(this.settings.checkbox.three_state) {
                				this.element
                					.on('changed.jstree move_node.jstree copy_node.jstree redraw.jstree open_node.jstree', $.proxy(function () {
                							if(this._data.checkbox.uto) { clearTimeout(this._data.checkbox.uto); }
                							this._data.checkbox.uto = setTimeout($.proxy(this._undetermined, this), 50);
                						}, this))
                					.on('model.jstree', $.proxy(function (e, data) {
                							var m = this._model.data,
                								p = m[data.parent],
                								dpc = data.nodes,
                								chd = [],
                								c, i, j, k, l, tmp;
                
                							// apply down
                							if(p.state.selected) {
                								for(i = 0, j = dpc.length; i < j; i++) {
                									m[dpc[i]].state.selected = true;
                								}
                								this._data.core.selected = this._data.core.selected.concat(dpc);
                							}
                							else {
                								for(i = 0, j = dpc.length; i < j; i++) {
                									if(m[dpc[i]].state.selected) {
                										for(k = 0, l = m[dpc[i]].children_d.length; k < l; k++) {
                											m[m[dpc[i]].children_d[k]].state.selected = true;
                										}
                										this._data.core.selected = this._data.core.selected.concat(m[dpc[i]].children_d);
                									}
                								}
                							}
                
                							// apply up
                							for(i = 0, j = p.children_d.length; i < j; i++) {
                								if(!m[p.children_d[i]].children.length) {
                									chd.push(m[p.children_d[i]].parent);
                								}
                							}
                							chd = $.vakata.array_unique(chd);
                							for(k = 0, l = chd.length; k < l; k++) {
                								p = m[chd[k]];
                								while(p && p.id !== '#') {
                									c = 0;
                									for(i = 0, j = p.children.length; i < j; i++) {
                										c += m[p.children[i]].state.selected;
                									}
                									if(c === j) {
                										p.state.selected = true;
                										this._data.core.selected.push(p.id);
                										tmp = this.get_node(p, true);
                										if(tmp && tmp.length) {
                											tmp.children('.jstree-anchor').addClass('jstree-clicked');
                										}
                									}
                									else {
                										break;
                									}
                									p = this.get_node(p.parent);
                								}
                							}
                							this._data.core.selected = $.vakata.array_unique(this._data.core.selected);
                						}, this))
                					.on('select_node.jstree', $.proxy(function (e, data) {
                							var obj = data.node,
                								m = this._model.data,
                								par = this.get_node(obj.parent),
                								dom = this.get_node(obj, true),
                								i, j, c, tmp;
                							this._data.core.selected = $.vakata.array_unique(this._data.core.selected.concat(obj.children_d));
                							for(i = 0, j = obj.children_d.length; i < j; i++) {
                								m[obj.children_d[i]].state.selected = true;
                							}
                							while(par && par.id !== '#') {
                								c = 0;
                								for(i = 0, j = par.children.length; i < j; i++) {
                									c += m[par.children[i]].state.selected;
                								}
                								if(c === j) {
                									par.state.selected = true;
                									this._data.core.selected.push(par.id);
                									tmp = this.get_node(par, true);
                									if(tmp && tmp.length) {
                										tmp.children('.jstree-anchor').addClass('jstree-clicked');
                									}
                								}
                								else {
                									break;
                								}
                								par = this.get_node(par.parent);
                							}
                							if(dom.length) {
                								dom.find('.jstree-anchor').addClass('jstree-clicked');
                							}
                						}, this))
                					.on('deselect_node.jstree', $.proxy(function (e, data) {
                							var obj = data.node,
                								dom = this.get_node(obj, true),
                								i, j, tmp;
                							for(i = 0, j = obj.children_d.length; i < j; i++) {
                								this._model.data[obj.children_d[i]].state.selected = false;
                							}
                							for(i = 0, j = obj.parents.length; i < j; i++) {
                								this._model.data[obj.parents[i]].state.selected = false;
                								tmp = this.get_node(obj.parents[i], true);
                								if(tmp && tmp.length) {
                									tmp.children('.jstree-anchor').removeClass('jstree-clicked');
                								}
                							}
                							tmp = [];
                							for(i = 0, j = this._data.core.selected.length; i < j; i++) {
                								if($.inArray(this._data.core.selected[i], obj.children_d) === -1 && $.inArray(this._data.core.selected[i], obj.parents) === -1) {
                									tmp.push(this._data.core.selected[i]);
                								}
                							}
                							this._data.core.selected = $.vakata.array_unique(tmp);
                							if(dom.length) {
                								dom.find('.jstree-anchor').removeClass('jstree-clicked');
                							}
                						}, this))
                					.on('delete_node.jstree', $.proxy(function (e, data) {
                							var p = this.get_node(data.parent),
                								m = this._model.data,
                								i, j, c, tmp;
                							while(p && p.id !== '#') {
                								c = 0;
                								for(i = 0, j = p.children.length; i < j; i++) {
                									c += m[p.children[i]].state.selected;
                								}
                								if(c === j) {
                									p.state.selected = true;
                									this._data.core.selected.push(p.id);
                									tmp = this.get_node(p, true);
                									if(tmp && tmp.length) {
                										tmp.children('.jstree-anchor').addClass('jstree-clicked');
                									}
                								}
                								else {
                									break;
                								}
                								p = this.get_node(p.parent);
                							}
                						}, this))
                					.on('move_node.jstree', $.proxy(function (e, data) {
                							var is_multi = data.is_multi,
                								old_par = data.old_parent,
                								new_par = this.get_node(data.parent),
                								m = this._model.data,
                								p, c, i, j, tmp;
                							if(!is_multi) {
                								p = this.get_node(old_par);
                								while(p && p.id !== '#') {
                									c = 0;
                									for(i = 0, j = p.children.length; i < j; i++) {
                										c += m[p.children[i]].state.selected;
                									}
                									if(c === j) {
                										p.state.selected = true;
                										this._data.core.selected.push(p.id);
                										tmp = this.get_node(p, true);
                										if(tmp && tmp.length) {
                											tmp.children('.jstree-anchor').addClass('jstree-clicked');
                										}
                									}
                									else {
                										break;
                									}
                									p = this.get_node(p.parent);
                								}
                							}
                							p = new_par;
                							while(p && p.id !== '#') {
                								c = 0;
                								for(i = 0, j = p.children.length; i < j; i++) {
                									c += m[p.children[i]].state.selected;
                								}
                								if(c === j) {
                									if(!p.state.selected) {
                										p.state.selected = true;
                										this._data.core.selected.push(p.id);
                										tmp = this.get_node(p, true);
                										if(tmp && tmp.length) {
                											tmp.children('.jstree-anchor').addClass('jstree-clicked');
                										}
                									}
                								}
                								else {
                									if(p.state.selected) {
                										p.state.selected = false;
                										this._data.core.selected = $.vakata.array_remove_item(this._data.core.selected, p.id);
                										tmp = this.get_node(p, true);
                										if(tmp && tmp.length) {
                											tmp.children('.jstree-anchor').removeClass('jstree-clicked');
                										}
                									}
                									else {
                										break;
                									}
                								}
                								p = this.get_node(p.parent);
                							}
                						}, this));
                			}
                		};
                		/**
                		 * set the undetermined state where and if necessary. Used internally.
                		 * @private
                		 * @name _undetermined()
                		 * @plugin checkbox
                		 */
                		this._undetermined = function () {
                			var i, j, m = this._model.data, s = this._data.core.selected, p = [], t = this;
                			for(i = 0, j = s.length; i < j; i++) {
                				if(m[s[i]] && m[s[i]].parents) {
                					p = p.concat(m[s[i]].parents);
                				}
                			}
                			// attempt for server side undetermined state
                			this.element.find('.jstree-closed').not(':has(ul)')
                				.each(function () {
                					var tmp = t.get_node(this);
                					if(!tmp.state.loaded && tmp.original && tmp.original.state && tmp.original.state.undetermined && tmp.original.state.undetermined === true) {
                						p.push(tmp.id);
                						p = p.concat(tmp.parents);
                					}
                				});
                			p = $.vakata.array_unique(p);
                			i = $.inArray('#', p);
                			if(i !== -1) {
                				p = $.vakata.array_remove(p, i);
                			}
                
                			this.element.find('.jstree-undetermined').removeClass('jstree-undetermined');
                			for(i = 0, j = p.length; i < j; i++) {
                				if(!m[p[i]].state.selected) {
                					s = this.get_node(p[i], true);
                					if(s && s.length) {
                						s.children('a').children('.jstree-checkbox').addClass('jstree-undetermined');
                					}
                				}
                			}
                		};
                		this.redraw_node = function(obj, deep, is_callback) {
                			obj = parent.redraw_node.call(this, obj, deep, is_callback);
                			if(obj) {
                				var tmp = obj.getElementsByTagName('A')[0];
                				tmp.insertBefore(_i.cloneNode(), tmp.childNodes[0]);
                			}
                			if(!is_callback && this.settings.checkbox.three_state) {
                				if(this._data.checkbox.uto) { clearTimeout(this._data.checkbox.uto); }
                				this._data.checkbox.uto = setTimeout($.proxy(this._undetermined, this), 50);
                			}
                			return obj;
                		};
                		this.activate_node = function (obj, e) {
                			if(this.settings.checkbox.whole_node || $(e.target).hasClass('jstree-checkbox')) {
                				e.ctrlKey = true;
                			}
                			return parent.activate_node.call(this, obj, e);
                		};
                		/**
                		 * show the node checkbox icons
                		 * @name show_checkboxes()
                		 * @plugin checkbox
                		 */
                		this.show_checkboxes = function () { this._data.core.themes.checkboxes = true; this.element.children("ul").removeClass("jstree-no-checkboxes"); };
                		/**
                		 * hide the node checkbox icons
                		 * @name hide_checkboxes()
                		 * @plugin checkbox
                		 */
                		this.hide_checkboxes = function () { this._data.core.themes.checkboxes = false; this.element.children("ul").addClass("jstree-no-checkboxes"); };
                		/**
                		 * toggle the node icons
                		 * @name toggle_checkboxes()
                		 * @plugin checkbox
                		 */
                		this.toggle_checkboxes = function () { if(this._data.core.themes.checkboxes) { this.hide_checkboxes(); } else { this.show_checkboxes(); } };
                	};
                
                	// include the checkbox plugin by default
                	// $.jstree.defaults.plugins.push("checkbox");
                
                /**
                 * ### Contextmenu plugin
                 *
                 * Shows a context menu when a node is right-clicked.
                 */
                // TODO: move logic outside of function + check multiple move
                
                	/**
                	 * stores all defaults for the contextmenu plugin
                	 * @name $.jstree.defaults.contextmenu
                	 * @plugin contextmenu
                	 */
                	$.jstree.defaults.contextmenu = {
                		/**
                		 * a boolean indicating if the node should be selected when the context menu is invoked on it. Defaults to `true`.
                		 * @name $.jstree.defaults.contextmenu.select_node
                		 * @plugin contextmenu
                		 */
                		select_node : true,
                		/**
                		 * a boolean indicating if the menu should be shown aligned with the node. Defaults to `true`, otherwise the mouse coordinates are used.
                		 * @name $.jstree.defaults.contextmenu.show_at_node
                		 * @plugin contextmenu
                		 */
                		show_at_node : true,
                		/**
                		 * an object of actions, or a function that accepts a node and a callback function and calls the callback function with an object of actions available for that node (you can also return the items too).
                		 * 
                		 * Each action consists of a key (a unique name) and a value which is an object with the following properties (only label and action are required):
                		 * 
                		 * * `separator_before` - a boolean indicating if there should be a separator before this item
                		 * * `separator_after` - a boolean indicating if there should be a separator after this item
                		 * * `_disabled` - a boolean indicating if this action should be disabled
                		 * * `label` - a string - the name of the action
                		 * * `action` - a function to be executed if this item is chosen
                		 * * `icon` - a string, can be a path to an icon or a className, if using an image that is in the current directory use a `./` prefix, otherwise it will be detected as a class
                		 * * `shortcut` - keyCode which will trigger the action if the menu is open (for example `113` for rename, which equals F2)
                		 * * `shortcut_label` - shortcut label (like for example `F2` for rename)
                		 * 
                		 * @name $.jstree.defaults.contextmenu.items
                		 * @plugin contextmenu
                		 */
                		items : function (o, cb) { // Could be an object directly
                			return {
                				"create" : {
                					"separator_before"	: false,
                					"separator_after"	: true,
                					"_disabled"			: false, //(this.check("create_node", data.reference, {}, "last")),
                					"label"				: "Create",
                					"action"			: function (data) {
                						var inst = $.jstree.reference(data.reference),
                							obj = inst.get_node(data.reference);
                						inst.create_node(obj, {}, "last", function (new_node) {
                							setTimeout(function () { inst.edit(new_node); },0);
                						});
                					}
                				},
                				"rename" : {
                					"separator_before"	: false,
                					"separator_after"	: false,
                					"_disabled"			: false, //(this.check("rename_node", data.reference, this.get_parent(data.reference), "")),
                					"label"				: "Rename",
                					/*
                					"shortcut"			: 113,
                					"shortcut_label"	: 'F2',
                					"icon"				: "glyphicon glyphicon-leaf",
                					*/
                					"action"			: function (data) {
                						var inst = $.jstree.reference(data.reference),
                							obj = inst.get_node(data.reference);
                						inst.edit(obj);
                					}
                				},
                				"remove" : {
                					"separator_before"	: false,
                					"icon"				: false,
                					"separator_after"	: false,
                					"_disabled"			: false, //(this.check("delete_node", data.reference, this.get_parent(data.reference), "")),
                					"label"				: "Delete",
                					"action"			: function (data) {
                						var inst = $.jstree.reference(data.reference),
                							obj = inst.get_node(data.reference);
                						if(inst.is_selected(obj)) {
                							inst.delete_node(inst.get_selected());
                						}
                						else {
                							inst.delete_node(obj);
                						}
                					}
                				},
                				"ccp" : {
                					"separator_before"	: true,
                					"icon"				: false,
                					"separator_after"	: false,
                					"label"				: "Edit",
                					"action"			: false,
                					"submenu" : {
                						"cut" : {
                							"separator_before"	: false,
                							"separator_after"	: false,
                							"label"				: "Cut",
                							"action"			: function (data) {
                								var inst = $.jstree.reference(data.reference),
                									obj = inst.get_node(data.reference);
                								if(inst.is_selected(obj)) {
                									inst.cut(inst.get_selected());
                								}
                								else {
                									inst.cut(obj);
                								}
                							}
                						},
                						"copy" : {
                							"separator_before"	: false,
                							"icon"				: false,
                							"separator_after"	: false,
                							"label"				: "Copy",
                							"action"			: function (data) {
                								var inst = $.jstree.reference(data.reference),
                									obj = inst.get_node(data.reference);
                								if(inst.is_selected(obj)) {
                									inst.copy(inst.get_selected());
                								}
                								else {
                									inst.copy(obj);
                								}
                							}
                						},
                						"paste" : {
                							"separator_before"	: false,
                							"icon"				: false,
                							"_disabled"			: function (data) {
                								return !$.jstree.reference(data.reference).can_paste();
                							},
                							"separator_after"	: false,
                							"label"				: "Paste",
                							"action"			: function (data) {
                								var inst = $.jstree.reference(data.reference),
                									obj = inst.get_node(data.reference);
                								inst.paste(obj);
                							}
                						}
                					}
                				}
                			};
                		}
                	};
                
                	$.jstree.plugins.contextmenu = function (options, parent) {
                		this.bind = function () {
                			parent.bind.call(this);
                
                			this.element
                				.on("contextmenu.jstree", ".jstree-anchor", $.proxy(function (e) {
                						e.preventDefault();
                						if(!this.is_loading(e.currentTarget)) {
                							this.show_contextmenu(e.currentTarget, e.pageX, e.pageY, e);
                						}
                					}, this))
                				.on("click.jstree", ".jstree-anchor", $.proxy(function (e) {
                						if(this._data.contextmenu.visible) {
                							$.vakata.context.hide();
                						}
                					}, this));
                			/*
                			if(!('oncontextmenu' in document.body) && ('ontouchstart' in document.body)) {
                				var el = null, tm = null;
                				this.element
                					.on("touchstart", ".jstree-anchor", function (e) {
                						el = e.currentTarget;
                						tm = +new Date();
                						$(document).one("touchend", function (e) {
                							e.target = document.elementFromPoint(e.originalEvent.targetTouches[0].pageX - window.pageXOffset, e.originalEvent.targetTouches[0].pageY - window.pageYOffset);
                							e.currentTarget = e.target;
                							tm = ((+(new Date())) - tm);
                							if(e.target === el && tm > 600 && tm < 1000) {
                								e.preventDefault();
                								$(el).trigger('contextmenu', e);
                							}
                							el = null;
                							tm = null;
                						});
                					});
                			}
                			*/
                			$(document).on("context_hide.vakata", $.proxy(function () { this._data.contextmenu.visible = false; }, this));
                		};
                		this.teardown = function () {
                			if(this._data.contextmenu.visible) {
                				$.vakata.context.hide();
                			}
                			parent.teardown.call(this);
                		};
                
                		/**
                		 * prepare and show the context menu for a node
                		 * @name show_contextmenu(obj [, x, y])
                		 * @param {mixed} obj the node
                		 * @param {Number} x the x-coordinate relative to the document to show the menu at
                		 * @param {Number} y the y-coordinate relative to the document to show the menu at
                		 * @param {Object} e the event if available that triggered the contextmenu
                		 * @plugin contextmenu
                		 * @trigger show_contextmenu.jstree
                		 */
                		this.show_contextmenu = function (obj, x, y, e) {
                			obj = this.get_node(obj);
                			if(!obj || obj.id === '#') { return false; }
                			var s = this.settings.contextmenu,
                				d = this.get_node(obj, true),
                				a = d.children(".jstree-anchor"),
                				o = false,
                				i = false;
                			if(s.show_at_node || x === undefined || y === undefined) {
                				o = a.offset();
                				x = o.left;
                				y = o.top + this._data.core.li_height;
                			}
                			if(this.settings.contextmenu.select_node && !this.is_selected(obj)) {
                				this.deselect_all();
                				this.select_node(obj, false, false, e);
                			}
                
                			i = s.items;
                			if($.isFunction(i)) {
                				i = i.call(this, obj, $.proxy(function (i) {
                					this._show_contextmenu(obj, x, y, i);
                				}, this));
                			}
                			if($.isPlainObject(i)) {
                				this._show_contextmenu(obj, x, y, i);
                			}
                		};
                		/**
                		 * show the prepared context menu for a node
                		 * @name _show_contextmenu(obj, x, y, i)
                		 * @param {mixed} obj the node
                		 * @param {Number} x the x-coordinate relative to the document to show the menu at
                		 * @param {Number} y the y-coordinate relative to the document to show the menu at
                		 * @param {Number} i the object of items to show
                		 * @plugin contextmenu
                		 * @trigger show_contextmenu.jstree
                		 * @private
                		 */
                		this._show_contextmenu = function (obj, x, y, i) {
                			var d = this.get_node(obj, true),
                				a = d.children(".jstree-anchor");
                			$(document).one("context_show.vakata", $.proxy(function (e, data) {
                				var cls = 'jstree-contextmenu jstree-' + this.get_theme() + '-contextmenu';
                				$(data.element).addClass(cls);
                			}, this));
                			this._data.contextmenu.visible = true;
                			$.vakata.context.show(a, { 'x' : x, 'y' : y }, i);
                			/**
                			 * triggered when the contextmenu is shown for a node
                			 * @event
                			 * @name show_contextmenu.jstree
                			 * @param {Object} node the node
                			 * @param {Number} x the x-coordinate of the menu relative to the document
                			 * @param {Number} y the y-coordinate of the menu relative to the document
                			 * @plugin contextmenu
                			 */
                			this.trigger('show_contextmenu', { "node" : obj, "x" : x, "y" : y });
                		};
                	};
                
                	// contextmenu helper
                	(function ($) {
                		var right_to_left = false,
                			vakata_context = {
                				element		: false,
                				reference	: false,
                				position_x	: 0,
                				position_y	: 0,
                				items		: [],
                				html		: "",
                				is_visible	: false
                			};
                
                		$.vakata.context = {
                			settings : {
                				hide_onmouseleave	: 0,
                				icons				: true
                			},
                			_trigger : function (event_name) {
                				$(document).triggerHandler("context_" + event_name + ".vakata", {
                					"reference"	: vakata_context.reference,
                					"element"	: vakata_context.element,
                					"position"	: {
                						"x" : vakata_context.position_x,
                						"y" : vakata_context.position_y
                					}
                				});
                			},
                			_execute : function (i) {
                				i = vakata_context.items[i];
                				return i && (!i._disabled || ($.isFunction(i._disabled) && !i._disabled({ "item" : i, "reference" : vakata_context.reference, "element" : vakata_context.element }))) && i.action ? i.action.call(null, {
                							"item"		: i,
                							"reference"	: vakata_context.reference,
                							"element"	: vakata_context.element,
                							"position"	: {
                								"x" : vakata_context.position_x,
                								"y" : vakata_context.position_y
                							}
                						}) : false;
                			},
                			_parse : function (o, is_callback) {
                				if(!o) { return false; }
                				if(!is_callback) {
                					vakata_context.html		= "";
                					vakata_context.items	= [];
                				}
                				var str = "",
                					sep = false,
                					tmp;
                
                				if(is_callback) { str += "<"+"ul>"; }
                				$.each(o, function (i, val) {
                					if(!val) { return true; }
                					vakata_context.items.push(val);
                					if(!sep && val.separator_before) {
                						str += "<"+"li class='vakata-context-separator'><"+"a href='#' " + ($.vakata.context.settings.icons ? '' : 'style="margin-left:0px;"') + ">&#160;<"+"/a><"+"/li>";
                					}
                					sep = false;
                					str += "<"+"li class='" + (val._class || "") + (val._disabled === true || ($.isFunction(val._disabled) && val._disabled({ "item" : val, "reference" : vakata_context.reference, "element" : vakata_context.element })) ? " vakata-contextmenu-disabled " : "") + "' "+(val.shortcut?" data-shortcut='"+val.shortcut+"' ":'')+">";
                					str += "<"+"a href='#' rel='" + (vakata_context.items.length - 1) + "'>";
                					if($.vakata.context.settings.icons) {
                						str += "<"+"i ";
                						if(val.icon) {
                							if(val.icon.indexOf("/") !== -1 || val.icon.indexOf(".") !== -1) { str += " style='background:url(\"" + val.icon + "\") center center no-repeat' "; }
                							else { str += " class='" + val.icon + "' "; }
                						}
                						str += "><"+"/i><"+"span class='vakata-contextmenu-sep'>&#160;<"+"/span>";
                					}
                					str += val.label + (val.shortcut?' <span class="vakata-contextmenu-shortcut vakata-contextmenu-shortcut-'+val.shortcut+'">'+ (val.shortcut_label || '') +'</span>':'') + "<"+"/a>";
                					if(val.submenu) {
                						tmp = $.vakata.context._parse(val.submenu, true);
                						if(tmp) { str += tmp; }
                					}
                					str += "<"+"/li>";
                					if(val.separator_after) {
                						str += "<"+"li class='vakata-context-separator'><"+"a href='#' " + ($.vakata.context.settings.icons ? '' : 'style="margin-left:0px;"') + ">&#160;<"+"/a><"+"/li>";
                						sep = true;
                					}
                				});
                				str  = str.replace(/<li class\='vakata-context-separator'\><\/li\>$/,"");
                				if(is_callback) { str += "</ul>"; }
                				/**
                				 * triggered on the document when the contextmenu is parsed (HTML is built)
                				 * @event
                				 * @plugin contextmenu
                				 * @name context_parse.vakata
                				 * @param {jQuery} reference the element that was right clicked
                				 * @param {jQuery} element the DOM element of the menu itself
                				 * @param {Object} position the x & y coordinates of the menu
                				 */
                				if(!is_callback) { vakata_context.html = str; $.vakata.context._trigger("parse"); }
                				return str.length > 10 ? str : false;
                			},
                			_show_submenu : function (o) {
                				o = $(o);
                				if(!o.length || !o.children("ul").length) { return; }
                				var e = o.children("ul"),
                					x = o.offset().left + o.outerWidth(),
                					y = o.offset().top,
                					w = e.width(),
                					h = e.height(),
                					dw = $(window).width() + $(window).scrollLeft(),
                					dh = $(window).height() + $(window).scrollTop();
                				// може да се спести е една проверка - дали няма някой от класовете вече нагоре
                				if(right_to_left) {
                					o[x - (w + 10 + o.outerWidth()) < 0 ? "addClass" : "removeClass"]("vakata-context-left");
                				}
                				else {
                					o[x + w + 10 > dw ? "addClass" : "removeClass"]("vakata-context-right");
                				}
                				if(y + h + 10 > dh) {
                					e.css("bottom","-1px");
                				}
                				e.show();
                			},
                			show : function (reference, position, data) {
                				var o, e, x, y, w, h, dw, dh, cond = true;
                				if(vakata_context.element && vakata_context.element.length) {
                					vakata_context.element.width('');
                				}
                				switch(cond) {
                					case (!position && !reference):
                						return false;
                					case (!!position && !!reference):
                						vakata_context.reference	= reference;
                						vakata_context.position_x	= position.x;
                						vakata_context.position_y	= position.y;
                						break;
                					case (!position && !!reference):
                						vakata_context.reference	= reference;
                						o = reference.offset();
                						vakata_context.position_x	= o.left + reference.outerHeight();
                						vakata_context.position_y	= o.top;
                						break;
                					case (!!position && !reference):
                						vakata_context.position_x	= position.x;
                						vakata_context.position_y	= position.y;
                						break;
                				}
                				if(!!reference && !data && $(reference).data('vakata_contextmenu')) {
                					data = $(reference).data('vakata_contextmenu');
                				}
                				if($.vakata.context._parse(data)) {
                					vakata_context.element.html(vakata_context.html);
                				}
                				if(vakata_context.items.length) {
                					e = vakata_context.element;
                					x = vakata_context.position_x;
                					y = vakata_context.position_y;
                					w = e.width();
                					h = e.height();
                					dw = $(window).width() + $(window).scrollLeft();
                					dh = $(window).height() + $(window).scrollTop();
                					if(right_to_left) {
                						x -= e.outerWidth();
                						if(x < $(window).scrollLeft() + 20) {
                							x = $(window).scrollLeft() + 20;
                						}
                					}
                					if(x + w + 20 > dw) {
                						x = dw - (w + 20);
                					}
                					if(y + h + 20 > dh) {
                						y = dh - (h + 20);
                					}
                
                					vakata_context.element
                						.css({ "left" : x, "top" : y })
                						.show()
                						.find('a:eq(0)').focus().parent().addClass("vakata-context-hover");
                					vakata_context.is_visible = true;
                					/**
                					 * triggered on the document when the contextmenu is shown
                					 * @event
                					 * @plugin contextmenu
                					 * @name context_show.vakata
                					 * @param {jQuery} reference the element that was right clicked
                					 * @param {jQuery} element the DOM element of the menu itself
                					 * @param {Object} position the x & y coordinates of the menu
                					 */
                					$.vakata.context._trigger("show");
                				}
                			},
                			hide : function () {
                				if(vakata_context.is_visible) {
                					vakata_context.element.hide().find("ul").hide().end().find(':focus').blur();
                					vakata_context.is_visible = false;
                					/**
                					 * triggered on the document when the contextmenu is hidden
                					 * @event
                					 * @plugin contextmenu
                					 * @name context_hide.vakata
                					 * @param {jQuery} reference the element that was right clicked
                					 * @param {jQuery} element the DOM element of the menu itself
                					 * @param {Object} position the x & y coordinates of the menu
                					 */
                					$.vakata.context._trigger("hide");
                				}
                			}
                		};
                		$(function () {
                			right_to_left = $("body").css("direction") === "rtl";
                			var to = false;
                
                			vakata_context.element = $("<ul class='vakata-context'></ul>");
                			vakata_context.element
                				.on("mouseenter", "li", function (e) {
                					e.stopImmediatePropagation();
                
                					if($.contains(this, e.relatedTarget)) {
                						// премахнато заради delegate mouseleave по-долу
                						// $(this).find(".vakata-context-hover").removeClass("vakata-context-hover");
                						return;
                					}
                
                					if(to) { clearTimeout(to); }
                					vakata_context.element.find(".vakata-context-hover").removeClass("vakata-context-hover").end();
                
                					$(this)
                						.siblings().find("ul").hide().end().end()
                						.parentsUntil(".vakata-context", "li").addBack().addClass("vakata-context-hover");
                					$.vakata.context._show_submenu(this);
                				})
                				// тестово - дали не натоварва?
                				.on("mouseleave", "li", function (e) {
                					if($.contains(this, e.relatedTarget)) { return; }
                					$(this).find(".vakata-context-hover").addBack().removeClass("vakata-context-hover");
                				})
                				.on("mouseleave", function (e) {
                					$(this).find(".vakata-context-hover").removeClass("vakata-context-hover");
                					if($.vakata.context.settings.hide_onmouseleave) {
                						to = setTimeout(
                							(function (t) {
                								return function () { $.vakata.context.hide(); };
                							}(this)), $.vakata.context.settings.hide_onmouseleave);
                					}
                				})
                				.on("click", "a", function (e) {
                					e.preventDefault();
                				})
                				.on("mouseup", "a", function (e) {
                					if(!$(this).blur().parent().hasClass("vakata-context-disabled") && $.vakata.context._execute($(this).attr("rel")) !== false) {
                						$.vakata.context.hide();
                					}
                				})
                				.on('keydown', 'a', function (e) {
                						var o = null;
                						switch(e.which) {
                							case 13:
                							case 32:
                								e.type = "mouseup";
                								e.preventDefault();
                								$(e.currentTarget).trigger(e);
                								break;
                							case 37:
                								if(vakata_context.is_visible) {
                									vakata_context.element.find(".vakata-context-hover").last().parents("li:eq(0)").find("ul").hide().find(".vakata-context-hover").removeClass("vakata-context-hover").end().end().children('a').focus();
                									e.stopImmediatePropagation();
                									e.preventDefault();
                								}
                								break;
                							case 38:
                								if(vakata_context.is_visible) {
                									o = vakata_context.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").prevAll("li:not(.vakata-context-separator)").first();
                									if(!o.length) { o = vakata_context.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").last(); }
                									o.addClass("vakata-context-hover").children('a').focus();
                									e.stopImmediatePropagation();
                									e.preventDefault();
                								}
                								break;
                							case 39:
                								if(vakata_context.is_visible) {
                									vakata_context.element.find(".vakata-context-hover").last().children("ul").show().children("li:not(.vakata-context-separator)").removeClass("vakata-context-hover").first().addClass("vakata-context-hover").children('a').focus();
                									e.stopImmediatePropagation();
                									e.preventDefault();
                								}
                								break;
                							case 40:
                								if(vakata_context.is_visible) {
                									o = vakata_context.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").nextAll("li:not(.vakata-context-separator)").first();
                									if(!o.length) { o = vakata_context.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").first(); }
                									o.addClass("vakata-context-hover").children('a').focus();
                									e.stopImmediatePropagation();
                									e.preventDefault();
                								}
                								break;
                							case 27:
                								$.vakata.context.hide();
                								e.preventDefault();
                								break;
                							default:
                								//console.log(e.which);
                								break;
                						}
                					})
                				.on('keydown', function (e) {
                					e.preventDefault();
                					var a = vakata_context.element.find('.vakata-contextmenu-shortcut-' + e.which).parent();
                					if(a.parent().not('.vakata-context-disabled')) {
                						a.mouseup();
                					}
                				})
                				.appendTo("body");
                
                			$(document)
                				.on("mousedown", function (e) {
                					if(vakata_context.is_visible && !$.contains(vakata_context.element[0], e.target)) { $.vakata.context.hide(); }
                				})
                				.on("context_show.vakata", function (e, data) {
                					vakata_context.element.find("li:has(ul)").children("a").addClass("vakata-context-parent");
                					if(right_to_left) {
                						vakata_context.element.addClass("vakata-context-rtl").css("direction", "rtl");
                					}
                					// also apply a RTL class?
                					vakata_context.element.find("ul").hide().end();
                				});
                		});
                	}($));
                	// $.jstree.defaults.plugins.push("contextmenu");
                
                /**
                 * ### Drag'n'drop plugin
                 *
                 * Enables dragging and dropping of nodes in the tree, resulting in a move or copy operations.
                 */
                
                	/**
                	 * stores all defaults for the drag'n'drop plugin
                	 * @name $.jstree.defaults.dnd
                	 * @plugin dnd
                	 */
                	$.jstree.defaults.dnd = {
                		/**
                		 * a boolean indicating if a copy should be possible while dragging (by pressint the meta key or Ctrl). Defaults to `true`.
                		 * @name $.jstree.defaults.dnd.copy
                		 * @plugin dnd
                		 */
                		copy : true,
                		/**
                		 * a number indicating how long a node should remain hovered while dragging to be opened. Defaults to `500`.
                		 * @name $.jstree.defaults.dnd.open_timeout
                		 * @plugin dnd
                		 */
                		open_timeout : 500,
                		/**
                		 * a function invoked each time a node is about to be dragged, invoked in the tree's scope and receives the node as an argument - return `false` to prevent dragging
                		 * @name $.jstree.defaults.dnd.is_draggable
                		 * @plugin dnd
                		 */
                		is_draggable : true,
                		/**
                		 * a boolean indicating if checks should constantly be made while the user is dragging the node (as opposed to checking only on drop), default is `true`
                		 * @name $.jstree.defaults.dnd.check_while_dragging
                		 * @plugin dnd
                		 */
                		check_while_dragging : true
                	};
                	// TODO: now check works by checking for each node individually, how about max_children, unique, etc?
                	// TODO: drop somewhere else - maybe demo only?
                	$.jstree.plugins.dnd = function (options, parent) {
                		this.bind = function () {
                			parent.bind.call(this);
                
                			this.element
                				.on('mousedown touchstart', '.jstree-anchor', $.proxy(function (e) {
                					var obj = this.get_node(e.target),
                						mlt = this.is_selected(obj) ? this.get_selected().length : 1;
                					if(obj && obj.id && obj.id !== "#" && (e.which === 1 || e.type === "touchstart") &&
                						(this.settings.dnd.is_draggable === true || ($.isFunction(this.settings.dnd.is_draggable) && this.settings.dnd.is_draggable.call(this, obj)))
                					) {
                						this.element.trigger('mousedown.jstree');
                						return $.vakata.dnd.start(e, { 'jstree' : true, 'origin' : this, 'obj' : this.get_node(obj,true), 'nodes' : mlt > 1 ? this.get_selected() : [obj.id] }, '<div id="jstree-dnd" class="jstree-' + this.get_theme() + '"><i class="jstree-icon jstree-er"></i>' + (mlt > 1 ? mlt + ' ' + this.get_string('nodes') : this.get_text(e.currentTarget, true)) + '<ins class="jstree-copy" style="display:none;">+</ins></div>');
                					}
                				}, this));
                		};
                	};
                
                	$(function() {
                		// bind only once for all instances
                		var lastmv = false,
                			laster = false,
                			opento = false,
                			marker = $('<div id="jstree-marker">&#160;</div>').hide().appendTo('body');
                
                		$(document)
                			.bind('dnd_start.vakata', function (e, data) {
                				lastmv = false;
                			})
                			.bind('dnd_move.vakata', function (e, data) {
                				if(opento) { clearTimeout(opento); }
                				if(!data.data.jstree) { return; }
                
                				// if we are hovering the marker image do nothing (can happen on "inside" drags)
                				if(data.event.target.id && data.event.target.id === 'jstree-marker') {
                					return;
                				}
                
                				var ins = $.jstree.reference(data.event.target),
                					ref = false,
                					off = false,
                					rel = false,
                					l, t, h, p, i, o, ok, t1, t2, op, ps, pr;
                				// if we are over an instance
                				if(ins && ins._data && ins._data.dnd) {
                					marker.attr('class', 'jstree-' + ins.get_theme());
                					data.helper
                						.children().attr('class', 'jstree-' + ins.get_theme())
                						.find('.jstree-copy:eq(0)')[ data.data.origin && data.data.origin.settings.dnd.copy && (data.event.metaKey || data.event.ctrlKey) ? 'show' : 'hide' ]();
                
                
                					// if are hovering the container itself add a new root node
                					if( (data.event.target === ins.element[0] || data.event.target === ins.get_container_ul()[0]) && ins.get_container_ul().children().length === 0) {
                						ok = true;
                						for(t1 = 0, t2 = data.data.nodes.length; t1 < t2; t1++) {
                							ok = ok && ins.check( (data.data.origin && data.data.origin.settings.dnd.copy && (data.event.metaKey || data.event.ctrlKey) ? "copy_node" : "move_node"), (data.data.origin && data.data.origin !== ins ? data.data.origin.get_node(data.data.nodes[t1]) : data.data.nodes[t1]), '#', 'last');
                							if(!ok) { break; }
                						}
                						if(ok) {
                							lastmv = { 'ins' : ins, 'par' : '#', 'pos' : 'last' };
                							marker.hide();
                							data.helper.find('.jstree-icon:eq(0)').removeClass('jstree-er').addClass('jstree-ok');
                							return;
                						}
                					}
                					else {
                						// if we are hovering a tree node
                						ref = $(data.event.target).closest('a');
                						if(ref && ref.length && ref.parent().is('.jstree-closed, .jstree-open, .jstree-leaf')) {
                							off = ref.offset();
                							rel = data.event.pageY - off.top;
                							h = ref.height();
                							if(rel < h / 3) {
                								o = ['b', 'i', 'a'];
                							}
                							else if(rel > h - h / 3) {
                								o = ['a', 'i', 'b'];
                							}
                							else {
                								o = rel > h / 2 ? ['i', 'a', 'b'] : ['i', 'b', 'a'];
                							}
                							$.each(o, function (j, v) {
                								switch(v) {
                									case 'b':
                										l = off.left - 6;
                										t = off.top - 5;
                										p = ins.get_parent(ref);
                										i = ref.parent().index();
                										break;
                									case 'i':
                										l = off.left - 2;
                										t = off.top - 5 + h / 2 + 1;
                										p = ref.parent();
                										i = 0;
                										break;
                									case 'a':
                										l = off.left - 6;
                										t = off.top - 5 + h;
                										p = ins.get_parent(ref);
                										i = ref.parent().index() + 1;
                										break;
                								}
                								/*!
                								// TODO: moving inside, but the node is not yet loaded?
                								// the check will work anyway, as when moving the node will be loaded first and checked again
                								if(v === 'i' && !ins.is_loaded(p)) { }
                								*/
                								ok = true;
                								for(t1 = 0, t2 = data.data.nodes.length; t1 < t2; t1++) {
                									op = data.data.origin && data.data.origin.settings.dnd.copy && (data.event.metaKey || data.event.ctrlKey) ? "copy_node" : "move_node";
                									ps = i;
                									if(op === "move_node" && v === 'a' && (data.data.origin && data.data.origin === ins) && p === ins.get_parent(data.data.nodes[t1])) {
                										pr = ins.get_node(p);
                										if(ps > $.inArray(data.data.nodes[t1], pr.children)) {
                											ps -= 1;
                										}
                									}
                									ok = ok && ( (ins && ins.settings && ins.settings.dnd && ins.settings.dnd.check_while_dragging === false) || ins.check(op, (data.data.origin && data.data.origin !== ins ? data.data.origin.get_node(data.data.nodes[t1]) : data.data.nodes[t1]), p, ps) );
                									if(!ok) {
                										if(ins && ins.last_error) { laster = ins.last_error(); }
                										break;
                									}
                								}
                								if(ok) {
                									if(v === 'i' && ref.parent().is('.jstree-closed') && ins.settings.dnd.open_timeout) {
                										opento = setTimeout((function (x, z) { return function () { x.open_node(z); }; }(ins, ref)), ins.settings.dnd.open_timeout);
                									}
                									lastmv = { 'ins' : ins, 'par' : p, 'pos' : i };
                									marker.css({ 'left' : l + 'px', 'top' : t + 'px' }).show();
                									data.helper.find('.jstree-icon:eq(0)').removeClass('jstree-er').addClass('jstree-ok');
                									laster = {};
                									o = true;
                									return false;
                								}
                							});
                							if(o === true) { return; }
                						}
                					}
                				}
                				lastmv = false;
                				data.helper.find('.jstree-icon').removeClass('jstree-ok').addClass('jstree-er');
                				marker.hide();
                			})
                			.bind('dnd_scroll.vakata', function (e, data) {
                				if(!data.data.jstree) { return; }
                				marker.hide();
                				lastmv = false;
                				data.helper.find('.jstree-icon:eq(0)').removeClass('jstree-ok').addClass('jstree-er');
                			})
                			.bind('dnd_stop.vakata', function (e, data) {
                				if(opento) { clearTimeout(opento); }
                				if(!data.data.jstree) { return; }
                				marker.hide();
                				var i, j, nodes = [];
                				if(lastmv) {
                					for(i = 0, j = data.data.nodes.length; i < j; i++) {
                						nodes[i] = data.data.origin ? data.data.origin.get_node(data.data.nodes[i]) : data.data.nodes[i];
                					}
                					lastmv.ins[ data.data.origin && data.data.origin.settings.dnd.copy && (data.event.metaKey || data.event.ctrlKey) ? 'copy_node' : 'move_node' ](nodes, lastmv.par, lastmv.pos);
                				}
                				else {
                					i = $(data.event.target).closest('.jstree');
                					if(i.length && laster && laster.error && laster.error === 'check') {
                						i = i.jstree(true);
                						if(i) {
                							i.settings.core.error.call(this, laster);
                						}
                					}
                				}
                			})
                			.bind('keyup keydown', function (e, data) {
                				data = $.vakata.dnd._get();
                				if(data.data && data.data.jstree) {
                					data.helper.find('.jstree-copy:eq(0)')[ data.data.origin && data.data.origin.settings.dnd.copy && (e.metaKey || e.ctrlKey) ? 'show' : 'hide' ]();
                				}
                			});
                	});
                
                	// helpers
                	(function ($) {
                		$.fn.vakata_reverse = [].reverse;
                		// private variable
                		var vakata_dnd = {
                			element	: false,
                			is_down	: false,
                			is_drag	: false,
                			helper	: false,
                			helper_w: 0,
                			data	: false,
                			init_x	: 0,
                			init_y	: 0,
                			scroll_l: 0,
                			scroll_t: 0,
                			scroll_e: false,
                			scroll_i: false
                		};
                		$.vakata.dnd = {
                			settings : {
                				scroll_speed		: 10,
                				scroll_proximity	: 20,
                				helper_left			: 5,
                				helper_top			: 10,
                				threshold			: 5
                			},
                			_trigger : function (event_name, e) {
                				var data = $.vakata.dnd._get();
                				data.event = e;
                				$(document).triggerHandler("dnd_" + event_name + ".vakata", data);
                			},
                			_get : function () {
                				return {
                					"data"		: vakata_dnd.data,
                					"element"	: vakata_dnd.element,
                					"helper"	: vakata_dnd.helper
                				};
                			},
                			_clean : function () {
                				if(vakata_dnd.helper) { vakata_dnd.helper.remove(); }
                				if(vakata_dnd.scroll_i) { clearInterval(vakata_dnd.scroll_i); vakata_dnd.scroll_i = false; }
                				vakata_dnd = {
                					element	: false,
                					is_down	: false,
                					is_drag	: false,
                					helper	: false,
                					helper_w: 0,
                					data	: false,
                					init_x	: 0,
                					init_y	: 0,
                					scroll_l: 0,
                					scroll_t: 0,
                					scroll_e: false,
                					scroll_i: false
                				};
                				$(document).off("mousemove touchmove", $.vakata.dnd.drag);
                				$(document).off("mouseup touchend", $.vakata.dnd.stop);
                			},
                			_scroll : function (init_only) {
                				if(!vakata_dnd.scroll_e || (!vakata_dnd.scroll_l && !vakata_dnd.scroll_t)) {
                					if(vakata_dnd.scroll_i) { clearInterval(vakata_dnd.scroll_i); vakata_dnd.scroll_i = false; }
                					return false;
                				}
                				if(!vakata_dnd.scroll_i) {
                					vakata_dnd.scroll_i = setInterval($.vakata.dnd._scroll, 100);
                					return false;
                				}
                				if(init_only === true) { return false; }
                
                				var i = vakata_dnd.scroll_e.scrollTop(),
                					j = vakata_dnd.scroll_e.scrollLeft();
                				vakata_dnd.scroll_e.scrollTop(i + vakata_dnd.scroll_t * $.vakata.dnd.settings.scroll_speed);
                				vakata_dnd.scroll_e.scrollLeft(j + vakata_dnd.scroll_l * $.vakata.dnd.settings.scroll_speed);
                				if(i !== vakata_dnd.scroll_e.scrollTop() || j !== vakata_dnd.scroll_e.scrollLeft()) {
                					/**
                					 * triggered on the document when a drag causes an element to scroll
                					 * @event
                					 * @plugin dnd
                					 * @name dnd_scroll.vakata
                					 * @param {Mixed} data any data supplied with the call to $.vakata.dnd.start
                					 * @param {DOM} element the DOM element being dragged
                					 * @param {jQuery} helper the helper shown next to the mouse
                					 * @param {jQuery} event the element that is scrolling
                					 */
                					$.vakata.dnd._trigger("scroll", vakata_dnd.scroll_e);
                				}
                			},
                			start : function (e, data, html) {
                				if(e.type === "touchstart" && e.originalEvent && e.originalEvent.changedTouches && e.originalEvent.changedTouches[0]) {
                					e.pageX = e.originalEvent.changedTouches[0].pageX;
                					e.pageY = e.originalEvent.changedTouches[0].pageY;
                					e.target = document.elementFromPoint(e.originalEvent.changedTouches[0].pageX - window.pageXOffset, e.originalEvent.changedTouches[0].pageY - window.pageYOffset);
                				}
                				if(vakata_dnd.is_drag) { $.vakata.dnd.stop({}); }
                				try {
                					e.currentTarget.unselectable = "on";
                					e.currentTarget.onselectstart = function() { return false; };
                					if(e.currentTarget.style) { e.currentTarget.style.MozUserSelect = "none"; }
                				} catch(ignore) { }
                				vakata_dnd.init_x	= e.pageX;
                				vakata_dnd.init_y	= e.pageY;
                				vakata_dnd.data		= data;
                				vakata_dnd.is_down	= true;
                				vakata_dnd.element	= e.currentTarget;
                				if(html !== false) {
                					vakata_dnd.helper = $("<div id='vakata-dnd'></div>").html(html).css({
                						"display"		: "block",
                						"margin"		: "0",
                						"padding"		: "0",
                						"position"		: "absolute",
                						"top"			: "-2000px",
                						"lineHeight"	: "16px",
                						"zIndex"		: "10000"
                					});
                				}
                				$(document).bind("mousemove touchmove", $.vakata.dnd.drag);
                				$(document).bind("mouseup touchend", $.vakata.dnd.stop);
                				return false;
                			},
                			drag : function (e) {
                				if(e.type === "touchmove" && e.originalEvent && e.originalEvent.changedTouches && e.originalEvent.changedTouches[0]) {
                					e.pageX = e.originalEvent.changedTouches[0].pageX;
                					e.pageY = e.originalEvent.changedTouches[0].pageY;
                					e.target = document.elementFromPoint(e.originalEvent.changedTouches[0].pageX - window.pageXOffset, e.originalEvent.changedTouches[0].pageY - window.pageYOffset);
                				}
                				if(!vakata_dnd.is_down) { return; }
                				if(!vakata_dnd.is_drag) {
                					if(
                						Math.abs(e.pageX - vakata_dnd.init_x) > $.vakata.dnd.settings.threshold ||
                						Math.abs(e.pageY - vakata_dnd.init_y) > $.vakata.dnd.settings.threshold
                					) {
                						if(vakata_dnd.helper) {
                							vakata_dnd.helper.appendTo("body");
                							vakata_dnd.helper_w = vakata_dnd.helper.outerWidth();
                						}
                						vakata_dnd.is_drag = true;
                						/**
                						 * triggered on the document when a drag starts
                						 * @event
                						 * @plugin dnd
                						 * @name dnd_start.vakata
                						 * @param {Mixed} data any data supplied with the call to $.vakata.dnd.start
                						 * @param {DOM} element the DOM element being dragged
                						 * @param {jQuery} helper the helper shown next to the mouse
                						 * @param {Object} event the event that caused the start (probably mousemove)
                						 */
                						$.vakata.dnd._trigger("start", e);
                					}
                					else { return; }
                				}
                
                				var d  = false, w  = false,
                					dh = false, wh = false,
                					dw = false, ww = false,
                					dt = false, dl = false,
                					ht = false, hl = false;
                
                				vakata_dnd.scroll_t = 0;
                				vakata_dnd.scroll_l = 0;
                				vakata_dnd.scroll_e = false;
                				$(e.target)
                					.parentsUntil("body").addBack().vakata_reverse()
                					.filter(function () {
                						return	(/^auto|scroll$/).test($(this).css("overflow")) &&
                								(this.scrollHeight > this.offsetHeight || this.scrollWidth > this.offsetWidth);
                					})
                					.each(function () {
                						var t = $(this), o = t.offset();
                						if(this.scrollHeight > this.offsetHeight) {
                							if(o.top + t.height() - e.pageY < $.vakata.dnd.settings.scroll_proximity)	{ vakata_dnd.scroll_t = 1; }
                							if(e.pageY - o.top < $.vakata.dnd.settings.scroll_proximity)				{ vakata_dnd.scroll_t = -1; }
                						}
                						if(this.scrollWidth > this.offsetWidth) {
                							if(o.left + t.width() - e.pageX < $.vakata.dnd.settings.scroll_proximity)	{ vakata_dnd.scroll_l = 1; }
                							if(e.pageX - o.left < $.vakata.dnd.settings.scroll_proximity)				{ vakata_dnd.scroll_l = -1; }
                						}
                						if(vakata_dnd.scroll_t || vakata_dnd.scroll_l) {
                							vakata_dnd.scroll_e = $(this);
                							return false;
                						}
                					});
                
                				if(!vakata_dnd.scroll_e) {
                					d  = $(document); w = $(window);
                					dh = d.height(); wh = w.height();
                					dw = d.width(); ww = w.width();
                					dt = d.scrollTop(); dl = d.scrollLeft();
                					if(dh > wh && e.pageY - dt < $.vakata.dnd.settings.scroll_proximity)		{ vakata_dnd.scroll_t = -1;  }
                					if(dh > wh && wh - (e.pageY - dt) < $.vakata.dnd.settings.scroll_proximity)	{ vakata_dnd.scroll_t = 1; }
                					if(dw > ww && e.pageX - dl < $.vakata.dnd.settings.scroll_proximity)		{ vakata_dnd.scroll_l = -1; }
                					if(dw > ww && ww - (e.pageX - dl) < $.vakata.dnd.settings.scroll_proximity)	{ vakata_dnd.scroll_l = 1; }
                					if(vakata_dnd.scroll_t || vakata_dnd.scroll_l) {
                						vakata_dnd.scroll_e = d;
                					}
                				}
                				if(vakata_dnd.scroll_e) { $.vakata.dnd._scroll(true); }
                
                				if(vakata_dnd.helper) {
                					ht = parseInt(e.pageY + $.vakata.dnd.settings.helper_top, 10);
                					hl = parseInt(e.pageX + $.vakata.dnd.settings.helper_left, 10);
                					if(dh && ht + 25 > dh) { ht = dh - 50; }
                					if(dw && hl + vakata_dnd.helper_w > dw) { hl = dw - (vakata_dnd.helper_w + 2); }
                					vakata_dnd.helper.css({
                						left	: hl + "px",
                						top		: ht + "px"
                					});
                				}
                				/**
                				 * triggered on the document when a drag is in progress
                				 * @event
                				 * @plugin dnd
                				 * @name dnd_move.vakata
                				 * @param {Mixed} data any data supplied with the call to $.vakata.dnd.start
                				 * @param {DOM} element the DOM element being dragged
                				 * @param {jQuery} helper the helper shown next to the mouse
                				 * @param {Object} event the event that caused this to trigger (most likely mousemove)
                				 */
                				$.vakata.dnd._trigger("move", e);
                			},
                			stop : function (e) {
                				if(e.type === "touchend" && e.originalEvent && e.originalEvent.changedTouches && e.originalEvent.changedTouches[0]) {
                					e.pageX = e.originalEvent.changedTouches[0].pageX;
                					e.pageY = e.originalEvent.changedTouches[0].pageY;
                					e.target = document.elementFromPoint(e.originalEvent.changedTouches[0].pageX - window.pageXOffset, e.originalEvent.changedTouches[0].pageY - window.pageYOffset);
                				}
                				if(vakata_dnd.is_drag) {
                					/**
                					 * triggered on the document when a drag stops (the dragged element is dropped)
                					 * @event
                					 * @plugin dnd
                					 * @name dnd_stop.vakata
                					 * @param {Mixed} data any data supplied with the call to $.vakata.dnd.start
                					 * @param {DOM} element the DOM element being dragged
                					 * @param {jQuery} helper the helper shown next to the mouse
                					 * @param {Object} event the event that caused the stop
                					 */
                					$.vakata.dnd._trigger("stop", e);
                				}
                				$.vakata.dnd._clean();
                			}
                		};
                	}(jQuery));
                
                	// include the dnd plugin by default
                	// $.jstree.defaults.plugins.push("dnd");
                
                
                /**
                 * ### Search plugin
                 *
                 * Adds search functionality to jsTree.
                 */
                
                	/**
                	 * stores all defaults for the search plugin
                	 * @name $.jstree.defaults.search
                	 * @plugin search
                	 */
                	$.jstree.defaults.search = {
                		/**
                		 * a jQuery-like AJAX config, which jstree uses if a server should be queried for results. 
                		 * 
                		 * A `str` (which is the search string) parameter will be added with the request. The expected result is a JSON array with nodes that need to be opened so that matching nodes will be revealed.
                		 * Leave this setting as `false` to not query the server.
                		 * @name $.jstree.defaults.search.ajax
                		 * @plugin search
                		 */
                		ajax : false,
                		/**
                		 * Indicates if the search should be fuzzy or not (should `chnd3` match `child node 3`). Default is `true`.
                		 * @name $.jstree.defaults.search.fuzzy
                		 * @plugin search
                		 */
                		fuzzy : true,
                		/**
                		 * Indicates if the search should be case sensitive. Default is `false`.
                		 * @name $.jstree.defaults.search.case_sensitive
                		 * @plugin search
                		 */
                		case_sensitive : false,
                		/**
                		 * Indicates if the tree should be filtered to show only matching nodes (keep in mind this can be a heavy on large trees in old browsers). Default is `false`.
                		 * @name $.jstree.defaults.search.show_only_matches
                		 * @plugin search
                		 */
                		show_only_matches : false,
                		/**
                		 * Indicates if all nodes opened to reveal the search result, should be closed when the search is cleared or a new search is performed. Default is `true`.
                		 * @name $.jstree.defaults.search.close_opened_onclear
                		 * @plugin search
                		 */
                		close_opened_onclear : true
                	};
                
                	$.jstree.plugins.search = function (options, parent) {
                		this.bind = function () {
                			parent.bind.call(this);
                
                			this._data.search.str = "";
                			this._data.search.dom = $();
                			this._data.search.res = [];
                			this._data.search.opn = [];
                			this._data.search.sln = null;
                
                			if(this.settings.search.show_only_matches) {
                				this.element
                					.on("search.jstree", function (e, data) {
                						if(data.nodes.length) {
                							$(this).find("li").hide().filter('.jstree-last').filter(function() { return this.nextSibling; }).removeClass('jstree-last');
                							data.nodes.parentsUntil(".jstree").addBack().show()
                								.filter("ul").each(function () { $(this).children("li:visible").eq(-1).addClass("jstree-last"); });
                						}
                					})
                					.on("clear_search.jstree", function (e, data) {
                						if(data.nodes.length) {
                							$(this).find("li").css("display","").filter('.jstree-last').filter(function() { return this.nextSibling; }).removeClass('jstree-last');
                						}
                					});
                			}
                		};
                		/**
                		 * used to search the tree nodes for a given string
                		 * @name search(str [, skip_async])
                		 * @param {String} str the search string
                		 * @param {Boolean} skip_async if set to true server will not be queried even if configured
                		 * @plugin search
                		 * @trigger search.jstree
                		 */
                		this.search = function (str, skip_async) {
                			if(str === false || $.trim(str) === "") {
                				return this.clear_search();
                			}
                			var s = this.settings.search,
                				a = s.ajax ? $.extend({}, s.ajax) : false,
                				f = null,
                				r = [],
                				p = [], i, j;
                			if(this._data.search.res.length) {
                				this.clear_search();
                			}
                			if(!skip_async && a !== false) {
                				if(!a.data) { a.data = {}; }
                				a.data.str = str;
                				return $.ajax(a)
                					.fail($.proxy(function () {
                						this._data.core.last_error = { 'error' : 'ajax', 'plugin' : 'search', 'id' : 'search_01', 'reason' : 'Could not load search parents', 'data' : JSON.stringify(a) };
                						this.settings.core.error.call(this, this._data.core.last_error);
                					}, this))
                					.done($.proxy(function (d) {
                						if(d && d.d) { d = d.d; }
                						this._data.search.sln = !$.isArray(d) ? [] : d;
                						this._search_load(str);
                					}, this));
                			}
                			this._data.search.str = str;
                			this._data.search.dom = $();
                			this._data.search.res = [];
                			this._data.search.opn = [];
                
                			f = new $.vakata.search(str, true, { caseSensitive : s.case_sensitive, fuzzy : s.fuzzy });
                
                			$.each(this._model.data, function (i, v) {
                				if(v.text && f.search(v.text).isMatch) {
                					r.push(i);
                					p = p.concat(v.parents);
                				}
                			});
                			if(r.length) {
                				p = $.vakata.array_unique(p);
                				this._search_open(p);
                				for(i = 0, j = r.length; i < j; i++) {
                					f = this.get_node(r[i], true);
                					if(f) {
                						this._data.search.dom = this._data.search.dom.add(f);
                					}
                				}
                				this._data.search.res = r;
                				this._data.search.dom.children(".jstree-anchor").addClass('jstree-search');
                			}
                			/**
                			 * triggered after search is complete
                			 * @event
                			 * @name search.jstree
                			 * @param {jQuery} nodes a jQuery collection of matching nodes
                			 * @param {String} str the search string
                			 * @param {Array} res a collection of objects represeing the matching nodes
                			 * @plugin search
                			 */
                			this.trigger('search', { nodes : this._data.search.dom, str : str, res : this._data.search.res });
                		};
                		/**
                		 * used to clear the last search (removes classes and shows all nodes if filtering is on)
                		 * @name clear_search()
                		 * @plugin search
                		 * @trigger clear_search.jstree
                		 */
                		this.clear_search = function () {
                			this._data.search.dom.children(".jstree-anchor").removeClass("jstree-search");
                			if(this.settings.search.close_opened_onclear) {
                				this.close_node(this._data.search.opn, 0);
                			}
                			/**
                			 * triggered after search is complete
                			 * @event
                			 * @name clear_search.jstree
                			 * @param {jQuery} nodes a jQuery collection of matching nodes (the result from the last search)
                			 * @param {String} str the search string (the last search string)
                			 * @param {Array} res a collection of objects represeing the matching nodes (the result from the last search)
                			 * @plugin search
                			 */
                			this.trigger('clear_search', { 'nodes' : this._data.search.dom, str : this._data.search.str, res : this._data.search.res });
                			this._data.search.str = "";
                			this._data.search.res = [];
                			this._data.search.opn = [];
                			this._data.search.dom = $();
                		};
                		/**
                		 * opens nodes that need to be opened to reveal the search results. Used only internally.
                		 * @private
                		 * @name _search_open(d)
                		 * @param {Array} d an array of node IDs
                		 * @plugin search
                		 */
                		this._search_open = function (d) {
                			var t = this;
                			$.each(d.concat([]), function (i, v) {
                				v = document.getElementById(v);
                				if(v) {
                					if(t.is_closed(v)) {
                						t._data.search.opn.push(v.id);
                						t.open_node(v, function () { t._search_open(d); }, 0);
                					}
                				}
                			});
                		};
                		/**
                		 * loads nodes that need to be opened to reveal the search results. Used only internally.
                		 * @private
                		 * @name _search_load(d, str)
                		 * @param {String} str the search string
                		 * @plugin search
                		 */
                		this._search_load = function (str) {
                			var res = true,
                				t = this,
                				m = t._model.data;
                			if($.isArray(this._data.search.sln)) {
                				if(!this._data.search.sln.length) {
                					this._data.search.sln = null;
                					this.search(str, true);
                				}
                				else {
                					$.each(this._data.search.sln, function (i, v) {
                						if(m[v]) {
                							$.vakata.array_remove_item(t._data.search.sln, v);
                							if(!m[v].state.loaded) {
                								t.load_node(v, function (o, s) { if(s) { t._search_load(str); } });
                								res = false;
                							}
                						}
                					});
                					if(res) {
                						this._data.search.sln = [];
                						this._search_load(str);
                					}
                				}
                			}
                		};
                	};
                
                	// helpers
                	(function ($) {
                		// from http://kiro.me/projects/fuse.html
                		$.vakata.search = function(pattern, txt, options) {
                			options = options || {};
                			if(options.fuzzy !== false) {
                				options.fuzzy = true;
                			}
                			pattern = options.caseSensitive ? pattern : pattern.toLowerCase();
                			var MATCH_LOCATION	= options.location || 0,
                				MATCH_DISTANCE	= options.distance || 100,
                				MATCH_THRESHOLD	= options.threshold || 0.6,
                				patternLen = pattern.length,
                				matchmask, pattern_alphabet, match_bitapScore, search;
                			if(patternLen > 32) {
                				options.fuzzy = false;
                			}
                			if(options.fuzzy) {
                				matchmask = 1 << (patternLen - 1);
                				pattern_alphabet = (function () {
                					var mask = {},
                						i = 0;
                					for (i = 0; i < patternLen; i++) {
                						mask[pattern.charAt(i)] = 0;
                					}
                					for (i = 0; i < patternLen; i++) {
                						mask[pattern.charAt(i)] |= 1 << (patternLen - i - 1);
                					}
                					return mask;
                				}());
                				match_bitapScore = function (e, x) {
                					var accuracy = e / patternLen,
                						proximity = Math.abs(MATCH_LOCATION - x);
                					if(!MATCH_DISTANCE) {
                						return proximity ? 1.0 : accuracy;
                					}
                					return accuracy + (proximity / MATCH_DISTANCE);
                				};
                			}
                			search = function (text) {
                				text = options.caseSensitive ? text : text.toLowerCase();
                				if(pattern === text || text.indexOf(pattern) !== -1) {
                					return {
                						isMatch: true,
                						score: 0
                					};
                				}
                				if(!options.fuzzy) {
                					return {
                						isMatch: false,
                						score: 1
                					};
                				}
                				var i, j,
                					textLen = text.length,
                					scoreThreshold = MATCH_THRESHOLD,
                					bestLoc = text.indexOf(pattern, MATCH_LOCATION),
                					binMin, binMid,
                					binMax = patternLen + textLen,
                					lastRd, start, finish, rd, charMatch,
                					score = 1,
                					locations = [];
                				if (bestLoc !== -1) {
                					scoreThreshold = Math.min(match_bitapScore(0, bestLoc), scoreThreshold);
                					bestLoc = text.lastIndexOf(pattern, MATCH_LOCATION + patternLen);
                					if (bestLoc !== -1) {
                						scoreThreshold = Math.min(match_bitapScore(0, bestLoc), scoreThreshold);
                					}
                				}
                				bestLoc = -1;
                				for (i = 0; i < patternLen; i++) {
                					binMin = 0;
                					binMid = binMax;
                					while (binMin < binMid) {
                						if (match_bitapScore(i, MATCH_LOCATION + binMid) <= scoreThreshold) {
                							binMin = binMid;
                						} else {
                							binMax = binMid;
                						}
                						binMid = Math.floor((binMax - binMin) / 2 + binMin);
                					}
                					binMax = binMid;
                					start = Math.max(1, MATCH_LOCATION - binMid + 1);
                					finish = Math.min(MATCH_LOCATION + binMid, textLen) + patternLen;
                					rd = new Array(finish + 2);
                					rd[finish + 1] = (1 << i) - 1;
                					for (j = finish; j >= start; j--) {
                						charMatch = pattern_alphabet[text.charAt(j - 1)];
                						if (i === 0) {
                							rd[j] = ((rd[j + 1] << 1) | 1) & charMatch;
                						} else {
                							rd[j] = ((rd[j + 1] << 1) | 1) & charMatch | (((lastRd[j + 1] | lastRd[j]) << 1) | 1) | lastRd[j + 1];
                						}
                						if (rd[j] & matchmask) {
                							score = match_bitapScore(i, j - 1);
                							if (score <= scoreThreshold) {
                								scoreThreshold = score;
                								bestLoc = j - 1;
                								locations.push(bestLoc);
                								if (bestLoc > MATCH_LOCATION) {
                									start = Math.max(1, 2 * MATCH_LOCATION - bestLoc);
                								} else {
                									break;
                								}
                							}
                						}
                					}
                					if (match_bitapScore(i + 1, MATCH_LOCATION) > scoreThreshold) {
                						break;
                					}
                					lastRd = rd;
                				}
                				return {
                					isMatch: bestLoc >= 0,
                					score: score
                				};
                			};
                			return txt === true ? { 'search' : search } : search(txt);
                		};
                	}(jQuery));
                
                	// include the search plugin by default
                	// $.jstree.defaults.plugins.push("search");
                
                /**
                 * ### Sort plugin
                 *
                 * Autmatically sorts all siblings in the tree according to a sorting function.
                 */
                
                	/**
                	 * the settings function used to sort the nodes.
                	 * It is executed in the tree's context, accepts two nodes as arguments and should return `1` or `-1`.
                	 * @name $.jstree.defaults.sort
                	 * @plugin sort
                	 */
                	$.jstree.defaults.sort = function (a, b) {
                		//return this.get_type(a) === this.get_type(b) ? (this.get_text(a) > this.get_text(b) ? 1 : -1) : this.get_type(a) >= this.get_type(b);
                		return this.get_text(a) > this.get_text(b) ? 1 : -1;
                	};
                	$.jstree.plugins.sort = function (options, parent) {
                		this.bind = function () {
                			parent.bind.call(this);
                			this.element
                				.on("model.jstree", $.proxy(function (e, data) {
                						this.sort(data.parent, true);
                					}, this))
                				.on("rename_node.jstree create_node.jstree", $.proxy(function (e, data) {
                						this.sort(data.parent || data.node.parent, false);
                						this.redraw_node(data.parent || data.node.parent, true);
                					}, this))
                				.on("move_node.jstree copy_node.jstree", $.proxy(function (e, data) {
                						this.sort(data.parent, false);
                						this.redraw_node(data.parent, true);
                					}, this));
                		};
                		/**
                		 * used to sort a node's children
                		 * @private
                		 * @name sort(obj [, deep])
                		 * @param  {mixed} obj the node
                		 * @param {Boolean} deep if set to `true` nodes are sorted recursively.
                		 * @plugin sort
                		 * @trigger search.jstree
                		 */
                		this.sort = function (obj, deep) {
                			var i, j;
                			obj = this.get_node(obj);
                			if(obj && obj.children && obj.children.length) {
                				obj.children.sort($.proxy(this.settings.sort, this));
                				if(deep) {
                					for(i = 0, j = obj.children_d.length; i < j; i++) {
                						this.sort(obj.children_d[i], false);
                					}
                				}
                			}
                		};
                	};
                
                	// include the sort plugin by default
                	// $.jstree.defaults.plugins.push("sort");
                
                /**
                 * ### State plugin
                 *
                 * Saves the state of the tree (selected nodes, opened nodes) on the user's computer using available options (localStorage, cookies, etc)
                 */
                
                	var to = false;
                	/**
                	 * stores all defaults for the state plugin
                	 * @name $.jstree.defaults.state
                	 * @plugin state
                	 */
                	$.jstree.defaults.state = {
                		/**
                		 * A string for the key to use when saving the current tree (change if using multiple trees in your project). Defaults to `jstree`.
                		 * @name $.jstree.defaults.state.key
                		 * @plugin state
                		 */
                		key		: 'jstree',
                		/**
                		 * A space separated list of events that trigger a state save. Defaults to `changed.jstree open_node.jstree close_node.jstree`.
                		 * @name $.jstree.defaults.state.events
                		 * @plugin state
                		 */
                		events	: 'changed.jstree open_node.jstree close_node.jstree',
                		/**
                		 * Time in milliseconds after which the state will expire. Defaults to 'false' meaning - no expire.
                		 * @name $.jstree.defaults.state.ttl
                		 * @plugin state
                		 */
                		ttl		: false,
                		/**
                		 * A function that will be executed prior to restoring state with one argument - the state object. Can be used to clear unwanted parts of the state.
                		 * @name $.jstree.defaults.state.filter
                		 * @plugin state
                		 */
                		filter	: false
                	};
                	$.jstree.plugins.state = function (options, parent) {
                		this.bind = function () {
                			parent.bind.call(this);
                			var bind = $.proxy(function () {
                				this.element.on(this.settings.state.events, $.proxy(function () {
                					if(to) { clearTimeout(to); }
                					to = setTimeout($.proxy(function () { this.save_state(); }, this), 100);
                				}, this));
                			}, this);
                			this.element
                				.on("ready.jstree", $.proxy(function (e, data) {
                						this.element.one("restore_state.jstree", bind);
                						if(!this.restore_state()) { bind(); }
                					}, this));
                		};
                		/**
                		 * save the state
                		 * @name save_state()
                		 * @plugin state
                		 */
                		this.save_state = function () {
                			var st = { 'state' : this.get_state(), 'ttl' : this.settings.state.ttl, 'sec' : +(new Date()) };
                			$.vakata.storage.set(this.settings.state.key, JSON.stringify(st));
                		};
                		/**
                		 * restore the state from the user's computer
                		 * @name restore_state()
                		 * @plugin state
                		 */
                		this.restore_state = function () {
                			var k = $.vakata.storage.get(this.settings.state.key);
                			if(!!k) { try { k = JSON.parse(k); } catch(ex) { return false; } }
                			if(!!k && k.ttl && k.sec && +(new Date()) - k.sec > k.ttl) { return false; }
                			if(!!k && k.state) { k = k.state; }
                			if(!!k && $.isFunction(this.settings.state.filter)) { k = this.settings.state.filter.call(this, k); }
                			if(!!k) {
                				this.element.one("set_state.jstree", function (e, data) { data.instance.trigger('restore_state', { 'state' : $.extend(true, {}, k) }); });
                				this.set_state(k);
                				return true;
                			}
                			return false;
                		};
                		/**
                		 * clear the state on the user's computer
                		 * @name clear_state()
                		 * @plugin state
                		 */
                		this.clear_state = function () {
                			return $.vakata.storage.del(this.settings.state.key);
                		};
                	};
                
                	(function ($, undefined) {
                		$.vakata.storage = {
                			// simply specifying the functions in FF throws an error
                			set : function (key, val) { return window.localStorage.setItem(key, val); },
                			get : function (key) { return window.localStorage.getItem(key); },
                			del : function (key) { return window.localStorage.removeItem(key); }
                		};
                	}(jQuery));
                
                	// include the state plugin by default
                	// $.jstree.defaults.plugins.push("state");
                
                /**
                 * ### Types plugin
                 *
                 * Makes it possible to add predefined types for groups of nodes, which make it possible to easily control nesting rules and icon for each group.
                 */
                
                	/**
                	 * An object storing all types as key value pairs, where the key is the type name and the value is an object that could contain following keys (all optional).
                	 * 
                	 * * `max_children` the maximum number of immediate children this node type can have. Do not specify or set to `-1` for unlimited.
                	 * * `max_depth` the maximum number of nesting this node type can have. A value of `1` would mean that the node can have children, but no grandchildren. Do not specify or set to `-1` for unlimited.
                	 * * `valid_children` an array of node type strings, that nodes of this type can have as children. Do not specify or set to `-1` for no limits.
                	 * * `icon` a string - can be a path to an icon or a className, if using an image that is in the current directory use a `./` prefix, otherwise it will be detected as a class. Omit to use the default icon from your theme.
                	 *
                	 * There are two predefined types:
                	 * 
                	 * * `#` represents the root of the tree, for example `max_children` would control the maximum number of root nodes.
                	 * * `default` represents the default node - any settings here will be applied to all nodes that do not have a type specified.
                	 * 
                	 * @name $.jstree.defaults.types
                	 * @plugin types
                	 */
                	$.jstree.defaults.types = {
                		'#' : {},
                		'default' : {}
                	};
                
                	$.jstree.plugins.types = function (options, parent) {
                		this.init = function (el, options) {
                			var i, j;
                			if(options && options.types && options.types['default']) {
                				for(i in options.types) {
                					if(i !== "default" && i !== "#" && options.types.hasOwnProperty(i)) {
                						for(j in options.types['default']) {
                							if(options.types['default'].hasOwnProperty(j) && options.types[i][j] === undefined) {
                								options.types[i][j] = options.types['default'][j];
                							}
                						}
                					}
                				}
                			}
                			parent.init.call(this, el, options);
                			this._model.data['#'].type = '#';
                		};
                		this.bind = function () {
                			parent.bind.call(this);
                			this.element
                				.on('model.jstree', $.proxy(function (e, data) {
                						var m = this._model.data,
                							dpc = data.nodes,
                							t = this.settings.types,
                							i, j, c = 'default';
                						for(i = 0, j = dpc.length; i < j; i++) {
                							c = 'default';
                							if(m[dpc[i]].original && m[dpc[i]].original.type && t[m[dpc[i]].original.type]) {
                								c = m[dpc[i]].original.type;
                							}
                							if(m[dpc[i]].data && m[dpc[i]].data.jstree && m[dpc[i]].data.jstree.type && t[m[dpc[i]].data.jstree.type]) {
                								c = m[dpc[i]].data.jstree.type;
                							}
                							m[dpc[i]].type = c;
                							if(m[dpc[i]].icon === true && t[c].icon !== undefined) {
                								m[dpc[i]].icon = t[c].icon;
                							}
                						}
                					}, this));
                		};
                		this.get_json = function (obj, options, flat) {
                			var i, j,
                				m = this._model.data,
                				opt = options ? $.extend(true, {}, options, {no_id:false}) : {},
                				tmp = parent.get_json.call(this, obj, opt, flat);
                			if(tmp === false) { return false; }
                			if($.isArray(tmp)) {
                				for(i = 0, j = tmp.length; i < j; i++) {
                					tmp[i].type = tmp[i].id && m[tmp[i].id] && m[tmp[i].id].type ? m[tmp[i].id].type : "default";
                					if(options && options.no_id) {
                						delete tmp[i].id;
                						if(tmp[i].li_attr && tmp[i].li_attr.id) {
                							delete tmp[i].li_attr.id;
                						}
                					}
                				}
                			}
                			else {
                				tmp.type = tmp.id && m[tmp.id] && m[tmp.id].type ? m[tmp.id].type : "default";
                				if(options && options.no_id) {
                					tmp = this._delete_ids(tmp);
                				}
                			}
                			return tmp;
                		};
                		this._delete_ids = function (tmp) {
                			if($.isArray(tmp)) {
                				for(var i = 0, j = tmp.length; i < j; i++) {
                					tmp[i] = this._delete_ids(tmp[i]);
                				}
                				return tmp;
                			}
                			delete tmp.id;
                			if(tmp.li_attr && tmp.li_attr.id) {
                				delete tmp.li_attr.id;
                			}
                			if(tmp.children && $.isArray(tmp.children)) {
                				tmp.children = this._delete_ids(tmp.children);
                			}
                			return tmp;
                		};
                		this.check = function (chk, obj, par, pos) {
                			if(parent.check.call(this, chk, obj, par, pos) === false) { return false; }
                			obj = obj && obj.id ? obj : this.get_node(obj);
                			par = par && par.id ? par : this.get_node(par);
                			var m = obj && obj.id ? $.jstree.reference(obj.id) : null, tmp, d, i, j;
                			m = m && m._model && m._model.data ? m._model.data : null;
                			switch(chk) {
                				case "create_node":
                				case "move_node":
                				case "copy_node":
                					if(chk !== 'move_node' || $.inArray(obj.id, par.children) === -1) {
                						tmp = this.get_rules(par);
                						if(tmp.max_children !== undefined && tmp.max_children !== -1 && tmp.max_children === par.children.length) {
                							this._data.core.last_error = { 'error' : 'check', 'plugin' : 'types', 'id' : 'types_01', 'reason' : 'max_children prevents function: ' + chk, 'data' : JSON.stringify({ 'chk' : chk, 'pos' : pos, 'obj' : obj && obj.id ? obj.id : false, 'par' : par && par.id ? par.id : false }) };
                							return false;
                						}
                						if(tmp.valid_children !== undefined && tmp.valid_children !== -1 && $.inArray(obj.type, tmp.valid_children) === -1) {
                							this._data.core.last_error = { 'error' : 'check', 'plugin' : 'types', 'id' : 'types_02', 'reason' : 'valid_children prevents function: ' + chk, 'data' : JSON.stringify({ 'chk' : chk, 'pos' : pos, 'obj' : obj && obj.id ? obj.id : false, 'par' : par && par.id ? par.id : false }) };
                							return false;
                						}
                						if(m && obj.children_d && obj.parents) {
                							d = 0;
                							for(i = 0, j = obj.children_d.length; i < j; i++) {
                								d = Math.max(d, m[obj.children_d[i]].parents.length);
                							}
                							d = d - obj.parents.length + 1;
                						}
                						if(d <= 0 || d === undefined) { d = 1; }
                						do {
                							if(tmp.max_depth !== undefined && tmp.max_depth !== -1 && tmp.max_depth < d) {
                								this._data.core.last_error = { 'error' : 'check', 'plugin' : 'types', 'id' : 'types_03', 'reason' : 'max_depth prevents function: ' + chk, 'data' : JSON.stringify({ 'chk' : chk, 'pos' : pos, 'obj' : obj && obj.id ? obj.id : false, 'par' : par && par.id ? par.id : false }) };
                								return false;
                							}
                							par = this.get_node(par.parent);
                							tmp = this.get_rules(par);
                							d++;
                						} while(par);
                					}
                					break;
                			}
                			return true;
                		};
                		/**
                		 * used to retrieve the type settings object for a node
                		 * @name get_rules(obj)
                		 * @param {mixed} obj the node to find the rules for
                		 * @return {Object}
                		 * @plugin types
                		 */
                		this.get_rules = function (obj) {
                			obj = this.get_node(obj);
                			if(!obj) { return false; }
                			var tmp = this.get_type(obj, true);
                			if(tmp.max_depth === undefined) { tmp.max_depth = -1; }
                			if(tmp.max_children === undefined) { tmp.max_children = -1; }
                			if(tmp.valid_children === undefined) { tmp.valid_children = -1; }
                			return tmp;
                		};
                		/**
                		 * used to retrieve the type string or settings object for a node
                		 * @name get_type(obj [, rules])
                		 * @param {mixed} obj the node to find the rules for
                		 * @param {Boolean} rules if set to `true` instead of a string the settings object will be returned
                		 * @return {String|Object}
                		 * @plugin types
                		 */
                		this.get_type = function (obj, rules) {
                			obj = this.get_node(obj);
                			return (!obj) ? false : ( rules ? $.extend({ 'type' : obj.type }, this.settings.types[obj.type]) : obj.type);
                		};
                		/**
                		 * used to change a node's type
                		 * @name set_type(obj, type)
                		 * @param {mixed} obj the node to change
                		 * @param {String} type the new type
                		 * @plugin types
                		 */
                		this.set_type = function (obj, type) {
                			var t, t1, t2, old_type, old_icon;
                			if($.isArray(obj)) {
                				obj = obj.slice();
                				for(t1 = 0, t2 = obj.length; t1 < t2; t1++) {
                					this.set_type(obj[t1], type);
                				}
                				return true;
                			}
                			t = this.settings.types;
                			obj = this.get_node(obj);
                			if(!t[type] || !obj) { return false; }
                			old_type = obj.type;
                			old_icon = this.get_icon(obj);
                			obj.type = type;
                			if(old_icon === true || (t[old_type] && t[old_type].icon && old_icon === t[old_type].icon)) {
                				this.set_icon(obj, t[type].icon !== undefined ? t[type].icon : true);
                			}
                			return true;
                		};
                	};
                	// include the types plugin by default
                	// $.jstree.defaults.plugins.push("types");
                
                /**
                 * ### Unique plugin
                 *
                 * Enforces that no nodes with the same name can coexist as siblings.
                 */
                
                	$.jstree.plugins.unique = function (options, parent) {
                		this.check = function (chk, obj, par, pos) {
                			if(parent.check.call(this, chk, obj, par, pos) === false) { return false; }
                			obj = obj && obj.id ? obj : this.get_node(obj);
                			par = par && par.id ? par : this.get_node(par);
                			if(!par || !par.children) { return true; }
                			var n = chk === "rename_node" ? pos : obj.text,
                				c = [],
                				m = this._model.data, i, j;
                			for(i = 0, j = par.children.length; i < j; i++) {
                				c.push(m[par.children[i]].text);
                			}
                			switch(chk) {
                				case "delete_node":
                					return true;
                				case "rename_node":
                				case "copy_node":
                					i = ($.inArray(n, c) === -1);
                					if(!i) {
                						this._data.core.last_error = { 'error' : 'check', 'plugin' : 'unique', 'id' : 'unique_01', 'reason' : 'Child with name ' + n + ' already exists. Preventing: ' + chk, 'data' : JSON.stringify({ 'chk' : chk, 'pos' : pos, 'obj' : obj && obj.id ? obj.id : false, 'par' : par && par.id ? par.id : false }) };
                					}
                					return i;
                				case "move_node":
                					i = (obj.parent === par.id || $.inArray(n, c) === -1);
                					if(!i) {
                						this._data.core.last_error = { 'error' : 'check', 'plugin' : 'unique', 'id' : 'unique_01', 'reason' : 'Child with name ' + n + ' already exists. Preventing: ' + chk, 'data' : JSON.stringify({ 'chk' : chk, 'pos' : pos, 'obj' : obj && obj.id ? obj.id : false, 'par' : par && par.id ? par.id : false }) };
                					}
                					return i;
                			}
                			return true;
                		};
                	};
                
                	// include the unique plugin by default
                	// $.jstree.defaults.plugins.push("unique");
                
                
                /**
                 * ### Wholerow plugin
                 *
                 * Makes each node appear block level. Making selection easier. May cause slow down for large trees in old browsers.
                 */
                
                	var div = document.createElement('DIV');
                	div.setAttribute('unselectable','on');
                	div.className = 'jstree-wholerow';
                	div.innerHTML = '&#160;';
                	$.jstree.plugins.wholerow = function (options, parent) {
                		this.bind = function () {
                			parent.bind.call(this);
                
                			this.element
                				.on('loading', $.proxy(function () {
                						div.style.height = this._data.core.li_height + 'px';
                					}, this))
                				.on('ready.jstree set_state.jstree', $.proxy(function () {
                						this.hide_dots();
                					}, this))
                				.on("ready.jstree", $.proxy(function () {
                						this.get_container_ul().addClass('jstree-wholerow-ul');
                					}, this))
                				.on("deselect_all.jstree", $.proxy(function (e, data) {
                						this.element.find('.jstree-wholerow-clicked').removeClass('jstree-wholerow-clicked');
                					}, this))
                				.on("changed.jstree", $.proxy(function (e, data) {
                						this.element.find('.jstree-wholerow-clicked').removeClass('jstree-wholerow-clicked');
                						var tmp = false, i, j;
                						for(i = 0, j = data.selected.length; i < j; i++) {
                							tmp = this.get_node(data.selected[i], true);
                							if(tmp && tmp.length) {
                								tmp.children('.jstree-wholerow').addClass('jstree-wholerow-clicked');
                							}
                						}
                					}, this))
                				.on("open_node.jstree", $.proxy(function (e, data) {
                						this.get_node(data.node, true).find('.jstree-clicked').parent().children('.jstree-wholerow').addClass('jstree-wholerow-clicked');
                					}, this))
                				.on("hover_node.jstree dehover_node.jstree", $.proxy(function (e, data) {
                						this.get_node(data.node, true).children('.jstree-wholerow')[e.type === "hover_node"?"addClass":"removeClass"]('jstree-wholerow-hovered');
                					}, this))
                				.on("contextmenu.jstree", ".jstree-wholerow", $.proxy(function (e) {
                						e.preventDefault();
                						$(e.currentTarget).closest("li").children("a:eq(0)").trigger('contextmenu',e);
                					}, this))
                				.on("click.jstree", ".jstree-wholerow", function (e) {
                						e.stopImmediatePropagation();
                						var tmp = $.Event('click', { metaKey : e.metaKey, ctrlKey : e.ctrlKey, altKey : e.altKey, shiftKey : e.shiftKey });
                						$(e.currentTarget).closest("li").children("a:eq(0)").trigger(tmp).focus();
                					})
                				.on("click.jstree", ".jstree-leaf > .jstree-ocl", $.proxy(function (e) {
                						e.stopImmediatePropagation();
                						var tmp = $.Event('click', { metaKey : e.metaKey, ctrlKey : e.ctrlKey, altKey : e.altKey, shiftKey : e.shiftKey });
                						$(e.currentTarget).closest("li").children("a:eq(0)").trigger(tmp).focus();
                					}, this))
                				.on("mouseover.jstree", ".jstree-wholerow, .jstree-icon", $.proxy(function (e) {
                						e.stopImmediatePropagation();
                						this.hover_node(e.currentTarget);
                						return false;
                					}, this))
                				.on("mouseleave.jstree", ".jstree-node", $.proxy(function (e) {
                						this.dehover_node(e.currentTarget);
                					}, this));
                		};
                		this.teardown = function () {
                			if(this.settings.wholerow) {
                				this.element.find(".jstree-wholerow").remove();
                			}
                			parent.teardown.call(this);
                		};
                		this.redraw_node = function(obj, deep, callback) {
                			obj = parent.redraw_node.call(this, obj, deep, callback);
                			if(obj) {
                				var tmp = div.cloneNode(true);
                				//tmp.style.height = this._data.core.li_height + 'px';
                				if($.inArray(obj.id, this._data.core.selected) !== -1) { tmp.className += ' jstree-wholerow-clicked'; }
                				obj.insertBefore(tmp, obj.childNodes[0]);
                			}
                			return obj;
                		};
                	};
                	// include the wholerow plugin by default
                	// $.jstree.defaults.plugins.push("wholerow");
                
                }));
                (function() {
                  var __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
                    __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('widget/object_explorer',["underscore", "jquery", "jstree", "backbone", "common/has_properties", "common/continuum_view", "source/column_data_source"], function(_, $, $1, Backbone, HasProperties, ContinuumView, ColumnDataSource) {
                    var ObjectExplorer, ObjectExplorerView, ObjectExplorers, _ref, _ref1, _ref2;
                    ObjectExplorerView = (function(_super) {
                      __extends(ObjectExplorerView, _super);
                
                      function ObjectExplorerView() {
                        this.createContextMenu = __bind(this.createContextMenu, this);
                        this.onEvent = __bind(this.onEvent, this);
                        _ref = ObjectExplorerView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      ObjectExplorerView.prototype.initialize = function(options) {
                        ObjectExplorerView.__super__.initialize.call(this, options);
                        this.onEvent = _.debounce(this.onEvent, options.debounce || 200);
                        this.showToolbar = options.showToolbar || false;
                        this.arrayLimit = options.arrayLimit || 100;
                        return this.render();
                      };
                
                      ObjectExplorerView.prototype.base = function() {
                        if (this._base == null) {
                          this._base = require("common/base");
                        }
                        return this._base;
                      };
                
                      ObjectExplorerView.prototype.resolve_ref = function(ref) {
                        return this.base().Collections(ref.type).get(ref.id);
                      };
                
                      ObjectExplorerView.prototype.delegateEvents = function(events) {
                        var type, _i, _len, _ref1, _results;
                        ObjectExplorerView.__super__.delegateEvents.call(this, events);
                        _ref1 = _.keys(this.base().locations);
                        _results = [];
                        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
                          type = _ref1[_i];
                          _results.push(this.base().Collections(type).on("all", this.onEvent));
                        }
                        return _results;
                      };
                
                      ObjectExplorerView.prototype.onEvent = function(event) {
                        return this.reRender();
                      };
                
                      ObjectExplorerView.prototype.createTree = function(nonempty) {
                        var children, collection, node, nodes, type, _i, _len, _results;
                        if (nonempty == null) {
                          nonempty = true;
                        }
                        nodes = (function() {
                          var _i, _len, _ref1, _results,
                            _this = this;
                          _ref1 = _.keys(this.base().locations);
                          _results = [];
                          for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
                            type = _ref1[_i];
                            collection = this.base().Collections(type);
                            children = collection.map(function(obj, index) {
                              var visited;
                              visited = {};
                              visited[obj.id] = 1;
                              return _this.descend(index, obj, visited);
                            });
                            _results.push(this.node(type, collection, null, children));
                          }
                          return _results;
                        }).call(this);
                        if (nonempty) {
                          _results = [];
                          for (_i = 0, _len = nodes.length; _i < _len; _i++) {
                            node = nodes[_i];
                            if (node.children.length > 0) {
                              _results.push(node);
                            }
                          }
                          return _results;
                        } else {
                          return nodes;
                        }
                      };
                
                      ObjectExplorerView.prototype.descend = function(label, obj, visited) {
                        var arrayLimit, attr, children, color, html, icon, index, key, ref, truncate, type, value, _ref1;
                        if (this.isRef(obj)) {
                          ref = true;
                          if (visited[obj.id] == null) {
                            obj = this.base().Collections(obj.type).get(obj.id);
                          } else {
                            console.log("Cyclic reference to " + obj.type + ":" + obj.id);
                          }
                        }
                        if (obj instanceof HasProperties) {
                          visited = _.clone(visited);
                          visited[obj.id] = 1;
                          children = (function() {
                            var _ref1, _results;
                            _ref1 = obj.attributes;
                            _results = [];
                            for (attr in _ref1) {
                              if (!__hasProp.call(_ref1, attr)) continue;
                              value = _ref1[attr];
                              if (this.isAttr(attr)) {
                                _results.push(this.descend(attr, value, visited));
                              }
                            }
                            return _results;
                          }).call(this);
                          type = obj.type;
                          icon = "object";
                          value = null;
                          color = null;
                        } else if (_.isArray(obj)) {
                          truncate = obj.length > this.arrayLimit;
                          arrayLimit = this.arrayLimit || obj.length;
                          children = (function() {
                            var _i, _len, _ref1, _results;
                            _ref1 = obj.slice(0, +this.arrayLimit + 1 || 9e9);
                            _results = [];
                            for (index = _i = 0, _len = _ref1.length; _i < _len; index = ++_i) {
                              value = _ref1[index];
                              _results.push(this.descend(index, value, visited));
                            }
                            return _results;
                          }).call(this);
                          type = ("Array[" + obj.length + "]") + (truncate ? " (showing first " + this.arrayLimit + " items)" : "");
                          icon = "array";
                          value = null;
                          color = null;
                        } else if (_.isObject(obj)) {
                          children = (function() {
                            var _results;
                            _results = [];
                            for (key in obj) {
                              if (!__hasProp.call(obj, key)) continue;
                              value = obj[key];
                              _results.push(this.descend(key, value, visited));
                            }
                            return _results;
                          }).call(this);
                          type = "Object[" + (_.keys(obj).length) + "]";
                          icon = "object";
                          value = null;
                          color = null;
                        } else {
                          children = [];
                          _ref1 = _.isUndefined(obj) ? [null, "object", null, 'orchid'] : _.isNull(obj) ? [null, "object", null, 'teal'] : _.isBoolean(obj) ? ["Boolean", "boolean", null, 'darkmagenta'] : _.isNumber(obj) ? ["Number", "number", null, 'green'] : _.isString(obj) ? ["String", "string", "\"" + obj + "\"", 'firebrick'] : _.isFunction(obj) ? ["Function", "function", null, null] : _.isDate(obj) ? ["Date", "date", null, null] : _.isRegExp(obj) ? ["RegExp", "regexp", null, null] : _.isElement(obj) ? ["Element", "domnode", null, null] : [typeof obj, "object", null, null], type = _ref1[0], icon = _ref1[1], value = _ref1[2], color = _ref1[3];
                          if (value == null) {
                            value = "" + obj;
                          }
                          if (color == null) {
                            color = "black";
                          }
                        }
                        html = ["<span style=\"color:gray\">" + label + "</span>"];
                        if (type != null) {
                          html = html.concat([": ", "<span style=\"color:blue\">" + type + (ref ? "<span style=\"color:red\">*</span>" : "") + "</span>"]);
                        }
                        if (value != null) {
                          html = html.concat([" = ", "<span style=\"color:" + color + "\">" + value + "</span>"]);
                        }
                        return this.node(html.join(""), obj, icon, children);
                      };
                
                      ObjectExplorerView.prototype.isRef = function(obj) {
                        return _.isObject(obj) && (_.isEqual(_.keys(obj), ["id", "type"]) || _.isEqual(_.keys(obj), ["type", "id"]));
                      };
                
                      ObjectExplorerView.prototype.isAttr = function(attr) {
                        return attr.length > 0 && attr[0] !== '_';
                      };
                
                      ObjectExplorerView.prototype.node = function(text, obj, icon, children, open) {
                        return {
                          text: text,
                          data: {
                            obj: obj instanceof HasProperties ? {
                              type: obj.type,
                              id: obj.id
                            } : null
                          },
                          icon: icon ? "bk-icon-type-" + icon : null,
                          children: children || [],
                          state: {
                            open: open || false
                          }
                        };
                      };
                
                      ObjectExplorerView.prototype.renderToolbar = function() {
                        var $refresh, $toolbar,
                          _this = this;
                        $toolbar = $('<div class="bk-bs-btn-group"></div>');
                        $refresh = $('<button type="button" class="bk-bs-btn bk-bs-btn-default">Refresh</button>');
                        $refresh.click(function(event) {
                          return _this.reRender();
                        });
                        $toolbar.append($refresh);
                        if (!this.showToolbar) {
                          $toolbar.hide();
                        }
                        return $toolbar;
                      };
                
                      ObjectExplorerView.prototype.themeUrl = function() {
                        return null;
                      };
                
                      ObjectExplorerView.prototype.createContextMenu = function(node) {
                        var data, menu;
                        data = node.original;
                        menu = {};
                        return menu;
                      };
                
                      ObjectExplorerView.prototype.renderTree = function() {
                        var tree,
                          _this = this;
                        tree = $('<div/>');
                        tree.on('changed.jstree', function(event, data) {
                          var i, obj, ref, _i, _ref1, _results;
                          _results = [];
                          for (i = _i = 0, _ref1 = data.selected.length; 0 <= _ref1 ? _i < _ref1 : _i > _ref1; i = 0 <= _ref1 ? ++_i : --_i) {
                            ref = data.instance.get_node(data.selected[i]).data.ref;
                            if (ref != null) {
                              obj = _this.resolve_ref(ref);
                              if (obj instanceof ColumnDataSource.Model && (_this.mget("data_widget") != null)) {
                                _results.push(_this.mget("data_widget").set_obj("source", obj));
                              } else {
                                _results.push(void 0);
                              }
                            } else {
                              _results.push(void 0);
                            }
                          }
                          return _results;
                        });
                        tree.jstree({
                          core: {
                            data: this.createTree(),
                            themes: {
                              url: this.themeUrl()
                            }
                          },
                          contextmenu: {
                            items: this.createContextMenu
                          },
                          plugins: ["contextmenu"]
                        });
                        return tree;
                      };
                
                      ObjectExplorerView.prototype.render = function() {
                        this.$toolbar = this.renderToolbar();
                        this.$tree = this.renderTree();
                        return this.$el.append([this.$toolbar, this.$tree]);
                      };
                
                      ObjectExplorerView.prototype.reRender = function() {
                        this.$tree.jstree('destroy');
                        this.$el.empty();
                        return this.render();
                      };
                
                      return ObjectExplorerView;
                
                    })(ContinuumView.View);
                    ObjectExplorer = (function(_super) {
                      __extends(ObjectExplorer, _super);
                
                      function ObjectExplorer() {
                        _ref1 = ObjectExplorer.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      ObjectExplorer.prototype.type = 'ObjectExplorer';
                
                      ObjectExplorer.prototype.default_view = ObjectExplorerView;
                
                      ObjectExplorer.prototype.defaults = function() {
                        return {
                          data_widget: null
                        };
                      };
                
                      return ObjectExplorer;
                
                    })(HasProperties);
                    ObjectExplorers = (function(_super) {
                      __extends(ObjectExplorers, _super);
                
                      function ObjectExplorers() {
                        _ref2 = ObjectExplorers.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      ObjectExplorers.prototype.model = ObjectExplorer;
                
                      return ObjectExplorers;
                
                    })(Backbone.Collection);
                    return {
                      Model: ObjectExplorer,
                      Collection: new ObjectExplorers(),
                      View: ObjectExplorerView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=object_explorer.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('tool/object_explorer_tool',["underscore", "jquery", "bootstrap/modal", "backbone", "./tool", "./event_generators", "./object_explorer_tool_template", "widget/object_explorer"], function(_, $, $$1, Backbone, Tool, EventGenerators, object_explorer_tool_template, ObjectExplorer) {
                    var ButtonEventGenerator, ObjectExplorerTool, ObjectExplorerToolView, ObjectExplorerTools, _ref, _ref1, _ref2;
                    ButtonEventGenerator = EventGenerators.ButtonEventGenerator;
                    ObjectExplorerToolView = (function(_super) {
                      __extends(ObjectExplorerToolView, _super);
                
                      function ObjectExplorerToolView() {
                        _ref = ObjectExplorerToolView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      ObjectExplorerToolView.prototype.initialize = function(options) {
                        return ObjectExplorerToolView.__super__.initialize.call(this, options);
                      };
                
                      ObjectExplorerToolView.prototype.eventGeneratorClass = ButtonEventGenerator;
                
                      ObjectExplorerToolView.prototype.evgen_options = {
                        buttonText: "Object Explorer",
                        buttonIcon: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNui8sowAAAJHSURBVEiJvZbPTlNREManQmtSvTvqI7gw4R1cQpP6ABoahKWURxBfgo0ulRfgGYA9lI1dIdEFMSo0sZLY3p+L+514eu85t7dKOskk58838+XMmTNnaoAtUu4tlM3MDLCqpwQ2KMrGPDzREwLLQJKmaU3zB2a2pu1fUjOzNaBpZpamaQ1IgOWZzLm1OrADfAQ6wCOgDfwAJsCudKK1dWGeyeYVUA/y5AmBhsh8+QqMNb4EHksvtTYRxpcdoFFKCCx5ZCOgD9xofgOcAm8UgbrGpzlMX7aOdKmMMAEGAve1tgUcA92Sa+kKs6V5Xz4GQBIl1KV3gN/AN2Azevlx8k3ZjoGOl3ThO9SmC9HJPxCeuPDm1ovPQiFtm9l9MxuZ2X7AYYssY9tAK8C5L9uGMA/zDpx2gQ/e6c4CZKvAoZeJh8BqAHfmJdF7soIxHVKm5ROwl3OyAhxp/4sUra3ksHvy4UuQcET2oJ9QfLhtYa6Ap9Irra3nsHX52OXvE4mWNqRVpAwX9hMJ6QXwOodreSH9LC0L6cWskLqkGQpwF0kzlM9ugVDARHd1C/wEngeclT4L4IVsb4WJVxrPyD2N4/D1xIV5Hr4rbWbWNLPvZvZuXkIzeyvbJl5pKzBrHCveR8B2yam2hXmpebXiTfn3NATOKX5P516iXTPP96SNBtBjWlz1h6yCuA/YVZOxML70mPUBe5uuxRiQtQ2uxbgm+9170lCLMZBttRbDAxSaKODAC7cL2wEVmqiZhJHk+O82sVaV7K5k4Z33H/QTdNyD5wyAAAAAAElFTkSuQmCC"
                      };
                
                      ObjectExplorerToolView.prototype.toolType = "ObjectExplorerTool";
                
                      ObjectExplorerToolView.prototype.tool_events = {
                        activated: "_activated",
                        deactivated: "_close_modal"
                      };
                
                      ObjectExplorerToolView.prototype._activated = function(e) {
                        var _this = this;
                        this.$modal = $(object_explorer_tool_template({}));
                        this.$object_explorer_view = new ObjectExplorer.View({
                          el: this.$modal.find(".bk-bs-modal-body")
                        });
                        $('body').append(this.$modal);
                        this.$modal.on('hidden', function() {
                          return _this.plot_view.eventSink.trigger("clear_active_tool");
                        });
                        return this.$modal.modal({
                          show: true
                        });
                      };
                
                      ObjectExplorerToolView.prototype._close_modal = function() {
                        return this.$modal.remove();
                      };
                
                      return ObjectExplorerToolView;
                
                    })(Tool.View);
                    ObjectExplorerTool = (function(_super) {
                      __extends(ObjectExplorerTool, _super);
                
                      function ObjectExplorerTool() {
                        _ref1 = ObjectExplorerTool.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      ObjectExplorerTool.prototype.default_view = ObjectExplorerToolView;
                
                      ObjectExplorerTool.prototype.type = "ObjectExplorerTool";
                
                      ObjectExplorerTool.prototype.display_defaults = function() {
                        return ObjectExplorerTool.__super__.display_defaults.call(this);
                      };
                
                      return ObjectExplorerTool;
                
                    })(Tool.Model);
                    ObjectExplorerTools = (function(_super) {
                      __extends(ObjectExplorerTools, _super);
                
                      function ObjectExplorerTools() {
                        _ref2 = ObjectExplorerTools.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      ObjectExplorerTools.prototype.model = ObjectExplorerTool;
                
                      return ObjectExplorerTools;
                
                    })(Backbone.Collection);
                    return {
                      Model: ObjectExplorerTool,
                      Collection: new ObjectExplorerTools(),
                      View: ObjectExplorerToolView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=object_explorer_tool.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('widget/data_slider',["common/plot_widget", "common/has_parent"], function(PlotWidget, HasParent) {
                    var DataSlider, DataSliderView, DataSliders, _ref, _ref1, _ref2;
                    DataSliderView = (function(_super) {
                      __extends(DataSliderView, _super);
                
                      function DataSliderView() {
                        _ref = DataSliderView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      DataSliderView.prototype.attributes = {
                        "class": "dataslider bk-bs-pull-left"
                      };
                
                      DataSliderView.prototype.initialize = function(options) {
                        DataSliderView.__super__.initialize.call(this, options);
                        this.render_init();
                        return this.select = _.throttle(this._select, 50);
                      };
                
                      DataSliderView.prototype.delegateEvents = function(events) {
                        DataSliderView.__super__.delegateEvents.call(this, events);
                        return "pass";
                      };
                
                      DataSliderView.prototype.label = function(min, max) {
                        this.$(".minlabel").text(min);
                        return this.$(".maxlabel").text(max);
                      };
                
                      DataSliderView.prototype.render_init = function() {
                        var column, max, min, _ref1,
                          _this = this;
                        this.$el.html("");
                        this.$el.append("<div class='maxlabel'></div>");
                        this.$el.append("<div class='slider'></div>");
                        this.$el.append("<div class='minlabel'></div>");
                        this.plot_view.$(".plotarea").append(this.$el);
                        column = this.mget('data_source').getcolumn(this.mget('field'));
                        _ref1 = [_.min(column), _.max(column)], min = _ref1[0], max = _ref1[1];
                        this.$el.find(".slider").slider({
                          orientation: "vertical",
                          animate: "fast",
                          step: (max - min) / 50.0,
                          min: min,
                          max: max,
                          values: [min, max],
                          slide: function(event, ui) {
                            _this.set_selection_range(event, ui);
                            return _this.select(event, ui);
                          }
                        });
                        this.label(min, max);
                        return this.$el.find(".slider").height(this.plot_view.frame.get('height'));
                      };
                
                      DataSliderView.prototype.set_selection_range = function(event, ui) {
                        var data_source, field, max, min;
                        min = _.min(ui.values);
                        max = _.max(ui.values);
                        this.label(min, max);
                        data_source = this.mget('data_source');
                        field = this.mget('field');
                        if (data_source.range_selections == null) {
                          data_source.range_selections = {};
                        }
                        return data_source.range_selections[field] = [min, max];
                      };
                
                      DataSliderView.prototype._select = function() {
                        var colname, columns, data_source, i, max, min, numrows, select, selected, val, value, _i, _ref1, _ref2;
                        data_source = this.mget('data_source');
                        columns = {};
                        numrows = 0;
                        _ref1 = data_source.range_selections;
                        for (colname in _ref1) {
                          if (!__hasProp.call(_ref1, colname)) continue;
                          value = _ref1[colname];
                          columns[colname] = data_source.getcolumn(colname);
                          numrows = columns[colname].length;
                        }
                        selected = [];
                        for (i = _i = 0; 0 <= numrows ? _i < numrows : _i > numrows; i = 0 <= numrows ? ++_i : --_i) {
                          select = true;
                          _ref2 = data_source.range_selections;
                          for (colname in _ref2) {
                            if (!__hasProp.call(_ref2, colname)) continue;
                            value = _ref2[colname];
                            min = value[0], max = value[1];
                            val = columns[colname][i];
                            if (val < min || val > max) {
                              select = false;
                              break;
                            }
                          }
                          if (select) {
                            selected.push(i);
                          }
                        }
                        return data_source.save({
                          selected: selected
                        }, {
                          patch: true
                        });
                      };
                
                      return DataSliderView;
                
                    })(PlotWidget);
                    DataSlider = (function(_super) {
                      __extends(DataSlider, _super);
                
                      function DataSlider() {
                        _ref1 = DataSlider.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      DataSlider.prototype.type = "DataSlider";
                
                      DataSlider.prototype.default_view = DataSliderView;
                
                      DataSlider.prototype.defaults = function() {
                        return {
                          data_source: null,
                          field: null
                        };
                      };
                
                      DataSlider.prototype.display_defaults = function() {
                        return {
                          level: 'tool'
                        };
                      };
                
                      return DataSlider;
                
                    })(HasParent);
                    DataSliders = (function(_super) {
                      __extends(DataSliders, _super);
                
                      function DataSliders() {
                        _ref2 = DataSliders.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      DataSliders.prototype.model = DataSlider;
                
                      return DataSliders;
                
                    })(Backbone.Collection);
                    return {
                      "Model": DataSlider,
                      "Collection": new DataSliders()
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=data_slider.js.map
                */;
                define('widget/data_table_template',[],function(){
                  var template = function(__obj) {
                  var _safe = function(value) {
                    if (typeof value === 'undefined' && value == null)
                      value = '';
                    var result = new String(value);
                    result.ecoSafe = true;
                    return result;
                  };
                  return (function() {
                    var __out = [], __self = this, _print = function(value) {
                      if (typeof value !== 'undefined' && value != null)
                        __out.push(value.ecoSafe ? value : __self.escape(value));
                    }, _capture = function(callback) {
                      var out = __out, result;
                      __out = [];
                      callback.call(this);
                      result = __out.join('');
                      __out = out;
                      return _safe(result);
                    };
                    (function() {
                      var column, idx, _i, _j, _k, _len, _len1, _len2, _ref, _ref1, _ref2;
                    
                      _print(_safe('<table class="bk-bs-table bk-bs-table-bordered">\n  <thead>\n    '));
                    
                      if (this.counts) {
                        _print(_safe('\n      <th>counts</th>\n    '));
                      }
                    
                      _print(_safe('\n    <th>index</th>\n    '));
                    
                      _ref = this.columns;
                      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
                        column = _ref[_i];
                        _print(_safe('\n      '));
                        if (!this.skip[column]) {
                          _print(_safe('\n        <th style="white-space: nowrap;" data-cdx-column="'));
                          _print(column);
                          _print(_safe('">\n          <a class="pandascolumn">'));
                          _print(column);
                          _print(_safe('</a>\n          '));
                          if (this.sort_ascendings[column] === true) {
                            _print(_safe('\n            <i class="cdx-column-sort fa fa-sort-up"></i>\n          '));
                          } else if (this.sort_ascendings[column] === false) {
                            _print(_safe('\n            <i class="cdx-column-sort fa fa-sort-down"></i>\n          '));
                          } else {
                            _print(_safe('\n            <i class="cdx-column-sort fa fa-sort"></i>\n          '));
                          }
                          _print(_safe('\n        </th>\n      '));
                        }
                        _print(_safe('\n    '));
                      }
                    
                      _print(_safe('\n  </thead>\n  '));
                    
                      _ref1 = _.range(this.length);
                      for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
                        idx = _ref1[_j];
                        _print(_safe('\n  <tr class="pandasrow" rownum="'));
                        _print(idx);
                        _print(_safe('">\n    '));
                        if (this.selected && this.selected[idx]) {
                          _print(_safe('\n      <td style="background-color:'));
                          _print(this.colors[idx]);
                          _print(_safe('">\n        '));
                          _print(this.selected[idx]);
                          _print(_safe('/'));
                          _print(this.counts[idx]);
                          _print(_safe('\n      </td>\n    '));
                        } else {
                          _print(_safe('\n      <td> '));
                          _print(this.counts[idx]);
                          _print(_safe(' </td>\n    '));
                        }
                        _print(_safe('\n    <td> '));
                        _print(this.index[idx]);
                        _print(_safe(' </td>\n    '));
                        _ref2 = this.columns;
                        for (_k = 0, _len2 = _ref2.length; _k < _len2; _k++) {
                          column = _ref2[_k];
                          _print(_safe('\n      '));
                          if (!this.skip[column]) {
                            _print(_safe('\n      <td> '));
                            _print(this.data[column][idx]);
                            _print(_safe(' </td>\n      '));
                          }
                          _print(_safe('\n    '));
                        }
                        _print(_safe('\n  </tr>\n  '));
                      }
                    
                      _print(_safe('\n</table>\n<form>\n  <center>\n    <ul class="pagination">\n      <li><a href="javascript://" class="cdx-go-first">First</a></li>\n      <li><a href="javascript://" class="cdx-go-prev">Previous</a></li>\n      <li><a href="javascript://" class="cdx-go-next">Next</a></li>\n      <li><a href="javascript://" class="cdx-go-last">Last</a></li>\n    </ul>\n    <div class="paginatedisplay">\n      Show <input type="text" class="pandassize" value="'));
                    
                      _print(this.length);
                    
                      _print(_safe('"> records\n      From <input type="text" class="pandasoffset" value="'));
                    
                      _print(this.offset);
                    
                      _print(_safe('">\n      to '));
                    
                      _print(this.length + this.offset);
                    
                      _print(_safe(' -\n      Total: '));
                    
                      _print(this.totallength);
                    
                      _print(_safe('\n    </div>\n  </center>\n</form>\n'));
                    
                    }).call(this);
                    
                    return __out.join('');
                  }).call((function() {
                    var obj = {
                      escape: function(value) {
                        return ('' + value)
                          .replace(/&/g, '&amp;')
                          .replace(/</g, '&lt;')
                          .replace(/>/g, '&gt;')
                          .replace(/"/g, '&quot;');
                      },
                      safe: _safe
                    }, key;
                    for (key in __obj) obj[key] = __obj[key];
                    return obj;
                  })());
                };
                  return template;
                });
                
                (function() {
                  var __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
                    __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('widget/data_table',["underscore", "backbone", "common/has_parent", "common/continuum_view", "./data_table_template"], function(_, Backbone, HasParent, ContinuumView, data_table_template) {
                    var DataTable, DataTableView, DataTables, ENTER, _ref, _ref1, _ref2;
                    ENTER = 13;
                    DataTableView = (function(_super) {
                      __extends(DataTableView, _super);
                
                      function DataTableView() {
                        this.colors = __bind(this.colors, this);
                        this.go_last = __bind(this.go_last, this);
                        this.go_next = __bind(this.go_next, this);
                        this.go_prev = __bind(this.go_prev, this);
                        this.go_first = __bind(this.go_first, this);
                        this.toggle_more_controls = __bind(this.toggle_more_controls, this);
                        this.sort = __bind(this.sort, this);
                        this.rowclick = __bind(this.rowclick, this);
                        this.toggle_filterselected = __bind(this.toggle_filterselected, this);
                        this.clearselected = __bind(this.clearselected, this);
                        this.computedtxtbox = __bind(this.computedtxtbox, this);
                        this.column_del = __bind(this.column_del, this);
                        this.search = __bind(this.search, this);
                        _ref = DataTableView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      DataTableView.prototype.template = data_table_template;
                
                      DataTableView.prototype.initialize = function(options) {
                        DataTableView.__super__.initialize.call(this, options);
                        this.listenTo(this.model, 'destroy', this.remove);
                        this.listenTo(this.model, 'change', this.render);
                        return this.render();
                      };
                
                      DataTableView.prototype.events = {
                        "keyup .pandasgroup": 'pandasgroup',
                        "keyup .pandasoffset": 'pandasoffset',
                        "keyup .pandassize": 'pandassize',
                        "change .pandasagg": 'pandasagg',
                        "click .cdx-go-first": 'go_first',
                        "click .cdx-go-prev": 'go_prev',
                        "click .cdx-go-next": 'go_next',
                        "click .cdx-go-last": 'go_last',
                        "click .controlsmore": 'toggle_more_controls',
                        "click .cdx-column-sort": 'sort',
                        "click .pandasrow": 'rowclick',
                        "click .filterselected": 'toggle_filterselected',
                        "click .clearselected": 'clearselected',
                        "keyup .computedtxtbox": 'computedtxtbox',
                        "click .column_del": "column_del",
                        "keyup .search": 'search'
                      };
                
                      DataTableView.prototype.search = function(e) {
                        var code, source;
                        if (e.keyCode === ENTER) {
                          code = $(e.currentTarget).val();
                          source = this.model.get('source');
                          source.rpc('search', [code]);
                          return e.preventDefault();
                        }
                      };
                
                      DataTableView.prototype.column_del = function(e) {
                        var computed_columns, name, old, source;
                        source = this.model.get('source');
                        old = source.get('computed_columns');
                        name = $(e.currentTarget).attr('name');
                        computed_columns = _.filter(old, function(x) {
                          return x.name !== name;
                        });
                        return source.rpc('set_computed_columns', [computed_columns]);
                      };
                
                      DataTableView.prototype.computedtxtbox = function(e) {
                        var code, name, old, source;
                        if (e.keyCode === ENTER) {
                          name = this.$('.computedname').val();
                          code = this.$('.computedtxtbox').val();
                          source = this.model.get('source');
                          old = source.get('computed_columns');
                          old.push({
                            name: name,
                            code: code
                          });
                          source.rpc('set_computed_columns', [old]);
                          return e.preventDefault();
                        }
                      };
                
                      DataTableView.prototype.clearselected = function(e) {
                        return this.model.rpc('setselect', [[]]);
                      };
                
                      DataTableView.prototype.toggle_filterselected = function(e) {
                        var checked;
                        checked = this.$('.filterselected').is(":checked");
                        this.mset('filterselected', checked);
                        return this.model.save();
                      };
                
                      DataTableView.prototype.rowclick = function(e) {
                        var count, counts, idx, index, ratio, ratios, resp, rownum, select, selected;
                        counts = this.counts();
                        selected = this.selected();
                        ratios = (function() {
                          var _i, _len, _ref1, _ref2, _results;
                          _ref1 = _.zip(selected, counts);
                          _results = [];
                          for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
                            _ref2 = _ref1[_i], select = _ref2[0], count = _ref2[1];
                            _results.push(select / count);
                          }
                          return _results;
                        })();
                        selected = (function() {
                          var _i, _len, _results;
                          _results = [];
                          for (idx = _i = 0, _len = ratios.length; _i < _len; idx = ++_i) {
                            ratio = ratios[idx];
                            if (ratio > 0.5) {
                              _results.push(idx);
                            }
                          }
                          return _results;
                        })();
                        rownum = Number($(e.currentTarget).attr('rownum'));
                        index = selected.indexOf(rownum);
                        if (index === -1) {
                          resp = this.model.rpc('select', [[rownum]]);
                        } else {
                          resp = this.model.rpc('deselect', [[rownum]]);
                        }
                        return null;
                      };
                
                      DataTableView.prototype.sort = function(event) {
                        var column;
                        column = $(event.currentTarget).parent().data("cdx-column");
                        return this.model.toggle_column_sort(column);
                      };
                
                      DataTableView.prototype.toggle_more_controls = function() {
                        if (this.controls_hide) {
                          this.controls_hide = false;
                        } else {
                          this.controls_hide = true;
                        }
                        return this.render();
                      };
                
                      DataTableView.prototype.go_first = function() {
                        return this.model.go_first();
                      };
                
                      DataTableView.prototype.go_prev = function() {
                        return this.model.go_prev();
                      };
                
                      DataTableView.prototype.go_next = function() {
                        return this.model.go_next();
                      };
                
                      DataTableView.prototype.go_last = function() {
                        return this.model.go_last();
                      };
                
                      DataTableView.prototype.pandasoffset = function(e) {
                        var offset;
                        if (e.keyCode === ENTER) {
                          offset = this.$el.find('.pandasoffset').val();
                          offset = Number(offset);
                          if (_.isNaN(offset)) {
                            offset = this.model.defaults.offset;
                          }
                          this.model.save('offset', offset, {
                            wait: true
                          });
                          return e.preventDefault();
                        }
                      };
                
                      DataTableView.prototype.pandassize = function(e) {
                        var size, sizetxt;
                        if (e.keyCode === ENTER) {
                          sizetxt = this.$el.find('.pandassize').val();
                          size = Number(sizetxt);
                          if (_.isNaN(size) || sizetxt === "") {
                            size = this.model.defaults.length;
                          }
                          if (size + this.mget('offset') > this.mget('maxlength')) {
                            size = this.mget('maxlength') - this.mget('offset');
                          }
                          this.model.save('length', size, {
                            wait: true
                          });
                          return e.preventDefault();
                        }
                      };
                
                      DataTableView.prototype.pandasagg = function() {
                        return this.model.save('agg', this.$el.find('.pandasagg').val(), {
                          'wait': true
                        });
                      };
                
                      DataTableView.prototype.fromcsv = function(str) {
                        if (!str) {
                          return [];
                        }
                        return _.map(str.split(","), function(x) {
                          return x.trim();
                        });
                      };
                
                      DataTableView.prototype.pandasgroup = function(e) {
                        if (e.keyCode === ENTER) {
                          this.model.set({
                            group: this.fromcsv(this.$el.find(".pandasgroup").val()),
                            offset: 0
                          });
                          this.model.save();
                          e.preventDefault();
                          return false;
                        }
                      };
                
                      DataTableView.prototype.counts = function() {
                        return this.mget('tabledata').data._counts;
                      };
                
                      DataTableView.prototype.selected = function() {
                        return this.mget('tabledata').data._selected;
                      };
                
                      DataTableView.prototype.colors = function() {
                        var counts, selected;
                        counts = this.counts();
                        selected = this.selected();
                        if (counts && selected) {
                          return _.map(_.zip(counts, selected), function(temp) {
                            var alpha, count;
                            count = temp[0], selected = temp[1];
                            alpha = 0.3 * selected / count;
                            return "rgba(0,0,255," + alpha + ")";
                          });
                        } else {
                          return null;
                        }
                      };
                
                      DataTableView.prototype.render = function() {
                        var colors, group, html, obj, sort, sort_ascendings, source, template_data, _i, _len, _ref1;
                        group = this.mget('group');
                        if (_.isArray(group)) {
                          group = group.join(",");
                        }
                        sort = this.mget('sort');
                        if (_.isArray(sort)) {
                          sort = sort.join(",");
                        }
                        colors = this.colors();
                        sort_ascendings = {};
                        _ref1 = this.mget('sort');
                        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
                          obj = _ref1[_i];
                          sort_ascendings[obj['column']] = obj['ascending'];
                        }
                        source = this.mget('source');
                        template_data = {
                          skip: {
                            _counts: true,
                            _selected: true,
                            index: true
                          },
                          computed_columns: this.mget('source').get('computed_columns'),
                          columns: this.mget('tabledata').column_names,
                          data: this.mget('tabledata').data,
                          group: group,
                          sort_ascendings: sort_ascendings,
                          offset: this.mget('offset'),
                          length: this.model.length(),
                          filterselected: this.mget('filterselected'),
                          totallength: this.mget('totallength'),
                          counts: this.mget('tabledata').data._counts,
                          selected: this.mget('tabledata').data._selected,
                          controls_hide: this.controls_hide,
                          colors: colors,
                          index: this.mget('tabledata').data.index
                        };
                        this.$el.empty();
                        html = this.template(template_data);
                        this.$el.html(html);
                        this.$(".pandasagg").find("option[value=\"" + (this.mget('agg')) + "\"]").attr('selected', 'selected');
                        return this.$el.addClass("bokehtable");
                      };
                
                      return DataTableView;
                
                    })(ContinuumView.View);
                    DataTable = (function(_super) {
                      __extends(DataTable, _super);
                
                      function DataTable() {
                        this.toggle_column_sort = __bind(this.toggle_column_sort, this);
                        _ref1 = DataTable.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      DataTable.prototype.type = 'DataTable';
                
                      DataTable.prototype.initialize = function(attrs, options) {
                        var _this = this;
                        DataTable.__super__.initialize.call(this, attrs, options);
                        return this.throttled_fetch = _.throttle((function() {
                          return _this.fetch();
                        }), 500);
                      };
                
                      DataTable.prototype.fetch = function(options) {
                        return DataTable.__super__.fetch.call(this, options);
                      };
                
                      DataTable.prototype.length = function() {
                        return _.values(this.get('tabledata').data)[0].length;
                      };
                
                      DataTable.prototype.toggle_column_sort = function(colname) {
                        var sort, sorting;
                        sorting = this.get('sort');
                        this.unset('sort', {
                          'silent': true
                        });
                        sort = _.filter(sorting, function(x) {
                          return x['column'] === colname;
                        });
                        if (sort.length > 0) {
                          sort = sort[0];
                        } else {
                          sorting = _.clone(sorting);
                          sorting.push({
                            column: colname,
                            ascending: true
                          });
                          this.save('sort', sorting, {
                            'wait': true
                          });
                          return;
                        }
                        if (sort['ascending']) {
                          sort['ascending'] = false;
                          this.save('sort', sorting, {
                            'wait': true
                          });
                        } else {
                          sorting = _.filter(sorting, function(x) {
                            return x['column'] !== colname;
                          });
                          this.save('sort', sorting, {
                            'wait': true
                          });
                        }
                      };
                
                      DataTable.prototype.go_first = function() {
                        this.set('offset', 0);
                        return this.save();
                      };
                
                      DataTable.prototype.go_prev = function() {
                        var offset;
                        offset = this.get('offset');
                        offset = offset - this.length();
                        if (offset < 0) {
                          offset = 0;
                        }
                        this.set('offset', offset);
                        return this.save();
                      };
                
                      DataTable.prototype.go_next = function() {
                        var maxoffset, offset;
                        offset = this.get('offset');
                        offset = offset + this.length();
                        maxoffset = this.get('maxlength') - this.length();
                        if (offset > maxoffset) {
                          offset = maxoffset;
                        }
                        this.set('offset', offset);
                        return this.save();
                      };
                
                      DataTable.prototype.go_last = function() {
                        var maxoffset;
                        maxoffset = this.get('maxlength') - this.length();
                        this.set('offset', maxoffset);
                        return this.save();
                      };
                
                      DataTable.prototype.default_view = DataTableView;
                
                      DataTable.prototype.defaults = function() {
                        return {
                          sort: [],
                          group: [],
                          agg: 'sum',
                          offset: 0,
                          length: 100,
                          maxlength: 1000,
                          tabledata: null,
                          columns_names: []
                        };
                      };
                
                      return DataTable;
                
                    })(HasParent);
                    DataTables = (function(_super) {
                      __extends(DataTables, _super);
                
                      function DataTables() {
                        _ref2 = DataTables.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      DataTables.prototype.model = DataTable;
                
                      return DataTables;
                
                    })(Backbone.Collection);
                    return {
                      "Model": DataTable,
                      "Collection": new DataTables(),
                      "View": DataTableView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=data_table.js.map
                */;
                /*!
                 * numeral.js
                 * version : 1.5.3
                 * author : Adam Draper
                 * license : MIT
                 * http://adamwdraper.github.com/Numeral-js/
                 */
                
                (function () {
                
                    /************************************
                        Constants
                    ************************************/
                
                    var numeral,
                        VERSION = '1.5.3',
                        // internal storage for language config files
                        languages = {},
                        currentLanguage = 'en',
                        zeroFormat = null,
                        defaultFormat = '0,0',
                        // check for nodeJS
                        hasModule = (typeof module !== 'undefined' && module.exports);
                
                
                    /************************************
                        Constructors
                    ************************************/
                
                
                    // Numeral prototype object
                    function Numeral (number) {
                        this._value = number;
                    }
                
                    /**
                     * Implementation of toFixed() that treats floats more like decimals
                     *
                     * Fixes binary rounding issues (eg. (0.615).toFixed(2) === '0.61') that present
                     * problems for accounting- and finance-related software.
                     */
                    function toFixed (value, precision, roundingFunction, optionals) {
                        var power = Math.pow(10, precision),
                            optionalsRegExp,
                            output;
                            
                        //roundingFunction = (roundingFunction !== undefined ? roundingFunction : Math.round);
                        // Multiply up by precision, round accurately, then divide and use native toFixed():
                        output = (roundingFunction(value * power) / power).toFixed(precision);
                
                        if (optionals) {
                            optionalsRegExp = new RegExp('0{1,' + optionals + '}$');
                            output = output.replace(optionalsRegExp, '');
                        }
                
                        return output;
                    }
                
                    /************************************
                        Formatting
                    ************************************/
                
                    // determine what type of formatting we need to do
                    function formatNumeral (n, format, roundingFunction) {
                        var output;
                
                        // figure out what kind of format we are dealing with
                        if (format.indexOf('$') > -1) { // currency!!!!!
                            output = formatCurrency(n, format, roundingFunction);
                        } else if (format.indexOf('%') > -1) { // percentage
                            output = formatPercentage(n, format, roundingFunction);
                        } else if (format.indexOf(':') > -1) { // time
                            output = formatTime(n, format);
                        } else { // plain ol' numbers or bytes
                            output = formatNumber(n._value, format, roundingFunction);
                        }
                
                        // return string
                        return output;
                    }
                
                    // revert to number
                    function unformatNumeral (n, string) {
                        var stringOriginal = string,
                            thousandRegExp,
                            millionRegExp,
                            billionRegExp,
                            trillionRegExp,
                            suffixes = ['KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'],
                            bytesMultiplier = false,
                            power;
                
                        if (string.indexOf(':') > -1) {
                            n._value = unformatTime(string);
                        } else {
                            if (string === zeroFormat) {
                                n._value = 0;
                            } else {
                                if (languages[currentLanguage].delimiters.decimal !== '.') {
                                    string = string.replace(/\./g,'').replace(languages[currentLanguage].delimiters.decimal, '.');
                                }
                
                                // see if abbreviations are there so that we can multiply to the correct number
                                thousandRegExp = new RegExp('[^a-zA-Z]' + languages[currentLanguage].abbreviations.thousand + '(?:\\)|(\\' + languages[currentLanguage].currency.symbol + ')?(?:\\))?)?$');
                                millionRegExp = new RegExp('[^a-zA-Z]' + languages[currentLanguage].abbreviations.million + '(?:\\)|(\\' + languages[currentLanguage].currency.symbol + ')?(?:\\))?)?$');
                                billionRegExp = new RegExp('[^a-zA-Z]' + languages[currentLanguage].abbreviations.billion + '(?:\\)|(\\' + languages[currentLanguage].currency.symbol + ')?(?:\\))?)?$');
                                trillionRegExp = new RegExp('[^a-zA-Z]' + languages[currentLanguage].abbreviations.trillion + '(?:\\)|(\\' + languages[currentLanguage].currency.symbol + ')?(?:\\))?)?$');
                
                                // see if bytes are there so that we can multiply to the correct number
                                for (power = 0; power <= suffixes.length; power++) {
                                    bytesMultiplier = (string.indexOf(suffixes[power]) > -1) ? Math.pow(1024, power + 1) : false;
                
                                    if (bytesMultiplier) {
                                        break;
                                    }
                                }
                
                                // do some math to create our number
                                n._value = ((bytesMultiplier) ? bytesMultiplier : 1) * ((stringOriginal.match(thousandRegExp)) ? Math.pow(10, 3) : 1) * ((stringOriginal.match(millionRegExp)) ? Math.pow(10, 6) : 1) * ((stringOriginal.match(billionRegExp)) ? Math.pow(10, 9) : 1) * ((stringOriginal.match(trillionRegExp)) ? Math.pow(10, 12) : 1) * ((string.indexOf('%') > -1) ? 0.01 : 1) * (((string.split('-').length + Math.min(string.split('(').length-1, string.split(')').length-1)) % 2)? 1: -1) * Number(string.replace(/[^0-9\.]+/g, ''));
                
                                // round if we are talking about bytes
                                n._value = (bytesMultiplier) ? Math.ceil(n._value) : n._value;
                            }
                        }
                        return n._value;
                    }
                
                    function formatCurrency (n, format, roundingFunction) {
                        var symbolIndex = format.indexOf('$'),
                            openParenIndex = format.indexOf('('),
                            minusSignIndex = format.indexOf('-'),
                            space = '',
                            spliceIndex,
                            output;
                
                        // check for space before or after currency
                        if (format.indexOf(' $') > -1) {
                            space = ' ';
                            format = format.replace(' $', '');
                        } else if (format.indexOf('$ ') > -1) {
                            space = ' ';
                            format = format.replace('$ ', '');
                        } else {
                            format = format.replace('$', '');
                        }
                
                        // format the number
                        output = formatNumber(n._value, format, roundingFunction);
                
                        // position the symbol
                        if (symbolIndex <= 1) {
                            if (output.indexOf('(') > -1 || output.indexOf('-') > -1) {
                                output = output.split('');
                                spliceIndex = 1;
                                if (symbolIndex < openParenIndex || symbolIndex < minusSignIndex){
                                    // the symbol appears before the "(" or "-"
                                    spliceIndex = 0;
                                }
                                output.splice(spliceIndex, 0, languages[currentLanguage].currency.symbol + space);
                                output = output.join('');
                            } else {
                                output = languages[currentLanguage].currency.symbol + space + output;
                            }
                        } else {
                            if (output.indexOf(')') > -1) {
                                output = output.split('');
                                output.splice(-1, 0, space + languages[currentLanguage].currency.symbol);
                                output = output.join('');
                            } else {
                                output = output + space + languages[currentLanguage].currency.symbol;
                            }
                        }
                
                        return output;
                    }
                
                    function formatPercentage (n, format, roundingFunction) {
                        var space = '',
                            output,
                            value = n._value * 100;
                
                        // check for space before %
                        if (format.indexOf(' %') > -1) {
                            space = ' ';
                            format = format.replace(' %', '');
                        } else {
                            format = format.replace('%', '');
                        }
                
                        output = formatNumber(value, format, roundingFunction);
                        
                        if (output.indexOf(')') > -1 ) {
                            output = output.split('');
                            output.splice(-1, 0, space + '%');
                            output = output.join('');
                        } else {
                            output = output + space + '%';
                        }
                
                        return output;
                    }
                
                    function formatTime (n) {
                        var hours = Math.floor(n._value/60/60),
                            minutes = Math.floor((n._value - (hours * 60 * 60))/60),
                            seconds = Math.round(n._value - (hours * 60 * 60) - (minutes * 60));
                        return hours + ':' + ((minutes < 10) ? '0' + minutes : minutes) + ':' + ((seconds < 10) ? '0' + seconds : seconds);
                    }
                
                    function unformatTime (string) {
                        var timeArray = string.split(':'),
                            seconds = 0;
                        // turn hours and minutes into seconds and add them all up
                        if (timeArray.length === 3) {
                            // hours
                            seconds = seconds + (Number(timeArray[0]) * 60 * 60);
                            // minutes
                            seconds = seconds + (Number(timeArray[1]) * 60);
                            // seconds
                            seconds = seconds + Number(timeArray[2]);
                        } else if (timeArray.length === 2) {
                            // minutes
                            seconds = seconds + (Number(timeArray[0]) * 60);
                            // seconds
                            seconds = seconds + Number(timeArray[1]);
                        }
                        return Number(seconds);
                    }
                
                    function formatNumber (value, format, roundingFunction) {
                        var negP = false,
                            signed = false,
                            optDec = false,
                            abbr = '',
                            abbrK = false, // force abbreviation to thousands
                            abbrM = false, // force abbreviation to millions
                            abbrB = false, // force abbreviation to billions
                            abbrT = false, // force abbreviation to trillions
                            abbrForce = false, // force abbreviation
                            bytes = '',
                            ord = '',
                            abs = Math.abs(value),
                            suffixes = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'],
                            min,
                            max,
                            power,
                            w,
                            precision,
                            thousands,
                            d = '',
                            neg = false;
                
                        // check if number is zero and a custom zero format has been set
                        if (value === 0 && zeroFormat !== null) {
                            return zeroFormat;
                        } else {
                            // see if we should use parentheses for negative number or if we should prefix with a sign
                            // if both are present we default to parentheses
                            if (format.indexOf('(') > -1) {
                                negP = true;
                                format = format.slice(1, -1);
                            } else if (format.indexOf('+') > -1) {
                                signed = true;
                                format = format.replace(/\+/g, '');
                            }
                
                            // see if abbreviation is wanted
                            if (format.indexOf('a') > -1) {
                                // check if abbreviation is specified
                                abbrK = format.indexOf('aK') >= 0;
                                abbrM = format.indexOf('aM') >= 0;
                                abbrB = format.indexOf('aB') >= 0;
                                abbrT = format.indexOf('aT') >= 0;
                                abbrForce = abbrK || abbrM || abbrB || abbrT;
                
                                // check for space before abbreviation
                                if (format.indexOf(' a') > -1) {
                                    abbr = ' ';
                                    format = format.replace(' a', '');
                                } else {
                                    format = format.replace('a', '');
                                }
                
                                if (abs >= Math.pow(10, 12) && !abbrForce || abbrT) {
                                    // trillion
                                    abbr = abbr + languages[currentLanguage].abbreviations.trillion;
                                    value = value / Math.pow(10, 12);
                                } else if (abs < Math.pow(10, 12) && abs >= Math.pow(10, 9) && !abbrForce || abbrB) {
                                    // billion
                                    abbr = abbr + languages[currentLanguage].abbreviations.billion;
                                    value = value / Math.pow(10, 9);
                                } else if (abs < Math.pow(10, 9) && abs >= Math.pow(10, 6) && !abbrForce || abbrM) {
                                    // million
                                    abbr = abbr + languages[currentLanguage].abbreviations.million;
                                    value = value / Math.pow(10, 6);
                                } else if (abs < Math.pow(10, 6) && abs >= Math.pow(10, 3) && !abbrForce || abbrK) {
                                    // thousand
                                    abbr = abbr + languages[currentLanguage].abbreviations.thousand;
                                    value = value / Math.pow(10, 3);
                                }
                            }
                
                            // see if we are formatting bytes
                            if (format.indexOf('b') > -1) {
                                // check for space before
                                if (format.indexOf(' b') > -1) {
                                    bytes = ' ';
                                    format = format.replace(' b', '');
                                } else {
                                    format = format.replace('b', '');
                                }
                
                                for (power = 0; power <= suffixes.length; power++) {
                                    min = Math.pow(1024, power);
                                    max = Math.pow(1024, power+1);
                
                                    if (value >= min && value < max) {
                                        bytes = bytes + suffixes[power];
                                        if (min > 0) {
                                            value = value / min;
                                        }
                                        break;
                                    }
                                }
                            }
                
                            // see if ordinal is wanted
                            if (format.indexOf('o') > -1) {
                                // check for space before
                                if (format.indexOf(' o') > -1) {
                                    ord = ' ';
                                    format = format.replace(' o', '');
                                } else {
                                    format = format.replace('o', '');
                                }
                
                                ord = ord + languages[currentLanguage].ordinal(value);
                            }
                
                            if (format.indexOf('[.]') > -1) {
                                optDec = true;
                                format = format.replace('[.]', '.');
                            }
                
                            w = value.toString().split('.')[0];
                            precision = format.split('.')[1];
                            thousands = format.indexOf(',');
                
                            if (precision) {
                                if (precision.indexOf('[') > -1) {
                                    precision = precision.replace(']', '');
                                    precision = precision.split('[');
                                    d = toFixed(value, (precision[0].length + precision[1].length), roundingFunction, precision[1].length);
                                } else {
                                    d = toFixed(value, precision.length, roundingFunction);
                                }
                
                                w = d.split('.')[0];
                
                                if (d.split('.')[1].length) {
                                    d = languages[currentLanguage].delimiters.decimal + d.split('.')[1];
                                } else {
                                    d = '';
                                }
                
                                if (optDec && Number(d.slice(1)) === 0) {
                                    d = '';
                                }
                            } else {
                                w = toFixed(value, null, roundingFunction);
                            }
                
                            // format number
                            if (w.indexOf('-') > -1) {
                                w = w.slice(1);
                                neg = true;
                            }
                
                            if (thousands > -1) {
                                w = w.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g, '$1' + languages[currentLanguage].delimiters.thousands);
                            }
                
                            if (format.indexOf('.') === 0) {
                                w = '';
                            }
                
                            return ((negP && neg) ? '(' : '') + ((!negP && neg) ? '-' : '') + ((!neg && signed) ? '+' : '') + w + d + ((ord) ? ord : '') + ((abbr) ? abbr : '') + ((bytes) ? bytes : '') + ((negP && neg) ? ')' : '');
                        }
                    }
                
                    /************************************
                        Top Level Functions
                    ************************************/
                
                    numeral = function (input) {
                        if (numeral.isNumeral(input)) {
                            input = input.value();
                        } else if (input === 0 || typeof input === 'undefined') {
                            input = 0;
                        } else if (!Number(input)) {
                            input = numeral.fn.unformat(input);
                        }
                
                        return new Numeral(Number(input));
                    };
                
                    // version number
                    numeral.version = VERSION;
                
                    // compare numeral object
                    numeral.isNumeral = function (obj) {
                        return obj instanceof Numeral;
                    };
                
                    // This function will load languages and then set the global language.  If
                    // no arguments are passed in, it will simply return the current global
                    // language key.
                    numeral.language = function (key, values) {
                        if (!key) {
                            return currentLanguage;
                        }
                
                        if (key && !values) {
                            if(!languages[key]) {
                                throw new Error('Unknown language : ' + key);
                            }
                            currentLanguage = key;
                        }
                
                        if (values || !languages[key]) {
                            loadLanguage(key, values);
                        }
                
                        return numeral;
                    };
                    
                    // This function provides access to the loaded language data.  If
                    // no arguments are passed in, it will simply return the current
                    // global language object.
                    numeral.languageData = function (key) {
                        if (!key) {
                            return languages[currentLanguage];
                        }
                        
                        if (!languages[key]) {
                            throw new Error('Unknown language : ' + key);
                        }
                        
                        return languages[key];
                    };
                
                    numeral.language('en', {
                        delimiters: {
                            thousands: ',',
                            decimal: '.'
                        },
                        abbreviations: {
                            thousand: 'k',
                            million: 'm',
                            billion: 'b',
                            trillion: 't'
                        },
                        ordinal: function (number) {
                            var b = number % 10;
                            return (~~ (number % 100 / 10) === 1) ? 'th' :
                                (b === 1) ? 'st' :
                                (b === 2) ? 'nd' :
                                (b === 3) ? 'rd' : 'th';
                        },
                        currency: {
                            symbol: '$'
                        }
                    });
                
                    numeral.zeroFormat = function (format) {
                        zeroFormat = typeof(format) === 'string' ? format : null;
                    };
                
                    numeral.defaultFormat = function (format) {
                        defaultFormat = typeof(format) === 'string' ? format : '0.0';
                    };
                
                    /************************************
                        Helpers
                    ************************************/
                
                    function loadLanguage(key, values) {
                        languages[key] = values;
                    }
                
                    /************************************
                        Floating-point helpers
                    ************************************/
                
                    // The floating-point helper functions and implementation
                    // borrows heavily from sinful.js: http://guipn.github.io/sinful.js/
                
                    /**
                     * Array.prototype.reduce for browsers that don't support it
                     * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce#Compatibility
                     */
                    if ('function' !== typeof Array.prototype.reduce) {
                        Array.prototype.reduce = function (callback, opt_initialValue) {
                            
                            
                            if (null === this || 'undefined' === typeof this) {
                                // At the moment all modern browsers, that support strict mode, have
                                // native implementation of Array.prototype.reduce. For instance, IE8
                                // does not support strict mode, so this check is actually useless.
                                throw new TypeError('Array.prototype.reduce called on null or undefined');
                            }
                            
                            if ('function' !== typeof callback) {
                                throw new TypeError(callback + ' is not a function');
                            }
                
                            var index,
                                value,
                                length = this.length >>> 0,
                                isValueSet = false;
                
                            if (1 < arguments.length) {
                                value = opt_initialValue;
                                isValueSet = true;
                            }
                
                            for (index = 0; length > index; ++index) {
                                if (this.hasOwnProperty(index)) {
                                    if (isValueSet) {
                                        value = callback(value, this[index], index, this);
                                    } else {
                                        value = this[index];
                                        isValueSet = true;
                                    }
                                }
                            }
                
                            if (!isValueSet) {
                                throw new TypeError('Reduce of empty array with no initial value');
                            }
                
                            return value;
                        };
                    }
                
                    
                    /**
                     * Computes the multiplier necessary to make x >= 1,
                     * effectively eliminating miscalculations caused by
                     * finite precision.
                     */
                    function multiplier(x) {
                        var parts = x.toString().split('.');
                        if (parts.length < 2) {
                            return 1;
                        }
                        return Math.pow(10, parts[1].length);
                    }
                
                    /**
                     * Given a variable number of arguments, returns the maximum
                     * multiplier that must be used to normalize an operation involving
                     * all of them.
                     */
                    function correctionFactor() {
                        var args = Array.prototype.slice.call(arguments);
                        return args.reduce(function (prev, next) {
                            var mp = multiplier(prev),
                                mn = multiplier(next);
                        return mp > mn ? mp : mn;
                        }, -Infinity);
                    }        
                
                
                    /************************************
                        Numeral Prototype
                    ************************************/
                
                
                    numeral.fn = Numeral.prototype = {
                
                        clone : function () {
                            return numeral(this);
                        },
                
                        format : function (inputString, roundingFunction) {
                            return formatNumeral(this, 
                                  inputString ? inputString : defaultFormat, 
                                  (roundingFunction !== undefined) ? roundingFunction : Math.round
                              );
                        },
                
                        unformat : function (inputString) {
                            if (Object.prototype.toString.call(inputString) === '[object Number]') { 
                                return inputString; 
                            }
                            return unformatNumeral(this, inputString ? inputString : defaultFormat);
                        },
                
                        value : function () {
                            return this._value;
                        },
                
                        valueOf : function () {
                            return this._value;
                        },
                
                        set : function (value) {
                            this._value = Number(value);
                            return this;
                        },
                
                        add : function (value) {
                            var corrFactor = correctionFactor.call(null, this._value, value);
                            function cback(accum, curr, currI, O) {
                                return accum + corrFactor * curr;
                            }
                            this._value = [this._value, value].reduce(cback, 0) / corrFactor;
                            return this;
                        },
                
                        subtract : function (value) {
                            var corrFactor = correctionFactor.call(null, this._value, value);
                            function cback(accum, curr, currI, O) {
                                return accum - corrFactor * curr;
                            }
                            this._value = [value].reduce(cback, this._value * corrFactor) / corrFactor;            
                            return this;
                        },
                
                        multiply : function (value) {
                            function cback(accum, curr, currI, O) {
                                var corrFactor = correctionFactor(accum, curr);
                                return (accum * corrFactor) * (curr * corrFactor) /
                                    (corrFactor * corrFactor);
                            }
                            this._value = [this._value, value].reduce(cback, 1);
                            return this;
                        },
                
                        divide : function (value) {
                            function cback(accum, curr, currI, O) {
                                var corrFactor = correctionFactor(accum, curr);
                                return (accum * corrFactor) / (curr * corrFactor);
                            }
                            this._value = [this._value, value].reduce(cback);            
                            return this;
                        },
                
                        difference : function (value) {
                            return Math.abs(numeral(this._value).subtract(value).value());
                        }
                
                    };
                
                    /************************************
                        Exposing Numeral
                    ************************************/
                
                    // CommonJS module is defined
                    if (hasModule) {
                        module.exports = numeral;
                    }
                
                    /*global ender:false */
                    if (typeof ender === 'undefined') {
                        // here, `this` means `window` in the browser, or `global` on the server
                        // add `numeral` as a global object via a string identifier,
                        // for Closure Compiler 'advanced' mode
                        this['numeral'] = numeral;
                    }
                
                    /*global define:false */
                    if (typeof define === 'function' && define.amd) {
                        define('numeral',[], function () {
                            return numeral;
                        });
                    }
                }).call(this);
                
                /**
                 * Handsontable 0.10.5
                 * Handsontable is a simple jQuery plugin for editable tables with basic copy-paste compatibility with Excel and Google Docs
                 *
                 * Copyright 2012, Marcin Warpechowski
                 * Licensed under the MIT license.
                 * http://handsontable.com/
                 *
                 * Date: Mon Mar 31 2014 14:19:47 GMT+0200 (CEST)
                 */
                /*jslint white: true, browser: true, plusplus: true, indent: 4, maxerr: 50 */
                
                var Handsontable = { //class namespace
                  extension: {}, //extenstion namespace
                  plugins: {}, //plugin namespace
                  helper: {} //helper namespace
                };
                
                (function ($, window, Handsontable) {
                  
                //http://stackoverflow.com/questions/3629183/why-doesnt-indexof-work-on-an-array-ie8
                if (!Array.prototype.indexOf) {
                  Array.prototype.indexOf = function (elt /*, from*/) {
                    var len = this.length >>> 0;
                
                    var from = Number(arguments[1]) || 0;
                    from = (from < 0)
                      ? Math.ceil(from)
                      : Math.floor(from);
                    if (from < 0)
                      from += len;
                
                    for (; from < len; from++) {
                      if (from in this &&
                        this[from] === elt)
                        return from;
                    }
                    return -1;
                  };
                }
                /**
                 * Array.filter() shim by Trevor Menagh (https://github.com/trevmex) with some modifications
                 */
                
                if (!Array.prototype.filter) {
                  Array.prototype.filter = function (fun, thisp) {
                    
                
                    if (typeof this === "undefined" || this === null) {
                      throw new TypeError();
                    }
                    if (typeof fun !== "function") {
                      throw new TypeError();
                    }
                
                    thisp = thisp || this;
                
                    if (isNodeList(thisp)) {
                      thisp = convertNodeListToArray(thisp);
                    }
                
                    var len = thisp.length,
                      res = [],
                      i,
                      val;
                
                    for (i = 0; i < len; i += 1) {
                      if (thisp.hasOwnProperty(i)) {
                        val = thisp[i]; // in case fun mutates this
                        if (fun.call(thisp, val, i, thisp)) {
                          res.push(val);
                        }
                      }
                    }
                
                    return res;
                
                    function isNodeList(object) {
                      return /NodeList/i.test(object.item);
                    }
                
                    function convertNodeListToArray(nodeList) {
                      var array = [];
                
                      for (var i = 0, len = nodeList.length; i < len; i++){
                        array[i] = nodeList[i]
                      }
                
                      return array;
                    }
                  };
                }
                
                /*
                 * Copyright 2012 The Polymer Authors. All rights reserved.
                 * Use of this source code is governed by a BSD-style
                 * license that can be found in the LICENSE file.
                 */
                
                if (typeof WeakMap === 'undefined') {
                  (function() {
                    var defineProperty = Object.defineProperty;
                
                    try {
                      var properDefineProperty = true;
                      defineProperty(function(){}, 'foo', {});
                    } catch (e) {
                      properDefineProperty = false;
                    }
                
                    /*
                      IE8 does not support Date.now() but IE8 compatibility mode in IE9 and IE10 does.
                      M$ deserves a high five for this one :)
                     */
                    var counter = +(new Date) % 1e9;
                
                    var WeakMap = function() {
                      this.name = '__st' + (Math.random() * 1e9 >>> 0) + (counter++ + '__');
                      if(!properDefineProperty){
                        this._wmCache = [];
                      }
                    };
                
                    if(properDefineProperty){
                      WeakMap.prototype = {
                        set: function(key, value) {
                          var entry = key[this.name];
                          if (entry && entry[0] === key)
                            entry[1] = value;
                          else
                            defineProperty(key, this.name, {value: [key, value], writable: true});
                
                        },
                        get: function(key) {
                          var entry;
                          return (entry = key[this.name]) && entry[0] === key ?
                            entry[1] : undefined;
                        },
                        'delete': function(key) {
                          this.set(key, undefined);
                        }
                      };
                    } else {
                      WeakMap.prototype = {
                        set: function(key, value) {
                
                          if(typeof key == 'undefined' || typeof value == 'undefined') return;
                
                          for(var i = 0, len = this._wmCache.length; i < len; i++){
                            if(this._wmCache[i].key == key){
                              this._wmCache[i].value = value;
                              return;
                            }
                          }
                
                          this._wmCache.push({key: key, value: value});
                
                        },
                        get: function(key) {
                
                          if(typeof key == 'undefined') return;
                
                          for(var i = 0, len = this._wmCache.length; i < len; i++){
                            if(this._wmCache[i].key == key){
                              return  this._wmCache[i].value;
                            }
                          }
                
                          return;
                
                        },
                        'delete': function(key) {
                
                          if(typeof key == 'undefined') return;
                
                          for(var i = 0, len = this._wmCache.length; i < len; i++){
                            if(this._wmCache[i].key == key){
                              Array.prototype.slice.call(this._wmCache, i, 1);
                            }
                          }
                        }
                      };
                    }
                
                    window.WeakMap = WeakMap;
                  })();
                }
                
                Handsontable.activeGuid = null;
                
                /**
                 * Handsontable constructor
                 * @param rootElement The jQuery element in which Handsontable DOM will be inserted
                 * @param userSettings
                 * @constructor
                 */
                Handsontable.Core = function (rootElement, userSettings) {
                  var priv
                    , datamap
                    , grid
                    , selection
                    , editorManager
                    , autofill
                    , instance = this
                    , GridSettings = function () {};
                
                  Handsontable.helper.extend(GridSettings.prototype, DefaultSettings.prototype); //create grid settings as a copy of default settings
                  Handsontable.helper.extend(GridSettings.prototype, userSettings); //overwrite defaults with user settings
                  Handsontable.helper.extend(GridSettings.prototype, expandType(userSettings));
                
                  this.rootElement = rootElement;
                  var $document = $(document.documentElement);
                  var $body = $(document.body);
                  this.guid = 'ht_' + Handsontable.helper.randomString(); //this is the namespace for global events
                
                  if (!this.rootElement[0].id) {
                    this.rootElement[0].id = this.guid; //if root element does not have an id, assign a random id
                  }
                
                  priv = {
                    cellSettings: [],
                    columnSettings: [],
                    columnsSettingConflicts: ['data', 'width'],
                    settings: new GridSettings(), // current settings instance
                    settingsFromDOM: {},
                    selStart: new Handsontable.SelectionPoint(),
                    selEnd: new Handsontable.SelectionPoint(),
                    isPopulated: null,
                    scrollable: null,
                    extensions: {},
                    firstRun: true
                  };
                
                  grid = {
                    /**
                     * Inserts or removes rows and columns
                     * @param {String} action Possible values: "insert_row", "insert_col", "remove_row", "remove_col"
                     * @param {Number} index
                     * @param {Number} amount
                     * @param {String} [source] Optional. Source of hook runner.
                     * @param {Boolean} [keepEmptyRows] Optional. Flag for preventing deletion of empty rows.
                     */
                    alter: function (action, index, amount, source, keepEmptyRows) {
                      var delta;
                
                      amount = amount || 1;
                
                      switch (action) {
                        case "insert_row":
                          delta = datamap.createRow(index, amount);
                
                          if (delta) {
                            if (priv.selStart.exists() && priv.selStart.row() >= index) {
                              priv.selStart.row(priv.selStart.row() + delta);
                              selection.transformEnd(delta, 0); //will call render() internally
                            }
                            else {
                              selection.refreshBorders(); //it will call render and prepare methods
                            }
                          }
                          break;
                
                        case "insert_col":
                          delta = datamap.createCol(index, amount);
                
                          if (delta) {
                
                            if(Handsontable.helper.isArray(instance.getSettings().colHeaders)){
                              var spliceArray = [index, 0];
                              spliceArray.length += delta; //inserts empty (undefined) elements at the end of an array
                              Array.prototype.splice.apply(instance.getSettings().colHeaders, spliceArray); //inserts empty (undefined) elements into the colHeader array
                            }
                
                            if (priv.selStart.exists() && priv.selStart.col() >= index) {
                              priv.selStart.col(priv.selStart.col() + delta);
                              selection.transformEnd(0, delta); //will call render() internally
                            }
                            else {
                              selection.refreshBorders(); //it will call render and prepare methods
                            }
                          }
                          break;
                
                        case "remove_row":
                          datamap.removeRow(index, amount);
                          priv.cellSettings.splice(index, amount);
                          grid.adjustRowsAndCols();
                          selection.refreshBorders(); //it will call render and prepare methods
                          break;
                
                        case "remove_col":
                          datamap.removeCol(index, amount);
                
                          for(var row = 0, len = datamap.getAll().length; row < len; row++){
                            if(row in priv.cellSettings){  //if row hasn't been rendered it wouldn't have cellSettings
                              priv.cellSettings[row].splice(index, amount);
                            }
                          }
                
                          if(Handsontable.helper.isArray(instance.getSettings().colHeaders)){
                            if(typeof index == 'undefined'){
                              index = -1;
                            }
                            instance.getSettings().colHeaders.splice(index, amount);
                          }
                
                          priv.columnSettings.splice(index, amount);
                
                          grid.adjustRowsAndCols();
                          selection.refreshBorders(); //it will call render and prepare methods
                          break;
                
                        default:
                          throw new Error('There is no such action "' + action + '"');
                          break;
                      }
                
                      if (!keepEmptyRows) {
                        grid.adjustRowsAndCols(); //makes sure that we did not add rows that will be removed in next refresh
                      }
                    },
                
                    /**
                     * Makes sure there are empty rows at the bottom of the table
                     */
                    adjustRowsAndCols: function () {
                      var r, rlen, emptyRows = instance.countEmptyRows(true), emptyCols;
                
                      //should I add empty rows to data source to meet minRows?
                      rlen = instance.countRows();
                      if (rlen < priv.settings.minRows) {
                        for (r = 0; r < priv.settings.minRows - rlen; r++) {
                          datamap.createRow(instance.countRows(), 1, true);
                        }
                      }
                
                      //should I add empty rows to meet minSpareRows?
                      if (emptyRows < priv.settings.minSpareRows) {
                        for (; emptyRows < priv.settings.minSpareRows && instance.countRows() < priv.settings.maxRows; emptyRows++) {
                          datamap.createRow(instance.countRows(), 1, true);
                        }
                      }
                
                      //count currently empty cols
                      emptyCols = instance.countEmptyCols(true);
                
                      //should I add empty cols to meet minCols?
                      if (!priv.settings.columns && instance.countCols() < priv.settings.minCols) {
                        for (; instance.countCols() < priv.settings.minCols; emptyCols++) {
                          datamap.createCol(instance.countCols(), 1, true);
                        }
                      }
                
                      //should I add empty cols to meet minSpareCols?
                      if (!priv.settings.columns && instance.dataType === 'array' && emptyCols < priv.settings.minSpareCols) {
                        for (; emptyCols < priv.settings.minSpareCols && instance.countCols() < priv.settings.maxCols; emptyCols++) {
                          datamap.createCol(instance.countCols(), 1, true);
                        }
                      }
                
                      if (priv.settings.enterBeginsEditing) {
                        for (; (((priv.settings.minRows || priv.settings.minSpareRows) && instance.countRows() > priv.settings.minRows) && (priv.settings.minSpareRows && emptyRows > priv.settings.minSpareRows)); emptyRows--) {
                          datamap.removeRow();
                        }
                      }
                
                      if (priv.settings.enterBeginsEditing && !priv.settings.columns) {
                        for (; (((priv.settings.minCols || priv.settings.minSpareCols) && instance.countCols() > priv.settings.minCols) && (priv.settings.minSpareCols && emptyCols > priv.settings.minSpareCols)); emptyCols--) {
                          datamap.removeCol();
                        }
                      }
                
                      var rowCount = instance.countRows();
                      var colCount = instance.countCols();
                
                      if (rowCount === 0 || colCount === 0) {
                        selection.deselect();
                      }
                
                      if (priv.selStart.exists()) {
                        var selectionChanged;
                        var fromRow = priv.selStart.row();
                        var fromCol = priv.selStart.col();
                        var toRow = priv.selEnd.row();
                        var toCol = priv.selEnd.col();
                
                        //if selection is outside, move selection to last row
                        if (fromRow > rowCount - 1) {
                          fromRow = rowCount - 1;
                          selectionChanged = true;
                          if (toRow > fromRow) {
                            toRow = fromRow;
                          }
                        } else if (toRow > rowCount - 1) {
                          toRow = rowCount - 1;
                          selectionChanged = true;
                          if (fromRow > toRow) {
                            fromRow = toRow;
                          }
                        }
                
                        //if selection is outside, move selection to last row
                        if (fromCol > colCount - 1) {
                          fromCol = colCount - 1;
                          selectionChanged = true;
                          if (toCol > fromCol) {
                            toCol = fromCol;
                          }
                        } else if (toCol > colCount - 1) {
                          toCol = colCount - 1;
                          selectionChanged = true;
                          if (fromCol > toCol) {
                            fromCol = toCol;
                          }
                        }
                
                        if (selectionChanged) {
                          instance.selectCell(fromRow, fromCol, toRow, toCol);
                        }
                      }
                    },
                
                    /**
                     * Populate cells at position with 2d array
                     * @param {Object} start Start selection position
                     * @param {Array} input 2d array
                     * @param {Object} [end] End selection position (only for drag-down mode)
                     * @param {String} [source="populateFromArray"]
                     * @param {String} [method="overwrite"]
                     * @return {Object|undefined} ending td in pasted area (only if any cell was changed)
                     */
                    populateFromArray: function (start, input, end, source, method) {
                      var r, rlen, c, clen, setData = [], current = {};
                      rlen = input.length;
                      if (rlen === 0) {
                        return false;
                      }
                
                      var repeatCol
                        , repeatRow
                        , cmax
                        , rmax;
                
                      // insert data with specified pasteMode method
                      switch (method) {
                        case 'shift_down' :
                          repeatCol = end ? end.col - start.col + 1 : 0;
                          repeatRow = end ? end.row - start.row + 1 : 0;
                          input = Handsontable.helper.translateRowsToColumns(input);
                          for (c = 0, clen = input.length, cmax = Math.max(clen, repeatCol); c < cmax; c++) {
                            if (c < clen) {
                              for (r = 0, rlen = input[c].length; r < repeatRow - rlen; r++) {
                                input[c].push(input[c][r % rlen]);
                              }
                              input[c].unshift(start.col + c, start.row, 0);
                              instance.spliceCol.apply(instance, input[c]);
                            }
                            else {
                              input[c % clen][0] = start.col + c;
                              instance.spliceCol.apply(instance, input[c % clen]);
                            }
                          }
                          break;
                
                        case 'shift_right' :
                          repeatCol = end ? end.col - start.col + 1 : 0;
                          repeatRow = end ? end.row - start.row + 1 : 0;
                          for (r = 0, rlen = input.length, rmax = Math.max(rlen, repeatRow); r < rmax; r++) {
                            if (r < rlen) {
                              for (c = 0, clen = input[r].length; c < repeatCol - clen; c++) {
                                input[r].push(input[r][c % clen]);
                              }
                              input[r].unshift(start.row + r, start.col, 0);
                              instance.spliceRow.apply(instance, input[r]);
                            }
                            else {
                              input[r % rlen][0] = start.row + r;
                              instance.spliceRow.apply(instance, input[r % rlen]);
                            }
                          }
                          break;
                
                        case 'overwrite' :
                        default:
                          // overwrite and other not specified options
                          current.row = start.row;
                          current.col = start.col;
                          for (r = 0; r < rlen; r++) {
                            if ((end && current.row > end.row) || (!priv.settings.minSpareRows && current.row > instance.countRows() - 1) || (current.row >= priv.settings.maxRows)) {
                              break;
                            }
                            current.col = start.col;
                            clen = input[r] ? input[r].length : 0;
                            for (c = 0; c < clen; c++) {
                              if ((end && current.col > end.col) || (!priv.settings.minSpareCols && current.col > instance.countCols() - 1) || (current.col >= priv.settings.maxCols)) {
                                break;
                              }
                              if (!instance.getCellMeta(current.row, current.col).readOnly) {
                                setData.push([current.row, current.col, input[r][c]]);
                              }
                              current.col++;
                              if (end && c === clen - 1) {
                                c = -1;
                              }
                            }
                            current.row++;
                            if (end && r === rlen - 1) {
                              r = -1;
                            }
                          }
                          instance.setDataAtCell(setData, null, null, source || 'populateFromArray');
                          break;
                      }
                    },
                
                    /**
                     * Returns the top left (TL) and bottom right (BR) selection coordinates
                     * @param {Object[]} coordsArr
                     * @returns {Object}
                     */
                    getCornerCoords: function (coordsArr) {
                      function mapProp(func, array, prop) {
                        function getProp(el) {
                          return el[prop];
                        }
                
                        if (Array.prototype.map) {
                          return func.apply(Math, array.map(getProp));
                        }
                        return func.apply(Math, $.map(array, getProp));
                      }
                
                      return {
                        TL: {
                          row: mapProp(Math.min, coordsArr, "row"),
                          col: mapProp(Math.min, coordsArr, "col")
                        },
                        BR: {
                          row: mapProp(Math.max, coordsArr, "row"),
                          col: mapProp(Math.max, coordsArr, "col")
                        }
                      };
                    },
                
                    /**
                     * Returns array of td objects given start and end coordinates
                     */
                    getCellsAtCoords: function (start, end) {
                      var corners = grid.getCornerCoords([start, end]);
                      var r, c, output = [];
                      for (r = corners.TL.row; r <= corners.BR.row; r++) {
                        for (c = corners.TL.col; c <= corners.BR.col; c++) {
                          output.push(instance.view.getCellAtCoords({
                            row: r,
                            col: c
                          }));
                        }
                      }
                      return output;
                    }
                  };
                
                  this.selection = selection = { //this public assignment is only temporary
                    inProgress: false,
                
                    /**
                     * Sets inProgress to true. This enables onSelectionEnd and onSelectionEndByProp to function as desired
                     */
                    begin: function () {
                      instance.selection.inProgress = true;
                    },
                
                    /**
                     * Sets inProgress to false. Triggers onSelectionEnd and onSelectionEndByProp
                     */
                    finish: function () {
                      var sel = instance.getSelected();
                      instance.PluginHooks.run("afterSelectionEnd", sel[0], sel[1], sel[2], sel[3]);
                      instance.PluginHooks.run("afterSelectionEndByProp", sel[0], instance.colToProp(sel[1]), sel[2], instance.colToProp(sel[3]));
                      instance.selection.inProgress = false;
                    },
                
                    isInProgress: function () {
                      return instance.selection.inProgress;
                    },
                
                    /**
                     * Starts selection range on given td object
                     * @param {Object} coords
                     */
                    setRangeStart: function (coords) {
                      priv.selStart.coords(coords);
                      selection.setRangeEnd(coords);
                    },
                
                    /**
                     * Ends selection range on given td object
                     * @param {Object} coords
                     * @param {Boolean} [scrollToCell=true] If true, viewport will be scrolled to range end
                     */
                    setRangeEnd: function (coords, scrollToCell) {
                      instance.selection.begin();
                
                      priv.selEnd.coords(coords);
                      if (!priv.settings.multiSelect) {
                        priv.selStart.coords(coords);
                      }
                
                      //set up current selection
                      instance.view.wt.selections.current.clear();
                      instance.view.wt.selections.current.add(priv.selStart.arr());
                
                      //set up area selection
                      instance.view.wt.selections.area.clear();
                      if (selection.isMultiple()) {
                        instance.view.wt.selections.area.add(priv.selStart.arr());
                        instance.view.wt.selections.area.add(priv.selEnd.arr());
                      }
                
                      //set up highlight
                      if (priv.settings.currentRowClassName || priv.settings.currentColClassName) {
                        instance.view.wt.selections.highlight.clear();
                        instance.view.wt.selections.highlight.add(priv.selStart.arr());
                        instance.view.wt.selections.highlight.add(priv.selEnd.arr());
                      }
                
                      //trigger handlers
                      instance.PluginHooks.run("afterSelection", priv.selStart.row(), priv.selStart.col(), priv.selEnd.row(), priv.selEnd.col());
                      instance.PluginHooks.run("afterSelectionByProp", priv.selStart.row(), datamap.colToProp(priv.selStart.col()), priv.selEnd.row(), datamap.colToProp(priv.selEnd.col()));
                
                      if (scrollToCell !== false) {
                        instance.view.scrollViewport(coords);
                      }
                      selection.refreshBorders();
                    },
                
                    /**
                     * Destroys editor, redraws borders around cells, prepares editor
                     * @param {Boolean} revertOriginal
                     * @param {Boolean} keepEditor
                     */
                    refreshBorders: function (revertOriginal, keepEditor) {
                      if (!keepEditor) {
                        editorManager.destroyEditor(revertOriginal);
                      }
                      instance.view.render();
                      if (selection.isSelected() && !keepEditor) {
                        editorManager.prepareEditor();
                      }
                    },
                
                    /**
                     * Returns information if we have a multiselection
                     * @return {Boolean}
                     */
                    isMultiple: function () {
                      return !(priv.selEnd.col() === priv.selStart.col() && priv.selEnd.row() === priv.selStart.row());
                    },
                
                    /**
                     * Selects cell relative to current cell (if possible)
                     */
                    transformStart: function (rowDelta, colDelta, force) {
                      if (priv.selStart.row() + rowDelta > instance.countRows() - 1) {
                        if (force && priv.settings.minSpareRows > 0) {
                          instance.alter("insert_row", instance.countRows());
                        }
                        else if (priv.settings.autoWrapCol) {
                          rowDelta = 1 - instance.countRows();
                          colDelta = priv.selStart.col() + colDelta == instance.countCols() - 1 ? 1 - instance.countCols() : 1;
                        }
                      }
                      else if (priv.settings.autoWrapCol && priv.selStart.row() + rowDelta < 0 && priv.selStart.col() + colDelta >= 0) {
                        rowDelta = instance.countRows() - 1;
                        colDelta = priv.selStart.col() + colDelta == 0 ? instance.countCols() - 1 : -1;
                      }
                
                      if (priv.selStart.col() + colDelta > instance.countCols() - 1) {
                        if (force && priv.settings.minSpareCols > 0) {
                          instance.alter("insert_col", instance.countCols());
                        }
                        else if (priv.settings.autoWrapRow) {
                          rowDelta = priv.selStart.row() + rowDelta == instance.countRows() - 1 ? 1 - instance.countRows() : 1;
                          colDelta = 1 - instance.countCols();
                        }
                      }
                      else if (priv.settings.autoWrapRow && priv.selStart.col() + colDelta < 0 && priv.selStart.row() + rowDelta >= 0) {
                        rowDelta = priv.selStart.row() + rowDelta == 0 ? instance.countRows() - 1 : -1;
                        colDelta = instance.countCols() - 1;
                      }
                
                      var totalRows = instance.countRows();
                      var totalCols = instance.countCols();
                      var coords = {
                        row: priv.selStart.row() + rowDelta,
                        col: priv.selStart.col() + colDelta
                      };
                
                      if (coords.row < 0) {
                        coords.row = 0;
                      }
                      else if (coords.row > 0 && coords.row >= totalRows) {
                        coords.row = totalRows - 1;
                      }
                
                      if (coords.col < 0) {
                        coords.col = 0;
                      }
                      else if (coords.col > 0 && coords.col >= totalCols) {
                        coords.col = totalCols - 1;
                      }
                
                      selection.setRangeStart(coords);
                    },
                
                    /**
                     * Sets selection end cell relative to current selection end cell (if possible)
                     */
                    transformEnd: function (rowDelta, colDelta) {
                      if (priv.selEnd.exists()) {
                        var totalRows = instance.countRows();
                        var totalCols = instance.countCols();
                        var coords = {
                          row: priv.selEnd.row() + rowDelta,
                          col: priv.selEnd.col() + colDelta
                        };
                
                        if (coords.row < 0) {
                          coords.row = 0;
                        }
                        else if (coords.row > 0 && coords.row >= totalRows) {
                          coords.row = totalRows - 1;
                        }
                
                        if (coords.col < 0) {
                          coords.col = 0;
                        }
                        else if (coords.col > 0 && coords.col >= totalCols) {
                          coords.col = totalCols - 1;
                        }
                
                        selection.setRangeEnd(coords);
                      }
                    },
                
                    /**
                     * Returns true if currently there is a selection on screen, false otherwise
                     * @return {Boolean}
                     */
                    isSelected: function () {
                      return priv.selEnd.exists();
                    },
                
                    /**
                     * Returns true if coords is within current selection coords
                     * @return {Boolean}
                     */
                    inInSelection: function (coords) {
                      if (!selection.isSelected()) {
                        return false;
                      }
                      var sel = grid.getCornerCoords([priv.selStart.coords(), priv.selEnd.coords()]);
                      return (sel.TL.row <= coords.row && sel.BR.row >= coords.row && sel.TL.col <= coords.col && sel.BR.col >= coords.col);
                    },
                
                    /**
                     * Deselects all selected cells
                     */
                    deselect: function () {
                      if (!selection.isSelected()) {
                        return;
                      }
                      instance.selection.inProgress = false; //needed by HT inception
                      priv.selEnd = new Handsontable.SelectionPoint(); //create new empty point to remove the existing one
                      instance.view.wt.selections.current.clear();
                      instance.view.wt.selections.area.clear();
                      editorManager.destroyEditor();
                      selection.refreshBorders();
                      instance.PluginHooks.run('afterDeselect');
                    },
                
                    /**
                     * Select all cells
                     */
                    selectAll: function () {
                      if (!priv.settings.multiSelect) {
                        return;
                      }
                      selection.setRangeStart({
                        row: 0,
                        col: 0
                      });
                      selection.setRangeEnd({
                        row: instance.countRows() - 1,
                        col: instance.countCols() - 1
                      }, false);
                    },
                
                    /**
                     * Deletes data from selected cells
                     */
                    empty: function () {
                      if (!selection.isSelected()) {
                        return;
                      }
                      var corners = grid.getCornerCoords([priv.selStart.coords(), priv.selEnd.coords()]);
                      var r, c, changes = [];
                      for (r = corners.TL.row; r <= corners.BR.row; r++) {
                        for (c = corners.TL.col; c <= corners.BR.col; c++) {
                          if (!instance.getCellMeta(r, c).readOnly) {
                            changes.push([r, c, '']);
                          }
                        }
                      }
                      instance.setDataAtCell(changes);
                    }
                  };
                
                  this.autofill = autofill = { //this public assignment is only temporary
                    handle: null,
                
                    /**
                     * Create fill handle and fill border objects
                     */
                    init: function () {
                      if (!autofill.handle) {
                        autofill.handle = {};
                      }
                      else {
                        autofill.handle.disabled = false;
                      }
                    },
                
                    /**
                     * Hide fill handle and fill border permanently
                     */
                    disable: function () {
                      autofill.handle.disabled = true;
                    },
                
                    /**
                     * Selects cells down to the last row in the left column, then fills down to that cell
                     */
                    selectAdjacent: function () {
                      var select, data, r, maxR, c;
                
                      if (selection.isMultiple()) {
                        select = instance.view.wt.selections.area.getCorners();
                      }
                      else {
                        select = instance.view.wt.selections.current.getCorners();
                      }
                
                      data = datamap.getAll();
                      rows : for (r = select[2] + 1; r < instance.countRows(); r++) {
                        for (c = select[1]; c <= select[3]; c++) {
                          if (data[r][c]) {
                            break rows;
                          }
                        }
                        if (!!data[r][select[1] - 1] || !!data[r][select[3] + 1]) {
                          maxR = r;
                        }
                      }
                      if (maxR) {
                        instance.view.wt.selections.fill.clear();
                        instance.view.wt.selections.fill.add([select[0], select[1]]);
                        instance.view.wt.selections.fill.add([maxR, select[3]]);
                        autofill.apply();
                      }
                    },
                
                    /**
                     * Apply fill values to the area in fill border, omitting the selection border
                     */
                    apply: function () {
                      var drag, select, start, end, _data;
                
                      autofill.handle.isDragged = 0;
                
                      drag = instance.view.wt.selections.fill.getCorners();
                      if (!drag) {
                        return;
                      }
                
                      instance.view.wt.selections.fill.clear();
                
                      if (selection.isMultiple()) {
                        select = instance.view.wt.selections.area.getCorners();
                      }
                      else {
                        select = instance.view.wt.selections.current.getCorners();
                      }
                
                      if (drag[0] === select[0] && drag[1] < select[1]) {
                        start = {
                          row: drag[0],
                          col: drag[1]
                        };
                        end = {
                          row: drag[2],
                          col: select[1] - 1
                        };
                      }
                      else if (drag[0] === select[0] && drag[3] > select[3]) {
                        start = {
                          row: drag[0],
                          col: select[3] + 1
                        };
                        end = {
                          row: drag[2],
                          col: drag[3]
                        };
                      }
                      else if (drag[0] < select[0] && drag[1] === select[1]) {
                        start = {
                          row: drag[0],
                          col: drag[1]
                        };
                        end = {
                          row: select[0] - 1,
                          col: drag[3]
                        };
                      }
                      else if (drag[2] > select[2] && drag[1] === select[1]) {
                        start = {
                          row: select[2] + 1,
                          col: drag[1]
                        };
                        end = {
                          row: drag[2],
                          col: drag[3]
                        };
                      }
                
                      if (start) {
                
                        _data = SheetClip.parse(datamap.getText(priv.selStart.coords(), priv.selEnd.coords()));
                        instance.PluginHooks.run('beforeAutofill', start, end, _data);
                
                        grid.populateFromArray(start, _data, end, 'autofill');
                
                        selection.setRangeStart({row: drag[0], col: drag[1]});
                        selection.setRangeEnd({row: drag[2], col: drag[3]});
                      }
                      /*else {
                       //reset to avoid some range bug
                       selection.refreshBorders();
                       }*/
                    },
                
                    /**
                     * Show fill border
                     */
                    showBorder: function (coords) {
                      coords.row = coords[0];
                      coords.col = coords[1];
                
                      var corners = grid.getCornerCoords([priv.selStart.coords(), priv.selEnd.coords()]);
                      if (priv.settings.fillHandle !== 'horizontal' && (corners.BR.row < coords.row || corners.TL.row > coords.row)) {
                        coords = [coords.row, corners.BR.col];
                      }
                      else if (priv.settings.fillHandle !== 'vertical') {
                        coords = [corners.BR.row, coords.col];
                      }
                      else {
                        return; //wrong direction
                      }
                
                      instance.view.wt.selections.fill.clear();
                      instance.view.wt.selections.fill.add([priv.selStart.coords().row, priv.selStart.coords().col]);
                      instance.view.wt.selections.fill.add([priv.selEnd.coords().row, priv.selEnd.coords().col]);
                      instance.view.wt.selections.fill.add(coords);
                      instance.view.render();
                    }
                  };
                
                  this.init = function () {
                    instance.PluginHooks.run('beforeInit');
                
                    this.view = new Handsontable.TableView(this);
                    editorManager = new Handsontable.EditorManager(instance, priv, selection, datamap);
                
                    this.updateSettings(priv.settings, true);
                    this.parseSettingsFromDOM();
                
                
                    this.forceFullRender = true; //used when data was changed
                    this.view.render();
                
                    if (typeof priv.firstRun === 'object') {
                      instance.PluginHooks.run('afterChange', priv.firstRun[0], priv.firstRun[1]);
                      priv.firstRun = false;
                    }
                    instance.PluginHooks.run('afterInit');
                  };
                
                  function ValidatorsQueue() { //moved this one level up so it can be used in any function here. Probably this should be moved to a separate file
                    var resolved = false;
                
                    return {
                      validatorsInQueue: 0,
                      addValidatorToQueue: function () {
                        this.validatorsInQueue++;
                        resolved = false;
                      },
                      removeValidatorFormQueue: function () {
                        this.validatorsInQueue = this.validatorsInQueue - 1 < 0 ? 0 : this.validatorsInQueue - 1;
                        this.checkIfQueueIsEmpty();
                      },
                      onQueueEmpty: function () {
                      },
                      checkIfQueueIsEmpty: function () {
                        if (this.validatorsInQueue == 0 && resolved == false) {
                          resolved = true;
                          this.onQueueEmpty();
                        }
                      }
                    };
                  }
                
                  function validateChanges(changes, source, callback) {
                    var waitingForValidator = new ValidatorsQueue();
                    waitingForValidator.onQueueEmpty = resolve;
                
                    for (var i = changes.length - 1; i >= 0; i--) {
                      if (changes[i] === null) {
                        changes.splice(i, 1);
                      }
                      else {
                        var row = changes[i][0];
                        var col = datamap.propToCol(changes[i][1]);
                        var logicalCol = instance.runHooksAndReturn('modifyCol', col); //column order may have changes, so we need to translate physical col index (stored in datasource) to logical (displayed to user)
                        var cellProperties = instance.getCellMeta(row, logicalCol);
                
                        if (cellProperties.type === 'numeric' && typeof changes[i][3] === 'string') {
                          if (changes[i][3].length > 0 && /^-?[\d\s]*\.?\d*$/.test(changes[i][3])) {
                            changes[i][3] = numeral().unformat(changes[i][3] || '0'); //numeral cannot unformat empty string
                          }
                        }
                
                        if (instance.getCellValidator(cellProperties)) {
                          waitingForValidator.addValidatorToQueue();
                          instance.validateCell(changes[i][3], cellProperties, (function (i, cellProperties) {
                            return function (result) {
                              if (typeof result !== 'boolean') {
                                throw new Error("Validation error: result is not boolean");
                              }
                              if (result === false && cellProperties.allowInvalid === false) {
                                changes.splice(i, 1);         // cancel the change
                                cellProperties.valid = true;  // we cancelled the change, so cell value is still valid
                                --i;
                              }
                              waitingForValidator.removeValidatorFormQueue();
                            }
                          })(i, cellProperties)
                            , source);
                        }
                      }
                    }
                    waitingForValidator.checkIfQueueIsEmpty();
                
                    function resolve() {
                      var beforeChangeResult;
                
                      if (changes.length) {
                        beforeChangeResult = instance.PluginHooks.execute("beforeChange", changes, source);
                        if (typeof beforeChangeResult === 'function') {
                          $.when(result).then(function () {
                            callback(); //called when async validators and async beforeChange are resolved
                          });
                        }
                        else if (beforeChangeResult === false) {
                          changes.splice(0, changes.length); //invalidate all changes (remove everything from array)
                        }
                      }
                      if (typeof beforeChangeResult !== 'function') {
                        callback(); //called when async validators are resolved and beforeChange was not async
                      }
                    }
                  }
                
                  /**
                   * Internal function to apply changes. Called after validateChanges
                   * @param {Array} changes Array in form of [row, prop, oldValue, newValue]
                   * @param {String} source String that identifies how this change will be described in changes array (useful in onChange callback)
                   */
                  function applyChanges(changes, source) {
                    var i = changes.length - 1;
                
                    if (i < 0) {
                      return;
                    }
                
                    for (; 0 <= i; i--) {
                      if (changes[i] === null) {
                        changes.splice(i, 1);
                        continue;
                      }
                
                      if (priv.settings.minSpareRows) {
                        while (changes[i][0] > instance.countRows() - 1) {
                          datamap.createRow();
                        }
                      }
                
                      if (instance.dataType === 'array' && priv.settings.minSpareCols) {
                        while (datamap.propToCol(changes[i][1]) > instance.countCols() - 1) {
                          datamap.createCol();
                        }
                      }
                
                      datamap.set(changes[i][0], changes[i][1], changes[i][3]);
                    }
                
                    instance.forceFullRender = true; //used when data was changed
                    grid.adjustRowsAndCols();
                    selection.refreshBorders(null, true);
                    instance.PluginHooks.run('afterChange', changes, source || 'edit');
                  }
                
                  this.validateCell = function (value, cellProperties, callback, source) {
                    var validator = instance.getCellValidator(cellProperties);
                
                    if (Object.prototype.toString.call(validator) === '[object RegExp]') {
                      validator = (function (validator) {
                        return function (value, callback) {
                          callback(validator.test(value));
                        }
                      })(validator);
                    }
                
                    if (typeof validator == 'function') {
                
                      value = instance.PluginHooks.execute("beforeValidate", value, cellProperties.row, cellProperties.prop, source);
                
                      // To provide consistent behaviour, validation should be always asynchronous
                      setTimeout(function () {
                        validator.call(cellProperties, value, function (valid) {
                          cellProperties.valid = valid;
                
                          valid = instance.PluginHooks.execute("afterValidate", valid, value, cellProperties.row, cellProperties.prop, source);
                
                          callback(valid);
                        });
                      });
                
                    } else { //resolve callback even if validator function was not found
                      cellProperties.valid = true;
                      callback(true);
                    }
                
                
                
                  };
                
                  function setDataInputToArray(row, prop_or_col, value) {
                    if (typeof row === "object") { //is it an array of changes
                      return row;
                    }
                    else if ($.isPlainObject(value)) { //backwards compatibility
                      return value;
                    }
                    else {
                      return [
                        [row, prop_or_col, value]
                      ];
                    }
                  }
                
                  /**
                   * Set data at given cell
                   * @public
                   * @param {Number|Array} row or array of changes in format [[row, col, value], ...]
                   * @param {Number|String} col or source String
                   * @param {String} value
                   * @param {String} source String that identifies how this change will be described in changes array (useful in onChange callback)
                   */
                  this.setDataAtCell = function (row, col, value, source) {
                    var input = setDataInputToArray(row, col, value)
                      , i
                      , ilen
                      , changes = []
                      , prop;
                
                    for (i = 0, ilen = input.length; i < ilen; i++) {
                      if (typeof input[i] !== 'object') {
                        throw new Error('Method `setDataAtCell` accepts row number or changes array of arrays as its first parameter');
                      }
                      if (typeof input[i][1] !== 'number') {
                        throw new Error('Method `setDataAtCell` accepts row and column number as its parameters. If you want to use object property name, use method `setDataAtRowProp`');
                      }
                      prop = datamap.colToProp(input[i][1]);
                      changes.push([
                        input[i][0],
                        prop,
                        datamap.get(input[i][0], prop),
                        input[i][2]
                      ]);
                    }
                
                    if (!source && typeof row === "object") {
                      source = col;
                    }
                
                    validateChanges(changes, source, function () {
                      applyChanges(changes, source);
                    });
                  };
                
                
                  /**
                   * Set data at given row property
                   * @public
                   * @param {Number|Array} row or array of changes in format [[row, prop, value], ...]
                   * @param {String} prop or source String
                   * @param {String} value
                   * @param {String} source String that identifies how this change will be described in changes array (useful in onChange callback)
                   */
                  this.setDataAtRowProp = function (row, prop, value, source) {
                    var input = setDataInputToArray(row, prop, value)
                      , i
                      , ilen
                      , changes = [];
                
                    for (i = 0, ilen = input.length; i < ilen; i++) {
                      changes.push([
                        input[i][0],
                        input[i][1],
                        datamap.get(input[i][0], input[i][1]),
                        input[i][2]
                      ]);
                    }
                
                    if (!source && typeof row === "object") {
                      source = prop;
                    }
                
                    validateChanges(changes, source, function () {
                      applyChanges(changes, source);
                    });
                  };
                
                  /**
                   * Listen to document body keyboard input
                   */
                  this.listen = function () {
                    Handsontable.activeGuid = instance.guid;
                
                    if (document.activeElement && document.activeElement !== document.body) {
                      document.activeElement.blur();
                    }
                    else if (!document.activeElement) { //IE
                      document.body.focus();
                    }
                  };
                
                  /**
                   * Stop listening to document body keyboard input
                   */
                  this.unlisten = function () {
                    Handsontable.activeGuid = null;
                  };
                
                  /**
                   * Returns true if current Handsontable instance is listening on document body keyboard input
                   */
                  this.isListening = function () {
                    return Handsontable.activeGuid === instance.guid;
                  };
                
                  /**
                   * Destroys current editor, renders and selects current cell. If revertOriginal != true, edited data is saved
                   * @param {Boolean} revertOriginal
                   */
                  this.destroyEditor = function (revertOriginal) {
                    selection.refreshBorders(revertOriginal);
                  };
                
                  /**
                   * Populate cells at position with 2d array
                   * @param {Number} row Start row
                   * @param {Number} col Start column
                   * @param {Array} input 2d array
                   * @param {Number=} endRow End row (use when you want to cut input when certain row is reached)
                   * @param {Number=} endCol End column (use when you want to cut input when certain column is reached)
                   * @param {String=} [source="populateFromArray"]
                   * @param {String=} [method="overwrite"]
                   * @return {Object|undefined} ending td in pasted area (only if any cell was changed)
                   */
                  this.populateFromArray = function (row, col, input, endRow, endCol, source, method) {
                    if (!(typeof input === 'object' && typeof input[0] === 'object')) {
                      throw new Error("populateFromArray parameter `input` must be an array of arrays"); //API changed in 0.9-beta2, let's check if you use it correctly
                    }
                    return grid.populateFromArray({row: row, col: col}, input, typeof endRow === 'number' ? {row: endRow, col: endCol} : null, source, method);
                  };
                
                  /**
                   * Adds/removes data from the column
                   * @param {Number} col Index of column in which do you want to do splice.
                   * @param {Number} index Index at which to start changing the array. If negative, will begin that many elements from the end
                   * @param {Number} amount An integer indicating the number of old array elements to remove. If amount is 0, no elements are removed
                   * param {...*} elements Optional. The elements to add to the array. If you don't specify any elements, spliceCol simply removes elements from the array
                   */
                  this.spliceCol = function (col, index, amount/*, elements... */) {
                    return datamap.spliceCol.apply(datamap, arguments);
                  };
                
                  /**
                   * Adds/removes data from the row
                   * @param {Number} row Index of column in which do you want to do splice.
                   * @param {Number} index Index at which to start changing the array. If negative, will begin that many elements from the end
                   * @param {Number} amount An integer indicating the number of old array elements to remove. If amount is 0, no elements are removed
                   * param {...*} elements Optional. The elements to add to the array. If you don't specify any elements, spliceCol simply removes elements from the array
                   */
                  this.spliceRow = function (row, index, amount/*, elements... */) {
                    return datamap.spliceRow.apply(datamap, arguments);
                  };
                
                  /**
                   * Returns the top left (TL) and bottom right (BR) selection coordinates
                   * @param {Object[]} coordsArr
                   * @returns {Object}
                   */
                  this.getCornerCoords = function (coordsArr) {
                    return grid.getCornerCoords(coordsArr);
                  };
                
                  /**
                   * Returns current selection. Returns undefined if there is no selection.
                   * @public
                   * @return {Array} [`startRow`, `startCol`, `endRow`, `endCol`]
                   */
                  this.getSelected = function () { //https://github.com/warpech/jquery-handsontable/issues/44  //cjl
                    if (selection.isSelected()) {
                      return [priv.selStart.row(), priv.selStart.col(), priv.selEnd.row(), priv.selEnd.col()];
                    }
                  };
                
                  /**
                   * Parse settings from DOM and CSS
                   * @public
                   */
                  this.parseSettingsFromDOM = function () {
                    var overflow = this.rootElement.css('overflow');
                    if (overflow === 'scroll' || overflow === 'auto') {
                      this.rootElement[0].style.overflow = 'visible';
                      priv.settingsFromDOM.overflow = overflow;
                    }
                    else if (priv.settings.width === void 0 || priv.settings.height === void 0) {
                      priv.settingsFromDOM.overflow = 'auto';
                    }
                
                    if (priv.settings.width === void 0) {
                      priv.settingsFromDOM.width = this.rootElement.width();
                    }
                    else {
                      priv.settingsFromDOM.width = void 0;
                    }
                
                    priv.settingsFromDOM.height = void 0;
                    if (priv.settings.height === void 0) {
                      if (priv.settingsFromDOM.overflow === 'scroll' || priv.settingsFromDOM.overflow === 'auto') {
                        //this needs to read only CSS/inline style and not actual height
                        //so we need to call getComputedStyle on cloned container
                        var clone = this.rootElement[0].cloneNode(false);
                        var parent = this.rootElement[0].parentNode;
                        if (parent) {
                          clone.removeAttribute('id');
                          parent.appendChild(clone);
                          var computedClientHeight = parseInt(clone.clientHeight, 10);
                          var computedPaddingTop = parseInt(window.getComputedStyle(clone, null).getPropertyValue('paddingTop'), 10) || 0;
                          var computedPaddingBottom = parseInt(window.getComputedStyle(clone, null).getPropertyValue('paddingBottom'), 10) || 0;
                
                          var computedHeight = computedClientHeight - computedPaddingTop - computedPaddingBottom;
                
                          if(isNaN(computedHeight) && clone.currentStyle){
                            computedHeight = parseInt(clone.currentStyle.height, 10)
                          }
                
                          if (computedHeight > 0) {
                            priv.settingsFromDOM.height = computedHeight;
                          }
                          parent.removeChild(clone);
                        }
                      }
                    }
                  };
                
                  /**
                   * Render visible data
                   * @public
                   */
                  this.render = function () {
                    if (instance.view) {
                      instance.forceFullRender = true; //used when data was changed
                      instance.parseSettingsFromDOM();
                      selection.refreshBorders(null, true);
                    }
                  };
                
                  /**
                   * Load data from array
                   * @public
                   * @param {Array} data
                   */
                  this.loadData = function (data) {
                    if (typeof data === 'object' && data !== null) {
                      if (!(data.push && data.splice)) { //check if data is array. Must use duck-type check so Backbone Collections also pass it
                        //when data is not an array, attempt to make a single-row array of it
                        data = [data];
                      }
                    }
                    else if(data === null) {
                      data = [];
                      var row;
                      for (var r = 0, rlen = priv.settings.startRows; r < rlen; r++) {
                        row = [];
                        for (var c = 0, clen = priv.settings.startCols; c < clen; c++) {
                          row.push(null);
                        }
                        data.push(row);
                      }
                    }
                    else {
                      throw new Error("loadData only accepts array of objects or array of arrays (" + typeof data + " given)");
                    }
                
                    priv.isPopulated = false;
                    GridSettings.prototype.data = data;
                
                    if (priv.settings.dataSchema instanceof Array || data[0]  instanceof Array) {
                      instance.dataType = 'array';
                    }
                    else if (typeof priv.settings.dataSchema === 'function') {
                      instance.dataType = 'function';
                    }
                    else {
                      instance.dataType = 'object';
                    }
                
                    datamap = new Handsontable.DataMap(instance, priv, GridSettings);
                
                    clearCellSettingCache();
                
                    grid.adjustRowsAndCols();
                    instance.PluginHooks.run('afterLoadData');
                
                    if (priv.firstRun) {
                      priv.firstRun = [null, 'loadData'];
                    }
                    else {
                      instance.PluginHooks.run('afterChange', null, 'loadData');
                      instance.render();
                    }
                
                    priv.isPopulated = true;
                
                
                
                    function clearCellSettingCache() {
                      priv.cellSettings.length = 0;
                    }
                  };
                
                  /**
                   * Return the current data object (the same that was passed by `data` configuration option or `loadData` method). Optionally you can provide cell range `r`, `c`, `r2`, `c2` to get only a fragment of grid data
                   * @public
                   * @param {Number} r (Optional) From row
                   * @param {Number} c (Optional) From col
                   * @param {Number} r2 (Optional) To row
                   * @param {Number} c2 (Optional) To col
                   * @return {Array|Object}
                   */
                  this.getData = function (r, c, r2, c2) {
                    if (typeof r === 'undefined') {
                      return datamap.getAll();
                    }
                    else {
                      return datamap.getRange({row: r, col: c}, {row: r2, col: c2}, datamap.DESTINATION_RENDERER);
                    }
                  };
                
                  this.getCopyableData = function (startRow, startCol, endRow, endCol) {
                    return datamap.getCopyableText({row: startRow, col: startCol}, {row: endRow, col: endCol});
                  }
                
                  /**
                   * Update settings
                   * @public
                   */
                  this.updateSettings = function (settings, init) {
                    var i, clen;
                
                    if (typeof settings.rows !== "undefined") {
                      throw new Error("'rows' setting is no longer supported. do you mean startRows, minRows or maxRows?");
                    }
                    if (typeof settings.cols !== "undefined") {
                      throw new Error("'cols' setting is no longer supported. do you mean startCols, minCols or maxCols?");
                    }
                
                    for (i in settings) {
                      if (i === 'data') {
                        continue; //loadData will be triggered later
                      }
                      else {
                        if (instance.PluginHooks.hooks[i] !== void 0 || instance.PluginHooks.legacy[i] !== void 0) {
                          if (typeof settings[i] === 'function' || Handsontable.helper.isArray(settings[i])) {
                            instance.PluginHooks.add(i, settings[i]);
                          }
                        }
                        else {
                          // Update settings
                          if (!init && settings.hasOwnProperty(i)) {
                            GridSettings.prototype[i] = settings[i];
                          }
                
                          //launch extensions
                          if (Handsontable.extension[i]) {
                            priv.extensions[i] = new Handsontable.extension[i](instance, settings[i]);
                          }
                        }
                      }
                    }
                
                    // Load data or create data map
                    if (settings.data === void 0 && priv.settings.data === void 0) {
                      instance.loadData(null); //data source created just now
                    }
                    else if (settings.data !== void 0) {
                      instance.loadData(settings.data); //data source given as option
                    }
                    else if (settings.columns !== void 0) {
                      datamap.createMap();
                    }
                
                    // Init columns constructors configuration
                    clen = instance.countCols();
                
                    //Clear cellSettings cache
                    priv.cellSettings.length = 0;
                
                    if (clen > 0) {
                      var proto, column;
                
                      for (i = 0; i < clen; i++) {
                        priv.columnSettings[i] = Handsontable.helper.columnFactory(GridSettings, priv.columnsSettingConflicts);
                
                        // shortcut for prototype
                        proto = priv.columnSettings[i].prototype;
                
                        // Use settings provided by user
                        if (GridSettings.prototype.columns) {
                          column = GridSettings.prototype.columns[i];
                          Handsontable.helper.extend(proto, column);
                          Handsontable.helper.extend(proto, expandType(column));
                        }
                      }
                    }
                
                    if (typeof settings.fillHandle !== "undefined") {
                      if (autofill.handle && settings.fillHandle === false) {
                        autofill.disable();
                      }
                      else if (!autofill.handle && settings.fillHandle !== false) {
                        autofill.init();
                      }
                    }
                
                    if (typeof settings.className !== "undefined") {
                      if (GridSettings.prototype.className) {
                        instance.rootElement.removeClass(GridSettings.prototype.className);
                      }
                      if (settings.className) {
                        instance.rootElement.addClass(settings.className);
                      }
                    }
                
                    if (!init) {
                      instance.PluginHooks.run('afterUpdateSettings');
                    }
                
                    grid.adjustRowsAndCols();
                    if (instance.view && !priv.firstRun) {
                      instance.forceFullRender = true; //used when data was changed
                      selection.refreshBorders(null, true);
                    }
                  };
                
                  this.getValue = function () {
                    var sel = instance.getSelected();
                    if (GridSettings.prototype.getValue) {
                      if (typeof GridSettings.prototype.getValue === 'function') {
                        return GridSettings.prototype.getValue.call(instance);
                      }
                      else if (sel) {
                        return instance.getData()[sel[0]][GridSettings.prototype.getValue];
                      }
                    }
                    else if (sel) {
                      return instance.getDataAtCell(sel[0], sel[1]);
                    }
                  };
                
                  function expandType(obj) {
                    if (!obj.hasOwnProperty('type')) return; //ignore obj.prototype.type
                
                
                    var type, expandedType = {};
                
                    if (typeof obj.type === 'object') {
                      type = obj.type;
                    }
                    else if (typeof obj.type === 'string') {
                      type = Handsontable.cellTypes[obj.type];
                      if (type === void 0) {
                        throw new Error('You declared cell type "' + obj.type + '" as a string that is not mapped to a known object. Cell type must be an object or a string mapped to an object in Handsontable.cellTypes');
                      }
                    }
                
                
                    for (var i in type) {
                      if (type.hasOwnProperty(i) && !obj.hasOwnProperty(i)) {
                        expandedType[i] = type[i];
                      }
                    }
                
                    return expandedType;
                
                  }
                
                  /**
                   * Returns current settings object
                   * @return {Object}
                   */
                  this.getSettings = function () {
                    return priv.settings;
                  };
                
                  /**
                   * Returns current settingsFromDOM object
                   * @return {Object}
                   */
                  this.getSettingsFromDOM = function () {
                    return priv.settingsFromDOM;
                  };
                
                  /**
                   * Clears grid
                   * @public
                   */
                  this.clear = function () {
                    selection.selectAll();
                    selection.empty();
                  };
                
                  /**
                   * Inserts or removes rows and columns
                   * @param {String} action See grid.alter for possible values
                   * @param {Number} index
                   * @param {Number} amount
                   * @param {String} [source] Optional. Source of hook runner.
                   * @param {Boolean} [keepEmptyRows] Optional. Flag for preventing deletion of empty rows.
                   * @public
                   */
                  this.alter = function (action, index, amount, source, keepEmptyRows) {
                    grid.alter(action, index, amount, source, keepEmptyRows);
                  };
                
                  /**
                   * Returns <td> element corresponding to params row, col
                   * @param {Number} row
                   * @param {Number} col
                   * @public
                   * @return {Element}
                   */
                  this.getCell = function (row, col) {
                    return instance.view.getCellAtCoords({row: row, col: col});
                  };
                
                  /**
                   * Returns property name associated with column number
                   * @param {Number} col
                   * @public
                   * @return {String}
                   */
                  this.colToProp = function (col) {
                    return datamap.colToProp(col);
                  };
                
                  /**
                   * Returns column number associated with property name
                   * @param {String} prop
                   * @public
                   * @return {Number}
                   */
                  this.propToCol = function (prop) {
                    return datamap.propToCol(prop);
                  };
                
                  /**
                   * Return value at `row`, `col`
                   * @param {Number} row
                   * @param {Number} col
                   * @public
                   * @return value (mixed data type)
                   */
                  this.getDataAtCell = function (row, col) {
                    return datamap.get(row, datamap.colToProp(col));
                  };
                
                  /**
                   * Return value at `row`, `prop`
                   * @param {Number} row
                   * @param {String} prop
                   * @public
                   * @return value (mixed data type)
                   */
                  this.getDataAtRowProp = function (row, prop) {
                    return datamap.get(row, prop);
                  };
                
                  /**
                   * Return value at `col`
                   * @param {Number} col
                   * @public
                   * @return value (mixed data type)
                   */
                  this.getDataAtCol = function (col) {
                    return [].concat.apply([], datamap.getRange({row: 0, col: col}, {row: priv.settings.data.length - 1, col: col}, datamap.DESTINATION_RENDERER));
                  };
                
                  /**
                   * Return value at `prop`
                   * @param {String} prop
                   * @public
                   * @return value (mixed data type)
                   */
                  this.getDataAtProp = function (prop) {
                    return [].concat.apply([], datamap.getRange({row: 0, col: datamap.propToCol(prop)}, {row: priv.settings.data.length - 1, col: datamap.propToCol(prop)}, datamap.DESTINATION_RENDERER));
                  };
                
                  /**
                   * Return value at `row`
                   * @param {Number} row
                   * @public
                   * @return value (mixed data type)
                   */
                  this.getDataAtRow = function (row) {
                    return priv.settings.data[row];
                  };
                
                  /**
                   * Returns cell meta data object corresponding to params row, col
                   * @param {Number} row
                   * @param {Number} col
                   * @public
                   * @return {Object}
                   */
                  this.getCellMeta = function (row, col) {
                    var prop = datamap.colToProp(col)
                      , cellProperties;
                
                    row = translateRowIndex(row);
                    col = translateColIndex(col);
                
                    if ("undefined" === typeof priv.columnSettings[col]) {
                      priv.columnSettings[col] = Handsontable.helper.columnFactory(GridSettings, priv.columnsSettingConflicts);
                    }
                
                    if (!priv.cellSettings[row]) {
                      priv.cellSettings[row] = [];
                    }
                    if (!priv.cellSettings[row][col]) {
                      priv.cellSettings[row][col] = new priv.columnSettings[col]();
                    }
                
                    cellProperties = priv.cellSettings[row][col]; //retrieve cellProperties from cache
                
                    cellProperties.row = row;
                    cellProperties.col = col;
                    cellProperties.prop = prop;
                    cellProperties.instance = instance;
                
                    instance.PluginHooks.run('beforeGetCellMeta', row, col, cellProperties);
                    Handsontable.helper.extend(cellProperties, expandType(cellProperties)); //for `type` added in beforeGetCellMeta
                
                    if (cellProperties.cells) {
                      var settings = cellProperties.cells.call(cellProperties, row, col, prop);
                
                      if (settings) {
                        Handsontable.helper.extend(cellProperties, settings);
                        Handsontable.helper.extend(cellProperties, expandType(settings)); //for `type` added in cells
                      }
                    }
                
                    instance.PluginHooks.run('afterGetCellMeta', row, col, cellProperties);
                
                    return cellProperties;
                
                    /**
                     * If displayed rows order is different than the order of rows stored in memory (i.e. sorting is applied)
                     * we need to translate logical (stored) row index to physical (displayed) index.
                     * @param row - original row index
                     * @returns {int} translated row index
                     */
                    function translateRowIndex(row){
                      var getVars  = {row: row};
                
                      instance.PluginHooks.execute('beforeGet', getVars);
                
                      return getVars.row;
                    }
                
                    /**
                     * If displayed columns order is different than the order of columns stored in memory (i.e. column were moved using manualColumnMove plugin)
                     * we need to translate logical (stored) column index to physical (displayed) index.
                     * @param col - original column index
                     * @returns {int} - translated column index
                     */
                    function translateColIndex(col){
                      return Handsontable.PluginHooks.execute(instance, 'modifyCol', col); // warning: this must be done after datamap.colToProp
                    }
                  };
                
                  var rendererLookup = Handsontable.helper.cellMethodLookupFactory('renderer');
                  this.getCellRenderer = function (row, col) {
                    var renderer = rendererLookup.call(this, row, col);
                    return Handsontable.renderers.getRenderer(renderer);
                
                  };
                
                  this.getCellEditor = Handsontable.helper.cellMethodLookupFactory('editor');
                
                  this.getCellValidator = Handsontable.helper.cellMethodLookupFactory('validator');
                
                
                  /**
                   * Validates all cells using their validator functions and calls callback when finished. Does not render the view
                   * @param callback
                   */
                  this.validateCells = function (callback) {
                    var waitingForValidator = new ValidatorsQueue();
                    waitingForValidator.onQueueEmpty = callback;
                
                    var i = instance.countRows() - 1;
                    while (i >= 0) {
                      var j = instance.countCols() - 1;
                      while (j >= 0) {
                        waitingForValidator.addValidatorToQueue();
                        instance.validateCell(instance.getDataAtCell(i, j), instance.getCellMeta(i, j), function () {
                          waitingForValidator.removeValidatorFormQueue();
                        }, 'validateCells');
                        j--;
                      }
                      i--;
                    }
                    waitingForValidator.checkIfQueueIsEmpty();
                  };
                
                  /**
                   * Return array of row headers (if they are enabled). If param `row` given, return header at given row as string
                   * @param {Number} row (Optional)
                   * @return {Array|String}
                   */
                  this.getRowHeader = function (row) {
                    if (row === void 0) {
                      var out = [];
                      for (var i = 0, ilen = instance.countRows(); i < ilen; i++) {
                        out.push(instance.getRowHeader(i));
                      }
                      return out;
                    }
                    else if (Object.prototype.toString.call(priv.settings.rowHeaders) === '[object Array]' && priv.settings.rowHeaders[row] !== void 0) {
                      return priv.settings.rowHeaders[row];
                    }
                    else if (typeof priv.settings.rowHeaders === 'function') {
                      return priv.settings.rowHeaders(row);
                    }
                    else if (priv.settings.rowHeaders && typeof priv.settings.rowHeaders !== 'string' && typeof priv.settings.rowHeaders !== 'number') {
                      return row + 1;
                    }
                    else {
                      return priv.settings.rowHeaders;
                    }
                  };
                
                  /**
                   * Returns information of this table is configured to display row headers
                   * @returns {boolean}
                   */
                  this.hasRowHeaders = function () {
                    return !!priv.settings.rowHeaders;
                  };
                
                  /**
                   * Returns information of this table is configured to display column headers
                   * @returns {boolean}
                   */
                  this.hasColHeaders = function () {
                    if (priv.settings.colHeaders !== void 0 && priv.settings.colHeaders !== null) { //Polymer has empty value = null
                      return !!priv.settings.colHeaders;
                    }
                    for (var i = 0, ilen = instance.countCols(); i < ilen; i++) {
                      if (instance.getColHeader(i)) {
                        return true;
                      }
                    }
                    return false;
                  };
                
                  /**
                   * Return array of column headers (if they are enabled). If param `col` given, return header at given column as string
                   * @param {Number} col (Optional)
                   * @return {Array|String}
                   */
                  this.getColHeader = function (col) {
                    if (col === void 0) {
                      var out = [];
                      for (var i = 0, ilen = instance.countCols(); i < ilen; i++) {
                        out.push(instance.getColHeader(i));
                      }
                      return out;
                    }
                    else {
                      col = Handsontable.PluginHooks.execute(instance, 'modifyCol', col);
                
                      if (priv.settings.columns && priv.settings.columns[col] && priv.settings.columns[col].title) {
                        return priv.settings.columns[col].title;
                      }
                      else if (Object.prototype.toString.call(priv.settings.colHeaders) === '[object Array]' && priv.settings.colHeaders[col] !== void 0) {
                        return priv.settings.colHeaders[col];
                      }
                      else if (typeof priv.settings.colHeaders === 'function') {
                        return priv.settings.colHeaders(col);
                      }
                      else if (priv.settings.colHeaders && typeof priv.settings.colHeaders !== 'string' && typeof priv.settings.colHeaders !== 'number') {
                        return Handsontable.helper.spreadsheetColumnLabel(col);
                      }
                      else {
                        return priv.settings.colHeaders;
                      }
                    }
                  };
                
                  /**
                   * Return column width from settings (no guessing). Private use intended
                   * @param {Number} col
                   * @return {Number}
                   */
                  this._getColWidthFromSettings = function (col) {
                    var cellProperties = instance.getCellMeta(0, col);
                    var width = cellProperties.width;
                    if (width === void 0 || width === priv.settings.width) {
                      width = cellProperties.colWidths;
                    }
                    if (width !== void 0 && width !== null) {
                      switch (typeof width) {
                        case 'object': //array
                          width = width[col];
                          break;
                
                        case 'function':
                          width = width(col);
                          break;
                      }
                      if (typeof width === 'string') {
                        width = parseInt(width, 10);
                      }
                    }
                    return width;
                  };
                
                  /**
                   * Return column width
                   * @param {Number} col
                   * @return {Number}
                   */
                  this.getColWidth = function (col) {
                    col = Handsontable.PluginHooks.execute(instance, 'modifyCol', col);
                    var response = {
                      width: instance._getColWidthFromSettings(col)
                    };
                    if (!response.width) {
                      response.width = 50;
                    }
                    instance.PluginHooks.run('afterGetColWidth', col, response);
                    return response.width;
                  };
                
                  /**
                   * Return total number of rows in grid
                   * @return {Number}
                   */
                  this.countRows = function () {
                    return priv.settings.data.length;
                  };
                
                  /**
                   * Return total number of columns in grid
                   * @return {Number}
                   */
                  this.countCols = function () {
                    if (instance.dataType === 'object' || instance.dataType === 'function') {
                      if (priv.settings.columns && priv.settings.columns.length) {
                        return priv.settings.columns.length;
                      }
                      else {
                        return datamap.colToPropCache.length;
                      }
                    }
                    else if (instance.dataType === 'array') {
                      if (priv.settings.columns && priv.settings.columns.length) {
                        return priv.settings.columns.length;
                      }
                      else if (priv.settings.data && priv.settings.data[0] && priv.settings.data[0].length) {
                        return priv.settings.data[0].length;
                      }
                      else {
                        return 0;
                      }
                    }
                  };
                
                  /**
                   * Return index of first visible row
                   * @return {Number}
                   */
                  this.rowOffset = function () {
                    return instance.view.wt.getSetting('offsetRow');
                  };
                
                  /**
                   * Return index of first visible column
                   * @return {Number}
                   */
                  this.colOffset = function () {
                    return instance.view.wt.getSetting('offsetColumn');
                  };
                
                  /**
                   * Return number of visible rows. Returns -1 if table is not visible
                   * @return {Number}
                   */
                  this.countVisibleRows = function () {
                    return instance.view.wt.drawn ? instance.view.wt.wtTable.rowStrategy.countVisible() : -1;
                  };
                
                  /**
                   * Return number of visible columns. Returns -1 if table is not visible
                   * @return {Number}
                   */
                  this.countVisibleCols = function () {
                    return instance.view.wt.drawn ? instance.view.wt.wtTable.columnStrategy.countVisible() : -1;
                  };
                
                  /**
                   * Return number of empty rows
                   * @return {Boolean} ending If true, will only count empty rows at the end of the data source
                   */
                  this.countEmptyRows = function (ending) {
                    var i = instance.countRows() - 1
                      , empty = 0;
                    while (i >= 0) {
                      datamap.get(i, 0);
                
                      if (instance.isEmptyRow(datamap.getVars.row)) {
                        empty++;
                      }
                      else if (ending) {
                        break;
                      }
                      i--;
                    }
                    return empty;
                  };
                
                  /**
                   * Return number of empty columns
                   * @return {Boolean} ending If true, will only count empty columns at the end of the data source row
                   */
                  this.countEmptyCols = function (ending) {
                    if (instance.countRows() < 1) {
                      return 0;
                    }
                
                    var i = instance.countCols() - 1
                      , empty = 0;
                    while (i >= 0) {
                      if (instance.isEmptyCol(i)) {
                        empty++;
                      }
                      else if (ending) {
                        break;
                      }
                      i--;
                    }
                    return empty;
                  };
                
                  /**
                   * Return true if the row at the given index is empty, false otherwise
                   * @param {Number} r Row index
                   * @return {Boolean}
                   */
                  this.isEmptyRow = function (r) {
                    return priv.settings.isEmptyRow.call(instance, r);
                  };
                
                  /**
                   * Return true if the column at the given index is empty, false otherwise
                   * @param {Number} c Column index
                   * @return {Boolean}
                   */
                  this.isEmptyCol = function (c) {
                    return priv.settings.isEmptyCol.call(instance, c);
                  };
                
                  /**
                   * Selects cell on grid. Optionally selects range to another cell
                   * @param {Number} row
                   * @param {Number} col
                   * @param {Number} [endRow]
                   * @param {Number} [endCol]
                   * @param {Boolean} [scrollToCell=true] If true, viewport will be scrolled to the selection
                   * @public
                   * @return {Boolean}
                   */
                  this.selectCell = function (row, col, endRow, endCol, scrollToCell) {
                    if (typeof row !== 'number' || row < 0 || row >= instance.countRows()) {
                      return false;
                    }
                    if (typeof col !== 'number' || col < 0 || col >= instance.countCols()) {
                      return false;
                    }
                    if (typeof endRow !== "undefined") {
                      if (typeof endRow !== 'number' || endRow < 0 || endRow >= instance.countRows()) {
                        return false;
                      }
                      if (typeof endCol !== 'number' || endCol < 0 || endCol >= instance.countCols()) {
                        return false;
                      }
                    }
                    priv.selStart.coords({row: row, col: col});
                    if (document.activeElement && document.activeElement !== document.documentElement && document.activeElement !== document.body) {
                      document.activeElement.blur(); //needed or otherwise prepare won't focus the cell. selectionSpec tests this (should move focus to selected cell)
                    }
                    instance.listen();
                    if (typeof endRow === "undefined") {
                      selection.setRangeEnd({row: row, col: col}, scrollToCell);
                    }
                    else {
                      selection.setRangeEnd({row: endRow, col: endCol}, scrollToCell);
                    }
                
                    instance.selection.finish();
                    return true;
                  };
                
                  this.selectCellByProp = function (row, prop, endRow, endProp, scrollToCell) {
                    arguments[1] = datamap.propToCol(arguments[1]);
                    if (typeof arguments[3] !== "undefined") {
                      arguments[3] = datamap.propToCol(arguments[3]);
                    }
                    return instance.selectCell.apply(instance, arguments);
                  };
                
                  /**
                   * Deselects current sell selection on grid
                   * @public
                   */
                  this.deselectCell = function () {
                    selection.deselect();
                  };
                
                  /**
                   * Remove grid from DOM
                   * @public
                   */
                  this.destroy = function () {
                    instance.clearTimeouts();
                    if (instance.view) { //in case HT is destroyed before initialization has finished
                      instance.view.wt.destroy();
                    }
                    instance.rootElement.empty();
                    instance.rootElement.removeData('handsontable');
                    instance.rootElement.off('.handsontable');
                    $(window).off('.' + instance.guid);
                    $document.off('.' + instance.guid);
                    $body.off('.' + instance.guid);
                    instance.PluginHooks.run('afterDestroy');
                  };
                
                  /**
                   * Returns active editor object
                   * @returns {Object}
                   */
                  this.getActiveEditor = function(){
                    return editorManager.getActiveEditor();
                  };
                
                  /**
                   * Return Handsontable instance
                   * @public
                   * @return {Object}
                   */
                  this.getInstance = function () {
                    return instance.rootElement.data("handsontable");
                  };
                
                  (function () {
                    // Create new instance of plugin hooks
                    instance.PluginHooks = new Handsontable.PluginHookClass();
                
                    // Upgrade methods to call of global PluginHooks instance
                    var _run = instance.PluginHooks.run
                      , _exe = instance.PluginHooks.execute;
                
                    instance.PluginHooks.run = function (key, p1, p2, p3, p4, p5) {
                      _run.call(this, instance, key, p1, p2, p3, p4, p5);
                      Handsontable.PluginHooks.run(instance, key, p1, p2, p3, p4, p5);
                    };
                
                    instance.PluginHooks.execute = function (key, p1, p2, p3, p4, p5) {
                      var globalHandlerResult = Handsontable.PluginHooks.execute(instance, key, p1, p2, p3, p4, p5);
                      var localHandlerResult = _exe.call(this, instance, key, globalHandlerResult, p2, p3, p4, p5);
                
                      return typeof localHandlerResult == 'undefined' ? globalHandlerResult : localHandlerResult;
                
                    };
                
                    // Map old API with new methods
                    instance.addHook = function () {
                      instance.PluginHooks.add.apply(instance.PluginHooks, arguments);
                    };
                    instance.addHookOnce = function () {
                      instance.PluginHooks.once.apply(instance.PluginHooks, arguments);
                    };
                
                    instance.removeHook = function () {
                      instance.PluginHooks.remove.apply(instance.PluginHooks, arguments);
                    };
                
                    instance.runHooks = function () {
                      instance.PluginHooks.run.apply(instance.PluginHooks, arguments);
                    };
                    instance.runHooksAndReturn = function () {
                      return instance.PluginHooks.execute.apply(instance.PluginHooks, arguments);
                    };
                
                  })();
                
                  this.timeouts = {};
                
                  /**
                   * Sets timeout. Purpose of this method is to clear all known timeouts when `destroy` method is called
                   * @public
                   */
                  this.registerTimeout = function (key, handle, ms) {
                    clearTimeout(this.timeouts[key]);
                    this.timeouts[key] = setTimeout(handle, ms || 0);
                  };
                
                  /**
                   * Clears all known timeouts
                   * @public
                   */
                  this.clearTimeouts = function () {
                    for (var key in this.timeouts) {
                      if (this.timeouts.hasOwnProperty(key)) {
                        clearTimeout(this.timeouts[key]);
                      }
                    }
                  };
                
                  /**
                   * Handsontable version
                   */
                  this.version = '0.10.5'; //inserted by grunt from package.json
                };
                
                var DefaultSettings = function () {};
                
                DefaultSettings.prototype = {
                  data: void 0,
                  width: void 0,
                  height: void 0,
                  startRows: 5,
                  startCols: 5,
                  rowHeaders: null,
                  colHeaders: null,
                  minRows: 0,
                  minCols: 0,
                  maxRows: Infinity,
                  maxCols: Infinity,
                  minSpareRows: 0,
                  minSpareCols: 0,
                  multiSelect: true,
                  fillHandle: true,
                  fixedRowsTop: 0,
                  fixedColumnsLeft: 0,
                  outsideClickDeselects: true,
                  enterBeginsEditing: true,
                  enterMoves: {row: 1, col: 0},
                  tabMoves: {row: 0, col: 1},
                  autoWrapRow: false,
                  autoWrapCol: false,
                  copyRowsLimit: 1000,
                  copyColsLimit: 1000,
                  pasteMode: 'overwrite',
                  currentRowClassName: void 0,
                  currentColClassName: void 0,
                  stretchH: 'hybrid',
                  isEmptyRow: function (r) {
                    var val;
                    for (var c = 0, clen = this.countCols(); c < clen; c++) {
                      val = this.getDataAtCell(r, c);
                      if (val !== '' && val !== null && typeof val !== 'undefined') {
                        return false;
                      }
                    }
                    return true;
                  },
                  isEmptyCol: function (c) {
                    var val;
                    for (var r = 0, rlen = this.countRows(); r < rlen; r++) {
                      val = this.getDataAtCell(r, c);
                      if (val !== '' && val !== null && typeof val !== 'undefined') {
                        return false;
                      }
                    }
                    return true;
                  },
                  observeDOMVisibility: true,
                  allowInvalid: true,
                  invalidCellClassName: 'htInvalid',
                  placeholderCellClassName: 'htPlaceholder',
                  readOnlyCellClassName: 'htDimmed',
                  fragmentSelection: false,
                  readOnly: false,
                  nativeScrollbars: false,
                  type: 'text',
                  copyable: true,
                  debug: false //shows debug overlays in Walkontable
                };
                Handsontable.DefaultSettings = DefaultSettings;
                
                $.fn.handsontable = function (action) {
                  var i
                    , ilen
                    , args
                    , output
                    , userSettings
                    , $this = this.first() // Use only first element from list
                    , instance = $this.data('handsontable');
                
                  // Init case
                  if (typeof action !== 'string') {
                    userSettings = action || {};
                    if (instance) {
                      instance.updateSettings(userSettings);
                    }
                    else {
                      instance = new Handsontable.Core($this, userSettings);
                      $this.data('handsontable', instance);
                      instance.init();
                    }
                
                    return $this;
                  }
                  // Action case
                  else {
                    args = [];
                    if (arguments.length > 1) {
                      for (i = 1, ilen = arguments.length; i < ilen; i++) {
                        args.push(arguments[i]);
                      }
                    }
                
                    if (instance) {
                      if (typeof instance[action] !== 'undefined') {
                        output = instance[action].apply(instance, args);
                      }
                      else {
                        throw new Error('Handsontable do not provide action: ' + action);
                      }
                    }
                
                    return output;
                  }
                };
                
                (function (window) {
                  
                
                  function MultiMap() {
                    var map = {
                      arrayMap: [],
                      weakMap: new WeakMap()
                    };
                
                    return {
                      'get': function (key) {
                        if (canBeAnArrayMapKey(key)) {
                          return map.arrayMap[key];
                        } else if (canBeAWeakMapKey(key)) {
                          return map.weakMap.get(key);
                        }
                      },
                
                      'set': function (key, value) {
                        if (canBeAnArrayMapKey(key)) {
                          map.arrayMap[key] = value;
                        } else if (canBeAWeakMapKey(key)) {
                          map.weakMap.set(key, value);
                        } else {
                          throw new Error('Invalid key type');
                        }
                
                
                      },
                
                      'delete': function (key) {
                        if (canBeAnArrayMapKey(key)) {
                          delete map.arrayMap[key];
                        } else if (canBeAWeakMapKey(key)) {
                          map.weakMap['delete'](key);  //Delete must be called using square bracket notation, because IE8 does not handle using `delete` with dot notation
                        }
                      }
                    };
                
                
                
                    function canBeAnArrayMapKey(obj){
                      return obj !== null && !isNaNSymbol(obj) && (typeof obj == 'string' || typeof obj == 'number');
                    }
                
                    function canBeAWeakMapKey(obj){
                      return obj !== null && (typeof obj == 'object' || typeof obj == 'function');
                    }
                
                    function isNaNSymbol(obj){
                      return obj !== obj; // NaN === NaN is always false
                    }
                
                  }
                
                  if (!window.MultiMap){
                    window.MultiMap = MultiMap;
                  }
                
                })(window);
                /**
                 * Handsontable TableView constructor
                 * @param {Object} instance
                 */
                Handsontable.TableView = function (instance) {
                  var that = this
                    , $window = $(window)
                    , $documentElement = $(document.documentElement);
                
                  this.instance = instance;
                  this.settings = instance.getSettings();
                  this.settingsFromDOM = instance.getSettingsFromDOM();
                
                  instance.rootElement.data('originalStyle', instance.rootElement[0].getAttribute('style')); //needed to retrieve original style in jsFiddle link generator in HT examples. may be removed in future versions
                  // in IE7 getAttribute('style') returns an object instead of a string, but we only support IE8+
                
                  instance.rootElement.addClass('handsontable');
                
                  var table = document.createElement('TABLE');
                  table.className = 'htCore';
                  this.THEAD = document.createElement('THEAD');
                  table.appendChild(this.THEAD);
                  this.TBODY = document.createElement('TBODY');
                  table.appendChild(this.TBODY);
                
                  instance.$table = $(table);
                  instance.rootElement.prepend(instance.$table);
                
                  instance.rootElement.on('mousedown.handsontable', function (event) {
                    if (!that.isTextSelectionAllowed(event.target)) {
                      clearTextSelection();
                      event.preventDefault();
                      window.focus(); //make sure that window that contains HOT is active. Important when HOT is in iframe.
                    }
                  });
                
                  $documentElement.on('keyup.' + instance.guid, function (event) {
                    if (instance.selection.isInProgress() && !event.shiftKey) {
                      instance.selection.finish();
                    }
                  });
                
                  var isMouseDown;
                
                  $documentElement.on('mouseup.' + instance.guid, function (event) {
                    if (instance.selection.isInProgress() && event.which === 1) { //is left mouse button
                      instance.selection.finish();
                    }
                
                    isMouseDown = false;
                
                    if (instance.autofill.handle && instance.autofill.handle.isDragged) {
                      if (instance.autofill.handle.isDragged > 1) {
                        instance.autofill.apply();
                      }
                      instance.autofill.handle.isDragged = 0;
                    }
                
                    if (Handsontable.helper.isOutsideInput(document.activeElement)) {
                      instance.unlisten();
                    }
                  });
                
                  $documentElement.on('mousedown.' + instance.guid, function (event) {
                    var next = event.target;
                
                    if (next !== that.wt.wtTable.spreader) { //immediate click on "spreader" means click on the right side of vertical scrollbar
                      while (next !== document.documentElement) {
                        if (next === null) {
                          return; //click on something that was a row but now is detached (possibly because your click triggered a rerender)
                        }
                        if (next === instance.rootElement[0] || next.nodeName === 'HANDSONTABLE-TABLE') {
                          return; //click inside container or Web Component (HANDSONTABLE-TABLE is the name of the custom element)
                        }
                        next = next.parentNode;
                      }
                    }
                
                    if (that.settings.outsideClickDeselects) {
                      instance.deselectCell();
                    }
                    else {
                      instance.destroyEditor();
                    }
                  });
                
                  instance.rootElement.on('mousedown.handsontable', '.dragdealer', function () {
                    instance.destroyEditor();
                  });
                
                  instance.$table.on('selectstart', function (event) {
                    if (that.settings.fragmentSelection) {
                      return;
                    }
                
                    //https://github.com/warpech/jquery-handsontable/issues/160
                    //selectstart is IE only event. Prevent text from being selected when performing drag down in IE8
                    event.preventDefault();
                  });
                
                  var clearTextSelection = function () {
                    //http://stackoverflow.com/questions/3169786/clear-text-selection-with-javascript
                    if (window.getSelection) {
                      if (window.getSelection().empty) {  // Chrome
                        window.getSelection().empty();
                      } else if (window.getSelection().removeAllRanges) {  // Firefox
                        window.getSelection().removeAllRanges();
                      }
                    } else if (document.selection) {  // IE?
                      document.selection.empty();
                    }
                  };
                
                  var walkontableConfig = {
                    debug: function () {
                      return that.settings.debug;
                    },
                    table: table,
                    stretchH: this.settings.stretchH,
                    data: instance.getDataAtCell,
                    totalRows: instance.countRows,
                    totalColumns: instance.countCols,
                    nativeScrollbars: this.settings.nativeScrollbars,
                    offsetRow: 0,
                    offsetColumn: 0,
                    width: this.getWidth(),
                    height: this.getHeight(),
                    fixedColumnsLeft: function () {
                      return that.settings.fixedColumnsLeft;
                    },
                    fixedRowsTop: function () {
                      return that.settings.fixedRowsTop;
                    },
                    rowHeaders: function () {
                      return instance.hasRowHeaders() ? [function (index, TH) {
                        that.appendRowHeader(index, TH);
                      }] : []
                    },
                    columnHeaders: function () {
                      return instance.hasColHeaders() ? [function (index, TH) {
                        that.appendColHeader(index, TH);
                      }] : []
                    },
                    columnWidth: instance.getColWidth,
                    cellRenderer: function (row, col, TD) {
                
                      var prop = that.instance.colToProp(col)
                        , cellProperties = that.instance.getCellMeta(row, col)
                        , renderer = that.instance.getCellRenderer(cellProperties);
                
                      var value = that.instance.getDataAtRowProp(row, prop);
                
                      renderer(that.instance, TD, row, col, prop, value, cellProperties);
                
                      that.instance.PluginHooks.run('afterRenderer', TD, row, col, prop, value, cellProperties);
                
                    },
                    selections: {
                      current: {
                        className: 'current',
                        border: {
                          width: 2,
                          color: '#5292F7',
                          style: 'solid',
                          cornerVisible: function () {
                            return that.settings.fillHandle && !that.isCellEdited() && !instance.selection.isMultiple()
                          }
                        }
                      },
                      area: {
                        className: 'area',
                        border: {
                          width: 1,
                          color: '#89AFF9',
                          style: 'solid',
                          cornerVisible: function () {
                            return that.settings.fillHandle && !that.isCellEdited() && instance.selection.isMultiple()
                          }
                        }
                      },
                      highlight: {
                        highlightRowClassName: that.settings.currentRowClassName,
                        highlightColumnClassName: that.settings.currentColClassName
                      },
                      fill: {
                        className: 'fill',
                        border: {
                          width: 1,
                          color: 'red',
                          style: 'solid'
                        }
                      }
                    },
                    hideBorderOnMouseDownOver: function () {
                      return that.settings.fragmentSelection;
                    },
                    onCellMouseDown: function (event, coords, TD) {
                      instance.listen();
                
                      isMouseDown = true;
                      var coordsObj = {row: coords[0], col: coords[1]};
                      if (event.button === 2 && instance.selection.inInSelection(coordsObj)) { //right mouse button
                        //do nothing
                      }
                      else if (event.shiftKey) {
                        instance.selection.setRangeEnd(coordsObj);
                      }
                      else {
                        instance.selection.setRangeStart(coordsObj);
                      }
                
                      instance.PluginHooks.run('afterOnCellMouseDown', event, coords, TD);
                    },
                    /*onCellMouseOut: function (/*event, coords, TD* /) {
                     if (isMouseDown && that.settings.fragmentSelection === 'single') {
                     clearTextSelection(); //otherwise text selection blinks during multiple cells selection
                     }
                     },*/
                    onCellMouseOver: function (event, coords, TD) {
                      var coordsObj = {row: coords[0], col: coords[1]};
                      if (isMouseDown) {
                        /*if (that.settings.fragmentSelection === 'single') {
                         clearTextSelection(); //otherwise text selection blinks during multiple cells selection
                         }*/
                        instance.selection.setRangeEnd(coordsObj);
                      }
                      else if (instance.autofill.handle && instance.autofill.handle.isDragged) {
                        instance.autofill.handle.isDragged++;
                        instance.autofill.showBorder(coords);
                      }
                      instance.PluginHooks.run('afterOnCellMouseOver', event, coords, TD);
                    },
                    onCellCornerMouseDown: function (event) {
                      instance.autofill.handle.isDragged = 1;
                      event.preventDefault();
                      instance.PluginHooks.run('afterOnCellCornerMouseDown', event);
                    },
                    onCellCornerDblClick: function () {
                      instance.autofill.selectAdjacent();
                    },
                    beforeDraw: function (force) {
                      that.beforeRender(force);
                    },
                    onDraw: function(force){
                      that.onDraw(force);
                    },
                    onScrollVertically: function () {
                      instance.runHooks('afterScrollVertically');
                    },
                    onScrollHorizontally: function () {
                      instance.runHooks('afterScrollHorizontally');
                    }
                  };
                
                  instance.PluginHooks.run('beforeInitWalkontable', walkontableConfig);
                
                  this.wt = new Walkontable(walkontableConfig);
                
                  $window.on('resize.' + instance.guid, function () {
                    instance.registerTimeout('resizeTimeout', function () {
                      instance.parseSettingsFromDOM();
                      var newWidth = that.getWidth();
                      var newHeight = that.getHeight();
                      if (walkontableConfig.width !== newWidth || walkontableConfig.height !== newHeight) {
                        instance.forceFullRender = true;
                        that.render();
                        walkontableConfig.width = newWidth;
                        walkontableConfig.height = newHeight;
                      }
                    }, 60);
                  });
                
                  $(that.wt.wtTable.spreader).on('mousedown.handsontable, contextmenu.handsontable', function (event) {
                    if (event.target === that.wt.wtTable.spreader && event.which === 3) { //right mouse button exactly on spreader means right clickon the right hand side of vertical scrollbar
                      event.stopPropagation();
                    }
                  });
                
                  $documentElement.on('click.' + instance.guid, function () {
                    if (that.settings.observeDOMVisibility) {
                      if (that.wt.drawInterrupted) {
                        that.instance.forceFullRender = true;
                        that.render();
                      }
                    }
                  });
                };
                
                Handsontable.TableView.prototype.isTextSelectionAllowed = function (el) {
                  if ( Handsontable.helper.isInput(el) ) {
                    return (true);
                  }
                  if (this.settings.fragmentSelection && this.wt.wtDom.isChildOf(el, this.TBODY)) {
                    return (true);
                  }
                  return false;
                };
                
                Handsontable.TableView.prototype.isCellEdited = function () {
                  var activeEditor = this.instance.getActiveEditor();
                  return activeEditor && activeEditor.isOpened();
                };
                
                Handsontable.TableView.prototype.getWidth = function () {
                  var val = this.settings.width !== void 0 ? this.settings.width : this.settingsFromDOM.width;
                  return typeof val === 'function' ? val() : val;
                };
                
                Handsontable.TableView.prototype.getHeight = function () {
                  var val = this.settings.height !== void 0 ? this.settings.height : this.settingsFromDOM.height;
                  return typeof val === 'function' ? val() : val;
                };
                
                Handsontable.TableView.prototype.beforeRender = function (force) {
                  if (force) { //force = did Walkontable decide to do full render
                    this.instance.PluginHooks.run('beforeRender', this.instance.forceFullRender); //this.instance.forceFullRender = did Handsontable request full render?
                    this.wt.update('width', this.getWidth());
                    this.wt.update('height', this.getHeight());
                  }
                };
                
                Handsontable.TableView.prototype.onDraw = function(force){
                  if (force) { //force = did Walkontable decide to do full render
                    this.instance.PluginHooks.run('afterRender', this.instance.forceFullRender); //this.instance.forceFullRender = did Handsontable request full render?
                  }
                };
                
                Handsontable.TableView.prototype.render = function () {
                  this.wt.draw(!this.instance.forceFullRender);
                  this.instance.forceFullRender = false;
                  this.instance.rootElement.triggerHandler('render.handsontable');
                };
                
                /**
                 * Returns td object given coordinates
                 */
                Handsontable.TableView.prototype.getCellAtCoords = function (coords) {
                  var td = this.wt.wtTable.getCell([coords.row, coords.col]);
                  if (td < 0) { //there was an exit code (cell is out of bounds)
                    return null;
                  }
                  else {
                    return td;
                  }
                };
                
                /**
                 * Scroll viewport to selection
                 * @param coords
                 */
                Handsontable.TableView.prototype.scrollViewport = function (coords) {
                  this.wt.scrollViewport([coords.row, coords.col]);
                };
                
                /**
                 * Append row header to a TH element
                 * @param row
                 * @param TH
                 */
                Handsontable.TableView.prototype.appendRowHeader = function (row, TH) {
                  if (row > -1) {
                    this.wt.wtDom.fastInnerHTML(TH, this.instance.getRowHeader(row));
                  }
                  else {
                    var DIV = document.createElement('DIV');
                    DIV.className = 'relative';
                    this.wt.wtDom.fastInnerText(DIV, '\u00A0');
                    this.wt.wtDom.empty(TH);
                    TH.appendChild(DIV);
                  }
                };
                
                /**
                 * Append column header to a TH element
                 * @param col
                 * @param TH
                 */
                Handsontable.TableView.prototype.appendColHeader = function (col, TH) {
                  var DIV = document.createElement('DIV')
                    , SPAN = document.createElement('SPAN');
                
                  DIV.className = 'relative';
                  SPAN.className = 'colHeader';
                
                  this.wt.wtDom.fastInnerHTML(SPAN, this.instance.getColHeader(col));
                  DIV.appendChild(SPAN);
                
                  this.wt.wtDom.empty(TH);
                  TH.appendChild(DIV);
                  this.instance.PluginHooks.run('afterGetColHeader', col, TH);
                };
                
                /**
                 * Given a element's left position relative to the viewport, returns maximum element width until the right edge of the viewport (before scrollbar)
                 * @param {Number} left
                 * @return {Number}
                 */
                Handsontable.TableView.prototype.maximumVisibleElementWidth = function (left) {
                  var rootWidth = this.wt.wtViewport.getWorkspaceWidth();
                  if(this.settings.nativeScrollbars) {
                    return rootWidth;
                  }
                  return rootWidth - left;
                };
                
                /**
                 * Given a element's top position relative to the viewport, returns maximum element height until the bottom edge of the viewport (before scrollbar)
                 * @param {Number} top
                 * @return {Number}
                 */
                Handsontable.TableView.prototype.maximumVisibleElementHeight = function (top) {
                  var rootHeight = this.wt.wtViewport.getWorkspaceHeight();
                  if(this.settings.nativeScrollbars) {
                    return rootHeight;
                  }
                  return rootHeight - top;
                };
                
                /**
                 * Utility to register editors and common namespace for keeping reference to all editor classes
                 */
                (function (Handsontable) {
                  
                
                  function RegisteredEditor(editorClass) {
                    var clazz, instances;
                
                    instances = {};
                    clazz = editorClass;
                
                    this.getInstance = function (hotInstance) {
                      if (!(hotInstance.guid in instances)) {
                        instances[hotInstance.guid] = new clazz(hotInstance);
                      }
                
                      return instances[hotInstance.guid];
                    }
                
                  }
                
                  var registeredEditorNames = {};
                  var registeredEditorClasses = new WeakMap();
                
                  Handsontable.editors = {
                
                    /**
                     * Registers editor under given name
                     * @param {String} editorName
                     * @param {Function} editorClass
                     */
                    registerEditor: function (editorName, editorClass) {
                      var editor = new RegisteredEditor(editorClass);
                      if (typeof editorName === "string") {
                        registeredEditorNames[editorName] = editor;
                      }
                      registeredEditorClasses.set(editorClass, editor);
                    },
                
                    /**
                     * Returns instance (singleton) of editor class
                     * @param {String|Function} editorName/editorClass
                     * @returns {Function} editorClass
                     */
                    getEditor: function (editorName, hotInstance) {
                      var editor;
                      if (typeof editorName == 'function') {
                        if (!(registeredEditorClasses.get(editorName))) {
                          this.registerEditor(null, editorName);
                        }
                        editor = registeredEditorClasses.get(editorName);
                      }
                      else if (typeof editorName == 'string') {
                        editor = registeredEditorNames[editorName];
                      }
                      else {
                        throw Error('Only strings and functions can be passed as "editor" parameter ');
                      }
                
                      if (!editor) {
                        throw Error('No editor registered under name "' + editorName + '"');
                      }
                
                      return editor.getInstance(hotInstance);
                    }
                
                  };
                
                
                })(Handsontable);
                
                (function(Handsontable){
                  
                
                  Handsontable.EditorManager = function(instance, priv, selection){
                    var that = this;
                    var $document = $(document);
                    var keyCodes = Handsontable.helper.keyCode;
                
                    var activeEditor;
                
                    var init = function () {
                
                      function onKeyDown(event) {
                
                        if (!instance.isListening()) {
                          return;
                        }
                
                        if (priv.settings.beforeOnKeyDown) { // HOT in HOT Plugin
                          priv.settings.beforeOnKeyDown.call(instance, event);
                        }
                
                        instance.PluginHooks.run('beforeKeyDown', event);
                
                        if (!event.isImmediatePropagationStopped()) {
                
                          priv.lastKeyCode = event.keyCode;
                          if (selection.isSelected()) {
                            var ctrlDown = (event.ctrlKey || event.metaKey) && !event.altKey; //catch CTRL but not right ALT (which in some systems triggers ALT+CTRL)
                
                            if (!activeEditor.isWaiting()) {
                              if (!Handsontable.helper.isMetaKey(event.keyCode) && !ctrlDown && !that.isEditorOpened()) {
                                that.openEditor('');
                                event.stopPropagation(); //required by HandsontableEditor
                                return;
                              }
                            }
                
                            var rangeModifier = event.shiftKey ? selection.setRangeEnd : selection.setRangeStart;
                
                              switch (event.keyCode) {
                
                                case keyCodes.A:
                                  if (ctrlDown) {
                                    selection.selectAll(); //select all cells
                
                                    event.preventDefault();
                                    event.stopPropagation();
                                    break;
                                  }
                
                                case keyCodes.ARROW_UP:
                
                                  if (that.isEditorOpened() && !activeEditor.isWaiting()){
                                    that.closeEditorAndSaveChanges(ctrlDown);
                                  }
                
                                  moveSelectionUp(event.shiftKey);
                
                                  event.preventDefault();
                                  event.stopPropagation(); //required by HandsontableEditor
                                  break;
                
                                case keyCodes.ARROW_DOWN:
                                  if (that.isEditorOpened() && !activeEditor.isWaiting()){
                                    that.closeEditorAndSaveChanges(ctrlDown);
                                  }
                
                                  moveSelectionDown(event.shiftKey);
                
                                  event.preventDefault();
                                  event.stopPropagation(); //required by HandsontableEditor
                                  break;
                
                                case keyCodes.ARROW_RIGHT:
                                  if(that.isEditorOpened()  && !activeEditor.isWaiting()){
                                    that.closeEditorAndSaveChanges(ctrlDown);
                                  }
                
                                  moveSelectionRight(event.shiftKey);
                
                                  event.preventDefault();
                                  event.stopPropagation(); //required by HandsontableEditor
                                  break;
                
                                case keyCodes.ARROW_LEFT:
                                  if(that.isEditorOpened() && !activeEditor.isWaiting()){
                                    that.closeEditorAndSaveChanges(ctrlDown);
                                  }
                
                                  moveSelectionLeft(event.shiftKey);
                
                                  event.preventDefault();
                                  event.stopPropagation(); //required by HandsontableEditor
                                  break;
                
                                case keyCodes.TAB:
                                  var tabMoves = typeof priv.settings.tabMoves === 'function' ? priv.settings.tabMoves(event) : priv.settings.tabMoves;
                                  if (event.shiftKey) {
                                    selection.transformStart(-tabMoves.row, -tabMoves.col); //move selection left
                                  }
                                  else {
                                    selection.transformStart(tabMoves.row, tabMoves.col, true); //move selection right (add a new column if needed)
                                  }
                                  event.preventDefault();
                                  event.stopPropagation(); //required by HandsontableEditor
                                  break;
                
                                case keyCodes.BACKSPACE:
                                case keyCodes.DELETE:
                                  selection.empty(event);
                                  that.prepareEditor();
                                  event.preventDefault();
                                  break;
                
                                case keyCodes.F2: /* F2 */
                                  that.openEditor();
                                  event.preventDefault(); //prevent Opera from opening Go to Page dialog
                                  break;
                
                                case keyCodes.ENTER: /* return/enter */
                                  if(that.isEditorOpened()){
                
                                    if (activeEditor.state !== Handsontable.EditorState.WAITING){
                                      that.closeEditorAndSaveChanges(ctrlDown);
                                    }
                
                                    moveSelectionAfterEnter(event.shiftKey);
                
                                  } else {
                
                                    if (instance.getSettings().enterBeginsEditing){
                                      that.openEditor();
                                    } else {
                                      moveSelectionAfterEnter(event.shiftKey);
                                    }
                
                                  }
                
                                  event.preventDefault(); //don't add newline to field
                                  event.stopImmediatePropagation(); //required by HandsontableEditor
                                  break;
                
                                case keyCodes.ESCAPE:
                                  if(that.isEditorOpened()){
                                    that.closeEditorAndRestoreOriginalValue(ctrlDown);
                                  }
                                  event.preventDefault();
                                  break;
                
                                case keyCodes.HOME:
                                  if (event.ctrlKey || event.metaKey) {
                                    rangeModifier({row: 0, col: priv.selStart.col()});
                                  }
                                  else {
                                    rangeModifier({row: priv.selStart.row(), col: 0});
                                  }
                                  event.preventDefault(); //don't scroll the window
                                  event.stopPropagation(); //required by HandsontableEditor
                                  break;
                
                                case keyCodes.END:
                                  if (event.ctrlKey || event.metaKey) {
                                    rangeModifier({row: instance.countRows() - 1, col: priv.selStart.col()});
                                  }
                                  else {
                                    rangeModifier({row: priv.selStart.row(), col: instance.countCols() - 1});
                                  }
                                  event.preventDefault(); //don't scroll the window
                                  event.stopPropagation(); //required by HandsontableEditor
                                  break;
                
                                case keyCodes.PAGE_UP:
                                  selection.transformStart(-instance.countVisibleRows(), 0);
                                  instance.view.wt.scrollVertical(-instance.countVisibleRows());
                                  instance.view.render();
                                  event.preventDefault(); //don't page up the window
                                  event.stopPropagation(); //required by HandsontableEditor
                                  break;
                
                                case keyCodes.PAGE_DOWN:
                                  selection.transformStart(instance.countVisibleRows(), 0);
                                  instance.view.wt.scrollVertical(instance.countVisibleRows());
                                  instance.view.render();
                                  event.preventDefault(); //don't page down the window
                                  event.stopPropagation(); //required by HandsontableEditor
                                  break;
                
                                default:
                                  break;
                              }
                
                          }
                        }
                      }
                      $document.on('keydown.handsontable.' + instance.guid, onKeyDown);
                
                      function onDblClick() {
                //        that.instance.destroyEditor();
                        that.openEditor();
                      }
                
                      instance.view.wt.update('onCellDblClick', onDblClick);
                
                      instance.addHook('afterDestroy', function(){
                        $document.off('keydown.handsontable.' + instance.guid);
                      });
                
                      function moveSelectionAfterEnter(shiftKey){
                        var enterMoves = typeof priv.settings.enterMoves === 'function' ? priv.settings.enterMoves(event) : priv.settings.enterMoves;
                
                        if (shiftKey) {
                          selection.transformStart(-enterMoves.row, -enterMoves.col); //move selection up
                        }
                        else {
                          selection.transformStart(enterMoves.row, enterMoves.col, true); //move selection down (add a new row if needed)
                        }
                      }
                
                      function moveSelectionUp(shiftKey){
                        if (shiftKey) {
                          selection.transformEnd(-1, 0);
                        }
                        else {
                          selection.transformStart(-1, 0);
                        }
                      }
                
                      function moveSelectionDown(shiftKey){
                        if (shiftKey) {
                          selection.transformEnd(1, 0); //expanding selection down with shift
                        }
                        else {
                          selection.transformStart(1, 0); //move selection down
                        }
                      }
                
                      function moveSelectionRight(shiftKey){
                        if (shiftKey) {
                          selection.transformEnd(0, 1);
                        }
                        else {
                          selection.transformStart(0, 1);
                        }
                      }
                
                      function moveSelectionLeft(shiftKey){
                        if (shiftKey) {
                          selection.transformEnd(0, -1);
                        }
                        else {
                          selection.transformStart(0, -1);
                        }
                      }
                    };
                
                    /**
                     * Destroy current editor, if exists
                     * @param {Boolean} revertOriginal
                     */
                    this.destroyEditor = function (revertOriginal) {
                      this.closeEditor(revertOriginal);
                    };
                
                    this.getActiveEditor = function () {
                      return activeEditor;
                    };
                
                    /**
                     * Prepare text input to be displayed at given grid cell
                     */
                    this.prepareEditor = function () {
                
                      if (activeEditor && activeEditor.isWaiting()){
                
                        this.closeEditor(false, false, function(dataSaved){
                          if(dataSaved){
                            that.prepareEditor();
                          }
                        });
                
                        return;
                      }
                
                      var row = priv.selStart.row();
                      var col = priv.selStart.col();
                      var prop = instance.colToProp(col);
                      var td = instance.getCell(row, col);
                      var originalValue = instance.getDataAtCell(row, col);
                      var cellProperties = instance.getCellMeta(row, col);
                
                      var editorClass = instance.getCellEditor(cellProperties);
                      activeEditor = Handsontable.editors.getEditor(editorClass, instance);
                
                      activeEditor.prepare(row, col, prop, td, originalValue, cellProperties);
                
                    };
                
                    this.isEditorOpened = function () {
                      return activeEditor.isOpened();
                    };
                
                    this.openEditor = function (initialValue) {
                      if (!activeEditor.cellProperties.readOnly){
                        activeEditor.beginEditing(initialValue);
                      }
                    };
                
                    this.closeEditor = function (restoreOriginalValue, ctrlDown, callback) {
                
                      if (!activeEditor){
                        if(callback) {
                          callback(false);
                        }
                      }
                      else {
                        activeEditor.finishEditing(restoreOriginalValue, ctrlDown, callback);
                      }
                    };
                
                    this.closeEditorAndSaveChanges = function(ctrlDown){
                      return this.closeEditor(false, ctrlDown);
                    };
                
                    this.closeEditorAndRestoreOriginalValue = function(ctrlDown){
                      return this.closeEditor(true, ctrlDown);
                    };
                
                    init();
                  };
                
                })(Handsontable);
                
                /**
                 * Utility to register renderers and common namespace for keeping reference to all renderers classes
                 */
                (function (Handsontable) {
                  
                
                  var registeredRenderers = {};
                
                  Handsontable.renderers = {
                
                    /**
                     * Registers renderer under given name
                     * @param {String} rendererName
                     * @param {Function} rendererFunction
                     */
                    registerRenderer: function (rendererName, rendererFunction) {
                      registeredRenderers[rendererName] = rendererFunction
                    },
                
                    /**
                     * @param {String|Function} rendererName/rendererFunction
                     * @returns {Function} rendererFunction
                     */
                    getRenderer: function (rendererName) {
                      if (typeof rendererName == 'function'){
                        return rendererName;
                      }
                
                      if (typeof rendererName != 'string'){
                        throw Error('Only strings and functions can be passed as "renderer" parameter ');
                      }
                
                      if (!(rendererName in registeredRenderers)) {
                        throw Error('No editor registered under name "' + rendererName + '"');
                      }
                
                      return registeredRenderers[rendererName];
                    }
                
                  };
                
                
                })(Handsontable);
                
                /**
                 * DOM helper optimized for maximum performance
                 * It is recommended for Handsontable plugins and renderers, because it is much faster than jQuery
                 * @type {WalkonableDom}
                 */
                Handsontable.Dom = new WalkontableDom();
                
                /**
                 * Returns true if keyCode represents a printable character
                 * @param {Number} keyCode
                 * @return {Boolean}
                 */
                Handsontable.helper.isPrintableChar = function (keyCode) {
                  return ((keyCode == 32) || //space
                    (keyCode >= 48 && keyCode <= 57) || //0-9
                    (keyCode >= 96 && keyCode <= 111) || //numpad
                    (keyCode >= 186 && keyCode <= 192) || //;=,-./`
                    (keyCode >= 219 && keyCode <= 222) || //[]{}\|"'
                    keyCode >= 226 || //special chars (229 for Asian chars)
                    (keyCode >= 65 && keyCode <= 90)); //a-z
                };
                
                Handsontable.helper.isMetaKey = function (keyCode) {
                  var keyCodes = Handsontable.helper.keyCode;
                  var metaKeys = [
                    keyCodes.ARROW_DOWN,
                    keyCodes.ARROW_UP,
                    keyCodes.ARROW_LEFT,
                    keyCodes.ARROW_RIGHT,
                    keyCodes.HOME,
                    keyCodes.END,
                    keyCodes.DELETE,
                    keyCodes.BACKSPACE,
                    keyCodes.F1,
                    keyCodes.F2,
                    keyCodes.F3,
                    keyCodes.F4,
                    keyCodes.F5,
                    keyCodes.F6,
                    keyCodes.F7,
                    keyCodes.F8,
                    keyCodes.F9,
                    keyCodes.F10,
                    keyCodes.F11,
                    keyCodes.F12,
                    keyCodes.TAB,
                    keyCodes.PAGE_DOWN,
                    keyCodes.PAGE_UP,
                    keyCodes.ENTER,
                    keyCodes.ESCAPE,
                    keyCodes.SHIFT,
                    keyCodes.CAPS_LOCK,
                    keyCodes.ALT
                  ];
                
                  return metaKeys.indexOf(keyCode) != -1;
                };
                
                Handsontable.helper.isCtrlKey = function (keyCode) {
                
                  var keys = Handsontable.helper.keyCode;
                
                  return [keys.CONTROL_LEFT, 224, keys.COMMAND_LEFT, keys.COMMAND_RIGHT].indexOf(keyCode) != -1;
                };
                
                /**
                 * Converts a value to string
                 * @param value
                 * @return {String}
                 */
                Handsontable.helper.stringify = function (value) {
                  switch (typeof value) {
                    case 'string':
                    case 'number':
                      return value + '';
                      break;
                
                    case 'object':
                      if (value === null) {
                        return '';
                      }
                      else {
                        return value.toString();
                      }
                      break;
                
                    case 'undefined':
                      return '';
                      break;
                
                    default:
                      return value.toString();
                  }
                };
                
                /**
                 * Generates spreadsheet-like column names: A, B, C, ..., Z, AA, AB, etc
                 * @param index
                 * @returns {String}
                 */
                Handsontable.helper.spreadsheetColumnLabel = function (index) {
                  var dividend = index + 1;
                  var columnLabel = '';
                  var modulo;
                  while (dividend > 0) {
                    modulo = (dividend - 1) % 26;
                    columnLabel = String.fromCharCode(65 + modulo) + columnLabel;
                    dividend = parseInt((dividend - modulo) / 26, 10);
                  }
                  return columnLabel;
                };
                
                /**
                 * Checks if value of n is a numeric one
                 * http://jsperf.com/isnan-vs-isnumeric/4
                 * @param n
                 * @returns {boolean}
                 */
                Handsontable.helper.isNumeric = function (n) {
                    var t = typeof n;
                    return t == 'number' ? !isNaN(n) && isFinite(n) :
                           t == 'string' ? !n.length ? false :
                           n.length == 1 ? /\d/.test(n) :
                           /^\s*[+-]?\s*(?:(?:\d+(?:\.\d+)?(?:e[+-]?\d+)?)|(?:0x[a-f\d]+))\s*$/i.test(n) :
                           t == 'object' ? !!n && typeof n.valueOf() == "number" && !(n instanceof Date) : false;
                };
                
                Handsontable.helper.isArray = function (obj) {
                  return Object.prototype.toString.call(obj).match(/array/i) !== null;
                };
                
                /**
                 * Checks if child is a descendant of given parent node
                 * http://stackoverflow.com/questions/2234979/how-to-check-in-javascript-if-one-element-is-a-child-of-another
                 * @param parent
                 * @param child
                 * @returns {boolean}
                 */
                Handsontable.helper.isDescendant = function (parent, child) {
                  var node = child.parentNode;
                  while (node != null) {
                    if (node == parent) {
                      return true;
                    }
                    node = node.parentNode;
                  }
                  return false;
                };
                
                /**
                 * Generates a random hex string. Used as namespace for Handsontable instance events.
                 * @return {String} - 16 character random string: "92b1bfc74ec4"
                 */
                Handsontable.helper.randomString = function () {
                  return walkontableRandomString();
                };
                
                /**
                 * Inherit without without calling parent constructor, and setting `Child.prototype.constructor` to `Child` instead of `Parent`.
                 * Creates temporary dummy function to call it as constructor.
                 * Described in ticket: https://github.com/warpech/jquery-handsontable/pull/516
                 * @param  {Object} Child  child class
                 * @param  {Object} Parent parent class
                 * @return {Object}        extended Child
                 */
                Handsontable.helper.inherit = function (Child, Parent) {
                  Parent.prototype.constructor = Parent;
                  Child.prototype = new Parent();
                  Child.prototype.constructor = Child;
                  return Child;
                };
                
                /**
                 * Perform shallow extend of a target object with extension's own properties
                 * @param {Object} target An object that will receive the new properties
                 * @param {Object} extension An object containing additional properties to merge into the target
                 */
                Handsontable.helper.extend = function (target, extension) {
                  for (var i in extension) {
                    if (extension.hasOwnProperty(i)) {
                      target[i] = extension[i];
                    }
                  }
                };
                
                Handsontable.helper.getPrototypeOf = function (obj) {
                  var prototype;
                
                  if(typeof obj.__proto__ == "object"){
                    prototype = obj.__proto__;
                  } else {
                    var oldConstructor,
                        constructor = obj.constructor;
                
                    if (typeof obj.constructor == "function") {
                      oldConstructor = constructor;
                
                      if (delete obj.constructor){
                        constructor = obj.constructor; // get real constructor
                        obj.constructor = oldConstructor; // restore constructor
                      }
                
                
                    }
                
                    prototype = constructor ? constructor.prototype : null; // needed for IE
                
                  }
                
                  return prototype;
                };
                
                /**
                 * Factory for columns constructors.
                 * @param {Object} GridSettings
                 * @param {Array} conflictList
                 * @return {Object} ColumnSettings
                 */
                Handsontable.helper.columnFactory = function (GridSettings, conflictList) {
                  function ColumnSettings () {}
                
                  Handsontable.helper.inherit(ColumnSettings, GridSettings);
                
                  // Clear conflict settings
                  for (var i = 0, len = conflictList.length; i < len; i++) {
                    ColumnSettings.prototype[conflictList[i]] = void 0;
                  }
                
                  return ColumnSettings;
                };
                
                Handsontable.helper.translateRowsToColumns = function (input) {
                  var i
                    , ilen
                    , j
                    , jlen
                    , output = []
                    , olen = 0;
                
                  for (i = 0, ilen = input.length; i < ilen; i++) {
                    for (j = 0, jlen = input[i].length; j < jlen; j++) {
                      if (j == olen) {
                        output.push([]);
                        olen++;
                      }
                      output[j].push(input[i][j])
                    }
                  }
                  return output;
                };
                
                Handsontable.helper.to2dArray = function (arr) {
                  var i = 0
                    , ilen = arr.length;
                  while (i < ilen) {
                    arr[i] = [arr[i]];
                    i++;
                  }
                };
                
                Handsontable.helper.extendArray = function (arr, extension) {
                  var i = 0
                    , ilen = extension.length;
                  while (i < ilen) {
                    arr.push(extension[i]);
                    i++;
                  }
                };
                
                /**
                 * Determines if the given DOM element is an input field.
                 * Notice: By 'input' we mean input, textarea and select nodes
                 * @param element - DOM element
                 * @returns {boolean}
                 */
                Handsontable.helper.isInput = function (element) {
                  var inputs = ['INPUT', 'SELECT', 'TEXTAREA'];
                
                  return inputs.indexOf(element.nodeName) > -1;
                }
                
                /**
                 * Determines if the given DOM element is an input field placed OUTSIDE of HOT.
                 * Notice: By 'input' we mean input, textarea and select nodes
                 * @param element - DOM element
                 * @returns {boolean}
                 */
                Handsontable.helper.isOutsideInput = function (element) {
                  return Handsontable.helper.isInput(element) && element.className.indexOf('handsontableInput') == -1;
                };
                
                Handsontable.helper.keyCode = {
                  MOUSE_LEFT: 1,
                  MOUSE_RIGHT: 3,
                  MOUSE_MIDDLE: 2,
                  BACKSPACE: 8,
                  COMMA: 188,
                  DELETE: 46,
                  END: 35,
                  ENTER: 13,
                  ESCAPE: 27,
                  CONTROL_LEFT: 91,
                  COMMAND_LEFT: 17,
                  COMMAND_RIGHT: 93,
                  ALT: 18,
                  HOME: 36,
                  PAGE_DOWN: 34,
                  PAGE_UP: 33,
                  PERIOD: 190,
                  SPACE: 32,
                  SHIFT: 16,
                  CAPS_LOCK: 20,
                  TAB: 9,
                  ARROW_RIGHT: 39,
                  ARROW_LEFT: 37,
                  ARROW_UP: 38,
                  ARROW_DOWN: 40,
                  F1: 112,
                  F2: 113,
                  F3: 114,
                  F4: 115,
                  F5: 116,
                  F6: 117,
                  F7: 118,
                  F8: 119,
                  F9: 120,
                  F10: 121,
                  F11: 122,
                  F12: 123,
                  A: 65,
                  X: 88,
                  C: 67,
                  V: 86
                };
                
                /**
                 * Determines whether given object is a plain Object.
                 * Note: String and Array are not plain Objects
                 * @param {*} obj
                 * @returns {boolean}
                 */
                Handsontable.helper.isObject = function (obj) {
                  return Object.prototype.toString.call(obj) == '[object Object]';
                };
                
                /**
                 * Determines whether given object is an Array.
                 * Note: String is not an Array
                 * @param {*} obj
                 * @returns {boolean}
                 */
                Handsontable.helper.isArray = function(obj){
                  return Array.isArray ? Array.isArray(obj) : Object.prototype.toString.call(obj) == '[object Array]';
                };
                
                Handsontable.helper.pivot = function (arr) {
                  var pivotedArr = [];
                
                  if(!arr || arr.length == 0 || !arr[0] || arr[0].length == 0){
                    return pivotedArr;
                  }
                
                  var rowCount = arr.length;
                  var colCount = arr[0].length;
                
                  for(var i = 0; i < rowCount; i++){
                    for(var j = 0; j < colCount; j++){
                      if(!pivotedArr[j]){
                        pivotedArr[j] = [];
                      }
                
                      pivotedArr[j][i] = arr[i][j];
                    }
                  }
                
                  return pivotedArr;
                
                };
                
                Handsontable.helper.proxy = function (fun, context) {
                  return function () {
                    return fun.apply(context, arguments);
                  };
                };
                
                /**
                 * Factory that produces a function for searching methods (or any properties) which could be defined directly in
                 * table configuration or implicitly, within cell type definition.
                 *
                 * For example: renderer can be defined explicitly using "renderer" property in column configuration or it can be
                 * defined implicitly using "type" property.
                 *
                 * Methods/properties defined explicitly always takes precedence over those defined through "type".
                 *
                 * If the method/property is not found in an object, searching is continued recursively through prototype chain, until
                 * it reaches the Object.prototype.
                 *
                 *
                 * @param methodName {String} name of the method/property to search (i.e. 'renderer', 'validator', 'copyable')
                 * @param allowUndefined {Boolean} [optional] if false, the search is continued if methodName has not been found in cell "type"
                 * @returns {Function}
                 */
                Handsontable.helper.cellMethodLookupFactory = function (methodName, allowUndefined) {
                
                  allowUndefined = typeof allowUndefined == 'undefined' ? true : allowUndefined;
                
                  return function cellMethodLookup (row, col) {
                
                    return (function getMethodFromProperties(properties) {
                
                      if (!properties){
                
                        return;                       //method not found
                
                      }
                      else if (properties.hasOwnProperty(methodName) && properties[methodName]) { //check if it is own and is not empty
                
                        return properties[methodName];  //method defined directly
                
                      } else if (properties.hasOwnProperty('type') && properties.type) { //check if it is own and is not empty
                
                        var type;
                
                        if(typeof properties.type != 'string' ){
                          throw new Error('Cell type must be a string ');
                        }
                
                        type = translateTypeNameToObject(properties.type);
                
                        if (type.hasOwnProperty(methodName)) {
                          return type[methodName]; //method defined in type.
                        } else if (allowUndefined) {
                          return; //method does not defined in type (eg. validator), returns undefined
                        }
                
                      }
                
                      return getMethodFromProperties(Handsontable.helper.getPrototypeOf(properties));
                
                    })(typeof row == 'number' ? this.getCellMeta(row, col) : row);
                
                  };
                
                  function translateTypeNameToObject(typeName) {
                    var type = Handsontable.cellTypes[typeName];
                
                    if(typeof type == 'undefined'){
                      throw new Error('You declared cell type "' + typeName + '" as a string that is not mapped to a known object. Cell type must be an object or a string mapped to an object in Handsontable.cellTypes');
                    }
                
                    return type;
                  }
                
                };
                
                Handsontable.helper.toString = function (obj) {
                  return '' + obj;
                };
                Handsontable.SelectionPoint = function () {
                  this._row = null; //private use intended
                  this._col = null;
                };
                
                Handsontable.SelectionPoint.prototype.exists = function () {
                  return (this._row !== null);
                };
                
                Handsontable.SelectionPoint.prototype.row = function (val) {
                  if (val !== void 0) {
                    this._row = val;
                  }
                  return this._row;
                };
                
                Handsontable.SelectionPoint.prototype.col = function (val) {
                  if (val !== void 0) {
                    this._col = val;
                  }
                  return this._col;
                };
                
                Handsontable.SelectionPoint.prototype.coords = function (coords) {
                  if (coords !== void 0) {
                    this._row = coords.row;
                    this._col = coords.col;
                  }
                  return {
                    row: this._row,
                    col: this._col
                  }
                };
                
                Handsontable.SelectionPoint.prototype.arr = function (arr) {
                  if (arr !== void 0) {
                    this._row = arr[0];
                    this._col = arr[1];
                  }
                  return [this._row, this._col]
                };
                (function (Handsontable) {
                  
                
                  /**
                   * Utility class that gets and saves data from/to the data source using mapping of columns numbers to object property names
                   * TODO refactor arguments of methods getRange, getText to be numbers (not objects)
                   * TODO remove priv, GridSettings from object constructor
                   *
                   * @param instance
                   * @param priv
                   * @param GridSettings
                   * @constructor
                   */
                  Handsontable.DataMap = function (instance, priv, GridSettings) {
                    this.instance = instance;
                    this.priv = priv;
                    this.GridSettings = GridSettings;
                    this.dataSource = this.instance.getSettings().data;
                
                    if (this.dataSource[0]) {
                      this.duckSchema = this.recursiveDuckSchema(this.dataSource[0]);
                    }
                    else {
                      this.duckSchema = {};
                    }
                    this.createMap();
                
                    this.getVars = {}; //used by modifier
                    this.setVars = {}; //used by modifier
                  };
                
                  Handsontable.DataMap.prototype.DESTINATION_RENDERER = 1;
                  Handsontable.DataMap.prototype.DESTINATION_CLIPBOARD_GENERATOR = 2;
                
                  Handsontable.DataMap.prototype.recursiveDuckSchema = function (obj) {
                    var schema;
                    if ($.isPlainObject(obj)) {
                      schema = {};
                      for (var i in obj) {
                        if (obj.hasOwnProperty(i)) {
                          if ($.isPlainObject(obj[i])) {
                            schema[i] = this.recursiveDuckSchema(obj[i]);
                          }
                          else {
                            schema[i] = null;
                          }
                        }
                      }
                    }
                    else {
                      schema = [];
                    }
                    return schema;
                  };
                
                  Handsontable.DataMap.prototype.recursiveDuckColumns = function (schema, lastCol, parent) {
                    var prop, i;
                    if (typeof lastCol === 'undefined') {
                      lastCol = 0;
                      parent = '';
                    }
                    if ($.isPlainObject(schema)) {
                      for (i in schema) {
                        if (schema.hasOwnProperty(i)) {
                          if (schema[i] === null) {
                            prop = parent + i;
                            this.colToPropCache.push(prop);
                            this.propToColCache.set(prop, lastCol);
                
                            lastCol++;
                          }
                          else {
                            lastCol = this.recursiveDuckColumns(schema[i], lastCol, i + '.');
                          }
                        }
                      }
                    }
                    return lastCol;
                  };
                
                  Handsontable.DataMap.prototype.createMap = function () {
                    if (typeof this.getSchema() === "undefined") {
                      throw new Error("trying to create `columns` definition but you didnt' provide `schema` nor `data`");
                    }
                    var i, ilen, schema = this.getSchema();
                    this.colToPropCache = [];
                    this.propToColCache = new MultiMap();
                    var columns = this.instance.getSettings().columns;
                    if (columns) {
                      for (i = 0, ilen = columns.length; i < ilen; i++) {
                
                        if (typeof columns[i].data != 'undefined'){
                          this.colToPropCache[i] = columns[i].data;
                          this.propToColCache.set(columns[i].data, i);
                        }
                
                      }
                    }
                    else {
                      this.recursiveDuckColumns(schema);
                    }
                  };
                
                  Handsontable.DataMap.prototype.colToProp = function (col) {
                    col = Handsontable.PluginHooks.execute(this.instance, 'modifyCol', col);
                    if (this.colToPropCache && typeof this.colToPropCache[col] !== 'undefined') {
                      return this.colToPropCache[col];
                    }
                    else {
                      return col;
                    }
                  };
                
                  Handsontable.DataMap.prototype.propToCol = function (prop) {
                    var col;
                    if (typeof this.propToColCache.get(prop) !== 'undefined') {
                      col = this.propToColCache.get(prop);
                    } else {
                      col = prop;
                    }
                    col = Handsontable.PluginHooks.execute(this.instance, 'modifyCol', col);
                    return col;
                  };
                
                  Handsontable.DataMap.prototype.getSchema = function () {
                    var schema = this.instance.getSettings().dataSchema;
                    if (schema) {
                      if (typeof schema === 'function') {
                        return schema();
                      }
                      return schema;
                    }
                    return this.duckSchema;
                  };
                
                  /**
                   * Creates row at the bottom of the data array
                   * @param {Number} [index] Optional. Index of the row before which the new row will be inserted
                   */
                  Handsontable.DataMap.prototype.createRow = function (index, amount, createdAutomatically) {
                    var row
                      , colCount = this.instance.countCols()
                      , numberOfCreatedRows = 0
                      , currentIndex;
                
                    if (!amount) {
                      amount = 1;
                    }
                
                    if (typeof index !== 'number' || index >= this.instance.countRows()) {
                      index = this.instance.countRows();
                    }
                
                    currentIndex = index;
                    var maxRows = this.instance.getSettings().maxRows;
                    while (numberOfCreatedRows < amount && this.instance.countRows() < maxRows) {
                
                      if (this.instance.dataType === 'array') {
                        row = [];
                        for (var c = 0; c < colCount; c++) {
                          row.push(null);
                        }
                      }
                      else if (this.instance.dataType === 'function') {
                        row = this.instance.getSettings().dataSchema(index);
                      }
                      else {
                        row = $.extend(true, {}, this.getSchema());
                      }
                
                      if (index === this.instance.countRows()) {
                        this.dataSource.push(row);
                      }
                      else {
                        this.dataSource.splice(index, 0, row);
                      }
                
                      numberOfCreatedRows++;
                      currentIndex++;
                    }
                
                
                    this.instance.PluginHooks.run('afterCreateRow', index, numberOfCreatedRows, createdAutomatically);
                    this.instance.forceFullRender = true; //used when data was changed
                
                    return numberOfCreatedRows;
                  };
                
                  /**
                   * Creates col at the right of the data array
                   * @param {Number} [index] Optional. Index of the column before which the new column will be inserted
                   *   * @param {Number} [amount] Optional.
                   */
                  Handsontable.DataMap.prototype.createCol = function (index, amount, createdAutomatically) {
                    if (this.instance.dataType === 'object' || this.instance.getSettings().columns) {
                      throw new Error("Cannot create new column. When data source in an object, " +
                        "you can only have as much columns as defined in first data row, data schema or in the 'columns' setting." +
                        "If you want to be able to add new columns, you have to use array datasource.");
                    }
                    var rlen = this.instance.countRows()
                      , data = this.dataSource
                      , constructor
                      , numberOfCreatedCols = 0
                      , currentIndex;
                
                    if (!amount) {
                      amount = 1;
                    }
                
                    currentIndex = index;
                
                    var maxCols = this.instance.getSettings().maxCols;
                    while (numberOfCreatedCols < amount && this.instance.countCols() < maxCols) {
                      constructor = Handsontable.helper.columnFactory(this.GridSettings, this.priv.columnsSettingConflicts);
                      if (typeof index !== 'number' || index >= this.instance.countCols()) {
                        for (var r = 0; r < rlen; r++) {
                          if (typeof data[r] === 'undefined') {
                            data[r] = [];
                          }
                          data[r].push(null);
                        }
                        // Add new column constructor
                        this.priv.columnSettings.push(constructor);
                      }
                      else {
                        for (var r = 0; r < rlen; r++) {
                          data[r].splice(currentIndex, 0, null);
                        }
                        // Add new column constructor at given index
                        this.priv.columnSettings.splice(currentIndex, 0, constructor);
                      }
                
                      numberOfCreatedCols++;
                      currentIndex++;
                    }
                
                    this.instance.PluginHooks.run('afterCreateCol', index, numberOfCreatedCols, createdAutomatically);
                    this.instance.forceFullRender = true; //used when data was changed
                
                    return numberOfCreatedCols;
                  };
                
                  /**
                   * Removes row from the data array
                   * @param {Number} [index] Optional. Index of the row to be removed. If not provided, the last row will be removed
                   * @param {Number} [amount] Optional. Amount of the rows to be removed. If not provided, one row will be removed
                   */
                  Handsontable.DataMap.prototype.removeRow = function (index, amount) {
                    if (!amount) {
                      amount = 1;
                    }
                    if (typeof index !== 'number') {
                      index = -amount;
                    }
                
                    index = (this.instance.countRows() + index) % this.instance.countRows();
                
                    // We have to map the physical row ids to logical and than perform removing with (possibly) new row id
                    var logicRows = this.physicalRowsToLogical(index, amount);
                
                    var actionWasNotCancelled = this.instance.PluginHooks.execute('beforeRemoveRow', index, amount);
                
                    if (actionWasNotCancelled === false) {
                      return;
                    }
                
                    var data = this.dataSource;
                    var newData = data.filter(function (row, index) {
                      return logicRows.indexOf(index) == -1;
                    });
                
                    data.length = 0;
                    Array.prototype.push.apply(data, newData);
                
                    this.instance.PluginHooks.run('afterRemoveRow', index, amount);
                
                    this.instance.forceFullRender = true; //used when data was changed
                  };
                
                  /**
                   * Removes column from the data array
                   * @param {Number} [index] Optional. Index of the column to be removed. If not provided, the last column will be removed
                   * @param {Number} [amount] Optional. Amount of the columns to be removed. If not provided, one column will be removed
                   */
                  Handsontable.DataMap.prototype.removeCol = function (index, amount) {
                    if (this.instance.dataType === 'object' || this.instance.getSettings().columns) {
                      throw new Error("cannot remove column with object data source or columns option specified");
                    }
                    if (!amount) {
                      amount = 1;
                    }
                    if (typeof index !== 'number') {
                      index = -amount;
                    }
                
                    index = (this.instance.countCols() + index) % this.instance.countCols();
                
                    var actionWasNotCancelled = this.instance.PluginHooks.execute('beforeRemoveCol', index, amount);
                
                    if (actionWasNotCancelled === false) {
                      return;
                    }
                
                    var data = this.dataSource;
                    for (var r = 0, rlen = this.instance.countRows(); r < rlen; r++) {
                      data[r].splice(index, amount);
                    }
                    this.priv.columnSettings.splice(index, amount);
                
                    this.instance.PluginHooks.run('afterRemoveCol', index, amount);
                    this.instance.forceFullRender = true; //used when data was changed
                  };
                
                  /**
                   * Add / removes data from the column
                   * @param {Number} col Index of column in which do you want to do splice.
                   * @param {Number} index Index at which to start changing the array. If negative, will begin that many elements from the end
                   * @param {Number} amount An integer indicating the number of old array elements to remove. If amount is 0, no elements are removed
                   * param {...*} elements Optional. The elements to add to the array. If you don't specify any elements, spliceCol simply removes elements from the array
                   */
                  Handsontable.DataMap.prototype.spliceCol = function (col, index, amount/*, elements...*/) {
                    var elements = 4 <= arguments.length ? [].slice.call(arguments, 3) : [];
                
                    var colData = this.instance.getDataAtCol(col);
                    var removed = colData.slice(index, index + amount);
                    var after = colData.slice(index + amount);
                
                    Handsontable.helper.extendArray(elements, after);
                    var i = 0;
                    while (i < amount) {
                      elements.push(null); //add null in place of removed elements
                      i++;
                    }
                    Handsontable.helper.to2dArray(elements);
                    this.instance.populateFromArray(index, col, elements, null, null, 'spliceCol');
                
                    return removed;
                  };
                
                  /**
                   * Add / removes data from the row
                   * @param {Number} row Index of row in which do you want to do splice.
                   * @param {Number} index Index at which to start changing the array. If negative, will begin that many elements from the end
                   * @param {Number} amount An integer indicating the number of old array elements to remove. If amount is 0, no elements are removed
                   * param {...*} elements Optional. The elements to add to the array. If you don't specify any elements, spliceCol simply removes elements from the array
                   */
                  Handsontable.DataMap.prototype.spliceRow = function (row, index, amount/*, elements...*/) {
                    var elements = 4 <= arguments.length ? [].slice.call(arguments, 3) : [];
                
                    var rowData = this.instance.getDataAtRow(row);
                    var removed = rowData.slice(index, index + amount);
                    var after = rowData.slice(index + amount);
                
                    Handsontable.helper.extendArray(elements, after);
                    var i = 0;
                    while (i < amount) {
                      elements.push(null); //add null in place of removed elements
                      i++;
                    }
                    this.instance.populateFromArray(row, index, [elements], null, null, 'spliceRow');
                
                    return removed;
                  };
                
                  /**
                   * Returns single value from the data array
                   * @param {Number} row
                   * @param {Number} prop
                   */
                  Handsontable.DataMap.prototype.get = function (row, prop) {
                    this.getVars.row = row;
                    this.getVars.prop = prop;
                    this.instance.PluginHooks.run('beforeGet', this.getVars);
                    if (typeof this.getVars.prop === 'string' && this.getVars.prop.indexOf('.') > -1) {
                      var sliced = this.getVars.prop.split(".");
                      var out = this.dataSource[this.getVars.row];
                      if (!out) {
                        return null;
                      }
                      for (var i = 0, ilen = sliced.length; i < ilen; i++) {
                        out = out[sliced[i]];
                        if (typeof out === 'undefined') {
                          return null;
                        }
                      }
                      return out;
                    }
                    else if (typeof this.getVars.prop === 'function') {
                      /**
                       *  allows for interacting with complex structures, for example
                       *  d3/jQuery getter/setter properties:
                       *
                       *    {columns: [{
                         *      data: function(row, value){
                         *        if(arguments.length === 1){
                         *          return row.property();
                         *        }
                         *        row.property(value);
                         *      }
                         *    }]}
                       */
                      return this.getVars.prop(this.dataSource.slice(
                        this.getVars.row,
                        this.getVars.row + 1
                      )[0]);
                    }
                    else {
                      return this.dataSource[this.getVars.row] ? this.dataSource[this.getVars.row][this.getVars.prop] : null;
                    }
                  };
                
                  var copyableLookup = Handsontable.helper.cellMethodLookupFactory('copyable', false);
                
                  /**
                   * Returns single value from the data array (intended for clipboard copy to an external application)
                   * @param {Number} row
                   * @param {Number} prop
                   * @return {String}
                   */
                  Handsontable.DataMap.prototype.getCopyable = function (row, prop) {
                    if (copyableLookup.call(this.instance, row, this.propToCol(prop))) {
                      return this.get(row, prop);
                    }
                    return '';
                  };
                
                  /**
                   * Saves single value to the data array
                   * @param {Number} row
                   * @param {Number} prop
                   * @param {String} value
                   * @param {String} [source] Optional. Source of hook runner.
                   */
                  Handsontable.DataMap.prototype.set = function (row, prop, value, source) {
                    this.setVars.row = row;
                    this.setVars.prop = prop;
                    this.setVars.value = value;
                    this.instance.PluginHooks.run('beforeSet', this.setVars, source || "datamapGet");
                    if (typeof this.setVars.prop === 'string' && this.setVars.prop.indexOf('.') > -1) {
                      var sliced = this.setVars.prop.split(".");
                      var out = this.dataSource[this.setVars.row];
                      for (var i = 0, ilen = sliced.length - 1; i < ilen; i++) {
                        out = out[sliced[i]];
                      }
                      out[sliced[i]] = this.setVars.value;
                    }
                    else if (typeof this.setVars.prop === 'function') {
                      /* see the `function` handler in `get` */
                      this.setVars.prop(this.dataSource.slice(
                        this.setVars.row,
                        this.setVars.row + 1
                      )[0], this.setVars.value);
                    }
                    else {
                      this.dataSource[this.setVars.row][this.setVars.prop] = this.setVars.value;
                    }
                  };
                
                  /**
                   * This ridiculous piece of code maps rows Id that are present in table data to those displayed for user.
                   * The trick is, the physical row id (stored in settings.data) is not necessary the same
                   * as the logical (displayed) row id (e.g. when sorting is applied).
                   */
                  Handsontable.DataMap.prototype.physicalRowsToLogical = function (index, amount) {
                    var totalRows = this.instance.countRows();
                    var physicRow = (totalRows + index) % totalRows;
                    var logicRows = [];
                    var rowsToRemove = amount;
                
                    while (physicRow < totalRows && rowsToRemove) {
                      this.get(physicRow, 0); //this performs an actual mapping and saves the result to getVars
                      logicRows.push(this.getVars.row);
                
                      rowsToRemove--;
                      physicRow++;
                    }
                
                    return logicRows;
                  };
                
                  /**
                   * Clears the data array
                   */
                  Handsontable.DataMap.prototype.clear = function () {
                    for (var r = 0; r < this.instance.countRows(); r++) {
                      for (var c = 0; c < this.instance.countCols(); c++) {
                        this.set(r, this.colToProp(c), '');
                      }
                    }
                  };
                
                  /**
                   * Returns the data array
                   * @return {Array}
                   */
                  Handsontable.DataMap.prototype.getAll = function () {
                    return this.dataSource;
                  };
                
                  /**
                   * Returns data range as array
                   * @param {Object} start Start selection position
                   * @param {Object} end End selection position
                   * @param {Number} destination Destination of datamap.get
                   * @return {Array}
                   */
                  Handsontable.DataMap.prototype.getRange = function (start, end, destination) {
                    var r, rlen, c, clen, output = [], row;
                    var getFn = destination === this.DESTINATION_CLIPBOARD_GENERATOR ? this.getCopyable : this.get;
                    rlen = Math.max(start.row, end.row);
                    clen = Math.max(start.col, end.col);
                    for (r = Math.min(start.row, end.row); r <= rlen; r++) {
                      row = [];
                      for (c = Math.min(start.col, end.col); c <= clen; c++) {
                        row.push(getFn.call(this, r, this.colToProp(c)));
                      }
                      output.push(row);
                    }
                    return output;
                  };
                
                  /**
                   * Return data as text (tab separated columns)
                   * @param {Object} start (Optional) Start selection position
                   * @param {Object} end (Optional) End selection position
                   * @return {String}
                   */
                  Handsontable.DataMap.prototype.getText = function (start, end) {
                    return SheetClip.stringify(this.getRange(start, end, this.DESTINATION_RENDERER));
                  };
                
                  /**
                   * Return data as copyable text (tab separated columns intended for clipboard copy to an external application)
                   * @param {Object} start (Optional) Start selection position
                   * @param {Object} end (Optional) End selection position
                   * @return {String}
                   */
                  Handsontable.DataMap.prototype.getCopyableText = function (start, end) {
                    return SheetClip.stringify(this.getRange(start, end, this.DESTINATION_CLIPBOARD_GENERATOR));
                  };
                
                })(Handsontable);
                
                (function (Handsontable) {
                  
                
                  /*
                    Adds appropriate CSS class to table cell, based on cellProperties
                   */
                  Handsontable.renderers.cellDecorator = function (instance, TD, row, col, prop, value, cellProperties) {
                    if (cellProperties.readOnly) {
                      instance.view.wt.wtDom.addClass(TD, cellProperties.readOnlyCellClassName);
                    }
                
                    if (cellProperties.valid === false && cellProperties.invalidCellClassName) {
                      instance.view.wt.wtDom.addClass(TD, cellProperties.invalidCellClassName);
                    }
                
                    if (!value && cellProperties.placeholder) {
                      instance.view.wt.wtDom.addClass(TD, cellProperties.placeholderCellClassName);
                    }
                  }
                
                })(Handsontable);
                /**
                 * Default text renderer
                 * @param {Object} instance Handsontable instance
                 * @param {Element} TD Table cell where to render
                 * @param {Number} row
                 * @param {Number} col
                 * @param {String|Number} prop Row object property name
                 * @param value Value to render (remember to escape unsafe HTML before inserting to DOM!)
                 * @param {Object} cellProperties Cell properites (shared by cell renderer and editor)
                 */
                (function (Handsontable) {
                  
                
                  var TextRenderer = function (instance, TD, row, col, prop, value, cellProperties) {
                
                    Handsontable.renderers.cellDecorator.apply(this, arguments);
                
                    if (!value && cellProperties.placeholder) {
                      value = cellProperties.placeholder;
                    }
                
                    var escaped = Handsontable.helper.stringify(value);
                
                    if (cellProperties.rendererTemplate) {
                      instance.view.wt.wtDom.empty(TD);
                      var TEMPLATE = document.createElement('TEMPLATE');
                      TEMPLATE.setAttribute('bind', '{{}}');
                      TEMPLATE.innerHTML = cellProperties.rendererTemplate;
                      HTMLTemplateElement.decorate(TEMPLATE);
                      TEMPLATE.model = instance.getDataAtRow(row);
                      TD.appendChild(TEMPLATE);
                    }
                    else {
                      instance.view.wt.wtDom.fastInnerText(TD, escaped); //this is faster than innerHTML. See: https://github.com/warpech/jquery-handsontable/wiki/JavaScript-&-DOM-performance-tips
                    }
                
                  };
                
                  //Handsontable.TextRenderer = TextRenderer; //Left for backward compatibility
                  Handsontable.renderers.TextRenderer = TextRenderer;
                  Handsontable.renderers.registerRenderer('text', TextRenderer);
                
                })(Handsontable);
                (function (Handsontable) {
                
                  var clonableWRAPPER = document.createElement('DIV');
                  clonableWRAPPER.className = 'htAutocompleteWrapper';
                
                  var clonableARROW = document.createElement('DIV');
                  clonableARROW.className = 'htAutocompleteArrow';
                  clonableARROW.appendChild(document.createTextNode('\u25BC'));
                //this is faster than innerHTML. See: https://github.com/warpech/jquery-handsontable/wiki/JavaScript-&-DOM-performance-tips
                
                  var wrapTdContentWithWrapper = function(TD, WRAPPER){
                    WRAPPER.innerHTML = TD.innerHTML;
                    Handsontable.Dom.empty(TD);
                    TD.appendChild(WRAPPER);
                  };
                
                  /**
                   * Autocomplete renderer
                   * @param {Object} instance Handsontable instance
                   * @param {Element} TD Table cell where to render
                   * @param {Number} row
                   * @param {Number} col
                   * @param {String|Number} prop Row object property name
                   * @param value Value to render (remember to escape unsafe HTML before inserting to DOM!)
                   * @param {Object} cellProperties Cell properites (shared by cell renderer and editor)
                   */
                  var AutocompleteRenderer = function (instance, TD, row, col, prop, value, cellProperties) {
                
                    var WRAPPER = clonableWRAPPER.cloneNode(true); //this is faster than createElement
                    var ARROW = clonableARROW.cloneNode(true); //this is faster than createElement
                
                    Handsontable.renderers.TextRenderer(instance, TD, row, col, prop, value, cellProperties);
                
                    TD.appendChild(ARROW);
                    Handsontable.Dom.addClass(TD, 'htAutocomplete');
                
                
                    if (!TD.firstChild) { //http://jsperf.com/empty-node-if-needed
                      //otherwise empty fields appear borderless in demo/renderers.html (IE)
                      TD.appendChild(document.createTextNode('\u00A0')); //\u00A0 equals &nbsp; for a text node
                      //this is faster than innerHTML. See: https://github.com/warpech/jquery-handsontable/wiki/JavaScript-&-DOM-performance-tips
                    }
                
                    if (!instance.acArrowListener) {
                      //not very elegant but easy and fast
                      instance.acArrowListener = function () {
                        instance.view.wt.getSetting('onCellDblClick');
                      };
                
                      instance.rootElement.on('mousedown.htAutocompleteArrow', '.htAutocompleteArrow', instance.acArrowListener); //this way we don't bind event listener to each arrow. We rely on propagation instead
                
                      //We need to unbind the listener after the table has been destroyed
                      instance.addHookOnce('afterDestroy', function () {
                        this.rootElement.off('mousedown.htAutocompleteArrow');
                      });
                
                    }
                  };
                
                  Handsontable.AutocompleteRenderer = AutocompleteRenderer;
                  Handsontable.renderers.AutocompleteRenderer = AutocompleteRenderer;
                  Handsontable.renderers.registerRenderer('autocomplete', AutocompleteRenderer);
                })(Handsontable);
                /**
                 * Checkbox renderer
                 * @param {Object} instance Handsontable instance
                 * @param {Element} TD Table cell where to render
                 * @param {Number} row
                 * @param {Number} col
                 * @param {String|Number} prop Row object property name
                 * @param value Value to render (remember to escape unsafe HTML before inserting to DOM!)
                 * @param {Object} cellProperties Cell properites (shared by cell renderer and editor)
                 */
                (function (Handsontable) {
                
                  
                
                  var clonableINPUT = document.createElement('INPUT');
                  clonableINPUT.className = 'htCheckboxRendererInput';
                  clonableINPUT.type = 'checkbox';
                  clonableINPUT.setAttribute('autocomplete', 'off');
                
                  var CheckboxRenderer = function (instance, TD, row, col, prop, value, cellProperties) {
                
                    if (typeof cellProperties.checkedTemplate === "undefined") {
                      cellProperties.checkedTemplate = true;
                    }
                    if (typeof cellProperties.uncheckedTemplate === "undefined") {
                      cellProperties.uncheckedTemplate = false;
                    }
                
                    instance.view.wt.wtDom.empty(TD); //TODO identify under what circumstances this line can be removed
                
                    var INPUT = clonableINPUT.cloneNode(false); //this is faster than createElement
                
                    if (value === cellProperties.checkedTemplate || value === Handsontable.helper.stringify(cellProperties.checkedTemplate)) {
                      INPUT.checked = true;
                      TD.appendChild(INPUT);
                    }
                    else if (value === cellProperties.uncheckedTemplate || value === Handsontable.helper.stringify(cellProperties.uncheckedTemplate)) {
                      TD.appendChild(INPUT);
                    }
                    else if (value === null) { //default value
                      INPUT.className += ' noValue';
                      TD.appendChild(INPUT);
                    }
                    else {
                      instance.view.wt.wtDom.fastInnerText(TD, '#bad value#'); //this is faster than innerHTML. See: https://github.com/warpech/jquery-handsontable/wiki/JavaScript-&-DOM-performance-tips
                    }
                
                    var $input = $(INPUT);
                
                    if (cellProperties.readOnly) {
                      $input.on('click', function (event) {
                        event.preventDefault();
                      });
                    }
                    else {
                      $input.on('mousedown', function (event) {
                        event.stopPropagation(); //otherwise can confuse cell mousedown handler
                      });
                
                      $input.on('mouseup', function (event) {
                        event.stopPropagation(); //otherwise can confuse cell dblclick handler
                      });
                
                      $input.on('change', function(){
                        if (this.checked) {
                          instance.setDataAtRowProp(row, prop, cellProperties.checkedTemplate);
                        }
                        else {
                          instance.setDataAtRowProp(row, prop, cellProperties.uncheckedTemplate);
                        }
                      });
                    }
                
                    if(!instance.CheckboxRenderer || !instance.CheckboxRenderer.beforeKeyDownHookBound){
                      instance.CheckboxRenderer = {
                        beforeKeyDownHookBound : true
                      };
                
                      instance.addHook('beforeKeyDown', function(event){
                        if(event.keyCode == Handsontable.helper.keyCode.SPACE){
                
                          var selection = instance.getSelected();
                          var cell, checkbox, cellProperties;
                
                          var selStart = {
                            row: Math.min(selection[0], selection[2]),
                            col: Math.min(selection[1], selection[3])
                          };
                
                          var selEnd = {
                            row: Math.max(selection[0], selection[2]),
                            col: Math.max(selection[1], selection[3])
                          };
                
                          for(var row = selStart.row; row <= selEnd.row; row++ ){
                            for(var col = selEnd.col; col <= selEnd.col; col++){
                              cell = instance.getCell(row, col);
                              cellProperties = instance.getCellMeta(row, col);
                
                              checkbox = cell.querySelectorAll('input[type=checkbox]');
                
                              if(checkbox.length > 0 && !cellProperties.readOnly){
                
                                if(!event.isImmediatePropagationStopped()){
                                  event.stopImmediatePropagation();
                                  event.preventDefault();
                                }
                
                                for(var i = 0, len = checkbox.length; i < len; i++){
                                  checkbox[i].checked = !checkbox[i].checked;
                                  $(checkbox[i]).trigger('change');
                                }
                
                              }
                
                            }
                          }
                        }
                      });
                    }
                
                  };
                
                  Handsontable.CheckboxRenderer = CheckboxRenderer;
                  Handsontable.renderers.CheckboxRenderer = CheckboxRenderer;
                  Handsontable.renderers.registerRenderer('checkbox', CheckboxRenderer);
                
                })(Handsontable);
                /**
                 * Numeric cell renderer
                 * @param {Object} instance Handsontable instance
                 * @param {Element} TD Table cell where to render
                 * @param {Number} row
                 * @param {Number} col
                 * @param {String|Number} prop Row object property name
                 * @param value Value to render (remember to escape unsafe HTML before inserting to DOM!)
                 * @param {Object} cellProperties Cell properites (shared by cell renderer and editor)
                 */
                (function (Handsontable) {
                
                  
                
                  var NumericRenderer = function (instance, TD, row, col, prop, value, cellProperties) {
                    if (Handsontable.helper.isNumeric(value)) {
                      if (typeof cellProperties.language !== 'undefined') {
                        numeral.language(cellProperties.language)
                      }
                      value = numeral(value).format(cellProperties.format || '0'); //docs: http://numeraljs.com/
                      instance.view.wt.wtDom.addClass(TD, 'htNumeric');
                    }
                    Handsontable.renderers.TextRenderer(instance, TD, row, col, prop, value, cellProperties);
                  };
                
                  Handsontable.NumericRenderer = NumericRenderer; //Left for backward compatibility with versions prior 0.10.0
                  Handsontable.renderers.NumericRenderer = NumericRenderer;
                  Handsontable.renderers.registerRenderer('numeric', NumericRenderer);
                
                })(Handsontable);
                (function(Handosntable){
                
                  
                
                  var PasswordRenderer = function (instance, TD, row, col, prop, value, cellProperties) {
                    Handsontable.renderers.TextRenderer.apply(this, arguments);
                
                    value = TD.innerHTML;
                
                    var hash;
                    var hashLength = cellProperties.hashLength || value.length;
                    var hashSymbol = cellProperties.hashSymbol || '*';
                
                    for( hash = ''; hash.split(hashSymbol).length - 1 < hashLength; hash += hashSymbol);
                
                    instance.view.wt.wtDom.fastInnerHTML(TD, hash);
                
                  };
                
                  Handosntable.PasswordRenderer = PasswordRenderer;
                  Handosntable.renderers.PasswordRenderer = PasswordRenderer;
                  Handosntable.renderers.registerRenderer('password', PasswordRenderer);
                
                })(Handsontable);
                (function (Handsontable) {
                
                  function HtmlRenderer(instance, TD, row, col, prop, value, cellProperties){
                
                    Handsontable.renderers.cellDecorator.apply(this, arguments);
                
                    Handsontable.Dom.fastInnerHTML(TD, value);
                  }
                
                  Handsontable.renderers.registerRenderer('html', HtmlRenderer);
                  Handsontable.renderers.HtmlRenderer = HtmlRenderer;
                
                })(Handsontable);
                
                (function (Handsontable) {
                  
                
                  Handsontable.EditorState = {
                    VIRGIN: 'STATE_VIRGIN', //before editing
                    EDITING: 'STATE_EDITING',
                    WAITING: 'STATE_WAITING', //waiting for async validation
                    FINISHED: 'STATE_FINISHED'
                  };
                
                  function BaseEditor(instance) {
                    this.instance = instance;
                    this.state = Handsontable.EditorState.VIRGIN;
                
                    this._opened = false;
                    this._closeCallback = null;
                
                    this.init();
                  }
                
                  BaseEditor.prototype._fireCallbacks = function(result) {
                    if(this._closeCallback){
                      this._closeCallback(result);
                      this._closeCallback = null;
                    }
                
                  }
                
                  BaseEditor.prototype.init = function(){};
                
                  BaseEditor.prototype.getValue = function(){
                    throw Error('Editor getValue() method unimplemented');
                  };
                
                  BaseEditor.prototype.setValue = function(newValue){
                    throw Error('Editor setValue() method unimplemented');
                  };
                
                  BaseEditor.prototype.open = function(){
                    throw Error('Editor open() method unimplemented');
                  };
                
                  BaseEditor.prototype.close = function(){
                    throw Error('Editor close() method unimplemented');
                  };
                
                  BaseEditor.prototype.prepare = function(row, col, prop, td, originalValue, cellProperties){
                    this.TD = td;
                    this.row = row;
                    this.col = col;
                    this.prop = prop;
                    this.originalValue = originalValue;
                    this.cellProperties = cellProperties;
                
                    this.state = Handsontable.EditorState.VIRGIN;
                  };
                
                  BaseEditor.prototype.extend = function(){
                    var baseClass = this.constructor;
                    function Editor(){
                      baseClass.apply(this, arguments);
                    }
                
                    function inherit(Child, Parent){
                      function Bridge() {
                      }
                
                      Bridge.prototype = Parent.prototype;
                      Child.prototype = new Bridge();
                      Child.prototype.constructor = Child;
                      return Child;
                    }
                
                    return inherit(Editor, baseClass);
                  };
                
                  BaseEditor.prototype.saveValue = function (val, ctrlDown) {
                    if (ctrlDown) { //if ctrl+enter and multiple cells selected, behave like Excel (finish editing and apply to all cells)
                      var sel = this.instance.getSelected();
                      this.instance.populateFromArray(sel[0], sel[1], val, sel[2], sel[3], 'edit');
                    }
                    else {
                      this.instance.populateFromArray(this.row, this.col, val, null, null, 'edit');
                    }
                  };
                
                  BaseEditor.prototype.beginEditing = function(initialValue){
                    if (this.state != Handsontable.EditorState.VIRGIN) {
                      return;
                    }
                
                    this.instance.view.scrollViewport({row: this.row, col: this.col});
                    this.instance.view.render();
                
                    this.state = Handsontable.EditorState.EDITING;
                
                    initialValue = typeof initialValue == 'string' ? initialValue : this.originalValue;
                
                    this.setValue(Handsontable.helper.stringify(initialValue));
                
                    this.open();
                    this._opened = true;
                    this.focus();
                
                    this.instance.view.render(); //only rerender the selections (FillHandle should disappear when beginediting is triggered)
                  };
                
                  BaseEditor.prototype.finishEditing = function (restoreOriginalValue, ctrlDown, callback) {
                
                    if (callback) {
                      var previousCloseCallback = this._closeCallback;
                      this._closeCallback = function (result) {
                        if(previousCloseCallback){
                          previousCloseCallback(result);
                        }
                
                        callback(result);
                      };
                    }
                
                    if (this.isWaiting()) {
                      return;
                    }
                
                    if (this.state == Handsontable.EditorState.VIRGIN) {
                      var that = this;
                      setTimeout(function () {
                        that._fireCallbacks(true);
                      });
                      return;
                    }
                
                    if (this.state == Handsontable.EditorState.EDITING) {
                
                      if (restoreOriginalValue) {
                
                        this.cancelChanges();
                        return;
                
                      }
                
                
                      var val = [
                        [String.prototype.trim.call(this.getValue())] //String.prototype.trim is defined in Walkontable polyfill.js
                      ];
                
                      this.state = Handsontable.EditorState.WAITING;
                
                      this.saveValue(val, ctrlDown);
                
                      if(this.instance.getCellValidator(this.cellProperties)){
                        var that = this;
                        this.instance.addHookOnce('afterValidate', function (result) {
                          that.state = Handsontable.EditorState.FINISHED;
                          that.discardEditor(result);
                        });
                      } else {
                        this.state = Handsontable.EditorState.FINISHED;
                        this.discardEditor(true);
                      }
                
                    }
                  };
                
                  BaseEditor.prototype.cancelChanges = function () {
                    this.state = Handsontable.EditorState.FINISHED;
                    this.discardEditor();
                  };
                
                  BaseEditor.prototype.discardEditor = function (result) {
                    if (this.state !== Handsontable.EditorState.FINISHED) {
                      return;
                    }
                
                    if (result === false && this.cellProperties.allowInvalid !== true) { //validator was defined and failed
                
                      this.instance.selectCell(this.row, this.col);
                      this.focus();
                
                      this.state = Handsontable.EditorState.EDITING;
                
                      this._fireCallbacks(false);
                    }
                    else {
                      this.close();
                      this._opened = false;
                
                      this.state = Handsontable.EditorState.VIRGIN;
                
                      this._fireCallbacks(true);
                    }
                
                  };
                
                  BaseEditor.prototype.isOpened = function(){
                    return this._opened;
                  };
                
                  BaseEditor.prototype.isWaiting = function () {
                    return this.state === Handsontable.EditorState.WAITING;
                  };
                
                  Handsontable.editors.BaseEditor = BaseEditor;
                
                })(Handsontable);
                
                (function(Handsontable){
                  var TextEditor = Handsontable.editors.BaseEditor.prototype.extend();
                
                  TextEditor.prototype.init = function(){
                    this.createElements();
                    this.bindEvents();
                  };
                
                  TextEditor.prototype.getValue = function(){
                    return this.TEXTAREA.value
                  };
                
                  TextEditor.prototype.setValue = function(newValue){
                    this.TEXTAREA.value = newValue;
                  };
                
                  var onBeforeKeyDown =  function onBeforeKeyDown(event){
                
                    var instance = this;
                    var that = instance.getActiveEditor();
                
                    var keyCodes = Handsontable.helper.keyCode;
                    var ctrlDown = (event.ctrlKey || event.metaKey) && !event.altKey; //catch CTRL but not right ALT (which in some systems triggers ALT+CTRL)
                
                
                    //Process only events that have been fired in the editor
                    if (event.target !== that.TEXTAREA || event.isImmediatePropagationStopped()){
                      return;
                    }
                
                    if (event.keyCode === 17 || event.keyCode === 224 || event.keyCode === 91 || event.keyCode === 93) {
                      //when CTRL or its equivalent is pressed and cell is edited, don't prepare selectable text in textarea
                      event.stopImmediatePropagation();
                      return;
                    }
                
                    switch (event.keyCode) {
                      case keyCodes.ARROW_RIGHT:
                        if (that.wtDom.getCaretPosition(that.TEXTAREA) !== that.TEXTAREA.value.length) {
                          event.stopImmediatePropagation();
                        }
                        break;
                
                      case keyCodes.ARROW_LEFT: /* arrow left */
                        if (that.wtDom.getCaretPosition(that.TEXTAREA) !== 0) {
                          event.stopImmediatePropagation();
                        }
                        break;
                
                      case keyCodes.ENTER:
                        var selected = that.instance.getSelected();
                        var isMultipleSelection = !(selected[0] === selected[2] && selected[1] === selected[3]);
                        if ((ctrlDown && !isMultipleSelection) || event.altKey) { //if ctrl+enter or alt+enter, add new line
                          if(that.isOpened()){
                            that.setValue(that.getValue() + '\n');
                            that.focus();
                          } else {
                            that.beginEditing(that.originalValue + '\n')
                          }
                          event.stopImmediatePropagation();
                        }
                        event.preventDefault(); //don't add newline to field
                        break;
                
                      case keyCodes.A:
                      case keyCodes.X:
                      case keyCodes.C:
                      case keyCodes.V:
                        if(ctrlDown){
                          event.stopImmediatePropagation(); //CTRL+A, CTRL+C, CTRL+V, CTRL+X should only work locally when cell is edited (not in table context)
                          break;
                        }
                      case keyCodes.BACKSPACE:
                      case keyCodes.DELETE:
                      case keyCodes.HOME:
                      case keyCodes.END:
                        event.stopImmediatePropagation(); //backspace, delete, home, end should only work locally when cell is edited (not in table context)
                        break;
                    }
                
                  };
                
                  TextEditor.prototype.open = function(){
                    this.refreshDimensions(); //need it instantly, to prevent https://github.com/warpech/jquery-handsontable/issues/348
                
                    this.instance.addHook('beforeKeyDown', onBeforeKeyDown);
                  };
                
                  TextEditor.prototype.close = function(){
                    this.textareaParentStyle.display = 'none';
                
                    if (document.activeElement === this.TEXTAREA) {
                      this.instance.listen(); //don't refocus the table if user focused some cell outside of HT on purpose
                    }
                
                    this.instance.removeHook('beforeKeyDown', onBeforeKeyDown);
                  };
                
                  TextEditor.prototype.focus = function(){
                    this.TEXTAREA.focus();
                    this.wtDom.setCaretPosition(this.TEXTAREA, this.TEXTAREA.value.length);
                  };
                
                  TextEditor.prototype.createElements = function () {
                    this.$body = $(document.body);
                    this.wtDom = new WalkontableDom();
                
                    this.TEXTAREA = document.createElement('TEXTAREA');
                    this.$textarea = $(this.TEXTAREA);
                
                    this.wtDom.addClass(this.TEXTAREA, 'handsontableInput');
                
                    this.textareaStyle = this.TEXTAREA.style;
                    this.textareaStyle.width = 0;
                    this.textareaStyle.height = 0;
                
                    this.TEXTAREA_PARENT = document.createElement('DIV');
                    this.wtDom.addClass(this.TEXTAREA_PARENT, 'handsontableInputHolder');
                
                    this.textareaParentStyle = this.TEXTAREA_PARENT.style;
                    this.textareaParentStyle.top = 0;
                    this.textareaParentStyle.left = 0;
                    this.textareaParentStyle.display = 'none';
                
                    this.TEXTAREA_PARENT.appendChild(this.TEXTAREA);
                
                    this.instance.rootElement[0].appendChild(this.TEXTAREA_PARENT);
                
                    var that = this;
                    Handsontable.PluginHooks.add('afterRender', function () {
                      that.instance.registerTimeout('refresh_editor_dimensions', function () {
                        that.refreshDimensions();
                      }, 0);
                    });
                  };
                
                  TextEditor.prototype.refreshDimensions = function () {
                    if (this.state !== Handsontable.EditorState.EDITING) {
                      return;
                    }
                
                    ///start prepare textarea position
                    this.TD = this.instance.getCell(this.row, this.col);
                    if (!this.TD) {
                      //TD is outside of the viewport. Otherwise throws exception when scrolling the table while a cell is edited
                      return;
                    }
                    var $td = $(this.TD); //because old td may have been scrolled out with scrollViewport
                    var currentOffset = this.wtDom.offset(this.TD);
                    var containerOffset = this.wtDom.offset(this.instance.rootElement[0]);
                    var scrollTop = this.instance.rootElement.scrollTop();
                    var scrollLeft = this.instance.rootElement.scrollLeft();
                    var editTop = currentOffset.top - containerOffset.top + scrollTop - 1;
                    var editLeft = currentOffset.left - containerOffset.left + scrollLeft - 1;
                
                    var settings = this.instance.getSettings();
                    var rowHeadersCount = settings.rowHeaders === false ? 0 : 1;
                    var colHeadersCount = settings.colHeaders === false ? 0 : 1;
                
                    if (editTop < 0) {
                      editTop = 0;
                    }
                    if (editLeft < 0) {
                      editLeft = 0;
                    }
                
                    if (rowHeadersCount > 0 && parseInt($td.css('border-top-width'), 10) > 0) {
                      editTop += 1;
                    }
                    if (colHeadersCount > 0 && parseInt($td.css('border-left-width'), 10) > 0) {
                      editLeft += 1;
                    }
                
                    this.textareaParentStyle.top = editTop + 'px';
                    this.textareaParentStyle.left = editLeft + 'px';
                    ///end prepare textarea position
                
                    var width = $td.width()
                      , maxWidth = this.instance.view.maximumVisibleElementWidth(editLeft) - 10 //10 is TEXTAREAs border and padding
                      , height = $td.outerHeight() - 4
                      , maxHeight = this.instance.view.maximumVisibleElementHeight(editTop) - 5; //10 is TEXTAREAs border and padding
                
                    if (parseInt($td.css('border-top-width'), 10) > 0) {
                      height -= 1;
                    }
                    if (parseInt($td.css('border-left-width'), 10) > 0) {
                      if (rowHeadersCount > 0) {
                        width -= 1;
                      }
                    }
                
                    //in future may change to pure JS http://stackoverflow.com/questions/454202/creating-a-textarea-with-auto-resize
                    this.$textarea.autoResize({
                      minHeight: Math.min(height, maxHeight),
                      maxHeight: maxHeight, //TEXTAREA should never be wider than visible part of the viewport (should not cover the scrollbar)
                      minWidth: Math.min(width, maxWidth),
                      maxWidth: maxWidth, //TEXTAREA should never be wider than visible part of the viewport (should not cover the scrollbar)
                      animate: false,
                      extraSpace: 0
                    });
                
                    this.textareaParentStyle.display = 'block';
                  };
                
                  TextEditor.prototype.bindEvents = function () {
                    this.$textarea.on('cut.editor', function (event) {
                      event.stopPropagation();
                    });
                
                    this.$textarea.on('paste.editor', function (event) {
                      event.stopPropagation();
                    });
                  };
                
                  Handsontable.editors.TextEditor = TextEditor;
                  Handsontable.editors.registerEditor('text', Handsontable.editors.TextEditor);
                
                })(Handsontable);
                
                (function(Handsontable){
                
                  //Blank editor, because all the work is done by renderer
                  var CheckboxEditor = Handsontable.editors.BaseEditor.prototype.extend();
                
                  CheckboxEditor.prototype.beginEditing = function () {
                    var checkbox = this.TD.querySelector('input[type="checkbox"]');
                
                    if (checkbox) {
                      $(checkbox).trigger('click');
                    }
                
                  };
                
                  CheckboxEditor.prototype.finishEditing = function () {};
                
                  CheckboxEditor.prototype.init = function () {};
                  CheckboxEditor.prototype.open = function () {};
                  CheckboxEditor.prototype.close = function () {};
                  CheckboxEditor.prototype.getValue = function () {};
                  CheckboxEditor.prototype.setValue = function () {};
                  CheckboxEditor.prototype.focus = function () {};
                
                  Handsontable.editors.CheckboxEditor = CheckboxEditor;
                  Handsontable.editors.registerEditor('checkbox', CheckboxEditor);
                
                })(Handsontable);
                
                
                (function (Handsontable) {
                  var DateEditor = Handsontable.editors.TextEditor.prototype.extend();
                
                  DateEditor.prototype.init = function () {
                    if (!$.datepicker) {
                      throw new Error("jQuery UI Datepicker dependency not found. Did you forget to include jquery-ui.custom.js or its substitute?");
                    }
                
                    Handsontable.editors.TextEditor.prototype.init.apply(this, arguments);
                
                    this.isCellEdited = false;
                    var that = this;
                
                    this.instance.addHook('afterDestroy', function () {
                      that.destroyElements();
                    })
                
                  };
                
                  DateEditor.prototype.createElements = function () {
                    Handsontable.editors.TextEditor.prototype.createElements.apply(this, arguments);
                
                    this.datePicker = document.createElement('DIV');
                    this.instance.view.wt.wtDom.addClass(this.datePicker, 'htDatepickerHolder');
                    this.datePickerStyle = this.datePicker.style;
                    this.datePickerStyle.position = 'absolute';
                    this.datePickerStyle.top = 0;
                    this.datePickerStyle.left = 0;
                    this.datePickerStyle.zIndex = 99;
                    document.body.appendChild(this.datePicker);
                    this.$datePicker = $(this.datePicker);
                
                    var that = this;
                    var defaultOptions = {
                      dateFormat: "yy-mm-dd",
                      showButtonPanel: true,
                      changeMonth: true,
                      changeYear: true,
                      onSelect: function (dateStr) {
                        that.setValue(dateStr);
                        that.finishEditing(false);
                      }
                    };
                    this.$datePicker.datepicker(defaultOptions);
                
                    /**
                     * Prevent recognizing clicking on jQuery Datepicker as clicking outside of table
                     */
                    this.$datePicker.on('mousedown', function (event) {
                      event.stopPropagation();
                    });
                
                    this.hideDatepicker();
                  };
                
                  DateEditor.prototype.destroyElements = function () {
                    this.$datePicker.datepicker('destroy');
                    this.$datePicker.remove();
                  };
                
                  DateEditor.prototype.open = function () {
                    Handsontable.editors.TextEditor.prototype.open.call(this);
                    this.showDatepicker();
                  };
                
                  DateEditor.prototype.finishEditing = function (isCancelled, ctrlDown) {
                    this.hideDatepicker();
                    Handsontable.editors.TextEditor.prototype.finishEditing.apply(this, arguments);
                  };
                
                  DateEditor.prototype.showDatepicker = function () {
                    var $td = $(this.TD);
                    var offset = $td.offset();
                    this.datePickerStyle.top = (offset.top + $td.height()) + 'px';
                    this.datePickerStyle.left = offset.left + 'px';
                
                    var dateOptions = {
                      defaultDate: this.originalValue || void 0
                    };
                    $.extend(dateOptions, this.cellProperties);
                    this.$datePicker.datepicker("option", dateOptions);
                    if (this.originalValue) {
                      this.$datePicker.datepicker("setDate", this.originalValue);
                    }
                    this.datePickerStyle.display = 'block';
                  };
                
                  DateEditor.prototype.hideDatepicker = function () {
                    this.datePickerStyle.display = 'none';
                  };
                
                
                  Handsontable.editors.DateEditor = DateEditor;
                  Handsontable.editors.registerEditor('date', DateEditor);
                })(Handsontable);
                /**
                 * This is inception. Using Handsontable as Handsontable editor
                 */
                (function (Handsontable) {
                  
                
                  var HandsontableEditor = Handsontable.editors.TextEditor.prototype.extend();
                
                  HandsontableEditor.prototype.createElements = function () {
                    Handsontable.editors.TextEditor.prototype.createElements.apply(this, arguments);
                
                    var DIV = document.createElement('DIV');
                    DIV.className = 'handsontableEditor';
                    this.TEXTAREA_PARENT.appendChild(DIV);
                
                    this.$htContainer = $(DIV);
                    this.$htContainer.handsontable();
                  };
                
                  HandsontableEditor.prototype.prepare = function (td, row, col, prop, value, cellProperties) {
                
                    Handsontable.editors.TextEditor.prototype.prepare.apply(this, arguments);
                
                    var parent = this;
                
                    var options = {
                      startRows: 0,
                      startCols: 0,
                      minRows: 0,
                      minCols: 0,
                      className: 'listbox',
                      copyPaste: false,
                      cells: function () {
                        return {
                          readOnly: true
                        }
                      },
                      fillHandle: false,
                      afterOnCellMouseDown: function () {
                        var value = this.getValue();
                        if (value !== void 0) { //if the value is undefined then it means we don't want to set the value
                          parent.setValue(value);
                        }
                        parent.instance.destroyEditor();
                      },
                      beforeOnKeyDown: function (event) {
                        var instance = this;
                
                        switch (event.keyCode) {
                          case Handsontable.helper.keyCode.ESCAPE:
                            parent.instance.destroyEditor(true);
                            event.stopImmediatePropagation();
                            event.preventDefault();
                            break;
                
                          case Handsontable.helper.keyCode.ENTER: //enter
                            var sel = instance.getSelected();
                            var value = this.getDataAtCell(sel[0], sel[1]);
                            if (value !== void 0) { //if the value is undefined then it means we don't want to set the value
                              parent.setValue(value);
                            }
                            parent.instance.destroyEditor();
                            break;
                
                          case Handsontable.helper.keyCode.ARROW_UP:
                            if (instance.getSelected() && instance.getSelected()[0] == 0 && !parent.cellProperties.strict){
                              instance.deselectCell();
                              parent.instance.listen();
                              parent.focus();
                              event.preventDefault();
                              event.stopImmediatePropagation();
                            }
                            break;
                        }
                      }
                    };
                
                    if (this.cellProperties.handsontable) {
                      options = $.extend(options, cellProperties.handsontable);
                    }
                    this.$htContainer.handsontable('destroy');
                    this.$htContainer.handsontable(options);
                  };
                
                  var onBeforeKeyDown = function (event) {
                
                    if (event.isImmediatePropagationStopped()) {
                      return;
                    }
                
                    var editor = this.getActiveEditor();
                    var innerHOT = editor.$htContainer.handsontable('getInstance');
                
                    if (event.keyCode == Handsontable.helper.keyCode.ARROW_DOWN) {
                
                      if (!innerHOT.getSelected()){
                        innerHOT.selectCell(0, 0);
                      } else {
                        var selectedRow = innerHOT.getSelected()[0];
                        var rowToSelect = selectedRow < innerHOT.countRows() - 1 ? selectedRow + 1 : selectedRow;
                
                        innerHOT.selectCell(rowToSelect, 0);
                      }
                
                      event.preventDefault();
                      event.stopImmediatePropagation();
                    }
                
                  };
                
                  HandsontableEditor.prototype.open = function () {
                
                    this.instance.addHook('beforeKeyDown', onBeforeKeyDown);
                
                    Handsontable.editors.TextEditor.prototype.open.apply(this, arguments);
                
                    this.$htContainer.handsontable('render');
                
                    if (this.cellProperties.strict) {
                      this.$htContainer.handsontable('selectCell', 0, 0);
                      this.$textarea[0].style.visibility = 'hidden';
                    } else {
                      this.$htContainer.handsontable('deselectCell');
                      this.$textarea[0].style.visibility = 'visible';
                    }
                
                    this.wtDom.setCaretPosition(this.$textarea[0], 0, this.$textarea[0].value.length);
                
                  };
                
                  HandsontableEditor.prototype.close = function () {
                
                    this.instance.removeHook('beforeKeyDown', onBeforeKeyDown);
                    this.instance.listen();
                
                    Handsontable.editors.TextEditor.prototype.close.apply(this, arguments);
                  };
                
                  HandsontableEditor.prototype.focus = function () {
                
                    this.instance.listen();
                
                    Handsontable.editors.TextEditor.prototype.focus.apply(this, arguments);
                  };
                
                  HandsontableEditor.prototype.beginEditing = function (initialValue) {
                    var onBeginEditing = this.instance.getSettings().onBeginEditing;
                    if (onBeginEditing && onBeginEditing() === false) {
                      return;
                    }
                
                    Handsontable.editors.TextEditor.prototype.beginEditing.apply(this, arguments);
                
                  };
                
                  HandsontableEditor.prototype.finishEditing = function (isCancelled, ctrlDown) {
                    if (this.$htContainer.handsontable('isListening')) { //if focus is still in the HOT editor
                      this.instance.listen(); //return the focus to the parent HOT instance
                    }
                
                    if (this.$htContainer.handsontable('getSelected')) {
                      var value = this.$htContainer.handsontable('getInstance').getValue();
                      if (value !== void 0) { //if the value is undefined then it means we don't want to set the value
                        this.setValue(value);
                      }
                    }
                
                    return Handsontable.editors.TextEditor.prototype.finishEditing.apply(this, arguments);
                  };
                
                  Handsontable.editors.HandsontableEditor = HandsontableEditor;
                  Handsontable.editors.registerEditor('handsontable', HandsontableEditor);
                
                })(Handsontable);
                
                
                
                
                
                
                (function (Handsontable) {
                  var AutocompleteEditor = Handsontable.editors.HandsontableEditor.prototype.extend();
                
                  AutocompleteEditor.prototype.init = function () {
                    Handsontable.editors.HandsontableEditor.prototype.init.apply(this, arguments);
                
                    this.query = null;
                    this.choices = [];
                  };
                
                  AutocompleteEditor.prototype.createElements = function(){
                    Handsontable.editors.HandsontableEditor.prototype.createElements.apply(this, arguments);
                
                    this.$htContainer.addClass('autocompleteEditor');
                
                  };
                
                  AutocompleteEditor.prototype.bindEvents = function(){
                
                    var that = this;
                    this.$textarea.on('keydown.autocompleteEditor', function(event){
                      if(!Handsontable.helper.isMetaKey(event.keyCode) || [Handsontable.helper.keyCode.BACKSPACE, Handsontable.helper.keyCode.DELETE].indexOf(event.keyCode) != -1){
                        setTimeout(function () {
                          that.queryChoices(that.$textarea.val());
                        });
                      } else if (event.keyCode == Handsontable.helper.keyCode.ENTER && that.cellProperties.strict !== true){
                        that.$htContainer.handsontable('deselectCell');
                      }
                
                    });
                
                    this.$htContainer.on('mouseleave', function () {
                      if(that.cellProperties.strict === true){
                        that.highlightBestMatchingChoice();
                      }
                    });
                
                    this.$htContainer.on('mouseenter', function () {
                      that.$htContainer.handsontable('deselectCell');
                    });
                
                    Handsontable.editors.HandsontableEditor.prototype.bindEvents.apply(this, arguments);
                
                  };
                
                  var onBeforeKeyDownInner;
                
                  AutocompleteEditor.prototype.open = function () {
                
                    Handsontable.editors.HandsontableEditor.prototype.open.apply(this, arguments);
                
                    this.$textarea[0].style.visibility = 'visible';
                    this.focus();
                
                    var choicesListHot =  this.$htContainer.handsontable('getInstance');
                    var that = this;
                    choicesListHot.updateSettings({
                      'colWidths': [this.wtDom.outerWidth(this.TEXTAREA) - 2],
                      afterRenderer: function (TD, row, col, prop, value) {
                        var caseSensitive = this.getCellMeta(row, col).filteringCaseSensitive === true;
                        var indexOfMatch =  caseSensitive ? value.indexOf(this.query) : value.toLowerCase().indexOf(that.query.toLowerCase());
                
                        if(indexOfMatch != -1){
                          var match = value.substr(indexOfMatch, that.query.length);
                          TD.innerHTML = value.replace(match, '<strong>' + match + '</strong>');
                        }
                      }
                    });
                
                    onBeforeKeyDownInner = function (event) {
                      var instance = this;
                
                      if (event.keyCode == Handsontable.helper.keyCode.ARROW_UP){
                        if (instance.getSelected() && instance.getSelected()[0] == 0){
                
                          if(!parent.cellProperties.strict){
                            instance.deselectCell();
                          }
                
                          parent.instance.listen();
                          parent.focus();
                          event.preventDefault();
                          event.stopImmediatePropagation();
                        }
                      }
                
                    };
                
                    choicesListHot.addHook('beforeKeyDown', onBeforeKeyDownInner);
                
                    this.queryChoices(this.TEXTAREA.value);
                
                
                  };
                
                  AutocompleteEditor.prototype.close = function () {
                
                    this.$htContainer.handsontable('getInstance').removeHook('beforeKeyDown', onBeforeKeyDownInner);
                
                    Handsontable.editors.HandsontableEditor.prototype.close.apply(this, arguments);
                  };
                
                  AutocompleteEditor.prototype.queryChoices = function(query){
                
                    this.query = query;
                
                    if (typeof this.cellProperties.source == 'function'){
                      var that = this;
                
                      this.cellProperties.source(query, function(choices){
                        that.updateChoicesList(choices)
                      });
                
                    } else if (Handsontable.helper.isArray(this.cellProperties.source)) {
                
                      var choices;
                
                      if(!query || this.cellProperties.filter === false){
                        choices = this.cellProperties.source;
                      } else {
                
                        var filteringCaseSensitive = this.cellProperties.filteringCaseSensitive === true;
                        var lowerCaseQuery = query.toLowerCase();
                
                        choices = this.cellProperties.source.filter(function(choice){
                
                          if (filteringCaseSensitive) {
                            return choice.indexOf(query) != -1;
                          } else {
                            return choice.toLowerCase().indexOf(lowerCaseQuery) != -1;
                          }
                
                        });
                      }
                
                      this.updateChoicesList(choices)
                
                    } else {
                      this.updateChoicesList([]);
                    }
                
                  };
                
                  AutocompleteEditor.prototype.updateChoicesList = function (choices) {
                
                     this.choices = choices;
                
                    this.$htContainer.handsontable('loadData', Handsontable.helper.pivot([choices]));
                
                    if(this.cellProperties.strict === true){
                      this.highlightBestMatchingChoice();
                    }
                
                    this.focus();
                  };
                
                  AutocompleteEditor.prototype.highlightBestMatchingChoice = function () {
                    var bestMatchingChoice = this.findBestMatchingChoice();
                
                    if ( typeof bestMatchingChoice == 'undefined' && this.cellProperties.allowInvalid === false){
                      bestMatchingChoice = 0;
                    }
                
                    if(typeof bestMatchingChoice == 'undefined'){
                      this.$htContainer.handsontable('deselectCell');
                    } else {
                      this.$htContainer.handsontable('selectCell', bestMatchingChoice, 0);
                    }
                
                  };
                
                  AutocompleteEditor.prototype.findBestMatchingChoice = function(){
                    var bestMatch = {};
                    var valueLength = this.getValue().length;
                    var currentItem;
                    var indexOfValue;
                    var charsLeft;
                
                
                    for(var i = 0, len = this.choices.length; i < len; i++){
                      currentItem = this.choices[i];
                
                      if(valueLength > 0){
                        indexOfValue = currentItem.indexOf(this.getValue())
                      } else {
                        indexOfValue = currentItem === this.getValue() ? 0 : -1;
                      }
                
                      if(indexOfValue == -1) continue;
                
                      charsLeft =  currentItem.length - indexOfValue - valueLength;
                
                      if( typeof bestMatch.indexOfValue == 'undefined'
                        || bestMatch.indexOfValue > indexOfValue
                        || ( bestMatch.indexOfValue == indexOfValue && bestMatch.charsLeft > charsLeft ) ){
                
                        bestMatch.indexOfValue = indexOfValue;
                        bestMatch.charsLeft = charsLeft;
                        bestMatch.index = i;
                
                      }
                
                    }
                
                
                    return bestMatch.index;
                  };
                
                
                  Handsontable.editors.AutocompleteEditor = AutocompleteEditor;
                  Handsontable.editors.registerEditor('autocomplete', AutocompleteEditor);
                
                })(Handsontable);
                
                (function(Handsontable){
                
                  var PasswordEditor = Handsontable.editors.TextEditor.prototype.extend();
                  var wtDom = new WalkontableDom();
                
                  PasswordEditor.prototype.createElements = function () {
                    Handsontable.editors.TextEditor.prototype.createElements.apply(this, arguments);
                
                    this.TEXTAREA = document.createElement('input');
                    this.TEXTAREA.setAttribute('type', 'password');
                    this.TEXTAREA.className = 'handsontableInput';
                    this.textareaStyle = this.TEXTAREA.style;
                    this.textareaStyle.width = 0;
                    this.textareaStyle.height = 0;
                    this.$textarea = $(this.TEXTAREA);
                
                    wtDom.empty(this.TEXTAREA_PARENT);
                    this.TEXTAREA_PARENT.appendChild(this.TEXTAREA);
                
                  };
                
                  Handsontable.editors.PasswordEditor = PasswordEditor;
                  Handsontable.editors.registerEditor('password', PasswordEditor);
                
                })(Handsontable);
                
                (function (Handsontable) {
                
                  var SelectEditor = Handsontable.editors.BaseEditor.prototype.extend();
                
                  SelectEditor.prototype.init = function(){
                    this.select = document.createElement('SELECT');
                    Handsontable.Dom.addClass(this.select, 'htSelectEditor');
                    this.select.style.display = 'none';
                    this.instance.rootElement[0].appendChild(this.select);
                  };
                
                  SelectEditor.prototype.prepare = function(){
                    Handsontable.editors.BaseEditor.prototype.prepare.apply(this, arguments);
                
                
                    var selectOptions = this.cellProperties.selectOptions;
                    var options;
                
                    if (typeof selectOptions == 'function'){
                      options =  this.prepareOptions(selectOptions(this.row, this.col, this.prop))
                    } else {
                      options =  this.prepareOptions(selectOptions);
                    }
                
                    Handsontable.Dom.empty(this.select);
                
                    for (var option in options){
                      if (options.hasOwnProperty(option)){
                        var optionElement = document.createElement('OPTION');
                        optionElement.value = option;
                        Handsontable.Dom.fastInnerHTML(optionElement, options[option]);
                        this.select.appendChild(optionElement);
                      }
                    }
                  };
                
                  SelectEditor.prototype.prepareOptions = function(optionsToPrepare){
                
                    var preparedOptions = {};
                
                    if (Handsontable.helper.isArray(optionsToPrepare)){
                      for(var i = 0, len = optionsToPrepare.length; i < len; i++){
                        preparedOptions[optionsToPrepare[i]] = optionsToPrepare[i];
                      }
                    }
                    else if (typeof optionsToPrepare == 'object') {
                      preparedOptions = optionsToPrepare;
                    }
                
                    return preparedOptions;
                
                  };
                
                  SelectEditor.prototype.getValue = function () {
                    return this.select.value;
                  };
                
                  SelectEditor.prototype.setValue = function (value) {
                    this.select.value = value;
                  };
                
                  var onBeforeKeyDown = function (event) {
                    var instance = this;
                    var editor = instance.getActiveEditor();
                
                    switch (event.keyCode){
                      case Handsontable.helper.keyCode.ARROW_UP:
                
                        var previousOption = editor.select.find('option:selected').prev();
                
                        if (previousOption.length == 1){
                          previousOption.prop('selected', true);
                        }
                
                        event.stopImmediatePropagation();
                        event.preventDefault();
                        break;
                
                      case Handsontable.helper.keyCode.ARROW_DOWN:
                
                        var nextOption = editor.select.find('option:selected').next();
                
                        if (nextOption.length == 1){
                          nextOption.prop('selected', true);
                        }
                
                        event.stopImmediatePropagation();
                        event.preventDefault();
                        break;
                    }
                  };
                
                  SelectEditor.prototype.open = function () {
                    var width = Handsontable.Dom.outerWidth(this.TD); //important - group layout reads together for better performance
                    var height = Handsontable.Dom.outerHeight(this.TD);
                    var rootOffset = Handsontable.Dom.offset(this.instance.rootElement[0]);
                    var tdOffset = Handsontable.Dom.offset(this.TD);
                
                    this.select.style.height = height + 'px';
                    this.select.style.minWidth = width + 'px';
                    this.select.style.top = tdOffset.top - rootOffset.top + 'px';
                    this.select.style.left = tdOffset.left - rootOffset.left - 2 + 'px'; //2 is cell border
                    this.select.style.display = '';
                
                    this.instance.addHook('beforeKeyDown', onBeforeKeyDown);
                  };
                
                  SelectEditor.prototype.close = function () {
                    this.select.style.display = 'none';
                    this.instance.removeHook('beforeKeyDown', onBeforeKeyDown);
                  };
                
                  SelectEditor.prototype.focus = function () {
                    this.select.focus();
                  };
                
                  Handsontable.editors.SelectEditor = SelectEditor;
                  Handsontable.editors.registerEditor('select', SelectEditor);
                
                })(Handsontable);
                
                (function (Handsontable) {
                
                  var DropdownEditor = Handsontable.editors.AutocompleteEditor.prototype.extend();
                
                  DropdownEditor.prototype.prepare = function () {
                    Handsontable.editors.AutocompleteEditor.prototype.prepare.apply(this, arguments);
                
                    this.cellProperties.filter = false;
                    this.cellProperties.strict = true;
                
                  };
                
                
                  Handsontable.editors.DropdownEditor = DropdownEditor;
                  Handsontable.editors.registerEditor('dropdown', DropdownEditor);
                
                
                })(Handsontable);
                /**
                 * Numeric cell validator
                 * @param {*} value - Value of edited cell
                 * @param {*} callback - Callback called with validation result
                 */
                Handsontable.NumericValidator = function (value, callback) {
                  if (value === null) {
                    value = '';
                  }
                  callback(/^-?\d*\.?\d*$/.test(value));
                };
                /**
                 * Function responsible for validation of autocomplete value
                 * @param {*} value - Value of edited cell
                 * @param {*} calback - Callback called with validation result
                 */
                var process = function (value, callback) {
                
                  var originalVal  = value;
                  var lowercaseVal = typeof originalVal === 'string' ? originalVal.toLowerCase() : null;
                
                  return function (source) {
                    var found = false;
                    for (var s = 0, slen = source.length; s < slen; s++) {
                      if (originalVal === source[s]) {
                        found = true; //perfect match
                        break;
                      }
                      else if (lowercaseVal === source[s].toLowerCase()) {
                        // changes[i][3] = source[s]; //good match, fix the case << TODO?
                        found = true;
                        break;
                      }
                    }
                
                    callback(found);
                  }
                };
                
                /**
                 * Autocomplete cell validator
                 * @param {*} value - Value of edited cell
                 * @param {*} calback - Callback called with validation result
                 */
                Handsontable.AutocompleteValidator = function (value, callback) {
                  if (this.strict && this.source) {
                    typeof this.source === 'function' ? this.source(value, process(value, callback)) : process(value, callback)(this.source);
                  } else {
                    callback(true);
                  }
                };
                
                /**
                 * Cell type is just a shortcut for setting bunch of cellProperties (used in getCellMeta)
                 */
                
                Handsontable.AutocompleteCell = {
                  editor: Handsontable.editors.AutocompleteEditor,
                  renderer: Handsontable.renderers.AutocompleteRenderer,
                  validator: Handsontable.AutocompleteValidator
                };
                
                Handsontable.CheckboxCell = {
                  editor: Handsontable.editors.CheckboxEditor,
                  renderer: Handsontable.renderers.CheckboxRenderer
                };
                
                Handsontable.TextCell = {
                  editor: Handsontable.editors.TextEditor,
                  renderer: Handsontable.renderers.TextRenderer
                };
                
                Handsontable.NumericCell = {
                  editor: Handsontable.editors.TextEditor,
                  renderer: Handsontable.renderers.NumericRenderer,
                  validator: Handsontable.NumericValidator,
                  dataType: 'number'
                };
                
                Handsontable.DateCell = {
                  editor: Handsontable.editors.DateEditor,
                  renderer: Handsontable.renderers.AutocompleteRenderer //displays small gray arrow on right side of the cell
                };
                
                Handsontable.HandsontableCell = {
                  editor: Handsontable.editors.HandsontableEditor,
                  renderer: Handsontable.renderers.AutocompleteRenderer //displays small gray arrow on right side of the cell
                };
                
                Handsontable.PasswordCell = {
                  editor: Handsontable.editors.PasswordEditor,
                  renderer: Handsontable.renderers.PasswordRenderer,
                  copyable: false
                };
                
                Handsontable.DropdownCell = {
                  editor: Handsontable.editors.DropdownEditor,
                  renderer: Handsontable.renderers.AutocompleteRenderer, //displays small gray arrow on right side of the cell
                  validator: Handsontable.AutocompleteValidator
                };
                
                //here setup the friendly aliases that are used by cellProperties.type
                Handsontable.cellTypes = {
                  text: Handsontable.TextCell,
                  date: Handsontable.DateCell,
                  numeric: Handsontable.NumericCell,
                  checkbox: Handsontable.CheckboxCell,
                  autocomplete: Handsontable.AutocompleteCell,
                  handsontable: Handsontable.HandsontableCell,
                  password: Handsontable.PasswordCell,
                  dropdown: Handsontable.DropdownCell
                };
                
                //here setup the friendly aliases that are used by cellProperties.renderer and cellProperties.editor
                Handsontable.cellLookup = {
                  validator: {
                    numeric: Handsontable.NumericValidator,
                    autocomplete: Handsontable.AutocompleteValidator
                  }
                };
                /*
                 * jQuery.fn.autoResize 1.1+
                 * --
                 * https://github.com/warpech/jQuery.fn.autoResize
                 *
                 * This fork differs from others in a way that it autoresizes textarea in 2-dimensions (horizontally and vertically).
                 * It was originally forked from alexbardas's repo but maybe should be merged with dpashkevich's repo in future.
                 *
                 * originally forked from:
                 * https://github.com/jamespadolsey/jQuery.fn.autoResize
                 * which is now located here:
                 * https://github.com/alexbardas/jQuery.fn.autoResize
                 * though the mostly maintained for is here:
                 * https://github.com/dpashkevich/jQuery.fn.autoResize/network
                 *
                 * --
                 * This program is free software. It comes without any warranty, to
                 * the extent permitted by applicable law. You can redistribute it
                 * and/or modify it under the terms of the Do What The Fuck You Want
                 * To Public License, Version 2, as published by Sam Hocevar. See
                 * http://sam.zoy.org/wtfpl/COPYING for more details. */
                
                (function($){
                
                  autoResize.defaults = {
                    onResize: function(){},
                    animate: {
                      duration: 200,
                      complete: function(){}
                    },
                    extraSpace: 50,
                    minHeight: 'original',
                    maxHeight: 500,
                    minWidth: 'original',
                    maxWidth: 500
                  };
                
                  autoResize.cloneCSSProperties = [
                    'lineHeight', 'textDecoration', 'letterSpacing',
                    'fontSize', 'fontFamily', 'fontStyle', 'fontWeight',
                    'textTransform', 'textAlign', 'direction', 'wordSpacing', 'fontSizeAdjust',
                    'padding'
                  ];
                
                  autoResize.cloneCSSValues = {
                    position: 'absolute',
                    top: -9999,
                    left: -9999,
                    opacity: 0,
                    overflow: 'hidden',
                    overflowX: 'hidden',
                    overflowY: 'hidden',
                    border: '1px solid black',
                    padding: '0.49em' //this must be about the width of caps W character
                  };
                
                  autoResize.resizableFilterSelector = 'textarea,input:not(input[type]),input[type=text],input[type=password]';
                
                  autoResize.AutoResizer = AutoResizer;
                
                  $.fn.autoResize = autoResize;
                
                  function autoResize(config) {
                    this.filter(autoResize.resizableFilterSelector).each(function(){
                      new AutoResizer( $(this), config );
                    });
                    return this;
                  }
                
                  function AutoResizer(el, config) {
                
                    if(this.clones) return;
                
                    this.config = $.extend({}, autoResize.defaults, config);
                
                    this.el = el;
                
                    this.nodeName = el[0].nodeName.toLowerCase();
                
                    this.previousScrollTop = null;
                
                    if (config.maxWidth === 'original') config.maxWidth = el.width();
                    if (config.minWidth === 'original') config.minWidth = el.width();
                    if (config.maxHeight === 'original') config.maxHeight = el.height();
                    if (config.minHeight === 'original') config.minHeight = el.height();
                
                    if (this.nodeName === 'textarea') {
                      el.css({
                        resize: 'none',
                        overflowY: 'none'
                      });
                    }
                
                    el.data('AutoResizer', this);
                
                    this.createClone();
                    this.injectClone();
                    this.bind();
                
                  }
                
                  AutoResizer.prototype = {
                
                    bind: function() {
                
                      var check = $.proxy(function(){
                        this.check();
                        return true;
                      }, this);
                
                      this.unbind();
                
                      this.el
                        .bind('keyup.autoResize', check)
                        //.bind('keydown.autoResize', check)
                        .bind('change.autoResize', check);
                
                      this.check(null, true);
                
                    },
                
                    unbind: function() {
                      this.el.unbind('.autoResize');
                    },
                
                    createClone: function() {
                
                      var el = this.el,
                        self = this,
                        config = this.config;
                
                      this.clones = $();
                
                      if (config.minHeight !== 'original' || config.maxHeight !== 'original') {
                        this.hClone = el.clone().height('auto');
                        this.clones = this.clones.add(this.hClone);
                      }
                      if (config.minWidth !== 'original' || config.maxWidth !== 'original') {
                        this.wClone = $('<div/>').width('auto').css({
                          whiteSpace: 'nowrap',
                          'float': 'left'
                        });
                        this.clones = this.clones.add(this.wClone);
                      }
                
                      $.each(autoResize.cloneCSSProperties, function(i, p){
                        self.clones.css(p, el.css(p));
                      });
                
                      this.clones
                        .removeAttr('name')
                        .removeAttr('id')
                        .attr('tabIndex', -1)
                        .css(autoResize.cloneCSSValues)
                        .css('overflowY', 'scroll');
                
                    },
                
                    check: function(e, immediate) {
                
                      var config = this.config,
                        wClone = this.wClone,
                        hClone = this.hClone,
                        el = this.el,
                        value = el.val();
                
                      if (wClone) {
                
                        wClone.text(value);
                
                        // Calculate new width + whether to change
                        var cloneWidth = wClone.outerWidth(),
                          newWidth = (cloneWidth + config.extraSpace) >= config.minWidth ?
                            cloneWidth + config.extraSpace : config.minWidth,
                          currentWidth = el.width();
                
                        newWidth = Math.min(newWidth, config.maxWidth);
                
                        if (
                          (newWidth < currentWidth && newWidth >= config.minWidth) ||
                            (newWidth >= config.minWidth && newWidth <= config.maxWidth)
                          ) {
                
                          config.onResize.call(el);
                
                          el.scrollLeft(0);
                
                          config.animate && !immediate ?
                            el.stop(1,1).animate({
                              width: newWidth
                            }, config.animate)
                            : el.width(newWidth);
                
                        }
                
                      }
                
                      if (hClone) {
                
                        if (newWidth) {
                          hClone.width(newWidth);
                        }
                
                        hClone.height(0).val(value).scrollTop(10000);
                
                        var scrollTop = hClone[0].scrollTop + config.extraSpace;
                
                        // Don't do anything if scrollTop hasen't changed:
                        if (this.previousScrollTop === scrollTop) {
                          return;
                        }
                
                        this.previousScrollTop = scrollTop;
                
                        if (scrollTop >= config.maxHeight) {
                          scrollTop = config.maxHeight;
                        }
                
                        if (scrollTop < config.minHeight) {
                          scrollTop = config.minHeight;
                        }
                
                        if(scrollTop == config.maxHeight && newWidth == config.maxWidth) {
                          el.css('overflowY', 'scroll');
                        }
                        else {
                          el.css('overflowY', 'hidden');
                        }
                
                        config.onResize.call(el);
                
                        // Either animate or directly apply height:
                        config.animate && !immediate ?
                          el.stop(1,1).animate({
                            height: scrollTop
                          }, config.animate)
                          : el.height(scrollTop);
                      }
                    },
                
                    destroy: function() {
                      this.unbind();
                      this.el.removeData('AutoResizer');
                      this.clones.remove();
                      delete this.el;
                      delete this.hClone;
                      delete this.wClone;
                      delete this.clones;
                    },
                
                    injectClone: function() {
                      (
                        autoResize.cloneContainer ||
                          (autoResize.cloneContainer = $('<arclones/>').appendTo('body'))
                        ).empty().append(this.clones); //this should be refactored so that a node is never cloned more than once
                    }
                
                  };
                
                })(jQuery);
                /**
                 * SheetClip - Spreadsheet Clipboard Parser
                 * version 0.2
                 *
                 * This tiny library transforms JavaScript arrays to strings that are pasteable by LibreOffice, OpenOffice,
                 * Google Docs and Microsoft Excel.
                 *
                 * Copyright 2012, Marcin Warpechowski
                 * Licensed under the MIT license.
                 * http://github.com/warpech/sheetclip/
                 */
                /*jslint white: true*/
                (function (global) {
                  
                
                  function countQuotes(str) {
                    return str.split('"').length - 1;
                  }
                
                  global.SheetClip = {
                    parse: function (str) {
                      var r, rlen, rows, arr = [], a = 0, c, clen, multiline, last;
                      rows = str.split('\n');
                      if (rows.length > 1 && rows[rows.length - 1] === '') {
                        rows.pop();
                      }
                      for (r = 0, rlen = rows.length; r < rlen; r += 1) {
                        rows[r] = rows[r].split('\t');
                        for (c = 0, clen = rows[r].length; c < clen; c += 1) {
                          if (!arr[a]) {
                            arr[a] = [];
                          }
                          if (multiline && c === 0) {
                            last = arr[a].length - 1;
                            arr[a][last] = arr[a][last] + '\n' + rows[r][0];
                            if (multiline && (countQuotes(rows[r][0]) & 1)) { //& 1 is a bitwise way of performing mod 2
                              multiline = false;
                              arr[a][last] = arr[a][last].substring(0, arr[a][last].length - 1).replace(/""/g, '"');
                            }
                          }
                          else {
                            if (c === clen - 1 && rows[r][c].indexOf('"') === 0) {
                              arr[a].push(rows[r][c].substring(1).replace(/""/g, '"'));
                              multiline = true;
                            }
                            else {
                              arr[a].push(rows[r][c].replace(/""/g, '"'));
                              multiline = false;
                            }
                          }
                        }
                        if (!multiline) {
                          a += 1;
                        }
                      }
                      return arr;
                    },
                
                    stringify: function (arr) {
                      var r, rlen, c, clen, str = '', val;
                      for (r = 0, rlen = arr.length; r < rlen; r += 1) {
                        for (c = 0, clen = arr[r].length; c < clen; c += 1) {
                          if (c > 0) {
                            str += '\t';
                          }
                          val = arr[r][c];
                          if (typeof val === 'string') {
                            if (val.indexOf('\n') > -1) {
                              str += '"' + val.replace(/"/g, '""') + '"';
                            }
                            else {
                              str += val;
                            }
                          }
                          else if (val === null || val === void 0) { //void 0 resolves to undefined
                            str += '';
                          }
                          else {
                            str += val;
                          }
                        }
                        str += '\n';
                      }
                      return str;
                    }
                  };
                }(window));
                /**
                 * CopyPaste.js
                 * Creates a textarea that stays hidden on the page and gets focused when user presses CTRL while not having a form input focused
                 * In future we may implement a better driver when better APIs are available
                 * @constructor
                 */
                var CopyPaste = (function () {
                  var instance;
                  return {
                    getInstance: function () {
                      if (!instance) {
                        instance = new CopyPasteClass();
                      } else if (instance.hasBeenDestroyed()){
                        instance.init();
                      }
                
                      instance.refCounter++;
                
                      return instance;
                    }
                  };
                })();
                
                function CopyPasteClass() {
                  this.refCounter = 0;
                  this.init();
                }
                
                CopyPasteClass.prototype.init = function () {
                  var that = this
                    , style
                    , parent;
                
                  this.copyCallbacks = [];
                  this.cutCallbacks = [];
                  this.pasteCallbacks = [];
                
                  this.listenerElement = document.documentElement;
                  parent = document.body;
                
                  if (document.getElementById('CopyPasteDiv')) {
                    this.elDiv = document.getElementById('CopyPasteDiv');
                    this.elTextarea = this.elDiv.firstChild;
                  }
                  else {
                    this.elDiv = document.createElement('DIV');
                    this.elDiv.id = 'CopyPasteDiv';
                    style = this.elDiv.style;
                    style.position = 'fixed';
                    style.top = '-10000px';
                    style.left = '-10000px';
                    parent.appendChild(this.elDiv);
                
                    this.elTextarea = document.createElement('TEXTAREA');
                    this.elTextarea.className = 'copyPaste';
                    style = this.elTextarea.style;
                    style.width = '10000px';
                    style.height = '10000px';
                    style.overflow = 'hidden';
                    this.elDiv.appendChild(this.elTextarea);
                
                    if (typeof style.opacity !== 'undefined') {
                      style.opacity = 0;
                    }
                    else {
                      /*@cc_on @if (@_jscript)
                       if(typeof style.filter === 'string') {
                       style.filter = 'alpha(opacity=0)';
                       }
                       @end @*/
                    }
                  }
                
                  this.keydownListener = function (event) {
                    var isCtrlDown = false;
                    if (event.metaKey) { //mac
                      isCtrlDown = true;
                    }
                    else if (event.ctrlKey && navigator.userAgent.indexOf('Mac') === -1) { //pc
                      isCtrlDown = true;
                    }
                
                    if (isCtrlDown) {
                      if (document.activeElement !== that.elTextarea && (that.getSelectionText() != '' || ['INPUT', 'SELECT', 'TEXTAREA'].indexOf(document.activeElement.nodeName) != -1)) {
                        return; //this is needed by fragmentSelection in Handsontable. Ignore copypaste.js behavior if fragment of cell text is selected
                      }
                
                      that.selectNodeText(that.elTextarea);
                      setTimeout(function () {
                        that.selectNodeText(that.elTextarea);
                      }, 0);
                    }
                
                    /* 67 = c
                     * 86 = v
                     * 88 = x
                     */
                    if (isCtrlDown && (event.keyCode === 67 || event.keyCode === 86 || event.keyCode === 88)) {
                      // that.selectNodeText(that.elTextarea);
                
                      if (event.keyCode === 88) { //works in all browsers, incl. Opera < 12.12
                        setTimeout(function () {
                          that.triggerCut(event);
                        }, 0);
                      }
                      else if (event.keyCode === 86) {
                        setTimeout(function () {
                          that.triggerPaste(event);
                        }, 0);
                      }
                    }
                  }
                
                  this._bindEvent(this.listenerElement, 'keydown', this.keydownListener);
                };
                
                //http://jsperf.com/textara-selection
                //http://stackoverflow.com/questions/1502385/how-can-i-make-this-code-work-in-ie
                CopyPasteClass.prototype.selectNodeText = function (el) {
                  el.select();
                };
                
                //http://stackoverflow.com/questions/5379120/get-the-highlighted-selected-text
                CopyPasteClass.prototype.getSelectionText = function () {
                  var text = "";
                  if (window.getSelection) {
                    text = window.getSelection().toString();
                  } else if (document.selection && document.selection.type != "Control") {
                    text = document.selection.createRange().text;
                  }
                  return text;
                };
                
                CopyPasteClass.prototype.copyable = function (str) {
                  if (typeof str !== 'string' && str.toString === void 0) {
                    throw new Error('copyable requires string parameter');
                  }
                  this.elTextarea.value = str;
                };
                
                /*CopyPasteClass.prototype.onCopy = function (fn) {
                  this.copyCallbacks.push(fn);
                };*/
                
                CopyPasteClass.prototype.onCut = function (fn) {
                  this.cutCallbacks.push(fn);
                };
                
                CopyPasteClass.prototype.onPaste = function (fn) {
                  this.pasteCallbacks.push(fn);
                };
                
                CopyPasteClass.prototype.removeCallback = function (fn) {
                  var i, ilen;
                  for (i = 0, ilen = this.copyCallbacks.length; i < ilen; i++) {
                    if (this.copyCallbacks[i] === fn) {
                      this.copyCallbacks.splice(i, 1);
                      return true;
                    }
                  }
                  for (i = 0, ilen = this.cutCallbacks.length; i < ilen; i++) {
                    if (this.cutCallbacks[i] === fn) {
                      this.cutCallbacks.splice(i, 1);
                      return true;
                    }
                  }
                  for (i = 0, ilen = this.pasteCallbacks.length; i < ilen; i++) {
                    if (this.pasteCallbacks[i] === fn) {
                      this.pasteCallbacks.splice(i, 1);
                      return true;
                    }
                  }
                  return false;
                };
                
                CopyPasteClass.prototype.triggerCut = function (event) {
                  var that = this;
                  if (that.cutCallbacks) {
                    setTimeout(function () {
                      for (var i = 0, ilen = that.cutCallbacks.length; i < ilen; i++) {
                        that.cutCallbacks[i](event);
                      }
                    }, 50);
                  }
                };
                
                CopyPasteClass.prototype.triggerPaste = function (event, str) {
                  var that = this;
                  if (that.pasteCallbacks) {
                    setTimeout(function () {
                      var val = (str || that.elTextarea.value).replace(/\n$/, ''); //remove trailing newline
                      for (var i = 0, ilen = that.pasteCallbacks.length; i < ilen; i++) {
                        that.pasteCallbacks[i](val, event);
                      }
                    }, 50);
                  }
                };
                
                CopyPasteClass.prototype.destroy = function () {
                
                  if(!this.hasBeenDestroyed() && --this.refCounter == 0){
                    if (this.elDiv && this.elDiv.parentNode) {
                      this.elDiv.parentNode.removeChild(this.elDiv);
                    }
                
                    this._unbindEvent(this.listenerElement, 'keydown', this.keydownListener);
                
                  }
                
                };
                
                CopyPasteClass.prototype.hasBeenDestroyed = function () {
                  return !this.refCounter;
                };
                
                //old version used this:
                // - http://net.tutsplus.com/tutorials/javascript-ajax/javascript-from-null-cross-browser-event-binding/
                // - http://stackoverflow.com/questions/4643249/cross-browser-event-object-normalization
                //but that cannot work with jQuery.trigger
                CopyPasteClass.prototype._bindEvent = (function () {
                  if (window.jQuery) { //if jQuery exists, use jQuery event (for compatibility with $.trigger and $.triggerHandler, which can only trigger jQuery events - and we use that in tests)
                    return function (elem, type, cb) {
                      $(elem).on(type + '.copypaste', cb);
                    };
                  }
                  else {
                    return function (elem, type, cb) {
                      elem.addEventListener(type, cb, false); //sorry, IE8 will only work with jQuery
                    };
                  }
                })();
                
                CopyPasteClass.prototype._unbindEvent = (function () {
                  if (window.jQuery) { //if jQuery exists, use jQuery event (for compatibility with $.trigger and $.triggerHandler, which can only trigger jQuery events - and we use that in tests)
                    return function (elem, type, cb) {
                      $(elem).off(type + '.copypaste', cb);
                    };
                  }
                  else {
                    return function (elem, type, cb) {
                      elem.removeEventListener(type, cb, false); //sorry, IE8 will only work with jQuery
                    };
                  }
                })();
                // json-patch-duplex.js 0.3.6
                // (c) 2013 Joachim Wester
                // MIT license
                var jsonpatch;
                (function (jsonpatch) {
                    var objOps = {
                        add: function (obj, key) {
                            obj[key] = this.value;
                            return true;
                        },
                        remove: function (obj, key) {
                            delete obj[key];
                            return true;
                        },
                        replace: function (obj, key) {
                            obj[key] = this.value;
                            return true;
                        },
                        move: function (obj, key, tree) {
                            var temp = { op: "_get", path: this.from };
                            apply(tree, [temp]);
                            apply(tree, [
                                { op: "remove", path: this.from }
                            ]);
                            apply(tree, [
                                { op: "add", path: this.path, value: temp.value }
                            ]);
                            return true;
                        },
                        copy: function (obj, key, tree) {
                            var temp = { op: "_get", path: this.from };
                            apply(tree, [temp]);
                            apply(tree, [
                                { op: "add", path: this.path, value: temp.value }
                            ]);
                            return true;
                        },
                        test: function (obj, key) {
                            return (JSON.stringify(obj[key]) === JSON.stringify(this.value));
                        },
                        _get: function (obj, key) {
                            this.value = obj[key];
                        }
                    };
                
                    var arrOps = {
                        add: function (arr, i) {
                            arr.splice(i, 0, this.value);
                            return true;
                        },
                        remove: function (arr, i) {
                            arr.splice(i, 1);
                            return true;
                        },
                        replace: function (arr, i) {
                            arr[i] = this.value;
                            return true;
                        },
                        move: objOps.move,
                        copy: objOps.copy,
                        test: objOps.test,
                        _get: objOps._get
                    };
                
                    var observeOps = {
                        add: function (patches, path) {
                            var patch = {
                                op: "add",
                                path: path + escapePathComponent(this.name),
                                value: this.object[this.name]
                            };
                            patches.push(patch);
                        },
                        'delete': function (patches, path) {
                            var patch = {
                                op: "remove",
                                path: path + escapePathComponent(this.name)
                            };
                            patches.push(patch);
                        },
                        update: function (patches, path) {
                            var patch = {
                                op: "replace",
                                path: path + escapePathComponent(this.name),
                                value: this.object[this.name]
                            };
                            patches.push(patch);
                        }
                    };
                
                    function escapePathComponent(str) {
                        if (str.indexOf('/') === -1 && str.indexOf('~') === -1)
                            return str;
                        return str.replace(/~/g, '~0').replace(/\//g, '~1');
                    }
                
                    function _getPathRecursive(root, obj) {
                        var found;
                        for (var key in root) {
                            if (root.hasOwnProperty(key)) {
                                if (root[key] === obj) {
                                    return escapePathComponent(key) + '/';
                                } else if (typeof root[key] === 'object') {
                                    found = _getPathRecursive(root[key], obj);
                                    if (found != '') {
                                        return escapePathComponent(key) + '/' + found;
                                    }
                                }
                            }
                        }
                        return '';
                    }
                
                    function getPath(root, obj) {
                        if (root === obj) {
                            return '/';
                        }
                        var path = _getPathRecursive(root, obj);
                        if (path === '') {
                            throw new Error("Object not found in root");
                        }
                        return '/' + path;
                    }
                
                    var beforeDict = [];
                
                    jsonpatch.intervals;
                
                    var Mirror = (function () {
                        function Mirror(obj) {
                            this.observers = [];
                            this.obj = obj;
                        }
                        return Mirror;
                    })();
                
                    var ObserverInfo = (function () {
                        function ObserverInfo(callback, observer) {
                            this.callback = callback;
                            this.observer = observer;
                        }
                        return ObserverInfo;
                    })();
                
                    function getMirror(obj) {
                        for (var i = 0, ilen = beforeDict.length; i < ilen; i++) {
                            if (beforeDict[i].obj === obj) {
                                return beforeDict[i];
                            }
                        }
                    }
                
                    function getObserverFromMirror(mirror, callback) {
                        for (var j = 0, jlen = mirror.observers.length; j < jlen; j++) {
                            if (mirror.observers[j].callback === callback) {
                                return mirror.observers[j].observer;
                            }
                        }
                    }
                
                    function removeObserverFromMirror(mirror, observer) {
                        for (var j = 0, jlen = mirror.observers.length; j < jlen; j++) {
                            if (mirror.observers[j].observer === observer) {
                                mirror.observers.splice(j, 1);
                                return;
                            }
                        }
                    }
                
                    function unobserve(root, observer) {
                        generate(observer);
                        if (Object.observe) {
                            _unobserve(observer, root);
                        } else {
                            clearTimeout(observer.next);
                        }
                
                        var mirror = getMirror(root);
                        removeObserverFromMirror(mirror, observer);
                    }
                    jsonpatch.unobserve = unobserve;
                
                    function observe(obj, callback) {
                        var patches = [];
                        var root = obj;
                        var observer;
                        var mirror = getMirror(obj);
                
                        if (!mirror) {
                            mirror = new Mirror(obj);
                            beforeDict.push(mirror);
                        } else {
                            observer = getObserverFromMirror(mirror, callback);
                        }
                
                        if (observer) {
                            return observer;
                        }
                
                        if (Object.observe) {
                            observer = function (arr) {
                                //This "refresh" is needed to begin observing new object properties
                                _unobserve(observer, obj);
                                _observe(observer, obj);
                
                                var a = 0, alen = arr.length;
                                while (a < alen) {
                                    if (!(arr[a].name === 'length' && _isArray(arr[a].object)) && !(arr[a].name === '__Jasmine_been_here_before__')) {
                                        var type = arr[a].type;
                
                                        switch (type) {
                                            case 'new':
                                                type = 'add';
                                                break;
                
                                            case 'deleted':
                                                type = 'delete';
                                                break;
                
                                            case 'updated':
                                                type = 'update';
                                                break;
                                        }
                
                                        observeOps[type].call(arr[a], patches, getPath(root, arr[a].object));
                                    }
                                    a++;
                                }
                
                                if (patches) {
                                    if (callback) {
                                        callback(patches);
                                    }
                                }
                                observer.patches = patches;
                                patches = [];
                            };
                        } else {
                            observer = {};
                
                            mirror.value = JSON.parse(JSON.stringify(obj));
                
                            if (callback) {
                                //callbacks.push(callback); this has no purpose
                                observer.callback = callback;
                                observer.next = null;
                                var intervals = this.intervals || [100, 1000, 10000, 60000];
                                var currentInterval = 0;
                
                                var dirtyCheck = function () {
                                    generate(observer);
                                };
                                var fastCheck = function () {
                                    clearTimeout(observer.next);
                                    observer.next = setTimeout(function () {
                                        dirtyCheck();
                                        currentInterval = 0;
                                        observer.next = setTimeout(slowCheck, intervals[currentInterval++]);
                                    }, 0);
                                };
                                var slowCheck = function () {
                                    dirtyCheck();
                                    if (currentInterval == intervals.length)
                                        currentInterval = intervals.length - 1;
                                    observer.next = setTimeout(slowCheck, intervals[currentInterval++]);
                                };
                                if (typeof window !== 'undefined') {
                                    if (window.addEventListener) {
                                        window.addEventListener('mousedown', fastCheck);
                                        window.addEventListener('mouseup', fastCheck);
                                        window.addEventListener('keydown', fastCheck);
                                    } else {
                                        window.attachEvent('onmousedown', fastCheck);
                                        window.attachEvent('onmouseup', fastCheck);
                                        window.attachEvent('onkeydown', fastCheck);
                                    }
                                }
                                observer.next = setTimeout(slowCheck, intervals[currentInterval++]);
                            }
                        }
                        observer.patches = patches;
                        observer.object = obj;
                
                        mirror.observers.push(new ObserverInfo(callback, observer));
                
                        return _observe(observer, obj);
                    }
                    jsonpatch.observe = observe;
                
                    /// Listen to changes on an object tree, accumulate patches
                    function _observe(observer, obj) {
                        if (Object.observe) {
                            Object.observe(obj, observer);
                            for (var key in obj) {
                                if (obj.hasOwnProperty(key)) {
                                    var v = obj[key];
                                    if (v && typeof (v) === "object") {
                                        _observe(observer, v);
                                    }
                                }
                            }
                        }
                        return observer;
                    }
                
                    function _unobserve(observer, obj) {
                        if (Object.observe) {
                            Object.unobserve(obj, observer);
                            for (var key in obj) {
                                if (obj.hasOwnProperty(key)) {
                                    var v = obj[key];
                                    if (v && typeof (v) === "object") {
                                        _unobserve(observer, v);
                                    }
                                }
                            }
                        }
                        return observer;
                    }
                
                    function generate(observer) {
                        if (Object.observe) {
                            Object.deliverChangeRecords(observer);
                        } else {
                            var mirror;
                            for (var i = 0, ilen = beforeDict.length; i < ilen; i++) {
                                if (beforeDict[i].obj === observer.object) {
                                    mirror = beforeDict[i];
                                    break;
                                }
                            }
                            _generate(mirror.value, observer.object, observer.patches, "");
                        }
                        var temp = observer.patches;
                        if (temp.length > 0) {
                            observer.patches = [];
                            if (observer.callback) {
                                observer.callback(temp);
                            }
                        }
                        return temp;
                    }
                    jsonpatch.generate = generate;
                
                    var _objectKeys;
                    if (Object.keys) {
                        _objectKeys = Object.keys;
                    } else {
                        _objectKeys = function (obj) {
                            var keys = [];
                            for (var o in obj) {
                                if (obj.hasOwnProperty(o)) {
                                    keys.push(o);
                                }
                            }
                            return keys;
                        };
                    }
                
                    // Dirty check if obj is different from mirror, generate patches and update mirror
                    function _generate(mirror, obj, patches, path) {
                        var newKeys = _objectKeys(obj);
                        var oldKeys = _objectKeys(mirror);
                        var changed = false;
                        var deleted = false;
                
                        for (var t = oldKeys.length - 1; t >= 0; t--) {
                            var key = oldKeys[t];
                            var oldVal = mirror[key];
                            if (obj.hasOwnProperty(key)) {
                                var newVal = obj[key];
                                if (oldVal instanceof Object) {
                                    _generate(oldVal, newVal, patches, path + "/" + escapePathComponent(key));
                                } else {
                                    if (oldVal != newVal) {
                                        changed = true;
                                        patches.push({ op: "replace", path: path + "/" + escapePathComponent(key), value: newVal });
                                        mirror[key] = newVal;
                                    }
                                }
                            } else {
                                patches.push({ op: "remove", path: path + "/" + escapePathComponent(key) });
                                delete mirror[key];
                                deleted = true;
                            }
                        }
                
                        if (!deleted && newKeys.length == oldKeys.length) {
                            return;
                        }
                
                        for (var t = 0; t < newKeys.length; t++) {
                            var key = newKeys[t];
                            if (!mirror.hasOwnProperty(key)) {
                                patches.push({ op: "add", path: path + "/" + escapePathComponent(key), value: obj[key] });
                                mirror[key] = JSON.parse(JSON.stringify(obj[key]));
                            }
                        }
                    }
                
                    var _isArray;
                    if (Array.isArray) {
                        _isArray = Array.isArray;
                    } else {
                        _isArray = function (obj) {
                            return obj.push && typeof obj.length === 'number';
                        };
                    }
                
                    /// Apply a json-patch operation on an object tree
                    function apply(tree, patches) {
                        var result = false, p = 0, plen = patches.length, patch;
                        while (p < plen) {
                            patch = patches[p];
                
                            // Find the object
                            var keys = patch.path.split('/');
                            var obj = tree;
                            var t = 1;
                            var len = keys.length;
                            while (true) {
                                if (_isArray(obj)) {
                                    var index = parseInt(keys[t], 10);
                                    t++;
                                    if (t >= len) {
                                        result = arrOps[patch.op].call(patch, obj, index, tree);
                                        break;
                                    }
                                    obj = obj[index];
                                } else {
                                    var key = keys[t];
                                    if (key.indexOf('~') != -1)
                                        key = key.replace(/~1/g, '/').replace(/~0/g, '~');
                                    t++;
                                    if (t >= len) {
                                        result = objOps[patch.op].call(patch, obj, key, tree);
                                        break;
                                    }
                                    obj = obj[key];
                                }
                            }
                            p++;
                        }
                        return result;
                    }
                    jsonpatch.apply = apply;
                })(jsonpatch || (jsonpatch = {}));
                
                if (typeof exports !== "undefined") {
                    exports.apply = jsonpatch.apply;
                    exports.observe = jsonpatch.observe;
                    exports.unobserve = jsonpatch.unobserve;
                    exports.generate = jsonpatch.generate;
                }
                
                Handsontable.PluginHookClass = (function () {
                
                  var Hooks = function () {
                    return {
                      // Hooks
                      beforeInitWalkontable: [],
                
                      beforeInit: [],
                      beforeRender: [],
                      beforeChange: [],
                      beforeRemoveCol: [],
                      beforeRemoveRow: [],
                      beforeValidate: [],
                      beforeGet: [],
                      beforeSet: [],
                      beforeGetCellMeta: [],
                      beforeAutofill: [],
                      beforeKeyDown: [],
                      beforeColumnSort: [],
                
                      afterInit : [],
                      afterLoadData : [],
                      afterUpdateSettings: [],
                      afterRender : [],
                      afterRenderer : [],
                      afterChange : [],
                      afterValidate: [],
                      afterGetCellMeta: [],
                      afterGetColHeader: [],
                      afterGetColWidth: [],
                      afterDestroy: [],
                      afterRemoveRow: [],
                      afterCreateRow: [],
                      afterRemoveCol: [],
                      afterCreateCol: [],
                      afterColumnResize: [],
                      afterColumnMove: [],
                      afterColumnSort: [],
                      afterDeselect: [],
                      afterSelection: [],
                      afterSelectionByProp: [],
                      afterSelectionEnd: [],
                      afterSelectionEndByProp: [],
                      afterCopyLimit: [],
                      afterOnCellMouseDown: [],
                      afterOnCellMouseOver: [],
                      afterOnCellCornerMouseDown: [],
                      afterScrollVertically: [],
                      afterScrollHorizontally: [],
                
                      // Modifiers
                      modifyCol: []
                    }
                  };
                
                  var legacy = {
                    onBeforeChange: "beforeChange",
                    onChange: "afterChange",
                    onCreateRow: "afterCreateRow",
                    onCreateCol: "afterCreateCol",
                    onSelection: "afterSelection",
                    onCopyLimit: "afterCopyLimit",
                    onSelectionEnd: "afterSelectionEnd",
                    onSelectionByProp: "afterSelectionByProp",
                    onSelectionEndByProp: "afterSelectionEndByProp"
                  };
                
                  function PluginHookClass() {
                
                    this.hooks = Hooks();
                
                    this.legacy = legacy;
                
                  }
                
                  PluginHookClass.prototype.add = function (key, fn) {
                    //if fn is array, run this for all the array items
                    if (Handsontable.helper.isArray(fn)) {
                      for (var i = 0, len = fn.length; i < len; i++) {
                        this.add(key, fn[i]);
                      }
                    }
                    else {
                      // provide support for old versions of HOT
                      if (key in legacy) {
                        key = legacy[key];
                      }
                
                      if (typeof this.hooks[key] === "undefined") {
                        this.hooks[key] = [];
                      }
                
                      if (this.hooks[key].indexOf(fn) == -1) {
                        this.hooks[key].push(fn); //only add a hook if it has not already be added (adding the same hook twice is now silently ignored)
                      }
                    }
                    return this;
                  };
                
                  PluginHookClass.prototype.once = function(key, fn){
                
                    if(Handsontable.helper.isArray(fn)){
                
                      for(var i = 0, len = fn.length; i < len; i++){
                        fn[i].runOnce = true;
                        this.add(key, fn[i]);
                      }
                
                    } else {
                      fn.runOnce = true;
                      this.add(key, fn);
                
                    }
                
                  };
                
                  PluginHookClass.prototype.remove = function (key, fn) {
                    var status = false;
                
                    // provide support for old versions of HOT
                    if (key in legacy) {
                      key = legacy[key];
                    }
                
                    if (typeof this.hooks[key] !== 'undefined') {
                
                      for (var i = 0, leni = this.hooks[key].length; i < leni; i++) {
                
                        if (this.hooks[key][i] == fn) {
                          delete this.hooks[key][i].runOnce;
                          this.hooks[key].splice(i, 1);
                          status = true;
                          break;
                        }
                
                      }
                
                    }
                
                    return status;
                  };
                
                  PluginHookClass.prototype.run = function (instance, key, p1, p2, p3, p4, p5) {
                
                    // provide support for old versions of HOT
                    if (key in legacy) {
                      key = legacy[key];
                    }
                
                    //performance considerations - http://jsperf.com/call-vs-apply-for-a-plugin-architecture
                    if (typeof this.hooks[key] !== 'undefined') {
                
                      //Make a copy of handler array
                      var handlers = Array.prototype.slice.call(this.hooks[key]);
                
                      for (var i = 0, leni = handlers.length; i < leni; i++) {
                        handlers[i].call(instance, p1, p2, p3, p4, p5);
                
                        if(handlers[i].runOnce){
                          this.remove(key, handlers[i]);
                        }
                      }
                
                    }
                
                  };
                
                  PluginHookClass.prototype.execute = function (instance, key, p1, p2, p3, p4, p5) {
                    var res, handlers;
                
                    // provide support for old versions of HOT
                    if (key in legacy) {
                      key = legacy[key];
                    }
                
                    //performance considerations - http://jsperf.com/call-vs-apply-for-a-plugin-architecture
                      if (typeof this.hooks[key] !== 'undefined') {
                
                        handlers = Array.prototype.slice.call(this.hooks[key]);
                
                        for (var i = 0, leni = handlers.length; i < leni; i++) {
                
                          res = handlers[i].call(instance, p1, p2, p3, p4, p5);
                          if (res !== void 0) {
                            p1 = res;
                          }
                
                          if(handlers[i].runOnce){
                            this.remove(key, handlers[i]);
                          }
                
                          if(res === false){ //if any handler returned false
                            return false; //event has been cancelled and further execution of handler queue is being aborted
                          }
                
                        }
                
                      }
                
                    return p1;
                  };
                
                  return PluginHookClass;
                
                })();
                
                Handsontable.PluginHooks = new Handsontable.PluginHookClass();
                
                (function (Handsontable) {
                
                  function HandsontableAutoColumnSize() {
                    var plugin = this
                      , sampleCount = 5; //number of samples to take of each value length
                
                    this.beforeInit = function () {
                      var instance = this;
                      instance.autoColumnWidths = [];
                
                      if (instance.getSettings().autoColumnSize !== false) {
                        if (!instance.autoColumnSizeTmp) {
                          instance.autoColumnSizeTmp = {
                            table: null,
                            tableStyle: null,
                            theadTh: null,
                            tbody: null,
                            container: null,
                            containerStyle: null,
                            determineBeforeNextRender: true
                          };
                
                          instance.addHook('beforeRender', htAutoColumnSize.determineIfChanged);
                          instance.addHook('afterGetColWidth', htAutoColumnSize.getColWidth);
                          instance.addHook('afterDestroy', htAutoColumnSize.afterDestroy);
                
                          instance.determineColumnWidth = plugin.determineColumnWidth;
                        }
                      } else {
                        if (instance.autoColumnSizeTmp) {
                          instance.removeHook('beforeRender', htAutoColumnSize.determineIfChanged);
                          instance.removeHook('afterGetColWidth', htAutoColumnSize.getColWidth);
                          instance.removeHook('afterDestroy', htAutoColumnSize.afterDestroy);
                
                          delete instance.determineColumnWidth;
                
                          plugin.afterDestroy.call(instance);
                        }
                      }
                    };
                
                    this.determineIfChanged = function (force) {
                      if (force) {
                        htAutoColumnSize.determineColumnsWidth.apply(this, arguments);
                      }
                    };
                
                    this.determineColumnWidth = function (col) {
                      var instance = this
                        , tmp = instance.autoColumnSizeTmp;
                
                      if (!tmp.container) {
                        createTmpContainer.call(tmp, instance);
                      }
                
                      tmp.container.className = instance.rootElement[0].className + ' htAutoColumnSize';
                      tmp.table.className = instance.$table[0].className;
                
                      var rows = instance.countRows();
                      var samples = {};
                      var maxLen = 0;
                      for (var r = 0; r < rows; r++) {
                        var value = Handsontable.helper.stringify(instance.getDataAtCell(r, col));
                        var len = value.length;
                        if (len > maxLen) {
                          maxLen = len;
                        }
                        if (!samples[len]) {
                          samples[len] = {
                            needed: sampleCount,
                            strings: []
                          };
                        }
                        if (samples[len].needed) {
                          samples[len].strings.push({value: value, row: r});
                          samples[len].needed--;
                        }
                      }
                
                      var settings = instance.getSettings();
                      if (settings.colHeaders) {
                        instance.view.appendColHeader(col, tmp.theadTh); //TH innerHTML
                      }
                
                      instance.view.wt.wtDom.empty(tmp.tbody);
                
                      for (var i in samples) {
                        if (samples.hasOwnProperty(i)) {
                          for (var j = 0, jlen = samples[i].strings.length; j < jlen; j++) {
                            var row = samples[i].strings[j].row;
                
                            var cellProperties = instance.getCellMeta(row, col);
                            cellProperties.col = col;
                            cellProperties.row = row;
                
                            var renderer = instance.getCellRenderer(cellProperties);
                
                            var tr = document.createElement('tr');
                            var td = document.createElement('td');
                
                            renderer(instance, td, row, col, instance.colToProp(col), samples[i].strings[j].value, cellProperties);
                            r++;
                            tr.appendChild(td);
                            tmp.tbody.appendChild(tr);
                          }
                        }
                      }
                
                      var parent = instance.rootElement[0].parentNode;
                      parent.appendChild(tmp.container);
                      var width = instance.view.wt.wtDom.outerWidth(tmp.table);
                      parent.removeChild(tmp.container);
                
                      if (!settings.nativeScrollbars) { //with native scrollbars a cell size can safely exceed the width of the viewport
                        var maxWidth = instance.view.wt.wtViewport.getViewportWidth() - 2; //2 is some overhead for cell border
                        if (width > maxWidth) {
                          width = maxWidth;
                        }
                      }
                
                      return width;
                    };
                
                    this.determineColumnsWidth = function () {
                      var instance = this;
                      var settings = this.getSettings();
                      if (settings.autoColumnSize || !settings.colWidths) {
                        var cols = this.countCols();
                        for (var c = 0; c < cols; c++) {
                          if (!instance._getColWidthFromSettings(c)) {
                            this.autoColumnWidths[c] = plugin.determineColumnWidth.call(instance, c);
                          }
                        }
                      }
                    };
                
                    this.getColWidth = function (col, response) {
                      if (this.autoColumnWidths[col] && this.autoColumnWidths[col] > response.width) {
                        response.width = this.autoColumnWidths[col];
                      }
                    };
                
                    this.afterDestroy = function () {
                      var instance = this;
                      if (instance.autoColumnSizeTmp && instance.autoColumnSizeTmp.container && instance.autoColumnSizeTmp.container.parentNode) {
                        instance.autoColumnSizeTmp.container.parentNode.removeChild(instance.autoColumnSizeTmp.container);
                      }
                      instance.autoColumnSizeTmp = null;
                    };
                
                    function createTmpContainer(instance) {
                      var d = document
                        , tmp = this;
                
                      tmp.table = d.createElement('table');
                      tmp.theadTh = d.createElement('th');
                      tmp.table.appendChild(d.createElement('thead')).appendChild(d.createElement('tr')).appendChild(tmp.theadTh);
                
                      tmp.tableStyle = tmp.table.style;
                      tmp.tableStyle.tableLayout = 'auto';
                      tmp.tableStyle.width = 'auto';
                
                      tmp.tbody = d.createElement('tbody');
                      tmp.table.appendChild(tmp.tbody);
                
                      tmp.container = d.createElement('div');
                      tmp.container.className = instance.rootElement[0].className + ' hidden';
                      tmp.containerStyle = tmp.container.style;
                
                      tmp.container.appendChild(tmp.table);
                    }
                  }
                
                  var htAutoColumnSize = new HandsontableAutoColumnSize();
                
                  Handsontable.PluginHooks.add('beforeInit', htAutoColumnSize.beforeInit);
                  Handsontable.PluginHooks.add('afterUpdateSettings', htAutoColumnSize.beforeInit);
                
                })(Handsontable);
                
                /**
                 * This plugin sorts the view by a column (but does not sort the data source!)
                 * @constructor
                 */
                function HandsontableColumnSorting() {
                  var plugin = this;
                
                  this.init = function (source) {
                    var instance = this;
                    var sortingSettings = instance.getSettings().columnSorting;
                    var sortingColumn, sortingOrder;
                
                    instance.sortingEnabled = !!(sortingSettings);
                
                    if (instance.sortingEnabled) {
                      instance.sortIndex = [];
                
                      var loadedSortingState = loadSortingState.call(instance);
                
                      if (typeof loadedSortingState != 'undefined') {
                        sortingColumn = loadedSortingState.sortColumn;
                        sortingOrder = loadedSortingState.sortOrder;
                      } else {
                        sortingColumn = sortingSettings.column;
                        sortingOrder = sortingSettings.sortOrder;
                      }
                      plugin.sortByColumn.call(instance, sortingColumn, sortingOrder);
                
                      instance.sort = function(){
                        var args = Array.prototype.slice.call(arguments);
                
                        return plugin.sortByColumn.apply(instance, args)
                      };
                
                      if (typeof instance.getSettings().observeChanges == 'undefined'){
                        enableObserveChangesPlugin.call(instance);
                      }
                
                      if (source == 'afterInit') {
                        bindColumnSortingAfterClick.call(instance);
                
                        instance.addHook('afterCreateRow', plugin.afterCreateRow);
                        instance.addHook('afterRemoveRow', plugin.afterRemoveRow);
                        instance.addHook('afterLoadData', plugin.init);
                      }
                    } else {
                      delete instance.sort;
                
                      instance.removeHook('afterCreateRow', plugin.afterCreateRow);
                      instance.removeHook('afterRemoveRow', plugin.afterRemoveRow);
                      instance.removeHook('afterLoadData', plugin.init);
                    }
                  };
                
                  this.setSortingColumn = function (col, order) {
                    var instance = this;
                
                    if (typeof col == 'undefined') {
                      delete instance.sortColumn;
                      delete instance.sortOrder;
                
                      return;
                    } else if (instance.sortColumn === col && typeof order == 'undefined') {
                      instance.sortOrder = !instance.sortOrder;
                    } else {
                      instance.sortOrder = typeof order != 'undefined' ? order : true;
                    }
                
                    instance.sortColumn = col;
                
                  };
                
                  this.sortByColumn = function (col, order) {
                    var instance = this;
                
                    plugin.setSortingColumn.call(instance, col, order);
                
                    if(typeof instance.sortColumn == 'undefined'){
                      return;
                    }
                
                    instance.PluginHooks.run('beforeColumnSort', instance.sortColumn, instance.sortOrder);
                
                    plugin.sort.call(instance);
                    instance.render();
                
                    saveSortingState.call(instance);
                
                    instance.PluginHooks.run('afterColumnSort', instance.sortColumn, instance.sortOrder);
                  };
                
                  var saveSortingState = function () {
                    var instance = this;
                
                    var sortingState = {};
                
                    if (typeof instance.sortColumn != 'undefined') {
                      sortingState.sortColumn = instance.sortColumn;
                    }
                
                    if (typeof instance.sortOrder != 'undefined') {
                      sortingState.sortOrder = instance.sortOrder;
                    }
                
                    if (sortingState.hasOwnProperty('sortColumn') || sortingState.hasOwnProperty('sortOrder')) {
                      instance.PluginHooks.run('persistentStateSave', 'columnSorting', sortingState);
                    }
                
                  };
                
                  var loadSortingState = function () {
                    var instance = this;
                    var storedState = {};
                    instance.PluginHooks.run('persistentStateLoad', 'columnSorting', storedState);
                
                    return storedState.value;
                  };
                
                  var bindColumnSortingAfterClick = function () {
                    var instance = this;
                
                    instance.rootElement.on('click.handsontable', '.columnSorting', function (e) {
                      if (instance.view.wt.wtDom.hasClass(e.target, 'columnSorting')) {
                        var col = getColumn(e.target);
                        plugin.sortByColumn.call(instance, col);
                      }
                    });
                
                    function countRowHeaders() {
                      var THs = instance.view.TBODY.querySelector('tr').querySelectorAll('th');
                      return THs.length;
                    }
                
                    function getColumn(target) {
                      var TH = instance.view.wt.wtDom.closest(target, 'TH');
                      return instance.view.wt.wtDom.index(TH) - countRowHeaders();
                    }
                  };
                
                  function enableObserveChangesPlugin () {
                    var instance = this;
                    instance.registerTimeout('enableObserveChanges', function(){
                      instance.updateSettings({
                        observeChanges: true
                      });
                    }, 0);
                  }
                
                  function defaultSort(sortOrder) {
                    return function (a, b) {
                      if (a[1] === b[1]) {
                        return 0;
                      }
                      if (a[1] === null) {
                        return 1;
                      }
                      if (b[1] === null) {
                        return -1;
                      }
                      if (a[1] < b[1]) return sortOrder ? -1 : 1;
                      if (a[1] > b[1]) return sortOrder ? 1 : -1;
                      return 0;
                    }
                  }
                
                  function dateSort(sortOrder) {
                    return function (a, b) {
                      if (a[1] === b[1]) {
                        return 0;
                      }
                      if (a[1] === null) {
                        return 1;
                      }
                      if (b[1] === null) {
                        return -1;
                      }
                
                      var aDate = new Date(a[1]);
                      var bDate = new Date(b[1]);
                
                      if (aDate < bDate) return sortOrder ? -1 : 1;
                      if (aDate > bDate) return sortOrder ? 1 : -1;
                
                      return 0;
                    }
                  }
                
                  this.sort = function () {
                    var instance = this;
                
                    if (typeof instance.sortOrder == 'undefined') {
                      return;
                    }
                
                    instance.sortingEnabled = false; //this is required by translateRow plugin hook
                    instance.sortIndex.length = 0;
                
                    var colOffset = this.colOffset();
                    for (var i = 0, ilen = this.countRows() - instance.getSettings()['minSpareRows']; i < ilen; i++) {
                      this.sortIndex.push([i, instance.getDataAtCell(i, this.sortColumn + colOffset)]);
                    }
                
                    var colMeta = instance.getCellMeta(0, instance.sortColumn);
                    var sortFunction;
                    switch (colMeta.type) {
                      case 'date':
                        sortFunction = dateSort;
                        break;
                      default:
                        sortFunction = defaultSort;
                    }
                
                    this.sortIndex.sort(sortFunction(instance.sortOrder));
                
                    //Append spareRows
                    for(var i = this.sortIndex.length; i < instance.countRows(); i++){
                      this.sortIndex.push([i, instance.getDataAtCell(i, this.sortColumn + colOffset)]);
                    }
                
                    instance.sortingEnabled = true; //this is required by translateRow plugin hook
                  };
                
                  this.translateRow = function (row) {
                    var instance = this;
                
                    if (instance.sortingEnabled && instance.sortIndex && instance.sortIndex.length && instance.sortIndex[row]) {
                      return instance.sortIndex[row][0];
                    }
                
                    return row;
                  };
                
                  this.onBeforeGetSet = function (getVars) {
                    var instance = this;
                    getVars.row = plugin.translateRow.call(instance, getVars.row);
                  };
                
                  this.untranslateRow = function (row) {
                    var instance = this;
                    if (instance.sortingEnabled && instance.sortIndex && instance.sortIndex.length) {
                      for (var i = 0; i < instance.sortIndex.length; i++) {
                        if (instance.sortIndex[i][0] == row) {
                          return i;
                        }
                      }
                    }
                  };
                
                  this.getColHeader = function (col, TH) {
                    if (this.getSettings().columnSorting) {
                      this.view.wt.wtDom.addClass(TH.querySelector('.colHeader'), 'columnSorting');
                    }
                  };
                
                  function isSorted(instance){
                    return typeof instance.sortColumn != 'undefined';
                  }
                
                  this.afterCreateRow = function(index, amount){
                    var instance = this;
                
                    if(!isSorted(instance)){
                      return;
                    }
                
                
                    for(var i = 0; i < instance.sortIndex.length; i++){
                      if (instance.sortIndex[i][0] >= index){
                        instance.sortIndex[i][0] += amount;
                      }
                    }
                
                    for(var i=0; i < amount; i++){
                      instance.sortIndex.splice(index+i, 0, [index+i, instance.getData()[index+i][instance.sortColumn + instance.colOffset()]]);
                    }
                
                
                
                    saveSortingState.call(instance);
                
                  };
                
                  this.afterRemoveRow = function(index, amount){
                    var instance = this;
                
                    if(!isSorted(instance)){
                      return;
                    }
                
                    var physicalRemovedIndex = plugin.translateRow.call(instance, index);
                
                    instance.sortIndex.splice(index, amount);
                
                    for(var i = 0; i < instance.sortIndex.length; i++){
                
                      if (instance.sortIndex[i][0] > physicalRemovedIndex){
                        instance.sortIndex[i][0] -= amount;
                      }
                    }
                
                    saveSortingState.call(instance);
                
                  };
                
                  this.afterChangeSort = function (changes/*, source*/) {
                    var instance = this;
                    var sortColumnChanged = false;
                    var selection = {};
                    if (!changes) {
                      return;
                    }
                
                    for (var i = 0; i < changes.length; i++) {
                      if (changes[i][1] == instance.sortColumn) {
                        sortColumnChanged = true;
                        selection.row = plugin.translateRow.call(instance, changes[i][0]);
                        selection.col = changes[i][1];
                        break;
                      }
                    }
                
                    if (sortColumnChanged) {
                      setTimeout(function () {
                        plugin.sort.call(instance);
                        instance.render();
                        instance.selectCell(plugin.untranslateRow.call(instance, selection.row), selection.col);
                      }, 0);
                    }
                  };
                }
                var htSortColumn = new HandsontableColumnSorting();
                
                Handsontable.PluginHooks.add('afterInit', function () {
                  htSortColumn.init.call(this, 'afterInit')
                });
                Handsontable.PluginHooks.add('afterUpdateSettings', function () {
                  htSortColumn.init.call(this, 'afterUpdateSettings')
                });
                Handsontable.PluginHooks.add('beforeGet', htSortColumn.onBeforeGetSet);
                Handsontable.PluginHooks.add('beforeSet', htSortColumn.onBeforeGetSet);
                Handsontable.PluginHooks.add('afterGetColHeader', htSortColumn.getColHeader);
                
                
                (function (Handsontable) {
                  
                
                  function ContextMenu(instance, customOptions){
                    this.instance = instance;
                    var contextMenu = this;
                
                    this.menu = createMenu();
                    this.enabled = true;
                
                    this.bindMouseEvents();
                    this.bindTableEvents();
                
                    this.instance.addHook('afterDestroy', function () {
                       contextMenu.destroy();
                    });
                
                    this.defaultOptions = {
                      items: {
                        'row_above': {
                          name: 'Insert row above',
                          callback: function(key, selection){
                            this.alter("insert_row", selection.start.row());
                          },
                          disabled: function () {
                            return this.countRows() >= this.getSettings().maxRows;
                          }
                        },
                        'row_below': {
                          name: 'Insert row below',
                          callback: function(key, selection){
                            this.alter("insert_row", selection.end.row() + 1);
                          },
                          disabled: function () {
                            return this.countRows() >= this.getSettings().maxRows;
                          }
                        },
                        "hsep1": ContextMenu.SEPARATOR,
                        'col_left': {
                          name: 'Insert column on the left',
                          callback: function(key, selection){
                            this.alter("insert_col", selection.start.col());
                          },
                          disabled: function () {
                            return this.countCols() >= this.getSettings().maxCols;
                          }
                        },
                        'col_right': {
                          name: 'Insert column on the right',
                          callback: function(key, selection){
                            this.alter("insert_col", selection.end.col() + 1);
                          },
                          disabled: function () {
                            return this.countCols() >= this.getSettings().maxCols;
                          }
                        },
                        "hsep2": ContextMenu.SEPARATOR,
                        'remove_row': {
                          name: 'Remove row',
                          callback: function(key, selection){
                            var amount = selection.end.row() - selection.start.row() + 1;
                            this.alter("remove_row", selection.start.row(), amount);
                          }
                        },
                        'remove_col': {
                          name: 'Remove column',
                          callback: function(key, selection){
                            var amount = selection.end.col() - selection.start.col() + 1;
                            this.alter("remove_col", selection.start.col(), amount);
                          }
                        },
                        "hsep3": ContextMenu.SEPARATOR,
                        'undo': {
                          name: 'Undo',
                          callback: function(){
                            this.undo();
                          },
                          disabled: function () {
                            return this.undoRedo && !this.undoRedo.isUndoAvailable();
                          }
                        },
                        'redo': {
                          name: 'Redo',
                          callback: function(){
                            this.redo();
                          },
                          disabled: function () {
                            return this.undoRedo && !this.undoRedo.isRedoAvailable();
                          }
                        }
                
                      }
                    };
                
                    this.options = {};
                    Handsontable.helper.extend(this.options, this.defaultOptions);
                
                    this.updateOptions(customOptions);
                
                    function createMenu(){
                
                      var menu = $('body > .htContextMenu')[0];
                
                      if(!menu){
                        menu = document.createElement('DIV');
                        Handsontable.Dom.addClass(menu, 'htContextMenu');
                        document.getElementsByTagName('body')[0].appendChild(menu);
                      }
                
                      return menu;
                    }
                  }
                
                  ContextMenu.prototype.bindMouseEvents = function (){
                
                    function contextMenuOpenListener(event){
                
                      event.preventDefault();
                
                      if(event.target.nodeName != 'TD' && !(Handsontable.Dom.hasClass(event.target, 'current') && Handsontable.Dom.hasClass(event.target, 'wtBorder'))){
                        return;
                      }
                
                      this.show(event.pageY, event.pageX);
                
                      $(document).on('mousedown.htContextMenu', Handsontable.helper.proxy(ContextMenu.prototype.close, this));
                    }
                
                    this.instance.rootElement.on('contextmenu.htContextMenu', Handsontable.helper.proxy(contextMenuOpenListener, this));
                
                  };
                
                  ContextMenu.prototype.bindTableEvents = function () {
                    var that = this;
                
                    this._afterScrollCallback = function () {
                      that.close();
                    };
                
                    this.instance.addHook('afterScrollVertically', this._afterScrollCallback);
                    this.instance.addHook('afterScrollHorizontally', this._afterScrollCallback);
                  };
                
                  ContextMenu.prototype.unbindTableEvents = function () {
                    var that = this;
                
                    if(this._afterScrollCallback){
                      this.instance.removeHook('afterScrollVertically', this._afterScrollCallback);
                      this.instance.removeHook('afterScrollHorizontally', this._afterScrollCallback);
                      this._afterScrollCallback = null;
                    }
                
                
                  };
                
                  ContextMenu.prototype.performAction = function (){
                
                    var hot = $(this.menu).handsontable('getInstance');
                    var selectedItemIndex = hot.getSelected()[0];
                    var selectedItem = hot.getData()[selectedItemIndex];
                
                    if (selectedItem.disabled === true || (typeof selectedItem.disabled == 'function' && selectedItem.disabled.call(this.instance) === true)){
                      return;
                    }
                
                    if(typeof selectedItem.callback != 'function'){
                      return;
                    }
                
                    var corners = this.instance.getSelected();
                    var normalizedSelection = ContextMenu.utils.normalizeSelection(corners);
                
                    selectedItem.callback.call(this.instance, selectedItem.key, normalizedSelection);
                
                  };
                
                  ContextMenu.prototype.unbindMouseEvents = function () {
                    this.instance.rootElement.off('contextmenu.htContextMenu');
                    $(document).off('mousedown.htContextMenu');
                  };
                
                  ContextMenu.prototype.show = function(top, left){
                
                    this.menu.style.display = 'block';
                
                    $(this.menu)
                      .off('mousedown.htContextMenu')
                      .on('mousedown.htContextMenu', Handsontable.helper.proxy(this.performAction, this));
                
                    $(this.menu).handsontable({
                      data: ContextMenu.utils.convertItemsToArray(this.getItems()),
                      colHeaders: false,
                      colWidths: [160],
                      readOnly: true,
                      copyPaste: false,
                      columns: [
                        {
                          data: 'name',
                          renderer: Handsontable.helper.proxy(this.renderer, this)
                        }
                      ],
                      beforeKeyDown: Handsontable.helper.proxy(this.onBeforeKeyDown, this)
                    });
                    this.bindTableEvents();
                
                    this.setMenuPosition(top, left);
                
                    $(this.menu).handsontable('listen');
                
                  };
                
                  ContextMenu.prototype.close = function () {
                    this.hide();
                    $(document).off('mousedown.htContextMenu');
                    this.unbindTableEvents();
                    this.instance.listen();
                  };
                
                  ContextMenu.prototype.hide = function(){
                    this.menu.style.display = 'none';
                    $(this.menu).handsontable('destroy');
                  };
                
                  ContextMenu.prototype.renderer = function(instance, TD, row, col, prop, value, cellProperties){
                    var contextMenu = this;
                    var item = instance.getData()[row];
                    var wrapper = document.createElement('DIV');
                
                    Handsontable.Dom.empty(TD);
                    TD.appendChild(wrapper);
                
                    if(itemIsSeparator(item)){
                      Handsontable.Dom.addClass(TD, 'htSeparator');
                    } else {
                      Handsontable.Dom.fastInnerText(wrapper, value);
                    }
                
                    if (itemIsDisabled(item, contextMenu.instance)){
                      Handsontable.Dom.addClass(TD, 'htDisabled');
                
                      $(wrapper).on('mouseenter', function () {
                        instance.deselectCell();
                      });
                
                    } else {
                      Handsontable.Dom.removeClass(TD, 'htDisabled');
                
                      $(wrapper).on('mouseenter', function () {
                        instance.selectCell(row, col);
                      });
                
                    }
                
                    function itemIsSeparator(item){
                      return new RegExp(ContextMenu.SEPARATOR, 'i').test(item.name);
                    }
                
                    function itemIsDisabled(item, instance){
                      return item.disabled === true || (typeof item.disabled == 'function' && item.disabled.call(contextMenu.instance) === true);
                    }
                  };
                
                  ContextMenu.prototype.onBeforeKeyDown = function (event) {
                    var contextMenu = this;
                    var instance = $(contextMenu.menu).handsontable('getInstance');
                    var selection = instance.getSelected();
                
                    switch(event.keyCode){
                
                      case Handsontable.helper.keyCode.ESCAPE:
                        contextMenu.close();
                        event.preventDefault();
                        event.stopImmediatePropagation();
                        break;
                
                      case Handsontable.helper.keyCode.ENTER:
                        if(instance.getSelected()){
                          contextMenu.performAction();
                          contextMenu.close();
                        }
                        break;
                
                      case Handsontable.helper.keyCode.ARROW_DOWN:
                        if(!selection){
                
                          selectFirstCell(instance);
                
                        } else {
                
                          selectNextCell(selection[0], selection[1], instance);
                
                        }
                
                        event.preventDefault();
                        event.stopImmediatePropagation();
                
                        break;
                
                      case Handsontable.helper.keyCode.ARROW_UP:
                        if(!selection){
                
                          selectLastCell(instance);
                
                        }  else {
                
                          selectPrevCell(selection[0], selection[1], instance);
                
                        }
                
                        event.preventDefault();
                        event.stopImmediatePropagation();
                
                        break;
                
                    }
                
                    function selectFirstCell(instance) {
                
                      var firstCell = instance.getCell(0, 0);
                
                      if(ContextMenu.utils.isSeparator(firstCell) || ContextMenu.utils.isDisabled(firstCell)){
                        selectNextCell(0, 0, instance);
                      } else {
                        instance.selectCell(0, 0);
                      }
                
                    }
                
                
                    function selectLastCell(instance) {
                
                      var lastRow = instance.countRows() - 1;
                      var lastCell = instance.getCell(lastRow, 0);
                
                      if(ContextMenu.utils.isSeparator(lastCell) || ContextMenu.utils.isDisabled(lastCell)){
                        selectPrevCell(lastRow, 0, instance);
                      } else {
                        instance.selectCell(lastRow, 0);
                      }
                
                    }
                
                    function selectNextCell(row, col, instance){
                      var nextRow = row + 1;
                      var nextCell =  nextRow < instance.countRows() ? instance.getCell(nextRow, col) : null;
                
                      if(!nextCell){
                        return;
                      }
                
                      if(ContextMenu.utils.isSeparator(nextCell) || ContextMenu.utils.isDisabled(nextCell)){
                        selectNextCell(nextRow, col, instance);
                      } else {
                        instance.selectCell(nextRow, col);
                      }
                    }
                
                    function selectPrevCell(row, col, instance) {
                
                      var prevRow = row - 1;
                      var prevCell = prevRow >= 0 ? instance.getCell(prevRow, col) : null;
                
                      if (!prevCell) {
                        return;
                      }
                
                      if(ContextMenu.utils.isSeparator(prevCell) || ContextMenu.utils.isDisabled(prevCell)){
                        selectPrevCell(prevRow, col, instance);
                      } else {
                        instance.selectCell(prevRow, col);
                      }
                
                    }
                
                  };
                
                  ContextMenu.prototype.getItems = function () {
                    var items = {};
                    function Item(rawItem){
                      if(typeof rawItem == 'string'){
                        this.name = rawItem;
                      } else {
                        Handsontable.helper.extend(this, rawItem);
                      }
                    }
                    Item.prototype = this.options;
                
                    for(var itemName in this.options.items){
                      if(this.options.items.hasOwnProperty(itemName) && (!this.itemsFilter || this.itemsFilter.indexOf(itemName) != -1)){
                        items[itemName] = new Item(this.options.items[itemName]);
                      }
                    }
                
                    return items;
                
                  };
                
                  ContextMenu.prototype.updateOptions = function(newOptions){
                    newOptions = newOptions || {};
                
                    if(newOptions.items){
                      for(var itemName in newOptions.items){
                        var item = {};
                
                        if(newOptions.items.hasOwnProperty(itemName)) {
                          if(this.defaultOptions.items.hasOwnProperty(itemName)
                            && Handsontable.helper.isObject(newOptions.items[itemName])){
                            Handsontable.helper.extend(item, this.defaultOptions.items[itemName]);
                            Handsontable.helper.extend(item, newOptions.items[itemName]);
                            newOptions.items[itemName] = item;
                          }
                        }
                
                      }
                    }
                
                    Handsontable.helper.extend(this.options, newOptions);
                  };
                
                  ContextMenu.prototype.setMenuPosition = function (cursorY, cursorX) {
                
                    var cursor = {
                      top:  cursorY,
                      topRelative: cursorY - document.documentElement.scrollTop,
                      left: cursorX,
                      leftRelative:cursorX - document.documentElement.scrollLeft
                    };
                
                    if(this.menuFitsBelowCursor(cursor)){
                      this.positionMenuBelowCursor(cursor);
                    } else {
                      this.positionMenuAboveCursor(cursor);
                    }
                
                    if(this.menuFitsOnRightOfCursor(cursor)){
                      this.positionMenuOnRightOfCursor(cursor);
                    } else {
                      this.positionMenuOnLeftOfCursor(cursor);
                    }
                
                  };
                
                  ContextMenu.prototype.menuFitsBelowCursor = function (cursor) {
                    return cursor.topRelative + this.menu.offsetHeight <= document.documentElement.scrollTop + document.documentElement.clientHeight;
                  };
                
                  ContextMenu.prototype.menuFitsOnRightOfCursor = function (cursor) {
                    return cursor.leftRelative + this.menu.offsetWidth <= document.documentElement.scrollLeft + document.documentElement.clientWidth;
                  };
                
                  ContextMenu.prototype.positionMenuBelowCursor = function (cursor) {
                    this.menu.style.top = cursor.top + 'px';
                  };
                
                  ContextMenu.prototype.positionMenuAboveCursor = function (cursor) {
                    this.menu.style.top = (cursor.top - this.menu.offsetHeight) + 'px';
                  };
                
                  ContextMenu.prototype.positionMenuOnRightOfCursor = function (cursor) {
                    this.menu.style.left = cursor.left + 'px';
                  };
                
                  ContextMenu.prototype.positionMenuOnLeftOfCursor = function (cursor) {
                    this.menu.style.left = (cursor.left - this.menu.offsetWidth) + 'px';
                  };
                
                  ContextMenu.utils = {};
                  ContextMenu.utils.convertItemsToArray = function (items) {
                    var itemArray = [];
                    var item;
                    for(var itemName in items){
                      if(items.hasOwnProperty(itemName)){
                        if(typeof items[itemName] == 'string'){
                          item = {name: items[itemName]};
                        } else if (items[itemName].visible !== false) {
                          item = items[itemName];
                        } else {
                          continue;
                        }
                
                        item.key = itemName;
                        itemArray.push(item);
                      }
                    }
                
                    return itemArray;
                  };
                
                  ContextMenu.utils.normalizeSelection = function(corners){
                    var selection = {
                      start: new Handsontable.SelectionPoint(),
                      end: new Handsontable.SelectionPoint()
                    };
                
                    selection.start.row(Math.min(corners[0], corners[2]));
                    selection.start.col(Math.min(corners[1], corners[3]));
                
                    selection.end.row(Math.max(corners[0], corners[2]));
                    selection.end.col(Math.max(corners[1], corners[3]));
                
                    return selection;
                  };
                
                  ContextMenu.utils.isSeparator = function (cell) {
                    return Handsontable.Dom.hasClass(cell, 'htSeparator');
                  };
                
                  ContextMenu.utils.isDisabled = function (cell) {
                    return Handsontable.Dom.hasClass(cell, 'htDisabled');
                  };
                
                  ContextMenu.prototype.enable = function () {
                    if(!this.enabled){
                      this.enabled = true;
                      this.bindMouseEvents();
                    }
                  };
                
                  ContextMenu.prototype.disable = function () {
                    if(this.enabled){
                      this.enabled = false;
                      this.close();
                      this.unbindMouseEvents();
                      this.unbindTableEvents();
                    }
                  };
                
                  ContextMenu.prototype.destroy = function () {
                    this.close();
                    this.unbindMouseEvents();
                    this.unbindTableEvents();
                
                    if(!this.isMenuEnabledByOtherHotInstance()){
                      this.removeMenu();
                    }
                
                  };
                
                  ContextMenu.prototype.isMenuEnabledByOtherHotInstance = function () {
                    var hotContainers = $('.handsontable');
                    var menuEnabled = false;
                
                    for(var i = 0, len = hotContainers.length; i < len; i++){
                      var instance = $(hotContainers[i]).handsontable('getInstance');
                      if(instance && instance.getSettings().contextMenu){
                        menuEnabled = true;
                        break;
                      }
                    }
                
                    return menuEnabled;
                  };
                
                  ContextMenu.prototype.removeMenu = function () {
                    if(this.menu.parentNode){
                      this.menu.parentNode.removeChild(this.menu);
                    }
                  }
                
                  ContextMenu.prototype.filterItems = function(itemsToLeave){
                    this.itemsFilter = itemsToLeave;
                  };
                
                  ContextMenu.SEPARATOR = "---------";
                
                  function init(){
                    var instance = this;
                    var contextMenuSetting = instance.getSettings().contextMenu;
                    var customOptions = Handsontable.helper.isObject(contextMenuSetting) ? contextMenuSetting : {};
                
                    if(contextMenuSetting){
                      if(!instance.contextMenu){
                        instance.contextMenu = new ContextMenu(instance, customOptions);
                      }
                
                      instance.contextMenu.enable();
                
                      if(Handsontable.helper.isArray(contextMenuSetting)){
                        instance.contextMenu.filterItems(contextMenuSetting);
                      }
                
                    }  else if(instance.contextMenu){
                      instance.contextMenu.destroy();
                      delete instance.contextMenu;
                    }
                
                
                
                  }
                
                  Handsontable.PluginHooks.add('afterInit', init);
                  Handsontable.PluginHooks.add('afterUpdateSettings', init);
                
                  Handsontable.ContextMenu = ContextMenu;
                
                })(Handsontable);
                
                /**
                 * This plugin adds support for legacy features, deprecated APIs, etc.
                 */
                
                /**
                 * Support for old autocomplete syntax
                 * For old syntax, see: https://github.com/warpech/jquery-handsontable/blob/8c9e701d090ea4620fe08b6a1a048672fadf6c7e/README.md#defining-autocomplete
                 */
                Handsontable.PluginHooks.add('beforeGetCellMeta', function (row, col, cellProperties) {
                  //isWritable - deprecated since 0.8.0
                  cellProperties.isWritable = !cellProperties.readOnly;
                
                  //autocomplete - deprecated since 0.7.1 (see CHANGELOG.md)
                  if (cellProperties.autoComplete) {
                    throw new Error("Support for legacy autocomplete syntax was removed in Handsontable 0.10.0. Please remove the property named 'autoComplete' from your config. For replacement instructions, see wiki page https://github.com/warpech/jquery-handsontable/wiki/Migration-guide-to-0.10.x");
                  }
                });
                function HandsontableManualColumnMove() {
                  var pressed
                    , startCol
                    , endCol
                    , startX
                    , startOffset;
                
                  var ghost = document.createElement('DIV')
                    , ghostStyle = ghost.style;
                
                  ghost.className = 'ghost';
                  ghostStyle.position = 'absolute';
                  ghostStyle.top = '25px';
                  ghostStyle.left = 0;
                  ghostStyle.width = '10px';
                  ghostStyle.height = '10px';
                  ghostStyle.backgroundColor = '#CCC';
                  ghostStyle.opacity = 0.7;
                
                  var saveManualColumnPositions = function () {
                    var instance = this;
                
                    instance.PluginHooks.run('persistentStateSave', 'manualColumnPositions', instance.manualColumnPositions);
                  };
                
                  var loadManualColumnPositions = function () {
                    var instance = this;
                    var storedState = {};
                    instance.PluginHooks.run('persistentStateLoad', 'manualColumnPositions', storedState);
                
                    return storedState.value;
                  };
                
                
                  var bindMoveColEvents = function () {
                    var instance = this;
                
                    instance.rootElement.on('mousemove.manualColumnMove', function (e) {
                      if (pressed) {
                        ghostStyle.left = startOffset + e.pageX - startX + 6 + 'px';
                        if (ghostStyle.display === 'none') {
                          ghostStyle.display = 'block';
                        }
                      }
                    });
                
                    instance.rootElement.on('mouseup.manualColumnMove', function () {
                      if (pressed) {
                        if (startCol < endCol) {
                          endCol--;
                        }
                        if (instance.getSettings().rowHeaders) {
                          startCol--;
                          endCol--;
                        }
                        instance.manualColumnPositions.splice(endCol, 0, instance.manualColumnPositions.splice(startCol, 1)[0]);
                        $('.manualColumnMover.active').removeClass('active');
                        pressed = false;
                        instance.forceFullRender = true;
                        instance.view.render(); //updates all
                        ghostStyle.display = 'none';
                
                        saveManualColumnPositions.call(instance);
                
                        instance.PluginHooks.run('afterColumnMove', startCol, endCol);
                      }
                    });
                
                    instance.rootElement.on('mousedown.manualColumnMove', '.manualColumnMover', function (e) {
                
                      var mover = e.currentTarget;
                      var TH = instance.view.wt.wtDom.closest(mover, 'TH');
                      startCol = instance.view.wt.wtDom.index(TH) + instance.colOffset();
                      endCol = startCol;
                      pressed = true;
                      startX = e.pageX;
                
                      var TABLE = instance.$table[0];
                      TABLE.parentNode.appendChild(ghost);
                      ghostStyle.width = instance.view.wt.wtDom.outerWidth(TH) + 'px';
                      ghostStyle.height = instance.view.wt.wtDom.outerHeight(TABLE) + 'px';
                      startOffset = parseInt(instance.view.wt.wtDom.offset(TH).left - instance.view.wt.wtDom.offset(TABLE).left, 10);
                      ghostStyle.left = startOffset + 6 + 'px';
                    });
                
                    instance.rootElement.on('mouseenter.manualColumnMove', 'td, th', function () {
                      if (pressed) {
                        var active = instance.view.THEAD.querySelector('.manualColumnMover.active');
                        if (active) {
                          instance.view.wt.wtDom.removeClass(active, 'active');
                        }
                        endCol = instance.view.wt.wtDom.index(this) + instance.colOffset();
                        var THs = instance.view.THEAD.querySelectorAll('th');
                        var mover = THs[endCol].querySelector('.manualColumnMover');
                        instance.view.wt.wtDom.addClass(mover, 'active');
                      }
                    });
                
                    instance.addHook('afterDestroy', unbindMoveColEvents);
                  };
                
                  var unbindMoveColEvents = function(){
                    var instance = this;
                    instance.rootElement.off('mouseup.manualColumnMove');
                    instance.rootElement.off('mousemove.manualColumnMove');
                    instance.rootElement.off('mousedown.manualColumnMove');
                    instance.rootElement.off('mouseenter.manualColumnMove');
                  };
                
                  this.beforeInit = function () {
                    this.manualColumnPositions = [];
                  };
                
                  this.init = function (source) {
                    var instance = this;
                
                    var manualColMoveEnabled = !!(this.getSettings().manualColumnMove);
                
                    if (manualColMoveEnabled) {
                      var initialManualColumnPositions = this.getSettings().manualColumnMove;
                
                      var loadedManualColumnPositions = loadManualColumnPositions.call(instance);
                
                      if (typeof loadedManualColumnPositions != 'undefined') {
                        this.manualColumnPositions = loadedManualColumnPositions;
                      } else if (initialManualColumnPositions instanceof Array) {
                        this.manualColumnPositions = initialManualColumnPositions;
                      } else {
                        this.manualColumnPositions = [];
                      }
                
                
                      instance.forceFullRender = true;
                
                      if (source == 'afterInit') {
                        bindMoveColEvents.call(this);
                        if (this.manualColumnPositions.length > 0) {
                          this.forceFullRender = true;
                          this.render();
                        }
                
                      }
                
                    } else {
                      unbindMoveColEvents.call(this);
                      this.manualColumnPositions = [];
                    }
                  };
                
                  this.modifyCol = function (col) {
                    //TODO test performance: http://jsperf.com/object-wrapper-vs-primitive/2
                    if (this.getSettings().manualColumnMove) {
                      if (typeof this.manualColumnPositions[col] === 'undefined') {
                        this.manualColumnPositions[col] = col;
                      }
                      return this.manualColumnPositions[col];
                    }
                    return col;
                  };
                
                  this.getColHeader = function (col, TH) {
                    if (this.getSettings().manualColumnMove) {
                      var DIV = document.createElement('DIV');
                      DIV.className = 'manualColumnMover';
                      TH.firstChild.appendChild(DIV);
                    }
                  };
                }
                var htManualColumnMove = new HandsontableManualColumnMove();
                
                Handsontable.PluginHooks.add('beforeInit', htManualColumnMove.beforeInit);
                Handsontable.PluginHooks.add('afterInit', function () {
                  htManualColumnMove.init.call(this, 'afterInit')
                });
                
                Handsontable.PluginHooks.add('afterUpdateSettings', function () {
                  htManualColumnMove.init.call(this, 'afterUpdateSettings')
                });
                Handsontable.PluginHooks.add('afterGetColHeader', htManualColumnMove.getColHeader);
                Handsontable.PluginHooks.add('modifyCol', htManualColumnMove.modifyCol);
                
                function HandsontableManualColumnResize() {
                  var pressed
                    , currentTH
                    , currentCol
                    , currentWidth
                    , instance
                    , newSize
                    , startX
                    , startWidth
                    , startOffset
                    , resizer = document.createElement('DIV')
                    , handle = document.createElement('DIV')
                    , line = document.createElement('DIV')
                    , lineStyle = line.style;
                
                  resizer.className = 'manualColumnResizer';
                
                  handle.className = 'manualColumnResizerHandle';
                  resizer.appendChild(handle);
                
                  line.className = 'manualColumnResizerLine';
                  resizer.appendChild(line);
                
                  var $document = $(document);
                
                  $document.mousemove(function (e) {
                    if (pressed) {
                      currentWidth = startWidth + (e.pageX - startX);
                      newSize = setManualSize(currentCol, currentWidth); //save col width
                      resizer.style.left = startOffset + currentWidth + 'px';
                    }
                  });
                
                  $document.mouseup(function () {
                    if (pressed) {
                      instance.view.wt.wtDom.removeClass(resizer, 'active');
                      pressed = false;
                
                      if(newSize != startWidth){
                        instance.forceFullRender = true;
                        instance.view.render(); //updates all
                
                        saveManualColumnWidths.call(instance);
                
                        instance.PluginHooks.run('afterColumnResize', currentCol, newSize);
                      }
                
                      refreshResizerPosition.call(instance, currentTH);
                    }
                  });
                
                  var saveManualColumnWidths = function () {
                    var instance = this;
                
                    instance.PluginHooks.run('persistentStateSave', 'manualColumnWidths', instance.manualColumnWidths);
                  };
                
                  var loadManualColumnWidths = function () {
                    var instance = this;
                    var storedState = {};
                    instance.PluginHooks.run('persistentStateLoad', 'manualColumnWidths', storedState);
                
                    return storedState.value;
                  };
                
                  function refreshResizerPosition(TH) {
                    instance = this;
                    currentTH = TH;
                
                    var col = this.view.wt.wtTable.getCoords(TH)[1]; //getCoords returns array [row, col]
                    if (col >= 0) { //if not row header
                      currentCol = col;
                      var rootOffset = this.view.wt.wtDom.offset(this.rootElement[0]).left;
                      var thOffset = this.view.wt.wtDom.offset(TH).left;
                      startOffset = (thOffset - rootOffset) - 6;
                      resizer.style.left = startOffset + parseInt(this.view.wt.wtDom.outerWidth(TH), 10) + 'px';
                
                      this.rootElement[0].appendChild(resizer);
                    }
                  }
                
                  function refreshLinePosition() {
                    var instance = this;
                    startWidth = parseInt(this.view.wt.wtDom.outerWidth(currentTH), 10);
                    instance.view.wt.wtDom.addClass(resizer, 'active');
                    lineStyle.height = instance.view.wt.wtDom.outerHeight(instance.$table[0]) + 'px';
                    pressed = instance;
                  }
                
                  var bindManualColumnWidthEvents = function () {
                    var instance = this;
                    var dblclick = 0;
                    var autoresizeTimeout = null;
                
                    this.rootElement.on('mouseenter.handsontable', 'th', function (e) {
                      if (!pressed) {
                        refreshResizerPosition.call(instance, e.currentTarget);
                      }
                    });
                
                    this.rootElement.on('mousedown.handsontable', '.manualColumnResizer', function () {
                      if (autoresizeTimeout == null) {
                        autoresizeTimeout = setTimeout(function () {
                          if (dblclick >= 2) {
                            newSize = instance.determineColumnWidth.call(instance, currentCol);
                            setManualSize(currentCol, newSize);
                            instance.forceFullRender = true;
                            instance.view.render(); //updates all
                            instance.PluginHooks.run('afterColumnResize', currentCol, newSize);
                          }
                          dblclick = 0;
                          autoresizeTimeout = null;
                        }, 500);
                      }
                      dblclick++;
                    });
                
                    this.rootElement.on('mousedown.handsontable', '.manualColumnResizer', function (e) {
                      startX = e.pageX;
                      refreshLinePosition.call(instance);
                      newSize = startWidth;
                    });
                  };
                
                  this.beforeInit = function () {
                    this.manualColumnWidths = [];
                  };
                
                  this.init = function (source) {
                    var instance = this;
                    var manualColumnWidthEnabled = !!(this.getSettings().manualColumnResize);
                
                    if (manualColumnWidthEnabled) {
                      var initialColumnWidths = this.getSettings().manualColumnResize;
                
                      var loadedManualColumnWidths = loadManualColumnWidths.call(instance);
                
                      if (typeof loadedManualColumnWidths != 'undefined') {
                        this.manualColumnWidths = loadedManualColumnWidths;
                      } else if (initialColumnWidths instanceof Array) {
                        this.manualColumnWidths = initialColumnWidths;
                      } else {
                        this.manualColumnWidths = [];
                      }
                
                      if (source == 'afterInit') {
                        bindManualColumnWidthEvents.call(this);
                        instance.forceFullRender = true;
                        instance.render();
                      }
                    }
                  };
                
                
                  var setManualSize = function (col, width) {
                    width = Math.max(width, 20);
                
                    /**
                     *  We need to run col through modifyCol hook, in case the order of displayed columns is different than the order
                     *  in data source. For instance, this order can be modified by manualColumnMove plugin.
                     */
                    col = instance.PluginHooks.execute('modifyCol', col);
                
                    instance.manualColumnWidths[col] = width;
                    return width;
                  };
                
                  this.getColWidth = function (col, response) {
                    if (this.getSettings().manualColumnResize && this.manualColumnWidths[col]) {
                      response.width = this.manualColumnWidths[col];
                    }
                  };
                }
                var htManualColumnResize = new HandsontableManualColumnResize();
                
                Handsontable.PluginHooks.add('beforeInit', htManualColumnResize.beforeInit);
                Handsontable.PluginHooks.add('afterInit', function () {
                  htManualColumnResize.init.call(this, 'afterInit')
                });
                Handsontable.PluginHooks.add('afterUpdateSettings', function () {
                  htManualColumnResize.init.call(this, 'afterUpdateSettings')
                });
                Handsontable.PluginHooks.add('afterGetColWidth', htManualColumnResize.getColWidth);
                
                (function HandsontableObserveChanges() {
                
                  Handsontable.PluginHooks.add('afterLoadData', init);
                  Handsontable.PluginHooks.add('afterUpdateSettings', init);
                
                  function init() {
                    var instance = this;
                    var pluginEnabled = instance.getSettings().observeChanges;
                
                    if (pluginEnabled) {
                      if(instance.observer) {
                        destroy.call(instance); //destroy observer for old data object
                      }
                      createObserver.call(instance);
                      bindEvents.call(instance);
                
                    } else if (!pluginEnabled){
                      destroy.call(instance);
                    }
                  }
                
                  function createObserver(){
                    var instance = this;
                
                    instance.observeChangesActive = true;
                
                    instance.pauseObservingChanges = function(){
                      instance.observeChangesActive = false;
                    };
                
                    instance.resumeObservingChanges = function(){
                      instance.observeChangesActive = true;
                    };
                
                    instance.observedData = instance.getData();
                    instance.observer = jsonpatch.observe(instance.observedData, function (patches) {
                      if(instance.observeChangesActive){
                        runHookForOperation.call(instance, patches);
                        instance.render();
                      }
                
                      instance.runHooks('afterChangesObserved');
                    });
                  }
                
                  function runHookForOperation(rawPatches){
                    var instance = this;
                    var patches = cleanPatches(rawPatches);
                
                    for(var i = 0, len = patches.length; i < len; i++){
                      var patch = patches[i];
                      var parsedPath = parsePath(patch.path);
                
                
                      switch(patch.op){
                        case 'add':
                          if(isNaN(parsedPath.col)){
                            instance.runHooks('afterCreateRow', parsedPath.row);
                          } else {
                            instance.runHooks('afterCreateCol', parsedPath.col);
                          }
                          break;
                
                        case 'remove':
                          if(isNaN(parsedPath.col)){
                            instance.runHooks('afterRemoveRow', parsedPath.row, 1);
                          } else {
                            instance.runHooks('afterRemoveCol', parsedPath.col, 1);
                          }
                          break;
                
                        case 'replace':
                          instance.runHooks('afterChange', [parsedPath.row, parsedPath.col, null, patch.value], 'external');
                          break;
                      }
                    }
                
                    function cleanPatches(rawPatches){
                      var patches;
                
                      patches = removeLengthRelatedPatches(rawPatches);
                      patches = removeMultipleAddOrRemoveColPatches(patches);
                
                      return patches;
                    }
                
                    /**
                     * Removing or adding column will produce one patch for each table row.
                     * This function leaves only one patch for each column add/remove operation
                     */
                    function removeMultipleAddOrRemoveColPatches(rawPatches){
                      var newOrRemovedColumns = [];
                
                      return rawPatches.filter(function(patch){
                        var parsedPath = parsePath(patch.path);
                
                        if(['add', 'remove'].indexOf(patch.op) != -1 && !isNaN(parsedPath.col)){
                          if(newOrRemovedColumns.indexOf(parsedPath.col) != -1){
                            return false;
                          } else {
                            newOrRemovedColumns.push(parsedPath.col);
                          }
                        }
                
                        return true;
                      });
                
                    }
                
                    /**
                     * If observeChanges uses native Object.observe method, then it produces patches for length property.
                     * This function removes them.
                     */
                    function removeLengthRelatedPatches(rawPatches){
                      return rawPatches.filter(function(patch){
                        return !/[/]length/ig.test(patch.path);
                      })
                    }
                
                    function parsePath(path){
                      var match = path.match(/^\/(\d+)\/?(.*)?$/);
                      return {
                        row: parseInt(match[1], 10),
                        col: /^\d*$/.test(match[2]) ? parseInt(match[2], 10) : match[2]
                      }
                    }
                  }
                
                  function destroy(){
                    var instance = this;
                
                    if (instance.observer){
                      destroyObserver.call(instance);
                      unbindEvents.call(instance);
                    }
                  }
                
                  function destroyObserver(){
                    var instance = this;
                
                    jsonpatch.unobserve(instance.observedData, instance.observer);
                    delete instance.observeChangesActive;
                    delete instance.pauseObservingChanges;
                    delete instance.resumeObservingChanges;
                  }
                
                  function bindEvents(){
                    var instance = this;
                    instance.addHook('afterDestroy', destroy);
                
                    instance.addHook('afterCreateRow', afterTableAlter);
                    instance.addHook('afterRemoveRow', afterTableAlter);
                
                    instance.addHook('afterCreateCol', afterTableAlter);
                    instance.addHook('afterRemoveCol', afterTableAlter);
                
                    instance.addHook('afterChange', function(changes, source){
                      if(source != 'loadData'){
                        afterTableAlter.call(this);
                      }
                    });
                  }
                
                  function unbindEvents(){
                    var instance = this;
                    instance.removeHook('afterDestroy', destroy);
                
                    instance.removeHook('afterCreateRow', afterTableAlter);
                    instance.removeHook('afterRemoveRow', afterTableAlter);
                
                    instance.removeHook('afterCreateCol', afterTableAlter);
                    instance.removeHook('afterRemoveCol', afterTableAlter);
                
                    instance.removeHook('afterChange', afterTableAlter);
                  }
                
                  function afterTableAlter(){
                    var instance = this;
                
                    instance.pauseObservingChanges();
                
                    instance.addHookOnce('afterChangesObserved', function(){
                      instance.resumeObservingChanges();
                    });
                
                  }
                })();
                
                
                /*
                 *
                 * Plugin enables saving table state
                 *
                 * */
                
                
                function Storage(prefix) {
                
                  var savedKeys;
                
                  var saveSavedKeys = function () {
                    window.localStorage[prefix + '__' + 'persistentStateKeys'] = JSON.stringify(savedKeys);
                  };
                
                  var loadSavedKeys = function () {
                    var keysJSON = window.localStorage[prefix + '__' + 'persistentStateKeys'];
                    var keys = typeof keysJSON == 'string' ? JSON.parse(keysJSON) : void 0;
                    savedKeys = keys ? keys : [];
                  };
                
                  var clearSavedKeys = function () {
                    savedKeys = [];
                    saveSavedKeys();
                  };
                
                  loadSavedKeys();
                
                  this.saveValue = function (key, value) {
                    window.localStorage[prefix + '_' + key] = JSON.stringify(value);
                    if (savedKeys.indexOf(key) == -1) {
                      savedKeys.push(key);
                      saveSavedKeys();
                    }
                
                  };
                
                  this.loadValue = function (key, defaultValue) {
                
                    key = typeof key != 'undefined' ? key : defaultValue;
                
                    var value = window.localStorage[prefix + '_' + key];
                
                    return typeof value == "undefined" ? void 0 : JSON.parse(value);
                
                  };
                
                  this.reset = function (key) {
                    window.localStorage.removeItem(prefix + '_' + key);
                  };
                
                  this.resetAll = function () {
                    for (var index = 0; index < savedKeys.length; index++) {
                      window.localStorage.removeItem(prefix + '_' + savedKeys[index]);
                    }
                
                    clearSavedKeys();
                  };
                
                }
                
                
                (function (StorageClass) {
                  function HandsontablePersistentState() {
                    var plugin = this;
                
                
                    this.init = function () {
                      var instance = this,
                        pluginSettings = instance.getSettings()['persistentState'];
                
                      plugin.enabled = !!(pluginSettings);
                
                      if (!plugin.enabled) {
                        removeHooks.call(instance);
                        return;
                      }
                
                      if (!instance.storage) {
                        instance.storage = new StorageClass(instance.rootElement[0].id);
                      }
                
                      instance.resetState = plugin.resetValue;
                
                      addHooks.call(instance);
                
                    };
                
                    this.saveValue = function (key, value) {
                      var instance = this;
                
                      instance.storage.saveValue(key, value);
                    };
                
                    this.loadValue = function (key, saveTo) {
                      var instance = this;
                
                      saveTo.value = instance.storage.loadValue(key);
                    };
                
                    this.resetValue = function (key) {
                      var instance = this;
                
                      if (typeof  key != 'undefined') {
                        instance.storage.reset(key);
                      } else {
                        instance.storage.resetAll();
                      }
                
                    };
                
                    var hooks = {
                      'persistentStateSave': plugin.saveValue,
                      'persistentStateLoad': plugin.loadValue,
                      'persistentStateReset': plugin.resetValue
                    };
                
                    function addHooks() {
                      var instance = this;
                
                      for (var hookName in hooks) {
                        if (hooks.hasOwnProperty(hookName) && !hookExists.call(instance, hookName)) {
                          instance.PluginHooks.add(hookName, hooks[hookName]);
                        }
                      }
                    }
                
                    function removeHooks() {
                      var instance = this;
                
                      for (var hookName in hooks) {
                        if (hooks.hasOwnProperty(hookName) && hookExists.call(instance, hookName)) {
                          instance.PluginHooks.remove(hookName, hooks[hookName]);
                        }
                      }
                    }
                
                    function hookExists(hookName) {
                      var instance = this;
                      return instance.PluginHooks.hooks.hasOwnProperty(hookName);
                    }
                  }
                
                  var htPersistentState = new HandsontablePersistentState();
                  Handsontable.PluginHooks.add('beforeInit', htPersistentState.init);
                  Handsontable.PluginHooks.add('afterUpdateSettings', htPersistentState.init);
                })(Storage);
                
                /**
                 * Handsontable UndoRedo class
                 */
                (function(Handsontable){
                  Handsontable.UndoRedo = function (instance) {
                    var plugin = this;
                    this.instance = instance;
                    this.doneActions = [];
                    this.undoneActions = [];
                    this.ignoreNewActions = false;
                    instance.addHook("afterChange", function (changes, origin) {
                      if(changes){
                        var action = new Handsontable.UndoRedo.ChangeAction(changes);
                        plugin.done(action);
                      }
                    });
                
                    instance.addHook("afterCreateRow", function (index, amount, createdAutomatically) {
                
                      if (createdAutomatically) {
                        return;
                      }
                
                      var action = new Handsontable.UndoRedo.CreateRowAction(index, amount);
                      plugin.done(action);
                    });
                
                    instance.addHook("beforeRemoveRow", function (index, amount) {
                      var originalData = plugin.instance.getData();
                      index = ( originalData.length + index ) % originalData.length;
                      var removedData = originalData.slice(index, index + amount);
                      var action = new Handsontable.UndoRedo.RemoveRowAction(index, removedData);
                      plugin.done(action);
                    });
                
                    instance.addHook("afterCreateCol", function (index, amount, createdAutomatically) {
                
                      if (createdAutomatically) {
                        return;
                      }
                
                      var action = new Handsontable.UndoRedo.CreateColumnAction(index, amount);
                      plugin.done(action);
                    });
                
                    instance.addHook("beforeRemoveCol", function (index, amount) {
                      var originalData = plugin.instance.getData();
                      index = ( plugin.instance.countCols() + index ) % plugin.instance.countCols();
                      var removedData = [];
                
                      for (var i = 0, len = originalData.length; i < len; i++) {
                        removedData[i] = originalData[i].slice(index, index + amount);
                      }
                
                      var headers;
                      if(Handsontable.helper.isArray(instance.getSettings().colHeaders)){
                        headers = instance.getSettings().colHeaders.slice(index, index + removedData.length);
                      }
                
                      var action = new Handsontable.UndoRedo.RemoveColumnAction(index, removedData, headers);
                      plugin.done(action);
                    });
                  };
                
                  Handsontable.UndoRedo.prototype.done = function (action) {
                    if (!this.ignoreNewActions) {
                      this.doneActions.push(action);
                      this.undoneActions.length = 0;
                    }
                  };
                
                  /**
                   * Undo operation from current revision
                   */
                  Handsontable.UndoRedo.prototype.undo = function () {
                    if (this.isUndoAvailable()) {
                      var action = this.doneActions.pop();
                
                      this.ignoreNewActions = true;
                      var that = this;
                      action.undo(this.instance, function () {
                        that.ignoreNewActions = false;
                        that.undoneActions.push(action);
                      });
                
                
                
                    }
                  };
                
                  /**
                   * Redo operation from current revision
                   */
                  Handsontable.UndoRedo.prototype.redo = function () {
                    if (this.isRedoAvailable()) {
                      var action = this.undoneActions.pop();
                
                      this.ignoreNewActions = true;
                      var that = this;
                      action.redo(this.instance, function () {
                        that.ignoreNewActions = false;
                        that.doneActions.push(action);
                      });
                
                
                
                    }
                  };
                
                  /**
                   * Returns true if undo point is available
                   * @return {Boolean}
                   */
                  Handsontable.UndoRedo.prototype.isUndoAvailable = function () {
                    return this.doneActions.length > 0;
                  };
                
                  /**
                   * Returns true if redo point is available
                   * @return {Boolean}
                   */
                  Handsontable.UndoRedo.prototype.isRedoAvailable = function () {
                    return this.undoneActions.length > 0;
                  };
                
                  /**
                   * Clears undo history
                   */
                  Handsontable.UndoRedo.prototype.clear = function () {
                    this.doneActions.length = 0;
                    this.undoneActions.length = 0;
                  };
                
                  Handsontable.UndoRedo.Action = function () {
                  };
                  Handsontable.UndoRedo.Action.prototype.undo = function () {
                  };
                  Handsontable.UndoRedo.Action.prototype.redo = function () {
                  };
                
                  Handsontable.UndoRedo.ChangeAction = function (changes) {
                    this.changes = changes;
                  };
                  Handsontable.helper.inherit(Handsontable.UndoRedo.ChangeAction, Handsontable.UndoRedo.Action);
                  Handsontable.UndoRedo.ChangeAction.prototype.undo = function (instance, undoneCallback) {
                    var data = $.extend(true, [], this.changes);
                    for (var i = 0, len = data.length; i < len; i++) {
                      data[i].splice(3, 1);
                    }
                
                    instance.addHookOnce('afterChange', undoneCallback);
                
                    instance.setDataAtRowProp(data, null, null, 'undo');
                
                  };
                  Handsontable.UndoRedo.ChangeAction.prototype.redo = function (instance, onFinishCallback) {
                    var data = $.extend(true, [], this.changes);
                    for (var i = 0, len = data.length; i < len; i++) {
                      data[i].splice(2, 1);
                    }
                
                    instance.addHookOnce('afterChange', onFinishCallback);
                
                    instance.setDataAtRowProp(data, null, null, 'redo');
                
                  };
                
                  Handsontable.UndoRedo.CreateRowAction = function (index, amount) {
                    this.index = index;
                    this.amount = amount;
                  };
                  Handsontable.helper.inherit(Handsontable.UndoRedo.CreateRowAction, Handsontable.UndoRedo.Action);
                  Handsontable.UndoRedo.CreateRowAction.prototype.undo = function (instance, undoneCallback) {
                    instance.addHookOnce('afterRemoveRow', undoneCallback);
                    instance.alter('remove_row', this.index, this.amount);
                  };
                  Handsontable.UndoRedo.CreateRowAction.prototype.redo = function (instance, redoneCallback) {
                    instance.addHookOnce('afterCreateRow', redoneCallback);
                    instance.alter('insert_row', this.index + 1, this.amount);
                  };
                
                  Handsontable.UndoRedo.RemoveRowAction = function (index, data) {
                    this.index = index;
                    this.data = data;
                  };
                  Handsontable.helper.inherit(Handsontable.UndoRedo.RemoveRowAction, Handsontable.UndoRedo.Action);
                  Handsontable.UndoRedo.RemoveRowAction.prototype.undo = function (instance, undoneCallback) {
                    var spliceArgs = [this.index, 0];
                    Array.prototype.push.apply(spliceArgs, this.data);
                
                    Array.prototype.splice.apply(instance.getData(), spliceArgs);
                
                    instance.addHookOnce('afterRender', undoneCallback);
                    instance.render();
                  };
                  Handsontable.UndoRedo.RemoveRowAction.prototype.redo = function (instance, redoneCallback) {
                    instance.addHookOnce('afterRemoveRow', redoneCallback);
                    instance.alter('remove_row', this.index, this.data.length);
                  };
                
                  Handsontable.UndoRedo.CreateColumnAction = function (index, amount) {
                    this.index = index;
                    this.amount = amount;
                  };
                  Handsontable.helper.inherit(Handsontable.UndoRedo.CreateColumnAction, Handsontable.UndoRedo.Action);
                  Handsontable.UndoRedo.CreateColumnAction.prototype.undo = function (instance, undoneCallback) {
                    instance.addHookOnce('afterRemoveCol', undoneCallback);
                    instance.alter('remove_col', this.index, this.amount);
                  };
                  Handsontable.UndoRedo.CreateColumnAction.prototype.redo = function (instance, redoneCallback) {
                    instance.addHookOnce('afterCreateCol', redoneCallback);
                    instance.alter('insert_col', this.index + 1, this.amount);
                  };
                
                  Handsontable.UndoRedo.RemoveColumnAction = function (index, data, headers) {
                    this.index = index;
                    this.data = data;
                    this.amount = this.data[0].length;
                    this.headers = headers;
                  };
                  Handsontable.helper.inherit(Handsontable.UndoRedo.RemoveColumnAction, Handsontable.UndoRedo.Action);
                  Handsontable.UndoRedo.RemoveColumnAction.prototype.undo = function (instance, undoneCallback) {
                    var row, spliceArgs;
                    for (var i = 0, len = instance.getData().length; i < len; i++) {
                      row = instance.getDataAtRow(i);
                
                      spliceArgs = [this.index, 0];
                      Array.prototype.push.apply(spliceArgs, this.data[i]);
                
                      Array.prototype.splice.apply(row, spliceArgs);
                
                    }
                
                    if(typeof this.headers != 'undefined'){
                      spliceArgs = [this.index, 0];
                      Array.prototype.push.apply(spliceArgs, this.headers);
                      Array.prototype.splice.apply(instance.getSettings().colHeaders, spliceArgs);
                    }
                
                    instance.addHookOnce('afterRender', undoneCallback);
                    instance.render();
                  };
                  Handsontable.UndoRedo.RemoveColumnAction.prototype.redo = function (instance, redoneCallback) {
                    instance.addHookOnce('afterRemoveCol', redoneCallback);
                    instance.alter('remove_col', this.index, this.amount);
                  };
                })(Handsontable);
                
                (function(Handsontable){
                
                  function init(){
                    var instance = this;
                    var pluginEnabled = typeof instance.getSettings().undo == 'undefined' || instance.getSettings().undo;
                
                    if(pluginEnabled){
                      if(!instance.undoRedo){
                        instance.undoRedo = new Handsontable.UndoRedo(instance);
                
                        exposeUndoRedoMethods(instance);
                
                        instance.addHook('beforeKeyDown', onBeforeKeyDown);
                        instance.addHook('afterChange', onAfterChange);
                      }
                    } else {
                      if(instance.undoRedo){
                        delete instance.undoRedo;
                
                        removeExposedUndoRedoMethods(instance);
                
                        instance.removeHook('beforeKeyDown', onBeforeKeyDown);
                        instance.removeHook('afterChange', onAfterChange);
                      }
                    }
                  }
                
                  function onBeforeKeyDown(event){
                    var instance = this;
                
                    var ctrlDown = (event.ctrlKey || event.metaKey) && !event.altKey;
                
                    if(ctrlDown){
                      if (event.keyCode === 89 || (event.shiftKey && event.keyCode === 90)) { //CTRL + Y or CTRL + SHIFT + Z
                        instance.undoRedo.redo();
                        event.stopImmediatePropagation();
                      }
                      else if (event.keyCode === 90) { //CTRL + Z
                        instance.undoRedo.undo();
                        event.stopImmediatePropagation();
                      }
                    }
                  }
                
                  function onAfterChange(changes, source){
                    var instance = this;
                    if (source == 'loadData'){
                      return instance.undoRedo.clear();
                    }
                  }
                
                  function exposeUndoRedoMethods(instance){
                    instance.undo = function(){
                      return instance.undoRedo.undo();
                    };
                
                    instance.redo = function(){
                      return instance.undoRedo.redo();
                    };
                
                    instance.isUndoAvailable = function(){
                      return instance.undoRedo.isUndoAvailable();
                    };
                
                    instance.isRedoAvailable = function(){
                      return instance.undoRedo.isRedoAvailable();
                    };
                
                    instance.clearUndo = function(){
                      return instance.undoRedo.clear();
                    };
                  }
                
                  function removeExposedUndoRedoMethods(instance){
                    delete instance.undo;
                    delete instance.redo;
                    delete instance.isUndoAvailable;
                    delete instance.isRedoAvailable;
                    delete instance.clearUndo;
                  }
                
                  Handsontable.PluginHooks.add('afterInit', init);
                  Handsontable.PluginHooks.add('afterUpdateSettings', init);
                
                })(Handsontable);
                /**
                 * Plugin used to scroll Handsontable by selecting a cell and dragging outside of visible viewport
                 * @constructor
                 */
                function DragToScroll() {
                  this.boundaries = null;
                  this.callback = null;
                }
                
                /**
                 * @param boundaries {Object} compatible with getBoundingClientRect
                 */
                DragToScroll.prototype.setBoundaries = function (boundaries) {
                  this.boundaries = boundaries;
                };
                
                /**
                 * @param callback {Function}
                 */
                DragToScroll.prototype.setCallback = function (callback) {
                  this.callback = callback;
                };
                
                /**
                 * Check if mouse position (x, y) is outside of the viewport
                 * @param x
                 * @param y
                 */
                DragToScroll.prototype.check = function (x, y) {
                  var diffX = 0;
                  var diffY = 0;
                
                  if (y < this.boundaries.top) {
                    //y is less than top
                    diffY = y - this.boundaries.top;
                  }
                  else if (y > this.boundaries.bottom) {
                    //y is more than bottom
                    diffY = y - this.boundaries.bottom;
                  }
                
                  if (x < this.boundaries.left) {
                    //x is less than left
                    diffX = x - this.boundaries.left;
                  }
                  else if (x > this.boundaries.right) {
                    //x is more than right
                    diffX = x - this.boundaries.right;
                  }
                
                  this.callback(diffX, diffY);
                };
                
                var listening = false;
                var dragToScroll;
                var instance;
                
                if (typeof Handsontable !== 'undefined') {
                  var setupListening = function (instance) {
                    var scrollHandler = instance.view.wt.wtScrollbars.vertical.scrollHandler; //native scroll
                    dragToScroll = new DragToScroll();
                    if (scrollHandler === window) {
                      //not much we can do currently
                      return;
                    }
                    else if (scrollHandler) {
                      dragToScroll.setBoundaries(scrollHandler.getBoundingClientRect());
                    }
                    else {
                      dragToScroll.setBoundaries(instance.$table[0].getBoundingClientRect());
                    }
                
                    dragToScroll.setCallback(function (scrollX, scrollY) {
                      if (scrollX < 0) {
                        if (scrollHandler) {
                          scrollHandler.scrollLeft -= 50;
                        }
                        else {
                          instance.view.wt.scrollHorizontal(-1).draw();
                        }
                      }
                      else if (scrollX > 0) {
                        if (scrollHandler) {
                          scrollHandler.scrollLeft += 50;
                        }
                        else {
                          instance.view.wt.scrollHorizontal(1).draw();
                        }
                      }
                
                      if (scrollY < 0) {
                        if (scrollHandler) {
                          scrollHandler.scrollTop -= 20;
                        }
                        else {
                          instance.view.wt.scrollVertical(-1).draw();
                        }
                      }
                      else if (scrollY > 0) {
                        if (scrollHandler) {
                          scrollHandler.scrollTop += 20;
                        }
                        else {
                          instance.view.wt.scrollVertical(1).draw();
                        }
                      }
                    });
                
                    listening = true;
                  };
                
                  Handsontable.PluginHooks.add('afterInit', function () {
                    $(document).on('mouseup.' + this.guid, function () {
                      listening = false;
                    });
                
                    $(document).on('mousemove.' + this.guid, function (event) {
                      if (listening) {
                        dragToScroll.check(event.clientX, event.clientY);
                      }
                    });
                  });
                
                  Handsontable.PluginHooks.add('destroy', function () {
                    $(document).off('.' + this.guid);
                  });
                
                  Handsontable.PluginHooks.add('afterOnCellMouseDown', function () {
                    setupListening(this);
                  });
                
                  Handsontable.PluginHooks.add('afterOnCellCornerMouseDown', function () {
                    setupListening(this);
                  });
                
                  Handsontable.plugins.DragToScroll = DragToScroll;
                }
                
                (function (Handsontable, CopyPaste, SheetClip) {
                
                  function CopyPastePlugin(instance) {
                    this.copyPasteInstance = CopyPaste.getInstance();
                
                    this.copyPasteInstance.onCut(onCut);
                    this.copyPasteInstance.onPaste(onPaste);
                    var plugin = this;
                
                    instance.addHook('beforeKeyDown', onBeforeKeyDown);
                
                    function onCut() {
                      if (!instance.isListening()) {
                        return;
                      }
                
                      instance.selection.empty();
                    }
                
                    function onPaste(str) {
                      if (!instance.isListening() || !instance.selection.isSelected()) {
                        return;
                      }
                
                      var input = str.replace(/^[\r\n]*/g, '').replace(/[\r\n]*$/g, '') //remove newline from the start and the end of the input
                        , inputArray = SheetClip.parse(input)
                        , selected = instance.getSelected()
                        , coords = instance.getCornerCoords([{row: selected[0], col: selected[1]}, {row: selected[2], col: selected[3]}])
                        , areaStart = coords.TL
                        , areaEnd = {
                          row: Math.max(coords.BR.row, inputArray.length - 1 + coords.TL.row),
                          col: Math.max(coords.BR.col, inputArray[0].length - 1 + coords.TL.col)
                        };
                
                      instance.PluginHooks.once('afterChange', function (changes, source) {
                        if (changes && changes.length) {
                          this.selectCell(areaStart.row, areaStart.col, areaEnd.row, areaEnd.col);
                        }
                      });
                
                      instance.populateFromArray(areaStart.row, areaStart.col, inputArray, areaEnd.row, areaEnd.col, 'paste', instance.getSettings().pasteMode);
                    };
                
                    function onBeforeKeyDown (event) {
                      if (Handsontable.helper.isCtrlKey(event.keyCode) && instance.getSelected()) {
                        //when CTRL is pressed, prepare selectable text in textarea
                        //http://stackoverflow.com/questions/3902635/how-does-one-capture-a-macs-command-key-via-javascript
                        plugin.setCopyableText();
                        event.stopImmediatePropagation();
                        return;
                      }
                
                      var ctrlDown = (event.ctrlKey || event.metaKey) && !event.altKey; //catch CTRL but not right ALT (which in some systems triggers ALT+CTRL)
                
                      if (event.keyCode == Handsontable.helper.keyCode.A && ctrlDown) {
                        setTimeout(Handsontable.helper.proxy(plugin.setCopyableText, plugin));
                      }
                
                    }
                
                    this.destroy = function () {
                      this.copyPasteInstance.removeCallback(onCut);
                      this.copyPasteInstance.removeCallback(onPaste);
                      this.copyPasteInstance.destroy();
                      instance.removeHook('beforeKeyDown', onBeforeKeyDown);
                    };
                
                    instance.addHook('afterDestroy', Handsontable.helper.proxy(this.destroy, this));
                
                    this.triggerPaste = Handsontable.helper.proxy(this.copyPasteInstance.triggerPaste, this.copyPasteInstance);
                    this.triggerCut = Handsontable.helper.proxy(this.copyPasteInstance.triggerCut, this.copyPasteInstance);
                
                    /**
                     * Prepares copyable text in the invisible textarea
                     */
                    this.setCopyableText = function () {
                
                      var selection = instance.getSelected();
                      var settings = instance.getSettings();
                      var copyRowsLimit = settings.copyRowsLimit;
                      var copyColsLimit = settings.copyColsLimit;
                
                      var startRow = Math.min(selection[0], selection[2]);
                      var startCol = Math.min(selection[1], selection[3]);
                      var endRow = Math.max(selection[0], selection[2]);
                      var endCol = Math.max(selection[1], selection[3]);
                      var finalEndRow = Math.min(endRow, startRow + copyRowsLimit - 1);
                      var finalEndCol = Math.min(endCol, startCol + copyColsLimit - 1);
                
                      instance.copyPaste.copyPasteInstance.copyable(instance.getCopyableData(startRow, startCol, finalEndRow, finalEndCol));
                
                      if (endRow !== finalEndRow || endCol !== finalEndCol) {
                        instance.PluginHooks.run("afterCopyLimit", endRow - startRow + 1, endCol - startCol + 1, copyRowsLimit, copyColsLimit);
                      }
                    };
                
                  }
                
                
                
                  function init() {
                    var instance  = this;
                    var pluginEnabled = instance.getSettings().copyPaste !== false;
                
                    if(pluginEnabled && !instance.copyPaste){
                
                      instance.copyPaste = new CopyPastePlugin(instance);
                
                    } else if (!pluginEnabled && instance.copyPaste) {
                
                      instance.copyPaste.destroy();
                      delete instance.copyPaste;
                
                    }
                
                  }
                
                  Handsontable.PluginHooks.add('afterInit', init);
                  Handsontable.PluginHooks.add('afterUpdateSettings', init);
                
                })(Handsontable, CopyPaste, SheetClip);
                (function (Handsontable) {
                
                  
                
                  Handsontable.Search = function Search(instance) {
                    this.query = function (queryStr, callback, queryMethod) {
                      var rowCount = instance.countRows();
                      var colCount = instance.countCols();
                      var queryResult = [];
                
                      if (!callback) {
                        callback = Handsontable.Search.global.getDefaultCallback();
                      }
                
                      if (!queryMethod) {
                        queryMethod = Handsontable.Search.global.getDefaultQueryMethod();
                      }
                
                      for (var rowIndex = 0; rowIndex < rowCount; rowIndex++) {
                        for (var colIndex = 0; colIndex < colCount; colIndex++) {
                          var cellData = instance.getDataAtCell(rowIndex, colIndex);
                          var cellProperties = instance.getCellMeta(rowIndex, colIndex);
                          var cellCallback = cellProperties.search.callback || callback;
                          var cellQueryMethod = cellProperties.search.queryMethod || queryMethod;
                          var testResult = cellQueryMethod(queryStr, cellData);
                
                          if (testResult) {
                            var singleResult = {
                              row: rowIndex,
                              col: colIndex,
                              data: cellData
                            };
                
                            queryResult.push(singleResult);
                          }
                
                          if (cellCallback) {
                            cellCallback(instance, rowIndex, colIndex, cellData, testResult);
                          }
                        }
                      }
                
                      return queryResult;
                
                    };
                
                  };
                
                  Handsontable.Search.DEFAULT_CALLBACK = function (instance, row, col, data, testResult) {
                    instance.getCellMeta(row, col).isSearchResult = testResult;
                  };
                
                  Handsontable.Search.DEFAULT_QUERY_METHOD = function (query, value) {
                
                    if (typeof query == 'undefined' || query == null || !query.toLowerCase || query.length == 0){
                      return false;
                    }
                
                    return value.toString().toLowerCase().indexOf(query.toLowerCase()) != -1;
                  };
                
                  Handsontable.Search.DEFAULT_SEARCH_RESULT_CLASS = 'htSearchResult';
                
                  Handsontable.Search.global = (function () {
                
                    var defaultCallback = Handsontable.Search.DEFAULT_CALLBACK;
                    var defaultQueryMethod = Handsontable.Search.DEFAULT_QUERY_METHOD;
                    var defaultSearchResultClass = Handsontable.Search.DEFAULT_SEARCH_RESULT_CLASS;
                
                    return {
                      getDefaultCallback: function () {
                        return defaultCallback;
                      },
                
                      setDefaultCallback: function (newDefaultCallback) {
                        defaultCallback = newDefaultCallback;
                      },
                
                      getDefaultQueryMethod: function () {
                        return defaultQueryMethod;
                      },
                
                      setDefaultQueryMethod: function (newDefaultQueryMethod) {
                        defaultQueryMethod = newDefaultQueryMethod;
                      },
                
                      getDefaultSearchResultClass: function () {
                        return defaultSearchResultClass;
                      },
                
                      setDefaultSearchResultClass: function (newSearchResultClass) {
                        defaultSearchResultClass = newSearchResultClass;
                      }
                    }
                
                  })();
                
                
                
                  Handsontable.SearchCellDecorator = function (instance, TD, row, col, prop, value, cellProperties) {
                
                    var searchResultClass = (typeof cellProperties.search == 'object' && cellProperties.search.searchResultClass) || Handsontable.Search.global.getDefaultSearchResultClass();
                
                    if(cellProperties.isSearchResult){
                      Handsontable.Dom.addClass(TD, searchResultClass);
                    } else {
                      Handsontable.Dom.removeClass(TD, searchResultClass);
                    }
                  };
                
                
                
                  var originalDecorator = Handsontable.renderers.cellDecorator;
                
                  Handsontable.renderers.cellDecorator = function (instance, TD, row, col, prop, value, cellProperties) {
                    originalDecorator.apply(this, arguments);
                    Handsontable.SearchCellDecorator.apply(this, arguments);
                  };
                
                  function init() {
                    var instance = this;
                
                    var pluginEnabled = !!instance.getSettings().search;
                
                    if (pluginEnabled) {
                      instance.search = new Handsontable.Search(instance);
                    } else {
                      delete instance.search;
                    }
                
                  }
                
                  Handsontable.PluginHooks.add('afterInit', init);
                  Handsontable.PluginHooks.add('afterUpdateSettings', init);
                
                
                })(Handsontable);
                /**
                 * Creates an overlay over the original Walkontable instance. The overlay renders the clone of the original Walkontable
                 * and (optionally) implements behavior needed for native horizontal and vertical scrolling
                 */
                function WalkontableOverlay() {
                  this.maxOuts = 10; //max outs in one direction (before and after table)
                }
                
                /*
                 Possible optimizations:
                 [x] don't rerender if scroll delta is smaller than the fragment outside of the viewport
                 [ ] move .style.top change before .draw()
                 [ ] put .draw() in requestAnimationFrame
                 [ ] don't rerender rows that remain visible after the scroll
                 */
                
                WalkontableOverlay.prototype.init = function () {
                  this.TABLE = this.instance.wtTable.TABLE;
                  this.fixed = this.instance.wtTable.hider;
                  this.fixedContainer = this.instance.wtTable.holder;
                  this.fixed.style.position = 'absolute';
                  this.fixed.style.left = '0';
                  this.scrollHandler = this.getScrollableElement(this.TABLE);
                  this.$scrollHandler = $(this.scrollHandler); //in future remove jQuery from here
                };
                
                WalkontableOverlay.prototype.makeClone = function (direction) {
                  var clone = document.createElement('DIV');
                  clone.className = 'ht_clone_' + direction + ' handsontable';
                  clone.style.position = 'fixed';
                  clone.style.overflow = 'hidden';
                
                  var table2 = document.createElement('TABLE');
                  table2.className = this.instance.wtTable.TABLE.className;
                  clone.appendChild(table2);
                
                  this.instance.wtTable.holder.parentNode.appendChild(clone);
                
                  return new Walkontable({
                    cloneSource: this.instance,
                    cloneOverlay: this,
                    table: table2
                  });
                };
                
                WalkontableOverlay.prototype.getScrollableElement = function (TABLE) {
                  var el = TABLE.parentNode;
                  while (el && el.style) {
                    if (el.style.overflow !== 'visible' && el.style.overflow !== '') {
                      return el;
                    }
                    if (this instanceof WalkontableHorizontalScrollbarNative && el.style.overflowX !== 'visible' && el.style.overflowX !== '') {
                      return el;
                    }
                    el = el.parentNode;
                  }
                  return window;
                };
                
                WalkontableOverlay.prototype.prepare = function () {
                };
                
                WalkontableOverlay.prototype.onScroll = function (forcePosition) {
                
                  this.windowScrollPosition = this.getScrollPosition();
                  this.readSettings(); //read window scroll position
                
                  if (forcePosition) {
                    this.windowScrollPosition = forcePosition;
                  }
                
                  this.resetFixedPosition(); //may be redundant
                };
                
                WalkontableOverlay.prototype.availableSize = function () {
                  var availableSize;
                
                  if (this.windowScrollPosition > this.tableParentOffset /*&& last > -1*/) { //last -1 means that viewport is scrolled behind the table
                    if (this.instance.wtTable.getLastVisibleRow() === this.total - 1) {
                      availableSize = this.instance.wtDom.outerHeight(this.TABLE);
                    }
                    else {
                      availableSize = this.windowSize;
                    }
                  }
                  else {
                    availableSize = this.windowSize - (this.tableParentOffset);
                  }
                
                  return availableSize;
                };
                
                WalkontableOverlay.prototype.refresh = function (selectionsOnly) {
                  var last = this.getLastCell();
                  this.measureBefore = this.sumCellSizes(0, this.offset);
                  if (last === -1) { //last -1 means that viewport is scrolled behind the table
                    this.measureAfter = 0;
                  }
                  else {
                    this.measureAfter = this.sumCellSizes(last, this.total - last);
                  }
                  this.applyToDOM();
                  this.clone && this.clone.draw(selectionsOnly);
                };
                
                WalkontableOverlay.prototype.destroy = function () {
                  this.$scrollHandler.off('.' + this.instance.guid);
                  $(window).off('.' + this.instance.guid);
                  $(document).off('.' + this.instance.guid);
                };
                function WalkontableBorder(instance, settings) {
                  var style;
                
                  //reference to instance
                  this.instance = instance;
                  this.settings = settings;
                  this.wtDom = this.instance.wtDom;
                
                  this.main = document.createElement("div");
                  style = this.main.style;
                  style.position = 'absolute';
                  style.top = 0;
                  style.left = 0;
                //  style.visibility = 'hidden';
                
                  for (var i = 0; i < 5; i++) {
                    var DIV = document.createElement('DIV');
                    DIV.className = 'wtBorder ' + (settings.className || '');
                    style = DIV.style;
                    style.backgroundColor = settings.border.color;
                    style.height = settings.border.width + 'px';
                    style.width = settings.border.width + 'px';
                    this.main.appendChild(DIV);
                  }
                
                  this.top = this.main.childNodes[0];
                  this.left = this.main.childNodes[1];
                  this.bottom = this.main.childNodes[2];
                  this.right = this.main.childNodes[3];
                
                
                  /*$(this.top).on(sss, function(event) {
                   event.preventDefault();
                   event.stopImmediatePropagation();
                   $(this).hide();
                   });
                   $(this.left).on(sss, function(event) {
                   event.preventDefault();
                   event.stopImmediatePropagation();
                   $(this).hide();
                   });
                   $(this.bottom).on(sss, function(event) {
                   event.preventDefault();
                   event.stopImmediatePropagation();
                   $(this).hide();
                   });
                   $(this.right).on(sss, function(event) {
                   event.preventDefault();
                   event.stopImmediatePropagation();
                   $(this).hide();
                   });*/
                
                  this.topStyle = this.top.style;
                  this.leftStyle = this.left.style;
                  this.bottomStyle = this.bottom.style;
                  this.rightStyle = this.right.style;
                
                  this.corner = this.main.childNodes[4];
                  this.corner.className += ' corner';
                  this.cornerStyle = this.corner.style;
                  this.cornerStyle.width = '5px';
                  this.cornerStyle.height = '5px';
                  this.cornerStyle.border = '2px solid #FFF';
                
                  this.disappear();
                  if (!instance.wtTable.bordersHolder) {
                    instance.wtTable.bordersHolder = document.createElement('div');
                    instance.wtTable.bordersHolder.className = 'htBorders';
                    instance.wtTable.hider.appendChild(instance.wtTable.bordersHolder);
                
                  }
                  instance.wtTable.bordersHolder.appendChild(this.main);
                
                  var down = false;
                  var $body = $(document.body);
                
                  $body.on('mousedown.walkontable.' + instance.guid, function () {
                    down = true;
                  });
                
                  $body.on('mouseup.walkontable.' + instance.guid, function () {
                    down = false
                  });
                
                  $(this.main.childNodes).on('mouseenter', function (event) {
                    if (!down || !instance.getSetting('hideBorderOnMouseDownOver')) {
                      return;
                    }
                    event.preventDefault();
                    event.stopImmediatePropagation();
                
                    var bounds = this.getBoundingClientRect();
                
                    var $this = $(this);
                    $this.hide();
                
                    var isOutside = function (event) {
                      if (event.clientY < Math.floor(bounds.top)) {
                        return true;
                      }
                      if (event.clientY > Math.ceil(bounds.top + bounds.height)) {
                        return true;
                      }
                      if (event.clientX < Math.floor(bounds.left)) {
                        return true;
                      }
                      if (event.clientX > Math.ceil(bounds.left + bounds.width)) {
                        return true;
                      }
                    };
                
                    $body.on('mousemove.border.' + instance.guid, function (event) {
                      if (isOutside(event)) {
                        $body.off('mousemove.border.' + instance.guid);
                        $this.show();
                      }
                    });
                  });
                }
                
                /**
                 * Show border around one or many cells
                 * @param {Array} corners
                 */
                WalkontableBorder.prototype.appear = function (corners) {
                  var isMultiple, fromTD, toTD, fromOffset, toOffset, containerOffset, top, minTop, left, minLeft, height, width;
                  if (this.disabled) {
                    return;
                  }
                
                  var instance = this.instance
                    , fromRow
                    , fromColumn
                    , toRow
                    , toColumn
                    , hideTop = false
                    , hideLeft = false
                    , hideBottom = false
                    , hideRight = false
                    , i
                    , ilen
                    , s;
                
                  if (!instance.wtTable.isRowInViewport(corners[0])) {
                    hideTop = true;
                  }
                
                  if (!instance.wtTable.isRowInViewport(corners[2])) {
                    hideBottom = true;
                  }
                
                  ilen = instance.wtTable.rowStrategy.countVisible();
                
                  for (i = 0; i < ilen; i++) {
                    s = instance.wtTable.rowFilter.visibleToSource(i);
                    if (s >= corners[0] && s <= corners[2]) {
                      fromRow = s;
                      break;
                    }
                  }
                
                  for (i = ilen - 1; i >= 0; i--) {
                    s = instance.wtTable.rowFilter.visibleToSource(i);
                    if (s >= corners[0] && s <= corners[2]) {
                      toRow = s;
                      break;
                    }
                  }
                
                  if (hideTop && hideBottom) {
                    hideLeft = true;
                    hideRight = true;
                  }
                  else {
                    if (!instance.wtTable.isColumnInViewport(corners[1])) {
                      hideLeft = true;
                    }
                
                    if (!instance.wtTable.isColumnInViewport(corners[3])) {
                      hideRight = true;
                    }
                
                    ilen = instance.wtTable.columnStrategy.countVisible();
                
                    for (i = 0; i < ilen; i++) {
                      s = instance.wtTable.columnFilter.visibleToSource(i);
                      if (s >= corners[1] && s <= corners[3]) {
                        fromColumn = s;
                        break;
                      }
                    }
                
                    for (i = ilen - 1; i >= 0; i--) {
                      s = instance.wtTable.columnFilter.visibleToSource(i);
                      if (s >= corners[1] && s <= corners[3]) {
                        toColumn = s;
                        break;
                      }
                    }
                  }
                
                  if (fromRow !== void 0 && fromColumn !== void 0) {
                    isMultiple = (fromRow !== toRow || fromColumn !== toColumn);
                    fromTD = instance.wtTable.getCell([fromRow, fromColumn]);
                    toTD = isMultiple ? instance.wtTable.getCell([toRow, toColumn]) : fromTD;
                    fromOffset = this.wtDom.offset(fromTD);
                    toOffset = isMultiple ? this.wtDom.offset(toTD) : fromOffset;
                    containerOffset = this.wtDom.offset(instance.wtTable.TABLE);
                
                    minTop = fromOffset.top;
                    height = toOffset.top + this.wtDom.outerHeight(toTD) - minTop;
                    minLeft = fromOffset.left;
                    width = toOffset.left + this.wtDom.outerWidth(toTD) - minLeft;
                
                    top = minTop - containerOffset.top - 1;
                    left = minLeft - containerOffset.left - 1;
                
                    var style = this.wtDom.getComputedStyle(fromTD);
                    if (parseInt(style['borderTopWidth'], 10) > 0) {
                      top += 1;
                      height = height > 0 ? height - 1 : 0;
                    }
                    if (parseInt(style['borderLeftWidth'], 10) > 0) {
                      left += 1;
                      width = width > 0 ? width - 1 : 0;
                    }
                  }
                  else {
                    this.disappear();
                    return;
                  }
                
                  if (hideTop) {
                    this.topStyle.display = 'none';
                  }
                  else {
                    this.topStyle.top = top + 'px';
                    this.topStyle.left = left + 'px';
                    this.topStyle.width = width + 'px';
                    this.topStyle.display = 'block';
                  }
                
                  if (hideLeft) {
                    this.leftStyle.display = 'none';
                  }
                  else {
                    this.leftStyle.top = top + 'px';
                    this.leftStyle.left = left + 'px';
                    this.leftStyle.height = height + 'px';
                    this.leftStyle.display = 'block';
                  }
                
                  var delta = Math.floor(this.settings.border.width / 2);
                
                  if (hideBottom) {
                    this.bottomStyle.display = 'none';
                  }
                  else {
                    this.bottomStyle.top = top + height - delta + 'px';
                    this.bottomStyle.left = left + 'px';
                    this.bottomStyle.width = width + 'px';
                    this.bottomStyle.display = 'block';
                  }
                
                  if (hideRight) {
                    this.rightStyle.display = 'none';
                  }
                  else {
                    this.rightStyle.top = top + 'px';
                    this.rightStyle.left = left + width - delta + 'px';
                    this.rightStyle.height = height + 1 + 'px';
                    this.rightStyle.display = 'block';
                  }
                
                  if (hideBottom || hideRight || !this.hasSetting(this.settings.border.cornerVisible)) {
                    this.cornerStyle.display = 'none';
                  }
                  else {
                    this.cornerStyle.top = top + height - 4 + 'px';
                    this.cornerStyle.left = left + width - 4 + 'px';
                    this.cornerStyle.display = 'block';
                  }
                };
                
                /**
                 * Hide border
                 */
                WalkontableBorder.prototype.disappear = function () {
                  this.topStyle.display = 'none';
                  this.leftStyle.display = 'none';
                  this.bottomStyle.display = 'none';
                  this.rightStyle.display = 'none';
                  this.cornerStyle.display = 'none';
                };
                
                WalkontableBorder.prototype.hasSetting = function (setting) {
                  if (typeof setting === 'function') {
                    return setting();
                  }
                  return !!setting;
                };
                /**
                 * WalkontableCellFilter
                 * @constructor
                 */
                function WalkontableCellFilter() {
                  this.offset = 0;
                  this.total = 0;
                  this.fixedCount = 0;
                }
                
                WalkontableCellFilter.prototype.source = function (n) {
                  return n;
                };
                
                WalkontableCellFilter.prototype.offsetted = function (n) {
                  return n + this.offset;
                };
                
                WalkontableCellFilter.prototype.unOffsetted = function (n) {
                  return n - this.offset;
                };
                
                WalkontableCellFilter.prototype.fixed = function (n) {
                  if (n < this.fixedCount) {
                    return n - this.offset;
                  }
                  else {
                    return n;
                  }
                };
                
                WalkontableCellFilter.prototype.unFixed = function (n) {
                  if (n < this.fixedCount) {
                    return n + this.offset;
                  }
                  else {
                    return n;
                  }
                };
                
                WalkontableCellFilter.prototype.visibleToSource = function (n) {
                  return this.source(this.offsetted(this.fixed(n)));
                };
                
                WalkontableCellFilter.prototype.sourceToVisible = function (n) {
                  return this.source(this.unOffsetted(this.unFixed(n)));
                };
                /**
                 * WalkontableCellStrategy
                 * @constructor
                 */
                function WalkontableCellStrategy(instance) {
                  this.instance = instance;
                }
                
                WalkontableCellStrategy.prototype.getSize = function (index) {
                  return this.cellSizes[index];
                };
                
                WalkontableCellStrategy.prototype.getContainerSize = function (proposedSize) {
                  return typeof this.containerSizeFn === 'function' ? this.containerSizeFn(proposedSize) : this.containerSizeFn;
                };
                
                WalkontableCellStrategy.prototype.countVisible = function () {
                  return this.cellCount;
                };
                
                WalkontableCellStrategy.prototype.isLastIncomplete = function () {
                
                  if(this.instance.getSetting('nativeScrollbars')){
                
                    var nativeScrollbar = this.instance.cloneFrom ? this.instance.cloneFrom.wtScrollbars.vertical : this.instance.wtScrollbars.vertical;
                    return this.remainingSize > nativeScrollbar.sumCellSizes(nativeScrollbar.offset, nativeScrollbar.offset + nativeScrollbar.curOuts + 1);
                
                  } else {
                    return this.remainingSize > 0;
                  }
                
                };
                /**
                 * WalkontableClassNameList
                 * @constructor
                 */
                function WalkontableClassNameCache() {
                  this.cache = [];
                }
                
                WalkontableClassNameCache.prototype.add = function (r, c, cls) {
                  if (!this.cache[r]) {
                    this.cache[r] = [];
                  }
                  if (!this.cache[r][c]) {
                    this.cache[r][c] = [];
                  }
                  this.cache[r][c][cls] = true;
                };
                
                WalkontableClassNameCache.prototype.test = function (r, c, cls) {
                  return (this.cache[r] && this.cache[r][c] && this.cache[r][c][cls]);
                };
                /**
                 * WalkontableColumnFilter
                 * @constructor
                 */
                function WalkontableColumnFilter() {
                  this.countTH = 0;
                }
                
                WalkontableColumnFilter.prototype = new WalkontableCellFilter();
                
                WalkontableColumnFilter.prototype.readSettings = function (instance) {
                  this.offset = instance.wtSettings.settings.offsetColumn;
                  this.total = instance.getSetting('totalColumns');
                  this.fixedCount = instance.getSetting('fixedColumnsLeft');
                  this.countTH = instance.getSetting('rowHeaders').length;
                };
                
                WalkontableColumnFilter.prototype.offsettedTH = function (n) {
                  return n - this.countTH;
                };
                
                WalkontableColumnFilter.prototype.unOffsettedTH = function (n) {
                  return n + this.countTH;
                };
                
                WalkontableColumnFilter.prototype.visibleRowHeadedColumnToSourceColumn = function (n) {
                  return this.visibleToSource(this.offsettedTH(n));
                };
                
                WalkontableColumnFilter.prototype.sourceColumnToVisibleRowHeadedColumn = function (n) {
                  return this.unOffsettedTH(this.sourceToVisible(n));
                };
                /**
                 * WalkontableColumnStrategy
                 * @param containerSizeFn
                 * @param sizeAtIndex
                 * @param strategy - all, last, none
                 * @constructor
                 */
                function WalkontableColumnStrategy(instance, containerSizeFn, sizeAtIndex, strategy) {
                  var size
                    , i = 0;
                
                  WalkontableCellStrategy.apply(this, arguments);
                
                  this.containerSizeFn = containerSizeFn;
                  this.cellSizesSum = 0;
                  this.cellSizes = [];
                  this.cellStretch = [];
                  this.cellCount = 0;
                  this.remainingSize = 0;
                  this.strategy = strategy;
                
                  //step 1 - determine cells that fit containerSize and cache their widths
                  while (true) {
                    size = sizeAtIndex(i);
                    if (size === void 0) {
                      break; //total columns exceeded
                    }
                    if (this.cellSizesSum >= this.getContainerSize(this.cellSizesSum + size)) {
                      break; //total width exceeded
                    }
                    this.cellSizes.push(size);
                    this.cellSizesSum += size;
                    this.cellCount++;
                
                    i++;
                  }
                
                  var containerSize = this.getContainerSize(this.cellSizesSum);
                  this.remainingSize = this.cellSizesSum - containerSize;
                  //negative value means the last cell is fully visible and there is some space left for stretching
                  //positive value means the last cell is not fully visible
                }
                
                WalkontableColumnStrategy.prototype = new WalkontableCellStrategy();
                
                WalkontableColumnStrategy.prototype.getSize = function (index) {
                  return this.cellSizes[index] + (this.cellStretch[index] || 0);
                };
                
                WalkontableColumnStrategy.prototype.stretch = function () {
                  //step 2 - apply stretching strategy
                  var containerSize = this.getContainerSize(this.cellSizesSum)
                    , i = 0;
                  this.remainingSize = this.cellSizesSum - containerSize;
                
                  this.cellStretch.length = 0; //clear previous stretch
                
                  if (this.strategy === 'all') {
                    if (this.remainingSize < 0) {
                      var ratio = containerSize / this.cellSizesSum;
                      var newSize;
                
                      while (i < this.cellCount - 1) { //"i < this.cellCount - 1" is needed because last cellSize is adjusted after the loop
                        newSize = Math.floor(ratio * this.cellSizes[i]);
                        this.remainingSize += newSize - this.cellSizes[i];
                        this.cellStretch[i] = newSize - this.cellSizes[i];
                        i++;
                      }
                      this.cellStretch[this.cellCount - 1] = -this.remainingSize;
                      this.remainingSize = 0;
                    }
                  }
                  else if (this.strategy === 'last') {
                    if (this.remainingSize < 0 && containerSize !== Infinity) { //Infinity is with native scroll when the table is wider than the viewport (TODO: test)
                      this.cellStretch[this.cellCount - 1] = -this.remainingSize;
                      this.remainingSize = 0;
                    }
                  }
                };
                function Walkontable(settings) {
                  var that = this,
                    originalHeaders = [];
                
                  this.guid = 'wt_' + walkontableRandomString(); //this is the namespace for global events
                
                  //bootstrap from settings
                  this.wtDom = new WalkontableDom();
                  if (settings.cloneSource) {
                    this.cloneSource = settings.cloneSource;
                    this.cloneOverlay = settings.cloneOverlay;
                    this.wtSettings = settings.cloneSource.wtSettings;
                    this.wtTable = new WalkontableTable(this, settings.table);
                    this.wtScroll = new WalkontableScroll(this);
                    this.wtViewport = settings.cloneSource.wtViewport;
                  }
                  else {
                    this.wtSettings = new WalkontableSettings(this, settings);
                    this.wtTable = new WalkontableTable(this, settings.table);
                    this.wtScroll = new WalkontableScroll(this);
                    this.wtViewport = new WalkontableViewport(this);
                    this.wtScrollbars = new WalkontableScrollbars(this);
                    this.wtWheel = new WalkontableWheel(this);
                    this.wtEvent = new WalkontableEvent(this);
                  }
                
                  //find original headers
                  if (this.wtTable.THEAD.childNodes.length && this.wtTable.THEAD.childNodes[0].childNodes.length) {
                    for (var c = 0, clen = this.wtTable.THEAD.childNodes[0].childNodes.length; c < clen; c++) {
                      originalHeaders.push(this.wtTable.THEAD.childNodes[0].childNodes[c].innerHTML);
                    }
                    if (!this.getSetting('columnHeaders').length) {
                      this.update('columnHeaders', [function (column, TH) {
                        that.wtDom.fastInnerText(TH, originalHeaders[column]);
                      }]);
                    }
                  }
                
                  //initialize selections
                  this.selections = {};
                  var selectionsSettings = this.getSetting('selections');
                  if (selectionsSettings) {
                    for (var i in selectionsSettings) {
                      if (selectionsSettings.hasOwnProperty(i)) {
                        this.selections[i] = new WalkontableSelection(this, selectionsSettings[i]);
                      }
                    }
                  }
                
                  this.drawn = false;
                  this.drawInterrupted = false;
                
                  //at this point the cached row heights may be invalid, but it is better not to reset the cache, which could cause scrollbar jumping when there are multiline cells outside of the rendered part of the table
                  /*if (window.Handsontable) {
                    Handsontable.PluginHooks.add('beforeChange', function () {
                      if (that.rowHeightCache) {
                        that.rowHeightCache.length = 0;
                      }
                    });
                
                  }*/
                }
                
                Walkontable.prototype.draw = function (selectionsOnly) {
                  this.drawInterrupted = false;
                  if (!selectionsOnly && !this.wtDom.isVisible(this.wtTable.TABLE)) {
                    this.drawInterrupted = true; //draw interrupted because TABLE is not visible
                    return;
                  }
                
                  this.getSetting('beforeDraw', !selectionsOnly);
                  selectionsOnly = selectionsOnly && this.getSetting('offsetRow') === this.lastOffsetRow && this.getSetting('offsetColumn') === this.lastOffsetColumn;
                  if (this.drawn) { //fix offsets that might have changed
                    this.scrollVertical(0);
                    this.scrollHorizontal(0);
                  }
                  this.lastOffsetRow = this.getSetting('offsetRow');
                  this.lastOffsetColumn = this.getSetting('offsetColumn');
                  this.wtTable.draw(selectionsOnly);
                  if (!this.cloneSource) {
                    this.getSetting('onDraw',  !selectionsOnly);
                  }
                  return this;
                };
                
                Walkontable.prototype.update = function (settings, value) {
                  return this.wtSettings.update(settings, value);
                };
                
                Walkontable.prototype.scrollVertical = function (delta) {
                  var result = this.wtScroll.scrollVertical(delta);
                
                  this.getSetting('onScrollVertically');
                
                  return result;
                };
                
                Walkontable.prototype.scrollHorizontal = function (delta) {
                  var result = this.wtScroll.scrollHorizontal(delta);
                
                  this.getSetting('onScrollHorizontally');
                
                  return result;
                };
                
                Walkontable.prototype.scrollViewport = function (coords) {
                  this.wtScroll.scrollViewport(coords);
                  return this;
                };
                
                Walkontable.prototype.getViewport = function () {
                  return [
                    this.wtTable.rowFilter.visibleToSource(0),
                    this.wtTable.columnFilter.visibleToSource(0),
                    this.wtTable.getLastVisibleRow(),
                    this.wtTable.getLastVisibleColumn()
                  ];
                };
                
                Walkontable.prototype.getSetting = function (key, param1, param2, param3) {
                  return this.wtSettings.getSetting(key, param1, param2, param3);
                };
                
                Walkontable.prototype.hasSetting = function (key) {
                  return this.wtSettings.has(key);
                };
                
                Walkontable.prototype.destroy = function () {
                  $(document.body).off('.' + this.guid);
                  this.wtScrollbars.destroy();
                  clearTimeout(this.wheelTimeout);
                  this.wtEvent && this.wtEvent.destroy();
                };
                /**
                 * A overlay that renders ALL available rows & columns positioned on top of the original Walkontable instance and all other overlays.
                 * Used for debugging purposes to see if the other overlays (that render only part of the rows & columns) are positioned correctly
                 * @param instance
                 * @constructor
                 */
                function WalkontableDebugOverlay(instance) {
                  this.instance = instance;
                  this.init();
                  this.clone = this.makeClone('debug');
                  this.clone.wtTable.holder.style.opacity = 0.4;
                  this.clone.wtTable.holder.style.textShadow = '0 0 2px #ff0000';
                
                  var that = this;
                  var lastTimeout;
                  var lastX = 0;
                  var lastY = 0;
                  var overlayContainer = that.clone.wtTable.holder.parentNode;
                
                  $(document.body).on('mousemove.' + this.instance.guid, function (event) {
                    if (!that.instance.wtTable.holder.parentNode) {
                      return; //removed from DOM
                    }
                    if ((event.clientX - lastX > -5 && event.clientX - lastX < 5) && (event.clientY - lastY > -5 && event.clientY - lastY < 5)) {
                      return; //ignore minor mouse movement
                    }
                    lastX = event.clientX;
                    lastY = event.clientY;
                    WalkontableDom.prototype.addClass(overlayContainer, 'wtDebugHidden');
                    WalkontableDom.prototype.removeClass(overlayContainer, 'wtDebugVisible');
                    clearTimeout(lastTimeout);
                    lastTimeout = setTimeout(function () {
                      WalkontableDom.prototype.removeClass(overlayContainer, 'wtDebugHidden');
                      WalkontableDom.prototype.addClass(overlayContainer, 'wtDebugVisible');
                    }, 1000);
                  });
                }
                
                WalkontableDebugOverlay.prototype = new WalkontableOverlay();
                
                WalkontableDebugOverlay.prototype.resetFixedPosition = function () {
                  if (!this.instance.wtTable.holder.parentNode) {
                    return; //removed from DOM
                  }
                  var elem = this.clone.wtTable.holder.parentNode;
                  var box = this.instance.wtTable.holder.getBoundingClientRect();
                  elem.style.top = Math.ceil(box.top, 10) + 'px';
                  elem.style.left = Math.ceil(box.left, 10) + 'px';
                };
                
                WalkontableDebugOverlay.prototype.prepare = function () {
                };
                
                WalkontableDebugOverlay.prototype.refresh = function (selectionsOnly) {
                  this.clone && this.clone.draw(selectionsOnly);
                };
                
                WalkontableDebugOverlay.prototype.getScrollPosition = function () {
                };
                
                WalkontableDebugOverlay.prototype.getLastCell = function () {
                };
                
                WalkontableDebugOverlay.prototype.applyToDOM = function () {
                };
                
                WalkontableDebugOverlay.prototype.scrollTo = function () {
                };
                
                WalkontableDebugOverlay.prototype.readWindowSize = function () {
                };
                
                WalkontableDebugOverlay.prototype.readSettings = function () {
                };
                function WalkontableDom() {
                }
                
                //goes up the DOM tree (including given element) until it finds an element that matches the nodeName
                WalkontableDom.prototype.closest = function (elem, nodeNames, until) {
                  while (elem != null && elem !== until) {
                    if (elem.nodeType === 1 && nodeNames.indexOf(elem.nodeName) > -1) {
                      return elem;
                    }
                    elem = elem.parentNode;
                  }
                  return null;
                };
                
                //goes up the DOM tree and checks if element is child of another element
                WalkontableDom.prototype.isChildOf = function (child, parent) {
                  var node = child.parentNode;
                  while (node != null) {
                    if (node == parent) {
                      return true;
                    }
                    node = node.parentNode;
                  }
                  return false;
                };
                
                /**
                 * Counts index of element within its parent
                 * WARNING: for performance reasons, assumes there are only element nodes (no text nodes). This is true for Walkotnable
                 * Otherwise would need to check for nodeType or use previousElementSibling
                 * @see http://jsperf.com/sibling-index/10
                 * @param {Element} elem
                 * @return {Number}
                 */
                WalkontableDom.prototype.index = function (elem) {
                  var i = 0;
                  while (elem = elem.previousSibling) {
                    ++i
                  }
                  return i;
                };
                
                if (document.documentElement.classList) {
                  // HTML5 classList API
                  WalkontableDom.prototype.hasClass = function (ele, cls) {
                    return ele.classList.contains(cls);
                  };
                
                  WalkontableDom.prototype.addClass = function (ele, cls) {
                    ele.classList.add(cls);
                  };
                
                  WalkontableDom.prototype.removeClass = function (ele, cls) {
                    ele.classList.remove(cls);
                  };
                }
                else {
                  //http://snipplr.com/view/3561/addclass-removeclass-hasclass/
                  WalkontableDom.prototype.hasClass = function (ele, cls) {
                    return ele.className.match(new RegExp('(\\s|^)' + cls + '(\\s|$)'));
                  };
                
                  WalkontableDom.prototype.addClass = function (ele, cls) {
                    if (!this.hasClass(ele, cls)) ele.className += " " + cls;
                  };
                
                  WalkontableDom.prototype.removeClass = function (ele, cls) {
                    if (this.hasClass(ele, cls)) { //is this really needed?
                      var reg = new RegExp('(\\s|^)' + cls + '(\\s|$)');
                      ele.className = ele.className.replace(reg, ' ').trim(); //String.prototype.trim is defined in polyfill.js
                    }
                  };
                }
                
                /*//http://net.tutsplus.com/tutorials/javascript-ajax/javascript-from-null-cross-browser-event-binding/
                 WalkontableDom.prototype.addEvent = (function () {
                 var that = this;
                 if (document.addEventListener) {
                 return function (elem, type, cb) {
                 if ((elem && !elem.length) || elem === window) {
                 elem.addEventListener(type, cb, false);
                 }
                 else if (elem && elem.length) {
                 var len = elem.length;
                 for (var i = 0; i < len; i++) {
                 that.addEvent(elem[i], type, cb);
                 }
                 }
                 };
                 }
                 else {
                 return function (elem, type, cb) {
                 if ((elem && !elem.length) || elem === window) {
                 elem.attachEvent('on' + type, function () {
                
                 //normalize
                 //http://stackoverflow.com/questions/4643249/cross-browser-event-object-normalization
                 var e = window['event'];
                 e.target = e.srcElement;
                 //e.offsetX = e.layerX;
                 //e.offsetY = e.layerY;
                 e.relatedTarget = e.relatedTarget || e.type == 'mouseover' ? e.fromElement : e.toElement;
                 if (e.target.nodeType === 3) e.target = e.target.parentNode; //Safari bug
                
                 return cb.call(elem, e)
                 });
                 }
                 else if (elem.length) {
                 var len = elem.length;
                 for (var i = 0; i < len; i++) {
                 that.addEvent(elem[i], type, cb);
                 }
                 }
                 };
                 }
                 })();
                
                 WalkontableDom.prototype.triggerEvent = function (element, eventName, target) {
                 var event;
                 if (document.createEvent) {
                 event = document.createEvent("MouseEvents");
                 event.initEvent(eventName, true, true);
                 } else {
                 event = document.createEventObject();
                 event.eventType = eventName;
                 }
                
                 event.eventName = eventName;
                 event.target = target;
                
                 if (document.createEvent) {
                 target.dispatchEvent(event);
                 } else {
                 target.fireEvent("on" + event.eventType, event);
                 }
                 };*/
                
                WalkontableDom.prototype.removeTextNodes = function (elem, parent) {
                  if (elem.nodeType === 3) {
                    parent.removeChild(elem); //bye text nodes!
                  }
                  else if (['TABLE', 'THEAD', 'TBODY', 'TFOOT', 'TR'].indexOf(elem.nodeName) > -1) {
                    var childs = elem.childNodes;
                    for (var i = childs.length - 1; i >= 0; i--) {
                      this.removeTextNodes(childs[i], elem);
                    }
                  }
                };
                
                /**
                 * Remove childs function
                 * WARNING - this doesn't unload events and data attached by jQuery
                 * http://jsperf.com/jquery-html-vs-empty-vs-innerhtml/9
                 * http://jsperf.com/jquery-html-vs-empty-vs-innerhtml/11 - no siginificant improvement with Chrome remove() method
                 * @param element
                 * @returns {void}
                 */
                //
                WalkontableDom.prototype.empty = function (element) {
                  var child;
                  while (child = element.lastChild) {
                    element.removeChild(child);
                  }
                };
                
                WalkontableDom.prototype.HTML_CHARACTERS = /(<(.*)>|&(.*);)/;
                
                /**
                 * Insert content into element trying avoid innerHTML method.
                 * @return {void}
                 */
                WalkontableDom.prototype.fastInnerHTML = function (element, content) {
                  if (this.HTML_CHARACTERS.test(content)) {
                    element.innerHTML = content;
                  }
                  else {
                    this.fastInnerText(element, content);
                  }
                };
                
                /**
                 * Insert text content into element
                 * @return {void}
                 */
                if (document.createTextNode('test').textContent) { //STANDARDS
                  WalkontableDom.prototype.fastInnerText = function (element, content) {
                    var child = element.firstChild;
                    if (child && child.nodeType === 3 && child.nextSibling === null) {
                      //fast lane - replace existing text node
                      //http://jsperf.com/replace-text-vs-reuse
                      child.textContent = content;
                    }
                    else {
                      //slow lane - empty element and insert a text node
                      this.empty(element);
                      element.appendChild(document.createTextNode(content));
                    }
                  };
                }
                else { //IE8
                  WalkontableDom.prototype.fastInnerText = function (element, content) {
                    var child = element.firstChild;
                    if (child && child.nodeType === 3 && child.nextSibling === null) {
                      //fast lane - replace existing text node
                      //http://jsperf.com/replace-text-vs-reuse
                      child.data = content;
                    }
                    else {
                      //slow lane - empty element and insert a text node
                      this.empty(element);
                      element.appendChild(document.createTextNode(content));
                    }
                  };
                }
                
                /**
                 * Returns true/false depending if element has offset parent
                 * @param elem
                 * @returns {boolean}
                 */
                /*if (document.createTextNode('test').textContent) { //STANDARDS
                  WalkontableDom.prototype.hasOffsetParent = function (elem) {
                    return !!elem.offsetParent;
                  }
                }
                else {
                  WalkontableDom.prototype.hasOffsetParent = function (elem) {
                    try {
                      if (!elem.offsetParent) {
                        return false;
                      }
                    }
                    catch (e) {
                      return false; //IE8 throws "Unspecified error" when offsetParent is not found - we catch it here
                    }
                    return true;
                  }
                }*/
                
                /**
                 * Returns true if element is attached to the DOM and visible, false otherwise
                 * @param elem
                 * @returns {boolean}
                 */
                WalkontableDom.prototype.isVisible = function (elem) {
                  //fast method according to benchmarks, but requires layout so slow in our case
                  /*
                  if (!WalkontableDom.prototype.hasOffsetParent(elem)) {
                    return false; //fixes problem with UI Bootstrap <tabs> directive
                  }
                
                //  if (elem.offsetWidth > 0 || (elem.parentNode && elem.parentNode.offsetWidth > 0)) { //IE10 was mistaken here
                  if (elem.offsetWidth > 0) {
                    return true;
                  }
                  */
                
                  //slow method
                  var next = elem;
                  while (next !== document.documentElement) { //until <html> reached
                    if (next === null) { //parent detached from DOM
                      return false;
                    }
                    else if (next.nodeType === 11) {  //nodeType == 1 -> DOCUMENT_FRAGMENT_NODE
                      if (next.host) { //this is Web Components Shadow DOM
                        //see: http://w3c.github.io/webcomponents/spec/shadow/#encapsulation
                        //according to spec, should be if (next.ownerDocument !== window.document), but that doesn't work yet
                        if (next.host.impl) { //Chrome 33.0.1723.0 canary (2013-11-29) Web Platform features disabled
                          return WalkontableDom.prototype.isVisible(next.host.impl);
                        }
                        else if (next.host) { //Chrome 33.0.1723.0 canary (2013-11-29) Web Platform features enabled
                          return WalkontableDom.prototype.isVisible(next.host);
                        }
                        else {
                          throw new Error("Lost in Web Components world");
                        }
                      }
                      else {
                        return false; //this is a node detached from document in IE8
                      }
                    }
                    else if (next.style.display === 'none') {
                      return false;
                    }
                    next = next.parentNode;
                  }
                  return true;
                };
                
                /**
                 * Returns elements top and left offset relative to the document. In our usage case compatible with jQuery but 2x faster
                 * @param {HTMLElement} elem
                 * @return {Object}
                 */
                WalkontableDom.prototype.offset = function (elem) {
                  if (this.hasCaptionProblem() && elem.firstChild && elem.firstChild.nodeName === 'CAPTION') {
                    //fixes problem with Firefox ignoring <caption> in TABLE offset (see also WalkontableDom.prototype.outerHeight)
                    //http://jsperf.com/offset-vs-getboundingclientrect/8
                    var box = elem.getBoundingClientRect();
                    return {
                      top: box.top + (window.pageYOffset || document.documentElement.scrollTop) - (document.documentElement.clientTop || 0),
                      left: box.left + (window.pageXOffset || document.documentElement.scrollLeft) - (document.documentElement.clientLeft || 0)
                    };
                  }
                
                  var offsetLeft = elem.offsetLeft
                    , offsetTop = elem.offsetTop
                    , lastElem = elem;
                
                  while (elem = elem.offsetParent) {
                    if (elem === document.body) { //from my observation, document.body always has scrollLeft/scrollTop == 0
                      break;
                    }
                    offsetLeft += elem.offsetLeft;
                    offsetTop += elem.offsetTop;
                    lastElem = elem;
                  }
                
                  if (lastElem && lastElem.style.position === 'fixed') { //slow - http://jsperf.com/offset-vs-getboundingclientrect/6
                    //if(lastElem !== document.body) { //faster but does gives false positive in Firefox
                    offsetLeft += window.pageXOffset || document.documentElement.scrollLeft;
                    offsetTop += window.pageYOffset || document.documentElement.scrollTop;
                  }
                
                  return {
                    left: offsetLeft,
                    top: offsetTop
                  };
                };
                
                WalkontableDom.prototype.getComputedStyle = function (elem) {
                  return elem.currentStyle || document.defaultView.getComputedStyle(elem);
                };
                
                WalkontableDom.prototype.outerWidth = function (elem) {
                  return elem.offsetWidth;
                };
                
                WalkontableDom.prototype.outerHeight = function (elem) {
                  if (this.hasCaptionProblem() && elem.firstChild && elem.firstChild.nodeName === 'CAPTION') {
                    //fixes problem with Firefox ignoring <caption> in TABLE.offsetHeight
                    //jQuery (1.10.1) still has this unsolved
                    //may be better to just switch to getBoundingClientRect
                    //http://bililite.com/blog/2009/03/27/finding-the-size-of-a-table/
                    //http://lists.w3.org/Archives/Public/www-style/2009Oct/0089.html
                    //http://bugs.jquery.com/ticket/2196
                    //http://lists.w3.org/Archives/Public/www-style/2009Oct/0140.html#start140
                    return elem.offsetHeight + elem.firstChild.offsetHeight;
                  }
                  else {
                    return elem.offsetHeight;
                  }
                };
                
                (function () {
                  var hasCaptionProblem;
                
                  function detectCaptionProblem() {
                    var TABLE = document.createElement('TABLE');
                    TABLE.style.borderSpacing = 0;
                    TABLE.style.borderWidth = 0;
                    TABLE.style.padding = 0;
                    var TBODY = document.createElement('TBODY');
                    TABLE.appendChild(TBODY);
                    TBODY.appendChild(document.createElement('TR'));
                    TBODY.firstChild.appendChild(document.createElement('TD'));
                    TBODY.firstChild.firstChild.innerHTML = '<tr><td>t<br>t</td></tr>';
                
                    var CAPTION = document.createElement('CAPTION');
                    CAPTION.innerHTML = 'c<br>c<br>c<br>c';
                    CAPTION.style.padding = 0;
                    CAPTION.style.margin = 0;
                    TABLE.insertBefore(CAPTION, TBODY);
                
                    document.body.appendChild(TABLE);
                    hasCaptionProblem = (TABLE.offsetHeight < 2 * TABLE.lastChild.offsetHeight); //boolean
                    document.body.removeChild(TABLE);
                  }
                
                  WalkontableDom.prototype.hasCaptionProblem = function () {
                    if (hasCaptionProblem === void 0) {
                      detectCaptionProblem();
                    }
                    return hasCaptionProblem;
                  };
                
                  /**
                   * Returns caret position in text input
                   * @author http://stackoverflow.com/questions/263743/how-to-get-caret-position-in-textarea
                   * @return {Number}
                   */
                  WalkontableDom.prototype.getCaretPosition = function (el) {
                    if (el.selectionStart) {
                      return el.selectionStart;
                    }
                    else if (document.selection) { //IE8
                      el.focus();
                      var r = document.selection.createRange();
                      if (r == null) {
                        return 0;
                      }
                      var re = el.createTextRange(),
                        rc = re.duplicate();
                      re.moveToBookmark(r.getBookmark());
                      rc.setEndPoint('EndToStart', re);
                      return rc.text.length;
                    }
                    return 0;
                  };
                
                  /**
                   * Sets caret position in text input
                   * @author http://blog.vishalon.net/index.php/javascript-getting-and-setting-caret-position-in-textarea/
                   * @param {Element} el
                   * @param {Number} pos
                   * @param {Number} endPos
                   */
                  WalkontableDom.prototype.setCaretPosition = function (el, pos, endPos) {
                    if (endPos === void 0) {
                      endPos = pos;
                    }
                    if (el.setSelectionRange) {
                      el.focus();
                      el.setSelectionRange(pos, endPos);
                    }
                    else if (el.createTextRange) { //IE8
                      var range = el.createTextRange();
                      range.collapse(true);
                      range.moveEnd('character', endPos);
                      range.moveStart('character', pos);
                      range.select();
                    }
                  };
                
                  var cachedScrollbarWidth;
                  //http://stackoverflow.com/questions/986937/how-can-i-get-the-browsers-scrollbar-sizes
                  function walkontableCalculateScrollbarWidth() {
                    var inner = document.createElement('p');
                    inner.style.width = "100%";
                    inner.style.height = "200px";
                
                    var outer = document.createElement('div');
                    outer.style.position = "absolute";
                    outer.style.top = "0px";
                    outer.style.left = "0px";
                    outer.style.visibility = "hidden";
                    outer.style.width = "200px";
                    outer.style.height = "150px";
                    outer.style.overflow = "hidden";
                    outer.appendChild(inner);
                
                    (document.body || document.documentElement).appendChild(outer);
                    var w1 = inner.offsetWidth;
                    outer.style.overflow = 'scroll';
                    var w2 = inner.offsetWidth;
                    if (w1 == w2) w2 = outer.clientWidth;
                
                    (document.body || document.documentElement).removeChild(outer);
                
                    return (w1 - w2);
                  }
                
                  /**
                   * Returns the computed width of the native browser scroll bar
                   * @return {Number} width
                   */
                  WalkontableDom.prototype.getScrollbarWidth = function () {
                    if (cachedScrollbarWidth === void 0) {
                      cachedScrollbarWidth = walkontableCalculateScrollbarWidth();
                    }
                    return cachedScrollbarWidth;
                  }
                })();
                
                function WalkontableEvent(instance) {
                  var that = this;
                
                  //reference to instance
                  this.instance = instance;
                
                  this.wtDom = this.instance.wtDom;
                
                  var dblClickOrigin = [null, null];
                  var dblClickTimeout = [null, null];
                
                  var onMouseDown = function (event) {
                    var cell = that.parentCell(event.target);
                
                    if (that.wtDom.hasClass(event.target, 'corner')) {
                      that.instance.getSetting('onCellCornerMouseDown', event, event.target);
                    }
                    else if (cell.TD && cell.TD.nodeName === 'TD') {
                      if (that.instance.hasSetting('onCellMouseDown')) {
                        that.instance.getSetting('onCellMouseDown', event, cell.coords, cell.TD);
                      }
                    }
                
                    if (event.button !== 2) { //if not right mouse button
                      if (cell.TD && cell.TD.nodeName === 'TD') {
                        dblClickOrigin[0] = cell.TD;
                        clearTimeout(dblClickTimeout[0]);
                        dblClickTimeout[0] = setTimeout(function () {
                          dblClickOrigin[0] = null;
                        }, 1000);
                      }
                    }
                  };
                
                  var lastMouseOver;
                  var onMouseOver = function (event) {
                    if (that.instance.hasSetting('onCellMouseOver')) {
                      var TABLE = that.instance.wtTable.TABLE;
                      var TD = that.wtDom.closest(event.target, ['TD', 'TH'], TABLE);
                      if (TD && TD !== lastMouseOver && that.wtDom.isChildOf(TD, TABLE)) {
                        lastMouseOver = TD;
                        if (TD.nodeName === 'TD') {
                          that.instance.getSetting('onCellMouseOver', event, that.instance.wtTable.getCoords(TD), TD);
                        }
                      }
                    }
                  };
                
                /*  var lastMouseOut;
                  var onMouseOut = function (event) {
                    if (that.instance.hasSetting('onCellMouseOut')) {
                      var TABLE = that.instance.wtTable.TABLE;
                      var TD = that.wtDom.closest(event.target, ['TD', 'TH'], TABLE);
                      if (TD && TD !== lastMouseOut && that.wtDom.isChildOf(TD, TABLE)) {
                        lastMouseOut = TD;
                        if (TD.nodeName === 'TD') {
                          that.instance.getSetting('onCellMouseOut', event, that.instance.wtTable.getCoords(TD), TD);
                        }
                      }
                    }
                  };*/
                
                  var onMouseUp = function (event) {
                    if (event.button !== 2) { //if not right mouse button
                      var cell = that.parentCell(event.target);
                
                      if (cell.TD === dblClickOrigin[0] && cell.TD === dblClickOrigin[1]) {
                        if (that.wtDom.hasClass(event.target, 'corner')) {
                          that.instance.getSetting('onCellCornerDblClick', event, cell.coords, cell.TD);
                        }
                        else if (cell.TD) {
                          that.instance.getSetting('onCellDblClick', event, cell.coords, cell.TD);
                        }
                
                        dblClickOrigin[0] = null;
                        dblClickOrigin[1] = null;
                      }
                      else if (cell.TD === dblClickOrigin[0]) {
                        dblClickOrigin[1] = cell.TD;
                        clearTimeout(dblClickTimeout[1]);
                        dblClickTimeout[1] = setTimeout(function () {
                          dblClickOrigin[1] = null;
                        }, 500);
                      }
                    }
                  };
                
                  $(this.instance.wtTable.holder).on('mousedown', onMouseDown);
                  $(this.instance.wtTable.TABLE).on('mouseover', onMouseOver);
                //  $(this.instance.wtTable.TABLE).on('mouseout', onMouseOut);
                  $(this.instance.wtTable.holder).on('mouseup', onMouseUp);
                }
                
                WalkontableEvent.prototype.parentCell = function (elem) {
                  var cell = {};
                  var TABLE = this.instance.wtTable.TABLE;
                  var TD = this.wtDom.closest(elem, ['TD', 'TH'], TABLE);
                  if (TD && this.wtDom.isChildOf(TD, TABLE)) {
                    cell.coords = this.instance.wtTable.getCoords(TD);
                    cell.TD = TD;
                  }
                  else if (this.wtDom.hasClass(elem, 'wtBorder') && this.wtDom.hasClass(elem, 'current')) {
                    cell.coords = this.instance.selections.current.selected[0];
                    cell.TD = this.instance.wtTable.getCell(cell.coords);
                  }
                  return cell;
                };
                
                WalkontableEvent.prototype.destroy = function () {
                  clearTimeout(this.dblClickTimeout0);
                  clearTimeout(this.dblClickTimeout1);
                };
                function walkontableRangesIntersect() {
                  var from = arguments[0];
                  var to = arguments[1];
                  for (var i = 1, ilen = arguments.length / 2; i < ilen; i++) {
                    if (from <= arguments[2 * i + 1] && to >= arguments[2 * i]) {
                      return true;
                    }
                  }
                  return false;
                }
                
                /**
                 * Generates a random hex string. Used as namespace for Walkontable instance events.
                 * @return {String} - 16 character random string: "92b1bfc74ec4"
                 */
                function walkontableRandomString() {
                  function s4() {
                    return Math.floor((1 + Math.random()) * 0x10000)
                      .toString(16)
                      .substring(1);
                  }
                
                  return s4() + s4() + s4() + s4();
                }
                /**
                 * http://notes.jetienne.com/2011/05/18/cancelRequestAnimFrame-for-paul-irish-requestAnimFrame.html
                 */
                window.requestAnimFrame = (function () {
                  return  window.requestAnimationFrame ||
                    window.webkitRequestAnimationFrame ||
                    window.mozRequestAnimationFrame ||
                    window.oRequestAnimationFrame ||
                    window.msRequestAnimationFrame ||
                    function (/* function */ callback, /* DOMElement */ element) {
                      return window.setTimeout(callback, 1000 / 60);
                    };
                })();
                
                window.cancelRequestAnimFrame = (function () {
                  return window.cancelAnimationFrame ||
                    window.webkitCancelRequestAnimationFrame ||
                    window.mozCancelRequestAnimationFrame ||
                    window.oCancelRequestAnimationFrame ||
                    window.msCancelRequestAnimationFrame ||
                    clearTimeout
                })();
                
                //http://snipplr.com/view/13523/
                //modified for speed
                //http://jsperf.com/getcomputedstyle-vs-style-vs-css/8
                if (!window.getComputedStyle) {
                  (function () {
                    var elem;
                
                    var styleObj = {
                      getPropertyValue: function getPropertyValue(prop) {
                        if (prop == 'float') prop = 'styleFloat';
                        return elem.currentStyle[prop.toUpperCase()] || null;
                      }
                    };
                
                    window.getComputedStyle = function (el) {
                      elem = el;
                      return styleObj;
                    }
                  })();
                }
                
                /**
                 * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/Trim
                 */
                if (!String.prototype.trim) {
                  var trimRegex = /^\s+|\s+$/g;
                  String.prototype.trim = function () {
                    return this.replace(trimRegex, '');
                  };
                }
                /**
                 * WalkontableRowFilter
                 * @constructor
                 */
                function WalkontableRowFilter() {
                }
                
                WalkontableRowFilter.prototype = new WalkontableCellFilter();
                
                WalkontableRowFilter.prototype.readSettings = function (instance) {
                  if (instance.cloneOverlay instanceof WalkontableDebugOverlay) {
                    this.offset = 0;
                  }
                  else {
                    this.offset = instance.wtSettings.settings.offsetRow;
                  }
                  this.total = instance.getSetting('totalRows');
                  this.fixedCount = instance.getSetting('fixedRowsTop');
                };
                /**
                 * WalkontableRowStrategy
                 * @param containerSizeFn
                 * @param sizeAtIndex
                 * @constructor
                 */
                function WalkontableRowStrategy(instance, containerSizeFn, sizeAtIndex) {
                
                  WalkontableCellStrategy.apply(this, arguments);
                
                  this.containerSizeFn = containerSizeFn;
                  this.sizeAtIndex = sizeAtIndex;
                  this.cellSizesSum = 0;
                  this.cellSizes = [];
                  this.cellCount = 0;
                  this.remainingSize = -Infinity;
                }
                
                WalkontableRowStrategy.prototype = new WalkontableCellStrategy();
                
                WalkontableRowStrategy.prototype.add = function (i, TD, reverse) {
                  if (!this.isLastIncomplete() && this.remainingSize != 0) {
                    var size = this.sizeAtIndex(i, TD);
                    if (size === void 0) {
                      return false; //total rows exceeded
                    }
                    var containerSize = this.getContainerSize(this.cellSizesSum + size);
                    if (reverse) {
                      this.cellSizes.unshift(size);
                    }
                    else {
                      this.cellSizes.push(size);
                    }
                    this.cellSizesSum += size;
                    this.cellCount++;
                    this.remainingSize = this.cellSizesSum - containerSize;
                
                    if (reverse && this.isLastIncomplete()) { //something is outside of the screen, maybe even some full rows?
                      return false;
                    }
                    return true;
                  }
                  return false;
                };
                
                WalkontableRowStrategy.prototype.remove = function () {
                  var size = this.cellSizes.pop();
                  this.cellSizesSum -= size;
                  this.cellCount--;
                  this.remainingSize -= size;
                };
                
                WalkontableRowStrategy.prototype.removeOutstanding = function () {
                  while (this.cellCount > 0 && this.cellSizes[this.cellCount - 1] < this.remainingSize) { //this row is completely off screen!
                    this.remove();
                  }
                };
                function WalkontableScroll(instance) {
                  this.instance = instance;
                }
                
                WalkontableScroll.prototype.scrollVertical = function (delta) {
                  if (!this.instance.drawn) {
                    throw new Error('scrollVertical can only be called after table was drawn to DOM');
                  }
                
                  var instance = this.instance
                    , newOffset
                    , offset = instance.getSetting('offsetRow')
                    , fixedCount = instance.getSetting('fixedRowsTop')
                    , total = instance.getSetting('totalRows')
                    , maxSize = instance.wtViewport.getViewportHeight();
                
                  if (total > 0) {
                    newOffset = this.scrollLogicVertical(delta, offset, total, fixedCount, maxSize, function (row) {
                      if (row - offset < fixedCount && row - offset >= 0) {
                        return instance.getSetting('rowHeight', row - offset);
                      }
                      else {
                        return instance.getSetting('rowHeight', row);
                      }
                    }, function (isReverse) {
                      instance.wtTable.verticalRenderReverse = isReverse;
                    });
                  }
                  else {
                    newOffset = 0;
                  }
                
                  if (newOffset !== offset) {
                    this.instance.wtScrollbars.vertical.scrollTo(newOffset);
                  }
                  return instance;
                };
                
                WalkontableScroll.prototype.scrollHorizontal = function (delta) {
                  if (!this.instance.drawn) {
                    throw new Error('scrollHorizontal can only be called after table was drawn to DOM');
                  }
                
                  var instance = this.instance
                    , newOffset
                    , offset = instance.getSetting('offsetColumn')
                    , fixedCount = instance.getSetting('fixedColumnsLeft')
                    , total = instance.getSetting('totalColumns')
                    , maxSize = instance.wtViewport.getViewportWidth();
                
                  if (total > 0) {
                    newOffset = this.scrollLogicHorizontal(delta, offset, total, fixedCount, maxSize, function (col) {
                      if (col - offset < fixedCount && col - offset >= 0) {
                        return instance.getSetting('columnWidth', col - offset);
                      }
                      else {
                        return instance.getSetting('columnWidth', col);
                      }
                    });
                  }
                  else {
                    newOffset = 0;
                  }
                
                  if (newOffset !== offset) {
                    this.instance.wtScrollbars.horizontal.scrollTo(newOffset);
                  }
                  return instance;
                };
                
                WalkontableScroll.prototype.scrollLogicVertical = function (delta, offset, total, fixedCount, maxSize, cellSizeFn, setReverseRenderFn) {
                  var newOffset = offset + delta;
                
                  if (newOffset >= total - fixedCount) {
                    newOffset = total - fixedCount - 1;
                    setReverseRenderFn(true);
                  }
                
                  if (newOffset < 0) {
                    newOffset = 0;
                  }
                
                  return newOffset;
                };
                
                WalkontableScroll.prototype.scrollLogicHorizontal = function (delta, offset, total, fixedCount, maxSize, cellSizeFn) {
                  var newOffset = offset + delta
                    , sum = 0
                    , col;
                
                  if (newOffset > fixedCount) {
                    if (newOffset >= total - fixedCount) {
                      newOffset = total - fixedCount - 1;
                    }
                
                    col = newOffset;
                    while (sum < maxSize && col < total) {
                      sum += cellSizeFn(col);
                      col++;
                    }
                
                    if (sum < maxSize) {
                      while (newOffset > 0) {
                        //if sum still less than available width, we cannot scroll that far (must move offset to the left)
                        sum += cellSizeFn(newOffset - 1);
                        if (sum < maxSize) {
                          newOffset--;
                        }
                        else {
                          break;
                        }
                      }
                    }
                  }
                  else if (newOffset < 0) {
                    newOffset = 0;
                  }
                
                  return newOffset;
                };
                
                /**
                 * Scrolls viewport to a cell by minimum number of cells
                 */
                WalkontableScroll.prototype.scrollViewport = function (coords) {
                  if (!this.instance.drawn) {
                    return;
                  }
                
                  var offsetRow = this.instance.getSetting('offsetRow')
                    , offsetColumn = this.instance.getSetting('offsetColumn')
                    , lastVisibleRow = this.instance.wtTable.getLastVisibleRow()
                    , totalRows = this.instance.getSetting('totalRows')
                    , totalColumns = this.instance.getSetting('totalColumns')
                    , fixedRowsTop = this.instance.getSetting('fixedRowsTop')
                    , fixedColumnsLeft = this.instance.getSetting('fixedColumnsLeft');
                
                  if (this.instance.getSetting('nativeScrollbars')) {
                    var TD = this.instance.wtTable.getCell(coords);
                    if (typeof TD === 'object') {
                      var offset = WalkontableDom.prototype.offset(TD);
                      var outerWidth = WalkontableDom.prototype.outerWidth(TD);
                      var outerHeight = WalkontableDom.prototype.outerHeight(TD);
                      var scrollX = this.instance.wtScrollbars.horizontal.getScrollPosition();
                      var scrollY = this.instance.wtScrollbars.vertical.getScrollPosition();
                      var clientWidth = WalkontableDom.prototype.outerWidth(this.instance.wtScrollbars.horizontal.scrollHandler);
                      var clientHeight = WalkontableDom.prototype.outerHeight(this.instance.wtScrollbars.vertical.scrollHandler);
                      if (this.instance.wtScrollbars.horizontal.scrollHandler !== window) {
                        offset.left = offset.left - WalkontableDom.prototype.offset(this.instance.wtScrollbars.horizontal.scrollHandler).left;
                      }
                      if (this.instance.wtScrollbars.vertical.scrollHandler !== window) {
                        offset.top = offset.top - WalkontableDom.prototype.offset(this.instance.wtScrollbars.vertical.scrollHandler).top;
                      }
                
                      clientWidth -= 20;
                      clientHeight -= 20;
                
                      if (outerWidth < clientWidth) {
                        if (offset.left < scrollX) {
                          this.instance.wtScrollbars.horizontal.setScrollPosition(offset.left);
                        }
                        else if (offset.left + outerWidth > scrollX + clientWidth) {
                          this.instance.wtScrollbars.horizontal.setScrollPosition(offset.left - clientWidth + outerWidth);
                        }
                      }
                      if (outerHeight < clientHeight) {
                        if (offset.top < scrollY) {
                          this.instance.wtScrollbars.vertical.setScrollPosition(offset.top);
                        }
                        else if (offset.top + outerHeight > scrollY + clientHeight) {
                          this.instance.wtScrollbars.vertical.setScrollPosition(offset.top - clientHeight + outerHeight);
                        }
                      }
                      return;
                    }
                  }
                
                  if (coords[0] < 0 || coords[0] > totalRows - 1) {
                    throw new Error('row ' + coords[0] + ' does not exist');
                  }
                  else if (coords[1] < 0 || coords[1] > totalColumns - 1) {
                    throw new Error('column ' + coords[1] + ' does not exist');
                  }
                
                  if (coords[0] > lastVisibleRow) {
                //    this.scrollVertical(coords[0] - lastVisibleRow + 1);
                    this.scrollVertical(coords[0] - fixedRowsTop - offsetRow);
                    this.instance.wtTable.verticalRenderReverse = true;
                  }
                  else if (coords[0] === lastVisibleRow && this.instance.wtTable.rowStrategy.isLastIncomplete()) {
                //    this.scrollVertical(coords[0] - lastVisibleRow + 1);
                    this.scrollVertical(coords[0] - fixedRowsTop - offsetRow);
                    this.instance.wtTable.verticalRenderReverse = true;
                  }
                  else if (coords[0] - fixedRowsTop < offsetRow) {
                    this.scrollVertical(coords[0] - fixedRowsTop - offsetRow);
                  }
                  else {
                    this.scrollVertical(0); //Craig's issue: remove row from the last scroll page should scroll viewport a row up if needed
                  }
                
                  if (this.instance.wtTable.isColumnBeforeViewport(coords[1])) {
                    //scroll left
                    this.instance.wtScrollbars.horizontal.scrollTo(coords[1] - fixedColumnsLeft);
                  }
                  else if (this.instance.wtTable.isColumnAfterViewport(coords[1]) || (this.instance.wtTable.getLastVisibleColumn() === coords[1] && !this.instance.wtTable.isLastColumnFullyVisible())) {
                    //scroll right
                    var sum = 0;
                    for (var i = 0; i < fixedColumnsLeft; i++) {
                      sum += this.instance.getSetting('columnWidth', i);
                    }
                    var scrollTo = coords[1];
                    sum += this.instance.getSetting('columnWidth', scrollTo);
                    var available = this.instance.wtViewport.getViewportWidth();
                    if (sum < available) {
                      var next = this.instance.getSetting('columnWidth', scrollTo - 1);
                      while (sum + next <= available && scrollTo >= fixedColumnsLeft) {
                        scrollTo--;
                        sum += next;
                        next = this.instance.getSetting('columnWidth', scrollTo - 1);
                      }
                    }
                
                    this.instance.wtScrollbars.horizontal.scrollTo(scrollTo - fixedColumnsLeft);
                  }
                  /*else {
                   //no scroll
                   }*/
                
                  return this.instance;
                };
                
                function WalkontableScrollbar() {
                }
                
                WalkontableScrollbar.prototype.init = function () {
                  var that = this;
                
                  //reference to instance
                  this.$table = $(this.instance.wtTable.TABLE);
                
                  //create elements
                  this.slider = document.createElement('DIV');
                  this.sliderStyle = this.slider.style;
                  this.sliderStyle.position = 'absolute';
                  this.sliderStyle.top = '0';
                  this.sliderStyle.left = '0';
                  this.sliderStyle.display = 'none';
                  this.slider.className = 'dragdealer ' + this.type;
                
                  this.handle = document.createElement('DIV');
                  this.handleStyle = this.handle.style;
                  this.handle.className = 'handle';
                
                  this.slider.appendChild(this.handle);
                  this.container = this.instance.wtTable.holder;
                  this.container.appendChild(this.slider);
                
                  var firstRun = true;
                  this.dragTimeout = null;
                  var dragDelta;
                  var dragRender = function () {
                    that.onScroll(dragDelta);
                  };
                
                  this.dragdealer = new Dragdealer(this.slider, {
                    vertical: (this.type === 'vertical'),
                    horizontal: (this.type === 'horizontal'),
                    slide: false,
                    speed: 100,
                    animationCallback: function (x, y) {
                      if (firstRun) {
                        firstRun = false;
                        return;
                      }
                      that.skipRefresh = true;
                      dragDelta = that.type === 'vertical' ? y : x;
                      if (that.dragTimeout === null) {
                        that.dragTimeout = setInterval(dragRender, 100);
                        dragRender();
                      }
                    },
                    callback: function (x, y) {
                      that.skipRefresh = false;
                      clearInterval(that.dragTimeout);
                      that.dragTimeout = null;
                      dragDelta = that.type === 'vertical' ? y : x;
                      that.onScroll(dragDelta);
                    }
                  });
                  this.skipRefresh = false;
                };
                
                WalkontableScrollbar.prototype.onScroll = function (delta) {
                  if (this.instance.drawn) {
                    this.readSettings();
                    if (this.total > this.visibleCount) {
                      var newOffset = Math.round(this.handlePosition * this.total / this.sliderSize);
                
                      if (delta === 1) {
                        if (this.type === 'vertical') {
                          this.instance.scrollVertical(Infinity).draw();
                        }
                        else {
                          this.instance.scrollHorizontal(Infinity).draw();
                        }
                      }
                      else if (newOffset !== this.offset) { //is new offset different than old offset
                        if (this.type === 'vertical') {
                          this.instance.scrollVertical(newOffset - this.offset).draw();
                        }
                        else {
                          this.instance.scrollHorizontal(newOffset - this.offset).draw();
                        }
                      }
                      else {
                        this.refresh();
                      }
                    }
                  }
                };
                
                /**
                 * Returns what part of the scroller should the handle take
                 * @param viewportCount {Number} number of visible rows or columns
                 * @param totalCount {Number} total number of rows or columns
                 * @return {Number} 0..1
                 */
                WalkontableScrollbar.prototype.getHandleSizeRatio = function (viewportCount, totalCount) {
                  if (!totalCount || viewportCount > totalCount || viewportCount == totalCount) {
                    return 1;
                  }
                  return 1 / totalCount;
                };
                
                WalkontableScrollbar.prototype.prepare = function () {
                  if (this.skipRefresh) {
                    return;
                  }
                  var ratio = this.getHandleSizeRatio(this.visibleCount, this.total);
                  if (((ratio === 1 || isNaN(ratio)) && this.scrollMode === 'auto') || this.scrollMode === 'none') {
                    //isNaN is needed because ratio equals NaN when totalRows/totalColumns equals 0
                    this.visible = false;
                  }
                  else {
                    this.visible = true;
                  }
                };
                
                WalkontableScrollbar.prototype.refresh = function () {
                  if (this.skipRefresh) {
                    return;
                  }
                  else if (!this.visible) {
                    this.sliderStyle.display = 'none';
                    return;
                  }
                
                  var ratio
                    , sliderSize
                    , handleSize
                    , handlePosition
                    , visibleCount = this.visibleCount
                    , tableWidth = this.instance.wtViewport.getWorkspaceWidth()
                    , tableHeight = this.instance.wtViewport.getWorkspaceHeight();
                
                  if (tableWidth === Infinity) {
                    tableWidth = this.instance.wtViewport.getWorkspaceActualWidth();
                  }
                
                  if (tableHeight === Infinity) {
                    tableHeight = this.instance.wtViewport.getWorkspaceActualHeight();
                  }
                
                  if (this.type === 'vertical') {
                    if (this.instance.wtTable.rowStrategy.isLastIncomplete()) {
                      visibleCount--;
                    }
                
                    sliderSize = tableHeight - 2; //2 is sliders border-width
                
                    this.sliderStyle.top = this.instance.wtDom.offset(this.$table[0]).top - this.instance.wtDom.offset(this.container).top + 'px';
                    this.sliderStyle.left = tableWidth - 1 + 'px'; //1 is sliders border-width
                    this.sliderStyle.height = Math.max(sliderSize, 0) + 'px';
                  }
                  else { //horizontal
                    sliderSize = tableWidth - 2; //2 is sliders border-width
                
                    this.sliderStyle.left = this.instance.wtDom.offset(this.$table[0]).left - this.instance.wtDom.offset(this.container).left + 'px';
                    this.sliderStyle.top = tableHeight - 1 + 'px'; //1 is sliders border-width
                    this.sliderStyle.width = Math.max(sliderSize, 0) + 'px';
                  }
                
                  ratio = this.getHandleSizeRatio(visibleCount, this.total);
                  handleSize = Math.round(sliderSize * ratio);
                  if (handleSize < 10) {
                    handleSize = 15;
                  }
                
                  handlePosition = Math.floor(sliderSize * (this.offset / this.total));
                  if (handleSize + handlePosition > sliderSize) {
                    handlePosition = sliderSize - handleSize;
                  }
                
                  if (this.type === 'vertical') {
                    this.handleStyle.height = handleSize + 'px';
                    this.handleStyle.top = handlePosition + 'px';
                
                  }
                  else { //horizontal
                    this.handleStyle.width = handleSize + 'px';
                    this.handleStyle.left = handlePosition + 'px';
                  }
                
                  this.sliderStyle.display = 'block';
                };
                
                WalkontableScrollbar.prototype.destroy = function () {
                  clearInterval(this.dragdealer.interval);
                };
                
                ///
                
                var WalkontableVerticalScrollbar = function (instance) {
                  this.instance = instance;
                  this.type = 'vertical';
                  this.init();
                };
                
                WalkontableVerticalScrollbar.prototype = new WalkontableScrollbar();
                
                WalkontableVerticalScrollbar.prototype.scrollTo = function (cell) {
                  this.instance.update('offsetRow', cell);
                };
                
                WalkontableVerticalScrollbar.prototype.readSettings = function () {
                  this.scrollMode = this.instance.getSetting('scrollV');
                  this.offset = this.instance.getSetting('offsetRow');
                  this.total = this.instance.getSetting('totalRows');
                  this.visibleCount = this.instance.wtTable.rowStrategy.countVisible();
                  if(this.visibleCount > 1 && this.instance.wtTable.rowStrategy.isLastIncomplete()) {
                    this.visibleCount--;
                  }
                  this.handlePosition = parseInt(this.handleStyle.top, 10);
                  this.sliderSize = parseInt(this.sliderStyle.height, 10);
                  this.fixedCount = this.instance.getSetting('fixedRowsTop');
                };
                
                ///
                
                var WalkontableHorizontalScrollbar = function (instance) {
                  this.instance = instance;
                  this.type = 'horizontal';
                  this.init();
                };
                
                WalkontableHorizontalScrollbar.prototype = new WalkontableScrollbar();
                
                WalkontableHorizontalScrollbar.prototype.scrollTo = function (cell) {
                  this.instance.update('offsetColumn', cell);
                };
                
                WalkontableHorizontalScrollbar.prototype.readSettings = function () {
                  this.scrollMode = this.instance.getSetting('scrollH');
                  this.offset = this.instance.getSetting('offsetColumn');
                  this.total = this.instance.getSetting('totalColumns');
                  this.visibleCount = this.instance.wtTable.columnStrategy.countVisible();
                  if(this.visibleCount > 1 && this.instance.wtTable.columnStrategy.isLastIncomplete()) {
                    this.visibleCount--;
                  }
                  this.handlePosition = parseInt(this.handleStyle.left, 10);
                  this.sliderSize = parseInt(this.sliderStyle.width, 10);
                  this.fixedCount = this.instance.getSetting('fixedColumnsLeft');
                };
                
                WalkontableHorizontalScrollbar.prototype.getHandleSizeRatio = function (viewportCount, totalCount) {
                  if (!totalCount || viewportCount > totalCount || viewportCount == totalCount) {
                    return 1;
                  }
                  return viewportCount / totalCount;
                };
                function WalkontableCornerScrollbarNative(instance) {
                  this.instance = instance;
                  this.init();
                  this.clone = this.makeClone('corner');
                }
                
                WalkontableCornerScrollbarNative.prototype = new WalkontableOverlay();
                
                WalkontableCornerScrollbarNative.prototype.resetFixedPosition = function () {
                  if (!this.instance.wtTable.holder.parentNode) {
                    return; //removed from DOM
                  }
                  var elem = this.clone.wtTable.holder.parentNode;
                
                  var box;
                  if (this.scrollHandler === window) {
                    box = this.instance.wtTable.hider.getBoundingClientRect();
                    var top = Math.ceil(box.top, 10);
                    var bottom = Math.ceil(box.bottom, 10);
                
                    if (top < 0 && bottom > 0) {
                      elem.style.top = '0';
                    }
                    else {
                      elem.style.top = top + 'px';
                    }
                
                    var left = Math.ceil(box.left, 10);
                    var right = Math.ceil(box.right, 10);
                
                    if (left < 0 && right > 0) {
                      elem.style.left = '0';
                    }
                    else {
                      elem.style.left = left + 'px';
                    }
                  }
                  else {
                    box = this.scrollHandler.getBoundingClientRect();
                    elem.style.top = Math.ceil(box.top, 10) + 'px';
                    elem.style.left = Math.ceil(box.left, 10) + 'px';
                  }
                
                  elem.style.width = WalkontableDom.prototype.outerWidth(this.clone.wtTable.TABLE) + 4 + 'px';
                  elem.style.height = WalkontableDom.prototype.outerHeight(this.clone.wtTable.TABLE) + 4 + 'px';
                };
                
                WalkontableCornerScrollbarNative.prototype.prepare = function () {
                };
                
                WalkontableCornerScrollbarNative.prototype.refresh = function (selectionsOnly) {
                  this.measureBefore = 0;
                  this.measureAfter = 0;
                  this.clone && this.clone.draw(selectionsOnly);
                };
                
                WalkontableCornerScrollbarNative.prototype.getScrollPosition = function () {
                };
                
                WalkontableCornerScrollbarNative.prototype.getLastCell = function () {
                };
                
                WalkontableCornerScrollbarNative.prototype.applyToDOM = function () {
                };
                
                WalkontableCornerScrollbarNative.prototype.scrollTo = function () {
                };
                
                WalkontableCornerScrollbarNative.prototype.readWindowSize = function () {
                };
                
                WalkontableCornerScrollbarNative.prototype.readSettings = function () {
                };
                function WalkontableHorizontalScrollbarNative(instance) {
                  this.instance = instance;
                  this.type = 'horizontal';
                  this.cellSize = 50;
                  this.init();
                  this.clone = this.makeClone('left');
                }
                
                WalkontableHorizontalScrollbarNative.prototype = new WalkontableOverlay();
                
                //resetFixedPosition (in future merge it with this.refresh?)
                WalkontableHorizontalScrollbarNative.prototype.resetFixedPosition = function () {
                  if (!this.instance.wtTable.holder.parentNode) {
                    return; //removed from DOM
                  }
                  var elem = this.clone.wtTable.holder.parentNode;
                
                  var box;
                  if (this.scrollHandler === window) {
                    box = this.instance.wtTable.hider.getBoundingClientRect();
                    var left = Math.ceil(box.left, 10);
                    var right = Math.ceil(box.right, 10);
                
                    if (left < 0 && right > 0) {
                      elem.style.left = '0';
                    }
                    else {
                      elem.style.left = left + 'px';
                    }
                  }
                  else {
                    box = this.scrollHandler.getBoundingClientRect();
                    elem.style.top = Math.ceil(box.top, 10) + 'px';
                    elem.style.left = Math.ceil(box.left, 10) + 'px';
                  }
                };
                
                //react on movement of the other dimension scrollbar (in future merge it with this.refresh?)
                WalkontableHorizontalScrollbarNative.prototype.react = function () {
                  if (!this.instance.wtTable.holder.parentNode) {
                    return; //removed from DOM
                  }
                  var overlayContainer = this.clone.wtTable.holder.parentNode;
                  if (this.instance.wtScrollbars.vertical.scrollHandler === window) {
                    var box = this.instance.wtTable.hider.getBoundingClientRect();
                    overlayContainer.style.top = Math.ceil(box.top, 10) + 'px';
                    overlayContainer.style.height = WalkontableDom.prototype.outerHeight(this.clone.wtTable.TABLE) + 'px';
                  }
                  else {
                    this.clone.wtTable.holder.style.top = -(this.instance.wtScrollbars.vertical.windowScrollPosition - this.instance.wtScrollbars.vertical.measureBefore) + 'px';
                    overlayContainer.style.height = this.instance.wtViewport.getWorkspaceHeight() + 'px'
                  }
                  overlayContainer.style.width = WalkontableDom.prototype.outerWidth(this.clone.wtTable.TABLE) + 4 + 'px'; //4 is for the box shadow
                };
                
                WalkontableHorizontalScrollbarNative.prototype.prepare = function () {
                };
                
                WalkontableHorizontalScrollbarNative.prototype.refresh = function (selectionsOnly) {
                  this.measureBefore = 0;
                  this.measureAfter = 0;
                  this.clone && this.clone.draw(selectionsOnly);
                };
                
                WalkontableHorizontalScrollbarNative.prototype.getScrollPosition = function () {
                  if (this.scrollHandler === window) {
                    return this.scrollHandler.scrollX;
                  }
                  else {
                    return this.scrollHandler.scrollLeft;
                  }
                };
                
                WalkontableHorizontalScrollbarNative.prototype.setScrollPosition = function (pos) {
                    this.scrollHandler.scrollLeft = pos;
                };
                
                WalkontableHorizontalScrollbarNative.prototype.onScroll = function () {
                  WalkontableOverlay.prototype.onScroll.apply(this, arguments);
                
                  this.instance.getSetting('onScrollHorizontally');
                };
                
                WalkontableHorizontalScrollbarNative.prototype.getLastCell = function () {
                  return this.instance.wtTable.getLastVisibleColumn();
                };
                
                //applyToDOM (in future merge it with this.refresh?)
                WalkontableHorizontalScrollbarNative.prototype.applyToDOM = function () {
                  this.fixedContainer.style.paddingLeft = this.measureBefore + 'px';
                  this.fixedContainer.style.paddingRight = this.measureAfter + 'px';
                };
                
                WalkontableHorizontalScrollbarNative.prototype.scrollTo = function (cell) {
                  this.$scrollHandler.scrollLeft(this.tableParentOffset + cell * this.cellSize);
                };
                
                //readWindowSize (in future merge it with this.prepare?)
                WalkontableHorizontalScrollbarNative.prototype.readWindowSize = function () {
                  if (this.scrollHandler === window) {
                    this.windowSize = document.documentElement.clientWidth;
                    this.tableParentOffset = this.instance.wtTable.holderOffset.left;
                  }
                  else {
                    this.windowSize = WalkontableDom.prototype.outerWidth(this.scrollHandler);
                    this.tableParentOffset = 0;
                  }
                  this.windowScrollPosition = this.getScrollPosition();
                };
                
                //readSettings (in future merge it with this.prepare?)
                WalkontableHorizontalScrollbarNative.prototype.readSettings = function () {
                  this.offset = this.instance.getSetting('offsetColumn');
                  this.total = this.instance.getSetting('totalColumns');
                };
                function WalkontableVerticalScrollbarNative(instance) {
                  this.instance = instance;
                  this.type = 'vertical';
                  this.cellSize = 23;
                  this.init();
                  this.clone = this.makeClone('top');
                }
                
                WalkontableVerticalScrollbarNative.prototype = new WalkontableOverlay();
                
                //resetFixedPosition (in future merge it with this.refresh?)
                WalkontableVerticalScrollbarNative.prototype.resetFixedPosition = function () {
                  if (!this.instance.wtTable.holder.parentNode) {
                    return; //removed from DOM
                  }
                  var elem = this.clone.wtTable.holder.parentNode;
                
                  var box;
                  if (this.scrollHandler === window) {
                    box = this.instance.wtTable.hider.getBoundingClientRect();
                    var top = Math.ceil(box.top, 10);
                    var bottom = Math.ceil(box.bottom, 10);
                
                    if (top < 0 && bottom > 0) {
                      elem.style.top = '0';
                    }
                    else {
                      elem.style.top = top + 'px';
                    }
                  }
                  else {
                    box = this.instance.wtScrollbars.horizontal.scrollHandler.getBoundingClientRect();
                    elem.style.top = Math.ceil(box.top, 10) + 'px';
                    elem.style.left = Math.ceil(box.left, 10) + 'px';
                  }
                
                  if (this.instance.wtScrollbars.horizontal.scrollHandler === window) {
                    elem.style.width = this.instance.wtViewport.getWorkspaceActualWidth() + 'px';
                  }
                  else {
                    elem.style.width = WalkontableDom.prototype.outerWidth(this.instance.wtTable.holder.parentNode) + 'px';
                  }
                
                  elem.style.height = WalkontableDom.prototype.outerHeight(this.clone.wtTable.TABLE) + 4 + 'px';
                };
                
                //react on movement of the other dimension scrollbar (in future merge it with this.refresh?)
                WalkontableVerticalScrollbarNative.prototype.react = function () {
                  if (!this.instance.wtTable.holder.parentNode) {
                    return; //removed from DOM
                  }
                  if (this.instance.wtScrollbars.horizontal.scrollHandler !== window) {
                    var elem = this.clone.wtTable.holder.parentNode;
                    elem.firstChild.style.left = -this.instance.wtScrollbars.horizontal.windowScrollPosition + 'px';
                  }
                };
                
                WalkontableVerticalScrollbarNative.prototype.getScrollPosition = function () {
                  if (this.scrollHandler === window) {
                    return this.scrollHandler.scrollY;
                  }
                  else {
                    return this.scrollHandler.scrollTop;
                  }
                };
                
                WalkontableVerticalScrollbarNative.prototype.setScrollPosition = function (pos) {
                  this.scrollHandler.scrollTop = pos;
                };
                
                WalkontableVerticalScrollbarNative.prototype.onScroll = function (forcePosition) {
                  WalkontableOverlay.prototype.onScroll.apply(this, arguments);
                
                  var scrollDelta;
                  var newOffset = 0;
                
                  if (1 == 1 || this.windowScrollPosition > this.tableParentOffset) {
                    scrollDelta = this.windowScrollPosition - this.tableParentOffset;
                
                    partialOffset = 0;
                    if (scrollDelta > 0) {
                      var sum = 0;
                      var last;
                      for (var i = 0; i < this.total; i++) {
                        last = this.instance.getSetting('rowHeight', i);
                        sum += last;
                        if (sum > scrollDelta) {
                          break;
                        }
                      }
                
                      if (this.offset > 0) {
                        partialOffset = (sum - scrollDelta);
                      }
                      newOffset = i;
                      newOffset = Math.min(newOffset, this.total);
                    }
                  }
                
                  this.curOuts = newOffset > this.maxOuts ? this.maxOuts : newOffset;
                  newOffset -= this.curOuts;
                
                  this.instance.update('offsetRow', newOffset);
                  this.readSettings(); //read new offset
                  this.instance.draw();
                
                  this.instance.getSetting('onScrollVertically');
                };
                
                WalkontableVerticalScrollbarNative.prototype.getLastCell = function () {
                  return this.instance.getSetting('offsetRow') + this.instance.wtTable.tbodyChildrenLength - 1;
                };
                
                var partialOffset = 0;
                
                WalkontableVerticalScrollbarNative.prototype.sumCellSizes = function (from, length) {
                  var sum = 0;
                  while (from < length) {
                    sum += this.instance.getSetting('rowHeight', from);
                    from++;
                  }
                  return sum;
                };
                
                //applyToDOM (in future merge it with this.refresh?)
                WalkontableVerticalScrollbarNative.prototype.applyToDOM = function () {
                  var headerSize = this.instance.wtViewport.getColumnHeaderHeight();
                  this.fixedContainer.style.height = headerSize + this.sumCellSizes(0, this.total) + 4 + 'px'; //+4 is needed, otherwise vertical scroll appears in Chrome (window scroll mode) - maybe because of fill handle in last row or because of box shadow
                  this.fixed.style.top = this.measureBefore + 'px';
                  this.fixed.style.bottom = '';
                };
                
                WalkontableVerticalScrollbarNative.prototype.scrollTo = function (cell) {
                  var newY = this.tableParentOffset + cell * this.cellSize;
                  this.$scrollHandler.scrollTop(newY);
                  this.onScroll(newY);
                };
                
                //readWindowSize (in future merge it with this.prepare?)
                WalkontableVerticalScrollbarNative.prototype.readWindowSize = function () {
                  if (this.scrollHandler === window) {
                    this.windowSize = document.documentElement.clientHeight;
                    this.tableParentOffset = this.instance.wtTable.holderOffset.top;
                  }
                  else {
                    //this.windowSize = WalkontableDom.prototype.outerHeight(this.scrollHandler);
                    this.windowSize = this.scrollHandler.clientHeight; //returns height without DIV scrollbar
                    this.tableParentOffset = 0;
                  }
                  this.windowScrollPosition = this.getScrollPosition();
                };
                
                //readSettings (in future merge it with this.prepare?)
                WalkontableVerticalScrollbarNative.prototype.readSettings = function () {
                  this.offset = this.instance.getSetting('offsetRow');
                  this.total = this.instance.getSetting('totalRows');
                };
                function WalkontableScrollbars(instance) {
                  this.instance = instance;
                  if (instance.getSetting('nativeScrollbars')) {
                    instance.update('scrollbarWidth', instance.wtDom.getScrollbarWidth());
                    instance.update('scrollbarHeight', instance.wtDom.getScrollbarWidth());
                    this.vertical = new WalkontableVerticalScrollbarNative(instance);
                    this.horizontal = new WalkontableHorizontalScrollbarNative(instance);
                    this.corner = new WalkontableCornerScrollbarNative(instance);
                    if (instance.getSetting('debug')) {
                      this.debug = new WalkontableDebugOverlay(instance);
                    }
                    this.registerListeners();
                  }
                  else {
                    this.vertical = new WalkontableVerticalScrollbar(instance);
                    this.horizontal = new WalkontableHorizontalScrollbar(instance);
                  }
                }
                
                WalkontableScrollbars.prototype.registerListeners = function () {
                  var that = this;
                
                  var oldVerticalScrollPosition
                    , oldHorizontalScrollPosition
                    , oldBoxTop
                    , oldBoxLeft
                    , oldBoxWidth
                    , oldBoxHeight;
                
                  function refreshAll() {
                    if (!that.instance.wtTable.holder.parentNode) {
                      //Walkontable was detached from DOM, but this handler was not removed
                      that.destroy();
                      return;
                    }
                
                    that.vertical.windowScrollPosition = that.vertical.getScrollPosition();
                    that.horizontal.windowScrollPosition = that.horizontal.getScrollPosition();
                    that.box = that.instance.wtTable.hider.getBoundingClientRect();
                
                    if((that.box.width !== oldBoxWidth || that.box.height !== oldBoxHeight) && that.instance.rowHeightCache) {
                      //that.instance.rowHeightCache.length = 0; //at this point the cached row heights may be invalid, but it is better not to reset the cache, which could cause scrollbar jumping when there are multiline cells outside of the rendered part of the table
                      oldBoxWidth = that.box.width;
                      oldBoxHeight = that.box.height;
                      that.instance.draw();
                    }
                
                    if (that.vertical.windowScrollPosition !== oldVerticalScrollPosition || that.horizontal.windowScrollPosition !== oldHorizontalScrollPosition || that.box.top !== oldBoxTop || that.box.left !== oldBoxLeft) {
                      that.vertical.onScroll();
                      that.horizontal.onScroll(); //it's done here to make sure that all onScroll's are executed before changing styles
                
                      that.vertical.react();
                      that.horizontal.react(); //it's done here to make sure that all onScroll's are executed before changing styles
                
                      oldVerticalScrollPosition = that.vertical.windowScrollPosition;
                      oldHorizontalScrollPosition = that.horizontal.windowScrollPosition;
                      oldBoxTop = that.box.top;
                      oldBoxLeft = that.box.left;
                    }
                  }
                
                  var $window = $(window);
                  this.vertical.$scrollHandler.on('scroll.' + this.instance.guid, refreshAll);
                  if (this.vertical.scrollHandler !== this.horizontal.scrollHandler) {
                    this.horizontal.$scrollHandler.on('scroll.' + this.instance.guid, refreshAll);
                  }
                
                  if (this.vertical.scrollHandler !== window && this.horizontal.scrollHandler !== window) {
                    $window.on('scroll.' + this.instance.guid, refreshAll);
                  }
                  $window.on('load.' + this.instance.guid, refreshAll);
                  $window.on('resize.' + this.instance.guid, refreshAll);
                  $(document).on('ready.' + this.instance.guid, refreshAll);
                  setInterval(refreshAll, 100); //Marcin - only idea I have to reposition scrollbars on CSS change of the container (container was moved using some styles after page was loaded)
                };
                
                WalkontableScrollbars.prototype.destroy = function () {
                  this.vertical && this.vertical.destroy();
                  this.horizontal && this.horizontal.destroy();
                };
                
                WalkontableScrollbars.prototype.refresh = function (selectionsOnly) {
                  this.horizontal && this.horizontal.readSettings();
                  this.vertical && this.vertical.readSettings();
                  this.horizontal && this.horizontal.prepare();
                  this.vertical && this.vertical.prepare();
                  this.horizontal && this.horizontal.refresh(selectionsOnly);
                  this.vertical && this.vertical.refresh(selectionsOnly);
                  this.corner && this.corner.refresh(selectionsOnly);
                  this.debug && this.debug.refresh(selectionsOnly);
                };
                function WalkontableSelection(instance, settings) {
                  this.instance = instance;
                  this.settings = settings;
                  this.selected = [];
                  if (settings.border) {
                    this.border = new WalkontableBorder(instance, settings);
                  }
                }
                
                WalkontableSelection.prototype.add = function (coords) {
                  this.selected.push(coords);
                };
                
                WalkontableSelection.prototype.clear = function () {
                  this.selected.length = 0; //http://jsperf.com/clear-arrayxxx
                };
                
                /**
                 * Returns the top left (TL) and bottom right (BR) selection coordinates
                 * @returns {Object}
                 */
                WalkontableSelection.prototype.getCorners = function () {
                  var minRow
                    , minColumn
                    , maxRow
                    , maxColumn
                    , i
                    , ilen = this.selected.length;
                
                  if (ilen > 0) {
                    minRow = maxRow = this.selected[0][0];
                    minColumn = maxColumn = this.selected[0][1];
                
                    if (ilen > 1) {
                      for (i = 1; i < ilen; i++) {
                        if (this.selected[i][0] < minRow) {
                          minRow = this.selected[i][0];
                        }
                        else if (this.selected[i][0] > maxRow) {
                          maxRow = this.selected[i][0];
                        }
                
                        if (this.selected[i][1] < minColumn) {
                          minColumn = this.selected[i][1];
                        }
                        else if (this.selected[i][1] > maxColumn) {
                          maxColumn = this.selected[i][1];
                        }
                      }
                    }
                  }
                
                  return [minRow, minColumn, maxRow, maxColumn];
                };
                
                WalkontableSelection.prototype.draw = function () {
                  var corners, r, c, source_r, source_c;
                
                  var visibleRows = this.instance.wtTable.rowStrategy.countVisible()
                    , visibleColumns = this.instance.wtTable.columnStrategy.countVisible();
                
                  if (this.selected.length) {
                    corners = this.getCorners();
                
                    for (r = 0; r < visibleRows; r++) {
                      for (c = 0; c < visibleColumns; c++) {
                        source_r = this.instance.wtTable.rowFilter.visibleToSource(r);
                        source_c = this.instance.wtTable.columnFilter.visibleToSource(c);
                
                        if (source_r >= corners[0] && source_r <= corners[2] && source_c >= corners[1] && source_c <= corners[3]) {
                          //selected cell
                          this.instance.wtTable.currentCellCache.add(r, c, this.settings.className);
                        }
                        else if (source_r >= corners[0] && source_r <= corners[2]) {
                          //selection is in this row
                          this.instance.wtTable.currentCellCache.add(r, c, this.settings.highlightRowClassName);
                        }
                        else if (source_c >= corners[1] && source_c <= corners[3]) {
                          //selection is in this column
                          this.instance.wtTable.currentCellCache.add(r, c, this.settings.highlightColumnClassName);
                        }
                      }
                    }
                
                    this.border && this.border.appear(corners); //warning! border.appear modifies corners!
                  }
                  else {
                    this.border && this.border.disappear();
                  }
                };
                
                function WalkontableSettings(instance, settings) {
                  var that = this;
                  this.instance = instance;
                
                  //default settings. void 0 means it is required, null means it can be empty
                  this.defaults = {
                    table: void 0,
                    debug: false, //shows WalkontableDebugOverlay
                
                    //presentation mode
                    scrollH: 'auto', //values: scroll (always show scrollbar), auto (show scrollbar if table does not fit in the container), none (never show scrollbar)
                    scrollV: 'auto', //values: see above
                    nativeScrollbars: false, //values: false (dragdealer), true (native)
                    stretchH: 'hybrid', //values: hybrid, all, last, none
                    currentRowClassName: null,
                    currentColumnClassName: null,
                
                    //data source
                    data: void 0,
                    offsetRow: 0,
                    offsetColumn: 0,
                    fixedColumnsLeft: 0,
                    fixedRowsTop: 0,
                    rowHeaders: function () {
                      return []
                    }, //this must be array of functions: [function (row, TH) {}]
                    columnHeaders: function () {
                      return []
                    }, //this must be array of functions: [function (column, TH) {}]
                    totalRows: void 0,
                    totalColumns: void 0,
                    width: null,
                    height: null,
                    cellRenderer: function (row, column, TD) {
                      var cellData = that.getSetting('data', row, column);
                      that.instance.wtDom.fastInnerText(TD, cellData === void 0 || cellData === null ? '' : cellData);
                    },
                    columnWidth: 50,
                    selections: null,
                    hideBorderOnMouseDownOver: false,
                
                    //callbacks
                    onCellMouseDown: null,
                    onCellMouseOver: null,
                //    onCellMouseOut: null,
                    onCellDblClick: null,
                    onCellCornerMouseDown: null,
                    onCellCornerDblClick: null,
                    beforeDraw: null,
                    onDraw: null,
                    onScrollVertically: null,
                    onScrollHorizontally: null,
                
                    //constants
                    scrollbarWidth: 10,
                    scrollbarHeight: 10
                  };
                
                  //reference to settings
                  this.settings = {};
                  for (var i in this.defaults) {
                    if (this.defaults.hasOwnProperty(i)) {
                      if (settings[i] !== void 0) {
                        this.settings[i] = settings[i];
                      }
                      else if (this.defaults[i] === void 0) {
                        throw new Error('A required setting "' + i + '" was not provided');
                      }
                      else {
                        this.settings[i] = this.defaults[i];
                      }
                    }
                  }
                }
                
                /**
                 * generic methods
                 */
                
                WalkontableSettings.prototype.update = function (settings, value) {
                  if (value === void 0) { //settings is object
                    for (var i in settings) {
                      if (settings.hasOwnProperty(i)) {
                        this.settings[i] = settings[i];
                      }
                    }
                  }
                  else { //if value is defined then settings is the key
                    this.settings[settings] = value;
                  }
                  return this.instance;
                };
                
                WalkontableSettings.prototype.getSetting = function (key, param1, param2, param3) {
                  if (this[key]) {
                    return this[key](param1, param2, param3);
                  }
                  else {
                    return this._getSetting(key, param1, param2, param3);
                  }
                };
                
                WalkontableSettings.prototype._getSetting = function (key, param1, param2, param3) {
                  if (typeof this.settings[key] === 'function') {
                    return this.settings[key](param1, param2, param3);
                  }
                  else if (param1 !== void 0 && Object.prototype.toString.call(this.settings[key]) === '[object Array]') {
                    return this.settings[key][param1];
                  }
                  else {
                    return this.settings[key];
                  }
                };
                
                WalkontableSettings.prototype.has = function (key) {
                  return !!this.settings[key]
                };
                
                /**
                 * specific methods
                 */
                WalkontableSettings.prototype.rowHeight = function (row, TD) {
                  if (!this.instance.rowHeightCache) {
                    this.instance.rowHeightCache = []; //hack. This cache is being invalidated in WOT core.js
                  }
                  if (this.instance.rowHeightCache[row] === void 0) {
                    var size = 23; //guess
                    if (TD) {
                      size = this.instance.wtDom.outerHeight(TD); //measure
                      this.instance.rowHeightCache[row] = size; //cache only something we measured
                    }
                    return size;
                  }
                  else {
                    return this.instance.rowHeightCache[row];
                  }
                };
                function WalkontableTable(instance, table) {
                  //reference to instance
                  this.instance = instance;
                  this.TABLE = table;
                  this.wtDom = this.instance.wtDom;
                  this.wtDom.removeTextNodes(this.TABLE);
                
                  //wtSpreader
                  var parent = this.TABLE.parentNode;
                  if (!parent || parent.nodeType !== 1 || !this.wtDom.hasClass(parent, 'wtHolder')) {
                    var spreader = document.createElement('DIV');
                    spreader.className = 'wtSpreader';
                    if (parent) {
                      parent.insertBefore(spreader, this.TABLE); //if TABLE is detached (e.g. in Jasmine test), it has no parentNode so we cannot attach holder to it
                    }
                    spreader.appendChild(this.TABLE);
                  }
                  this.spreader = this.TABLE.parentNode;
                
                  //wtHider
                  parent = this.spreader.parentNode;
                  if (!parent || parent.nodeType !== 1 || !this.wtDom.hasClass(parent, 'wtHolder')) {
                    var hider = document.createElement('DIV');
                    hider.className = 'wtHider';
                    if (parent) {
                      parent.insertBefore(hider, this.spreader); //if TABLE is detached (e.g. in Jasmine test), it has no parentNode so we cannot attach holder to it
                    }
                    hider.appendChild(this.spreader);
                  }
                  this.hider = this.spreader.parentNode;
                  this.hiderStyle = this.hider.style;
                  this.hiderStyle.position = 'relative';
                
                  //wtHolder
                  parent = this.hider.parentNode;
                  if (!parent || parent.nodeType !== 1 || !this.wtDom.hasClass(parent, 'wtHolder')) {
                    var holder = document.createElement('DIV');
                    holder.style.position = 'relative';
                    holder.className = 'wtHolder';
                    if (parent) {
                      parent.insertBefore(holder, this.hider); //if TABLE is detached (e.g. in Jasmine test), it has no parentNode so we cannot attach holder to it
                    }
                    holder.appendChild(this.hider);
                  }
                  this.holder = this.hider.parentNode;
                
                  //bootstrap from settings
                  this.TBODY = this.TABLE.getElementsByTagName('TBODY')[0];
                  if (!this.TBODY) {
                    this.TBODY = document.createElement('TBODY');
                    this.TABLE.appendChild(this.TBODY);
                  }
                  this.THEAD = this.TABLE.getElementsByTagName('THEAD')[0];
                  if (!this.THEAD) {
                    this.THEAD = document.createElement('THEAD');
                    this.TABLE.insertBefore(this.THEAD, this.TBODY);
                  }
                  this.COLGROUP = this.TABLE.getElementsByTagName('COLGROUP')[0];
                  if (!this.COLGROUP) {
                    this.COLGROUP = document.createElement('COLGROUP');
                    this.TABLE.insertBefore(this.COLGROUP, this.THEAD);
                  }
                
                  if (this.instance.getSetting('columnHeaders').length) {
                    if (!this.THEAD.childNodes.length) {
                      var TR = document.createElement('TR');
                      this.THEAD.appendChild(TR);
                    }
                  }
                
                  this.colgroupChildrenLength = this.COLGROUP.childNodes.length;
                  this.theadChildrenLength = this.THEAD.firstChild ? this.THEAD.firstChild.childNodes.length : 0;
                  this.tbodyChildrenLength = this.TBODY.childNodes.length;
                
                  this.oldCellCache = new WalkontableClassNameCache();
                  this.currentCellCache = new WalkontableClassNameCache();
                
                  this.rowFilter = new WalkontableRowFilter();
                  this.columnFilter = new WalkontableColumnFilter();
                
                  this.verticalRenderReverse = false;
                }
                
                WalkontableTable.prototype.refreshHiderDimensions = function () {
                  var height = this.instance.wtViewport.getWorkspaceHeight();
                  var width = this.instance.wtViewport.getWorkspaceWidth();
                
                  var spreaderStyle = this.spreader.style;
                
                  if ((height !== Infinity || width !== Infinity) && !this.instance.getSetting('nativeScrollbars')) {
                    if (height === Infinity) {
                      height = this.instance.wtViewport.getWorkspaceActualHeight();
                    }
                    if (width === Infinity) {
                      width = this.instance.wtViewport.getWorkspaceActualWidth();
                    }
                
                    this.hiderStyle.overflow = 'hidden';
                
                    spreaderStyle.position = 'absolute';
                    spreaderStyle.top = '0';
                    spreaderStyle.left = '0';
                
                    if (!this.instance.getSetting('nativeScrollbars')) {
                      spreaderStyle.height = '4000px';
                      spreaderStyle.width = '4000px';
                    }
                
                    if (height < 0) { //this happens with WalkontableOverlay and causes "Invalid argument" error in IE8
                      height = 0;
                    }
                
                    this.hiderStyle.height = height + 'px';
                    this.hiderStyle.width = width + 'px';
                  }
                  else {
                    spreaderStyle.position = 'relative';
                    spreaderStyle.width = 'auto';
                    spreaderStyle.height = 'auto';
                  }
                };
                
                WalkontableTable.prototype.refreshStretching = function () {
                  if (this.instance.cloneSource) {
                    return;
                  }
                
                  var instance = this.instance
                    , stretchH = instance.getSetting('stretchH')
                    , totalRows = instance.getSetting('totalRows')
                    , totalColumns = instance.getSetting('totalColumns')
                    , offsetColumn = instance.getSetting('offsetColumn');
                
                  var containerWidthFn = function (cacheWidth) {
                    var viewportWidth = that.instance.wtViewport.getViewportWidth(cacheWidth);
                    if (viewportWidth < cacheWidth && that.instance.getSetting('nativeScrollbars')) {
                      return Infinity; //disable stretching when viewport is bigger than sum of the cell widths
                    }
                    return viewportWidth;
                  };
                
                  var that = this;
                
                  var columnWidthFn = function (i) {
                    var source_c = that.columnFilter.visibleToSource(i);
                    if (source_c < totalColumns) {
                      return instance.getSetting('columnWidth', source_c);
                    }
                  };
                
                  if (stretchH === 'hybrid') {
                    if (offsetColumn > 0) {
                      stretchH = 'last';
                    }
                    else {
                      stretchH = 'none';
                    }
                  }
                
                  var containerHeightFn = function (cacheHeight) {
                    if (that.instance.getSetting('nativeScrollbars')) {
                      if (that.instance.cloneOverlay instanceof WalkontableDebugOverlay) {
                        return Infinity;
                      }
                      else {
                        return 2 * that.instance.wtViewport.getViewportHeight(cacheHeight);
                      }
                    }
                    return that.instance.wtViewport.getViewportHeight(cacheHeight);
                  };
                
                  var rowHeightFn = function (i, TD) {
                    if (that.instance.getSetting('nativeScrollbars')) {
                      return 20;
                    }
                    var source_r = that.rowFilter.visibleToSource(i);
                    if (source_r < totalRows) {
                      if (that.verticalRenderReverse && i === 0) {
                        return that.instance.getSetting('rowHeight', source_r, TD) - 1;
                      }
                      else {
                        return that.instance.getSetting('rowHeight', source_r, TD);
                      }
                    }
                  };
                
                  this.columnStrategy = new WalkontableColumnStrategy(instance, containerWidthFn, columnWidthFn, stretchH);
                  this.rowStrategy = new WalkontableRowStrategy(instance, containerHeightFn, rowHeightFn);
                };
                
                WalkontableTable.prototype.adjustAvailableNodes = function () {
                  var displayTds
                    , rowHeaders = this.instance.getSetting('rowHeaders')
                    , displayThs = rowHeaders.length
                    , columnHeaders = this.instance.getSetting('columnHeaders')
                    , TR
                    , TD
                    , c;
                
                  //adjust COLGROUP
                  while (this.colgroupChildrenLength < displayThs) {
                    this.COLGROUP.appendChild(document.createElement('COL'));
                    this.colgroupChildrenLength++;
                  }
                
                  this.refreshStretching(); //actually it is wrong position because it assumes rowHeader would be always 50px wide (because we measure before it is filled with text). TODO: debug
                  if (this.instance.cloneSource && (this.instance.cloneOverlay instanceof WalkontableHorizontalScrollbarNative || this.instance.cloneOverlay instanceof WalkontableCornerScrollbarNative)) {
                    displayTds = this.instance.getSetting('fixedColumnsLeft');
                  }
                  else {
                    displayTds = this.columnStrategy.cellCount;
                  }
                
                  //adjust COLGROUP
                  while (this.colgroupChildrenLength < displayTds + displayThs) {
                    this.COLGROUP.appendChild(document.createElement('COL'));
                    this.colgroupChildrenLength++;
                  }
                  while (this.colgroupChildrenLength > displayTds + displayThs) {
                    this.COLGROUP.removeChild(this.COLGROUP.lastChild);
                    this.colgroupChildrenLength--;
                  }
                
                  //adjust THEAD
                  TR = this.THEAD.firstChild;
                  if (columnHeaders.length) {
                    if (!TR) {
                      TR = document.createElement('TR');
                      this.THEAD.appendChild(TR);
                    }
                
                    this.theadChildrenLength = TR.childNodes.length;
                    while (this.theadChildrenLength < displayTds + displayThs) {
                      TR.appendChild(document.createElement('TH'));
                      this.theadChildrenLength++;
                    }
                    while (this.theadChildrenLength > displayTds + displayThs) {
                      TR.removeChild(TR.lastChild);
                      this.theadChildrenLength--;
                    }
                  }
                  else if (TR) {
                    this.wtDom.empty(TR);
                  }
                
                  //draw COLGROUP
                  for (c = 0; c < this.colgroupChildrenLength; c++) {
                    if (c < displayThs) {
                      this.wtDom.addClass(this.COLGROUP.childNodes[c], 'rowHeader');
                    }
                    else {
                      this.wtDom.removeClass(this.COLGROUP.childNodes[c], 'rowHeader');
                    }
                  }
                
                  //draw THEAD
                  if (columnHeaders.length) {
                    TR = this.THEAD.firstChild;
                    if (displayThs) {
                      TD = TR.firstChild; //actually it is TH but let's reuse single variable
                      for (c = 0; c < displayThs; c++) {
                        rowHeaders[c](-displayThs + c, TD);
                        TD = TD.nextSibling;
                      }
                    }
                  }
                
                  for (c = 0; c < displayTds; c++) {
                    if (columnHeaders.length) {
                      columnHeaders[0](this.columnFilter.visibleToSource(c), TR.childNodes[displayThs + c]);
                    }
                  }
                };
                
                WalkontableTable.prototype.adjustColumns = function (TR, desiredCount) {
                  var count = TR.childNodes.length;
                  while (count < desiredCount) {
                    var TD = document.createElement('TD');
                    TR.appendChild(TD);
                    count++;
                  }
                  while (count > desiredCount) {
                    TR.removeChild(TR.lastChild);
                    count--;
                  }
                };
                
                WalkontableTable.prototype.draw = function (selectionsOnly) {
                  if (this.instance.getSetting('nativeScrollbars')) {
                    this.verticalRenderReverse = false; //this is only supported in dragdealer mode, not in native
                  }
                
                  this.rowFilter.readSettings(this.instance);
                  this.columnFilter.readSettings(this.instance);
                
                  if (!selectionsOnly) {
                    if (this.instance.getSetting('nativeScrollbars')) {
                      if (this.instance.cloneSource) {
                        this.tableOffset = this.instance.cloneSource.wtTable.tableOffset;
                      }
                      else {
                        this.holderOffset = this.wtDom.offset(this.holder);
                        this.tableOffset = this.wtDom.offset(this.TABLE);
                        this.instance.wtScrollbars.vertical.readWindowSize();
                        this.instance.wtScrollbars.horizontal.readWindowSize();
                        this.instance.wtViewport.resetSettings();
                      }
                    }
                    else {
                      this.tableOffset = this.wtDom.offset(this.TABLE);
                      this.instance.wtViewport.resetSettings();
                    }
                    this._doDraw();
                  }
                  else {
                    this.instance.wtScrollbars && this.instance.wtScrollbars.refresh(true);
                  }
                
                  this.refreshPositions(selectionsOnly);
                
                  if (!selectionsOnly) {
                    if (this.instance.getSetting('nativeScrollbars')) {
                      if (!this.instance.cloneSource) {
                        this.instance.wtScrollbars.vertical.resetFixedPosition();
                        this.instance.wtScrollbars.horizontal.resetFixedPosition();
                        this.instance.wtScrollbars.corner.resetFixedPosition();
                        this.instance.wtScrollbars.debug && this.instance.wtScrollbars.debug.resetFixedPosition();
                      }
                    }
                  }
                
                  this.instance.drawn = true;
                  return this;
                };
                
                WalkontableTable.prototype._doDraw = function () {
                  var r = 0
                    , source_r
                    , c
                    , source_c
                    , offsetRow = this.instance.getSetting('offsetRow')
                    , totalRows = this.instance.getSetting('totalRows')
                    , totalColumns = this.instance.getSetting('totalColumns')
                    , displayTds
                    , rowHeaders = this.instance.getSetting('rowHeaders')
                    , displayThs = rowHeaders.length
                    , TR
                    , TD
                    , TH
                    , adjusted = false
                    , workspaceWidth
                    , mustBeInViewport
                    , res;
                
                  if (this.verticalRenderReverse) {
                    mustBeInViewport = offsetRow;
                  }
                
                  var noPartial = false;
                  if (this.verticalRenderReverse) {
                    if (offsetRow === totalRows - this.rowFilter.fixedCount - 1) {
                      noPartial = true;
                    }
                    else {
                      this.instance.update('offsetRow', offsetRow + 1); //if we are scrolling reverse
                      this.rowFilter.readSettings(this.instance);
                    }
                  }
                
                  if (this.instance.cloneSource) {
                    this.columnStrategy = this.instance.cloneSource.wtTable.columnStrategy;
                    this.rowStrategy = this.instance.cloneSource.wtTable.rowStrategy;
                  }
                
                  //draw TBODY
                  if (totalColumns > 0) {
                    source_r = this.rowFilter.visibleToSource(r);
                
                    var fixedRowsTop = this.instance.getSetting('fixedRowsTop');
                    var cloneLimit;
                    if (this.instance.cloneSource) { //must be run after adjustAvailableNodes because otherwise this.rowStrategy is not yet defined
                      if (this.instance.cloneOverlay instanceof WalkontableVerticalScrollbarNative || this.instance.cloneOverlay instanceof WalkontableCornerScrollbarNative) {
                        cloneLimit = fixedRowsTop;
                      }
                      else if (this.instance.cloneOverlay instanceof WalkontableHorizontalScrollbarNative) {
                        cloneLimit = this.rowStrategy.countVisible();
                      }
                      //else if WalkontableDebugOverlay do nothing. No cloneLimit means render ALL rows
                    }
                
                    this.adjustAvailableNodes();
                    adjusted = true;
                
                    if (this.instance.cloneSource && (this.instance.cloneOverlay instanceof WalkontableHorizontalScrollbarNative || this.instance.cloneOverlay instanceof WalkontableCornerScrollbarNative)) {
                      displayTds = this.instance.getSetting('fixedColumnsLeft');
                    }
                    else {
                      displayTds = this.columnStrategy.cellCount;
                    }
                
                    if (!this.instance.cloneSource) {
                      workspaceWidth = this.instance.wtViewport.getWorkspaceWidth();
                      this.columnStrategy.stretch();
                    }
                
                    for (c = 0; c < displayTds; c++) {
                      this.COLGROUP.childNodes[c + displayThs].style.width = this.columnStrategy.getSize(c) + 'px';
                    }
                
                    while (source_r < totalRows && source_r >= 0) {
                      if (r > 1000) {
                        throw new Error('Security brake: Too much TRs. Please define height for your table, which will enforce scrollbars.');
                      }
                
                      if (cloneLimit !== void 0 && r === cloneLimit) {
                        break; //we have as much rows as needed for this clone
                      }
                
                      if (r >= this.tbodyChildrenLength || (this.verticalRenderReverse && r >= this.rowFilter.fixedCount)) {
                        TR = document.createElement('TR');
                        for (c = 0; c < displayThs; c++) {
                          TR.appendChild(document.createElement('TH'));
                        }
                        if (this.verticalRenderReverse && r >= this.rowFilter.fixedCount) {
                          this.TBODY.insertBefore(TR, this.TBODY.childNodes[this.rowFilter.fixedCount] || this.TBODY.firstChild);
                        }
                        else {
                          this.TBODY.appendChild(TR);
                        }
                        this.tbodyChildrenLength++;
                      }
                      else if (r === 0) {
                        TR = this.TBODY.firstChild;
                      }
                      else {
                        TR = TR.nextSibling; //http://jsperf.com/nextsibling-vs-indexed-childnodes
                      }
                
                      //TH
                      TH = TR.firstChild;
                      for (c = 0; c < displayThs; c++) {
                
                        //If the number of row headers increased we need to replace TD with TH
                        if (TH.nodeName == 'TD') {
                          TD = TH;
                          TH = document.createElement('TH');
                          TR.insertBefore(TH, TD);
                          TR.removeChild(TD);
                        }
                
                        rowHeaders[c](source_r, TH); //actually TH
                        TH = TH.nextSibling; //http://jsperf.com/nextsibling-vs-indexed-childnodes
                      }
                
                      this.adjustColumns(TR, displayTds + displayThs);
                
                      for (c = 0; c < displayTds; c++) {
                        source_c = this.columnFilter.visibleToSource(c);
                        if (c === 0) {
                          TD = TR.childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(source_c)];
                        }
                        else {
                          TD = TD.nextSibling; //http://jsperf.com/nextsibling-vs-indexed-childnodes
                        }
                
                        //If the number of headers has been reduced, we need to replace excess TH with TD
                        if (TD.nodeName == 'TH') {
                          TH = TD;
                          TD = document.createElement('TD');
                          TR.insertBefore(TD, TH);
                          TR.removeChild(TH);
                        }
                
                        TD.className = '';
                        TD.removeAttribute('style');
                        this.instance.getSetting('cellRenderer', source_r, source_c, TD);
                      }
                
                      offsetRow = this.instance.getSetting('offsetRow'); //refresh the value
                
                      //after last column is rendered, check if last cell is fully displayed
                      if (this.verticalRenderReverse && noPartial) {
                        if (-this.wtDom.outerHeight(TR.firstChild) < this.rowStrategy.remainingSize) {
                          this.TBODY.removeChild(TR);
                          this.instance.update('offsetRow', offsetRow + 1);
                          this.tbodyChildrenLength--;
                          this.rowFilter.readSettings(this.instance);
                          break;
                
                        }
                        else if (!this.instance.cloneSource) {
                          res = this.rowStrategy.add(r, TD, this.verticalRenderReverse);
                          if (res === false) {
                            this.rowStrategy.removeOutstanding();
                          }
                        }
                      }
                      else if (!this.instance.cloneSource) {
                        res = this.rowStrategy.add(r, TD, this.verticalRenderReverse);
                
                        if (res === false) {
                          if (!this.instance.getSetting('nativeScrollbars')) {
                            this.rowStrategy.removeOutstanding();
                          }
                        }
                
                        if (this.rowStrategy.isLastIncomplete()) {
                          if (this.verticalRenderReverse && !this.isRowInViewport(mustBeInViewport)) {
                            //we failed because one of the cells was by far too large. Recover by rendering from top
                            this.verticalRenderReverse = false;
                            this.instance.update('offsetRow', mustBeInViewport);
                            this.draw();
                            return;
                          }
                          break;
                        }
                      }
                
                      if (this.instance.getSetting('nativeScrollbars')) {
                        if (this.instance.cloneSource) {
                          TR.style.height = this.instance.getSetting('rowHeight', source_r) + 'px'; //if I have 2 fixed columns with one-line content and the 3rd column has a multiline content, this is the way to make sure that the overlay will has same row height
                        }
                        else {
                          this.instance.getSetting('rowHeight', source_r, TD); //this trick saves rowHeight in rowHeightCache. It is then read in WalkontableVerticalScrollbarNative.prototype.sumCellSizes and reset in Walkontable constructor
                        }
                      }
                
                      if (this.verticalRenderReverse && r >= this.rowFilter.fixedCount) {
                        if (offsetRow === 0) {
                          break;
                        }
                        this.instance.update('offsetRow', offsetRow - 1);
                        this.rowFilter.readSettings(this.instance);
                      }
                      else {
                        r++;
                      }
                
                      source_r = this.rowFilter.visibleToSource(r);
                    }
                  }
                
                  if (!adjusted) {
                    this.adjustAvailableNodes();
                  }
                
                  if (!(this.instance.cloneOverlay instanceof WalkontableDebugOverlay)) {
                    r = this.rowStrategy.countVisible();
                    while (this.tbodyChildrenLength > r) {
                      this.TBODY.removeChild(this.TBODY.lastChild);
                      this.tbodyChildrenLength--;
                    }
                  }
                
                  this.instance.wtScrollbars && this.instance.wtScrollbars.refresh(false);
                
                  if (!this.instance.cloneSource) {
                    if (workspaceWidth !== this.instance.wtViewport.getWorkspaceWidth()) {
                      //workspace width changed though to shown/hidden vertical scrollbar. Let's reapply stretching
                      this.columnStrategy.stretch();
                      for (c = 0; c < this.columnStrategy.cellCount; c++) {
                        this.COLGROUP.childNodes[c + displayThs].style.width = this.columnStrategy.getSize(c) + 'px';
                      }
                    }
                  }
                
                  this.verticalRenderReverse = false;
                };
                
                WalkontableTable.prototype.refreshPositions = function (selectionsOnly) {
                  this.refreshHiderDimensions();
                  this.refreshSelections(selectionsOnly);
                };
                
                WalkontableTable.prototype.refreshSelections = function (selectionsOnly) {
                  var vr
                    , r
                    , vc
                    , c
                    , s
                    , slen
                    , classNames = []
                    , visibleRows = this.rowStrategy.countVisible()
                    , visibleColumns = this.columnStrategy.countVisible();
                
                  this.oldCellCache = this.currentCellCache;
                  this.currentCellCache = new WalkontableClassNameCache();
                
                  if (this.instance.selections) {
                    for (r in this.instance.selections) {
                      if (this.instance.selections.hasOwnProperty(r)) {
                        this.instance.selections[r].draw();
                        if (this.instance.selections[r].settings.className) {
                          classNames.push(this.instance.selections[r].settings.className);
                        }
                        if (this.instance.selections[r].settings.highlightRowClassName) {
                          classNames.push(this.instance.selections[r].settings.highlightRowClassName);
                        }
                        if (this.instance.selections[r].settings.highlightColumnClassName) {
                          classNames.push(this.instance.selections[r].settings.highlightColumnClassName);
                        }
                      }
                    }
                  }
                
                  slen = classNames.length;
                
                  for (vr = 0; vr < visibleRows; vr++) {
                    for (vc = 0; vc < visibleColumns; vc++) {
                      r = this.rowFilter.visibleToSource(vr);
                      c = this.columnFilter.visibleToSource(vc);
                      for (s = 0; s < slen; s++) {
                        if (this.currentCellCache.test(vr, vc, classNames[s])) {
                          this.wtDom.addClass(this.getCell([r, c]), classNames[s]);
                        }
                        else if (selectionsOnly && this.oldCellCache.test(vr, vc, classNames[s])) {
                          this.wtDom.removeClass(this.getCell([r, c]), classNames[s]);
                        }
                      }
                    }
                  }
                };
                
                /**
                 * getCell
                 * @param {Array} coords
                 * @return {Object} HTMLElement on success or {Number} one of the exit codes on error:
                 *  -1 row before viewport
                 *  -2 row after viewport
                 *  -3 column before viewport
                 *  -4 column after viewport
                 *
                 */
                WalkontableTable.prototype.getCell = function (coords) {
                  if (this.isRowBeforeViewport(coords[0])) {
                    return -1; //row before viewport
                  }
                  else if (this.isRowAfterViewport(coords[0])) {
                    return -2; //row after viewport
                  }
                  else {
                    if (this.isColumnBeforeViewport(coords[1])) {
                      return -3; //column before viewport
                    }
                    else if (this.isColumnAfterViewport(coords[1])) {
                      return -4; //column after viewport
                    }
                    else {
                      return this.TBODY.childNodes[this.rowFilter.sourceToVisible(coords[0])].childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(coords[1])];
                    }
                  }
                };
                
                WalkontableTable.prototype.getCoords = function (TD) {
                  return [
                    this.rowFilter.visibleToSource(this.wtDom.index(TD.parentNode)),
                    this.columnFilter.visibleRowHeadedColumnToSourceColumn(TD.cellIndex)
                  ];
                };
                
                //returns -1 if no row is visible
                WalkontableTable.prototype.getLastVisibleRow = function () {
                  return this.rowFilter.visibleToSource(this.rowStrategy.cellCount - 1);
                };
                
                //returns -1 if no column is visible
                WalkontableTable.prototype.getLastVisibleColumn = function () {
                  return this.columnFilter.visibleToSource(this.columnStrategy.cellCount - 1);
                };
                
                WalkontableTable.prototype.isRowBeforeViewport = function (r) {
                  return (this.rowFilter.sourceToVisible(r) < this.rowFilter.fixedCount && r >= this.rowFilter.fixedCount);
                };
                
                WalkontableTable.prototype.isRowAfterViewport = function (r) {
                  return (r > this.getLastVisibleRow());
                };
                
                WalkontableTable.prototype.isColumnBeforeViewport = function (c) {
                  return (this.columnFilter.sourceToVisible(c) < this.columnFilter.fixedCount && c >= this.columnFilter.fixedCount);
                };
                
                WalkontableTable.prototype.isColumnAfterViewport = function (c) {
                  return (c > this.getLastVisibleColumn());
                };
                
                WalkontableTable.prototype.isRowInViewport = function (r) {
                  return (!this.isRowBeforeViewport(r) && !this.isRowAfterViewport(r));
                };
                
                WalkontableTable.prototype.isColumnInViewport = function (c) {
                  return (!this.isColumnBeforeViewport(c) && !this.isColumnAfterViewport(c));
                };
                
                WalkontableTable.prototype.isLastRowFullyVisible = function () {
                  return (this.getLastVisibleRow() === this.instance.getSetting('totalRows') - 1 && !this.rowStrategy.isLastIncomplete());
                };
                
                WalkontableTable.prototype.isLastColumnFullyVisible = function () {
                  return (this.getLastVisibleColumn() === this.instance.getSetting('totalColumns') - 1 && !this.columnStrategy.isLastIncomplete());
                };
                
                function WalkontableViewport(instance) {
                  this.instance = instance;
                  this.resetSettings();
                
                  if (this.instance.getSetting('nativeScrollbars')) {
                    var that = this;
                    $(window).on('resize', function () {
                      that.clientHeight = that.getWorkspaceHeight();
                    });
                  }
                }
                
                /*WalkontableViewport.prototype.isInSightVertical = function () {
                  //is table outside viewport bottom edge
                  if (tableTop > windowHeight + scrollTop) {
                    return -1;
                  }
                
                  //is table outside viewport top edge
                  else if (scrollTop > tableTop + tableFakeHeight) {
                    return -2;
                  }
                
                  //table is in viewport but how much exactly?
                  else {
                
                  }
                };*/
                
                //used by scrollbar
                WalkontableViewport.prototype.getWorkspaceHeight = function (proposedHeight) {
                  if (this.instance.getSetting('nativeScrollbars')) {
                    return this.instance.wtScrollbars.vertical.windowSize;
                  }
                
                  var height = this.instance.getSetting('height');
                
                  if (height === Infinity || height === void 0 || height === null || height < 1) {
                    if (this.instance.wtScrollbars.vertical instanceof WalkontableOverlay) {
                      height = this.instance.wtScrollbars.vertical.availableSize();
                    }
                    else {
                      height = Infinity;
                    }
                  }
                
                  if (height !== Infinity) {
                    if (proposedHeight >= height) {
                      height -= this.instance.getSetting('scrollbarHeight');
                    }
                    else if (this.instance.wtScrollbars.horizontal.visible) {
                      height -= this.instance.getSetting('scrollbarHeight');
                    }
                  }
                
                  return height;
                };
                
                WalkontableViewport.prototype.getWorkspaceWidth = function (proposedWidth) {
                  var width = this.instance.getSetting('width');
                
                  if (width === Infinity || width === void 0 || width === null || width < 1) {
                    if (this.instance.wtScrollbars.horizontal instanceof WalkontableOverlay) {
                      width = this.instance.wtScrollbars.horizontal.availableSize();
                    }
                    else {
                      width = Infinity;
                    }
                  }
                
                  if (width !== Infinity) {
                    if (proposedWidth >= width) {
                      width -= this.instance.getSetting('scrollbarWidth');
                    }
                    else if (this.instance.wtScrollbars.vertical.visible) {
                      width -= this.instance.getSetting('scrollbarWidth');
                    }
                  }
                  return width;
                };
                
                WalkontableViewport.prototype.getWorkspaceActualHeight = function () {
                  return this.instance.wtDom.outerHeight(this.instance.wtTable.TABLE);
                };
                
                WalkontableViewport.prototype.getWorkspaceActualWidth = function () {
                  return this.instance.wtDom.outerWidth(this.instance.wtTable.TABLE) || this.instance.wtDom.outerWidth(this.instance.wtTable.TBODY) || this.instance.wtDom.outerWidth(this.instance.wtTable.THEAD); //IE8 reports 0 as <table> offsetWidth;
                };
                
                WalkontableViewport.prototype.getColumnHeaderHeight = function () {
                  if (isNaN(this.columnHeaderHeight)) {
                    var cellOffset = this.instance.wtDom.offset(this.instance.wtTable.TBODY)
                      , tableOffset = this.instance.wtTable.tableOffset;
                    this.columnHeaderHeight = cellOffset.top - tableOffset.top;
                  }
                  return this.columnHeaderHeight;
                };
                
                WalkontableViewport.prototype.getViewportHeight = function (proposedHeight) {
                  var containerHeight = this.getWorkspaceHeight(proposedHeight);
                
                  if (containerHeight === Infinity) {
                    return containerHeight;
                  }
                
                  var columnHeaderHeight = this.getColumnHeaderHeight();
                  if (columnHeaderHeight > 0) {
                    return containerHeight - columnHeaderHeight;
                  }
                  else {
                    return containerHeight;
                  }
                };
                
                WalkontableViewport.prototype.getRowHeaderWidth = function () {
                  if (this.instance.cloneSource) {
                    return this.instance.cloneSource.wtViewport.getRowHeaderWidth();
                  }
                  if (isNaN(this.rowHeaderWidth)) {
                    var rowHeaders = this.instance.getSetting('rowHeaders');
                    if (rowHeaders.length) {
                      var TH = this.instance.wtTable.TABLE.querySelector('TH');
                      this.rowHeaderWidth = 0;
                      for (var i = 0, ilen = rowHeaders.length; i < ilen; i++) {
                        if (TH) {
                          this.rowHeaderWidth += this.instance.wtDom.outerWidth(TH);
                          TH = TH.nextSibling;
                        }
                        else {
                          this.rowHeaderWidth += 50; //yes this is a cheat but it worked like that before, just taking assumption from CSS instead of measuring. TODO: proper fix
                        }
                      }
                    }
                    else {
                      this.rowHeaderWidth = 0;
                    }
                  }
                  return this.rowHeaderWidth;
                };
                
                WalkontableViewport.prototype.getViewportWidth = function (proposedWidth) {
                  var containerWidth = this.getWorkspaceWidth(proposedWidth);
                
                  if (containerWidth === Infinity) {
                    return containerWidth;
                  }
                
                  var rowHeaderWidth = this.getRowHeaderWidth();
                  if (rowHeaderWidth > 0) {
                    return containerWidth - rowHeaderWidth;
                  }
                  else {
                    return containerWidth;
                  }
                };
                
                WalkontableViewport.prototype.resetSettings = function () {
                  this.rowHeaderWidth = NaN;
                  this.columnHeaderHeight = NaN;
                };
                function WalkontableWheel(instance) {
                  if (instance.getSetting('nativeScrollbars')) {
                    return;
                  }
                
                  //spreader === instance.wtTable.TABLE.parentNode
                  $(instance.wtTable.spreader).on('mousewheel', function (event, delta, deltaX, deltaY) {
                    if (!deltaX && !deltaY && delta) { //we are in IE8, see https://github.com/brandonaaron/jquery-mousewheel/issues/53
                      deltaY = delta;
                    }
                
                    if (!deltaX && !deltaY) { //this happens in IE8 test case
                      return;
                    }
                
                    if (deltaY > 0 && instance.getSetting('offsetRow') === 0) {
                      return; //attempt to scroll up when it's already showing first row
                    }
                    else if (deltaY < 0 && instance.wtTable.isLastRowFullyVisible()) {
                      return; //attempt to scroll down when it's already showing last row
                    }
                    else if (deltaX < 0 && instance.getSetting('offsetColumn') === 0) {
                      return; //attempt to scroll left when it's already showing first column
                    }
                    else if (deltaX > 0 && instance.wtTable.isLastColumnFullyVisible()) {
                      return; //attempt to scroll right when it's already showing last column
                    }
                
                    //now we are sure we really want to scroll
                    clearTimeout(instance.wheelTimeout);
                    instance.wheelTimeout = setTimeout(function () { //timeout is needed because with fast-wheel scrolling mousewheel event comes dozen times per second
                      if (deltaY) {
                        //ceil is needed because jquery-mousewheel reports fractional mousewheel deltas on touchpad scroll
                        //see http://stackoverflow.com/questions/5527601/normalizing-mousewheel-speed-across-browsers
                        if (instance.wtScrollbars.vertical.visible) { // if we see scrollbar
                          instance.scrollVertical(-Math.ceil(deltaY)).draw();
                        }
                      }
                      else if (deltaX) {
                        if (instance.wtScrollbars.horizontal.visible) { // if we see scrollbar
                          instance.scrollHorizontal(Math.ceil(deltaX)).draw();
                        }
                      }
                    }, 0);
                
                    event.preventDefault();
                  });
                }
                /**
                 * Dragdealer JS v0.9.5 - patched by Walkontable at lines 66, 309-310, 339-340
                 * http://code.ovidiu.ch/dragdealer-js
                 *
                 * Copyright (c) 2010, Ovidiu Chereches
                 * MIT License
                 * http://legal.ovidiu.ch/licenses/MIT
                 */
                
                /* Cursor */
                
                var Cursor =
                {
                	x: 0, y: 0,
                	init: function()
                	{
                		this.setEvent('mouse');
                		this.setEvent('touch');
                	},
                	setEvent: function(type)
                	{
                		var moveHandler = document['on' + type + 'move'] || function(){};
                		document['on' + type + 'move'] = function(e)
                		{
                			moveHandler(e);
                			Cursor.refresh(e);
                		}
                	},
                	refresh: function(e)
                	{
                		if(!e)
                		{
                			e = window.event;
                		}
                		if(e.type == 'mousemove')
                		{
                			this.set(e);
                		}
                		else if(e.touches)
                		{
                			this.set(e.touches[0]);
                		}
                	},
                	set: function(e)
                	{
                		if(e.pageX || e.pageY)
                		{
                			this.x = e.pageX;
                			this.y = e.pageY;
                		}
                		else if(document.body && (e.clientX || e.clientY)) //need to check whether body exists, because of IE8 issue (#1084)
                		{
                			this.x = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;
                			this.y = e.clientY + document.body.scrollTop + document.documentElement.scrollTop;
                		}
                	}
                };
                Cursor.init();
                
                /* Position */
                
                var Position =
                {
                	get: function(obj)
                	{
                		var curtop = 0, curleft = 0; //Walkontable patch. Original (var curleft = curtop = 0;) created curtop in global scope
                		if(obj.offsetParent)
                		{
                			do
                			{
                				curleft += obj.offsetLeft;
                				curtop += obj.offsetTop;
                			}
                			while((obj = obj.offsetParent));
                		}
                		return [curleft, curtop];
                	}
                };
                
                /* Dragdealer */
                
                var Dragdealer = function(wrapper, options)
                {
                	if(typeof(wrapper) == 'string')
                	{
                		wrapper = document.getElementById(wrapper);
                	}
                	if(!wrapper)
                	{
                		return;
                	}
                	var handle = wrapper.getElementsByTagName('div')[0];
                	if(!handle || handle.className.search(/(^|\s)handle(\s|$)/) == -1)
                	{
                		return;
                	}
                	this.init(wrapper, handle, options || {});
                	this.setup();
                };
                Dragdealer.prototype =
                {
                	init: function(wrapper, handle, options)
                	{
                		this.wrapper = wrapper;
                		this.handle = handle;
                		this.options = options;
                		
                		this.disabled = this.getOption('disabled', false);
                		this.horizontal = this.getOption('horizontal', true);
                		this.vertical = this.getOption('vertical', false);
                		this.slide = this.getOption('slide', true);
                		this.steps = this.getOption('steps', 0);
                		this.snap = this.getOption('snap', false);
                		this.loose = this.getOption('loose', false);
                		this.speed = this.getOption('speed', 10) / 100;
                		this.xPrecision = this.getOption('xPrecision', 0);
                		this.yPrecision = this.getOption('yPrecision', 0);
                		
                		this.callback = options.callback || null;
                		this.animationCallback = options.animationCallback || null;
                		
                		this.bounds = {
                			left: options.left || 0, right: -(options.right || 0),
                			top: options.top || 0, bottom: -(options.bottom || 0),
                			x0: 0, x1: 0, xRange: 0,
                			y0: 0, y1: 0, yRange: 0
                		};
                		this.value = {
                			prev: [-1, -1],
                			current: [options.x || 0, options.y || 0],
                			target: [options.x || 0, options.y || 0]
                		};
                		this.offset = {
                			wrapper: [0, 0],
                			mouse: [0, 0],
                			prev: [-999999, -999999],
                			current: [0, 0],
                			target: [0, 0]
                		};
                		this.change = [0, 0];
                		
                		this.activity = false;
                		this.dragging = false;
                		this.tapping = false;
                	},
                	getOption: function(name, defaultValue)
                	{
                		return this.options[name] !== undefined ? this.options[name] : defaultValue;
                	},
                	setup: function()
                	{
                		this.setWrapperOffset();
                		this.setBoundsPadding();
                		this.setBounds();
                		this.setSteps();
                		
                		this.addListeners();
                	},
                	setWrapperOffset: function()
                	{
                		this.offset.wrapper = Position.get(this.wrapper);
                	},
                	setBoundsPadding: function()
                	{
                		if(!this.bounds.left && !this.bounds.right)
                		{
                			this.bounds.left = Position.get(this.handle)[0] - this.offset.wrapper[0];
                			this.bounds.right = -this.bounds.left;
                		}
                		if(!this.bounds.top && !this.bounds.bottom)
                		{
                			this.bounds.top = Position.get(this.handle)[1] - this.offset.wrapper[1];
                			this.bounds.bottom = -this.bounds.top;
                		}
                	},
                	setBounds: function()
                	{
                		this.bounds.x0 = this.bounds.left;
                		this.bounds.x1 = this.wrapper.offsetWidth + this.bounds.right;
                		this.bounds.xRange = (this.bounds.x1 - this.bounds.x0) - this.handle.offsetWidth;
                		
                		this.bounds.y0 = this.bounds.top;
                		this.bounds.y1 = this.wrapper.offsetHeight + this.bounds.bottom;
                		this.bounds.yRange = (this.bounds.y1 - this.bounds.y0) - this.handle.offsetHeight;
                		
                		this.bounds.xStep = 1 / (this.xPrecision || Math.max(this.wrapper.offsetWidth, this.handle.offsetWidth));
                		this.bounds.yStep = 1 / (this.yPrecision || Math.max(this.wrapper.offsetHeight, this.handle.offsetHeight));
                	},
                	setSteps: function()
                	{
                		if(this.steps > 1)
                		{
                			this.stepRatios = [];
                			for(var i = 0; i <= this.steps - 1; i++)
                			{
                				this.stepRatios[i] = i / (this.steps - 1);
                			}
                		}
                	},
                	addListeners: function()
                	{
                		var self = this;
                		
                		this.wrapper.onselectstart = function()
                		{
                			return false;
                		}
                		this.handle.onmousedown = this.handle.ontouchstart = function(e)
                		{
                			self.handleDownHandler(e);
                		};
                		this.wrapper.onmousedown = this.wrapper.ontouchstart = function(e)
                		{
                			self.wrapperDownHandler(e);
                		};
                		var mouseUpHandler = document.onmouseup || function(){};
                		document.onmouseup = function(e)
                		{
                			mouseUpHandler(e);
                			self.documentUpHandler(e);
                		};
                		var touchEndHandler = document.ontouchend || function(){};
                		document.ontouchend = function(e)
                		{
                			touchEndHandler(e);
                			self.documentUpHandler(e);
                		};
                		var resizeHandler = window.onresize || function(){};
                		window.onresize = function(e)
                		{
                			resizeHandler(e);
                			self.documentResizeHandler(e);
                		};
                		this.wrapper.onmousemove = function(e)
                		{
                			self.activity = true;
                		}
                		this.wrapper.onclick = function(e)
                		{
                			return !self.activity;
                		}
                		
                		this.interval = setInterval(function(){ self.animate() }, 25);
                		self.animate(false, true);
                	},
                	handleDownHandler: function(e)
                	{
                		this.activity = false;
                		Cursor.refresh(e);
                		
                		this.preventDefaults(e, true);
                		this.startDrag();
                	},
                	wrapperDownHandler: function(e)
                	{
                		Cursor.refresh(e);
                		
                		this.preventDefaults(e, true);
                		this.startTap();
                	},
                	documentUpHandler: function(e)
                	{
                		this.stopDrag();
                		this.stopTap();
                	},
                	documentResizeHandler: function(e)
                	{
                		this.setWrapperOffset();
                		this.setBounds();
                		
                		this.update();
                	},
                	enable: function()
                	{
                		this.disabled = false;
                		this.handle.className = this.handle.className.replace(/\s?disabled/g, '');
                	},
                	disable: function()
                	{
                		this.disabled = true;
                		this.handle.className += ' disabled';
                	},
                	setStep: function(x, y, snap)
                	{
                		this.setValue(
                			this.steps && x > 1 ? (x - 1) / (this.steps - 1) : 0,
                			this.steps && y > 1 ? (y - 1) / (this.steps - 1) : 0,
                			snap
                		);
                	},
                	setValue: function(x, y, snap)
                	{
                		this.setTargetValue([x, y || 0]);
                		if(snap)
                		{
                			this.groupCopy(this.value.current, this.value.target);
                		}
                	},
                	startTap: function(target)
                	{
                		if(this.disabled)
                		{
                			return;
                		}
                		this.tapping = true;
                
                		this.setWrapperOffset();
                		this.setBounds();
                
                		if(target === undefined)
                		{
                			target = [
                				Cursor.x - this.offset.wrapper[0] - (this.handle.offsetWidth / 2),
                				Cursor.y - this.offset.wrapper[1] - (this.handle.offsetHeight / 2)
                			];
                		}
                		this.setTargetOffset(target);
                	},
                	stopTap: function()
                	{
                		if(this.disabled || !this.tapping)
                		{
                			return;
                		}
                		this.tapping = false;
                		
                		this.setTargetValue(this.value.current);
                		this.result();
                	},
                	startDrag: function()
                	{
                		if(this.disabled)
                		{
                			return;
                		}
                
                		this.setWrapperOffset();
                		this.setBounds();
                
                		this.offset.mouse = [
                			Cursor.x - Position.get(this.handle)[0],
                			Cursor.y - Position.get(this.handle)[1]
                		];
                		
                		this.dragging = true;
                	},
                	stopDrag: function()
                	{
                		if(this.disabled || !this.dragging)
                		{
                			return;
                		}
                		this.dragging = false;
                		
                		var target = this.groupClone(this.value.current);
                		if(this.slide)
                		{
                			var ratioChange = this.change;
                			target[0] += ratioChange[0] * 4;
                			target[1] += ratioChange[1] * 4;
                		}
                		this.setTargetValue(target);
                		this.result();
                	},
                	feedback: function()
                	{
                		var value = this.value.current;
                		if(this.snap && this.steps > 1)
                		{
                			value = this.getClosestSteps(value);
                		}
                		if(!this.groupCompare(value, this.value.prev))
                		{
                			if(typeof(this.animationCallback) == 'function')
                			{
                				this.animationCallback(value[0], value[1]);
                			}
                			this.groupCopy(this.value.prev, value);
                		}
                	},
                	result: function()
                	{
                		if(typeof(this.callback) == 'function')
                		{
                			this.callback(this.value.target[0], this.value.target[1]);
                		}
                	},
                	animate: function(direct, first)
                	{
                		if(direct && !this.dragging)
                		{
                			return;
                		}
                		if(this.dragging)
                		{
                			var prevTarget = this.groupClone(this.value.target);
                			
                			var offset = [
                				Cursor.x - this.offset.wrapper[0] - this.offset.mouse[0],
                				Cursor.y - this.offset.wrapper[1] - this.offset.mouse[1]
                			];
                			this.setTargetOffset(offset, this.loose);
                			
                			this.change = [
                				this.value.target[0] - prevTarget[0],
                				this.value.target[1] - prevTarget[1]
                			];
                		}
                		if(this.dragging || first)
                		{
                			this.groupCopy(this.value.current, this.value.target);
                		}
                		if(this.dragging || this.glide() || first)
                		{
                			this.update();
                			this.feedback();
                		}
                	},
                	glide: function()
                	{
                		var diff = [
                			this.value.target[0] - this.value.current[0],
                			this.value.target[1] - this.value.current[1]
                		];
                		if(!diff[0] && !diff[1])
                		{
                			return false;
                		}
                		if(Math.abs(diff[0]) > this.bounds.xStep || Math.abs(diff[1]) > this.bounds.yStep)
                		{
                			this.value.current[0] += diff[0] * this.speed;
                			this.value.current[1] += diff[1] * this.speed;
                		}
                		else
                		{
                			this.groupCopy(this.value.current, this.value.target);
                		}
                		return true;
                	},
                	update: function()
                	{
                		if(!this.snap)
                		{
                			this.offset.current = this.getOffsetsByRatios(this.value.current);
                		}
                		else
                		{
                			this.offset.current = this.getOffsetsByRatios(
                				this.getClosestSteps(this.value.current)
                			);
                		}
                		this.show();
                	},
                	show: function()
                	{
                		if(!this.groupCompare(this.offset.current, this.offset.prev))
                		{
                			if(this.horizontal)
                			{
                				this.handle.style.left = String(this.offset.current[0]) + 'px';
                			}
                			if(this.vertical)
                			{
                				this.handle.style.top = String(this.offset.current[1]) + 'px';
                			}
                			this.groupCopy(this.offset.prev, this.offset.current);
                		}
                	},
                	setTargetValue: function(value, loose)
                	{
                		var target = loose ? this.getLooseValue(value) : this.getProperValue(value);
                		
                		this.groupCopy(this.value.target, target);
                		this.offset.target = this.getOffsetsByRatios(target);
                	},
                	setTargetOffset: function(offset, loose)
                	{
                		var value = this.getRatiosByOffsets(offset);
                		var target = loose ? this.getLooseValue(value) : this.getProperValue(value);
                		
                		this.groupCopy(this.value.target, target);
                		this.offset.target = this.getOffsetsByRatios(target);
                	},
                	getLooseValue: function(value)
                	{
                		var proper = this.getProperValue(value);
                		return [
                			proper[0] + ((value[0] - proper[0]) / 4),
                			proper[1] + ((value[1] - proper[1]) / 4)
                		];
                	},
                	getProperValue: function(value)
                	{
                		var proper = this.groupClone(value);
                
                		proper[0] = Math.max(proper[0], 0);
                		proper[1] = Math.max(proper[1], 0);
                		proper[0] = Math.min(proper[0], 1);
                		proper[1] = Math.min(proper[1], 1);
                
                		if((!this.dragging && !this.tapping) || this.snap)
                		{
                			if(this.steps > 1)
                			{
                				proper = this.getClosestSteps(proper);
                			}
                		}
                		return proper;
                	},
                	getRatiosByOffsets: function(group)
                	{
                		return [
                			this.getRatioByOffset(group[0], this.bounds.xRange, this.bounds.x0),
                			this.getRatioByOffset(group[1], this.bounds.yRange, this.bounds.y0)
                		];
                	},
                	getRatioByOffset: function(offset, range, padding)
                	{
                		return range ? (offset - padding) / range : 0;
                	},
                	getOffsetsByRatios: function(group)
                	{
                		return [
                			this.getOffsetByRatio(group[0], this.bounds.xRange, this.bounds.x0),
                			this.getOffsetByRatio(group[1], this.bounds.yRange, this.bounds.y0)
                		];
                	},
                	getOffsetByRatio: function(ratio, range, padding)
                	{
                		return Math.round(ratio * range) + padding;
                	},
                	getClosestSteps: function(group)
                	{
                		return [
                			this.getClosestStep(group[0]),
                			this.getClosestStep(group[1])
                		];
                	},
                	getClosestStep: function(value)
                	{
                		var k = 0;
                		var min = 1;
                		for(var i = 0; i <= this.steps - 1; i++)
                		{
                			if(Math.abs(this.stepRatios[i] - value) < min)
                			{
                				min = Math.abs(this.stepRatios[i] - value);
                				k = i;
                			}
                		}
                		return this.stepRatios[k];
                	},
                	groupCompare: function(a, b)
                	{
                		return a[0] == b[0] && a[1] == b[1];
                	},
                	groupCopy: function(a, b)
                	{
                		a[0] = b[0];
                		a[1] = b[1];
                	},
                	groupClone: function(a)
                	{
                		return [a[0], a[1]];
                	},
                	preventDefaults: function(e, selection)
                	{
                		if(!e)
                		{
                			e = window.event;
                		}
                		if(e.preventDefault)
                		{
                			e.preventDefault();
                		}
                		e.returnValue = false;
                		
                		if(selection && document.selection)
                		{
                			document.selection.empty();
                		}
                	},
                	cancelEvent: function(e)
                	{
                		if(!e)
                		{
                			e = window.event;
                		}
                		if(e.stopPropagation)
                		{
                			e.stopPropagation();
                		}
                		e.cancelBubble = true;
                	}
                };
                
                /*! Copyright (c) 2013 Brandon Aaron (http://brandonaaron.net)
                 * Licensed under the MIT License (LICENSE.txt).
                 *
                 * Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.
                 * Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.
                 * Thanks to: Seamus Leahy for adding deltaX and deltaY
                 *
                 * Version: 3.1.3
                 *
                 * Requires: 1.2.2+
                 */
                
                (function (factory) {
                    if ( typeof define === 'function' && define.amd ) {
                        // AMD. Register as an anonymous module.
                        define('handsontable',['jquery'], factory);
                    } else if (typeof exports === 'object') {
                        // Node/CommonJS style for Browserify
                        module.exports = factory;
                    } else {
                        // Browser globals
                        factory(jQuery);
                    }
                }(function ($) {
                
                    var toFix = ['wheel', 'mousewheel', 'DOMMouseScroll', 'MozMousePixelScroll'];
                    var toBind = 'onwheel' in document || document.documentMode >= 9 ? ['wheel'] : ['mousewheel', 'DomMouseScroll', 'MozMousePixelScroll'];
                    var lowestDelta, lowestDeltaXY;
                
                    if ( $.event.fixHooks ) {
                        for ( var i = toFix.length; i; ) {
                            $.event.fixHooks[ toFix[--i] ] = $.event.mouseHooks;
                        }
                    }
                
                    $.event.special.mousewheel = {
                        setup: function() {
                            if ( this.addEventListener ) {
                                for ( var i = toBind.length; i; ) {
                                    this.addEventListener( toBind[--i], handler, false );
                                }
                            } else {
                                this.onmousewheel = handler;
                            }
                        },
                
                        teardown: function() {
                            if ( this.removeEventListener ) {
                                for ( var i = toBind.length; i; ) {
                                    this.removeEventListener( toBind[--i], handler, false );
                                }
                            } else {
                                this.onmousewheel = null;
                            }
                        }
                    };
                
                    $.fn.extend({
                        mousewheel: function(fn) {
                            return fn ? this.bind("mousewheel", fn) : this.trigger("mousewheel");
                        },
                
                        unmousewheel: function(fn) {
                            return this.unbind("mousewheel", fn);
                        }
                    });
                
                
                    function handler(event) {
                        var orgEvent = event || window.event,
                            args = [].slice.call(arguments, 1),
                            delta = 0,
                            deltaX = 0,
                            deltaY = 0,
                            absDelta = 0,
                            absDeltaXY = 0,
                            fn;
                        event = $.event.fix(orgEvent);
                        event.type = "mousewheel";
                
                        // Old school scrollwheel delta
                        if ( orgEvent.wheelDelta ) { delta = orgEvent.wheelDelta; }
                        if ( orgEvent.detail )     { delta = orgEvent.detail * -1; }
                
                        // New school wheel delta (wheel event)
                        if ( orgEvent.deltaY ) {
                            deltaY = orgEvent.deltaY * -1;
                            delta  = deltaY;
                        }
                        if ( orgEvent.deltaX ) {
                            deltaX = orgEvent.deltaX;
                            delta  = deltaX * -1;
                        }
                
                        // Webkit
                        if ( orgEvent.wheelDeltaY !== undefined ) { deltaY = orgEvent.wheelDeltaY; }
                        if ( orgEvent.wheelDeltaX !== undefined ) { deltaX = orgEvent.wheelDeltaX * -1; }
                
                        // Look for lowest delta to normalize the delta values
                        absDelta = Math.abs(delta);
                        if ( !lowestDelta || absDelta < lowestDelta ) { lowestDelta = absDelta; }
                        absDeltaXY = Math.max(Math.abs(deltaY), Math.abs(deltaX));
                        if ( !lowestDeltaXY || absDeltaXY < lowestDeltaXY ) { lowestDeltaXY = absDeltaXY; }
                
                        // Get a whole value for the deltas
                        fn = delta > 0 ? 'floor' : 'ceil';
                        delta  = Math[fn](delta / lowestDelta);
                        deltaX = Math[fn](deltaX / lowestDeltaXY);
                        deltaY = Math[fn](deltaY / lowestDeltaXY);
                
                        // Add event and delta to the front of the arguments
                        args.unshift(event, delta, deltaX, deltaY);
                
                        return ($.event.dispatch || $.event.handle).apply(this, args);
                    }
                
                }));
                
                })(jQuery, window, Handsontable);
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('widget/handson_table',["underscore", "jquery", "handsontable", "backbone", "common/has_properties", "common/continuum_view"], function(_, $, $$1, Backbone, HasProperties, ContinuumView) {
                    var HandsonTable, HandsonTableView, HandsonTables, _ref, _ref1, _ref2;
                    HandsonTableView = (function(_super) {
                      __extends(HandsonTableView, _super);
                
                      function HandsonTableView() {
                        _ref = HandsonTableView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      HandsonTableView.prototype.initialize = function(options) {
                        HandsonTableView.__super__.initialize.call(this, options);
                        this.render();
                        return this.listenTo(this.model, 'change:source', this.render);
                      };
                
                      HandsonTableView.prototype.render = function() {
                        var column, columns, data, headers, ht, source, type, _i, _len, _ref1,
                          _this = this;
                        source = this.mget("source");
                        if (source != null) {
                          headers = [];
                          columns = [];
                          _ref1 = this.mget("columns");
                          for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
                            column = _ref1[_i];
                            headers.push(column.get("header"));
                            data = column.get("data");
                            type = column.get("type");
                            columns.push({
                              data: data,
                              type: type
                            });
                          }
                          this.$el.handsontable({
                            data: source.datapoints(),
                            colHeaders: headers,
                            columns: columns,
                            afterChange: function(changes, source) {
                              if (source === "edit") {
                                return _this.editData(changes);
                              }
                            }
                          });
                          ht = this.$el.handsontable("getInstance");
                          return ht.view.wt.draw(true);
                        } else {
                          return this.$el.handsontable();
                        }
                      };
                
                      HandsonTableView.prototype.editData = function(changes) {
                        var array, change, column, data, i, index, new_val, old_val, source, _i, _j, _len, _ref1;
                        source = this.mget("source");
                        data = source.get("data");
                        for (_i = 0, _len = changes.length; _i < _len; _i++) {
                          change = changes[_i];
                          index = change[0], column = change[1], old_val = change[2], new_val = change[3];
                          array = _.clone(data[column]);
                          if (index < array.length) {
                            array[index] = new_val;
                          } else {
                            for (i = _j = 0, _ref1 = array.length - index; 0 <= _ref1 ? _j < _ref1 : _j > _ref1; i = 0 <= _ref1 ? ++_j : --_j) {
                              array.push(NaN);
                            }
                            array.push(new_val);
                          }
                          data[column] = array;
                        }
                        return source.set(data);
                      };
                
                      return HandsonTableView;
                
                    })(ContinuumView.View);
                    HandsonTable = (function(_super) {
                      __extends(HandsonTable, _super);
                
                      function HandsonTable() {
                        _ref1 = HandsonTable.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      HandsonTable.prototype.type = 'HandsonTable';
                
                      HandsonTable.prototype.default_view = HandsonTableView;
                
                      HandsonTable.prototype.defaults = function() {
                        return {
                          source: null,
                          columns: []
                        };
                      };
                
                      return HandsonTable;
                
                    })(HasProperties);
                    HandsonTables = (function(_super) {
                      __extends(HandsonTables, _super);
                
                      function HandsonTables() {
                        _ref2 = HandsonTables.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      HandsonTables.prototype.model = HandsonTable;
                
                      return HandsonTables;
                
                    })(Backbone.Collection);
                    return {
                      Model: HandsonTable,
                      Collection: new HandsonTables(),
                      View: HandsonTableView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=handson_table.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('widget/table_column',["underscore", "jquery", "backbone", "common/has_properties"], function(_, $, Backbone, HasProperties) {
                    var TableColumn, TableColumns, _ref, _ref1;
                    TableColumn = (function(_super) {
                      __extends(TableColumn, _super);
                
                      function TableColumn() {
                        _ref = TableColumn.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      TableColumn.prototype.type = 'TableColumn';
                
                      TableColumn.prototype.default_view = null;
                
                      TableColumn.prototype.defaults = function() {
                        return {};
                      };
                
                      return TableColumn;
                
                    })(HasProperties);
                    TableColumns = (function(_super) {
                      __extends(TableColumns, _super);
                
                      function TableColumns() {
                        _ref1 = TableColumns.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      TableColumns.prototype.model = TableColumn;
                
                      return TableColumns;
                
                    })(Backbone.Collection);
                    return {
                      Model: TableColumn,
                      Collection: new TableColumns()
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=table_column.js.map
                */;
                define('jquery_ui/core',['jquery'], function (jQuery) {
                /*!
                 * jQuery UI Core 1.10.0
                 * http://jqueryui.com
                 *
                 * Copyright 2013 jQuery Foundation and other contributors
                 * Released under the MIT license.
                 * http://jquery.org/license
                 *
                 * http://api.jqueryui.com/category/ui-core/
                 */
                (function( $, undefined ) {
                
                var uuid = 0,
                	runiqueId = /^ui-id-\d+$/;
                
                // prevent duplicate loading
                // this is only a problem because we proxy existing functions
                // and we don't want to double proxy them
                $.ui = $.ui || {};
                if ( $.ui.version ) {
                	return;
                }
                
                $.extend( $.ui, {
                	version: "1.10.0",
                
                	keyCode: {
                		BACKSPACE: 8,
                		COMMA: 188,
                		DELETE: 46,
                		DOWN: 40,
                		END: 35,
                		ENTER: 13,
                		ESCAPE: 27,
                		HOME: 36,
                		LEFT: 37,
                		NUMPAD_ADD: 107,
                		NUMPAD_DECIMAL: 110,
                		NUMPAD_DIVIDE: 111,
                		NUMPAD_ENTER: 108,
                		NUMPAD_MULTIPLY: 106,
                		NUMPAD_SUBTRACT: 109,
                		PAGE_DOWN: 34,
                		PAGE_UP: 33,
                		PERIOD: 190,
                		RIGHT: 39,
                		SPACE: 32,
                		TAB: 9,
                		UP: 38
                	}
                });
                
                // plugins
                $.fn.extend({
                	_focus: $.fn.focus,
                	focus: function( delay, fn ) {
                		return typeof delay === "number" ?
                			this.each(function() {
                				var elem = this;
                				setTimeout(function() {
                					$( elem ).focus();
                					if ( fn ) {
                						fn.call( elem );
                					}
                				}, delay );
                			}) :
                			this._focus.apply( this, arguments );
                	},
                
                	scrollParent: function() {
                		var scrollParent;
                		if (($.ui.ie && (/(static|relative)/).test(this.css("position"))) || (/absolute/).test(this.css("position"))) {
                			scrollParent = this.parents().filter(function() {
                				return (/(relative|absolute|fixed)/).test($.css(this,"position")) && (/(auto|scroll)/).test($.css(this,"overflow")+$.css(this,"overflow-y")+$.css(this,"overflow-x"));
                			}).eq(0);
                		} else {
                			scrollParent = this.parents().filter(function() {
                				return (/(auto|scroll)/).test($.css(this,"overflow")+$.css(this,"overflow-y")+$.css(this,"overflow-x"));
                			}).eq(0);
                		}
                
                		return (/fixed/).test(this.css("position")) || !scrollParent.length ? $(document) : scrollParent;
                	},
                
                	zIndex: function( zIndex ) {
                		if ( zIndex !== undefined ) {
                			return this.css( "zIndex", zIndex );
                		}
                
                		if ( this.length ) {
                			var elem = $( this[ 0 ] ), position, value;
                			while ( elem.length && elem[ 0 ] !== document ) {
                				// Ignore z-index if position is set to a value where z-index is ignored by the browser
                				// This makes behavior of this function consistent across browsers
                				// WebKit always returns auto if the element is positioned
                				position = elem.css( "position" );
                				if ( position === "absolute" || position === "relative" || position === "fixed" ) {
                					// IE returns 0 when zIndex is not specified
                					// other browsers return a string
                					// we ignore the case of nested elements with an explicit value of 0
                					// <div style="z-index: -10;"><div style="z-index: 0;"></div></div>
                					value = parseInt( elem.css( "zIndex" ), 10 );
                					if ( !isNaN( value ) && value !== 0 ) {
                						return value;
                					}
                				}
                				elem = elem.parent();
                			}
                		}
                
                		return 0;
                	},
                
                	uniqueId: function() {
                		return this.each(function() {
                			if ( !this.id ) {
                				this.id = "ui-id-" + (++uuid);
                			}
                		});
                	},
                
                	removeUniqueId: function() {
                		return this.each(function() {
                			if ( runiqueId.test( this.id ) ) {
                				$( this ).removeAttr( "id" );
                			}
                		});
                	}
                });
                
                // selectors
                function focusable( element, isTabIndexNotNaN ) {
                	var map, mapName, img,
                		nodeName = element.nodeName.toLowerCase();
                	if ( "area" === nodeName ) {
                		map = element.parentNode;
                		mapName = map.name;
                		if ( !element.href || !mapName || map.nodeName.toLowerCase() !== "map" ) {
                			return false;
                		}
                		img = $( "img[usemap=#" + mapName + "]" )[0];
                		return !!img && visible( img );
                	}
                	return ( /input|select|textarea|button|object/.test( nodeName ) ?
                		!element.disabled :
                		"a" === nodeName ?
                			element.href || isTabIndexNotNaN :
                			isTabIndexNotNaN) &&
                		// the element and all of its ancestors must be visible
                		visible( element );
                }
                
                function visible( element ) {
                	return $.expr.filters.visible( element ) &&
                		!$( element ).parents().addBack().filter(function() {
                			return $.css( this, "visibility" ) === "hidden";
                		}).length;
                }
                
                $.extend( $.expr[ ":" ], {
                	data: $.expr.createPseudo ?
                		$.expr.createPseudo(function( dataName ) {
                			return function( elem ) {
                				return !!$.data( elem, dataName );
                			};
                		}) :
                		// support: jQuery <1.8
                		function( elem, i, match ) {
                			return !!$.data( elem, match[ 3 ] );
                		},
                
                	focusable: function( element ) {
                		return focusable( element, !isNaN( $.attr( element, "tabindex" ) ) );
                	},
                
                	tabbable: function( element ) {
                		var tabIndex = $.attr( element, "tabindex" ),
                			isTabIndexNaN = isNaN( tabIndex );
                		return ( isTabIndexNaN || tabIndex >= 0 ) && focusable( element, !isTabIndexNaN );
                	}
                });
                
                // support: jQuery <1.8
                if ( !$( "<a>" ).outerWidth( 1 ).jquery ) {
                	$.each( [ "Width", "Height" ], function( i, name ) {
                		var side = name === "Width" ? [ "Left", "Right" ] : [ "Top", "Bottom" ],
                			type = name.toLowerCase(),
                			orig = {
                				innerWidth: $.fn.innerWidth,
                				innerHeight: $.fn.innerHeight,
                				outerWidth: $.fn.outerWidth,
                				outerHeight: $.fn.outerHeight
                			};
                
                		function reduce( elem, size, border, margin ) {
                			$.each( side, function() {
                				size -= parseFloat( $.css( elem, "padding" + this ) ) || 0;
                				if ( border ) {
                					size -= parseFloat( $.css( elem, "border" + this + "Width" ) ) || 0;
                				}
                				if ( margin ) {
                					size -= parseFloat( $.css( elem, "margin" + this ) ) || 0;
                				}
                			});
                			return size;
                		}
                
                		$.fn[ "inner" + name ] = function( size ) {
                			if ( size === undefined ) {
                				return orig[ "inner" + name ].call( this );
                			}
                
                			return this.each(function() {
                				$( this ).css( type, reduce( this, size ) + "px" );
                			});
                		};
                
                		$.fn[ "outer" + name] = function( size, margin ) {
                			if ( typeof size !== "number" ) {
                				return orig[ "outer" + name ].call( this, size );
                			}
                
                			return this.each(function() {
                				$( this).css( type, reduce( this, size, true, margin ) + "px" );
                			});
                		};
                	});
                }
                
                // support: jQuery <1.8
                if ( !$.fn.addBack ) {
                	$.fn.addBack = function( selector ) {
                		return this.add( selector == null ?
                			this.prevObject : this.prevObject.filter( selector )
                		);
                	};
                }
                
                // support: jQuery 1.6.1, 1.6.2 (http://bugs.jquery.com/ticket/9413)
                if ( $( "<a>" ).data( "a-b", "a" ).removeData( "a-b" ).data( "a-b" ) ) {
                	$.fn.removeData = (function( removeData ) {
                		return function( key ) {
                			if ( arguments.length ) {
                				return removeData.call( this, $.camelCase( key ) );
                			} else {
                				return removeData.call( this );
                			}
                		};
                	})( $.fn.removeData );
                }
                
                
                
                
                
                // deprecated
                $.ui.ie = !!/msie [\w.]+/.exec( navigator.userAgent.toLowerCase() );
                
                $.support.selectstart = "onselectstart" in document.createElement( "div" );
                $.fn.extend({
                	disableSelection: function() {
                		return this.bind( ( $.support.selectstart ? "selectstart" : "mousedown" ) +
                			".ui-disableSelection", function( event ) {
                				event.preventDefault();
                			});
                	},
                
                	enableSelection: function() {
                		return this.unbind( ".ui-disableSelection" );
                	}
                });
                
                $.extend( $.ui, {
                	// $.ui.plugin is deprecated.  Use the proxy pattern instead.
                	plugin: {
                		add: function( module, option, set ) {
                			var i,
                				proto = $.ui[ module ].prototype;
                			for ( i in set ) {
                				proto.plugins[ i ] = proto.plugins[ i ] || [];
                				proto.plugins[ i ].push( [ option, set[ i ] ] );
                			}
                		},
                		call: function( instance, name, args ) {
                			var i,
                				set = instance.plugins[ name ];
                			if ( !set || !instance.element[ 0 ].parentNode || instance.element[ 0 ].parentNode.nodeType === 11 ) {
                				return;
                			}
                
                			for ( i = 0; i < set.length; i++ ) {
                				if ( instance.options[ set[ i ][ 0 ] ] ) {
                					set[ i ][ 1 ].apply( instance.element, args );
                				}
                			}
                		}
                	},
                
                	// only used by resizable
                	hasScroll: function( el, a ) {
                
                		//If overflow is hidden, the element might have extra content, but the user wants to hide it
                		if ( $( el ).css( "overflow" ) === "hidden") {
                			return false;
                		}
                
                		var scroll = ( a && a === "left" ) ? "scrollLeft" : "scrollTop",
                			has = false;
                
                		if ( el[ scroll ] > 0 ) {
                			return true;
                		}
                
                		// TODO: determine which cases actually cause this to happen
                		// if the element doesn't have the scroll set, see if it's possible to
                		// set the scroll
                		el[ scroll ] = 1;
                		has = ( el[ scroll ] > 0 );
                		el[ scroll ] = 0;
                		return has;
                	}
                });
                
                })( jQuery );
                
                });
                define('jquery_ui/widget',['jquery'], function (jQuery) {
                /*!
                 * jQuery UI Widget 1.10.0
                 * http://jqueryui.com
                 *
                 * Copyright 2013 jQuery Foundation and other contributors
                 * Released under the MIT license.
                 * http://jquery.org/license
                 *
                 * http://api.jqueryui.com/jQuery.widget/
                 */
                (function( $, undefined ) {
                
                var uuid = 0,
                	slice = Array.prototype.slice,
                	_cleanData = $.cleanData;
                $.cleanData = function( elems ) {
                	for ( var i = 0, elem; (elem = elems[i]) != null; i++ ) {
                		try {
                			$( elem ).triggerHandler( "remove" );
                		// http://bugs.jquery.com/ticket/8235
                		} catch( e ) {}
                	}
                	_cleanData( elems );
                };
                
                $.widget = function( name, base, prototype ) {
                	var fullName, existingConstructor, constructor, basePrototype,
                		// proxiedPrototype allows the provided prototype to remain unmodified
                		// so that it can be used as a mixin for multiple widgets (#8876)
                		proxiedPrototype = {},
                		namespace = name.split( "." )[ 0 ];
                
                	name = name.split( "." )[ 1 ];
                	fullName = namespace + "-" + name;
                
                	if ( !prototype ) {
                		prototype = base;
                		base = $.Widget;
                	}
                
                	// create selector for plugin
                	$.expr[ ":" ][ fullName.toLowerCase() ] = function( elem ) {
                		return !!$.data( elem, fullName );
                	};
                
                	$[ namespace ] = $[ namespace ] || {};
                	existingConstructor = $[ namespace ][ name ];
                	constructor = $[ namespace ][ name ] = function( options, element ) {
                		// allow instantiation without "new" keyword
                		if ( !this._createWidget ) {
                			return new constructor( options, element );
                		}
                
                		// allow instantiation without initializing for simple inheritance
                		// must use "new" keyword (the code above always passes args)
                		if ( arguments.length ) {
                			this._createWidget( options, element );
                		}
                	};
                	// extend with the existing constructor to carry over any static properties
                	$.extend( constructor, existingConstructor, {
                		version: prototype.version,
                		// copy the object used to create the prototype in case we need to
                		// redefine the widget later
                		_proto: $.extend( {}, prototype ),
                		// track widgets that inherit from this widget in case this widget is
                		// redefined after a widget inherits from it
                		_childConstructors: []
                	});
                
                	basePrototype = new base();
                	// we need to make the options hash a property directly on the new instance
                	// otherwise we'll modify the options hash on the prototype that we're
                	// inheriting from
                	basePrototype.options = $.widget.extend( {}, basePrototype.options );
                	$.each( prototype, function( prop, value ) {
                		if ( !$.isFunction( value ) ) {
                			proxiedPrototype[ prop ] = value;
                			return;
                		}
                		proxiedPrototype[ prop ] = (function() {
                			var _super = function() {
                					return base.prototype[ prop ].apply( this, arguments );
                				},
                				_superApply = function( args ) {
                					return base.prototype[ prop ].apply( this, args );
                				};
                			return function() {
                				var __super = this._super,
                					__superApply = this._superApply,
                					returnValue;
                
                				this._super = _super;
                				this._superApply = _superApply;
                
                				returnValue = value.apply( this, arguments );
                
                				this._super = __super;
                				this._superApply = __superApply;
                
                				return returnValue;
                			};
                		})();
                	});
                	constructor.prototype = $.widget.extend( basePrototype, {
                		// TODO: remove support for widgetEventPrefix
                		// always use the name + a colon as the prefix, e.g., draggable:start
                		// don't prefix for widgets that aren't DOM-based
                		widgetEventPrefix: existingConstructor ? basePrototype.widgetEventPrefix : name
                	}, proxiedPrototype, {
                		constructor: constructor,
                		namespace: namespace,
                		widgetName: name,
                		widgetFullName: fullName
                	});
                
                	// If this widget is being redefined then we need to find all widgets that
                	// are inheriting from it and redefine all of them so that they inherit from
                	// the new version of this widget. We're essentially trying to replace one
                	// level in the prototype chain.
                	if ( existingConstructor ) {
                		$.each( existingConstructor._childConstructors, function( i, child ) {
                			var childPrototype = child.prototype;
                
                			// redefine the child widget using the same prototype that was
                			// originally used, but inherit from the new version of the base
                			$.widget( childPrototype.namespace + "." + childPrototype.widgetName, constructor, child._proto );
                		});
                		// remove the list of existing child constructors from the old constructor
                		// so the old child constructors can be garbage collected
                		delete existingConstructor._childConstructors;
                	} else {
                		base._childConstructors.push( constructor );
                	}
                
                	$.widget.bridge( name, constructor );
                };
                
                $.widget.extend = function( target ) {
                	var input = slice.call( arguments, 1 ),
                		inputIndex = 0,
                		inputLength = input.length,
                		key,
                		value;
                	for ( ; inputIndex < inputLength; inputIndex++ ) {
                		for ( key in input[ inputIndex ] ) {
                			value = input[ inputIndex ][ key ];
                			if ( input[ inputIndex ].hasOwnProperty( key ) && value !== undefined ) {
                				// Clone objects
                				if ( $.isPlainObject( value ) ) {
                					target[ key ] = $.isPlainObject( target[ key ] ) ?
                						$.widget.extend( {}, target[ key ], value ) :
                						// Don't extend strings, arrays, etc. with objects
                						$.widget.extend( {}, value );
                				// Copy everything else by reference
                				} else {
                					target[ key ] = value;
                				}
                			}
                		}
                	}
                	return target;
                };
                
                $.widget.bridge = function( name, object ) {
                	var fullName = object.prototype.widgetFullName || name;
                	$.fn[ name ] = function( options ) {
                		var isMethodCall = typeof options === "string",
                			args = slice.call( arguments, 1 ),
                			returnValue = this;
                
                		// allow multiple hashes to be passed on init
                		options = !isMethodCall && args.length ?
                			$.widget.extend.apply( null, [ options ].concat(args) ) :
                			options;
                
                		if ( isMethodCall ) {
                			this.each(function() {
                				var methodValue,
                					instance = $.data( this, fullName );
                				if ( !instance ) {
                					return $.error( "cannot call methods on " + name + " prior to initialization; " +
                						"attempted to call method '" + options + "'" );
                				}
                				if ( !$.isFunction( instance[options] ) || options.charAt( 0 ) === "_" ) {
                					return $.error( "no such method '" + options + "' for " + name + " widget instance" );
                				}
                				methodValue = instance[ options ].apply( instance, args );
                				if ( methodValue !== instance && methodValue !== undefined ) {
                					returnValue = methodValue && methodValue.jquery ?
                						returnValue.pushStack( methodValue.get() ) :
                						methodValue;
                					return false;
                				}
                			});
                		} else {
                			this.each(function() {
                				var instance = $.data( this, fullName );
                				if ( instance ) {
                					instance.option( options || {} )._init();
                				} else {
                					$.data( this, fullName, new object( options, this ) );
                				}
                			});
                		}
                
                		return returnValue;
                	};
                };
                
                $.Widget = function( /* options, element */ ) {};
                $.Widget._childConstructors = [];
                
                $.Widget.prototype = {
                	widgetName: "widget",
                	widgetEventPrefix: "",
                	defaultElement: "<div>",
                	options: {
                		disabled: false,
                
                		// callbacks
                		create: null
                	},
                	_createWidget: function( options, element ) {
                		element = $( element || this.defaultElement || this )[ 0 ];
                		this.element = $( element );
                		this.uuid = uuid++;
                		this.eventNamespace = "." + this.widgetName + this.uuid;
                		this.options = $.widget.extend( {},
                			this.options,
                			this._getCreateOptions(),
                			options );
                
                		this.bindings = $();
                		this.hoverable = $();
                		this.focusable = $();
                
                		if ( element !== this ) {
                			$.data( element, this.widgetFullName, this );
                			this._on( true, this.element, {
                				remove: function( event ) {
                					if ( event.target === element ) {
                						this.destroy();
                					}
                				}
                			});
                			this.document = $( element.style ?
                				// element within the document
                				element.ownerDocument :
                				// element is window or document
                				element.document || element );
                			this.window = $( this.document[0].defaultView || this.document[0].parentWindow );
                		}
                
                		this._create();
                		this._trigger( "create", null, this._getCreateEventData() );
                		this._init();
                	},
                	_getCreateOptions: $.noop,
                	_getCreateEventData: $.noop,
                	_create: $.noop,
                	_init: $.noop,
                
                	destroy: function() {
                		this._destroy();
                		// we can probably remove the unbind calls in 2.0
                		// all event bindings should go through this._on()
                		this.element
                			.unbind( this.eventNamespace )
                			// 1.9 BC for #7810
                			// TODO remove dual storage
                			.removeData( this.widgetName )
                			.removeData( this.widgetFullName )
                			// support: jquery <1.6.3
                			// http://bugs.jquery.com/ticket/9413
                			.removeData( $.camelCase( this.widgetFullName ) );
                		this.widget()
                			.unbind( this.eventNamespace )
                			.removeAttr( "aria-disabled" )
                			.removeClass(
                				this.widgetFullName + "-disabled " +
                				"ui-state-disabled" );
                
                		// clean up events and states
                		this.bindings.unbind( this.eventNamespace );
                		this.hoverable.removeClass( "ui-state-hover" );
                		this.focusable.removeClass( "ui-state-focus" );
                	},
                	_destroy: $.noop,
                
                	widget: function() {
                		return this.element;
                	},
                
                	option: function( key, value ) {
                		var options = key,
                			parts,
                			curOption,
                			i;
                
                		if ( arguments.length === 0 ) {
                			// don't return a reference to the internal hash
                			return $.widget.extend( {}, this.options );
                		}
                
                		if ( typeof key === "string" ) {
                			// handle nested keys, e.g., "foo.bar" => { foo: { bar: ___ } }
                			options = {};
                			parts = key.split( "." );
                			key = parts.shift();
                			if ( parts.length ) {
                				curOption = options[ key ] = $.widget.extend( {}, this.options[ key ] );
                				for ( i = 0; i < parts.length - 1; i++ ) {
                					curOption[ parts[ i ] ] = curOption[ parts[ i ] ] || {};
                					curOption = curOption[ parts[ i ] ];
                				}
                				key = parts.pop();
                				if ( value === undefined ) {
                					return curOption[ key ] === undefined ? null : curOption[ key ];
                				}
                				curOption[ key ] = value;
                			} else {
                				if ( value === undefined ) {
                					return this.options[ key ] === undefined ? null : this.options[ key ];
                				}
                				options[ key ] = value;
                			}
                		}
                
                		this._setOptions( options );
                
                		return this;
                	},
                	_setOptions: function( options ) {
                		var key;
                
                		for ( key in options ) {
                			this._setOption( key, options[ key ] );
                		}
                
                		return this;
                	},
                	_setOption: function( key, value ) {
                		this.options[ key ] = value;
                
                		if ( key === "disabled" ) {
                			this.widget()
                				.toggleClass( this.widgetFullName + "-disabled ui-state-disabled", !!value )
                				.attr( "aria-disabled", value );
                			this.hoverable.removeClass( "ui-state-hover" );
                			this.focusable.removeClass( "ui-state-focus" );
                		}
                
                		return this;
                	},
                
                	enable: function() {
                		return this._setOption( "disabled", false );
                	},
                	disable: function() {
                		return this._setOption( "disabled", true );
                	},
                
                	_on: function( suppressDisabledCheck, element, handlers ) {
                		var delegateElement,
                			instance = this;
                
                		// no suppressDisabledCheck flag, shuffle arguments
                		if ( typeof suppressDisabledCheck !== "boolean" ) {
                			handlers = element;
                			element = suppressDisabledCheck;
                			suppressDisabledCheck = false;
                		}
                
                		// no element argument, shuffle and use this.element
                		if ( !handlers ) {
                			handlers = element;
                			element = this.element;
                			delegateElement = this.widget();
                		} else {
                			// accept selectors, DOM elements
                			element = delegateElement = $( element );
                			this.bindings = this.bindings.add( element );
                		}
                
                		$.each( handlers, function( event, handler ) {
                			function handlerProxy() {
                				// allow widgets to customize the disabled handling
                				// - disabled as an array instead of boolean
                				// - disabled class as method for disabling individual parts
                				if ( !suppressDisabledCheck &&
                						( instance.options.disabled === true ||
                							$( this ).hasClass( "ui-state-disabled" ) ) ) {
                					return;
                				}
                				return ( typeof handler === "string" ? instance[ handler ] : handler )
                					.apply( instance, arguments );
                			}
                
                			// copy the guid so direct unbinding works
                			if ( typeof handler !== "string" ) {
                				handlerProxy.guid = handler.guid =
                					handler.guid || handlerProxy.guid || $.guid++;
                			}
                
                			var match = event.match( /^(\w+)\s*(.*)$/ ),
                				eventName = match[1] + instance.eventNamespace,
                				selector = match[2];
                			if ( selector ) {
                				delegateElement.delegate( selector, eventName, handlerProxy );
                			} else {
                				element.bind( eventName, handlerProxy );
                			}
                		});
                	},
                
                	_off: function( element, eventName ) {
                		eventName = (eventName || "").split( " " ).join( this.eventNamespace + " " ) + this.eventNamespace;
                		element.unbind( eventName ).undelegate( eventName );
                	},
                
                	_delay: function( handler, delay ) {
                		function handlerProxy() {
                			return ( typeof handler === "string" ? instance[ handler ] : handler )
                				.apply( instance, arguments );
                		}
                		var instance = this;
                		return setTimeout( handlerProxy, delay || 0 );
                	},
                
                	_hoverable: function( element ) {
                		this.hoverable = this.hoverable.add( element );
                		this._on( element, {
                			mouseenter: function( event ) {
                				$( event.currentTarget ).addClass( "ui-state-hover" );
                			},
                			mouseleave: function( event ) {
                				$( event.currentTarget ).removeClass( "ui-state-hover" );
                			}
                		});
                	},
                
                	_focusable: function( element ) {
                		this.focusable = this.focusable.add( element );
                		this._on( element, {
                			focusin: function( event ) {
                				$( event.currentTarget ).addClass( "ui-state-focus" );
                			},
                			focusout: function( event ) {
                				$( event.currentTarget ).removeClass( "ui-state-focus" );
                			}
                		});
                	},
                
                	_trigger: function( type, event, data ) {
                		var prop, orig,
                			callback = this.options[ type ];
                
                		data = data || {};
                		event = $.Event( event );
                		event.type = ( type === this.widgetEventPrefix ?
                			type :
                			this.widgetEventPrefix + type ).toLowerCase();
                		// the original event may come from any element
                		// so we need to reset the target on the new event
                		event.target = this.element[ 0 ];
                
                		// copy original event properties over to the new event
                		orig = event.originalEvent;
                		if ( orig ) {
                			for ( prop in orig ) {
                				if ( !( prop in event ) ) {
                					event[ prop ] = orig[ prop ];
                				}
                			}
                		}
                
                		this.element.trigger( event, data );
                		return !( $.isFunction( callback ) &&
                			callback.apply( this.element[0], [ event ].concat( data ) ) === false ||
                			event.isDefaultPrevented() );
                	}
                };
                
                $.each( { show: "fadeIn", hide: "fadeOut" }, function( method, defaultEffect ) {
                	$.Widget.prototype[ "_" + method ] = function( element, options, callback ) {
                		if ( typeof options === "string" ) {
                			options = { effect: options };
                		}
                		var hasOptions,
                			effectName = !options ?
                				method :
                				options === true || typeof options === "number" ?
                					defaultEffect :
                					options.effect || defaultEffect;
                		options = options || {};
                		if ( typeof options === "number" ) {
                			options = { duration: options };
                		}
                		hasOptions = !$.isEmptyObject( options );
                		options.complete = callback;
                		if ( options.delay ) {
                			element.delay( options.delay );
                		}
                		if ( hasOptions && $.effects && $.effects.effect[ effectName ] ) {
                			element[ method ]( options );
                		} else if ( effectName !== method && element[ effectName ] ) {
                			element[ effectName ]( options.duration, options.easing, callback );
                		} else {
                			element.queue(function( next ) {
                				$( this )[ method ]();
                				if ( callback ) {
                					callback.call( element[ 0 ] );
                				}
                				next();
                			});
                		}
                	};
                });
                
                })( jQuery );
                
                });
                define('jquery_ui/mouse',['jquery','./widget'], function (jQuery) {
                /*!
                 * jQuery UI Mouse 1.10.0
                 * http://jqueryui.com
                 *
                 * Copyright 2013 jQuery Foundation and other contributors
                 * Released under the MIT license.
                 * http://jquery.org/license
                 *
                 * http://api.jqueryui.com/mouse/
                 *
                 * Depends:
                 *	jquery.ui.widget.js
                 */
                (function( $, undefined ) {
                
                var mouseHandled = false;
                $( document ).mouseup( function() {
                	mouseHandled = false;
                });
                
                $.widget("ui.mouse", {
                	version: "1.10.0",
                	options: {
                		cancel: "input,textarea,button,select,option",
                		distance: 1,
                		delay: 0
                	},
                	_mouseInit: function() {
                		var that = this;
                
                		this.element
                			.bind("mousedown."+this.widgetName, function(event) {
                				return that._mouseDown(event);
                			})
                			.bind("click."+this.widgetName, function(event) {
                				if (true === $.data(event.target, that.widgetName + ".preventClickEvent")) {
                					$.removeData(event.target, that.widgetName + ".preventClickEvent");
                					event.stopImmediatePropagation();
                					return false;
                				}
                			});
                
                		this.started = false;
                	},
                
                	// TODO: make sure destroying one instance of mouse doesn't mess with
                	// other instances of mouse
                	_mouseDestroy: function() {
                		this.element.unbind("."+this.widgetName);
                		if ( this._mouseMoveDelegate ) {
                			$(document)
                				.unbind("mousemove."+this.widgetName, this._mouseMoveDelegate)
                				.unbind("mouseup."+this.widgetName, this._mouseUpDelegate);
                		}
                	},
                
                	_mouseDown: function(event) {
                		// don't let more than one widget handle mouseStart
                		if( mouseHandled ) { return; }
                
                		// we may have missed mouseup (out of window)
                		(this._mouseStarted && this._mouseUp(event));
                
                		this._mouseDownEvent = event;
                
                		var that = this,
                			btnIsLeft = (event.which === 1),
                			// event.target.nodeName works around a bug in IE 8 with
                			// disabled inputs (#7620)
                			elIsCancel = (typeof this.options.cancel === "string" && event.target.nodeName ? $(event.target).closest(this.options.cancel).length : false);
                		if (!btnIsLeft || elIsCancel || !this._mouseCapture(event)) {
                			return true;
                		}
                
                		this.mouseDelayMet = !this.options.delay;
                		if (!this.mouseDelayMet) {
                			this._mouseDelayTimer = setTimeout(function() {
                				that.mouseDelayMet = true;
                			}, this.options.delay);
                		}
                
                		if (this._mouseDistanceMet(event) && this._mouseDelayMet(event)) {
                			this._mouseStarted = (this._mouseStart(event) !== false);
                			if (!this._mouseStarted) {
                				event.preventDefault();
                				return true;
                			}
                		}
                
                		// Click event may never have fired (Gecko & Opera)
                		if (true === $.data(event.target, this.widgetName + ".preventClickEvent")) {
                			$.removeData(event.target, this.widgetName + ".preventClickEvent");
                		}
                
                		// these delegates are required to keep context
                		this._mouseMoveDelegate = function(event) {
                			return that._mouseMove(event);
                		};
                		this._mouseUpDelegate = function(event) {
                			return that._mouseUp(event);
                		};
                		$(document)
                			.bind("mousemove."+this.widgetName, this._mouseMoveDelegate)
                			.bind("mouseup."+this.widgetName, this._mouseUpDelegate);
                
                		event.preventDefault();
                
                		mouseHandled = true;
                		return true;
                	},
                
                	_mouseMove: function(event) {
                		// IE mouseup check - mouseup happened when mouse was out of window
                		if ($.ui.ie && ( !document.documentMode || document.documentMode < 9 ) && !event.button) {
                			return this._mouseUp(event);
                		}
                
                		if (this._mouseStarted) {
                			this._mouseDrag(event);
                			return event.preventDefault();
                		}
                
                		if (this._mouseDistanceMet(event) && this._mouseDelayMet(event)) {
                			this._mouseStarted =
                				(this._mouseStart(this._mouseDownEvent, event) !== false);
                			(this._mouseStarted ? this._mouseDrag(event) : this._mouseUp(event));
                		}
                
                		return !this._mouseStarted;
                	},
                
                	_mouseUp: function(event) {
                		$(document)
                			.unbind("mousemove."+this.widgetName, this._mouseMoveDelegate)
                			.unbind("mouseup."+this.widgetName, this._mouseUpDelegate);
                
                		if (this._mouseStarted) {
                			this._mouseStarted = false;
                
                			if (event.target === this._mouseDownEvent.target) {
                				$.data(event.target, this.widgetName + ".preventClickEvent", true);
                			}
                
                			this._mouseStop(event);
                		}
                
                		return false;
                	},
                
                	_mouseDistanceMet: function(event) {
                		return (Math.max(
                				Math.abs(this._mouseDownEvent.pageX - event.pageX),
                				Math.abs(this._mouseDownEvent.pageY - event.pageY)
                			) >= this.options.distance
                		);
                	},
                
                	_mouseDelayMet: function(/* event */) {
                		return this.mouseDelayMet;
                	},
                
                	// These are placeholder methods, to be overriden by extending plugin
                	_mouseStart: function(/* event */) {},
                	_mouseDrag: function(/* event */) {},
                	_mouseStop: function(/* event */) {},
                	_mouseCapture: function(/* event */) { return true; }
                });
                
                })(jQuery);
                
                });
                define('jquery_ui/sortable',['jquery','./core','./mouse','./widget'], function (jQuery) {
                /*!
                 * jQuery UI Sortable 1.10.0
                 * http://jqueryui.com
                 *
                 * Copyright 2013 jQuery Foundation and other contributors
                 * Released under the MIT license.
                 * http://jquery.org/license
                 *
                 * http://api.jqueryui.com/sortable/
                 *
                 * Depends:
                 *	jquery.ui.core.js
                 *	jquery.ui.mouse.js
                 *	jquery.ui.widget.js
                 */
                (function( $, undefined ) {
                
                /*jshint loopfunc: true */
                
                function isOverAxis( x, reference, size ) {
                	return ( x > reference ) && ( x < ( reference + size ) );
                }
                
                $.widget("ui.sortable", $.ui.mouse, {
                	version: "1.10.0",
                	widgetEventPrefix: "sort",
                	ready: false,
                	options: {
                		appendTo: "parent",
                		axis: false,
                		connectWith: false,
                		containment: false,
                		cursor: "auto",
                		cursorAt: false,
                		dropOnEmpty: true,
                		forcePlaceholderSize: false,
                		forceHelperSize: false,
                		grid: false,
                		handle: false,
                		helper: "original",
                		items: "> *",
                		opacity: false,
                		placeholder: false,
                		revert: false,
                		scroll: true,
                		scrollSensitivity: 20,
                		scrollSpeed: 20,
                		scope: "default",
                		tolerance: "intersect",
                		zIndex: 1000,
                
                		// callbacks
                		activate: null,
                		beforeStop: null,
                		change: null,
                		deactivate: null,
                		out: null,
                		over: null,
                		receive: null,
                		remove: null,
                		sort: null,
                		start: null,
                		stop: null,
                		update: null
                	},
                	_create: function() {
                
                		var o = this.options;
                		this.containerCache = {};
                		this.element.addClass("ui-sortable");
                
                		//Get the items
                		this.refresh();
                
                		//Let's determine if the items are being displayed horizontally
                		this.floating = this.items.length ? o.axis === "x" || (/left|right/).test(this.items[0].item.css("float")) || (/inline|table-cell/).test(this.items[0].item.css("display")) : false;
                
                		//Let's determine the parent's offset
                		this.offset = this.element.offset();
                
                		//Initialize mouse events for interaction
                		this._mouseInit();
                
                		//We're ready to go
                		this.ready = true;
                
                	},
                
                	_destroy: function() {
                		this.element
                			.removeClass("ui-sortable ui-sortable-disabled");
                		this._mouseDestroy();
                
                		for ( var i = this.items.length - 1; i >= 0; i-- ) {
                			this.items[i].item.removeData(this.widgetName + "-item");
                		}
                
                		return this;
                	},
                
                	_setOption: function(key, value){
                		if ( key === "disabled" ) {
                			this.options[ key ] = value;
                
                			this.widget().toggleClass( "ui-sortable-disabled", !!value );
                		} else {
                			// Don't call widget base _setOption for disable as it adds ui-state-disabled class
                			$.Widget.prototype._setOption.apply(this, arguments);
                		}
                	},
                
                	_mouseCapture: function(event, overrideHandle) {
                		var currentItem = null,
                			validHandle = false,
                			that = this;
                
                		if (this.reverting) {
                			return false;
                		}
                
                		if(this.options.disabled || this.options.type === "static") {
                			return false;
                		}
                
                		//We have to refresh the items data once first
                		this._refreshItems(event);
                
                		//Find out if the clicked node (or one of its parents) is a actual item in this.items
                		$(event.target).parents().each(function() {
                			if($.data(this, that.widgetName + "-item") === that) {
                				currentItem = $(this);
                				return false;
                			}
                		});
                		if($.data(event.target, that.widgetName + "-item") === that) {
                			currentItem = $(event.target);
                		}
                
                		if(!currentItem) {
                			return false;
                		}
                		if(this.options.handle && !overrideHandle) {
                			$(this.options.handle, currentItem).find("*").addBack().each(function() {
                				if(this === event.target) {
                					validHandle = true;
                				}
                			});
                			if(!validHandle) {
                				return false;
                			}
                		}
                
                		this.currentItem = currentItem;
                		this._removeCurrentsFromItems();
                		return true;
                
                	},
                
                	_mouseStart: function(event, overrideHandle, noActivation) {
                
                		var i,
                			o = this.options;
                
                		this.currentContainer = this;
                
                		//We only need to call refreshPositions, because the refreshItems call has been moved to mouseCapture
                		this.refreshPositions();
                
                		//Create and append the visible helper
                		this.helper = this._createHelper(event);
                
                		//Cache the helper size
                		this._cacheHelperProportions();
                
                		/*
                		 * - Position generation -
                		 * This block generates everything position related - it's the core of draggables.
                		 */
                
                		//Cache the margins of the original element
                		this._cacheMargins();
                
                		//Get the next scrolling parent
                		this.scrollParent = this.helper.scrollParent();
                
                		//The element's absolute position on the page minus margins
                		this.offset = this.currentItem.offset();
                		this.offset = {
                			top: this.offset.top - this.margins.top,
                			left: this.offset.left - this.margins.left
                		};
                
                		$.extend(this.offset, {
                			click: { //Where the click happened, relative to the element
                				left: event.pageX - this.offset.left,
                				top: event.pageY - this.offset.top
                			},
                			parent: this._getParentOffset(),
                			relative: this._getRelativeOffset() //This is a relative to absolute position minus the actual position calculation - only used for relative positioned helper
                		});
                
                		// Only after we got the offset, we can change the helper's position to absolute
                		// TODO: Still need to figure out a way to make relative sorting possible
                		this.helper.css("position", "absolute");
                		this.cssPosition = this.helper.css("position");
                
                		//Generate the original position
                		this.originalPosition = this._generatePosition(event);
                		this.originalPageX = event.pageX;
                		this.originalPageY = event.pageY;
                
                		//Adjust the mouse offset relative to the helper if "cursorAt" is supplied
                		(o.cursorAt && this._adjustOffsetFromHelper(o.cursorAt));
                
                		//Cache the former DOM position
                		this.domPosition = { prev: this.currentItem.prev()[0], parent: this.currentItem.parent()[0] };
                
                		//If the helper is not the original, hide the original so it's not playing any role during the drag, won't cause anything bad this way
                		if(this.helper[0] !== this.currentItem[0]) {
                			this.currentItem.hide();
                		}
                
                		//Create the placeholder
                		this._createPlaceholder();
                
                		//Set a containment if given in the options
                		if(o.containment) {
                			this._setContainment();
                		}
                
                		if(o.cursor) { // cursor option
                			if ($("body").css("cursor")) {
                				this._storedCursor = $("body").css("cursor");
                			}
                			$("body").css("cursor", o.cursor);
                		}
                
                		if(o.opacity) { // opacity option
                			if (this.helper.css("opacity")) {
                				this._storedOpacity = this.helper.css("opacity");
                			}
                			this.helper.css("opacity", o.opacity);
                		}
                
                		if(o.zIndex) { // zIndex option
                			if (this.helper.css("zIndex")) {
                				this._storedZIndex = this.helper.css("zIndex");
                			}
                			this.helper.css("zIndex", o.zIndex);
                		}
                
                		//Prepare scrolling
                		if(this.scrollParent[0] !== document && this.scrollParent[0].tagName !== "HTML") {
                			this.overflowOffset = this.scrollParent.offset();
                		}
                
                		//Call callbacks
                		this._trigger("start", event, this._uiHash());
                
                		//Recache the helper size
                		if(!this._preserveHelperProportions) {
                			this._cacheHelperProportions();
                		}
                
                
                		//Post "activate" events to possible containers
                		if( !noActivation ) {
                			for ( i = this.containers.length - 1; i >= 0; i-- ) {
                				this.containers[ i ]._trigger( "activate", event, this._uiHash( this ) );
                			}
                		}
                
                		//Prepare possible droppables
                		if($.ui.ddmanager) {
                			$.ui.ddmanager.current = this;
                		}
                
                		if ($.ui.ddmanager && !o.dropBehaviour) {
                			$.ui.ddmanager.prepareOffsets(this, event);
                		}
                
                		this.dragging = true;
                
                		this.helper.addClass("ui-sortable-helper");
                		this._mouseDrag(event); //Execute the drag once - this causes the helper not to be visible before getting its correct position
                		return true;
                
                	},
                
                	_mouseDrag: function(event) {
                		var i, item, itemElement, intersection,
                			o = this.options,
                			scrolled = false;
                
                		//Compute the helpers position
                		this.position = this._generatePosition(event);
                		this.positionAbs = this._convertPositionTo("absolute");
                
                		if (!this.lastPositionAbs) {
                			this.lastPositionAbs = this.positionAbs;
                		}
                
                		//Do scrolling
                		if(this.options.scroll) {
                			if(this.scrollParent[0] !== document && this.scrollParent[0].tagName !== "HTML") {
                
                				if((this.overflowOffset.top + this.scrollParent[0].offsetHeight) - event.pageY < o.scrollSensitivity) {
                					this.scrollParent[0].scrollTop = scrolled = this.scrollParent[0].scrollTop + o.scrollSpeed;
                				} else if(event.pageY - this.overflowOffset.top < o.scrollSensitivity) {
                					this.scrollParent[0].scrollTop = scrolled = this.scrollParent[0].scrollTop - o.scrollSpeed;
                				}
                
                				if((this.overflowOffset.left + this.scrollParent[0].offsetWidth) - event.pageX < o.scrollSensitivity) {
                					this.scrollParent[0].scrollLeft = scrolled = this.scrollParent[0].scrollLeft + o.scrollSpeed;
                				} else if(event.pageX - this.overflowOffset.left < o.scrollSensitivity) {
                					this.scrollParent[0].scrollLeft = scrolled = this.scrollParent[0].scrollLeft - o.scrollSpeed;
                				}
                
                			} else {
                
                				if(event.pageY - $(document).scrollTop() < o.scrollSensitivity) {
                					scrolled = $(document).scrollTop($(document).scrollTop() - o.scrollSpeed);
                				} else if($(window).height() - (event.pageY - $(document).scrollTop()) < o.scrollSensitivity) {
                					scrolled = $(document).scrollTop($(document).scrollTop() + o.scrollSpeed);
                				}
                
                				if(event.pageX - $(document).scrollLeft() < o.scrollSensitivity) {
                					scrolled = $(document).scrollLeft($(document).scrollLeft() - o.scrollSpeed);
                				} else if($(window).width() - (event.pageX - $(document).scrollLeft()) < o.scrollSensitivity) {
                					scrolled = $(document).scrollLeft($(document).scrollLeft() + o.scrollSpeed);
                				}
                
                			}
                
                			if(scrolled !== false && $.ui.ddmanager && !o.dropBehaviour) {
                				$.ui.ddmanager.prepareOffsets(this, event);
                			}
                		}
                
                		//Regenerate the absolute position used for position checks
                		this.positionAbs = this._convertPositionTo("absolute");
                
                		//Set the helper position
                		if(!this.options.axis || this.options.axis !== "y") {
                			this.helper[0].style.left = this.position.left+"px";
                		}
                		if(!this.options.axis || this.options.axis !== "x") {
                			this.helper[0].style.top = this.position.top+"px";
                		}
                
                		//Rearrange
                		for (i = this.items.length - 1; i >= 0; i--) {
                
                			//Cache variables and intersection, continue if no intersection
                			item = this.items[i];
                			itemElement = item.item[0];
                			intersection = this._intersectsWithPointer(item);
                			if (!intersection) {
                				continue;
                			}
                
                			// Only put the placeholder inside the current Container, skip all
                			// items form other containers. This works because when moving
                			// an item from one container to another the
                			// currentContainer is switched before the placeholder is moved.
                			//
                			// Without this moving items in "sub-sortables" can cause the placeholder to jitter
                			// beetween the outer and inner container.
                			if (item.instance !== this.currentContainer) {
                				continue;
                			}
                
                			// cannot intersect with itself
                			// no useless actions that have been done before
                			// no action if the item moved is the parent of the item checked
                			if (itemElement !== this.currentItem[0] &&
                				this.placeholder[intersection === 1 ? "next" : "prev"]()[0] !== itemElement &&
                				!$.contains(this.placeholder[0], itemElement) &&
                				(this.options.type === "semi-dynamic" ? !$.contains(this.element[0], itemElement) : true)
                			) {
                
                				this.direction = intersection === 1 ? "down" : "up";
                
                				if (this.options.tolerance === "pointer" || this._intersectsWithSides(item)) {
                					this._rearrange(event, item);
                				} else {
                					break;
                				}
                
                				this._trigger("change", event, this._uiHash());
                				break;
                			}
                		}
                
                		//Post events to containers
                		this._contactContainers(event);
                
                		//Interconnect with droppables
                		if($.ui.ddmanager) {
                			$.ui.ddmanager.drag(this, event);
                		}
                
                		//Call callbacks
                		this._trigger("sort", event, this._uiHash());
                
                		this.lastPositionAbs = this.positionAbs;
                		return false;
                
                	},
                
                	_mouseStop: function(event, noPropagation) {
                
                		if(!event) {
                			return;
                		}
                
                		//If we are using droppables, inform the manager about the drop
                		if ($.ui.ddmanager && !this.options.dropBehaviour) {
                			$.ui.ddmanager.drop(this, event);
                		}
                
                		if(this.options.revert) {
                			var that = this,
                				cur = this.placeholder.offset();
                
                			this.reverting = true;
                
                			$(this.helper).animate({
                				left: cur.left - this.offset.parent.left - this.margins.left + (this.offsetParent[0] === document.body ? 0 : this.offsetParent[0].scrollLeft),
                				top: cur.top - this.offset.parent.top - this.margins.top + (this.offsetParent[0] === document.body ? 0 : this.offsetParent[0].scrollTop)
                			}, parseInt(this.options.revert, 10) || 500, function() {
                				that._clear(event);
                			});
                		} else {
                			this._clear(event, noPropagation);
                		}
                
                		return false;
                
                	},
                
                	cancel: function() {
                
                		if(this.dragging) {
                
                			this._mouseUp({ target: null });
                
                			if(this.options.helper === "original") {
                				this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper");
                			} else {
                				this.currentItem.show();
                			}
                
                			//Post deactivating events to containers
                			for (var i = this.containers.length - 1; i >= 0; i--){
                				this.containers[i]._trigger("deactivate", null, this._uiHash(this));
                				if(this.containers[i].containerCache.over) {
                					this.containers[i]._trigger("out", null, this._uiHash(this));
                					this.containers[i].containerCache.over = 0;
                				}
                			}
                
                		}
                
                		if (this.placeholder) {
                			//$(this.placeholder[0]).remove(); would have been the jQuery way - unfortunately, it unbinds ALL events from the original node!
                			if(this.placeholder[0].parentNode) {
                				this.placeholder[0].parentNode.removeChild(this.placeholder[0]);
                			}
                			if(this.options.helper !== "original" && this.helper && this.helper[0].parentNode) {
                				this.helper.remove();
                			}
                
                			$.extend(this, {
                				helper: null,
                				dragging: false,
                				reverting: false,
                				_noFinalSort: null
                			});
                
                			if(this.domPosition.prev) {
                				$(this.domPosition.prev).after(this.currentItem);
                			} else {
                				$(this.domPosition.parent).prepend(this.currentItem);
                			}
                		}
                
                		return this;
                
                	},
                
                	serialize: function(o) {
                
                		var items = this._getItemsAsjQuery(o && o.connected),
                			str = [];
                		o = o || {};
                
                		$(items).each(function() {
                			var res = ($(o.item || this).attr(o.attribute || "id") || "").match(o.expression || (/(.+)[\-=_](.+)/));
                			if (res) {
                				str.push((o.key || res[1]+"[]")+"="+(o.key && o.expression ? res[1] : res[2]));
                			}
                		});
                
                		if(!str.length && o.key) {
                			str.push(o.key + "=");
                		}
                
                		return str.join("&");
                
                	},
                
                	toArray: function(o) {
                
                		var items = this._getItemsAsjQuery(o && o.connected),
                			ret = [];
                
                		o = o || {};
                
                		items.each(function() { ret.push($(o.item || this).attr(o.attribute || "id") || ""); });
                		return ret;
                
                	},
                
                	/* Be careful with the following core functions */
                	_intersectsWith: function(item) {
                
                		var x1 = this.positionAbs.left,
                			x2 = x1 + this.helperProportions.width,
                			y1 = this.positionAbs.top,
                			y2 = y1 + this.helperProportions.height,
                			l = item.left,
                			r = l + item.width,
                			t = item.top,
                			b = t + item.height,
                			dyClick = this.offset.click.top,
                			dxClick = this.offset.click.left,
                			isOverElement = (y1 + dyClick) > t && (y1 + dyClick) < b && (x1 + dxClick) > l && (x1 + dxClick) < r;
                
                		if ( this.options.tolerance === "pointer" ||
                			this.options.forcePointerForContainers ||
                			(this.options.tolerance !== "pointer" && this.helperProportions[this.floating ? "width" : "height"] > item[this.floating ? "width" : "height"])
                		) {
                			return isOverElement;
                		} else {
                
                			return (l < x1 + (this.helperProportions.width / 2) && // Right Half
                				x2 - (this.helperProportions.width / 2) < r && // Left Half
                				t < y1 + (this.helperProportions.height / 2) && // Bottom Half
                				y2 - (this.helperProportions.height / 2) < b ); // Top Half
                
                		}
                	},
                
                	_intersectsWithPointer: function(item) {
                
                		var isOverElementHeight = (this.options.axis === "x") || isOverAxis(this.positionAbs.top + this.offset.click.top, item.top, item.height),
                			isOverElementWidth = (this.options.axis === "y") || isOverAxis(this.positionAbs.left + this.offset.click.left, item.left, item.width),
                			isOverElement = isOverElementHeight && isOverElementWidth,
                			verticalDirection = this._getDragVerticalDirection(),
                			horizontalDirection = this._getDragHorizontalDirection();
                
                		if (!isOverElement) {
                			return false;
                		}
                
                		return this.floating ?
                			( ((horizontalDirection && horizontalDirection === "right") || verticalDirection === "down") ? 2 : 1 )
                			: ( verticalDirection && (verticalDirection === "down" ? 2 : 1) );
                
                	},
                
                	_intersectsWithSides: function(item) {
                
                		var isOverBottomHalf = isOverAxis(this.positionAbs.top + this.offset.click.top, item.top + (item.height/2), item.height),
                			isOverRightHalf = isOverAxis(this.positionAbs.left + this.offset.click.left, item.left + (item.width/2), item.width),
                			verticalDirection = this._getDragVerticalDirection(),
                			horizontalDirection = this._getDragHorizontalDirection();
                
                		if (this.floating && horizontalDirection) {
                			return ((horizontalDirection === "right" && isOverRightHalf) || (horizontalDirection === "left" && !isOverRightHalf));
                		} else {
                			return verticalDirection && ((verticalDirection === "down" && isOverBottomHalf) || (verticalDirection === "up" && !isOverBottomHalf));
                		}
                
                	},
                
                	_getDragVerticalDirection: function() {
                		var delta = this.positionAbs.top - this.lastPositionAbs.top;
                		return delta !== 0 && (delta > 0 ? "down" : "up");
                	},
                
                	_getDragHorizontalDirection: function() {
                		var delta = this.positionAbs.left - this.lastPositionAbs.left;
                		return delta !== 0 && (delta > 0 ? "right" : "left");
                	},
                
                	refresh: function(event) {
                		this._refreshItems(event);
                		this.refreshPositions();
                		return this;
                	},
                
                	_connectWith: function() {
                		var options = this.options;
                		return options.connectWith.constructor === String ? [options.connectWith] : options.connectWith;
                	},
                
                	_getItemsAsjQuery: function(connected) {
                
                		var i, j, cur, inst,
                			items = [],
                			queries = [],
                			connectWith = this._connectWith();
                
                		if(connectWith && connected) {
                			for (i = connectWith.length - 1; i >= 0; i--){
                				cur = $(connectWith[i]);
                				for ( j = cur.length - 1; j >= 0; j--){
                					inst = $.data(cur[j], this.widgetFullName);
                					if(inst && inst !== this && !inst.options.disabled) {
                						queries.push([$.isFunction(inst.options.items) ? inst.options.items.call(inst.element) : $(inst.options.items, inst.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), inst]);
                					}
                				}
                			}
                		}
                
                		queries.push([$.isFunction(this.options.items) ? this.options.items.call(this.element, null, { options: this.options, item: this.currentItem }) : $(this.options.items, this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), this]);
                
                		for (i = queries.length - 1; i >= 0; i--){
                			queries[i][0].each(function() {
                				items.push(this);
                			});
                		}
                
                		return $(items);
                
                	},
                
                	_removeCurrentsFromItems: function() {
                
                		var list = this.currentItem.find(":data(" + this.widgetName + "-item)");
                
                		this.items = $.grep(this.items, function (item) {
                			for (var j=0; j < list.length; j++) {
                				if(list[j] === item.item[0]) {
                					return false;
                				}
                			}
                			return true;
                		});
                
                	},
                
                	_refreshItems: function(event) {
                
                		this.items = [];
                		this.containers = [this];
                
                		var i, j, cur, inst, targetData, _queries, item, queriesLength,
                			items = this.items,
                			queries = [[$.isFunction(this.options.items) ? this.options.items.call(this.element[0], event, { item: this.currentItem }) : $(this.options.items, this.element), this]],
                			connectWith = this._connectWith();
                
                		if(connectWith && this.ready) { //Shouldn't be run the first time through due to massive slow-down
                			for (i = connectWith.length - 1; i >= 0; i--){
                				cur = $(connectWith[i]);
                				for (j = cur.length - 1; j >= 0; j--){
                					inst = $.data(cur[j], this.widgetFullName);
                					if(inst && inst !== this && !inst.options.disabled) {
                						queries.push([$.isFunction(inst.options.items) ? inst.options.items.call(inst.element[0], event, { item: this.currentItem }) : $(inst.options.items, inst.element), inst]);
                						this.containers.push(inst);
                					}
                				}
                			}
                		}
                
                		for (i = queries.length - 1; i >= 0; i--) {
                			targetData = queries[i][1];
                			_queries = queries[i][0];
                
                			for (j=0, queriesLength = _queries.length; j < queriesLength; j++) {
                				item = $(_queries[j]);
                
                				item.data(this.widgetName + "-item", targetData); // Data for target checking (mouse manager)
                
                				items.push({
                					item: item,
                					instance: targetData,
                					width: 0, height: 0,
                					left: 0, top: 0
                				});
                			}
                		}
                
                	},
                
                	refreshPositions: function(fast) {
                
                		//This has to be redone because due to the item being moved out/into the offsetParent, the offsetParent's position will change
                		if(this.offsetParent && this.helper) {
                			this.offset.parent = this._getParentOffset();
                		}
                
                		var i, item, t, p;
                
                		for (i = this.items.length - 1; i >= 0; i--){
                			item = this.items[i];
                
                			//We ignore calculating positions of all connected containers when we're not over them
                			if(item.instance !== this.currentContainer && this.currentContainer && item.item[0] !== this.currentItem[0]) {
                				continue;
                			}
                
                			t = this.options.toleranceElement ? $(this.options.toleranceElement, item.item) : item.item;
                
                			if (!fast) {
                				item.width = t.outerWidth();
                				item.height = t.outerHeight();
                			}
                
                			p = t.offset();
                			item.left = p.left;
                			item.top = p.top;
                		}
                
                		if(this.options.custom && this.options.custom.refreshContainers) {
                			this.options.custom.refreshContainers.call(this);
                		} else {
                			for (i = this.containers.length - 1; i >= 0; i--){
                				p = this.containers[i].element.offset();
                				this.containers[i].containerCache.left = p.left;
                				this.containers[i].containerCache.top = p.top;
                				this.containers[i].containerCache.width	= this.containers[i].element.outerWidth();
                				this.containers[i].containerCache.height = this.containers[i].element.outerHeight();
                			}
                		}
                
                		return this;
                	},
                
                	_createPlaceholder: function(that) {
                		that = that || this;
                		var className,
                			o = that.options;
                
                		if(!o.placeholder || o.placeholder.constructor === String) {
                			className = o.placeholder;
                			o.placeholder = {
                				element: function() {
                
                					var el = $(document.createElement(that.currentItem[0].nodeName))
                						.addClass(className || that.currentItem[0].className+" ui-sortable-placeholder")
                						.removeClass("ui-sortable-helper")[0];
                
                					if(!className) {
                						el.style.visibility = "hidden";
                					}
                
                					return el;
                				},
                				update: function(container, p) {
                
                					// 1. If a className is set as 'placeholder option, we don't force sizes - the class is responsible for that
                					// 2. The option 'forcePlaceholderSize can be enabled to force it even if a class name is specified
                					if(className && !o.forcePlaceholderSize) {
                						return;
                					}
                
                					//If the element doesn't have a actual height by itself (without styles coming from a stylesheet), it receives the inline height from the dragged item
                					if(!p.height()) { p.height(that.currentItem.innerHeight() - parseInt(that.currentItem.css("paddingTop")||0, 10) - parseInt(that.currentItem.css("paddingBottom")||0, 10)); }
                					if(!p.width()) { p.width(that.currentItem.innerWidth() - parseInt(that.currentItem.css("paddingLeft")||0, 10) - parseInt(that.currentItem.css("paddingRight")||0, 10)); }
                				}
                			};
                		}
                
                		//Create the placeholder
                		that.placeholder = $(o.placeholder.element.call(that.element, that.currentItem));
                
                		//Append it after the actual current item
                		that.currentItem.after(that.placeholder);
                
                		//Update the size of the placeholder (TODO: Logic to fuzzy, see line 316/317)
                		o.placeholder.update(that, that.placeholder);
                
                	},
                
                	_contactContainers: function(event) {
                		var i, j, dist, itemWithLeastDistance, posProperty, sizeProperty, base, cur, nearBottom,
                			innermostContainer = null,
                			innermostIndex = null;
                
                		// get innermost container that intersects with item
                		for (i = this.containers.length - 1; i >= 0; i--) {
                
                			// never consider a container that's located within the item itself
                			if($.contains(this.currentItem[0], this.containers[i].element[0])) {
                				continue;
                			}
                
                			if(this._intersectsWith(this.containers[i].containerCache)) {
                
                				// if we've already found a container and it's more "inner" than this, then continue
                				if(innermostContainer && $.contains(this.containers[i].element[0], innermostContainer.element[0])) {
                					continue;
                				}
                
                				innermostContainer = this.containers[i];
                				innermostIndex = i;
                
                			} else {
                				// container doesn't intersect. trigger "out" event if necessary
                				if(this.containers[i].containerCache.over) {
                					this.containers[i]._trigger("out", event, this._uiHash(this));
                					this.containers[i].containerCache.over = 0;
                				}
                			}
                
                		}
                
                		// if no intersecting containers found, return
                		if(!innermostContainer) {
                			return;
                		}
                
                		// move the item into the container if it's not there already
                		if(this.containers.length === 1) {
                			this.containers[innermostIndex]._trigger("over", event, this._uiHash(this));
                			this.containers[innermostIndex].containerCache.over = 1;
                		} else {
                
                			//When entering a new container, we will find the item with the least distance and append our item near it
                			dist = 10000;
                			itemWithLeastDistance = null;
                			posProperty = this.containers[innermostIndex].floating ? "left" : "top";
                			sizeProperty = this.containers[innermostIndex].floating ? "width" : "height";
                			base = this.positionAbs[posProperty] + this.offset.click[posProperty];
                			for (j = this.items.length - 1; j >= 0; j--) {
                				if(!$.contains(this.containers[innermostIndex].element[0], this.items[j].item[0])) {
                					continue;
                				}
                				if(this.items[j].item[0] === this.currentItem[0]) {
                					continue;
                				}
                				cur = this.items[j].item.offset()[posProperty];
                				nearBottom = false;
                				if(Math.abs(cur - base) > Math.abs(cur + this.items[j][sizeProperty] - base)){
                					nearBottom = true;
                					cur += this.items[j][sizeProperty];
                				}
                
                				if(Math.abs(cur - base) < dist) {
                					dist = Math.abs(cur - base); itemWithLeastDistance = this.items[j];
                					this.direction = nearBottom ? "up": "down";
                				}
                			}
                
                			//Check if dropOnEmpty is enabled
                			if(!itemWithLeastDistance && !this.options.dropOnEmpty) {
                				return;
                			}
                
                			this.currentContainer = this.containers[innermostIndex];
                			itemWithLeastDistance ? this._rearrange(event, itemWithLeastDistance, null, true) : this._rearrange(event, null, this.containers[innermostIndex].element, true);
                			this._trigger("change", event, this._uiHash());
                			this.containers[innermostIndex]._trigger("change", event, this._uiHash(this));
                
                			//Update the placeholder
                			this.options.placeholder.update(this.currentContainer, this.placeholder);
                
                			this.containers[innermostIndex]._trigger("over", event, this._uiHash(this));
                			this.containers[innermostIndex].containerCache.over = 1;
                		}
                
                
                	},
                
                	_createHelper: function(event) {
                
                		var o = this.options,
                			helper = $.isFunction(o.helper) ? $(o.helper.apply(this.element[0], [event, this.currentItem])) : (o.helper === "clone" ? this.currentItem.clone() : this.currentItem);
                
                		//Add the helper to the DOM if that didn't happen already
                		if(!helper.parents("body").length) {
                			$(o.appendTo !== "parent" ? o.appendTo : this.currentItem[0].parentNode)[0].appendChild(helper[0]);
                		}
                
                		if(helper[0] === this.currentItem[0]) {
                			this._storedCSS = { width: this.currentItem[0].style.width, height: this.currentItem[0].style.height, position: this.currentItem.css("position"), top: this.currentItem.css("top"), left: this.currentItem.css("left") };
                		}
                
                		if(!helper[0].style.width || o.forceHelperSize) {
                			helper.width(this.currentItem.width());
                		}
                		if(!helper[0].style.height || o.forceHelperSize) {
                			helper.height(this.currentItem.height());
                		}
                
                		return helper;
                
                	},
                
                	_adjustOffsetFromHelper: function(obj) {
                		if (typeof obj === "string") {
                			obj = obj.split(" ");
                		}
                		if ($.isArray(obj)) {
                			obj = {left: +obj[0], top: +obj[1] || 0};
                		}
                		if ("left" in obj) {
                			this.offset.click.left = obj.left + this.margins.left;
                		}
                		if ("right" in obj) {
                			this.offset.click.left = this.helperProportions.width - obj.right + this.margins.left;
                		}
                		if ("top" in obj) {
                			this.offset.click.top = obj.top + this.margins.top;
                		}
                		if ("bottom" in obj) {
                			this.offset.click.top = this.helperProportions.height - obj.bottom + this.margins.top;
                		}
                	},
                
                	_getParentOffset: function() {
                
                
                		//Get the offsetParent and cache its position
                		this.offsetParent = this.helper.offsetParent();
                		var po = this.offsetParent.offset();
                
                		// This is a special case where we need to modify a offset calculated on start, since the following happened:
                		// 1. The position of the helper is absolute, so it's position is calculated based on the next positioned parent
                		// 2. The actual offset parent is a child of the scroll parent, and the scroll parent isn't the document, which means that
                		//    the scroll is included in the initial calculation of the offset of the parent, and never recalculated upon drag
                		if(this.cssPosition === "absolute" && this.scrollParent[0] !== document && $.contains(this.scrollParent[0], this.offsetParent[0])) {
                			po.left += this.scrollParent.scrollLeft();
                			po.top += this.scrollParent.scrollTop();
                		}
                
                		// This needs to be actually done for all browsers, since pageX/pageY includes this information
                		// with an ugly IE fix
                		if( this.offsetParent[0] === document.body || (this.offsetParent[0].tagName && this.offsetParent[0].tagName.toLowerCase() === "html" && $.ui.ie)) {
                			po = { top: 0, left: 0 };
                		}
                
                		return {
                			top: po.top + (parseInt(this.offsetParent.css("borderTopWidth"),10) || 0),
                			left: po.left + (parseInt(this.offsetParent.css("borderLeftWidth"),10) || 0)
                		};
                
                	},
                
                	_getRelativeOffset: function() {
                
                		if(this.cssPosition === "relative") {
                			var p = this.currentItem.position();
                			return {
                				top: p.top - (parseInt(this.helper.css("top"),10) || 0) + this.scrollParent.scrollTop(),
                				left: p.left - (parseInt(this.helper.css("left"),10) || 0) + this.scrollParent.scrollLeft()
                			};
                		} else {
                			return { top: 0, left: 0 };
                		}
                
                	},
                
                	_cacheMargins: function() {
                		this.margins = {
                			left: (parseInt(this.currentItem.css("marginLeft"),10) || 0),
                			top: (parseInt(this.currentItem.css("marginTop"),10) || 0)
                		};
                	},
                
                	_cacheHelperProportions: function() {
                		this.helperProportions = {
                			width: this.helper.outerWidth(),
                			height: this.helper.outerHeight()
                		};
                	},
                
                	_setContainment: function() {
                
                		var ce, co, over,
                			o = this.options;
                		if(o.containment === "parent") {
                			o.containment = this.helper[0].parentNode;
                		}
                		if(o.containment === "document" || o.containment === "window") {
                			this.containment = [
                				0 - this.offset.relative.left - this.offset.parent.left,
                				0 - this.offset.relative.top - this.offset.parent.top,
                				$(o.containment === "document" ? document : window).width() - this.helperProportions.width - this.margins.left,
                				($(o.containment === "document" ? document : window).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top
                			];
                		}
                
                		if(!(/^(document|window|parent)$/).test(o.containment)) {
                			ce = $(o.containment)[0];
                			co = $(o.containment).offset();
                			over = ($(ce).css("overflow") !== "hidden");
                
                			this.containment = [
                				co.left + (parseInt($(ce).css("borderLeftWidth"),10) || 0) + (parseInt($(ce).css("paddingLeft"),10) || 0) - this.margins.left,
                				co.top + (parseInt($(ce).css("borderTopWidth"),10) || 0) + (parseInt($(ce).css("paddingTop"),10) || 0) - this.margins.top,
                				co.left+(over ? Math.max(ce.scrollWidth,ce.offsetWidth) : ce.offsetWidth) - (parseInt($(ce).css("borderLeftWidth"),10) || 0) - (parseInt($(ce).css("paddingRight"),10) || 0) - this.helperProportions.width - this.margins.left,
                				co.top+(over ? Math.max(ce.scrollHeight,ce.offsetHeight) : ce.offsetHeight) - (parseInt($(ce).css("borderTopWidth"),10) || 0) - (parseInt($(ce).css("paddingBottom"),10) || 0) - this.helperProportions.height - this.margins.top
                			];
                		}
                
                	},
                
                	_convertPositionTo: function(d, pos) {
                
                		if(!pos) {
                			pos = this.position;
                		}
                		var mod = d === "absolute" ? 1 : -1,
                			scroll = this.cssPosition === "absolute" && !(this.scrollParent[0] !== document && $.contains(this.scrollParent[0], this.offsetParent[0])) ? this.offsetParent : this.scrollParent,
                			scrollIsRootNode = (/(html|body)/i).test(scroll[0].tagName);
                
                		return {
                			top: (
                				pos.top	+																// The absolute mouse position
                				this.offset.relative.top * mod +										// Only for relative positioned nodes: Relative offset from element to offset parent
                				this.offset.parent.top * mod -											// The offsetParent's offset without borders (offset + border)
                				( ( this.cssPosition === "fixed" ? -this.scrollParent.scrollTop() : ( scrollIsRootNode ? 0 : scroll.scrollTop() ) ) * mod)
                			),
                			left: (
                				pos.left +																// The absolute mouse position
                				this.offset.relative.left * mod +										// Only for relative positioned nodes: Relative offset from element to offset parent
                				this.offset.parent.left * mod	-										// The offsetParent's offset without borders (offset + border)
                				( ( this.cssPosition === "fixed" ? -this.scrollParent.scrollLeft() : scrollIsRootNode ? 0 : scroll.scrollLeft() ) * mod)
                			)
                		};
                
                	},
                
                	_generatePosition: function(event) {
                
                		var top, left,
                			o = this.options,
                			pageX = event.pageX,
                			pageY = event.pageY,
                			scroll = this.cssPosition === "absolute" && !(this.scrollParent[0] !== document && $.contains(this.scrollParent[0], this.offsetParent[0])) ? this.offsetParent : this.scrollParent, scrollIsRootNode = (/(html|body)/i).test(scroll[0].tagName);
                
                		// This is another very weird special case that only happens for relative elements:
                		// 1. If the css position is relative
                		// 2. and the scroll parent is the document or similar to the offset parent
                		// we have to refresh the relative offset during the scroll so there are no jumps
                		if(this.cssPosition === "relative" && !(this.scrollParent[0] !== document && this.scrollParent[0] !== this.offsetParent[0])) {
                			this.offset.relative = this._getRelativeOffset();
                		}
                
                		/*
                		 * - Position constraining -
                		 * Constrain the position to a mix of grid, containment.
                		 */
                
                		if(this.originalPosition) { //If we are not dragging yet, we won't check for options
                
                			if(this.containment) {
                				if(event.pageX - this.offset.click.left < this.containment[0]) {
                					pageX = this.containment[0] + this.offset.click.left;
                				}
                				if(event.pageY - this.offset.click.top < this.containment[1]) {
                					pageY = this.containment[1] + this.offset.click.top;
                				}
                				if(event.pageX - this.offset.click.left > this.containment[2]) {
                					pageX = this.containment[2] + this.offset.click.left;
                				}
                				if(event.pageY - this.offset.click.top > this.containment[3]) {
                					pageY = this.containment[3] + this.offset.click.top;
                				}
                			}
                
                			if(o.grid) {
                				top = this.originalPageY + Math.round((pageY - this.originalPageY) / o.grid[1]) * o.grid[1];
                				pageY = this.containment ? ( (top - this.offset.click.top >= this.containment[1] && top - this.offset.click.top <= this.containment[3]) ? top : ((top - this.offset.click.top >= this.containment[1]) ? top - o.grid[1] : top + o.grid[1])) : top;
                
                				left = this.originalPageX + Math.round((pageX - this.originalPageX) / o.grid[0]) * o.grid[0];
                				pageX = this.containment ? ( (left - this.offset.click.left >= this.containment[0] && left - this.offset.click.left <= this.containment[2]) ? left : ((left - this.offset.click.left >= this.containment[0]) ? left - o.grid[0] : left + o.grid[0])) : left;
                			}
                
                		}
                
                		return {
                			top: (
                				pageY -																// The absolute mouse position
                				this.offset.click.top -													// Click offset (relative to the element)
                				this.offset.relative.top	-											// Only for relative positioned nodes: Relative offset from element to offset parent
                				this.offset.parent.top +												// The offsetParent's offset without borders (offset + border)
                				( ( this.cssPosition === "fixed" ? -this.scrollParent.scrollTop() : ( scrollIsRootNode ? 0 : scroll.scrollTop() ) ))
                			),
                			left: (
                				pageX -																// The absolute mouse position
                				this.offset.click.left -												// Click offset (relative to the element)
                				this.offset.relative.left	-											// Only for relative positioned nodes: Relative offset from element to offset parent
                				this.offset.parent.left +												// The offsetParent's offset without borders (offset + border)
                				( ( this.cssPosition === "fixed" ? -this.scrollParent.scrollLeft() : scrollIsRootNode ? 0 : scroll.scrollLeft() ))
                			)
                		};
                
                	},
                
                	_rearrange: function(event, i, a, hardRefresh) {
                
                		a ? a[0].appendChild(this.placeholder[0]) : i.item[0].parentNode.insertBefore(this.placeholder[0], (this.direction === "down" ? i.item[0] : i.item[0].nextSibling));
                
                		//Various things done here to improve the performance:
                		// 1. we create a setTimeout, that calls refreshPositions
                		// 2. on the instance, we have a counter variable, that get's higher after every append
                		// 3. on the local scope, we copy the counter variable, and check in the timeout, if it's still the same
                		// 4. this lets only the last addition to the timeout stack through
                		this.counter = this.counter ? ++this.counter : 1;
                		var counter = this.counter;
                
                		this._delay(function() {
                			if(counter === this.counter) {
                				this.refreshPositions(!hardRefresh); //Precompute after each DOM insertion, NOT on mousemove
                			}
                		});
                
                	},
                
                	_clear: function(event, noPropagation) {
                
                		this.reverting = false;
                		// We delay all events that have to be triggered to after the point where the placeholder has been removed and
                		// everything else normalized again
                		var i,
                			delayedTriggers = [];
                
                		// We first have to update the dom position of the actual currentItem
                		// Note: don't do it if the current item is already removed (by a user), or it gets reappended (see #4088)
                		if(!this._noFinalSort && this.currentItem.parent().length) {
                			this.placeholder.before(this.currentItem);
                		}
                		this._noFinalSort = null;
                
                		if(this.helper[0] === this.currentItem[0]) {
                			for(i in this._storedCSS) {
                				if(this._storedCSS[i] === "auto" || this._storedCSS[i] === "static") {
                					this._storedCSS[i] = "";
                				}
                			}
                			this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper");
                		} else {
                			this.currentItem.show();
                		}
                
                		if(this.fromOutside && !noPropagation) {
                			delayedTriggers.push(function(event) { this._trigger("receive", event, this._uiHash(this.fromOutside)); });
                		}
                		if((this.fromOutside || this.domPosition.prev !== this.currentItem.prev().not(".ui-sortable-helper")[0] || this.domPosition.parent !== this.currentItem.parent()[0]) && !noPropagation) {
                			delayedTriggers.push(function(event) { this._trigger("update", event, this._uiHash()); }); //Trigger update callback if the DOM position has changed
                		}
                
                		// Check if the items Container has Changed and trigger appropriate
                		// events.
                		if (this !== this.currentContainer) {
                			if(!noPropagation) {
                				delayedTriggers.push(function(event) { this._trigger("remove", event, this._uiHash()); });
                				delayedTriggers.push((function(c) { return function(event) { c._trigger("receive", event, this._uiHash(this)); };  }).call(this, this.currentContainer));
                				delayedTriggers.push((function(c) { return function(event) { c._trigger("update", event, this._uiHash(this));  }; }).call(this, this.currentContainer));
                			}
                		}
                
                
                		//Post events to containers
                		for (i = this.containers.length - 1; i >= 0; i--){
                			if(!noPropagation) {
                				delayedTriggers.push((function(c) { return function(event) { c._trigger("deactivate", event, this._uiHash(this)); };  }).call(this, this.containers[i]));
                			}
                			if(this.containers[i].containerCache.over) {
                				delayedTriggers.push((function(c) { return function(event) { c._trigger("out", event, this._uiHash(this)); };  }).call(this, this.containers[i]));
                				this.containers[i].containerCache.over = 0;
                			}
                		}
                
                		//Do what was originally in plugins
                		if(this._storedCursor) {
                			$("body").css("cursor", this._storedCursor);
                		}
                		if(this._storedOpacity) {
                			this.helper.css("opacity", this._storedOpacity);
                		}
                		if(this._storedZIndex) {
                			this.helper.css("zIndex", this._storedZIndex === "auto" ? "" : this._storedZIndex);
                		}
                
                		this.dragging = false;
                		if(this.cancelHelperRemoval) {
                			if(!noPropagation) {
                				this._trigger("beforeStop", event, this._uiHash());
                				for (i=0; i < delayedTriggers.length; i++) {
                					delayedTriggers[i].call(this, event);
                				} //Trigger all delayed events
                				this._trigger("stop", event, this._uiHash());
                			}
                
                			this.fromOutside = false;
                			return false;
                		}
                
                		if(!noPropagation) {
                			this._trigger("beforeStop", event, this._uiHash());
                		}
                
                		//$(this.placeholder[0]).remove(); would have been the jQuery way - unfortunately, it unbinds ALL events from the original node!
                		this.placeholder[0].parentNode.removeChild(this.placeholder[0]);
                
                		if(this.helper[0] !== this.currentItem[0]) {
                			this.helper.remove();
                		}
                		this.helper = null;
                
                		if(!noPropagation) {
                			for (i=0; i < delayedTriggers.length; i++) {
                				delayedTriggers[i].call(this, event);
                			} //Trigger all delayed events
                			this._trigger("stop", event, this._uiHash());
                		}
                
                		this.fromOutside = false;
                		return true;
                
                	},
                
                	_trigger: function() {
                		if ($.Widget.prototype._trigger.apply(this, arguments) === false) {
                			this.cancel();
                		}
                	},
                
                	_uiHash: function(_inst) {
                		var inst = _inst || this;
                		return {
                			helper: inst.helper,
                			placeholder: inst.placeholder || $([]),
                			position: inst.position,
                			originalPosition: inst.originalPosition,
                			offset: inst.positionAbs,
                			item: inst.currentItem,
                			sender: _inst ? _inst.element : null
                		};
                	}
                
                });
                
                })(jQuery);
                
                });
                define('bootstrap/dropdown',["jquery"], function(jQuery) {
                
                /* ========================================================================
                 * Bootstrap: dropdown.js v3.1.1
                 * http://getbootstrap.com/javascript/#dropdowns
                 * ========================================================================
                 * Copyright 2011-2014 Twitter, Inc.
                 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
                 * ======================================================================== */
                
                
                +function ($) {
                  
                
                  // DROPDOWN CLASS DEFINITION
                  // =========================
                
                  var backdrop = '.bk-bs-dropdown-backdrop'
                  var toggle   = '[data-bk-bs-toggle=dropdown]'
                  var Dropdown = function (element) {
                    $(element).on('click.bk-bs.dropdown', this.toggle)
                  }
                
                  Dropdown.prototype.toggle = function (e) {
                    var $this = $(this)
                
                    if ($this.is('.bk-bs-disabled, :disabled')) return
                
                    var $parent  = getParent($this)
                    var isActive = $parent.hasClass('bk-bs-open')
                
                    clearMenus()
                
                    if (!isActive) {
                      if ('ontouchstart' in document.documentElement && !$parent.closest('.bk-bs-navbar-nav').length) {
                        // if mobile we use a backdrop because click events don't delegate
                        $('<div class="bk-bs-dropdown-backdrop"/>').insertAfter($(this)).on('click', clearMenus)
                      }
                
                      var relatedTarget = { relatedTarget: this }
                      $parent.trigger(e = $.Event('show.bk-bs.dropdown', relatedTarget))
                
                      if (e.isDefaultPrevented()) return
                
                      $parent
                        .toggleClass('bk-bs-open')
                        .trigger('shown.bk-bs.dropdown', relatedTarget)
                
                      $this.focus()
                    }
                
                    return false
                  }
                
                  Dropdown.prototype.keydown = function (e) {
                    if (!/(38|40|27)/.test(e.keyCode)) return
                
                    var $this = $(this)
                
                    e.preventDefault()
                    e.stopPropagation()
                
                    if ($this.is('.bk-bs-disabled, :disabled')) return
                
                    var $parent  = getParent($this)
                    var isActive = $parent.hasClass('bk-bs-open')
                
                    if (!isActive || (isActive && e.keyCode == 27)) {
                      if (e.which == 27) $parent.find(toggle).focus()
                      return $this.click()
                    }
                
                    var desc = ' li:not(.bk-bs-divider):visible a'
                    var $items = $parent.find('[role=menu]' + desc + ', [role=listbox]' + desc)
                
                    if (!$items.length) return
                
                    var index = $items.index($items.filter(':focus'))
                
                    if (e.keyCode == 38 && index > 0)                 index--                        // up
                    if (e.keyCode == 40 && index < $items.length - 1) index++                        // down
                    if (!~index)                                      index = 0
                
                    $items.eq(index).focus()
                  }
                
                  function clearMenus(e) {
                    $(backdrop).remove()
                    $(toggle).each(function () {
                      var $parent = getParent($(this))
                      var relatedTarget = { relatedTarget: this }
                      if (!$parent.hasClass('bk-bs-open')) return
                      $parent.trigger(e = $.Event('hide.bk-bs.dropdown', relatedTarget))
                      if (e.isDefaultPrevented()) return
                      $parent.removeClass('bk-bs-open').trigger('hidden.bk-bs.dropdown', relatedTarget)
                    })
                  }
                
                  function getParent($this) {
                    var selector = $this.attr('data-bk-bs-target')
                
                    if (!selector) {
                      selector = $this.attr('href')
                      selector = selector && /#[A-Za-z]/.test(selector) && selector.replace(/.*(?=#[^\s]*$)/, '') //strip for ie7
                    }
                
                    var $parent = selector && $(selector)
                
                    return $parent && $parent.length ? $parent : $this.parent()
                  }
                
                
                  // DROPDOWN PLUGIN DEFINITION
                  // ==========================
                
                  var old = $.fn.dropdown
                
                  $.fn.dropdown = function (option) {
                    return this.each(function () {
                      var $this = $(this)
                      var data  = $this.data('bk-bs.dropdown')
                
                      if (!data) $this.data('bk-bs.dropdown', (data = new Dropdown(this)))
                      if (typeof option == 'string') data[option].call($this)
                    })
                  }
                
                  $.fn.dropdown.Constructor = Dropdown
                
                
                  // DROPDOWN NO CONFLICT
                  // ====================
                
                  $.fn.dropdown.noConflict = function () {
                    $.fn.dropdown = old
                    return this
                  }
                
                
                  // APPLY TO STANDARD DROPDOWN ELEMENTS
                  // ===================================
                
                  $(document)
                    .on('click.bk-bs.dropdown.data-api', clearMenus)
                    .on('click.bk-bs.dropdown.data-api', '.bk-bs-dropdown form', function (e) { e.stopPropagation() })
                    .on('click.bk-bs.dropdown.data-api', toggle, Dropdown.prototype.toggle)
                    .on('keydown.bk-bs.dropdown.data-api', toggle + ', [role=menu], [role=listbox]', Dropdown.prototype.keydown)
                
                }(jQuery);
                
                });
                
                (function() {
                  var __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
                    __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('widget/pivot_table',["underscore", "jquery", "jquery_ui/sortable", "bootstrap/dropdown", "backbone", "common/has_parent", "common/has_properties", "common/continuum_view"], function(_, $, $$1, $$2, Backbone, HasParent, HasProperties, ContinuumView) {
                    var PivotTable, PivotTableView, PivotTables, _ref, _ref1, _ref2;
                    PivotTableView = (function(_super) {
                      __extends(PivotTableView, _super);
                
                      function PivotTableView() {
                        this.getAggregator = __bind(this.getAggregator, this);
                        _ref = PivotTableView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      PivotTableView.prototype.initialize = function(options) {
                        PivotTableView.__super__.initialize.call(this, options);
                        this.listenTo(this.model, 'destroy', this.remove);
                        this.listenTo(this.model, 'change', this.rerenderToolbox);
                        this.listenTo(this.model, 'change:data', this.rerenderPivotTable);
                        return this.render();
                      };
                
                      PivotTableView.prototype.mpush = function(attr, value) {
                        return this.mset(attr, this.mget(attr).concat([value]));
                      };
                
                      PivotTableView.prototype.mupdate = function(attr, fn) {
                        var value,
                          _this = this;
                        value = _.map(this.mget(attr), function(item) {
                          return _.clone(item);
                        });
                        fn(value);
                        return this.mset(attr, value);
                      };
                
                      PivotTableView.prototype.fieldNames = function() {
                        var field, _i, _len, _ref1, _results;
                        _ref1 = this.mget("fields");
                        _results = [];
                        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
                          field = _ref1[_i];
                          _results.push(field.name);
                        }
                        return _results;
                      };
                
                      PivotTableView.prototype.fieldDTypes = function() {
                        var field, _i, _len, _ref1, _results;
                        _ref1 = this.mget("fields");
                        _results = [];
                        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
                          field = _ref1[_i];
                          _results.push(field.dtype);
                        }
                        return _results;
                      };
                
                      PivotTableView.prototype.getDType = function(fieldName) {
                        return _.find(this.mget("fields"), function(field) {
                          return field.name === fieldName;
                        }).dtype;
                      };
                
                      PivotTableView.prototype.render = function() {
                        var html;
                        html = $('<table class="bk-pivot"></table>');
                        this.$description = $('<td class="bk-pivot-description" valign="center"></td>');
                        this.$toolbox = $('<td class="bk-pivot-toolbox" valign="top"></td>');
                        this.$pivot = $('<td class="bk-pivot-table" valign="top"></td>');
                        this.$description.html(this.renderDescription());
                        this.$toolbox.html(this.renderToolbox());
                        this.$pivot.html(this.renderWait());
                        html.append([$('<tr></tr>').append(this.$desciption), $('<tr></tr>').append([this.$toolbox, this.$pivot])]);
                        this.$el.html(html);
                        return this.delayRenderPivotTable();
                      };
                
                      PivotTableView.prototype.renderWait = function() {
                        return $('<span class="bk-wait">Rendering ...</span>');
                      };
                
                      PivotTableView.prototype.rerenderPivotTable = function() {
                        this.$pivot.html(this.renderWait());
                        return this.delayRenderPivotTable();
                      };
                
                      PivotTableView.prototype.delayRenderPivotTable = function() {
                        var _this = this;
                        return _.delay((function() {
                          return _this.$pivot.html(_this.renderPivotTable());
                        }), 50);
                      };
                
                      PivotTableView.prototype.rerenderToolbox = function() {
                        return this.$toolbox.html(this.renderToolbox());
                      };
                
                      PivotTableView.prototype.renderToolbox = function() {
                        var toolbox;
                        toolbox = $('<ul></ul>');
                        toolbox.append(this.renderRows());
                        toolbox.append(this.renderColumns());
                        toolbox.append(this.renderValues());
                        toolbox.append(this.renderFilters());
                        toolbox.append(this.renderUpdate());
                        return toolbox;
                      };
                
                      PivotTableView.prototype.renderAdd = function(exclude, handler) {
                        var button, dropdown;
                        dropdown = $('<div class="bk-bs-dropdown bk-bs-pull-right"></div>');
                        button = $('<button class="bk-bs-btn bk-bs-btn-link bk-bs-btn-xs" data-bk-bs-toggle="dropdown">Add</button>');
                        dropdown.append([button.dropdown(), this.renderFields(exclude, handler)]);
                        return dropdown;
                      };
                
                      PivotTableView.prototype.renderFields = function(exclude, handler) {
                        var fields, items, menu;
                        fields = _.difference(this.fieldNames(), exclude);
                        menu = $('<ul class="bk-bs-dropdown-menu"></ul>');
                        items = _.map(fields, function(field) {
                          var item, link;
                          link = $('<a tabindex="-1" href="javascript://"></a>');
                          link.text(field);
                          item = $('<li></li>');
                          return item.append(link);
                        });
                        menu.append(items);
                        return menu.click(function(event) {
                          return handler($(event.target).text());
                        });
                      };
                
                      PivotTableView.prototype.renderRemove = function(attr, field) {
                        var handler,
                          _this = this;
                        handler = function(event) {
                          return _this.mset(attr, _.reject(_this.mget(attr), function(item) {
                            return item.field === field;
                          }));
                        };
                        return $('<span class="bk-bs-close bk-bs-pull-right">&times;</span>').click(handler);
                      };
                
                      PivotTableView.prototype.renderOptions = function(options, value, handler) {
                        var button, dropdown, items, menu, text,
                          _this = this;
                        menu = $('<ul class="bk-bs-dropdown-menu"></ul>');
                        items = _.map(options, function(option) {
                          var item, link;
                          link = $('<a tabindex="-1" href="javascript://"></a>');
                          link.text(option);
                          item = $('<li></li>');
                          return item.append(link);
                        });
                        menu.append(items);
                        menu.click(function(event) {
                          return handler($(event.target).text());
                        });
                        dropdown = $('<span class="bk-bs-dropdown"></span>');
                        button = $('<button class="bk-bs-btn bk-bs-btn-link bk-bs-btn-xs" data-bk-bs-toggle="dropdown"></button>');
                        text = typeof value === 'number' ? options[value] : value;
                        button.text(text);
                        button.append('&nbsp;');
                        button.append($('<span class="bk-bs-caret"></span>'));
                        return dropdown.append([button.dropdown(), menu]);
                      };
                
                      PivotTableView.prototype.makeSortable = function(attr, $el) {
                        var _this = this;
                        return $el.sortable({
                          handle: ".bk-pivot-box-header",
                          axis: "y",
                          distance: 10
                        }).on('sortstop', function(ui) {
                          var child, fields;
                          fields = (function() {
                            var _i, _len, _ref1, _results;
                            _ref1 = $el.children();
                            _results = [];
                            for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
                              child = _ref1[_i];
                              _results.push($(child).data('bk-field'));
                            }
                            return _results;
                          })();
                          return _this.mset(attr, _.sortBy(_this.mget(attr), function(item) {
                            return fields.indexOf(item.field);
                          }));
                        });
                      };
                
                      PivotTableView.prototype.renderFieldName = function(field) {
                        return $('<span class="bk-field"></span').text(field);
                      };
                
                      PivotTableView.prototype.renderDType = function(field) {
                        return $('<span class="bk-dtype"></span').text('(' + this.getDType(field) + ')');
                      };
                
                      PivotTableView.prototype.defaultRowColumn = function(field) {
                        return {
                          field: field,
                          order: "ascending",
                          sort_by: field,
                          totals: true
                        };
                      };
                
                      PivotTableView.prototype.usedFields = function() {
                        return _.map(this.mget("rows").concat(this.mget("columns")), function(item) {
                          return item.field;
                        });
                      };
                
                      PivotTableView.prototype.renderRows = function() {
                        var $rows, add, el, header,
                          _this = this;
                        el = $("<li></li>");
                        header = $("<div>Rows</div>");
                        add = this.renderAdd(this.usedFields(), function(field) {
                          return _this.mpush("rows", _this.defaultRowColumn(field));
                        });
                        header.append(add);
                        $rows = $('<ul></ul>');
                        _.each(this.mget("rows"), function(row, index) {
                          var $dtype, $field, $remove, $row, groupBy, order, sortBy, totals;
                          groupBy = $('<li class="bk-pivot-box-header">Group by:</li>');
                          $field = _this.renderFieldName(row.field);
                          $dtype = _this.renderDType(row.field);
                          $remove = _this.renderRemove("rows", row.field);
                          groupBy.append(["&nbsp;", $field, "&nbsp;", $dtype, $remove]);
                          order = $('<li>Order:&nbsp;</li>');
                          order.append(_this.renderOptions(["ascending", "descending"], row.order, function(value) {
                            return _this.mupdate("rows", function(rows) {
                              return rows[index].order = value;
                            });
                          }));
                          sortBy = $('<li>Sort by:&nbsp;</li>');
                          sortBy.append(_this.renderOptions([row.field], row.sort_by, function(value) {
                            return _this.mupdate("rows", function(rows) {
                              return rows[index].sort_by = value;
                            });
                          }));
                          totals = $('<li>Totals:&nbsp;</li>');
                          totals.append(_this.renderOptions(["on", "off"], (row.totals ? 0 : 1), function(value) {
                            return _this.mupdate("rows", function(rows) {
                              return rows[index].totals = value === "on" ? true : false;
                            });
                          }));
                          $row = $('<ul class="bk-pivot-box"></ul>');
                          $row.data('bk-field', row.field);
                          $row.append([groupBy, order, sortBy, totals]);
                          return $rows.append($row);
                        });
                        this.makeSortable("rows", $rows);
                        return el.append([header, $rows]);
                      };
                
                      PivotTableView.prototype.renderColumns = function() {
                        var $columns, add, el, header,
                          _this = this;
                        el = $("<li></li>");
                        header = $("<div>Columns</div>");
                        add = this.renderAdd(this.usedFields(), function(field) {
                          return _this.mpush("columns", _this.defaultRowColumn(field));
                        });
                        header.append(add);
                        $columns = $('<ul></ul>');
                        _.each(this.mget("columns"), function(column, index) {
                          var $column, $dtype, $field, $remove, groupBy, order, sortBy, totals;
                          groupBy = $('<li class="bk-pivot-box-header">Group by:</li>');
                          $field = _this.renderFieldName(column.field);
                          $dtype = _this.renderDType(column.field);
                          $remove = _this.renderRemove("columns", column.field);
                          groupBy.append(["&nbsp;", $field, "&nbsp;", $dtype, $remove]);
                          order = $('<li>Order:&nbsp;</li>');
                          order.append(_this.renderOptions(["ascending", "descending"], column.order, function(value) {
                            return _this.mupdate("columns", function(columns) {
                              return columns[index].order = value;
                            });
                          }));
                          sortBy = $('<li>Sort by:&nbsp;</li>');
                          sortBy.append(_this.renderOptions([column.field], column.sort_by, function(value) {
                            return _this.mupdate("columns", function(columns) {
                              return columns[index].sort_by = value;
                            });
                          }));
                          totals = $('<li>Totals:&nbsp;</li>');
                          totals.append(_this.renderOptions(["on", "off"], (column.totals ? 0 : 1), function(value) {
                            return _this.mupdate("columns", function(columns) {
                              return columns[index].totals = value === "on" ? true : false;
                            });
                          }));
                          $column = $('<ul class="bk-pivot-box"></ul>');
                          $column.data('bk-field', column.field);
                          $column.append([groupBy, order, sortBy, totals]);
                          return $columns.append($column);
                        });
                        this.makeSortable("columns", $columns);
                        return el.append([header, $columns]);
                      };
                
                      PivotTableView.prototype.defaultValue = function(field) {
                        return {
                          field: field,
                          aggregate: "count",
                          renderer: "default",
                          formatter: "none"
                        };
                      };
                
                      PivotTableView.prototype.renderValues = function() {
                        var $values, add, el, header,
                          _this = this;
                        el = $("<li></li>");
                        header = $("<div>Values</div>");
                        add = this.renderAdd([], function(field) {
                          return _this.mpush("values", _this.defaultValue(field));
                        });
                        header.append(add);
                        $values = $('<ul></ul>');
                        _.each(this.mget("values"), function(value, index) {
                          var $dtype, $field, $remove, $value, aggregate, display, formatter, renderer;
                          display = $('<li class="bk-pivot-box-header">Display:</li>');
                          $field = _this.renderFieldName(value.field);
                          $dtype = _this.renderDType(value.field);
                          $remove = _this.renderRemove("values", value.field);
                          display.append(["&nbsp;", $field, "&nbsp;", $dtype, $remove]);
                          aggregate = $('<li>Aggregate:&nbsp;</li>');
                          aggregate.append(_this.renderOptions(_this.model.aggregates, value.aggregate, function(aggregate) {
                            return _this.mupdate("values", function(values) {
                              return values[index].aggregate = aggregate;
                            });
                          }));
                          renderer = $('<li>Renderer:&nbsp;</li>');
                          renderer.append(_this.renderOptions(_this.model.renderers, value.renderer, function(renderer) {
                            return _this.mupdate("values", function(values) {
                              return values[index].renderer = renderer;
                            });
                          }));
                          formatter = $('<li>Formatter:&nbsp;</li>');
                          formatter.append(_this.renderOptions(_this.model.formatters, value.formatter, function(formatter) {
                            return _this.mupdate("values", function(values) {
                              return values[index].formatter = formatter;
                            });
                          }));
                          $value = $('<ul class="bk-pivot-box"></ul>');
                          $value.data('bk-field', value.field);
                          $value.append([display, aggregate, renderer, formatter]);
                          return $values.append($value);
                        });
                        this.makeSortable("values", $values);
                        return el.append([header, $values]);
                      };
                
                      PivotTableView.prototype.defaultFilter = function(field) {
                        return {
                          field: field
                        };
                      };
                
                      PivotTableView.prototype.renderFilters = function() {
                        var $filters, add, el, header,
                          _this = this;
                        el = $("<li></li>");
                        header = $("<div>Filters</div>");
                        add = this.renderAdd([], function(field) {
                          return _this.mpush("filters", _this.defaultFilter(field));
                        });
                        header.append(add);
                        $filters = $('<ul></ul>');
                        _.each(this.mget("filters"), function(filter) {
                          var $dtype, $field, $filter, $remove, display;
                          display = $('<li class="bk-pivot-box-header">Filter:</li>');
                          $field = _this.renderFieldName(filter.field);
                          $dtype = _this.renderDType(filter.field);
                          $remove = _this.renderRemove("filters", filter.field);
                          display.append(["&nbsp;", $field, "&nbsp;", $dtype, $remove]);
                          $filter = $('<ul class="bk-pivot-box"></ul>');
                          $filter.data('bk-field', filter.field);
                          $filter.append([display]);
                          return $filters.append($filter);
                        });
                        this.makeSortable("filters", $filters);
                        return el.append([header, $filters]);
                      };
                
                      PivotTableView.prototype.renderUpdate = function() {
                        var button, el, manual_update, update,
                          _this = this;
                        manual_update = this.mget("manual_update");
                        el = $("<li></li>");
                        update = $('<div>Update:&nbsp;</div>');
                        update.append(this.renderOptions(["Manual", "Automatic"], (manual_update ? 0 : 1), function(value) {
                          return _this.mset("manual_update", value === "Manual" ? true : false);
                        }));
                        el.append(update);
                        if (manual_update) {
                          button = $('<button type="button" class="bk-bs-btn bk-bs-btn-primary">Update</button>');
                          button.click(function(event) {
                            return _this.model.save();
                          });
                          el.append(button);
                        }
                        return el;
                      };
                
                      PivotTableView.prototype.renderDescription = function() {
                        return $('<div></div>').text(this.mget("description"));
                      };
                
                      PivotTableView.prototype.spanSize = function(arr, i, j) {
                        var len, noDraw, stop, x, _i, _j;
                        if (i !== 0) {
                          noDraw = true;
                          for (x = _i = 0; 0 <= j ? _i <= j : _i >= j; x = 0 <= j ? ++_i : --_i) {
                            if (arr[i - 1][x] !== arr[i][x]) {
                              noDraw = false;
                            }
                          }
                          if (noDraw) {
                            return -1;
                          }
                        }
                        len = 0;
                        while (i + len < arr.length) {
                          stop = false;
                          for (x = _j = 0; 0 <= j ? _j <= j : _j >= j; x = 0 <= j ? ++_j : --_j) {
                            if (arr[i][x] !== arr[i + len][x]) {
                              stop = true;
                            }
                          }
                          if (stop) {
                            break;
                          }
                          len++;
                        }
                        return len;
                      };
                
                      PivotTableView.prototype.getAggregator = function(rowKey, colKey) {
                        var col, data, row, value;
                        data = this.mget("data");
                        row = data.rows.indexOf(rowKey);
                        col = data.cols.indexOf(colKey);
                        if (row === -1) {
                          row = data.rows.length - 1;
                        }
                        if (col === -1) {
                          col = data.cols.length - 1;
                        }
                        if (row === -1 || col === -1) {
                          value = null;
                        } else {
                          value = data.values[row][col];
                        }
                        return {
                          value: (function() {
                            return value;
                          }),
                          format: (function(value) {
                            return "" + value;
                          })
                        };
                      };
                
                      PivotTableView.prototype.renderPivotTable = function() {
                        var aggregator, c, colAttrs, colKey, colKeys, i, j, r, result, rowAttrs, rowKey, rowKeys, th, totalAggregator, tr, txt, val, x;
                        rowAttrs = this.mget("rows");
                        colAttrs = this.mget("columns");
                        rowKeys = this.mget("data").rows;
                        colKeys = this.mget("data").cols;
                        result = $("<table class='bk-pivot-table pvtTable'>");
                        for (j in colAttrs) {
                          if (!__hasProp.call(colAttrs, j)) continue;
                          c = colAttrs[j];
                          tr = $("<tr>");
                          if (parseInt(j) === 0 && rowAttrs.length !== 0) {
                            tr.append($("<th>").attr("colspan", rowAttrs.length).attr("rowspan", colAttrs.length));
                          }
                          tr.append($("<th class='pvtAxisLabel'>").text(c.field));
                          for (i in colKeys) {
                            if (!__hasProp.call(colKeys, i)) continue;
                            colKey = colKeys[i];
                            x = this.spanSize(colKeys, parseInt(i), parseInt(j));
                            if (x !== -1) {
                              th = $("<th class='pvtColLabel'>").text(colKey[j]).attr("colspan", x);
                              if (parseInt(j) === colAttrs.length - 1 && rowAttrs.length !== 0) {
                                th.attr("rowspan", 2);
                              }
                              tr.append(th);
                            }
                          }
                          if (parseInt(j) === 0) {
                            tr.append($("<th class='pvtTotalLabel'>").text("Totals").attr("rowspan", colAttrs.length + (rowAttrs.length === 0 ? 0 : 1)));
                          }
                          result.append(tr);
                        }
                        if (rowAttrs.length !== 0) {
                          tr = $("<tr>");
                          for (i in rowAttrs) {
                            if (!__hasProp.call(rowAttrs, i)) continue;
                            r = rowAttrs[i];
                            tr.append($("<th class='pvtAxisLabel'>").text(r.field));
                          }
                          th = $("<th>");
                          if (colAttrs.length === 0) {
                            th.addClass("pvtTotalLabel").text("Totals");
                          }
                          tr.append(th);
                          result.append(tr);
                        }
                        for (i in rowKeys) {
                          if (!__hasProp.call(rowKeys, i)) continue;
                          rowKey = rowKeys[i];
                          tr = $("<tr>");
                          for (j in rowKey) {
                            if (!__hasProp.call(rowKey, j)) continue;
                            txt = rowKey[j];
                            x = this.spanSize(rowKeys, parseInt(i), parseInt(j));
                            if (x !== -1) {
                              th = $("<th class='pvtRowLabel'>").text(txt).attr("rowspan", x);
                              if (parseInt(j) === rowAttrs.length - 1 && colAttrs.length !== 0) {
                                th.attr("colspan", 2);
                              }
                              tr.append(th);
                            }
                          }
                          for (j in colKeys) {
                            if (!__hasProp.call(colKeys, j)) continue;
                            colKey = colKeys[j];
                            aggregator = this.getAggregator(rowKey, colKey);
                            val = aggregator.value();
                            tr.append($("<td class='pvtVal row" + i + " col" + j + "'>").text(aggregator.format(val)).data("value", val));
                          }
                          totalAggregator = this.getAggregator(rowKey, []);
                          val = totalAggregator.value();
                          tr.append($("<td class='pvtTotal rowTotal'>").text(totalAggregator.format(val)).data("value", val).data("for", "row" + i));
                          result.append(tr);
                        }
                        tr = $("<tr>");
                        th = $("<th class='pvtTotalLabel'>").text("Totals");
                        th.attr("colspan", rowAttrs.length + (colAttrs.length === 0 ? 0 : 1));
                        tr.append(th);
                        for (j in colKeys) {
                          if (!__hasProp.call(colKeys, j)) continue;
                          colKey = colKeys[j];
                          totalAggregator = this.getAggregator([], colKey);
                          val = totalAggregator.value();
                          tr.append($("<td class='pvtTotal colTotal'>").text(totalAggregator.format(val)).data("value", val).data("for", "col" + j));
                        }
                        totalAggregator = this.getAggregator([], []);
                        val = totalAggregator.value();
                        tr.append($("<td class='pvtGrandTotal'>").text(totalAggregator.format(val)).data("value", val));
                        result.append(tr);
                        return result;
                      };
                
                      return PivotTableView;
                
                    })(ContinuumView.View);
                    PivotTable = (function(_super) {
                      __extends(PivotTable, _super);
                
                      function PivotTable() {
                        _ref1 = PivotTable.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      PivotTable.prototype.default_view = PivotTableView;
                
                      PivotTable.prototype.type = "PivotTable";
                
                      PivotTable.prototype.defaults = {
                        title: "Pivot Table",
                        description: "",
                        source: null,
                        data: {},
                        fields: [],
                        rows: [],
                        columns: [],
                        values: [],
                        filters: [],
                        manual_update: true
                      };
                
                      PivotTable.prototype.aggregates = ["count", "counta", "countunique", "average", "max", "min", "median", "sum", "product", "stdev", "stdevp", "var", "varp"];
                
                      PivotTable.prototype.renderers = ["default", "heatmap"];
                
                      PivotTable.prototype.formatters = ["none"];
                
                      PivotTable.prototype.mset = function() {
                        if (this.get("manual_update")) {
                          return this.set.apply(this, arguments);
                        } else {
                          return this.save.apply(this, arguments);
                        }
                      };
                
                      return PivotTable;
                
                    })(HasParent);
                    PivotTables = (function(_super) {
                      __extends(PivotTables, _super);
                
                      function PivotTables() {
                        _ref2 = PivotTables.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      PivotTables.prototype.model = PivotTable;
                
                      return PivotTables;
                
                    })(Backbone.Collection);
                    return {
                      Model: PivotTable,
                      Collection: new PivotTables(),
                      View: PivotTableView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=pivot_table.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('widget/pandas/ipython_remote_data',["backbone", "common/has_properties"], function(Backbone, HasProperties) {
                    var IPythonRemoteData, IPythonRemoteDatas, _ref, _ref1;
                    IPythonRemoteData = (function(_super) {
                      __extends(IPythonRemoteData, _super);
                
                      function IPythonRemoteData() {
                        _ref = IPythonRemoteData.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      IPythonRemoteData.prototype.type = 'IPythonRemoteData';
                
                      IPythonRemoteData.prototype.defaults = {
                        computed_columns: []
                      };
                
                      return IPythonRemoteData;
                
                    })(HasProperties);
                    IPythonRemoteDatas = (function(_super) {
                      __extends(IPythonRemoteDatas, _super);
                
                      function IPythonRemoteDatas() {
                        _ref1 = IPythonRemoteDatas.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      IPythonRemoteDatas.prototype.model = IPythonRemoteData;
                
                      return IPythonRemoteDatas;
                
                    })(Backbone.Collection);
                    return {
                      "Model": IPythonRemoteData,
                      "Collection": new IPythonRemoteDatas()
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=ipython_remote_data.js.map
                */;
                define('widget/pandas/pandas_pivot_template',[],function(){
                  var template = function(__obj) {
                  var _safe = function(value) {
                    if (typeof value === 'undefined' && value == null)
                      value = '';
                    var result = new String(value);
                    result.ecoSafe = true;
                    return result;
                  };
                  return (function() {
                    var __out = [], __self = this, _print = function(value) {
                      if (typeof value !== 'undefined' && value != null)
                        __out.push(value.ecoSafe ? value : __self.escape(value));
                    }, _capture = function(callback) {
                      var out = __out, result;
                      __out = [];
                      callback.call(this);
                      result = __out.join('');
                      __out = out;
                      return _safe(result);
                    };
                    (function() {
                      var column, computed_column, idx, _i, _j, _k, _l, _len, _len1, _len2, _len3, _ref, _ref1, _ref2, _ref3;
                    
                      _print(_safe('<form class="form-inline tablecontrolform">\n<label>Transform </label>:  <select class="tablecontrolstate">\n    <option value="groupby" selected="selected">Group By</option>\n    <option value="filtering">Filtering</option>\n    <option value="computed">Computed Columns</option>\n  </select>\n  <br/>\n  '));
                    
                      if (this.tablecontrolstate === 'groupby') {
                        _print(_safe('\n  <label>GroupBy </label>\n  <input type="text" class="pandasgroup" value="'));
                        _print(this.group);
                        _print(_safe('"/>\n  <label>Aggregation</label>\n  <select class="pandasagg">\n    <option value="sum">sum</option>\n    <option value="mean">mean</option>\n    <option value="std">std</option>\n    <option value="max">max</option>\n    <option value="min">min</option>\n  </select>\n  '));
                      }
                    
                      _print(_safe('\n  '));
                    
                      if (this.tablecontrolstate === 'filtering') {
                        _print(_safe('\n  <label class="checkbox" >\n    '));
                        if (this.filterselected) {
                          _print(_safe('\n    <input type="checkbox" class="filterselected" checked="checked"/>\n    '));
                        } else {
                          _print(_safe('\n    <input type="checkbox" class="filterselected"/>\n    '));
                        }
                        _print(_safe('\n    Filter Selection\n  </label>\n  <input type="button" class="clearselected btn btn-mini" value="Clear Selection"/>\n  <label>\n    Search\n  </label>\n  <input type="text" class="search input-large"/>\n  '));
                      }
                    
                      _print(_safe('\n  \n  '));
                    
                      if (this.tablecontrolstate === 'computed') {
                        _print(_safe('\n  <table class="table">\n    <thead>\n      <th>\n        Name\n      </th>\n      <th>\n        Value\n      </th>\n      <th>\n      </th>\n    </thead>\n    '));
                        _ref = this.computed_columns;
                        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
                          computed_column = _ref[_i];
                          _print(_safe('\n    <tr>\n      <td>\n        '));
                          _print(computed_column.name);
                          _print(_safe('\n      </td>\n      <td>\n        '));
                          _print(computed_column.code);
                          _print(_safe('\n      </td>\n      <td>\n        <a class="column_del" \n           name="'));
                          _print(computed_column.name);
                          _print(_safe('" href="#">[delete]</a>\n      </td>\n    </tr>\n    '));
                        }
                        _print(_safe('\n    <tr>\n      <td>\n        <input type="text" class="computedname input-mini"/>\n      </td>\n      <td>\n        <input type="text" class="computedtxtbox input-medium"/>\n      </td>\n      <td>\n      </td>\n    </tr>\n  </table>\n  '));
                      }
                    
                      _print(_safe('\n  \n</form>\n\n<table class="bokehdatatable table table-bordered"\n'));
                    
                      if (this.width) {
                        _print(_safe('\n       style="max-height:'));
                        _print(this.height);
                        _print(_safe('px;max-width:'));
                        _print(this.width);
                        _print(_safe('px"\n'));
                      } else {
                        _print(_safe('\n       style="max-height:'));
                        _print(this.height);
                        _print(_safe('px"\n'));
                      }
                    
                      _print(_safe('\n       >\n  <thead>\n    '));
                    
                      if (this.counts) {
                        _print(_safe('\n    <th>counts</th>\n    '));
                      }
                    
                      _print(_safe('\n    <th>index</th>\n    '));
                    
                      _ref1 = this.columns;
                      for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
                        column = _ref1[_j];
                        _print(_safe('\n    '));
                        if (!this.skip[column]) {
                          _print(_safe('\n    <th><a class="pandascolumn">'));
                          _print(column);
                          _print(_safe('</a>\n      \n      '));
                          if (this.sort_ascendings[column] === true) {
                            _print(_safe('\n      <i class="icon-caret-up"></i>\n      '));
                          } else if (this.sort_ascendings[column] === false) {
                            _print(_safe('\n      <i class="icon-caret-down"></i>\n      '));
                          }
                          _print(_safe('\n      \n      '));
                        }
                        _print(_safe('\n    </th>\n    '));
                      }
                    
                      _print(_safe('\n  </thead>\n  '));
                    
                      _ref2 = _.range(this.length);
                      for (_k = 0, _len2 = _ref2.length; _k < _len2; _k++) {
                        idx = _ref2[_k];
                        _print(_safe('\n  <tr class="pandasrow" rownum="'));
                        _print(idx);
                        _print(_safe('">\n    '));
                        if (this.selected && this.selected[idx]) {
                          _print(_safe('\n      <td style="background-color:'));
                          _print(this.colors[idx]);
                          _print(_safe('"> \n        '));
                          _print(this.selected[idx]);
                          _print(_safe('/'));
                          _print(this.counts[idx]);
                          _print(_safe('\n      </td>      \n    '));
                        } else {
                          _print(_safe('\n      <td> '));
                          _print(this.counts[idx]);
                          _print(_safe(' </td>\n    '));
                        }
                        _print(_safe('\n    <td> '));
                        _print(this.index[idx]);
                        _print(_safe(' </td>\n    '));
                        _ref3 = this.columns;
                        for (_l = 0, _len3 = _ref3.length; _l < _len3; _l++) {
                          column = _ref3[_l];
                          _print(_safe('\n      '));
                          if (!this.skip[column]) {
                            _print(_safe('    \n      <td> '));
                            _print(this.data[column][idx]);
                            _print(_safe(' </td>\n      '));
                          }
                          _print(_safe('\n    '));
                        }
                        _print(_safe('\n  </tr>\n  '));
                      }
                    
                      _print(_safe('\n</table>\n<form>\n  <center>\n    <div class="btn-group pagination">\n      <button class="btn btn-mini">First</button>\n      <button class="btn btn-mini">Previous</button>\n      <button class="btn btn-mini">Next</button>\n      <button class="btn btn-mini">Last</button>  \n    </div>\n    <div class="paginatedisplay">\n      Show <input type="text" class="pandassize" value="'));
                    
                      _print(this.length);
                    
                      _print(_safe('"> records\n      From <input type="text" class="pandasoffset" value="'));
                    
                      _print(this.offset);
                    
                      _print(_safe('">\n      to '));
                    
                      _print(this.length + this.offset);
                    
                      _print(_safe(' - \n      Total : '));
                    
                      _print(this.totallength);
                    
                      _print(_safe('\n    </div>\n  </center>\n</form>\n'));
                    
                    }).call(this);
                    
                    return __out.join('');
                  }).call((function() {
                    var obj = {
                      escape: function(value) {
                        return ('' + value)
                          .replace(/&/g, '&amp;')
                          .replace(/</g, '&lt;')
                          .replace(/>/g, '&gt;')
                          .replace(/"/g, '&quot;');
                      },
                      safe: _safe
                    }, key;
                    for (key in __obj) obj[key] = __obj[key];
                    return obj;
                  })());
                };
                  return template;
                });
                
                (function() {
                  var __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
                    __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('widget/pandas/pandas_pivot_table',["underscore", "backbone", "common/has_parent", "common/continuum_view", "./pandas_pivot_template"], function(_, Backbone, HasParent, ContinuumView, pandaspivot) {
                    var ENTER, PandasPivotTable, PandasPivotTables, PandasPivotView, _ref, _ref1, _ref2;
                    ENTER = 13;
                    PandasPivotView = (function(_super) {
                      __extends(PandasPivotView, _super);
                
                      function PandasPivotView() {
                        this.colors = __bind(this.colors, this);
                        this.pandasend = __bind(this.pandasend, this);
                        this.pandasnext = __bind(this.pandasnext, this);
                        this.pandasback = __bind(this.pandasback, this);
                        this.pandasbeginning = __bind(this.pandasbeginning, this);
                        this.toggle_more_controls = __bind(this.toggle_more_controls, this);
                        this.sort = __bind(this.sort, this);
                        this.rowclick = __bind(this.rowclick, this);
                        this.toggle_filterselected = __bind(this.toggle_filterselected, this);
                        this.clearselected = __bind(this.clearselected, this);
                        this.computedtxtbox = __bind(this.computedtxtbox, this);
                        this.column_del = __bind(this.column_del, this);
                        this.search = __bind(this.search, this);
                        _ref = PandasPivotView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      PandasPivotView.prototype.template = pandaspivot;
                
                      PandasPivotView.prototype.initialize = function(options) {
                        PandasPivotView.__super__.initialize.call(this, options);
                        this.listenTo(this.model, 'destroy', this.remove);
                        this.listenTo(this.model, 'change', this.render);
                        return this.render();
                      };
                
                      PandasPivotView.prototype.events = {
                        "keyup .pandasgroup": 'pandasgroup',
                        "keyup .pandasoffset": 'pandasoffset',
                        "keyup .pandassize": 'pandassize',
                        "change .pandasagg": 'pandasagg',
                        "change .tablecontrolstate": 'tablecontrolstate',
                        "click .pandasbeginning": 'pandasbeginning',
                        "click .pandasback": 'pandasback',
                        "click .pandasnext": 'pandasnext',
                        "click .pandasend": 'pandasend',
                        "click .controlsmore": 'toggle_more_controls',
                        "click .pandascolumn": 'sort',
                        "click .pandasrow": 'rowclick',
                        "click .filterselected": 'toggle_filterselected',
                        "click .clearselected": 'clearselected',
                        "keyup .computedtxtbox": 'computedtxtbox',
                        "click .column_del": "column_del",
                        "keyup .search": 'search'
                      };
                
                      PandasPivotView.prototype.search = function(e) {
                        var code, source;
                        if (e.keyCode === ENTER) {
                          code = $(e.currentTarget).val();
                          source = this.model.get('source');
                          source.rpc('search', [code]);
                          return e.preventDefault();
                        }
                      };
                
                      PandasPivotView.prototype.column_del = function(e) {
                        var computed_columns, name, old, source;
                        source = this.model.get('source');
                        old = source.get('computed_columns');
                        name = $(e.currentTarget).attr('name');
                        computed_columns = _.filter(old, function(x) {
                          return x.name !== name;
                        });
                        return source.rpc('set_computed_columns', [computed_columns]);
                      };
                
                      PandasPivotView.prototype.computedtxtbox = function(e) {
                        var code, name, old, source;
                        if (e.keyCode === ENTER) {
                          name = this.$('.computedname').val();
                          code = this.$('.computedtxtbox').val();
                          source = this.model.get('source');
                          old = source.get('computed_columns');
                          old.push({
                            name: name,
                            code: code
                          });
                          source.rpc('set_computed_columns', [old]);
                          return e.preventDefault();
                        }
                      };
                
                      PandasPivotView.prototype.clearselected = function(e) {
                        return this.model.rpc('setselect', [[]]);
                      };
                
                      PandasPivotView.prototype.toggle_filterselected = function(e) {
                        var checked;
                        checked = this.$('.filterselected').is(":checked");
                        this.mset('filterselected', checked);
                        return this.model.save();
                      };
                
                      PandasPivotView.prototype.rowclick = function(e) {
                        var count, counts, idx, index, ratio, ratios, resp, rownum, select, selected;
                        counts = this.counts();
                        selected = this.selected();
                        ratios = (function() {
                          var _i, _len, _ref1, _ref2, _results;
                          _ref1 = _.zip(selected, counts);
                          _results = [];
                          for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
                            _ref2 = _ref1[_i], select = _ref2[0], count = _ref2[1];
                            _results.push(select / count);
                          }
                          return _results;
                        })();
                        selected = (function() {
                          var _i, _len, _results;
                          _results = [];
                          for (idx = _i = 0, _len = ratios.length; _i < _len; idx = ++_i) {
                            ratio = ratios[idx];
                            if (ratio > 0.5) {
                              _results.push(idx);
                            }
                          }
                          return _results;
                        })();
                        rownum = Number($(e.currentTarget).attr('rownum'));
                        index = selected.indexOf(rownum);
                        if (index === -1) {
                          resp = this.model.rpc('select', [[rownum]]);
                        } else {
                          resp = this.model.rpc('deselect', [[rownum]]);
                        }
                        return null;
                      };
                
                      PandasPivotView.prototype.sort = function(e) {
                        var colname;
                        colname = $(e.currentTarget).text();
                        return this.model.toggle_column_sort(colname);
                      };
                
                      PandasPivotView.prototype.toggle_more_controls = function() {
                        if (this.controls_hide) {
                          this.controls_hide = false;
                        } else {
                          this.controls_hide = true;
                        }
                        return this.render();
                      };
                
                      PandasPivotView.prototype.pandasbeginning = function() {
                        return this.model.go_beginning();
                      };
                
                      PandasPivotView.prototype.pandasback = function() {
                        return this.model.go_back();
                      };
                
                      PandasPivotView.prototype.pandasnext = function() {
                        return this.model.go_forward();
                      };
                
                      PandasPivotView.prototype.pandasend = function() {
                        return this.model.go_end();
                      };
                
                      PandasPivotView.prototype.pandasoffset = function(e) {
                        var offset;
                        if (e.keyCode === ENTER) {
                          offset = this.$el.find('.pandasoffset').val();
                          offset = Number(offset);
                          if (_.isNaN(offset)) {
                            offset = this.model.defaults.offset;
                          }
                          this.model.save('offset', offset, {
                            wait: true
                          });
                          return e.preventDefault();
                        }
                      };
                
                      PandasPivotView.prototype.pandassize = function(e) {
                        var size, sizetxt;
                        if (e.keyCode === ENTER) {
                          sizetxt = this.$el.find('.pandassize').val();
                          size = Number(sizetxt);
                          if (_.isNaN(size) || sizetxt === "") {
                            size = this.model.defaults.length;
                          }
                          if (size + this.mget('offset') > this.mget('maxlength')) {
                            size = this.mget('maxlength') - this.mget('offset');
                          }
                          this.model.save('length', size, {
                            wait: true
                          });
                          return e.preventDefault();
                        }
                      };
                
                      PandasPivotView.prototype.tablecontrolstate = function() {
                        return this.mset('tablecontrolstate', this.$('.tablecontrolstate').val());
                      };
                
                      PandasPivotView.prototype.pandasagg = function() {
                        return this.model.save('agg', this.$el.find('.pandasagg').val(), {
                          'wait': true
                        });
                      };
                
                      PandasPivotView.prototype.fromcsv = function(str) {
                        if (!str) {
                          return [];
                        }
                        return _.map(str.split(","), function(x) {
                          return x.trim();
                        });
                      };
                
                      PandasPivotView.prototype.pandasgroup = function(e) {
                        if (e.keyCode === ENTER) {
                          this.model.set({
                            group: this.fromcsv(this.$el.find(".pandasgroup").val()),
                            offset: 0
                          });
                          this.model.save();
                          e.preventDefault();
                          return false;
                        }
                      };
                
                      PandasPivotView.prototype.counts = function() {
                        return this.mget('tabledata').data._counts;
                      };
                
                      PandasPivotView.prototype.selected = function() {
                        return this.mget('tabledata').data._selected;
                      };
                
                      PandasPivotView.prototype.colors = function() {
                        var counts, selected;
                        counts = this.counts();
                        selected = this.selected();
                        if (counts && selected) {
                          return _.map(_.zip(counts, selected), function(temp) {
                            var alpha, count;
                            count = temp[0], selected = temp[1];
                            alpha = 0.3 * selected / count;
                            return "rgba(0,0,255," + alpha + ")";
                          });
                        } else {
                          return null;
                        }
                      };
                
                      PandasPivotView.prototype.render = function() {
                        var colors, group, html, obj, sort, sort_ascendings, source, template_data, _i, _len, _ref1;
                        group = this.mget('group');
                        if (_.isArray(group)) {
                          group = group.join(",");
                        }
                        sort = this.mget('sort');
                        if (_.isArray(sort)) {
                          sort = sort.join(",");
                        }
                        colors = this.colors();
                        sort_ascendings = {};
                        _ref1 = this.mget('sort');
                        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
                          obj = _ref1[_i];
                          sort_ascendings[obj['column']] = obj['ascending'];
                        }
                        source = this.mget('source');
                        template_data = {
                          skip: {
                            _counts: true,
                            _selected: true,
                            index: true
                          },
                          tablecontrolstate: this.mget('tablecontrolstate'),
                          computed_columns: this.mget('source').get('computed_columns'),
                          columns: this.mget('tabledata').column_names,
                          data: this.mget('tabledata').data,
                          group: group,
                          sort_ascendings: sort_ascendings,
                          height: this.mget('height'),
                          width: this.mget('width'),
                          offset: this.mget('offset'),
                          length: this.model.length(),
                          filterselected: this.mget('filterselected'),
                          totallength: this.mget('totallength'),
                          counts: this.mget('tabledata').data._counts,
                          selected: this.mget('tabledata').data._selected,
                          controls_hide: this.controls_hide,
                          colors: colors,
                          index: this.mget('tabledata').data.index
                        };
                        this.$el.empty();
                        html = this.template(template_data);
                        this.$el.html(html);
                        this.$(".pandasagg").find("option[value=\"" + (this.mget('agg')) + "\"]").attr('selected', 'selected');
                        this.$(".tablecontrolstate").find("option[value=\"" + (this.mget('tablecontrolstate')) + "\"]").attr('selected', 'selected');
                        return this.$el.addClass("bokehtable");
                      };
                
                      return PandasPivotView;
                
                    })(ContinuumView.View);
                    PandasPivotTable = (function(_super) {
                      __extends(PandasPivotTable, _super);
                
                      function PandasPivotTable() {
                        this.toggle_column_sort = __bind(this.toggle_column_sort, this);
                        _ref1 = PandasPivotTable.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      PandasPivotTable.prototype.type = 'PandasPivotTable';
                
                      PandasPivotTable.prototype.initialize = function(attrs, options) {
                        var _this = this;
                        PandasPivotTable.__super__.initialize.call(this, attrs, options);
                        return this.throttled_fetch = _.throttle((function() {
                          return _this.fetch();
                        }), 500);
                      };
                
                      PandasPivotTable.prototype.fetch = function(options) {
                        return PandasPivotTable.__super__.fetch.call(this, options);
                      };
                
                      PandasPivotTable.prototype.length = function() {
                        return _.values(this.get('tabledata').data)[0].length;
                      };
                
                      PandasPivotTable.prototype.toggle_column_sort = function(colname) {
                        var sort, sorting;
                        sorting = this.get('sort');
                        this.unset('sort', {
                          'silent': true
                        });
                        sort = _.filter(sorting, function(x) {
                          return x['column'] === colname;
                        });
                        if (sort.length > 0) {
                          sort = sort[0];
                        } else {
                          sorting = _.clone(sorting);
                          sorting.push({
                            column: colname,
                            ascending: true
                          });
                          this.save('sort', sorting, {
                            'wait': true
                          });
                          return;
                        }
                        if (sort['ascending']) {
                          sort['ascending'] = false;
                          this.save('sort', sorting, {
                            'wait': true
                          });
                        } else {
                          sorting = _.filter(sorting, function(x) {
                            return x['column'] !== colname;
                          });
                          this.save('sort', sorting, {
                            'wait': true
                          });
                        }
                      };
                
                      PandasPivotTable.prototype.go_beginning = function() {
                        this.set('offset', 0);
                        return this.save();
                      };
                
                      PandasPivotTable.prototype.go_back = function() {
                        var offset;
                        offset = this.get('offset');
                        offset = offset - this.length();
                        if (offset < 0) {
                          offset = 0;
                        }
                        this.set('offset', offset);
                        return this.save();
                      };
                
                      PandasPivotTable.prototype.go_forward = function() {
                        var maxoffset, offset;
                        offset = this.get('offset');
                        offset = offset + this.length();
                        maxoffset = this.get('maxlength') - this.length();
                        if (offset > maxoffset) {
                          offset = maxoffset;
                        }
                        this.set('offset', offset);
                        return this.save();
                      };
                
                      PandasPivotTable.prototype.go_end = function() {
                        var maxoffset;
                        maxoffset = this.get('maxlength') - this.length();
                        this.set('offset', maxoffset);
                        return this.save();
                      };
                
                      PandasPivotTable.prototype.default_view = PandasPivotView;
                
                      PandasPivotTable.prototype.defaults = function() {
                        return {
                          sort: [],
                          group: [],
                          agg: 'sum',
                          offset: 0,
                          length: 100,
                          maxlength: 1000,
                          tabledata: null,
                          columns_names: [],
                          width: null,
                          tablecontrolstate: 'groupby'
                        };
                      };
                
                      return PandasPivotTable;
                
                    })(HasParent);
                    PandasPivotTables = (function(_super) {
                      __extends(PandasPivotTables, _super);
                
                      function PandasPivotTables() {
                        _ref2 = PandasPivotTables.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      PandasPivotTables.prototype.model = PandasPivotTable;
                
                      return PandasPivotTables;
                
                    })(Backbone.Collection);
                    return {
                      "Model": PandasPivotTable,
                      "Collection": new PandasPivotTables(),
                      "View": PandasPivotView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=pandas_pivot_table.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('widget/pandas/pandas_plot_source',["backbone", "source/column_data_source"], function(Backbone, ColumnDataSource) {
                    var PandasPlotSource, PandasPlotSources, _ref, _ref1;
                    PandasPlotSource = (function(_super) {
                      __extends(PandasPlotSource, _super);
                
                      function PandasPlotSource() {
                        _ref = PandasPlotSource.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      PandasPlotSource.prototype.type = 'PandasPlotSource';
                
                      return PandasPlotSource;
                
                    })(ColumnDataSource.Model);
                    PandasPlotSources = (function(_super) {
                      __extends(PandasPlotSources, _super);
                
                      function PandasPlotSources() {
                        _ref1 = PandasPlotSources.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      PandasPlotSources.prototype.model = PandasPlotSource;
                
                      return PandasPlotSources;
                
                    })(Backbone.Collection);
                    return {
                      "Model": PandasPlotSource,
                      "Collection": new PandasPlotSources()
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=pandas_plot_source.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('widget/paragraph',["common/has_parent", "common/continuum_view", "backbone"], function(HasParent, continuum_view, Backbone) {
                    var ContinuumView, Paragraph, ParagraphView, Paragraphs, paragraphs, _ref, _ref1, _ref2;
                    ContinuumView = continuum_view.View;
                    ParagraphView = (function(_super) {
                      __extends(ParagraphView, _super);
                
                      function ParagraphView() {
                        _ref = ParagraphView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      ParagraphView.prototype.tagName = "p";
                
                      ParagraphView.prototype.initialize = function(options) {
                        ParagraphView.__super__.initialize.call(this, options);
                        this.render();
                        return this.listenTo(this.model, 'change', this.render);
                      };
                
                      ParagraphView.prototype.render = function() {
                        if (this.mget('height')) {
                          this.$el.height(this.mget('height'));
                        }
                        if (this.mget('width')) {
                          this.$el.width(this.mget('width'));
                        }
                        return this.$el.text(this.mget('text'));
                      };
                
                      return ParagraphView;
                
                    })(ContinuumView);
                    Paragraph = (function(_super) {
                      __extends(Paragraph, _super);
                
                      function Paragraph() {
                        _ref1 = Paragraph.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      Paragraph.prototype.type = "Paragraph";
                
                      Paragraph.prototype.default_view = ParagraphView;
                
                      Paragraph.prototype.defaults = function() {
                        return {
                          'text': ''
                        };
                      };
                
                      return Paragraph;
                
                    })(HasParent);
                    Paragraphs = (function(_super) {
                      __extends(Paragraphs, _super);
                
                      function Paragraphs() {
                        _ref2 = Paragraphs.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      Paragraphs.prototype.model = Paragraph;
                
                      return Paragraphs;
                
                    })(Backbone.Collection);
                    paragraphs = new Paragraphs();
                    return {
                      "Model": Paragraph,
                      "Collection": paragraphs,
                      "View": ParagraphView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=paragraph.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('widget/hbox',["common/has_parent", "common/continuum_view", "common/build_views", "backbone"], function(HasParent, continuum_view, build_views, Backbone) {
                    var ContinuumView, HBox, HBoxView, HBoxes, hboxes, _ref, _ref1, _ref2;
                    ContinuumView = continuum_view.View;
                    HBoxView = (function(_super) {
                      __extends(HBoxView, _super);
                
                      function HBoxView() {
                        _ref = HBoxView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      HBoxView.prototype.tag = "div";
                
                      HBoxView.prototype.attributes = {
                        "class": "bk-hbox"
                      };
                
                      HBoxView.prototype.initialize = function(options) {
                        HBoxView.__super__.initialize.call(this, options);
                        this.views = {};
                        this.render();
                        return this.listenTo(this.model, 'change', this.render);
                      };
                
                      HBoxView.prototype.render = function() {
                        var child, children, key, val, _i, _len, _ref1, _results;
                        children = this.mget('children');
                        build_views(this.views, children);
                        _ref1 = this.views;
                        for (key in _ref1) {
                          if (!__hasProp.call(_ref1, key)) continue;
                          val = _ref1[key];
                          val.$el.detach();
                        }
                        this.$el.empty();
                        _results = [];
                        for (_i = 0, _len = children.length; _i < _len; _i++) {
                          child = children[_i];
                          _results.push(this.$el.append(this.views[child.id].$el));
                        }
                        return _results;
                      };
                
                      return HBoxView;
                
                    })(ContinuumView);
                    HBox = (function(_super) {
                      __extends(HBox, _super);
                
                      function HBox() {
                        _ref1 = HBox.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      HBox.prototype.type = "HBox";
                
                      HBox.prototype.default_view = HBoxView;
                
                      HBox.prototype.defaults = function() {
                        return {
                          'children': []
                        };
                      };
                
                      return HBox;
                
                    })(HasParent);
                    HBoxes = (function(_super) {
                      __extends(HBoxes, _super);
                
                      function HBoxes() {
                        _ref2 = HBoxes.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      HBoxes.prototype.model = HBox;
                
                      return HBoxes;
                
                    })(Backbone.Collection);
                    hboxes = new HBoxes();
                    return {
                      "Model": HBox,
                      "Collection": hboxes,
                      "View": HBoxView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=hbox.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('widget/vbox',["common/has_parent", "common/continuum_view", "common/build_views", "backbone"], function(HasParent, continuum_view, build_views, Backbone) {
                    var ContinuumView, VBox, VBoxView, VBoxes, vboxes, _ref, _ref1, _ref2;
                    ContinuumView = continuum_view.View;
                    VBoxView = (function(_super) {
                      __extends(VBoxView, _super);
                
                      function VBoxView() {
                        _ref = VBoxView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      VBoxView.prototype.tag = "div";
                
                      VBoxView.prototype.attributes = {
                        "class": "bk-vbox"
                      };
                
                      VBoxView.prototype.initialize = function(options) {
                        VBoxView.__super__.initialize.call(this, options);
                        this.views = {};
                        this.render();
                        return this.listenTo(this.model, 'change', this.render);
                      };
                
                      VBoxView.prototype.render = function() {
                        var child, children, key, val, _i, _len, _ref1, _results;
                        children = this.mget('children');
                        build_views(this.views, children);
                        _ref1 = this.views;
                        for (key in _ref1) {
                          if (!__hasProp.call(_ref1, key)) continue;
                          val = _ref1[key];
                          val.$el.detach();
                        }
                        this.$el.empty();
                        _results = [];
                        for (_i = 0, _len = children.length; _i < _len; _i++) {
                          child = children[_i];
                          _results.push(this.$el.append(this.views[child.id].$el));
                        }
                        return _results;
                      };
                
                      return VBoxView;
                
                    })(ContinuumView);
                    VBox = (function(_super) {
                      __extends(VBox, _super);
                
                      function VBox() {
                        _ref1 = VBox.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      VBox.prototype.type = "VBox";
                
                      VBox.prototype.default_view = VBoxView;
                
                      VBox.prototype.defaults = function() {
                        return {
                          'children': []
                        };
                      };
                
                      return VBox;
                
                    })(HasParent);
                    VBoxes = (function(_super) {
                      __extends(VBoxes, _super);
                
                      function VBoxes() {
                        _ref2 = VBoxes.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      VBoxes.prototype.model = VBox;
                
                      return VBoxes;
                
                    })(Backbone.Collection);
                    vboxes = new VBoxes();
                    return {
                      "Model": VBox,
                      "Collection": vboxes,
                      "View": VBoxView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=vbox.js.map
                */;
                define('widget/textinputtemplate',[],function(){
                  var template = function(__obj) {
                  var _safe = function(value) {
                    if (typeof value === 'undefined' && value == null)
                      value = '';
                    var result = new String(value);
                    result.ecoSafe = true;
                    return result;
                  };
                  return (function() {
                    var __out = [], __self = this, _print = function(value) {
                      if (typeof value !== 'undefined' && value != null)
                        __out.push(value.ecoSafe ? value : __self.escape(value));
                    }, _capture = function(callback) {
                      var out = __out, result;
                      __out = [];
                      callback.call(this);
                      result = __out.join('');
                      __out = out;
                      return _safe(result);
                    };
                    (function() {
                      _print(_safe('<label for="'));
                    
                      _print(this.id);
                    
                      _print(_safe('"> '));
                    
                      _print(this.title);
                    
                      _print(_safe(' </label>\n<input class="bk-widget-form-input" type="text" id="'));
                    
                      _print(this.id);
                    
                      _print(_safe('" name="'));
                    
                      _print(this.name);
                    
                      _print(_safe('" value="'));
                    
                      _print(this.value);
                    
                      _print(_safe('"/>\n'));
                    
                    }).call(this);
                    
                    return __out.join('');
                  }).call((function() {
                    var obj = {
                      escape: function(value) {
                        return ('' + value)
                          .replace(/&/g, '&amp;')
                          .replace(/</g, '&lt;')
                          .replace(/>/g, '&gt;')
                          .replace(/"/g, '&quot;');
                      },
                      safe: _safe
                    }, key;
                    for (key in __obj) obj[key] = __obj[key];
                    return obj;
                  })());
                };
                  return template;
                });
                
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('widget/textinput',["common/has_parent", "common/continuum_view", "common/build_views", "backbone", "./textinputtemplate"], function(HasParent, continuum_view, build_views, Backbone, template) {
                    var ContinuumView, TextInput, TextInputView, TextInputs, textinputs, _ref, _ref1, _ref2;
                    ContinuumView = continuum_view.View;
                    TextInputView = (function(_super) {
                      __extends(TextInputView, _super);
                
                      function TextInputView() {
                        _ref = TextInputView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      TextInputView.prototype.tagName = "div";
                
                      TextInputView.prototype.attributes = {
                        "class": "bk-widget-form-group"
                      };
                
                      TextInputView.prototype.template = template;
                
                      TextInputView.prototype.events = {
                        "change input": "change_input"
                      };
                
                      TextInputView.prototype.change_input = function() {
                        this.mset('value', this.$('input').val());
                        this.model.save();
                        return console.log('set', this.model.attributes);
                      };
                
                      TextInputView.prototype.initialize = function(options) {
                        TextInputView.__super__.initialize.call(this, options);
                        this.render();
                        return this.listenTo(this.model, 'change', this.render);
                      };
                
                      TextInputView.prototype.render = function() {
                        this.$el.html(this.template(this.model.attributes));
                        return this;
                      };
                
                      return TextInputView;
                
                    })(ContinuumView);
                    TextInput = (function(_super) {
                      __extends(TextInput, _super);
                
                      function TextInput() {
                        _ref1 = TextInput.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      TextInput.prototype.type = "TextInput";
                
                      TextInput.prototype.default_view = TextInputView;
                
                      TextInput.prototype.defaults = function() {
                        var defaults;
                        defaults = {
                          name: "",
                          value: "",
                          title: ""
                        };
                        return defaults;
                      };
                
                      return TextInput;
                
                    })(HasParent);
                    TextInputs = (function(_super) {
                      __extends(TextInputs, _super);
                
                      function TextInputs() {
                        _ref2 = TextInputs.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      TextInputs.prototype.model = TextInput;
                
                      return TextInputs;
                
                    })(Backbone.Collection);
                    textinputs = new TextInputs();
                    return {
                      Model: TextInput,
                      Collection: textinputs
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=textinput.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('widget/vboxmodelform',["common/has_parent", "common/continuum_view", "common/build_views", "backbone"], function(HasParent, continuum_view, build_views, Backbone) {
                    var ContinuumView, VBoxModelForm, VBoxModelFormView, VBoxModelFormes, vboxmodelformes, _ref, _ref1, _ref2;
                    ContinuumView = continuum_view.View;
                    VBoxModelFormView = (function(_super) {
                      __extends(VBoxModelFormView, _super);
                
                      function VBoxModelFormView() {
                        _ref = VBoxModelFormView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      VBoxModelFormView.prototype.tagName = "form";
                
                      VBoxModelFormView.prototype.attributes = {
                        "class": "bk-widget-form",
                        role: "form"
                      };
                
                      VBoxModelFormView.prototype.initialize = function(options) {
                        VBoxModelFormView.__super__.initialize.call(this, options);
                        this.views = {};
                        this.render();
                        this.listenTo(this.model, 'change:children', this.change_children);
                        return this.bind_children();
                      };
                
                      VBoxModelFormView.prototype.change_children = function() {
                        var model, old_child_spec, old_children, _i, _len;
                        old_children = this.model.previous('children');
                        for (_i = 0, _len = old_children.length; _i < _len; _i++) {
                          old_child_spec = old_children[_i];
                          model = this.resolve_ref(old_child_spec);
                          if (model) {
                            this.stopListening(model, 'change:value');
                          }
                        }
                        return this.bind_children();
                      };
                
                      VBoxModelFormView.prototype.bind_children = function() {
                        var child, children, _i, _len, _results;
                        children = this.mget('_children');
                        _results = [];
                        for (_i = 0, _len = children.length; _i < _len; _i++) {
                          child = children[_i];
                          _results.push(this.listenTo(child, {
                            'change:value': this.set_data
                          }));
                        }
                        return _results;
                      };
                
                      VBoxModelFormView.prototype.set_data = function(model, value, options) {
                        var name, _i, _len, _ref1, _ref2, _ref3;
                        if (model != null) {
                          _ref1 = [model.get('name'), model.get('value')], name = _ref1[0], value = _ref1[1];
                          value = this.model.convert_val(name, value);
                          this.mset(name, value);
                          return this.model.save();
                        } else {
                          _ref2 = this.mget('children');
                          for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
                            model = _ref2[_i];
                            _ref3 = [model.get('name'), model.get('value')], name = _ref3[0], value = _ref3[1];
                            if ((name != null) && (value != null)) {
                              value = this.model.convert_val(name, value);
                              this.mset(name, value);
                            }
                          }
                          return this.model.save();
                        }
                      };
                
                      VBoxModelFormView.prototype.render = function() {
                        var child, children, key, val, _i, _len, _ref1, _results;
                        children = this.mget('_children');
                        build_views(this.views, children);
                        _ref1 = this.views;
                        for (key in _ref1) {
                          if (!__hasProp.call(_ref1, key)) continue;
                          val = _ref1[key];
                          val.$el.detach();
                        }
                        this.$el.empty();
                        _results = [];
                        for (_i = 0, _len = children.length; _i < _len; _i++) {
                          child = children[_i];
                          this.$el.append("<br/");
                          _results.push(this.$el.append(this.views[child.id].$el));
                        }
                        return _results;
                      };
                
                      return VBoxModelFormView;
                
                    })(ContinuumView);
                    VBoxModelForm = (function(_super) {
                      __extends(VBoxModelForm, _super);
                
                      function VBoxModelForm() {
                        _ref1 = VBoxModelForm.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      VBoxModelForm.prototype.type = "VBoxModelForm";
                
                      VBoxModelForm.prototype.default_view = VBoxModelFormView;
                
                      VBoxModelForm.prototype.convert_val = function(name, value) {
                        var field_defs;
                        field_defs = this.get('_field_defs');
                        if (field_defs[name] != null) {
                          if (field_defs[name] === "Float") {
                            value = parseFloat(value);
                          } else if (field_defs[name] === "Int") {
                            value = parseInt(value);
                          }
                        }
                        return value;
                      };
                
                      VBoxModelForm.prototype.defaults = function() {
                        var defaults;
                        defaults = {
                          _children: [],
                          _field_defs: {}
                        };
                        return defaults;
                      };
                
                      return VBoxModelForm;
                
                    })(HasParent);
                    VBoxModelFormes = (function(_super) {
                      __extends(VBoxModelFormes, _super);
                
                      function VBoxModelFormes() {
                        _ref2 = VBoxModelFormes.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      VBoxModelFormes.prototype.model = VBoxModelForm;
                
                      return VBoxModelFormes;
                
                    })(Backbone.Collection);
                    vboxmodelformes = new VBoxModelFormes();
                    return {
                      "Model": VBoxModelForm,
                      "Collection": vboxmodelformes,
                      "View": VBoxModelFormView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=vboxmodelform.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('widget/vboxform',["common/has_parent", "common/continuum_view", "common/build_views", "backbone"], function(HasParent, continuum_view, build_views, Backbone) {
                    var ContinuumView, VBoxForm, VBoxFormView, VBoxForms, vboxforms, _ref, _ref1, _ref2;
                    ContinuumView = continuum_view.View;
                    VBoxFormView = (function(_super) {
                      __extends(VBoxFormView, _super);
                
                      function VBoxFormView() {
                        _ref = VBoxFormView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      VBoxFormView.prototype.tagName = "form";
                
                      VBoxFormView.prototype.attributes = {
                        "class": "bk-widget-form",
                        role: "form"
                      };
                
                      VBoxFormView.prototype.initialize = function(options) {
                        VBoxFormView.__super__.initialize.call(this, options);
                        this.views = {};
                        return this.render();
                      };
                
                      VBoxFormView.prototype.render = function() {
                        var child, children, key, val, _i, _len, _ref1, _results;
                        children = this.mget_obj('children');
                        build_views(this.views, children);
                        _ref1 = this.views;
                        for (key in _ref1) {
                          if (!__hasProp.call(_ref1, key)) continue;
                          val = _ref1[key];
                          val.$el.detach();
                        }
                        this.$el.empty();
                        _results = [];
                        for (_i = 0, _len = children.length; _i < _len; _i++) {
                          child = children[_i];
                          this.$el.append("<br/");
                          _results.push(this.$el.append(this.views[child.id].$el));
                        }
                        return _results;
                      };
                
                      return VBoxFormView;
                
                    })(ContinuumView);
                    VBoxForm = (function(_super) {
                      __extends(VBoxForm, _super);
                
                      function VBoxForm() {
                        _ref1 = VBoxForm.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      VBoxForm.prototype.type = "VBoxForm";
                
                      VBoxForm.prototype.default_view = VBoxFormView;
                
                      VBoxForm.prototype.defaults = function() {
                        var defaults;
                        defaults = {
                          children: []
                        };
                        return defaults;
                      };
                
                      return VBoxForm;
                
                    })(HasParent);
                    VBoxForms = (function(_super) {
                      __extends(VBoxForms, _super);
                
                      function VBoxForms() {
                        _ref2 = VBoxForms.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      VBoxForms.prototype.model = VBoxForm;
                
                      return VBoxForms;
                
                    })(Backbone.Collection);
                    vboxforms = new VBoxForms();
                    return {
                      "Model": VBoxForm,
                      "Collection": vboxforms,
                      "View": VBoxFormView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=vboxform.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('widget/pretext',["backbone", "./paragraph"], function(Backbone, Paragraph) {
                    var PreText, PreTextView, PreTexts, pretexts, _ref, _ref1, _ref2;
                    PreTextView = (function(_super) {
                      __extends(PreTextView, _super);
                
                      function PreTextView() {
                        _ref = PreTextView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      PreTextView.prototype.tagName = "pre";
                
                      PreTextView.prototype.attributes = {
                        style: "overflow:scroll"
                      };
                
                      return PreTextView;
                
                    })(Paragraph.View);
                    PreText = (function(_super) {
                      __extends(PreText, _super);
                
                      function PreText() {
                        _ref1 = PreText.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      PreText.prototype.type = "PreText";
                
                      PreText.prototype.default_view = PreTextView;
                
                      PreText.prototype.defaults = function() {
                        return {
                          'text': '',
                          'height': 400,
                          'width': 400
                        };
                      };
                
                      return PreText;
                
                    })(Paragraph.Model);
                    PreTexts = (function(_super) {
                      __extends(PreTexts, _super);
                
                      function PreTexts() {
                        _ref2 = PreTexts.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      PreTexts.prototype.model = PreText;
                
                      return PreTexts;
                
                    })(Backbone.Collection);
                    pretexts = new PreTexts();
                    return {
                      "Model": PreText,
                      "Collection": pretexts,
                      "View": PreTextView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=pretext.js.map
                */;
                define('widget/selecttemplate',[],function(){
                  var template = function(__obj) {
                  var _safe = function(value) {
                    if (typeof value === 'undefined' && value == null)
                      value = '';
                    var result = new String(value);
                    result.ecoSafe = true;
                    return result;
                  };
                  return (function() {
                    var __out = [], __self = this, _print = function(value) {
                      if (typeof value !== 'undefined' && value != null)
                        __out.push(value.ecoSafe ? value : __self.escape(value));
                    }, _capture = function(callback) {
                      var out = __out, result;
                      __out = [];
                      callback.call(this);
                      result = __out.join('');
                      __out = out;
                      return _safe(result);
                    };
                    (function() {
                      var option, _i, _len, _ref;
                    
                      _print(_safe('<label for="'));
                    
                      _print(this.id);
                    
                      _print(_safe('"> '));
                    
                      _print(this.title);
                    
                      _print(_safe(' </label>\n<select class="bk-widget-form-input" id="'));
                    
                      _print(this.id);
                    
                      _print(_safe('" name="'));
                    
                      _print(this.name);
                    
                      _print(_safe('">\n  '));
                    
                      _ref = this.options;
                      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
                        option = _ref[_i];
                        _print(_safe('\n    '));
                        if (_.isString(option)) {
                          _print(_safe('\n      <option '));
                          _print(option === this.value ? _print(_safe('selected="selected"')) : void 0);
                          _print(_safe(' value="'));
                          _print(option);
                          _print(_safe('">'));
                          _print(option);
                          _print(_safe('</option>\n    '));
                        } else {
                          _print(_safe('\n      <option '));
                          _print(option.value === this.value ? _print(_safe('selected="selected"')) : void 0);
                          _print(_safe(' value="'));
                          _print(option.value);
                          _print(_safe('">'));
                          _print(option.name);
                          _print(_safe('</option>\n    '));
                        }
                        _print(_safe('\n  '));
                      }
                    
                      _print(_safe('\n</select>\n'));
                    
                    }).call(this);
                    
                    return __out.join('');
                  }).call((function() {
                    var obj = {
                      escape: function(value) {
                        return ('' + value)
                          .replace(/&/g, '&amp;')
                          .replace(/</g, '&lt;')
                          .replace(/>/g, '&gt;')
                          .replace(/"/g, '&quot;');
                      },
                      safe: _safe
                    }, key;
                    for (key in __obj) obj[key] = __obj[key];
                    return obj;
                  })());
                };
                  return template;
                });
                
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('widget/selectbox',["common/has_parent", "common/continuum_view", "backbone", "underscore", "./selecttemplate"], function(HasParent, continuum_view, Backbone, _, selecttemplate) {
                    var ContinuumView, Select, SelectView, Selects, selectboxes, _ref, _ref1, _ref2;
                    ContinuumView = continuum_view.View;
                    SelectView = (function(_super) {
                      __extends(SelectView, _super);
                
                      function SelectView() {
                        _ref = SelectView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      SelectView.prototype.events = {
                        "change select": "change_input"
                      };
                
                      SelectView.prototype.change_input = function() {
                        console.log('set', this.model.attributes);
                        this.mset('value', this.$('select').val());
                        return this.model.save();
                      };
                
                      SelectView.prototype.tagName = "div";
                
                      SelectView.prototype.template = selecttemplate;
                
                      SelectView.prototype.initialize = function(options) {
                        SelectView.__super__.initialize.call(this, options);
                        this.render();
                        return this.listenTo(this.model, 'change', this.render);
                      };
                
                      SelectView.prototype.render = function() {
                        var html;
                        this.$el.empty();
                        html = this.template(this.model.attributes);
                        this.$el.html(html);
                        return this;
                      };
                
                      return SelectView;
                
                    })(ContinuumView);
                    Select = (function(_super) {
                      __extends(Select, _super);
                
                      function Select() {
                        _ref1 = Select.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      Select.prototype.type = "Select";
                
                      Select.prototype.default_view = SelectView;
                
                      Select.prototype.defaults = function() {
                        var def;
                        def = {
                          title: '',
                          value: '',
                          options: []
                        };
                        return def;
                      };
                
                      return Select;
                
                    })(HasParent);
                    Selects = (function(_super) {
                      __extends(Selects, _super);
                
                      function Selects() {
                        _ref2 = Selects.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      Selects.prototype.model = Select;
                
                      return Selects;
                
                    })(Backbone.Collection);
                    selectboxes = new Selects();
                    return {
                      "Model": Select,
                      "Collection": selectboxes,
                      "View": SelectView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=selectbox.js.map
                */;
                define('widget/slidertemplate',[],function(){
                  var template = function(__obj) {
                  var _safe = function(value) {
                    if (typeof value === 'undefined' && value == null)
                      value = '';
                    var result = new String(value);
                    result.ecoSafe = true;
                    return result;
                  };
                  return (function() {
                    var __out = [], __self = this, _print = function(value) {
                      if (typeof value !== 'undefined' && value != null)
                        __out.push(value.ecoSafe ? value : __self.escape(value));
                    }, _capture = function(callback) {
                      var out = __out, result;
                      __out = [];
                      callback.call(this);
                      result = __out.join('');
                      __out = out;
                      return _safe(result);
                    };
                    (function() {
                      _print(_safe('<label for="'));
                    
                      _print(this.id);
                    
                      _print(_safe('"> '));
                    
                      _print(this.title);
                    
                      _print(_safe(' </label>\n<div class="bk-slider-'));
                    
                      _print(this.orientation);
                    
                      _print(_safe('">\n  <div class="slider " id="'));
                    
                      _print(this.id);
                    
                      _print(_safe('">\n</div>\n'));
                    
                    }).call(this);
                    
                    return __out.join('');
                  }).call((function() {
                    var obj = {
                      escape: function(value) {
                        return ('' + value)
                          .replace(/&/g, '&amp;')
                          .replace(/</g, '&lt;')
                          .replace(/>/g, '&gt;')
                          .replace(/"/g, '&quot;');
                      },
                      safe: _safe
                    }, key;
                    for (key in __obj) obj[key] = __obj[key];
                    return obj;
                  })());
                };
                  return template;
                });
                
                define('jquery_ui/slider',['jquery','./core','./mouse','./widget'], function (jQuery) {
                /*!
                 * jQuery UI Slider 1.10.0
                 * http://jqueryui.com
                 *
                 * Copyright 2013 jQuery Foundation and other contributors
                 * Released under the MIT license.
                 * http://jquery.org/license
                 *
                 * http://api.jqueryui.com/slider/
                 *
                 * Depends:
                 *	jquery.ui.core.js
                 *	jquery.ui.mouse.js
                 *	jquery.ui.widget.js
                 */
                (function( $, undefined ) {
                
                // number of pages in a slider
                // (how many times can you page up/down to go through the whole range)
                var numPages = 5;
                
                $.widget( "ui.slider", $.ui.mouse, {
                	version: "1.10.0",
                	widgetEventPrefix: "slide",
                
                	options: {
                		animate: false,
                		distance: 0,
                		max: 100,
                		min: 0,
                		orientation: "horizontal",
                		range: false,
                		step: 1,
                		value: 0,
                		values: null,
                
                		// callbacks
                		change: null,
                		slide: null,
                		start: null,
                		stop: null
                	},
                
                	_create: function() {
                		var i, handleCount,
                			o = this.options,
                			existingHandles = this.element.find( ".ui-slider-handle" ).addClass( "ui-state-default ui-corner-all" ),
                			handle = "<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",
                			handles = [];
                
                		this._keySliding = false;
                		this._mouseSliding = false;
                		this._animateOff = true;
                		this._handleIndex = null;
                		this._detectOrientation();
                		this._mouseInit();
                
                		this.element
                			.addClass( "ui-slider" +
                				" ui-slider-" + this.orientation +
                				" ui-widget" +
                				" ui-widget-content" +
                				" ui-corner-all");
                
                		this.range = $([]);
                
                		if ( o.range ) {
                			if ( o.range === true ) {
                				if ( !o.values ) {
                					o.values = [ this._valueMin(), this._valueMin() ];
                				} else if ( o.values.length && o.values.length !== 2 ) {
                					o.values = [ o.values[0], o.values[0] ];
                				} else if ( $.isArray( o.values ) ) {
                					o.values = o.values.slice(0);
                				}
                			}
                
                			this.range = $( "<div></div>" )
                				.appendTo( this.element )
                				.addClass( "ui-slider-range" +
                				// note: this isn't the most fittingly semantic framework class for this element,
                				// but worked best visually with a variety of themes
                				" ui-widget-header" +
                				( ( o.range === "min" || o.range === "max" ) ? " ui-slider-range-" + o.range : "" ) );
                		}
                
                		handleCount = ( o.values && o.values.length ) || 1;
                
                		for ( i = existingHandles.length; i < handleCount; i++ ) {
                			handles.push( handle );
                		}
                
                		this.handles = existingHandles.add( $( handles.join( "" ) ).appendTo( this.element ) );
                
                		this.handle = this.handles.eq( 0 );
                
                		this.handles.add( this.range ).filter( "a" )
                			.click(function( event ) {
                				event.preventDefault();
                			})
                			.mouseenter(function() {
                				if ( !o.disabled ) {
                					$( this ).addClass( "ui-state-hover" );
                				}
                			})
                			.mouseleave(function() {
                				$( this ).removeClass( "ui-state-hover" );
                			})
                			.focus(function() {
                				if ( !o.disabled ) {
                					$( ".ui-slider .ui-state-focus" ).removeClass( "ui-state-focus" );
                					$( this ).addClass( "ui-state-focus" );
                				} else {
                					$( this ).blur();
                				}
                			})
                			.blur(function() {
                				$( this ).removeClass( "ui-state-focus" );
                			});
                
                		this.handles.each(function( i ) {
                			$( this ).data( "ui-slider-handle-index", i );
                		});
                
                		this._setOption( "disabled", o.disabled );
                
                		this._on( this.handles, this._handleEvents );
                
                		this._refreshValue();
                
                		this._animateOff = false;
                	},
                
                	_destroy: function() {
                		this.handles.remove();
                		this.range.remove();
                
                		this.element
                			.removeClass( "ui-slider" +
                				" ui-slider-horizontal" +
                				" ui-slider-vertical" +
                				" ui-widget" +
                				" ui-widget-content" +
                				" ui-corner-all" );
                
                		this._mouseDestroy();
                	},
                
                	_mouseCapture: function( event ) {
                		var position, normValue, distance, closestHandle, index, allowed, offset, mouseOverHandle,
                			that = this,
                			o = this.options;
                
                		if ( o.disabled ) {
                			return false;
                		}
                
                		this.elementSize = {
                			width: this.element.outerWidth(),
                			height: this.element.outerHeight()
                		};
                		this.elementOffset = this.element.offset();
                
                		position = { x: event.pageX, y: event.pageY };
                		normValue = this._normValueFromMouse( position );
                		distance = this._valueMax() - this._valueMin() + 1;
                		this.handles.each(function( i ) {
                			var thisDistance = Math.abs( normValue - that.values(i) );
                			if (( distance > thisDistance ) ||
                				( distance === thisDistance &&
                					(i === that._lastChangedValue || that.values(i) === o.min ))) {
                				distance = thisDistance;
                				closestHandle = $( this );
                				index = i;
                			}
                		});
                
                		allowed = this._start( event, index );
                		if ( allowed === false ) {
                			return false;
                		}
                		this._mouseSliding = true;
                
                		this._handleIndex = index;
                
                		closestHandle
                			.addClass( "ui-state-active" )
                			.focus();
                
                		offset = closestHandle.offset();
                		mouseOverHandle = !$( event.target ).parents().addBack().is( ".ui-slider-handle" );
                		this._clickOffset = mouseOverHandle ? { left: 0, top: 0 } : {
                			left: event.pageX - offset.left - ( closestHandle.width() / 2 ),
                			top: event.pageY - offset.top -
                				( closestHandle.height() / 2 ) -
                				( parseInt( closestHandle.css("borderTopWidth"), 10 ) || 0 ) -
                				( parseInt( closestHandle.css("borderBottomWidth"), 10 ) || 0) +
                				( parseInt( closestHandle.css("marginTop"), 10 ) || 0)
                		};
                
                		if ( !this.handles.hasClass( "ui-state-hover" ) ) {
                			this._slide( event, index, normValue );
                		}
                		this._animateOff = true;
                		return true;
                	},
                
                	_mouseStart: function() {
                		return true;
                	},
                
                	_mouseDrag: function( event ) {
                		var position = { x: event.pageX, y: event.pageY },
                			normValue = this._normValueFromMouse( position );
                
                		this._slide( event, this._handleIndex, normValue );
                
                		return false;
                	},
                
                	_mouseStop: function( event ) {
                		this.handles.removeClass( "ui-state-active" );
                		this._mouseSliding = false;
                
                		this._stop( event, this._handleIndex );
                		this._change( event, this._handleIndex );
                
                		this._handleIndex = null;
                		this._clickOffset = null;
                		this._animateOff = false;
                
                		return false;
                	},
                
                	_detectOrientation: function() {
                		this.orientation = ( this.options.orientation === "vertical" ) ? "vertical" : "horizontal";
                	},
                
                	_normValueFromMouse: function( position ) {
                		var pixelTotal,
                			pixelMouse,
                			percentMouse,
                			valueTotal,
                			valueMouse;
                
                		if ( this.orientation === "horizontal" ) {
                			pixelTotal = this.elementSize.width;
                			pixelMouse = position.x - this.elementOffset.left - ( this._clickOffset ? this._clickOffset.left : 0 );
                		} else {
                			pixelTotal = this.elementSize.height;
                			pixelMouse = position.y - this.elementOffset.top - ( this._clickOffset ? this._clickOffset.top : 0 );
                		}
                
                		percentMouse = ( pixelMouse / pixelTotal );
                		if ( percentMouse > 1 ) {
                			percentMouse = 1;
                		}
                		if ( percentMouse < 0 ) {
                			percentMouse = 0;
                		}
                		if ( this.orientation === "vertical" ) {
                			percentMouse = 1 - percentMouse;
                		}
                
                		valueTotal = this._valueMax() - this._valueMin();
                		valueMouse = this._valueMin() + percentMouse * valueTotal;
                
                		return this._trimAlignValue( valueMouse );
                	},
                
                	_start: function( event, index ) {
                		var uiHash = {
                			handle: this.handles[ index ],
                			value: this.value()
                		};
                		if ( this.options.values && this.options.values.length ) {
                			uiHash.value = this.values( index );
                			uiHash.values = this.values();
                		}
                		return this._trigger( "start", event, uiHash );
                	},
                
                	_slide: function( event, index, newVal ) {
                		var otherVal,
                			newValues,
                			allowed;
                
                		if ( this.options.values && this.options.values.length ) {
                			otherVal = this.values( index ? 0 : 1 );
                
                			if ( ( this.options.values.length === 2 && this.options.range === true ) &&
                					( ( index === 0 && newVal > otherVal) || ( index === 1 && newVal < otherVal ) )
                				) {
                				newVal = otherVal;
                			}
                
                			if ( newVal !== this.values( index ) ) {
                				newValues = this.values();
                				newValues[ index ] = newVal;
                				// A slide can be canceled by returning false from the slide callback
                				allowed = this._trigger( "slide", event, {
                					handle: this.handles[ index ],
                					value: newVal,
                					values: newValues
                				} );
                				otherVal = this.values( index ? 0 : 1 );
                				if ( allowed !== false ) {
                					this.values( index, newVal, true );
                				}
                			}
                		} else {
                			if ( newVal !== this.value() ) {
                				// A slide can be canceled by returning false from the slide callback
                				allowed = this._trigger( "slide", event, {
                					handle: this.handles[ index ],
                					value: newVal
                				} );
                				if ( allowed !== false ) {
                					this.value( newVal );
                				}
                			}
                		}
                	},
                
                	_stop: function( event, index ) {
                		var uiHash = {
                			handle: this.handles[ index ],
                			value: this.value()
                		};
                		if ( this.options.values && this.options.values.length ) {
                			uiHash.value = this.values( index );
                			uiHash.values = this.values();
                		}
                
                		this._trigger( "stop", event, uiHash );
                	},
                
                	_change: function( event, index ) {
                		if ( !this._keySliding && !this._mouseSliding ) {
                			var uiHash = {
                				handle: this.handles[ index ],
                				value: this.value()
                			};
                			if ( this.options.values && this.options.values.length ) {
                				uiHash.value = this.values( index );
                				uiHash.values = this.values();
                			}
                
                			//store the last changed value index for reference when handles overlap
                			this._lastChangedValue = index;
                
                			this._trigger( "change", event, uiHash );
                		}
                	},
                
                	value: function( newValue ) {
                		if ( arguments.length ) {
                			this.options.value = this._trimAlignValue( newValue );
                			this._refreshValue();
                			this._change( null, 0 );
                			return;
                		}
                
                		return this._value();
                	},
                
                	values: function( index, newValue ) {
                		var vals,
                			newValues,
                			i;
                
                		if ( arguments.length > 1 ) {
                			this.options.values[ index ] = this._trimAlignValue( newValue );
                			this._refreshValue();
                			this._change( null, index );
                			return;
                		}
                
                		if ( arguments.length ) {
                			if ( $.isArray( arguments[ 0 ] ) ) {
                				vals = this.options.values;
                				newValues = arguments[ 0 ];
                				for ( i = 0; i < vals.length; i += 1 ) {
                					vals[ i ] = this._trimAlignValue( newValues[ i ] );
                					this._change( null, i );
                				}
                				this._refreshValue();
                			} else {
                				if ( this.options.values && this.options.values.length ) {
                					return this._values( index );
                				} else {
                					return this.value();
                				}
                			}
                		} else {
                			return this._values();
                		}
                	},
                
                	_setOption: function( key, value ) {
                		var i,
                			valsLength = 0;
                
                		if ( $.isArray( this.options.values ) ) {
                			valsLength = this.options.values.length;
                		}
                
                		$.Widget.prototype._setOption.apply( this, arguments );
                
                		switch ( key ) {
                			case "disabled":
                				if ( value ) {
                					this.handles.filter( ".ui-state-focus" ).blur();
                					this.handles.removeClass( "ui-state-hover" );
                					this.handles.prop( "disabled", true );
                				} else {
                					this.handles.prop( "disabled", false );
                				}
                				break;
                			case "orientation":
                				this._detectOrientation();
                				this.element
                					.removeClass( "ui-slider-horizontal ui-slider-vertical" )
                					.addClass( "ui-slider-" + this.orientation );
                				this._refreshValue();
                				break;
                			case "value":
                				this._animateOff = true;
                				this._refreshValue();
                				this._change( null, 0 );
                				this._animateOff = false;
                				break;
                			case "values":
                				this._animateOff = true;
                				this._refreshValue();
                				for ( i = 0; i < valsLength; i += 1 ) {
                					this._change( null, i );
                				}
                				this._animateOff = false;
                				break;
                			case "min":
                			case "max":
                				this._animateOff = true;
                				this._refreshValue();
                				this._animateOff = false;
                				break;
                		}
                	},
                
                	//internal value getter
                	// _value() returns value trimmed by min and max, aligned by step
                	_value: function() {
                		var val = this.options.value;
                		val = this._trimAlignValue( val );
                
                		return val;
                	},
                
                	//internal values getter
                	// _values() returns array of values trimmed by min and max, aligned by step
                	// _values( index ) returns single value trimmed by min and max, aligned by step
                	_values: function( index ) {
                		var val,
                			vals,
                			i;
                
                		if ( arguments.length ) {
                			val = this.options.values[ index ];
                			val = this._trimAlignValue( val );
                
                			return val;
                		} else {
                			// .slice() creates a copy of the array
                			// this copy gets trimmed by min and max and then returned
                			vals = this.options.values.slice();
                			for ( i = 0; i < vals.length; i+= 1) {
                				vals[ i ] = this._trimAlignValue( vals[ i ] );
                			}
                
                			return vals;
                		}
                	},
                
                	// returns the step-aligned value that val is closest to, between (inclusive) min and max
                	_trimAlignValue: function( val ) {
                		if ( val <= this._valueMin() ) {
                			return this._valueMin();
                		}
                		if ( val >= this._valueMax() ) {
                			return this._valueMax();
                		}
                		var step = ( this.options.step > 0 ) ? this.options.step : 1,
                			valModStep = (val - this._valueMin()) % step,
                			alignValue = val - valModStep;
                
                		if ( Math.abs(valModStep) * 2 >= step ) {
                			alignValue += ( valModStep > 0 ) ? step : ( -step );
                		}
                
                		// Since JavaScript has problems with large floats, round
                		// the final value to 5 digits after the decimal point (see #4124)
                		return parseFloat( alignValue.toFixed(5) );
                	},
                
                	_valueMin: function() {
                		return this.options.min;
                	},
                
                	_valueMax: function() {
                		return this.options.max;
                	},
                
                	_refreshValue: function() {
                		var lastValPercent, valPercent, value, valueMin, valueMax,
                			oRange = this.options.range,
                			o = this.options,
                			that = this,
                			animate = ( !this._animateOff ) ? o.animate : false,
                			_set = {};
                
                		if ( this.options.values && this.options.values.length ) {
                			this.handles.each(function( i ) {
                				valPercent = ( that.values(i) - that._valueMin() ) / ( that._valueMax() - that._valueMin() ) * 100;
                				_set[ that.orientation === "horizontal" ? "left" : "bottom" ] = valPercent + "%";
                				$( this ).stop( 1, 1 )[ animate ? "animate" : "css" ]( _set, o.animate );
                				if ( that.options.range === true ) {
                					if ( that.orientation === "horizontal" ) {
                						if ( i === 0 ) {
                							that.range.stop( 1, 1 )[ animate ? "animate" : "css" ]( { left: valPercent + "%" }, o.animate );
                						}
                						if ( i === 1 ) {
                							that.range[ animate ? "animate" : "css" ]( { width: ( valPercent - lastValPercent ) + "%" }, { queue: false, duration: o.animate } );
                						}
                					} else {
                						if ( i === 0 ) {
                							that.range.stop( 1, 1 )[ animate ? "animate" : "css" ]( { bottom: ( valPercent ) + "%" }, o.animate );
                						}
                						if ( i === 1 ) {
                							that.range[ animate ? "animate" : "css" ]( { height: ( valPercent - lastValPercent ) + "%" }, { queue: false, duration: o.animate } );
                						}
                					}
                				}
                				lastValPercent = valPercent;
                			});
                		} else {
                			value = this.value();
                			valueMin = this._valueMin();
                			valueMax = this._valueMax();
                			valPercent = ( valueMax !== valueMin ) ?
                					( value - valueMin ) / ( valueMax - valueMin ) * 100 :
                					0;
                			_set[ this.orientation === "horizontal" ? "left" : "bottom" ] = valPercent + "%";
                			this.handle.stop( 1, 1 )[ animate ? "animate" : "css" ]( _set, o.animate );
                
                			if ( oRange === "min" && this.orientation === "horizontal" ) {
                				this.range.stop( 1, 1 )[ animate ? "animate" : "css" ]( { width: valPercent + "%" }, o.animate );
                			}
                			if ( oRange === "max" && this.orientation === "horizontal" ) {
                				this.range[ animate ? "animate" : "css" ]( { width: ( 100 - valPercent ) + "%" }, { queue: false, duration: o.animate } );
                			}
                			if ( oRange === "min" && this.orientation === "vertical" ) {
                				this.range.stop( 1, 1 )[ animate ? "animate" : "css" ]( { height: valPercent + "%" }, o.animate );
                			}
                			if ( oRange === "max" && this.orientation === "vertical" ) {
                				this.range[ animate ? "animate" : "css" ]( { height: ( 100 - valPercent ) + "%" }, { queue: false, duration: o.animate } );
                			}
                		}
                	},
                
                	_handleEvents: {
                		keydown: function( event ) {
                			/*jshint maxcomplexity:25*/
                			var allowed, curVal, newVal, step,
                				index = $( event.target ).data( "ui-slider-handle-index" );
                
                			switch ( event.keyCode ) {
                				case $.ui.keyCode.HOME:
                				case $.ui.keyCode.END:
                				case $.ui.keyCode.PAGE_UP:
                				case $.ui.keyCode.PAGE_DOWN:
                				case $.ui.keyCode.UP:
                				case $.ui.keyCode.RIGHT:
                				case $.ui.keyCode.DOWN:
                				case $.ui.keyCode.LEFT:
                					event.preventDefault();
                					if ( !this._keySliding ) {
                						this._keySliding = true;
                						$( event.target ).addClass( "ui-state-active" );
                						allowed = this._start( event, index );
                						if ( allowed === false ) {
                							return;
                						}
                					}
                					break;
                			}
                
                			step = this.options.step;
                			if ( this.options.values && this.options.values.length ) {
                				curVal = newVal = this.values( index );
                			} else {
                				curVal = newVal = this.value();
                			}
                
                			switch ( event.keyCode ) {
                				case $.ui.keyCode.HOME:
                					newVal = this._valueMin();
                					break;
                				case $.ui.keyCode.END:
                					newVal = this._valueMax();
                					break;
                				case $.ui.keyCode.PAGE_UP:
                					newVal = this._trimAlignValue( curVal + ( (this._valueMax() - this._valueMin()) / numPages ) );
                					break;
                				case $.ui.keyCode.PAGE_DOWN:
                					newVal = this._trimAlignValue( curVal - ( (this._valueMax() - this._valueMin()) / numPages ) );
                					break;
                				case $.ui.keyCode.UP:
                				case $.ui.keyCode.RIGHT:
                					if ( curVal === this._valueMax() ) {
                						return;
                					}
                					newVal = this._trimAlignValue( curVal + step );
                					break;
                				case $.ui.keyCode.DOWN:
                				case $.ui.keyCode.LEFT:
                					if ( curVal === this._valueMin() ) {
                						return;
                					}
                					newVal = this._trimAlignValue( curVal - step );
                					break;
                			}
                
                			this._slide( event, index, newVal );
                		},
                		keyup: function( event ) {
                			var index = $( event.target ).data( "ui-slider-handle-index" );
                
                			if ( this._keySliding ) {
                				this._keySliding = false;
                				this._stop( event, index );
                				this._change( event, index );
                				$( event.target ).removeClass( "ui-state-active" );
                			}
                		}
                	}
                
                });
                
                }(jQuery));
                
                });
                (function() {
                  var __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
                    __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('widget/slider',["common/has_parent", "common/continuum_view", "backbone", "underscore", "./slidertemplate", "jquery_ui/slider"], function(HasParent, continuum_view, Backbone, _, slidertemplate) {
                    var ContinuumView, Slider, SliderView, Sliders, sliders, _ref, _ref1, _ref2;
                    ContinuumView = continuum_view.View;
                    SliderView = (function(_super) {
                      __extends(SliderView, _super);
                
                      function SliderView() {
                        this.slide = __bind(this.slide, this);
                        _ref = SliderView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      SliderView.prototype.tagName = "div";
                
                      SliderView.prototype.template = slidertemplate;
                
                      SliderView.prototype.initialize = function(options) {
                        SliderView.__super__.initialize.call(this, options);
                        return this.render();
                      };
                
                      SliderView.prototype.render = function() {
                        var html, max, min, step;
                        this.$el.empty();
                        html = this.template(this.model.attributes);
                        this.$el.html(html);
                        max = this.mget('end');
                        min = this.mget('start');
                        step = this.mget('step') || ((max - min) / 50);
                        console.log('sliderval', min, max, step);
                        return this.$('.slider').slider({
                          orientation: this.mget('orientation'),
                          animate: "fast",
                          slide: _.throttle(this.slide, 200),
                          value: this.mget('value'),
                          min: min,
                          max: max,
                          step: step
                        });
                      };
                
                      SliderView.prototype.slide = function(event, ui) {
                        var value;
                        value = ui.value;
                        console.log('sliding', value);
                        this.mset('value', value);
                        return this.model.save();
                      };
                
                      return SliderView;
                
                    })(ContinuumView);
                    Slider = (function(_super) {
                      __extends(Slider, _super);
                
                      function Slider() {
                        _ref1 = Slider.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      Slider.prototype.type = "Slider";
                
                      Slider.prototype.default_view = SliderView;
                
                      Slider.prototype.defaults = function() {
                        var def;
                        def = {
                          title: '',
                          value: 0.5,
                          start: 0,
                          end: 1,
                          step: 0,
                          orientation: "horizontal"
                        };
                        return def;
                      };
                
                      return Slider;
                
                    })(HasParent);
                    Sliders = (function(_super) {
                      __extends(Sliders, _super);
                
                      function Sliders() {
                        _ref2 = Sliders.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      Sliders.prototype.model = Slider;
                
                      return Sliders;
                
                    })(Backbone.Collection);
                    sliders = new Sliders();
                    return {
                      "Model": Slider,
                      "Collection": sliders,
                      "View": SliderView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=slider.js.map
                */;
                define('jquery_ui/draggable',['jquery','./core','./mouse','./widget'], function (jQuery) {
                /*!
                 * jQuery UI Draggable 1.10.0
                 * http://jqueryui.com
                 *
                 * Copyright 2013 jQuery Foundation and other contributors
                 * Released under the MIT license.
                 * http://jquery.org/license
                 *
                 * http://api.jqueryui.com/draggable/
                 *
                 * Depends:
                 *	jquery.ui.core.js
                 *	jquery.ui.mouse.js
                 *	jquery.ui.widget.js
                 */
                (function( $, undefined ) {
                
                $.widget("ui.draggable", $.ui.mouse, {
                	version: "1.10.0",
                	widgetEventPrefix: "drag",
                	options: {
                		addClasses: true,
                		appendTo: "parent",
                		axis: false,
                		connectToSortable: false,
                		containment: false,
                		cursor: "auto",
                		cursorAt: false,
                		grid: false,
                		handle: false,
                		helper: "original",
                		iframeFix: false,
                		opacity: false,
                		refreshPositions: false,
                		revert: false,
                		revertDuration: 500,
                		scope: "default",
                		scroll: true,
                		scrollSensitivity: 20,
                		scrollSpeed: 20,
                		snap: false,
                		snapMode: "both",
                		snapTolerance: 20,
                		stack: false,
                		zIndex: false,
                
                		// callbacks
                		drag: null,
                		start: null,
                		stop: null
                	},
                	_create: function() {
                
                		if (this.options.helper === "original" && !(/^(?:r|a|f)/).test(this.element.css("position"))) {
                			this.element[0].style.position = "relative";
                		}
                		if (this.options.addClasses){
                			this.element.addClass("ui-draggable");
                		}
                		if (this.options.disabled){
                			this.element.addClass("ui-draggable-disabled");
                		}
                
                		this._mouseInit();
                
                	},
                
                	_destroy: function() {
                		this.element.removeClass( "ui-draggable ui-draggable-dragging ui-draggable-disabled" );
                		this._mouseDestroy();
                	},
                
                	_mouseCapture: function(event) {
                
                		var o = this.options;
                
                		// among others, prevent a drag on a resizable-handle
                		if (this.helper || o.disabled || $(event.target).closest(".ui-resizable-handle").length > 0) {
                			return false;
                		}
                
                		//Quit if we're not on a valid handle
                		this.handle = this._getHandle(event);
                		if (!this.handle) {
                			return false;
                		}
                
                		$(o.iframeFix === true ? "iframe" : o.iframeFix).each(function() {
                			$("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>")
                			.css({
                				width: this.offsetWidth+"px", height: this.offsetHeight+"px",
                				position: "absolute", opacity: "0.001", zIndex: 1000
                			})
                			.css($(this).offset())
                			.appendTo("body");
                		});
                
                		return true;
                
                	},
                
                	_mouseStart: function(event) {
                
                		var o = this.options;
                
                		//Create and append the visible helper
                		this.helper = this._createHelper(event);
                
                		this.helper.addClass("ui-draggable-dragging");
                
                		//Cache the helper size
                		this._cacheHelperProportions();
                
                		//If ddmanager is used for droppables, set the global draggable
                		if($.ui.ddmanager) {
                			$.ui.ddmanager.current = this;
                		}
                
                		/*
                		 * - Position generation -
                		 * This block generates everything position related - it's the core of draggables.
                		 */
                
                		//Cache the margins of the original element
                		this._cacheMargins();
                
                		//Store the helper's css position
                		this.cssPosition = this.helper.css("position");
                		this.scrollParent = this.helper.scrollParent();
                
                		//The element's absolute position on the page minus margins
                		this.offset = this.positionAbs = this.element.offset();
                		this.offset = {
                			top: this.offset.top - this.margins.top,
                			left: this.offset.left - this.margins.left
                		};
                
                		$.extend(this.offset, {
                			click: { //Where the click happened, relative to the element
                				left: event.pageX - this.offset.left,
                				top: event.pageY - this.offset.top
                			},
                			parent: this._getParentOffset(),
                			relative: this._getRelativeOffset() //This is a relative to absolute position minus the actual position calculation - only used for relative positioned helper
                		});
                
                		//Generate the original position
                		this.originalPosition = this.position = this._generatePosition(event);
                		this.originalPageX = event.pageX;
                		this.originalPageY = event.pageY;
                
                		//Adjust the mouse offset relative to the helper if "cursorAt" is supplied
                		(o.cursorAt && this._adjustOffsetFromHelper(o.cursorAt));
                
                		//Set a containment if given in the options
                		if(o.containment) {
                			this._setContainment();
                		}
                
                		//Trigger event + callbacks
                		if(this._trigger("start", event) === false) {
                			this._clear();
                			return false;
                		}
                
                		//Recache the helper size
                		this._cacheHelperProportions();
                
                		//Prepare the droppable offsets
                		if ($.ui.ddmanager && !o.dropBehaviour) {
                			$.ui.ddmanager.prepareOffsets(this, event);
                		}
                
                
                		this._mouseDrag(event, true); //Execute the drag once - this causes the helper not to be visible before getting its correct position
                
                		//If the ddmanager is used for droppables, inform the manager that dragging has started (see #5003)
                		if ( $.ui.ddmanager ) {
                			$.ui.ddmanager.dragStart(this, event);
                		}
                
                		return true;
                	},
                
                	_mouseDrag: function(event, noPropagation) {
                
                		//Compute the helpers position
                		this.position = this._generatePosition(event);
                		this.positionAbs = this._convertPositionTo("absolute");
                
                		//Call plugins and callbacks and use the resulting position if something is returned
                		if (!noPropagation) {
                			var ui = this._uiHash();
                			if(this._trigger("drag", event, ui) === false) {
                				this._mouseUp({});
                				return false;
                			}
                			this.position = ui.position;
                		}
                
                		if(!this.options.axis || this.options.axis !== "y") {
                			this.helper[0].style.left = this.position.left+"px";
                		}
                		if(!this.options.axis || this.options.axis !== "x") {
                			this.helper[0].style.top = this.position.top+"px";
                		}
                		if($.ui.ddmanager) {
                			$.ui.ddmanager.drag(this, event);
                		}
                
                		return false;
                	},
                
                	_mouseStop: function(event) {
                
                		//If we are using droppables, inform the manager about the drop
                		var element,
                			that = this,
                			elementInDom = false,
                			dropped = false;
                		if ($.ui.ddmanager && !this.options.dropBehaviour) {
                			dropped = $.ui.ddmanager.drop(this, event);
                		}
                
                		//if a drop comes from outside (a sortable)
                		if(this.dropped) {
                			dropped = this.dropped;
                			this.dropped = false;
                		}
                
                		//if the original element is no longer in the DOM don't bother to continue (see #8269)
                		element = this.element[0];
                		while ( element && (element = element.parentNode) ) {
                			if (element === document ) {
                				elementInDom = true;
                			}
                		}
                		if ( !elementInDom && this.options.helper === "original" ) {
                			return false;
                		}
                
                		if((this.options.revert === "invalid" && !dropped) || (this.options.revert === "valid" && dropped) || this.options.revert === true || ($.isFunction(this.options.revert) && this.options.revert.call(this.element, dropped))) {
                			$(this.helper).animate(this.originalPosition, parseInt(this.options.revertDuration, 10), function() {
                				if(that._trigger("stop", event) !== false) {
                					that._clear();
                				}
                			});
                		} else {
                			if(this._trigger("stop", event) !== false) {
                				this._clear();
                			}
                		}
                
                		return false;
                	},
                
                	_mouseUp: function(event) {
                		//Remove frame helpers
                		$("div.ui-draggable-iframeFix").each(function() {
                			this.parentNode.removeChild(this);
                		});
                
                		//If the ddmanager is used for droppables, inform the manager that dragging has stopped (see #5003)
                		if( $.ui.ddmanager ) {
                			$.ui.ddmanager.dragStop(this, event);
                		}
                
                		return $.ui.mouse.prototype._mouseUp.call(this, event);
                	},
                
                	cancel: function() {
                
                		if(this.helper.is(".ui-draggable-dragging")) {
                			this._mouseUp({});
                		} else {
                			this._clear();
                		}
                
                		return this;
                
                	},
                
                	_getHandle: function(event) {
                
                		var handle = !this.options.handle || !$(this.options.handle, this.element).length ? true : false;
                		$(this.options.handle, this.element)
                			.find("*")
                			.addBack()
                			.each(function() {
                				if(this === event.target) {
                					handle = true;
                				}
                			});
                
                		return handle;
                
                	},
                
                	_createHelper: function(event) {
                
                		var o = this.options,
                			helper = $.isFunction(o.helper) ? $(o.helper.apply(this.element[0], [event])) : (o.helper === "clone" ? this.element.clone().removeAttr("id") : this.element);
                
                		if(!helper.parents("body").length) {
                			helper.appendTo((o.appendTo === "parent" ? this.element[0].parentNode : o.appendTo));
                		}
                
                		if(helper[0] !== this.element[0] && !(/(fixed|absolute)/).test(helper.css("position"))) {
                			helper.css("position", "absolute");
                		}
                
                		return helper;
                
                	},
                
                	_adjustOffsetFromHelper: function(obj) {
                		if (typeof obj === "string") {
                			obj = obj.split(" ");
                		}
                		if ($.isArray(obj)) {
                			obj = {left: +obj[0], top: +obj[1] || 0};
                		}
                		if ("left" in obj) {
                			this.offset.click.left = obj.left + this.margins.left;
                		}
                		if ("right" in obj) {
                			this.offset.click.left = this.helperProportions.width - obj.right + this.margins.left;
                		}
                		if ("top" in obj) {
                			this.offset.click.top = obj.top + this.margins.top;
                		}
                		if ("bottom" in obj) {
                			this.offset.click.top = this.helperProportions.height - obj.bottom + this.margins.top;
                		}
                	},
                
                	_getParentOffset: function() {
                
                		//Get the offsetParent and cache its position
                		this.offsetParent = this.helper.offsetParent();
                		var po = this.offsetParent.offset();
                
                		// This is a special case where we need to modify a offset calculated on start, since the following happened:
                		// 1. The position of the helper is absolute, so it's position is calculated based on the next positioned parent
                		// 2. The actual offset parent is a child of the scroll parent, and the scroll parent isn't the document, which means that
                		//    the scroll is included in the initial calculation of the offset of the parent, and never recalculated upon drag
                		if(this.cssPosition === "absolute" && this.scrollParent[0] !== document && $.contains(this.scrollParent[0], this.offsetParent[0])) {
                			po.left += this.scrollParent.scrollLeft();
                			po.top += this.scrollParent.scrollTop();
                		}
                
                		//This needs to be actually done for all browsers, since pageX/pageY includes this information
                		//Ugly IE fix
                		if((this.offsetParent[0] === document.body) ||
                			(this.offsetParent[0].tagName && this.offsetParent[0].tagName.toLowerCase() === "html" && $.ui.ie)) {
                			po = { top: 0, left: 0 };
                		}
                
                		return {
                			top: po.top + (parseInt(this.offsetParent.css("borderTopWidth"),10) || 0),
                			left: po.left + (parseInt(this.offsetParent.css("borderLeftWidth"),10) || 0)
                		};
                
                	},
                
                	_getRelativeOffset: function() {
                
                		if(this.cssPosition === "relative") {
                			var p = this.element.position();
                			return {
                				top: p.top - (parseInt(this.helper.css("top"),10) || 0) + this.scrollParent.scrollTop(),
                				left: p.left - (parseInt(this.helper.css("left"),10) || 0) + this.scrollParent.scrollLeft()
                			};
                		} else {
                			return { top: 0, left: 0 };
                		}
                
                	},
                
                	_cacheMargins: function() {
                		this.margins = {
                			left: (parseInt(this.element.css("marginLeft"),10) || 0),
                			top: (parseInt(this.element.css("marginTop"),10) || 0),
                			right: (parseInt(this.element.css("marginRight"),10) || 0),
                			bottom: (parseInt(this.element.css("marginBottom"),10) || 0)
                		};
                	},
                
                	_cacheHelperProportions: function() {
                		this.helperProportions = {
                			width: this.helper.outerWidth(),
                			height: this.helper.outerHeight()
                		};
                	},
                
                	_setContainment: function() {
                
                		var over, c, ce,
                			o = this.options;
                
                		if(o.containment === "parent") {
                			o.containment = this.helper[0].parentNode;
                		}
                		if(o.containment === "document" || o.containment === "window") {
                			this.containment = [
                				o.containment === "document" ? 0 : $(window).scrollLeft() - this.offset.relative.left - this.offset.parent.left,
                				o.containment === "document" ? 0 : $(window).scrollTop() - this.offset.relative.top - this.offset.parent.top,
                				(o.containment === "document" ? 0 : $(window).scrollLeft()) + $(o.containment === "document" ? document : window).width() - this.helperProportions.width - this.margins.left,
                				(o.containment === "document" ? 0 : $(window).scrollTop()) + ($(o.containment === "document" ? document : window).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top
                			];
                		}
                
                		if(!(/^(document|window|parent)$/).test(o.containment) && o.containment.constructor !== Array) {
                			c = $(o.containment);
                			ce = c[0];
                
                			if(!ce) {
                				return;
                			}
                
                			over = ($(ce).css("overflow") !== "hidden");
                
                			this.containment = [
                				(parseInt($(ce).css("borderLeftWidth"),10) || 0) + (parseInt($(ce).css("paddingLeft"),10) || 0),
                				(parseInt($(ce).css("borderTopWidth"),10) || 0) + (parseInt($(ce).css("paddingTop"),10) || 0),
                				(over ? Math.max(ce.scrollWidth,ce.offsetWidth) : ce.offsetWidth) - (parseInt($(ce).css("borderLeftWidth"),10) || 0) - (parseInt($(ce).css("paddingRight"),10) || 0) - this.helperProportions.width - this.margins.left - this.margins.right,
                				(over ? Math.max(ce.scrollHeight,ce.offsetHeight) : ce.offsetHeight) - (parseInt($(ce).css("borderTopWidth"),10) || 0) - (parseInt($(ce).css("paddingBottom"),10) || 0) - this.helperProportions.height - this.margins.top  - this.margins.bottom
                			];
                			this.relative_container = c;
                
                		} else if(o.containment.constructor === Array) {
                			this.containment = o.containment;
                		}
                
                	},
                
                	_convertPositionTo: function(d, pos) {
                
                		if(!pos) {
                			pos = this.position;
                		}
                
                		var mod = d === "absolute" ? 1 : -1,
                			scroll = this.cssPosition === "absolute" && !(this.scrollParent[0] !== document && $.contains(this.scrollParent[0], this.offsetParent[0])) ? this.offsetParent : this.scrollParent, scrollIsRootNode = (/(html|body)/i).test(scroll[0].tagName);
                
                		return {
                			top: (
                				pos.top	+																// The absolute mouse position
                				this.offset.relative.top * mod +										// Only for relative positioned nodes: Relative offset from element to offset parent
                				this.offset.parent.top * mod -										// The offsetParent's offset without borders (offset + border)
                				( ( this.cssPosition === "fixed" ? -this.scrollParent.scrollTop() : ( scrollIsRootNode ? 0 : scroll.scrollTop() ) ) * mod)
                			),
                			left: (
                				pos.left +																// The absolute mouse position
                				this.offset.relative.left * mod +										// Only for relative positioned nodes: Relative offset from element to offset parent
                				this.offset.parent.left * mod	-										// The offsetParent's offset without borders (offset + border)
                				( ( this.cssPosition === "fixed" ? -this.scrollParent.scrollLeft() : scrollIsRootNode ? 0 : scroll.scrollLeft() ) * mod)
                			)
                		};
                
                	},
                
                	_generatePosition: function(event) {
                
                		var containment, co, top, left,
                			o = this.options,
                			scroll = this.cssPosition === "absolute" && !(this.scrollParent[0] !== document && $.contains(this.scrollParent[0], this.offsetParent[0])) ? this.offsetParent : this.scrollParent,
                			scrollIsRootNode = (/(html|body)/i).test(scroll[0].tagName),
                			pageX = event.pageX,
                			pageY = event.pageY;
                
                		/*
                		 * - Position constraining -
                		 * Constrain the position to a mix of grid, containment.
                		 */
                
                		if(this.originalPosition) { //If we are not dragging yet, we won't check for options
                			if(this.containment) {
                			if (this.relative_container){
                				co = this.relative_container.offset();
                				containment = [ this.containment[0] + co.left,
                					this.containment[1] + co.top,
                					this.containment[2] + co.left,
                					this.containment[3] + co.top ];
                			}
                			else {
                				containment = this.containment;
                			}
                
                				if(event.pageX - this.offset.click.left < containment[0]) {
                					pageX = containment[0] + this.offset.click.left;
                				}
                				if(event.pageY - this.offset.click.top < containment[1]) {
                					pageY = containment[1] + this.offset.click.top;
                				}
                				if(event.pageX - this.offset.click.left > containment[2]) {
                					pageX = containment[2] + this.offset.click.left;
                				}
                				if(event.pageY - this.offset.click.top > containment[3]) {
                					pageY = containment[3] + this.offset.click.top;
                				}
                			}
                
                			if(o.grid) {
                				//Check for grid elements set to 0 to prevent divide by 0 error causing invalid argument errors in IE (see ticket #6950)
                				top = o.grid[1] ? this.originalPageY + Math.round((pageY - this.originalPageY) / o.grid[1]) * o.grid[1] : this.originalPageY;
                				pageY = containment ? ((top - this.offset.click.top >= containment[1] || top - this.offset.click.top > containment[3]) ? top : ((top - this.offset.click.top >= containment[1]) ? top - o.grid[1] : top + o.grid[1])) : top;
                
                				left = o.grid[0] ? this.originalPageX + Math.round((pageX - this.originalPageX) / o.grid[0]) * o.grid[0] : this.originalPageX;
                				pageX = containment ? ((left - this.offset.click.left >= containment[0] || left - this.offset.click.left > containment[2]) ? left : ((left - this.offset.click.left >= containment[0]) ? left - o.grid[0] : left + o.grid[0])) : left;
                			}
                
                		}
                
                		return {
                			top: (
                				pageY -																	// The absolute mouse position
                				this.offset.click.top	-												// Click offset (relative to the element)
                				this.offset.relative.top -												// Only for relative positioned nodes: Relative offset from element to offset parent
                				this.offset.parent.top +												// The offsetParent's offset without borders (offset + border)
                				( ( this.cssPosition === "fixed" ? -this.scrollParent.scrollTop() : ( scrollIsRootNode ? 0 : scroll.scrollTop() ) ))
                			),
                			left: (
                				pageX -																	// The absolute mouse position
                				this.offset.click.left -												// Click offset (relative to the element)
                				this.offset.relative.left -												// Only for relative positioned nodes: Relative offset from element to offset parent
                				this.offset.parent.left +												// The offsetParent's offset without borders (offset + border)
                				( ( this.cssPosition === "fixed" ? -this.scrollParent.scrollLeft() : scrollIsRootNode ? 0 : scroll.scrollLeft() ))
                			)
                		};
                
                	},
                
                	_clear: function() {
                		this.helper.removeClass("ui-draggable-dragging");
                		if(this.helper[0] !== this.element[0] && !this.cancelHelperRemoval) {
                			this.helper.remove();
                		}
                		this.helper = null;
                		this.cancelHelperRemoval = false;
                	},
                
                	// From now on bulk stuff - mainly helpers
                
                	_trigger: function(type, event, ui) {
                		ui = ui || this._uiHash();
                		$.ui.plugin.call(this, type, [event, ui]);
                		//The absolute position has to be recalculated after plugins
                		if(type === "drag") {
                			this.positionAbs = this._convertPositionTo("absolute");
                		}
                		return $.Widget.prototype._trigger.call(this, type, event, ui);
                	},
                
                	plugins: {},
                
                	_uiHash: function() {
                		return {
                			helper: this.helper,
                			position: this.position,
                			originalPosition: this.originalPosition,
                			offset: this.positionAbs
                		};
                	}
                
                });
                
                $.ui.plugin.add("draggable", "connectToSortable", {
                	start: function(event, ui) {
                
                		var inst = $(this).data("ui-draggable"), o = inst.options,
                			uiSortable = $.extend({}, ui, { item: inst.element });
                		inst.sortables = [];
                		$(o.connectToSortable).each(function() {
                			var sortable = $.data(this, "ui-sortable");
                			if (sortable && !sortable.options.disabled) {
                				inst.sortables.push({
                					instance: sortable,
                					shouldRevert: sortable.options.revert
                				});
                				sortable.refreshPositions();	// Call the sortable's refreshPositions at drag start to refresh the containerCache since the sortable container cache is used in drag and needs to be up to date (this will ensure it's initialised as well as being kept in step with any changes that might have happened on the page).
                				sortable._trigger("activate", event, uiSortable);
                			}
                		});
                
                	},
                	stop: function(event, ui) {
                
                		//If we are still over the sortable, we fake the stop event of the sortable, but also remove helper
                		var inst = $(this).data("ui-draggable"),
                			uiSortable = $.extend({}, ui, { item: inst.element });
                
                		$.each(inst.sortables, function() {
                			if(this.instance.isOver) {
                
                				this.instance.isOver = 0;
                
                				inst.cancelHelperRemoval = true; //Don't remove the helper in the draggable instance
                				this.instance.cancelHelperRemoval = false; //Remove it in the sortable instance (so sortable plugins like revert still work)
                
                				//The sortable revert is supported, and we have to set a temporary dropped variable on the draggable to support revert: "valid/invalid"
                				if(this.shouldRevert) {
                					this.instance.options.revert = true;
                				}
                
                				//Trigger the stop of the sortable
                				this.instance._mouseStop(event);
                
                				this.instance.options.helper = this.instance.options._helper;
                
                				//If the helper has been the original item, restore properties in the sortable
                				if(inst.options.helper === "original") {
                					this.instance.currentItem.css({ top: "auto", left: "auto" });
                				}
                
                			} else {
                				this.instance.cancelHelperRemoval = false; //Remove the helper in the sortable instance
                				this.instance._trigger("deactivate", event, uiSortable);
                			}
                
                		});
                
                	},
                	drag: function(event, ui) {
                
                		var inst = $(this).data("ui-draggable"), that = this;
                
                		$.each(inst.sortables, function() {
                
                			var innermostIntersecting = false,
                				thisSortable = this;
                
                			//Copy over some variables to allow calling the sortable's native _intersectsWith
                			this.instance.positionAbs = inst.positionAbs;
                			this.instance.helperProportions = inst.helperProportions;
                			this.instance.offset.click = inst.offset.click;
                
                			if(this.instance._intersectsWith(this.instance.containerCache)) {
                				innermostIntersecting = true;
                				$.each(inst.sortables, function () {
                					this.instance.positionAbs = inst.positionAbs;
                					this.instance.helperProportions = inst.helperProportions;
                					this.instance.offset.click = inst.offset.click;
                					if (this !== thisSortable &&
                						this.instance._intersectsWith(this.instance.containerCache) &&
                						$.ui.contains(thisSortable.instance.element[0], this.instance.element[0])
                					) {
                						innermostIntersecting = false;
                					}
                					return innermostIntersecting;
                				});
                			}
                
                
                			if(innermostIntersecting) {
                				//If it intersects, we use a little isOver variable and set it once, so our move-in stuff gets fired only once
                				if(!this.instance.isOver) {
                
                					this.instance.isOver = 1;
                					//Now we fake the start of dragging for the sortable instance,
                					//by cloning the list group item, appending it to the sortable and using it as inst.currentItem
                					//We can then fire the start event of the sortable with our passed browser event, and our own helper (so it doesn't create a new one)
                					this.instance.currentItem = $(that).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item", true);
                					this.instance.options._helper = this.instance.options.helper; //Store helper option to later restore it
                					this.instance.options.helper = function() { return ui.helper[0]; };
                
                					event.target = this.instance.currentItem[0];
                					this.instance._mouseCapture(event, true);
                					this.instance._mouseStart(event, true, true);
                
                					//Because the browser event is way off the new appended portlet, we modify a couple of variables to reflect the changes
                					this.instance.offset.click.top = inst.offset.click.top;
                					this.instance.offset.click.left = inst.offset.click.left;
                					this.instance.offset.parent.left -= inst.offset.parent.left - this.instance.offset.parent.left;
                					this.instance.offset.parent.top -= inst.offset.parent.top - this.instance.offset.parent.top;
                
                					inst._trigger("toSortable", event);
                					inst.dropped = this.instance.element; //draggable revert needs that
                					//hack so receive/update callbacks work (mostly)
                					inst.currentItem = inst.element;
                					this.instance.fromOutside = inst;
                
                				}
                
                				//Provided we did all the previous steps, we can fire the drag event of the sortable on every draggable drag, when it intersects with the sortable
                				if(this.instance.currentItem) {
                					this.instance._mouseDrag(event);
                				}
                
                			} else {
                
                				//If it doesn't intersect with the sortable, and it intersected before,
                				//we fake the drag stop of the sortable, but make sure it doesn't remove the helper by using cancelHelperRemoval
                				if(this.instance.isOver) {
                
                					this.instance.isOver = 0;
                					this.instance.cancelHelperRemoval = true;
                
                					//Prevent reverting on this forced stop
                					this.instance.options.revert = false;
                
                					// The out event needs to be triggered independently
                					this.instance._trigger("out", event, this.instance._uiHash(this.instance));
                
                					this.instance._mouseStop(event, true);
                					this.instance.options.helper = this.instance.options._helper;
                
                					//Now we remove our currentItem, the list group clone again, and the placeholder, and animate the helper back to it's original size
                					this.instance.currentItem.remove();
                					if(this.instance.placeholder) {
                						this.instance.placeholder.remove();
                					}
                
                					inst._trigger("fromSortable", event);
                					inst.dropped = false; //draggable revert needs that
                				}
                
                			}
                
                		});
                
                	}
                });
                
                $.ui.plugin.add("draggable", "cursor", {
                	start: function() {
                		var t = $("body"), o = $(this).data("ui-draggable").options;
                		if (t.css("cursor")) {
                			o._cursor = t.css("cursor");
                		}
                		t.css("cursor", o.cursor);
                	},
                	stop: function() {
                		var o = $(this).data("ui-draggable").options;
                		if (o._cursor) {
                			$("body").css("cursor", o._cursor);
                		}
                	}
                });
                
                $.ui.plugin.add("draggable", "opacity", {
                	start: function(event, ui) {
                		var t = $(ui.helper), o = $(this).data("ui-draggable").options;
                		if(t.css("opacity")) {
                			o._opacity = t.css("opacity");
                		}
                		t.css("opacity", o.opacity);
                	},
                	stop: function(event, ui) {
                		var o = $(this).data("ui-draggable").options;
                		if(o._opacity) {
                			$(ui.helper).css("opacity", o._opacity);
                		}
                	}
                });
                
                $.ui.plugin.add("draggable", "scroll", {
                	start: function() {
                		var i = $(this).data("ui-draggable");
                		if(i.scrollParent[0] !== document && i.scrollParent[0].tagName !== "HTML") {
                			i.overflowOffset = i.scrollParent.offset();
                		}
                	},
                	drag: function( event ) {
                
                		var i = $(this).data("ui-draggable"), o = i.options, scrolled = false;
                
                		if(i.scrollParent[0] !== document && i.scrollParent[0].tagName !== "HTML") {
                
                			if(!o.axis || o.axis !== "x") {
                				if((i.overflowOffset.top + i.scrollParent[0].offsetHeight) - event.pageY < o.scrollSensitivity) {
                					i.scrollParent[0].scrollTop = scrolled = i.scrollParent[0].scrollTop + o.scrollSpeed;
                				} else if(event.pageY - i.overflowOffset.top < o.scrollSensitivity) {
                					i.scrollParent[0].scrollTop = scrolled = i.scrollParent[0].scrollTop - o.scrollSpeed;
                				}
                			}
                
                			if(!o.axis || o.axis !== "y") {
                				if((i.overflowOffset.left + i.scrollParent[0].offsetWidth) - event.pageX < o.scrollSensitivity) {
                					i.scrollParent[0].scrollLeft = scrolled = i.scrollParent[0].scrollLeft + o.scrollSpeed;
                				} else if(event.pageX - i.overflowOffset.left < o.scrollSensitivity) {
                					i.scrollParent[0].scrollLeft = scrolled = i.scrollParent[0].scrollLeft - o.scrollSpeed;
                				}
                			}
                
                		} else {
                
                			if(!o.axis || o.axis !== "x") {
                				if(event.pageY - $(document).scrollTop() < o.scrollSensitivity) {
                					scrolled = $(document).scrollTop($(document).scrollTop() - o.scrollSpeed);
                				} else if($(window).height() - (event.pageY - $(document).scrollTop()) < o.scrollSensitivity) {
                					scrolled = $(document).scrollTop($(document).scrollTop() + o.scrollSpeed);
                				}
                			}
                
                			if(!o.axis || o.axis !== "y") {
                				if(event.pageX - $(document).scrollLeft() < o.scrollSensitivity) {
                					scrolled = $(document).scrollLeft($(document).scrollLeft() - o.scrollSpeed);
                				} else if($(window).width() - (event.pageX - $(document).scrollLeft()) < o.scrollSensitivity) {
                					scrolled = $(document).scrollLeft($(document).scrollLeft() + o.scrollSpeed);
                				}
                			}
                
                		}
                
                		if(scrolled !== false && $.ui.ddmanager && !o.dropBehaviour) {
                			$.ui.ddmanager.prepareOffsets(i, event);
                		}
                
                	}
                });
                
                $.ui.plugin.add("draggable", "snap", {
                	start: function() {
                
                		var i = $(this).data("ui-draggable"),
                			o = i.options;
                
                		i.snapElements = [];
                
                		$(o.snap.constructor !== String ? ( o.snap.items || ":data(ui-draggable)" ) : o.snap).each(function() {
                			var $t = $(this),
                				$o = $t.offset();
                			if(this !== i.element[0]) {
                				i.snapElements.push({
                					item: this,
                					width: $t.outerWidth(), height: $t.outerHeight(),
                					top: $o.top, left: $o.left
                				});
                			}
                		});
                
                	},
                	drag: function(event, ui) {
                
                		var ts, bs, ls, rs, l, r, t, b, i, first,
                			inst = $(this).data("ui-draggable"),
                			o = inst.options,
                			d = o.snapTolerance,
                			x1 = ui.offset.left, x2 = x1 + inst.helperProportions.width,
                			y1 = ui.offset.top, y2 = y1 + inst.helperProportions.height;
                
                		for (i = inst.snapElements.length - 1; i >= 0; i--){
                
                			l = inst.snapElements[i].left;
                			r = l + inst.snapElements[i].width;
                			t = inst.snapElements[i].top;
                			b = t + inst.snapElements[i].height;
                
                			//Yes, I know, this is insane ;)
                			if(!((l-d < x1 && x1 < r+d && t-d < y1 && y1 < b+d) || (l-d < x1 && x1 < r+d && t-d < y2 && y2 < b+d) || (l-d < x2 && x2 < r+d && t-d < y1 && y1 < b+d) || (l-d < x2 && x2 < r+d && t-d < y2 && y2 < b+d))) {
                				if(inst.snapElements[i].snapping) {
                					(inst.options.snap.release && inst.options.snap.release.call(inst.element, event, $.extend(inst._uiHash(), { snapItem: inst.snapElements[i].item })));
                				}
                				inst.snapElements[i].snapping = false;
                				continue;
                			}
                
                			if(o.snapMode !== "inner") {
                				ts = Math.abs(t - y2) <= d;
                				bs = Math.abs(b - y1) <= d;
                				ls = Math.abs(l - x2) <= d;
                				rs = Math.abs(r - x1) <= d;
                				if(ts) {
                					ui.position.top = inst._convertPositionTo("relative", { top: t - inst.helperProportions.height, left: 0 }).top - inst.margins.top;
                				}
                				if(bs) {
                					ui.position.top = inst._convertPositionTo("relative", { top: b, left: 0 }).top - inst.margins.top;
                				}
                				if(ls) {
                					ui.position.left = inst._convertPositionTo("relative", { top: 0, left: l - inst.helperProportions.width }).left - inst.margins.left;
                				}
                				if(rs) {
                					ui.position.left = inst._convertPositionTo("relative", { top: 0, left: r }).left - inst.margins.left;
                				}
                			}
                
                			first = (ts || bs || ls || rs);
                
                			if(o.snapMode !== "outer") {
                				ts = Math.abs(t - y1) <= d;
                				bs = Math.abs(b - y2) <= d;
                				ls = Math.abs(l - x1) <= d;
                				rs = Math.abs(r - x2) <= d;
                				if(ts) {
                					ui.position.top = inst._convertPositionTo("relative", { top: t, left: 0 }).top - inst.margins.top;
                				}
                				if(bs) {
                					ui.position.top = inst._convertPositionTo("relative", { top: b - inst.helperProportions.height, left: 0 }).top - inst.margins.top;
                				}
                				if(ls) {
                					ui.position.left = inst._convertPositionTo("relative", { top: 0, left: l }).left - inst.margins.left;
                				}
                				if(rs) {
                					ui.position.left = inst._convertPositionTo("relative", { top: 0, left: r - inst.helperProportions.width }).left - inst.margins.left;
                				}
                			}
                
                			if(!inst.snapElements[i].snapping && (ts || bs || ls || rs || first)) {
                				(inst.options.snap.snap && inst.options.snap.snap.call(inst.element, event, $.extend(inst._uiHash(), { snapItem: inst.snapElements[i].item })));
                			}
                			inst.snapElements[i].snapping = (ts || bs || ls || rs || first);
                
                		}
                
                	}
                });
                
                $.ui.plugin.add("draggable", "stack", {
                	start: function() {
                
                		var min,
                			o = $(this).data("ui-draggable").options,
                			group = $.makeArray($(o.stack)).sort(function(a,b) {
                				return (parseInt($(a).css("zIndex"),10) || 0) - (parseInt($(b).css("zIndex"),10) || 0);
                			});
                
                		if (!group.length) { return; }
                
                		min = parseInt(group[0].style.zIndex, 10) || 0;
                		$(group).each(function(i) {
                			this.style.zIndex = min + i;
                		});
                
                		this[0].style.zIndex = min + group.length;
                
                	}
                });
                
                $.ui.plugin.add("draggable", "zIndex", {
                	start: function(event, ui) {
                		var t = $(ui.helper), o = $(this).data("ui-draggable").options;
                		if(t.css("zIndex")) {
                			o._zIndex = t.css("zIndex");
                		}
                		t.css("zIndex", o.zIndex);
                	},
                	stop: function(event, ui) {
                		var o = $(this).data("ui-draggable").options;
                		if(o._zIndex) {
                			$(ui.helper).css("zIndex", o._zIndex);
                		}
                	}
                });
                
                })(jQuery);
                
                });
                define('jquery_ui/droppable',['jquery','./core','./widget','./mouse','./draggable'], function (jQuery) {
                /*!
                 * jQuery UI Droppable 1.10.0
                 * http://jqueryui.com
                 *
                 * Copyright 2013 jQuery Foundation and other contributors
                 * Released under the MIT license.
                 * http://jquery.org/license
                 *
                 * http://api.jqueryui.com/droppable/
                 *
                 * Depends:
                 *	jquery.ui.core.js
                 *	jquery.ui.widget.js
                 *	jquery.ui.mouse.js
                 *	jquery.ui.draggable.js
                 */
                (function( $, undefined ) {
                
                function isOverAxis( x, reference, size ) {
                	return ( x > reference ) && ( x < ( reference + size ) );
                }
                
                $.widget("ui.droppable", {
                	version: "1.10.0",
                	widgetEventPrefix: "drop",
                	options: {
                		accept: "*",
                		activeClass: false,
                		addClasses: true,
                		greedy: false,
                		hoverClass: false,
                		scope: "default",
                		tolerance: "intersect",
                
                		// callbacks
                		activate: null,
                		deactivate: null,
                		drop: null,
                		out: null,
                		over: null
                	},
                	_create: function() {
                
                		var o = this.options,
                			accept = o.accept;
                
                		this.isover = false;
                		this.isout = true;
                
                		this.accept = $.isFunction(accept) ? accept : function(d) {
                			return d.is(accept);
                		};
                
                		//Store the droppable's proportions
                		this.proportions = { width: this.element[0].offsetWidth, height: this.element[0].offsetHeight };
                
                		// Add the reference and positions to the manager
                		$.ui.ddmanager.droppables[o.scope] = $.ui.ddmanager.droppables[o.scope] || [];
                		$.ui.ddmanager.droppables[o.scope].push(this);
                
                		(o.addClasses && this.element.addClass("ui-droppable"));
                
                	},
                
                	_destroy: function() {
                		var i = 0,
                			drop = $.ui.ddmanager.droppables[this.options.scope];
                
                		for ( ; i < drop.length; i++ ) {
                			if ( drop[i] === this ) {
                				drop.splice(i, 1);
                			}
                		}
                
                		this.element.removeClass("ui-droppable ui-droppable-disabled");
                	},
                
                	_setOption: function(key, value) {
                
                		if(key === "accept") {
                			this.accept = $.isFunction(value) ? value : function(d) {
                				return d.is(value);
                			};
                		}
                		$.Widget.prototype._setOption.apply(this, arguments);
                	},
                
                	_activate: function(event) {
                		var draggable = $.ui.ddmanager.current;
                		if(this.options.activeClass) {
                			this.element.addClass(this.options.activeClass);
                		}
                		if(draggable){
                			this._trigger("activate", event, this.ui(draggable));
                		}
                	},
                
                	_deactivate: function(event) {
                		var draggable = $.ui.ddmanager.current;
                		if(this.options.activeClass) {
                			this.element.removeClass(this.options.activeClass);
                		}
                		if(draggable){
                			this._trigger("deactivate", event, this.ui(draggable));
                		}
                	},
                
                	_over: function(event) {
                
                		var draggable = $.ui.ddmanager.current;
                
                		// Bail if draggable and droppable are same element
                		if (!draggable || (draggable.currentItem || draggable.element)[0] === this.element[0]) {
                			return;
                		}
                
                		if (this.accept.call(this.element[0],(draggable.currentItem || draggable.element))) {
                			if(this.options.hoverClass) {
                				this.element.addClass(this.options.hoverClass);
                			}
                			this._trigger("over", event, this.ui(draggable));
                		}
                
                	},
                
                	_out: function(event) {
                
                		var draggable = $.ui.ddmanager.current;
                
                		// Bail if draggable and droppable are same element
                		if (!draggable || (draggable.currentItem || draggable.element)[0] === this.element[0]) {
                			return;
                		}
                
                		if (this.accept.call(this.element[0],(draggable.currentItem || draggable.element))) {
                			if(this.options.hoverClass) {
                				this.element.removeClass(this.options.hoverClass);
                			}
                			this._trigger("out", event, this.ui(draggable));
                		}
                
                	},
                
                	_drop: function(event,custom) {
                
                		var draggable = custom || $.ui.ddmanager.current,
                			childrenIntersection = false;
                
                		// Bail if draggable and droppable are same element
                		if (!draggable || (draggable.currentItem || draggable.element)[0] === this.element[0]) {
                			return false;
                		}
                
                		this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function() {
                			var inst = $.data(this, "ui-droppable");
                			if(
                				inst.options.greedy &&
                				!inst.options.disabled &&
                				inst.options.scope === draggable.options.scope &&
                				inst.accept.call(inst.element[0], (draggable.currentItem || draggable.element)) &&
                				$.ui.intersect(draggable, $.extend(inst, { offset: inst.element.offset() }), inst.options.tolerance)
                			) { childrenIntersection = true; return false; }
                		});
                		if(childrenIntersection) {
                			return false;
                		}
                
                		if(this.accept.call(this.element[0],(draggable.currentItem || draggable.element))) {
                			if(this.options.activeClass) {
                				this.element.removeClass(this.options.activeClass);
                			}
                			if(this.options.hoverClass) {
                				this.element.removeClass(this.options.hoverClass);
                			}
                			this._trigger("drop", event, this.ui(draggable));
                			return this.element;
                		}
                
                		return false;
                
                	},
                
                	ui: function(c) {
                		return {
                			draggable: (c.currentItem || c.element),
                			helper: c.helper,
                			position: c.position,
                			offset: c.positionAbs
                		};
                	}
                
                });
                
                $.ui.intersect = function(draggable, droppable, toleranceMode) {
                
                	if (!droppable.offset) {
                		return false;
                	}
                
                	var draggableLeft, draggableTop,
                		x1 = (draggable.positionAbs || draggable.position.absolute).left, x2 = x1 + draggable.helperProportions.width,
                		y1 = (draggable.positionAbs || draggable.position.absolute).top, y2 = y1 + draggable.helperProportions.height,
                		l = droppable.offset.left, r = l + droppable.proportions.width,
                		t = droppable.offset.top, b = t + droppable.proportions.height;
                
                	switch (toleranceMode) {
                		case "fit":
                			return (l <= x1 && x2 <= r && t <= y1 && y2 <= b);
                		case "intersect":
                			return (l < x1 + (draggable.helperProportions.width / 2) && // Right Half
                				x2 - (draggable.helperProportions.width / 2) < r && // Left Half
                				t < y1 + (draggable.helperProportions.height / 2) && // Bottom Half
                				y2 - (draggable.helperProportions.height / 2) < b ); // Top Half
                		case "pointer":
                			draggableLeft = ((draggable.positionAbs || draggable.position.absolute).left + (draggable.clickOffset || draggable.offset.click).left);
                			draggableTop = ((draggable.positionAbs || draggable.position.absolute).top + (draggable.clickOffset || draggable.offset.click).top);
                			return isOverAxis( draggableTop, t, droppable.proportions.height ) && isOverAxis( draggableLeft, l, droppable.proportions.width );
                		case "touch":
                			return (
                				(y1 >= t && y1 <= b) ||	// Top edge touching
                				(y2 >= t && y2 <= b) ||	// Bottom edge touching
                				(y1 < t && y2 > b)		// Surrounded vertically
                			) && (
                				(x1 >= l && x1 <= r) ||	// Left edge touching
                				(x2 >= l && x2 <= r) ||	// Right edge touching
                				(x1 < l && x2 > r)		// Surrounded horizontally
                			);
                		default:
                			return false;
                		}
                
                };
                
                /*
                	This manager tracks offsets of draggables and droppables
                */
                $.ui.ddmanager = {
                	current: null,
                	droppables: { "default": [] },
                	prepareOffsets: function(t, event) {
                
                		var i, j,
                			m = $.ui.ddmanager.droppables[t.options.scope] || [],
                			type = event ? event.type : null, // workaround for #2317
                			list = (t.currentItem || t.element).find(":data(ui-droppable)").addBack();
                
                		droppablesLoop: for (i = 0; i < m.length; i++) {
                
                			//No disabled and non-accepted
                			if(m[i].options.disabled || (t && !m[i].accept.call(m[i].element[0],(t.currentItem || t.element)))) {
                				continue;
                			}
                
                			// Filter out elements in the current dragged item
                			for (j=0; j < list.length; j++) {
                				if(list[j] === m[i].element[0]) {
                					m[i].proportions.height = 0;
                					continue droppablesLoop;
                				}
                			}
                
                			m[i].visible = m[i].element.css("display") !== "none";
                			if(!m[i].visible) {
                				continue;
                			}
                
                			//Activate the droppable if used directly from draggables
                			if(type === "mousedown") {
                				m[i]._activate.call(m[i], event);
                			}
                
                			m[i].offset = m[i].element.offset();
                			m[i].proportions = { width: m[i].element[0].offsetWidth, height: m[i].element[0].offsetHeight };
                
                		}
                
                	},
                	drop: function(draggable, event) {
                
                		var dropped = false;
                		$.each($.ui.ddmanager.droppables[draggable.options.scope] || [], function() {
                
                			if(!this.options) {
                				return;
                			}
                			if (!this.options.disabled && this.visible && $.ui.intersect(draggable, this, this.options.tolerance)) {
                				dropped = this._drop.call(this, event) || dropped;
                			}
                
                			if (!this.options.disabled && this.visible && this.accept.call(this.element[0],(draggable.currentItem || draggable.element))) {
                				this.isout = true;
                				this.isover = false;
                				this._deactivate.call(this, event);
                			}
                
                		});
                		return dropped;
                
                	},
                	dragStart: function( draggable, event ) {
                		//Listen for scrolling so that if the dragging causes scrolling the position of the droppables can be recalculated (see #5003)
                		draggable.element.parentsUntil( "body" ).bind( "scroll.droppable", function() {
                			if( !draggable.options.refreshPositions ) {
                				$.ui.ddmanager.prepareOffsets( draggable, event );
                			}
                		});
                	},
                	drag: function(draggable, event) {
                
                		//If you have a highly dynamic page, you might try this option. It renders positions every time you move the mouse.
                		if(draggable.options.refreshPositions) {
                			$.ui.ddmanager.prepareOffsets(draggable, event);
                		}
                
                		//Run through all droppables and check their positions based on specific tolerance options
                		$.each($.ui.ddmanager.droppables[draggable.options.scope] || [], function() {
                
                			if(this.options.disabled || this.greedyChild || !this.visible) {
                				return;
                			}
                
                			var parentInstance, scope, parent,
                				intersects = $.ui.intersect(draggable, this, this.options.tolerance),
                				c = !intersects && this.isover ? "isout" : (intersects && !this.isover ? "isover" : null);
                			if(!c) {
                				return;
                			}
                
                			if (this.options.greedy) {
                				// find droppable parents with same scope
                				scope = this.options.scope;
                				parent = this.element.parents(":data(ui-droppable)").filter(function () {
                					return $.data(this, "ui-droppable").options.scope === scope;
                				});
                
                				if (parent.length) {
                					parentInstance = $.data(parent[0], "ui-droppable");
                					parentInstance.greedyChild = (c === "isover");
                				}
                			}
                
                			// we just moved into a greedy child
                			if (parentInstance && c === "isover") {
                				parentInstance.isover = false;
                				parentInstance.isout = true;
                				parentInstance._out.call(parentInstance, event);
                			}
                
                			this[c] = true;
                			this[c === "isout" ? "isover" : "isout"] = false;
                			this[c === "isover" ? "_over" : "_out"].call(this, event);
                
                			// we just moved out of a greedy child
                			if (parentInstance && c === "isout") {
                				parentInstance.isout = false;
                				parentInstance.isover = true;
                				parentInstance._over.call(parentInstance, event);
                			}
                		});
                
                	},
                	dragStop: function( draggable, event ) {
                		draggable.element.parentsUntil( "body" ).unbind( "scroll.droppable" );
                		//Call prepareOffsets one final time since IE does not fire return scroll events when overflow was caused by drag (see #5003)
                		if( !draggable.options.refreshPositions ) {
                			$.ui.ddmanager.prepareOffsets( draggable, event );
                		}
                	}
                };
                
                })(jQuery);
                
                });
                define('widget/crossfiltertemplate',[],function(){
                  var template = function(__obj) {
                  var _safe = function(value) {
                    if (typeof value === 'undefined' && value == null)
                      value = '';
                    var result = new String(value);
                    result.ecoSafe = true;
                    return result;
                  };
                  return (function() {
                    var __out = [], __self = this, _print = function(value) {
                      if (typeof value !== 'undefined' && value != null)
                        __out.push(value.ecoSafe ? value : __self.escape(value));
                    }, _capture = function(callback) {
                      var out = __out, result;
                      __out = [];
                      callback.call(this);
                      result = __out.join('');
                      __out = out;
                      return _safe(result);
                    };
                    (function() {
                      _print(_safe('<div class="bk-crossfilter-container">\n  <table>\n    <tr>\n      <td class="aligntable">\n        <div class="bk-crossfilter-configuration bk-bs-container">\n          <div class="bk-crossfilter-row">\n            <div class="col-md-4 bk-column-list">\n            </div>\n            <div class="col-md-5 bk-filters-facets">\n              <div class="bk-bs-panel bk-bs-panel-primary bk-filters">\n                <div class="bk-bs-panel-heading bk-crossfilter-panel-heading">\n                  Filter\n                </div>\n                <div class="bk-bs-panel-body bk-filters-selections">\n                </div>\n              </div>\n              <div class="bk-bs-panel bk-bs-panel-primary bk-facet bk-facet-x">\n                <div class="bk-bs-panel-heading bk-crossfilter-panel-heading">\n                  Facet X\n                </div>\n                <div class="bk-facets-selections ">\n                </div>\n              </div>\n              <div class="bk-bs-panel bk-bs-panel-primary bk-facet bk-facet-y">\n                <div class="bk-bs-panel-heading bk-crossfilter-panel-heading">\n                  Facet Y\n                </div>\n                <div class="bk-facets-selections ">\n                </div>\n              </div>\n              <div class="bk-bs-panel bk-bs-panel-primary bk-facet bk-facet-tab">\n                <div class="bk-bs-panel-heading bk-crossfilter-panel-heading">\n                  Facet Tab (Coming Soon)\n                </div>\n                <div class="bk-facets-selections ">\n                </div>\n              </div>\n            </div>\n            <div class="col-md-3 bk-plot-selection">\n              <form class="bk-widget-form">\n                <div class="bk-plot-selector">\n                </div>\n                <div class="bk-x-selector">\n                </div>\n                <div class="bk-y-selector">\n                </div>\n                <div class="bk-agg-selector">\n                </div>\n              </form>\n            </div>\n          </div>\n        </div>\n      </td>\n      <td class="aligntable">\n        <div class="bk-plot">\n        </div>\n      </td>\n    </tr>\n  </table>\n</div>\n'));
                    
                    }).call(this);
                    
                    return __out.join('');
                  }).call((function() {
                    var obj = {
                      escape: function(value) {
                        return ('' + value)
                          .replace(/&/g, '&amp;')
                          .replace(/</g, '&lt;')
                          .replace(/>/g, '&gt;')
                          .replace(/"/g, '&quot;');
                      },
                      safe: _safe
                    }, key;
                    for (key in __obj) obj[key] = __obj[key];
                    return obj;
                  })());
                };
                  return template;
                });
                
                define('widget/discretecolumntemplate',[],function(){
                  var template = function(__obj) {
                  var _safe = function(value) {
                    if (typeof value === 'undefined' && value == null)
                      value = '';
                    var result = new String(value);
                    result.ecoSafe = true;
                    return result;
                  };
                  return (function() {
                    var __out = [], __self = this, _print = function(value) {
                      if (typeof value !== 'undefined' && value != null)
                        __out.push(value.ecoSafe ? value : __self.escape(value));
                    }, _capture = function(callback) {
                      var out = __out, result;
                      __out = [];
                      callback.call(this);
                      result = __out.join('');
                      __out = out;
                      return _safe(result);
                    };
                    (function() {
                      _print(_safe('<div class="bk-bs-panel-heading bk-crossfilter-panel-heading">\n  Factor: '));
                    
                      _print(this.name);
                    
                      _print(_safe('\n</div>\n<div class="bk-bs-panel-body">\n  <table class="bk-table">\n    <tbody>\n      <tr>\n        <td>\n          count\n        </td>\n        <td>\n          '));
                    
                      _print(this.count);
                    
                      _print(_safe('\n        </td>\n      </tr>\n      <tr>\n        <td>\n          unique\n        </td>\n        <td>\n          '));
                    
                      _print(this.unique);
                    
                      _print(_safe('\n        </td>\n      </tr>\n      <tr>\n        <td>\n          top\n        </td>\n        <td>\n          '));
                    
                      _print(this.top);
                    
                      _print(_safe('\n        </td>\n      </tr>\n      <tr>\n        <td>\n          freq\n        </td>\n        <td>\n          '));
                    
                      _print(this.freq);
                    
                      _print(_safe('\n        </td>\n      </tr>\n    </tbody>\n  </table>\n</div>\n</div>\n'));
                    
                    }).call(this);
                    
                    return __out.join('');
                  }).call((function() {
                    var obj = {
                      escape: function(value) {
                        return ('' + value)
                          .replace(/&/g, '&amp;')
                          .replace(/</g, '&lt;')
                          .replace(/>/g, '&gt;')
                          .replace(/"/g, '&quot;');
                      },
                      safe: _safe
                    }, key;
                    for (key in __obj) obj[key] = __obj[key];
                    return obj;
                  })());
                };
                  return template;
                });
                
                define('widget/continuouscolumntemplate',[],function(){
                  var template = function(__obj) {
                  var _safe = function(value) {
                    if (typeof value === 'undefined' && value == null)
                      value = '';
                    var result = new String(value);
                    result.ecoSafe = true;
                    return result;
                  };
                  return (function() {
                    var __out = [], __self = this, _print = function(value) {
                      if (typeof value !== 'undefined' && value != null)
                        __out.push(value.ecoSafe ? value : __self.escape(value));
                    }, _capture = function(callback) {
                      var out = __out, result;
                      __out = [];
                      callback.call(this);
                      result = __out.join('');
                      __out = out;
                      return _safe(result);
                    };
                    (function() {
                      _print(_safe('<div class="bk-bs-panel-heading bk-crossfilter-panel-heading">\n  Continuous: '));
                    
                      _print(this.name);
                    
                      _print(_safe('\n</div>\n<div class="bk-bs-panel-body">\n  <table class="bk-table">\n    <tbody>\n      <tr>\n        <td>\n          count\n        </td>\n        <td>\n          '));
                    
                      _print(this.count);
                    
                      _print(_safe('\n        </td>\n      </tr>\n      <tr>\n        <td>\n          mean\n        </td>\n        <td>\n          '));
                    
                      _print(this.mean);
                    
                      _print(_safe('\n        </td>\n      </tr>\n      <tr>\n        <td>\n          std\n        </td>\n        <td>\n          '));
                    
                      _print(this.std);
                    
                      _print(_safe('\n        </td>\n      </tr>\n      <tr>\n        <td>\n          max\n        </td>\n        <td>\n          '));
                    
                      _print(this.max);
                    
                      _print(_safe('\n        </td>\n      </tr>\n      <tr>\n        <td>\n          min\n        </td>\n        <td>\n          '));
                    
                      _print(this.min);
                    
                      _print(_safe('\n        </td>\n      </tr>\n    </tbody>\n  </table>\n</div>\n'));
                    
                    }).call(this);
                    
                    return __out.join('');
                  }).call((function() {
                    var obj = {
                      escape: function(value) {
                        return ('' + value)
                          .replace(/&/g, '&amp;')
                          .replace(/</g, '&lt;')
                          .replace(/>/g, '&gt;')
                          .replace(/"/g, '&quot;');
                      },
                      safe: _safe
                    }, key;
                    for (key in __obj) obj[key] = __obj[key];
                    return obj;
                  })());
                };
                  return template;
                });
                
                define('widget/facetcolumntemplate',[],function(){
                  var template = function(__obj) {
                  var _safe = function(value) {
                    if (typeof value === 'undefined' && value == null)
                      value = '';
                    var result = new String(value);
                    result.ecoSafe = true;
                    return result;
                  };
                  return (function() {
                    var __out = [], __self = this, _print = function(value) {
                      if (typeof value !== 'undefined' && value != null)
                        __out.push(value.ecoSafe ? value : __self.escape(value));
                    }, _capture = function(callback) {
                      var out = __out, result;
                      __out = [];
                      callback.call(this);
                      result = __out.join('');
                      __out = out;
                      return _safe(result);
                    };
                    (function() {
                      _print(this.name);
                    
                      _print(_safe(' &nbsp; [x]'));
                    
                    }).call(this);
                    
                    return __out.join('');
                  }).call((function() {
                    var obj = {
                      escape: function(value) {
                        return ('' + value)
                          .replace(/&/g, '&amp;')
                          .replace(/</g, '&lt;')
                          .replace(/>/g, '&gt;')
                          .replace(/"/g, '&quot;');
                      },
                      safe: _safe
                    }, key;
                    for (key in __obj) obj[key] = __obj[key];
                    return obj;
                  })());
                };
                  return template;
                });
                
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
                    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };
                
                  define('widget/crossfilter',["common/has_parent", "common/has_properties", "common/continuum_view", "common/build_views", "backbone", "underscore", "jquery_ui/draggable", "jquery_ui/droppable", "./crossfiltertemplate", "./discretecolumntemplate", "./continuouscolumntemplate", "./facetcolumntemplate"], function(HasParent, HasProperties, continuum_view, build_views, Backbone, _, draggable, droppable, crossfiltertemplate, discretecolumntemplate, continuouscolumntemplate, facetcolumntemplate) {
                    var CloseWrapper, ColumnCollection, ColumnView, ColumnsView, ContinuousColumn, ContinuousColumnView, ContinuumView, CrossFilter, CrossFilterView, CrossFilters, DiscreteColumn, DiscreteColumnView, FacetView, FacetsView, FilterView, PlotAttributeSelector, TimeColumn, TimeColumnView, crossfilters, _ref, _ref1, _ref10, _ref11, _ref12, _ref13, _ref14, _ref15, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9;
                    ContinuumView = continuum_view.View;
                    CloseWrapper = continuum_view.CloseWrapper;
                    CrossFilterView = (function(_super) {
                      __extends(CrossFilterView, _super);
                
                      function CrossFilterView() {
                        _ref = CrossFilterView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      CrossFilterView.prototype.tag = "div";
                
                      CrossFilterView.prototype.attributes = {
                        "class": "bk-crossfilter"
                      };
                
                      CrossFilterView.prototype.initialize = function(options) {
                        CrossFilterView.__super__.initialize.call(this, options);
                        this.views = {};
                        this.listenTo(this.model, 'change:plot', this.render_plot);
                        this.render();
                        this.render_plot();
                        return this;
                      };
                
                      CrossFilterView.prototype.render_plot = function() {
                        var plot, plot_view;
                        plot = this.mget('plot');
                        plot_view = new plot.default_view({
                          model: plot
                        });
                        this.$el.find('.bk-plot').empty();
                        return this.$el.find('.bk-plot').append(plot_view.$el);
                      };
                
                      CrossFilterView.prototype.render = function() {
                        var html;
                        if (this.columnview != null) {
                          this.columnview.$el.detach();
                        }
                        this.$el.empty();
                        html = crossfiltertemplate();
                        this.$el.html(html);
                        this.filterview = new FilterView({
                          el: this.$('.bk-filters'),
                          collection: this.model.columns,
                          model: this.model
                        });
                        this.facetsview = new FacetsView({
                          el: this.$el,
                          model: this.model
                        });
                        this.plotattributeview = new PlotAttributeSelector({
                          el: this.$el,
                          model: this.model
                        });
                        this.columnview = new ColumnsView({
                          collection: this.model.columns
                        });
                        this.$('.bk-column-list').append(this.columnview.el);
                        this.$('.bk-crossfilter-configuration').height(this.mget('height'));
                        this.$('.bk-crossfilter-configuration').width(500);
                        return this;
                      };
                
                      return CrossFilterView;
                
                    })(ContinuumView);
                    CrossFilter = (function(_super) {
                      __extends(CrossFilter, _super);
                
                      function CrossFilter() {
                        this._set_columns = __bind(this._set_columns, this);
                        _ref1 = CrossFilter.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      CrossFilter.prototype.initialize = function(attrs, options) {
                        CrossFilter.__super__.initialize.call(this, attrs, options);
                        this.columns = new ColumnCollection();
                        this._set_columns();
                        this.listenTo(this, 'change:columns', this._set_columns);
                        return console.log(this.columns.models);
                      };
                
                      CrossFilter.prototype._set_columns = function() {
                        return this.columns.reset(this.get('columns'));
                      };
                
                      CrossFilter.prototype.type = "CrossFilter";
                
                      CrossFilter.prototype.default_view = CrossFilterView;
                
                      CrossFilter.prototype.defaults = {
                        height: 700,
                        width: 1300
                      };
                
                      return CrossFilter;
                
                    })(HasParent);
                    CrossFilters = (function(_super) {
                      __extends(CrossFilters, _super);
                
                      function CrossFilters() {
                        _ref2 = CrossFilters.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      CrossFilters.prototype.model = CrossFilter;
                
                      return CrossFilters;
                
                    })(Backbone.Collection);
                    crossfilters = new CrossFilters();
                    PlotAttributeSelector = (function(_super) {
                      __extends(PlotAttributeSelector, _super);
                
                      function PlotAttributeSelector() {
                        _ref3 = PlotAttributeSelector.__super__.constructor.apply(this, arguments);
                        return _ref3;
                      }
                
                      PlotAttributeSelector.prototype.initialize = function(options) {
                        PlotAttributeSelector.__super__.initialize.call(this, options);
                        this.listenTo(this.model, "change:plot_selector", this.render_plot_selector);
                        this.listenTo(this.model, "change:x_selector", this.render_x_selector);
                        this.listenTo(this.model, "change:y_selector", this.render_y_selector);
                        this.listenTo(this.model, "change:agg_selector", this.render_agg_selector);
                        this.render_plot_selector();
                        this.render_x_selector();
                        this.render_y_selector();
                        return this.render_agg_selector();
                      };
                
                      PlotAttributeSelector.prototype.render_selector = function(node, model) {
                        node.empty();
                        if (model) {
                          this.plot_selector_view = new model.default_view({
                            model: model
                          });
                          return node.append(this.plot_selector_view.$el);
                        }
                      };
                
                      PlotAttributeSelector.prototype.render_plot_selector = function() {
                        var model, node;
                        node = this.$('.bk-plot-selector');
                        model = this.mget('plot_selector');
                        return this.render_selector(node, model);
                      };
                
                      PlotAttributeSelector.prototype.render_x_selector = function() {
                        var model, node;
                        node = this.$('.bk-x-selector');
                        model = this.mget('x_selector');
                        return this.render_selector(node, model);
                      };
                
                      PlotAttributeSelector.prototype.render_y_selector = function() {
                        var model, node;
                        node = this.$('.bk-y-selector');
                        model = this.mget('y_selector');
                        return this.render_selector(node, model);
                      };
                
                      PlotAttributeSelector.prototype.render_agg_selector = function() {
                        var model, node;
                        node = this.$('.bk-agg-selector');
                        model = this.mget('agg_selector');
                        return this.render_selector(node, model);
                      };
                
                      return PlotAttributeSelector;
                
                    })(ContinuumView);
                    ColumnsView = (function(_super) {
                      __extends(ColumnsView, _super);
                
                      function ColumnsView() {
                        _ref4 = ColumnsView.__super__.constructor.apply(this, arguments);
                        return _ref4;
                      }
                
                      ColumnsView.prototype.initialize = function(options) {
                        ColumnsView.__super__.initialize.call(this, options);
                        this.views = {};
                        this.listenTo(this.collection, 'all', this.render);
                        this.render();
                        return this;
                      };
                
                      ColumnsView.prototype.render = function() {
                        var _this = this;
                        _.map(this.views, function(view) {
                          return view.$el.detach();
                        });
                        build_views(this.views, this.collection.models);
                        _.map(this.collection.models, function(model) {
                          return _this.$el.append(_this.views[model.id].$el);
                        });
                        return this;
                      };
                
                      return ColumnsView;
                
                    })(Backbone.View);
                    FacetView = (function(_super) {
                      __extends(FacetView, _super);
                
                      function FacetView() {
                        _ref5 = FacetView.__super__.constructor.apply(this, arguments);
                        return _ref5;
                      }
                
                      FacetView.prototype.events = {
                        "click": "remove"
                      };
                
                      FacetView.prototype.tagName = "span";
                
                      FacetView.prototype.attributes = {
                        "class": "bk-facet-label"
                      };
                
                      FacetView.prototype.initialize = function(options) {
                        FacetView.__super__.initialize.call(this, options);
                        this.name = options.name;
                        return this.render();
                      };
                
                      FacetView.prototype.render = function() {
                        return this.$el.html(facetcolumntemplate({
                          name: this.name
                        }));
                      };
                
                      return FacetView;
                
                    })(ContinuumView);
                    FacetsView = (function(_super) {
                      __extends(FacetsView, _super);
                
                      function FacetsView() {
                        this.drop_tab = __bind(this.drop_tab, this);
                        this.drop_y = __bind(this.drop_y, this);
                        this.drop_x = __bind(this.drop_x, this);
                        this.drop = __bind(this.drop, this);
                        this.add_facet = __bind(this.add_facet, this);
                        this.remove_facet = __bind(this.remove_facet, this);
                        _ref6 = FacetsView.__super__.constructor.apply(this, arguments);
                        return _ref6;
                      }
                
                      FacetsView.prototype.initialize = function(options) {
                        FacetsView.__super__.initialize.call(this, options);
                        this.render_init();
                        this.render_all_facets();
                        this.listenTo(this.model, 'change:facet_x', this.render_all_facets);
                        this.listenTo(this.model, 'change:facet_y', this.render_all_facets);
                        return this.listenTo(this.model, 'change:facet_tab', this.render_all_facets);
                      };
                
                      FacetsView.prototype.render_init = function() {
                        this.facet_x_node = this.$('.bk-facet-x');
                        this.facet_y_node = this.$('.bk-facet-y');
                        this.facet_tab_node = this.$('.bk-facet-tab');
                        this.facet_x_node.droppable({
                          drop: this.drop_x,
                          tolerance: 'pointer',
                          hoverClass: 'bk-droppable-hover'
                        });
                        this.facet_y_node.droppable({
                          drop: this.drop_y,
                          tolerance: 'pointer',
                          hoverClass: 'bk-droppable-hover'
                        });
                        return this.facet_tab_node.droppable({
                          drop: this.drop_tab,
                          tolerance: 'pointer',
                          hoverClass: 'bk-droppable-hover'
                        });
                      };
                
                      FacetsView.prototype.render_all_facets = function() {
                        this.render_facets(this.facet_x_node, 'facet_x', this.model.get('facet_x'));
                        this.render_facets(this.facet_y_node, 'facet_y', this.model.get('facet_y'));
                        this.render_facets(this.facet_tab_node, 'facet_tab', this.model.get('facet_tab'));
                      };
                
                      FacetsView.prototype.render_facets = function(node, type, facets) {
                        var facet, view, _i, _len, _results;
                        node = node.find('.bk-facets-selections');
                        node.empty();
                        _results = [];
                        for (_i = 0, _len = facets.length; _i < _len; _i++) {
                          facet = facets[_i];
                          view = new FacetView({
                            name: facet
                          });
                          this.listenTo(view, 'remove', function() {
                            var save;
                            return this.remove_facet(facet, save = true);
                          });
                          _results.push(node.append(view.$el));
                        }
                        return _results;
                      };
                
                      FacetsView.prototype.remove_facet = function(facet, save) {
                        var facets, type, x, _i, _len, _ref7;
                        if (save == null) {
                          save = true;
                        }
                        _ref7 = ['facet_x', 'facet_y', 'facet_tab'];
                        for (_i = 0, _len = _ref7.length; _i < _len; _i++) {
                          type = _ref7[_i];
                          facets = _.clone(this.model.get(type));
                          facets = (function() {
                            var _j, _len1, _results;
                            _results = [];
                            for (_j = 0, _len1 = facets.length; _j < _len1; _j++) {
                              x = facets[_j];
                              if (x !== facet) {
                                _results.push(x);
                              }
                            }
                            return _results;
                          })();
                          this.model.set(type, facets);
                        }
                        if (save) {
                          return this.model.save();
                        }
                      };
                
                      FacetsView.prototype.add_facet = function(type, facet) {
                        var facets, save;
                        this.remove_facet(facet, save = false);
                        facets = _.clone(this.model.get(type));
                        if (facets.indexOf(facet) < 0) {
                          facets.push(facet);
                          this.model.set(type, facets);
                        }
                        return this.model.save();
                      };
                
                      FacetsView.prototype.drop = function(type, e, ui) {
                        var column_model, name;
                        column_model = ui.helper.data('model');
                        name = column_model.get('name');
                        return this.add_facet(type, name);
                      };
                
                      FacetsView.prototype.drop_x = function(e, ui) {
                        return this.drop('facet_x', e, ui);
                      };
                
                      FacetsView.prototype.drop_y = function(e, ui) {
                        return this.drop('facet_y', e, ui);
                      };
                
                      FacetsView.prototype.drop_tab = function(e, ui) {
                        return this.drop('facet_tab', e, ui);
                      };
                
                      return FacetsView;
                
                    })(ContinuumView);
                    FilterView = (function(_super) {
                      __extends(FilterView, _super);
                
                      function FilterView() {
                        this.drop = __bind(this.drop, this);
                        _ref7 = FilterView.__super__.constructor.apply(this, arguments);
                        return _ref7;
                      }
                
                      FilterView.prototype.initialize = function(options) {
                        FilterView.__super__.initialize.call(this, options);
                        this.views = {};
                        this.render();
                        this.render_columns_selectors;
                        return this.listenTo(this.model, 'change:filter_widgets', this.render_column_selectors);
                      };
                
                      FilterView.prototype.drop = function(e, ui) {
                        var column_model, filtering_columns;
                        column_model = ui.helper.data('model');
                        filtering_columns = _.clone(this.model.get('filtering_columns'));
                        filtering_columns.push(column_model.get('name'));
                        this.model.set('filtering_columns', filtering_columns);
                        return this.model.save();
                      };
                
                      FilterView.prototype.render = function() {
                        return this.$el.droppable({
                          drop: this.drop,
                          tolerance: 'pointer',
                          hoverClass: 'bk-droppable-hover'
                        });
                      };
                
                      FilterView.prototype.render_column_selectors = function() {
                        var col, filter_widget_dict, filter_widgets, filtering_columns, key, newviews, val, _ref8,
                          _this = this;
                        _.map(this.views, function(view) {
                          return view.$el.detach();
                        });
                        this.$el.find('.bk-filters-selections').empty();
                        filter_widget_dict = {};
                        _ref8 = this.mget('filter_widgets');
                        for (key in _ref8) {
                          if (!__hasProp.call(_ref8, key)) continue;
                          val = _ref8[key];
                          filter_widget_dict[key] = this.model.resolve_ref(val);
                        }
                        filtering_columns = this.mget('filtering_columns');
                        filter_widgets = (function() {
                          var _i, _len, _results;
                          _results = [];
                          for (_i = 0, _len = filtering_columns.length; _i < _len; _i++) {
                            col = filtering_columns[_i];
                            if (filter_widget_dict[col] != null) {
                              _results.push(filter_widget_dict[col]);
                            }
                          }
                          return _results;
                        })();
                        newviews = build_views(this.views, filter_widgets);
                        _.map(newviews, function(view) {
                          return _this.listenTo(view, 'remove', _this.child_remove);
                        });
                        return _.map(filter_widgets, function(model) {
                          var wrapper;
                          wrapper = new CloseWrapper({
                            view: _this.views[model.id]
                          });
                          return _this.$el.find('.bk-filters-selections').append(wrapper.$el);
                        });
                      };
                
                      FilterView.prototype.child_remove = function(view) {
                        var key, model, newcolumns, to_remove, val, _ref8;
                        _ref8 = this.mget('filter_widgets');
                        for (key in _ref8) {
                          if (!__hasProp.call(_ref8, key)) continue;
                          val = _ref8[key];
                          model = this.model.resolve_ref(val);
                          if (model === view.model) {
                            to_remove = key;
                            break;
                          }
                        }
                        newcolumns = _.filter(this.mget('filtering_columns'), function(x) {
                          return x !== to_remove;
                        });
                        this.mset('filtering_columns', newcolumns);
                        return this.model.save();
                      };
                
                      return FilterView;
                
                    })(ContinuumView);
                    ColumnCollection = (function(_super) {
                      __extends(ColumnCollection, _super);
                
                      function ColumnCollection() {
                        _ref8 = ColumnCollection.__super__.constructor.apply(this, arguments);
                        return _ref8;
                      }
                
                      ColumnCollection.prototype.model = function(attrs, options) {
                        if (attrs.type === 'DiscreteColumn') {
                          return new DiscreteColumn(attrs);
                        } else if (attrs.type === 'TimeColumn') {
                          return new TimeColumn(attrs);
                        } else {
                          return new ContinuousColumn(attrs);
                        }
                      };
                
                      return ColumnCollection;
                
                    })(Backbone.Collection);
                    ColumnView = (function(_super) {
                      __extends(ColumnView, _super);
                
                      function ColumnView() {
                        this.dragging_helper = __bind(this.dragging_helper, this);
                        _ref9 = ColumnView.__super__.constructor.apply(this, arguments);
                        return _ref9;
                      }
                
                      ColumnView.prototype.attributes = {
                        "class": "bk-crossfilter-column-entry bk-bs-panel bk-bs-panel-primary"
                      };
                
                      ColumnView.prototype.initialize = function(options) {
                        ColumnView.__super__.initialize.call(this, options);
                        return this.render();
                      };
                
                      ColumnView.prototype.dragging_helper = function() {
                        var node;
                        node = this.$el.clone();
                        return node;
                      };
                
                      ColumnView.prototype.render = function() {
                        var _this = this;
                        this.$el.html(this.template(this.model.attributes));
                        this.$el.draggable({
                          appendTo: 'body',
                          containment: 'document',
                          helper: 'clone',
                          start: function(e, ui) {
                            return ui.helper.data('model', _this.model);
                          }
                        });
                        return this;
                      };
                
                      return ColumnView;
                
                    })(ContinuumView);
                    TimeColumnView = (function(_super) {
                      __extends(TimeColumnView, _super);
                
                      function TimeColumnView() {
                        _ref10 = TimeColumnView.__super__.constructor.apply(this, arguments);
                        return _ref10;
                      }
                
                      return TimeColumnView;
                
                    })(ColumnView);
                    DiscreteColumnView = (function(_super) {
                      __extends(DiscreteColumnView, _super);
                
                      function DiscreteColumnView() {
                        _ref11 = DiscreteColumnView.__super__.constructor.apply(this, arguments);
                        return _ref11;
                      }
                
                      DiscreteColumnView.prototype.template = discretecolumntemplate;
                
                      return DiscreteColumnView;
                
                    })(ColumnView);
                    ContinuousColumnView = (function(_super) {
                      __extends(ContinuousColumnView, _super);
                
                      function ContinuousColumnView() {
                        _ref12 = ContinuousColumnView.__super__.constructor.apply(this, arguments);
                        return _ref12;
                      }
                
                      ContinuousColumnView.prototype.template = continuouscolumntemplate;
                
                      return ContinuousColumnView;
                
                    })(ColumnView);
                    TimeColumn = (function(_super) {
                      __extends(TimeColumn, _super);
                
                      function TimeColumn() {
                        _ref13 = TimeColumn.__super__.constructor.apply(this, arguments);
                        return _ref13;
                      }
                
                      TimeColumn.prototype.idAttribute = "name";
                
                      TimeColumn.prototype.default_view = TimeColumnView;
                
                      TimeColumn.prototype.defaults = {
                        type: "TimeColumn",
                        name: "",
                        count: 0,
                        unique: 0,
                        first: 0,
                        last: 0
                      };
                
                      return TimeColumn;
                
                    })(HasProperties);
                    DiscreteColumn = (function(_super) {
                      __extends(DiscreteColumn, _super);
                
                      function DiscreteColumn() {
                        _ref14 = DiscreteColumn.__super__.constructor.apply(this, arguments);
                        return _ref14;
                      }
                
                      DiscreteColumn.prototype.idAttribute = "name";
                
                      DiscreteColumn.prototype.default_view = DiscreteColumnView;
                
                      DiscreteColumn.prototype.defaults = {
                        type: "DiscreteColumn",
                        name: "",
                        count: 0,
                        unique: 0,
                        top: 0,
                        freq: 0
                      };
                
                      return DiscreteColumn;
                
                    })(HasProperties);
                    ContinuousColumn = (function(_super) {
                      __extends(ContinuousColumn, _super);
                
                      function ContinuousColumn() {
                        _ref15 = ContinuousColumn.__super__.constructor.apply(this, arguments);
                        return _ref15;
                      }
                
                      ContinuousColumn.prototype.idAttribute = "name";
                
                      ContinuousColumn.prototype.default_view = ContinuousColumnView;
                
                      ContinuousColumn.prototype.defaults = {
                        type: "ContinuousColumn",
                        name: "",
                        count: 0,
                        mean: 0,
                        std: 0,
                        min: 0,
                        max: 0
                      };
                
                      return ContinuousColumn;
                
                    })(HasProperties);
                    return {
                      "Model": CrossFilter,
                      "Collection": crossfilters,
                      "View": CrossFilterView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=crossfilter.js.map
                */;
                define('widget/multiselecttemplate',[],function(){
                  var template = function(__obj) {
                  var _safe = function(value) {
                    if (typeof value === 'undefined' && value == null)
                      value = '';
                    var result = new String(value);
                    result.ecoSafe = true;
                    return result;
                  };
                  return (function() {
                    var __out = [], __self = this, _print = function(value) {
                      if (typeof value !== 'undefined' && value != null)
                        __out.push(value.ecoSafe ? value : __self.escape(value));
                    }, _capture = function(callback) {
                      var out = __out, result;
                      __out = [];
                      callback.call(this);
                      result = __out.join('');
                      __out = out;
                      return _safe(result);
                    };
                    (function() {
                      var option, _i, _len, _ref;
                    
                      _print(_safe('<label for="'));
                    
                      _print(this.id);
                    
                      _print(_safe('"> '));
                    
                      _print(this.title);
                    
                      _print(_safe(' </label>\n<select multiple class="bk-widget-form-input" id="'));
                    
                      _print(this.id);
                    
                      _print(_safe('" name="'));
                    
                      _print(this.name);
                    
                      _print(_safe('">\n  '));
                    
                      _ref = this.options;
                      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
                        option = _ref[_i];
                        _print(_safe('\n  '));
                        if (option.value === this.value) {
                          _print(_safe('\n  <option selected="selected" value="'));
                          _print(option.value);
                          _print(_safe('">'));
                          _print(option.name);
                          _print(_safe('</option>\n  '));
                        } else {
                          _print(_safe('\n  <option value="'));
                          _print(option.value);
                          _print(_safe('">'));
                          _print(option.name);
                          _print(_safe('</option> \n  '));
                        }
                        _print(_safe('\n\n  '));
                      }
                    
                      _print(_safe('\n</select>\n'));
                    
                    }).call(this);
                    
                    return __out.join('');
                  }).call((function() {
                    var obj = {
                      escape: function(value) {
                        return ('' + value)
                          .replace(/&/g, '&amp;')
                          .replace(/</g, '&lt;')
                          .replace(/>/g, '&gt;')
                          .replace(/"/g, '&quot;');
                      },
                      safe: _safe
                    }, key;
                    for (key in __obj) obj[key] = __obj[key];
                    return obj;
                  })());
                };
                  return template;
                });
                
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('widget/multiselect',["common/has_parent", "common/continuum_view", "backbone", "underscore", "./multiselecttemplate"], function(HasParent, continuum_view, Backbone, _, multiselecttemplate) {
                    var ContinuumView, MultiSelect, MultiSelectView, MultiSelects, multiselectboxes, _ref, _ref1, _ref2;
                    ContinuumView = continuum_view.View;
                    MultiSelectView = (function(_super) {
                      __extends(MultiSelectView, _super);
                
                      function MultiSelectView() {
                        _ref = MultiSelectView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      MultiSelectView.prototype.events = {
                        "change select": "change_input"
                      };
                
                      MultiSelectView.prototype.change_input = function() {
                        this.mset('value', this.$('select').val(), {
                          'silent': true
                        });
                        return this.model.save();
                      };
                
                      MultiSelectView.prototype.tagName = "div";
                
                      MultiSelectView.prototype.template = multiselecttemplate;
                
                      MultiSelectView.prototype.initialize = function(options) {
                        MultiSelectView.__super__.initialize.call(this, options);
                        this.render();
                        this.listenTo(this.model, 'change:value', this.render_selection);
                        this.listenTo(this.model, 'change:options', this.render);
                        this.listenTo(this.model, 'change:name', this.render);
                        return this.listenTo(this.model, 'change:title', this.render);
                      };
                
                      MultiSelectView.prototype.render = function() {
                        var html;
                        this.$el.empty();
                        html = this.template(this.model.attributes);
                        this.$el.html(html);
                        this.render_selection();
                        return this;
                      };
                
                      MultiSelectView.prototype.render_selection = function() {
                        var values;
                        values = {};
                        _.map(this.mget('value'), function(x) {
                          return values[x] = true;
                        });
                        return this.$('option').each(function(el) {
                          el = $(el);
                          if (values[el.attr('value')]) {
                            return el.attr('selected', 'selected');
                          }
                        });
                      };
                
                      return MultiSelectView;
                
                    })(ContinuumView);
                    MultiSelect = (function(_super) {
                      __extends(MultiSelect, _super);
                
                      function MultiSelect() {
                        _ref1 = MultiSelect.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      MultiSelect.prototype.type = "MultiSelect";
                
                      MultiSelect.prototype.default_view = MultiSelectView;
                
                      MultiSelect.prototype.defaults = function() {
                        var def;
                        def = {
                          title: '',
                          value: [],
                          options: []
                        };
                        return def;
                      };
                
                      return MultiSelect;
                
                    })(HasParent);
                    MultiSelects = (function(_super) {
                      __extends(MultiSelects, _super);
                
                      function MultiSelects() {
                        _ref2 = MultiSelects.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      MultiSelects.prototype.model = MultiSelect;
                
                      return MultiSelects;
                
                    })(Backbone.Collection);
                    multiselectboxes = new MultiSelects();
                    return {
                      "Model": MultiSelect,
                      "Collection": multiselectboxes,
                      "View": MultiSelectView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=multiselect.js.map
                */;
                (function(root) {
                define("jqrangeslider", ["jquery_ui/core","jquery_ui/widget","jquery_ui/mouse","jquery_mousewheel"], function() {
                  return (function() {
                /*! jQRangeSlider 5.7.0 - 2014-03-18 - Copyright (C) Guillaume Gautreau 2012 - MIT and GPLv3 licenses.*/!function(a){a.widget("ui.rangeSliderMouseTouch",a.ui.mouse,{enabled:!0,_mouseInit:function(){var b=this;a.ui.mouse.prototype._mouseInit.apply(this),this._mouseDownEvent=!1,this.element.bind("touchstart."+this.widgetName,function(a){return b._touchStart(a)})},_mouseDestroy:function(){a(document).unbind("touchmove."+this.widgetName,this._touchMoveDelegate).unbind("touchend."+this.widgetName,this._touchEndDelegate),a.ui.mouse.prototype._mouseDestroy.apply(this)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},destroy:function(){this._mouseDestroy(),a.ui.mouse.prototype.destroy.apply(this),this._mouseInit=null},_touchStart:function(b){if(!this.enabled)return!1;b.which=1,b.preventDefault(),this._fillTouchEvent(b);var c=this,d=this._mouseDownEvent;this._mouseDown(b),d!==this._mouseDownEvent&&(this._touchEndDelegate=function(a){c._touchEnd(a)},this._touchMoveDelegate=function(a){c._touchMove(a)},a(document).bind("touchmove."+this.widgetName,this._touchMoveDelegate).bind("touchend."+this.widgetName,this._touchEndDelegate))},_mouseDown:function(b){return this.enabled?a.ui.mouse.prototype._mouseDown.apply(this,[b]):!1},_touchEnd:function(b){this._fillTouchEvent(b),this._mouseUp(b),a(document).unbind("touchmove."+this.widgetName,this._touchMoveDelegate).unbind("touchend."+this.widgetName,this._touchEndDelegate),this._mouseDownEvent=!1,a(document).trigger("mouseup")},_touchMove:function(a){return a.preventDefault(),this._fillTouchEvent(a),this._mouseMove(a)},_fillTouchEvent:function(a){var b;b="undefined"==typeof a.targetTouches&&"undefined"==typeof a.changedTouches?a.originalEvent.targetTouches[0]||a.originalEvent.changedTouches[0]:a.targetTouches[0]||a.changedTouches[0],a.pageX=b.pageX,a.pageY=b.pageY}})}(jQuery),function(a){a.widget("ui.rangeSliderDraggable",a.ui.rangeSliderMouseTouch,{cache:null,options:{containment:null},_create:function(){a.ui.rangeSliderMouseTouch.prototype._create.apply(this),setTimeout(a.proxy(this._initElementIfNotDestroyed,this),10)},destroy:function(){this.cache=null,a.ui.rangeSliderMouseTouch.prototype.destroy.apply(this)},_initElementIfNotDestroyed:function(){this._mouseInit&&this._initElement()},_initElement:function(){this._mouseInit(),this._cache()},_setOption:function(b,c){"containment"===b&&(this.options.containment=null===c||0===a(c).length?null:a(c))},_mouseStart:function(a){return this._cache(),this.cache.click={left:a.pageX,top:a.pageY},this.cache.initialOffset=this.element.offset(),this._triggerMouseEvent("mousestart"),!0},_mouseDrag:function(a){var b=a.pageX-this.cache.click.left;return b=this._constraintPosition(b+this.cache.initialOffset.left),this._applyPosition(b),this._triggerMouseEvent("sliderDrag"),!1},_mouseStop:function(){this._triggerMouseEvent("stop")},_constraintPosition:function(a){return 0!==this.element.parent().length&&null!==this.cache.parent.offset&&(a=Math.min(a,this.cache.parent.offset.left+this.cache.parent.width-this.cache.width.outer),a=Math.max(a,this.cache.parent.offset.left)),a},_applyPosition:function(a){var b={top:this.cache.offset.top,left:a};this.element.offset({left:a}),this.cache.offset=b},_cacheIfNecessary:function(){null===this.cache&&this._cache()},_cache:function(){this.cache={},this._cacheMargins(),this._cacheParent(),this._cacheDimensions(),this.cache.offset=this.element.offset()},_cacheMargins:function(){this.cache.margin={left:this._parsePixels(this.element,"marginLeft"),right:this._parsePixels(this.element,"marginRight"),top:this._parsePixels(this.element,"marginTop"),bottom:this._parsePixels(this.element,"marginBottom")}},_cacheParent:function(){if(null!==this.options.parent){var a=this.element.parent();this.cache.parent={offset:a.offset(),width:a.width()}}else this.cache.parent=null},_cacheDimensions:function(){this.cache.width={outer:this.element.outerWidth(),inner:this.element.width()}},_parsePixels:function(a,b){return parseInt(a.css(b),10)||0},_triggerMouseEvent:function(a){var b=this._prepareEventData();this.element.trigger(a,b)},_prepareEventData:function(){return{element:this.element,offset:this.cache.offset||null}}})}(jQuery),function(a,b){a.widget("ui.rangeSlider",{options:{bounds:{min:0,max:100},defaultValues:{min:20,max:50},wheelMode:null,wheelSpeed:4,arrows:!0,valueLabels:"show",formatter:null,durationIn:0,durationOut:400,delayOut:200,range:{min:!1,max:!1},step:!1,scales:!1,enabled:!0,symmetricPositionning:!1},_values:null,_valuesChanged:!1,_initialized:!1,bar:null,leftHandle:null,rightHandle:null,innerBar:null,container:null,arrows:null,labels:null,changing:{min:!1,max:!1},changed:{min:!1,max:!1},ruler:null,_create:function(){this._setDefaultValues(),this.labels={left:null,right:null,leftDisplayed:!0,rightDisplayed:!0},this.arrows={left:null,right:null},this.changing={min:!1,max:!1},this.changed={min:!1,max:!1},this._createElements(),this._bindResize(),setTimeout(a.proxy(this.resize,this),1),setTimeout(a.proxy(this._initValues,this),1)},_setDefaultValues:function(){this._values={min:this.options.defaultValues.min,max:this.options.defaultValues.max}},_bindResize:function(){var b=this;this._resizeProxy=function(a){b.resize(a)},a(window).resize(this._resizeProxy)},_initWidth:function(){this.container.css("width",this.element.width()-this.container.outerWidth(!0)+this.container.width()),this.innerBar.css("width",this.container.width()-this.innerBar.outerWidth(!0)+this.innerBar.width())},_initValues:function(){this._initialized=!0,this.values(this._values.min,this._values.max)},_setOption:function(a,b){this._setWheelOption(a,b),this._setArrowsOption(a,b),this._setLabelsOption(a,b),this._setLabelsDurations(a,b),this._setFormatterOption(a,b),this._setBoundsOption(a,b),this._setRangeOption(a,b),this._setStepOption(a,b),this._setScalesOption(a,b),this._setEnabledOption(a,b),this._setPositionningOption(a,b)},_validProperty:function(a,b,c){return null===a||"undefined"==typeof a[b]?c:a[b]},_setStepOption:function(a,b){"step"===a&&(this.options.step=b,this._leftHandle("option","step",b),this._rightHandle("option","step",b),this._changed(!0))},_setScalesOption:function(a,b){"scales"===a&&(b===!1||null===b?(this.options.scales=!1,this._destroyRuler()):b instanceof Array&&(this.options.scales=b,this._updateRuler()))},_setRangeOption:function(a,b){"range"===a&&(this._bar("option","range",b),this.options.range=this._bar("option","range"),this._changed(!0))},_setBoundsOption:function(a,b){"bounds"===a&&"undefined"!=typeof b.min&&"undefined"!=typeof b.max&&this.bounds(b.min,b.max)},_setWheelOption:function(a,b){("wheelMode"===a||"wheelSpeed"===a)&&(this._bar("option",a,b),this.options[a]=this._bar("option",a))},_setLabelsOption:function(a,b){if("valueLabels"===a){if("hide"!==b&&"show"!==b&&"change"!==b)return;this.options.valueLabels=b,"hide"!==b?(this._createLabels(),this._leftLabel("update"),this._rightLabel("update")):this._destroyLabels()}},_setFormatterOption:function(a,b){"formatter"===a&&null!==b&&"function"==typeof b&&"hide"!==this.options.valueLabels&&(this._leftLabel("option","formatter",b),this.options.formatter=this._rightLabel("option","formatter",b))},_setArrowsOption:function(a,b){"arrows"!==a||b!==!0&&b!==!1||b===this.options.arrows||(b===!0?(this.element.removeClass("ui-rangeSlider-noArrow").addClass("ui-rangeSlider-withArrows"),this.arrows.left.css("display","block"),this.arrows.right.css("display","block"),this.options.arrows=!0):b===!1&&(this.element.addClass("ui-rangeSlider-noArrow").removeClass("ui-rangeSlider-withArrows"),this.arrows.left.css("display","none"),this.arrows.right.css("display","none"),this.options.arrows=!1),this._initWidth())},_setLabelsDurations:function(a,b){if("durationIn"===a||"durationOut"===a||"delayOut"===a){if(parseInt(b,10)!==b)return;null!==this.labels.left&&this._leftLabel("option",a,b),null!==this.labels.right&&this._rightLabel("option",a,b),this.options[a]=b}},_setEnabledOption:function(a,b){"enabled"===a&&this.toggle(b)},_setPositionningOption:function(a,b){"symmetricPositionning"===a&&(this._rightHandle("option",a,b),this.options[a]=this._leftHandle("option",a,b))},_createElements:function(){"absolute"!==this.element.css("position")&&this.element.css("position","relative"),this.element.addClass("ui-rangeSlider"),this.container=a("<div class='ui-rangeSlider-container' />").css("position","absolute").appendTo(this.element),this.innerBar=a("<div class='ui-rangeSlider-innerBar' />").css("position","absolute").css("top",0).css("left",0),this._createHandles(),this._createBar(),this.container.prepend(this.innerBar),this._createArrows(),"hide"!==this.options.valueLabels?this._createLabels():this._destroyLabels(),this._updateRuler(),this.options.enabled||this._toggle(this.options.enabled)},_createHandle:function(b){return a("<div />")[this._handleType()](b).bind("sliderDrag",a.proxy(this._changing,this)).bind("stop",a.proxy(this._changed,this))},_createHandles:function(){this.leftHandle=this._createHandle({isLeft:!0,bounds:this.options.bounds,value:this._values.min,step:this.options.step,symmetricPositionning:this.options.symmetricPositionning}).appendTo(this.container),this.rightHandle=this._createHandle({isLeft:!1,bounds:this.options.bounds,value:this._values.max,step:this.options.step,symmetricPositionning:this.options.symmetricPositionning}).appendTo(this.container)},_createBar:function(){this.bar=a("<div />").prependTo(this.container).bind("sliderDrag scroll zoom",a.proxy(this._changing,this)).bind("stop",a.proxy(this._changed,this)),this._bar({leftHandle:this.leftHandle,rightHandle:this.rightHandle,values:{min:this._values.min,max:this._values.max},type:this._handleType(),range:this.options.range,wheelMode:this.options.wheelMode,wheelSpeed:this.options.wheelSpeed}),this.options.range=this._bar("option","range"),this.options.wheelMode=this._bar("option","wheelMode"),this.options.wheelSpeed=this._bar("option","wheelSpeed")},_createArrows:function(){this.arrows.left=this._createArrow("left"),this.arrows.right=this._createArrow("right"),this.options.arrows?this.element.addClass("ui-rangeSlider-withArrows"):(this.arrows.left.css("display","none"),this.arrows.right.css("display","none"),this.element.addClass("ui-rangeSlider-noArrow"))},_createArrow:function(b){var c,d=a("<div class='ui-rangeSlider-arrow' />").append("<div class='ui-rangeSlider-arrow-inner' />").addClass("ui-rangeSlider-"+b+"Arrow").css("position","absolute").css(b,0).appendTo(this.element);return c="right"===b?a.proxy(this._scrollRightClick,this):a.proxy(this._scrollLeftClick,this),d.bind("mousedown touchstart",c),d},_proxy:function(a,b,c){var d=Array.prototype.slice.call(c);return a&&a[b]?a[b].apply(a,d):null},_handleType:function(){return"rangeSliderHandle"},_barType:function(){return"rangeSliderBar"},_bar:function(){return this._proxy(this.bar,this._barType(),arguments)},_labelType:function(){return"rangeSliderLabel"},_leftLabel:function(){return this._proxy(this.labels.left,this._labelType(),arguments)},_rightLabel:function(){return this._proxy(this.labels.right,this._labelType(),arguments)},_leftHandle:function(){return this._proxy(this.leftHandle,this._handleType(),arguments)},_rightHandle:function(){return this._proxy(this.rightHandle,this._handleType(),arguments)},_getValue:function(a,b){return b===this.rightHandle&&(a-=b.outerWidth()),a*(this.options.bounds.max-this.options.bounds.min)/(this.container.innerWidth()-b.outerWidth(!0))+this.options.bounds.min},_trigger:function(a){var b=this;setTimeout(function(){b.element.trigger(a,{label:b.element,values:b.values()})},1)},_changing:function(){this._updateValues()&&(this._trigger("valuesChanging"),this._valuesChanged=!0)},_deactivateLabels:function(){"change"===this.options.valueLabels&&(this._leftLabel("option","show","hide"),this._rightLabel("option","show","hide"))},_reactivateLabels:function(){"change"===this.options.valueLabels&&(this._leftLabel("option","show","change"),this._rightLabel("option","show","change"))},_changed:function(a){a===!0&&this._deactivateLabels(),(this._updateValues()||this._valuesChanged)&&(this._trigger("valuesChanged"),a!==!0&&this._trigger("userValuesChanged"),this._valuesChanged=!1),a===!0&&this._reactivateLabels()},_updateValues:function(){var a=this._leftHandle("value"),b=this._rightHandle("value"),c=this._min(a,b),d=this._max(a,b),e=c!==this._values.min||d!==this._values.max;return this._values.min=this._min(a,b),this._values.max=this._max(a,b),e},_min:function(a,b){return Math.min(a,b)},_max:function(a,b){return Math.max(a,b)},_createLabel:function(b,c){var d;return null===b?(d=this._getLabelConstructorParameters(b,c),b=a("<div />").appendTo(this.element)[this._labelType()](d)):(d=this._getLabelRefreshParameters(b,c),b[this._labelType()](d)),b},_getLabelConstructorParameters:function(a,b){return{handle:b,handleType:this._handleType(),formatter:this._getFormatter(),show:this.options.valueLabels,durationIn:this.options.durationIn,durationOut:this.options.durationOut,delayOut:this.options.delayOut}},_getLabelRefreshParameters:function(){return{formatter:this._getFormatter(),show:this.options.valueLabels,durationIn:this.options.durationIn,durationOut:this.options.durationOut,delayOut:this.options.delayOut}},_getFormatter:function(){return this.options.formatter===!1||null===this.options.formatter?this._defaultFormatter:this.options.formatter},_defaultFormatter:function(a){return Math.round(a)},_destroyLabel:function(a){return null!==a&&(a[this._labelType()]("destroy"),a.remove(),a=null),a},_createLabels:function(){this.labels.left=this._createLabel(this.labels.left,this.leftHandle),this.labels.right=this._createLabel(this.labels.right,this.rightHandle),this._leftLabel("pair",this.labels.right)},_destroyLabels:function(){this.labels.left=this._destroyLabel(this.labels.left),this.labels.right=this._destroyLabel(this.labels.right)},_stepRatio:function(){return this._leftHandle("stepRatio")},_scrollRightClick:function(a){return this.options.enabled?(a.preventDefault(),this._bar("startScroll"),this._bindStopScroll(),this._continueScrolling("scrollRight",4*this._stepRatio(),1),void 0):!1},_continueScrolling:function(a,b,c,d){if(!this.options.enabled)return!1;this._bar(a,c),d=d||5,d--;var e=this,f=16,g=Math.max(1,4/this._stepRatio());this._scrollTimeout=setTimeout(function(){0===d&&(b>f?b=Math.max(f,b/1.5):c=Math.min(g,2*c),d=5),e._continueScrolling(a,b,c,d)},b)},_scrollLeftClick:function(a){return this.options.enabled?(a.preventDefault(),this._bar("startScroll"),this._bindStopScroll(),this._continueScrolling("scrollLeft",4*this._stepRatio(),1),void 0):!1},_bindStopScroll:function(){var b=this;this._stopScrollHandle=function(a){a.preventDefault(),b._stopScroll()},a(document).bind("mouseup touchend",this._stopScrollHandle)},_stopScroll:function(){a(document).unbind("mouseup touchend",this._stopScrollHandle),this._stopScrollHandle=null,this._bar("stopScroll"),clearTimeout(this._scrollTimeout)},_createRuler:function(){this.ruler=a("<div class='ui-rangeSlider-ruler' />").appendTo(this.innerBar)},_setRulerParameters:function(){this.ruler.ruler({min:this.options.bounds.min,max:this.options.bounds.max,scales:this.options.scales})},_destroyRuler:function(){null!==this.ruler&&a.fn.ruler&&(this.ruler.ruler("destroy"),this.ruler.remove(),this.ruler=null)},_updateRuler:function(){this._destroyRuler(),this.options.scales!==!1&&a.fn.ruler&&(this._createRuler(),this._setRulerParameters())},values:function(a,b){var c;if("undefined"!=typeof a&&"undefined"!=typeof b){if(!this._initialized)return this._values.min=a,this._values.max=b,this._values;this._deactivateLabels(),c=this._bar("values",a,b),this._changed(!0),this._reactivateLabels()}else c=this._bar("values",a,b);return c},min:function(a){return this._values.min=this.values(a,this._values.max).min,this._values.min},max:function(a){return this._values.max=this.values(this._values.min,a).max,this._values.max},bounds:function(a,b){return this._isValidValue(a)&&this._isValidValue(b)&&b>a&&(this._setBounds(a,b),this._updateRuler(),this._changed(!0)),this.options.bounds},_isValidValue:function(a){return"undefined"!=typeof a&&parseFloat(a)===a},_setBounds:function(a,b){this.options.bounds={min:a,max:b},this._leftHandle("option","bounds",this.options.bounds),this._rightHandle("option","bounds",this.options.bounds),this._bar("option","bounds",this.options.bounds)},zoomIn:function(a){this._bar("zoomIn",a)},zoomOut:function(a){this._bar("zoomOut",a)},scrollLeft:function(a){this._bar("startScroll"),this._bar("scrollLeft",a),this._bar("stopScroll")},scrollRight:function(a){this._bar("startScroll"),this._bar("scrollRight",a),this._bar("stopScroll")},resize:function(){this._initWidth(),this._leftHandle("update"),this._rightHandle("update"),this._bar("update")},enable:function(){this.toggle(!0)},disable:function(){this.toggle(!1)},toggle:function(a){a===b&&(a=!this.options.enabled),this.options.enabled!==a&&this._toggle(a)},_toggle:function(a){this.options.enabled=a,this.element.toggleClass("ui-rangeSlider-disabled",!a);var b=a?"enable":"disable";this._bar(b),this._leftHandle(b),this._rightHandle(b),this._leftLabel(b),this._rightLabel(b)},destroy:function(){this.element.removeClass("ui-rangeSlider-withArrows ui-rangeSlider-noArrow ui-rangeSlider-disabled"),this._destroyWidgets(),this._destroyElements(),this.element.removeClass("ui-rangeSlider"),this.options=null,a(window).unbind("resize",this._resizeProxy),this._resizeProxy=null,this._bindResize=null,a.Widget.prototype.destroy.apply(this,arguments)},_destroyWidget:function(a){this["_"+a]("destroy"),this[a].remove(),this[a]=null},_destroyWidgets:function(){this._destroyWidget("bar"),this._destroyWidget("leftHandle"),this._destroyWidget("rightHandle"),this._destroyRuler(),this._destroyLabels()},_destroyElements:function(){this.container.remove(),this.container=null,this.innerBar.remove(),this.innerBar=null,this.arrows.left.remove(),this.arrows.right.remove(),this.arrows=null}})}(jQuery),function(a){a.widget("ui.rangeSliderHandle",a.ui.rangeSliderDraggable,{currentMove:null,margin:0,parentElement:null,options:{isLeft:!0,bounds:{min:0,max:100},range:!1,value:0,step:!1},_value:0,_left:0,_create:function(){a.ui.rangeSliderDraggable.prototype._create.apply(this),this.element.css("position","absolute").css("top",0).addClass("ui-rangeSlider-handle").toggleClass("ui-rangeSlider-leftHandle",this.options.isLeft).toggleClass("ui-rangeSlider-rightHandle",!this.options.isLeft),this.element.append("<div class='ui-rangeSlider-handle-inner' />"),this._value=this._constraintValue(this.options.value)},destroy:function(){this.element.empty(),a.ui.rangeSliderDraggable.prototype.destroy.apply(this)},_setOption:function(b,c){"isLeft"!==b||c!==!0&&c!==!1||c===this.options.isLeft?"step"===b&&this._checkStep(c)?(this.options.step=c,this.update()):"bounds"===b?(this.options.bounds=c,this.update()):"range"===b&&this._checkRange(c)?(this.options.range=c,this.update()):"symmetricPositionning"===b&&(this.options.symmetricPositionning=c===!0,this.update()):(this.options.isLeft=c,this.element.toggleClass("ui-rangeSlider-leftHandle",this.options.isLeft).toggleClass("ui-rangeSlider-rightHandle",!this.options.isLeft),this._position(this._value),this.element.trigger("switch",this.options.isLeft)),a.ui.rangeSliderDraggable.prototype._setOption.apply(this,[b,c])},_checkRange:function(a){return a===!1||!this._isValidValue(a.min)&&!this._isValidValue(a.max)},_isValidValue:function(a){return"undefined"!=typeof a&&a!==!1&&parseFloat(a)!==a},_checkStep:function(a){return a===!1||parseFloat(a)===a},_initElement:function(){a.ui.rangeSliderDraggable.prototype._initElement.apply(this),0===this.cache.parent.width||null===this.cache.parent.width?setTimeout(a.proxy(this._initElementIfNotDestroyed,this),500):(this._position(this._value),this._triggerMouseEvent("initialize"))},_bounds:function(){return this.options.bounds},_cache:function(){a.ui.rangeSliderDraggable.prototype._cache.apply(this),this._cacheParent()},_cacheParent:function(){var a=this.element.parent();this.cache.parent={element:a,offset:a.offset(),padding:{left:this._parsePixels(a,"paddingLeft")},width:a.width()}},_position:function(a){var b=this._getPositionForValue(a);this._applyPosition(b)},_constraintPosition:function(a){var b=this._getValueForPosition(a);return this._getPositionForValue(b)},_applyPosition:function(b){a.ui.rangeSliderDraggable.prototype._applyPosition.apply(this,[b]),this._left=b,this._setValue(this._getValueForPosition(b)),this._triggerMouseEvent("moving")},_prepareEventData:function(){var b=a.ui.rangeSliderDraggable.prototype._prepareEventData.apply(this);return b.value=this._value,b},_setValue:function(a){a!==this._value&&(this._value=a)},_constraintValue:function(a){if(a=Math.min(a,this._bounds().max),a=Math.max(a,this._bounds().min),a=this._round(a),this.options.range!==!1){var b=this.options.range.min||!1,c=this.options.range.max||!1;b!==!1&&(a=Math.max(a,this._round(b))),c!==!1&&(a=Math.min(a,this._round(c))),a=Math.min(a,this._bounds().max),a=Math.max(a,this._bounds().min)}return a},_round:function(a){return this.options.step!==!1&&this.options.step>0?Math.round(a/this.options.step)*this.options.step:a},_getPositionForValue:function(a){if(!this.cache||!this.cache.parent||null===this.cache.parent.offset)return 0;a=this._constraintValue(a);var b=(a-this.options.bounds.min)/(this.options.bounds.max-this.options.bounds.min),c=this.cache.parent.width,d=this.cache.parent.offset.left,e=this.options.isLeft?0:this.cache.width.outer;return this.options.symmetricPositionning?b*(c-2*this.cache.width.outer)+d+e:b*c+d-e},_getValueForPosition:function(a){var b=this._getRawValueForPositionAndBounds(a,this.options.bounds.min,this.options.bounds.max);return this._constraintValue(b)},_getRawValueForPositionAndBounds:function(a,b,c){var d,e,f=null===this.cache.parent.offset?0:this.cache.parent.offset.left;return this.options.symmetricPositionning?(a-=this.options.isLeft?0:this.cache.width.outer,d=this.cache.parent.width-2*this.cache.width.outer):(a+=this.options.isLeft?0:this.cache.width.outer,d=this.cache.parent.width),0===d?this._value:(e=(a-f)/d,e*(c-b)+b)},value:function(a){return"undefined"!=typeof a&&(this._cache(),a=this._constraintValue(a),this._position(a)),this._value},update:function(){this._cache();var a=this._constraintValue(this._value),b=this._getPositionForValue(a);a!==this._value?(this._triggerMouseEvent("updating"),this._position(a),this._triggerMouseEvent("update")):b!==this.cache.offset.left&&(this._triggerMouseEvent("updating"),this._position(a),this._triggerMouseEvent("update"))},position:function(a){return"undefined"!=typeof a&&(this._cache(),a=this._constraintPosition(a),this._applyPosition(a)),this._left},add:function(a,b){return a+b},substract:function(a,b){return a-b},stepsBetween:function(a,b){return this.options.step===!1?b-a:(b-a)/this.options.step},multiplyStep:function(a,b){return a*b},moveRight:function(a){var b;return this.options.step===!1?(b=this._left,this.position(this._left+a),this._left-b):(b=this._value,this.value(this.add(b,this.multiplyStep(this.options.step,a))),this.stepsBetween(b,this._value))},moveLeft:function(a){return-this.moveRight(-a)},stepRatio:function(){if(this.options.step===!1)return 1;var a=(this.options.bounds.max-this.options.bounds.min)/this.options.step;return this.cache.parent.width/a}})}(jQuery),function(a){function b(a,b){return"undefined"==typeof a?b||!1:a}a.widget("ui.rangeSliderBar",a.ui.rangeSliderDraggable,{options:{leftHandle:null,rightHandle:null,bounds:{min:0,max:100},type:"rangeSliderHandle",range:!1,drag:function(){},stop:function(){},values:{min:0,max:20},wheelSpeed:4,wheelMode:null},_values:{min:0,max:20},_waitingToInit:2,_wheelTimeout:!1,_create:function(){a.ui.rangeSliderDraggable.prototype._create.apply(this),this.element.css("position","absolute").css("top",0).addClass("ui-rangeSlider-bar"),this.options.leftHandle.bind("initialize",a.proxy(this._onInitialized,this)).bind("mousestart",a.proxy(this._cache,this)).bind("stop",a.proxy(this._onHandleStop,this)),this.options.rightHandle.bind("initialize",a.proxy(this._onInitialized,this)).bind("mousestart",a.proxy(this._cache,this)).bind("stop",a.proxy(this._onHandleStop,this)),this._bindHandles(),this._values=this.options.values,this._setWheelModeOption(this.options.wheelMode)},destroy:function(){this.options.leftHandle.unbind(".bar"),this.options.rightHandle.unbind(".bar"),this.options=null,a.ui.rangeSliderDraggable.prototype.destroy.apply(this)},_setOption:function(a,b){"range"===a?this._setRangeOption(b):"wheelSpeed"===a?this._setWheelSpeedOption(b):"wheelMode"===a&&this._setWheelModeOption(b)},_setRangeOption:function(a){if(("object"!=typeof a||null===a)&&(a=!1),a!==!1||this.options.range!==!1){if(a!==!1){var c=b(a.min,this.options.range.min),d=b(a.max,this.options.range.max);this.options.range={min:c,max:d}}else this.options.range=!1;this._setLeftRange(),this._setRightRange()}},_setWheelSpeedOption:function(a){"number"==typeof a&&a>0&&(this.options.wheelSpeed=a)},_setWheelModeOption:function(a){(null===a||a===!1||"zoom"===a||"scroll"===a)&&(this.options.wheelMode!==a&&this.element.parent().unbind("mousewheel.bar"),this._bindMouseWheel(a),this.options.wheelMode=a)},_bindMouseWheel:function(b){"zoom"===b?this.element.parent().bind("mousewheel.bar",a.proxy(this._mouseWheelZoom,this)):"scroll"===b&&this.element.parent().bind("mousewheel.bar",a.proxy(this._mouseWheelScroll,this))},_setLeftRange:function(){if(this.options.range===!1)return!1;var a=this._values.max,b={min:!1,max:!1};b.max="undefined"!=typeof this.options.range.min&&this.options.range.min!==!1?this._leftHandle("substract",a,this.options.range.min):!1,b.min="undefined"!=typeof this.options.range.max&&this.options.range.max!==!1?this._leftHandle("substract",a,this.options.range.max):!1,this._leftHandle("option","range",b)},_setRightRange:function(){var a=this._values.min,b={min:!1,max:!1};b.min="undefined"!=typeof this.options.range.min&&this.options.range.min!==!1?this._rightHandle("add",a,this.options.range.min):!1,b.max="undefined"!=typeof this.options.range.max&&this.options.range.max!==!1?this._rightHandle("add",a,this.options.range.max):!1,this._rightHandle("option","range",b)},_deactivateRange:function(){this._leftHandle("option","range",!1),this._rightHandle("option","range",!1)},_reactivateRange:function(){this._setRangeOption(this.options.range)},_onInitialized:function(){this._waitingToInit--,0===this._waitingToInit&&this._initMe()},_initMe:function(){this._cache(),this.min(this._values.min),this.max(this._values.max);var a=this._leftHandle("position"),b=this._rightHandle("position")+this.options.rightHandle.width();this.element.offset({left:a}),this.element.css("width",b-a)},_leftHandle:function(){return this._handleProxy(this.options.leftHandle,arguments)},_rightHandle:function(){return this._handleProxy(this.options.rightHandle,arguments)},_handleProxy:function(a,b){var c=Array.prototype.slice.call(b);return a[this.options.type].apply(a,c)},_cache:function(){a.ui.rangeSliderDraggable.prototype._cache.apply(this),this._cacheHandles()},_cacheHandles:function(){this.cache.rightHandle={},this.cache.rightHandle.width=this.options.rightHandle.width(),this.cache.rightHandle.offset=this.options.rightHandle.offset(),this.cache.leftHandle={},this.cache.leftHandle.offset=this.options.leftHandle.offset()},_mouseStart:function(b){a.ui.rangeSliderDraggable.prototype._mouseStart.apply(this,[b]),this._deactivateRange()},_mouseStop:function(b){a.ui.rangeSliderDraggable.prototype._mouseStop.apply(this,[b]),this._cacheHandles(),this._values.min=this._leftHandle("value"),this._values.max=this._rightHandle("value"),this._reactivateRange(),this._leftHandle().trigger("stop"),this._rightHandle().trigger("stop")},_onDragLeftHandle:function(a,b){if(this._cacheIfNecessary(),b.element[0]===this.options.leftHandle[0]){if(this._switchedValues())return this._switchHandles(),this._onDragRightHandle(a,b),void 0;this._values.min=b.value,this.cache.offset.left=b.offset.left,this.cache.leftHandle.offset=b.offset,this._positionBar()}},_onDragRightHandle:function(a,b){if(this._cacheIfNecessary(),b.element[0]===this.options.rightHandle[0]){if(this._switchedValues())return this._switchHandles(),this._onDragLeftHandle(a,b),void 0;this._values.max=b.value,this.cache.rightHandle.offset=b.offset,this._positionBar()}},_positionBar:function(){var a=this.cache.rightHandle.offset.left+this.cache.rightHandle.width-this.cache.leftHandle.offset.left;this.cache.width.inner=a,this.element.css("width",a).offset({left:this.cache.leftHandle.offset.left})},_onHandleStop:function(){this._setLeftRange(),this._setRightRange()},_switchedValues:function(){if(this.min()>this.max()){var a=this._values.min;return this._values.min=this._values.max,this._values.max=a,!0}return!1},_switchHandles:function(){var a=this.options.leftHandle;this.options.leftHandle=this.options.rightHandle,this.options.rightHandle=a,this._leftHandle("option","isLeft",!0),this._rightHandle("option","isLeft",!1),this._bindHandles(),this._cacheHandles()},_bindHandles:function(){this.options.leftHandle.unbind(".bar").bind("sliderDrag.bar update.bar moving.bar",a.proxy(this._onDragLeftHandle,this)),this.options.rightHandle.unbind(".bar").bind("sliderDrag.bar update.bar moving.bar",a.proxy(this._onDragRightHandle,this))},_constraintPosition:function(b){var c,d={};return d.left=a.ui.rangeSliderDraggable.prototype._constraintPosition.apply(this,[b]),d.left=this._leftHandle("position",d.left),c=this._rightHandle("position",d.left+this.cache.width.outer-this.cache.rightHandle.width),d.width=c-d.left+this.cache.rightHandle.width,d},_applyPosition:function(b){a.ui.rangeSliderDraggable.prototype._applyPosition.apply(this,[b.left]),this.element.width(b.width)},_mouseWheelZoom:function(b,c,d,e){if(!this.enabled)return!1;var f=this._values.min+(this._values.max-this._values.min)/2,g={},h={};return this.options.range===!1||this.options.range.min===!1?(g.max=f,h.min=f):(g.max=f-this.options.range.min/2,h.min=f+this.options.range.min/2),this.options.range!==!1&&this.options.range.max!==!1&&(g.min=f-this.options.range.max/2,h.max=f+this.options.range.max/2),this._leftHandle("option","range",g),this._rightHandle("option","range",h),clearTimeout(this._wheelTimeout),this._wheelTimeout=setTimeout(a.proxy(this._wheelStop,this),200),this.zoomIn(e*this.options.wheelSpeed),!1},_mouseWheelScroll:function(b,c,d,e){return this.enabled?(this._wheelTimeout===!1?this.startScroll():clearTimeout(this._wheelTimeout),this._wheelTimeout=setTimeout(a.proxy(this._wheelStop,this),200),this.scrollLeft(e*this.options.wheelSpeed),!1):!1},_wheelStop:function(){this.stopScroll(),this._wheelTimeout=!1},min:function(a){return this._leftHandle("value",a)},max:function(a){return this._rightHandle("value",a)},startScroll:function(){this._deactivateRange()},stopScroll:function(){this._reactivateRange(),this._triggerMouseEvent("stop"),this._leftHandle().trigger("stop"),this._rightHandle().trigger("stop")},scrollLeft:function(a){return a=a||1,0>a?this.scrollRight(-a):(a=this._leftHandle("moveLeft",a),this._rightHandle("moveLeft",a),this.update(),this._triggerMouseEvent("scroll"),void 0)},scrollRight:function(a){return a=a||1,0>a?this.scrollLeft(-a):(a=this._rightHandle("moveRight",a),this._leftHandle("moveRight",a),this.update(),this._triggerMouseEvent("scroll"),void 0)},zoomIn:function(a){if(a=a||1,0>a)return this.zoomOut(-a);var b=this._rightHandle("moveLeft",a);a>b&&(b/=2,this._rightHandle("moveRight",b)),this._leftHandle("moveRight",b),this.update(),this._triggerMouseEvent("zoom")},zoomOut:function(a){if(a=a||1,0>a)return this.zoomIn(-a);var b=this._rightHandle("moveRight",a);a>b&&(b/=2,this._rightHandle("moveLeft",b)),this._leftHandle("moveLeft",b),this.update(),this._triggerMouseEvent("zoom")},values:function(a,b){if("undefined"!=typeof a&&"undefined"!=typeof b){var c=Math.min(a,b),d=Math.max(a,b);this._deactivateRange(),this.options.leftHandle.unbind(".bar"),this.options.rightHandle.unbind(".bar"),this._values.min=this._leftHandle("value",c),this._values.max=this._rightHandle("value",d),this._bindHandles(),this._reactivateRange(),this.update()
                }return{min:this._values.min,max:this._values.max}},update:function(){this._values.min=this.min(),this._values.max=this.max(),this._cache(),this._positionBar()}})}(jQuery),function(a){function b(b,c,d,e){this.label1=b,this.label2=c,this.type=d,this.options=e,this.handle1=this.label1[this.type]("option","handle"),this.handle2=this.label2[this.type]("option","handle"),this.cache=null,this.left=b,this.right=c,this.moving=!1,this.initialized=!1,this.updating=!1,this.Init=function(){this.BindHandle(this.handle1),this.BindHandle(this.handle2),"show"===this.options.show?(setTimeout(a.proxy(this.PositionLabels,this),1),this.initialized=!0):setTimeout(a.proxy(this.AfterInit,this),1e3),this._resizeProxy=a.proxy(this.onWindowResize,this),a(window).resize(this._resizeProxy)},this.Destroy=function(){this._resizeProxy&&(a(window).unbind("resize",this._resizeProxy),this._resizeProxy=null,this.handle1.unbind(".positionner"),this.handle1=null,this.handle2.unbind(".positionner"),this.handle2=null,this.label1=null,this.label2=null,this.left=null,this.right=null),this.cache=null},this.AfterInit=function(){this.initialized=!0},this.Cache=function(){"none"!==this.label1.css("display")&&(this.cache={},this.cache.label1={},this.cache.label2={},this.cache.handle1={},this.cache.handle2={},this.cache.offsetParent={},this.CacheElement(this.label1,this.cache.label1),this.CacheElement(this.label2,this.cache.label2),this.CacheElement(this.handle1,this.cache.handle1),this.CacheElement(this.handle2,this.cache.handle2),this.CacheElement(this.label1.offsetParent(),this.cache.offsetParent))},this.CacheIfNecessary=function(){null===this.cache?this.Cache():(this.CacheWidth(this.label1,this.cache.label1),this.CacheWidth(this.label2,this.cache.label2),this.CacheHeight(this.label1,this.cache.label1),this.CacheHeight(this.label2,this.cache.label2),this.CacheWidth(this.label1.offsetParent(),this.cache.offsetParent))},this.CacheElement=function(a,b){this.CacheWidth(a,b),this.CacheHeight(a,b),b.offset=a.offset(),b.margin={left:this.ParsePixels("marginLeft",a),right:this.ParsePixels("marginRight",a)},b.border={left:this.ParsePixels("borderLeftWidth",a),right:this.ParsePixels("borderRightWidth",a)}},this.CacheWidth=function(a,b){b.width=a.width(),b.outerWidth=a.outerWidth()},this.CacheHeight=function(a,b){b.outerHeightMargin=a.outerHeight(!0)},this.ParsePixels=function(a,b){return parseInt(b.css(a),10)||0},this.BindHandle=function(b){b.bind("updating.positionner",a.proxy(this.onHandleUpdating,this)),b.bind("update.positionner",a.proxy(this.onHandleUpdated,this)),b.bind("moving.positionner",a.proxy(this.onHandleMoving,this)),b.bind("stop.positionner",a.proxy(this.onHandleStop,this))},this.PositionLabels=function(){if(this.CacheIfNecessary(),null!==this.cache){var a=this.GetRawPosition(this.cache.label1,this.cache.handle1),b=this.GetRawPosition(this.cache.label2,this.cache.handle2);this.label1[d]("option","isLeft")?this.ConstraintPositions(a,b):this.ConstraintPositions(b,a),this.PositionLabel(this.label1,a.left,this.cache.label1),this.PositionLabel(this.label2,b.left,this.cache.label2)}},this.PositionLabel=function(a,b,c){var d,e,f,g=this.cache.offsetParent.offset.left+this.cache.offsetParent.border.left;g-b>=0?(a.css("right",""),a.offset({left:b})):(d=g+this.cache.offsetParent.width,e=b+c.margin.left+c.outerWidth+c.margin.right,f=d-e,a.css("left",""),a.css("right",f))},this.ConstraintPositions=function(a,b){(a.center<b.center&&a.outerRight>b.outerLeft||a.center>b.center&&b.outerRight>a.outerLeft)&&(a=this.getLeftPosition(a,b),b=this.getRightPosition(a,b))},this.getLeftPosition=function(a,b){var c=(b.center+a.center)/2,d=c-a.cache.outerWidth-a.cache.margin.right+a.cache.border.left;return a.left=d,a},this.getRightPosition=function(a,b){var c=(b.center+a.center)/2;return b.left=c+b.cache.margin.left+b.cache.border.left,b},this.ShowIfNecessary=function(){"show"===this.options.show||this.moving||!this.initialized||this.updating||(this.label1.stop(!0,!0).fadeIn(this.options.durationIn||0),this.label2.stop(!0,!0).fadeIn(this.options.durationIn||0),this.moving=!0)},this.HideIfNeeded=function(){this.moving===!0&&(this.label1.stop(!0,!0).delay(this.options.delayOut||0).fadeOut(this.options.durationOut||0),this.label2.stop(!0,!0).delay(this.options.delayOut||0).fadeOut(this.options.durationOut||0),this.moving=!1)},this.onHandleMoving=function(a,b){this.ShowIfNecessary(),this.CacheIfNecessary(),this.UpdateHandlePosition(b),this.PositionLabels()},this.onHandleUpdating=function(){this.updating=!0},this.onHandleUpdated=function(){this.updating=!1,this.cache=null},this.onHandleStop=function(){this.HideIfNeeded()},this.onWindowResize=function(){this.cache=null},this.UpdateHandlePosition=function(a){null!==this.cache&&(a.element[0]===this.handle1[0]?this.UpdatePosition(a,this.cache.handle1):this.UpdatePosition(a,this.cache.handle2))},this.UpdatePosition=function(a,b){b.offset=a.offset,b.value=a.value},this.GetRawPosition=function(a,b){var c=b.offset.left+b.outerWidth/2,d=c-a.outerWidth/2,e=d+a.outerWidth-a.border.left-a.border.right,f=d-a.margin.left-a.border.left,g=b.offset.top-a.outerHeightMargin;return{left:d,outerLeft:f,top:g,right:e,outerRight:f+a.outerWidth+a.margin.left+a.margin.right,cache:a,center:c}},this.Init()}a.widget("ui.rangeSliderLabel",a.ui.rangeSliderMouseTouch,{options:{handle:null,formatter:!1,handleType:"rangeSliderHandle",show:"show",durationIn:0,durationOut:500,delayOut:500,isLeft:!1},cache:null,_positionner:null,_valueContainer:null,_innerElement:null,_value:null,_create:function(){this.options.isLeft=this._handle("option","isLeft"),this.element.addClass("ui-rangeSlider-label").css("position","absolute").css("display","block"),this._createElements(),this._toggleClass(),this.options.handle.bind("moving.label",a.proxy(this._onMoving,this)).bind("update.label",a.proxy(this._onUpdate,this)).bind("switch.label",a.proxy(this._onSwitch,this)),"show"!==this.options.show&&this.element.hide(),this._mouseInit()},destroy:function(){this.options.handle.unbind(".label"),this.options.handle=null,this._valueContainer=null,this._innerElement=null,this.element.empty(),this._positionner&&(this._positionner.Destroy(),this._positionner=null),a.ui.rangeSliderMouseTouch.prototype.destroy.apply(this)},_createElements:function(){this._valueContainer=a("<div class='ui-rangeSlider-label-value' />").appendTo(this.element),this._innerElement=a("<div class='ui-rangeSlider-label-inner' />").appendTo(this.element)},_handle:function(){var a=Array.prototype.slice.apply(arguments);return this.options.handle[this.options.handleType].apply(this.options.handle,a)},_setOption:function(a,b){"show"===a?this._updateShowOption(b):("durationIn"===a||"durationOut"===a||"delayOut"===a)&&this._updateDurations(a,b),this._setFormatterOption(a,b)},_setFormatterOption:function(a,b){"formatter"===a&&("function"==typeof b||b===!1)&&(this.options.formatter=b,this._display(this._value))},_updateShowOption:function(a){this.options.show=a,"show"!==this.options.show?(this.element.hide(),this._positionner.moving=!1):(this.element.show(),this._display(this.options.handle[this.options.handleType]("value")),this._positionner.PositionLabels()),this._positionner.options.show=this.options.show},_updateDurations:function(a,b){parseInt(b,10)===b&&(this._positionner.options[a]=b,this.options[a]=b)},_display:function(a){this.options.formatter===!1?this._displayText(Math.round(a)):this._displayText(this.options.formatter(a)),this._value=a},_displayText:function(a){this._valueContainer.text(a)},_toggleClass:function(){this.element.toggleClass("ui-rangeSlider-leftLabel",this.options.isLeft).toggleClass("ui-rangeSlider-rightLabel",!this.options.isLeft)},_positionLabels:function(){this._positionner.PositionLabels()},_mouseDown:function(a){this.options.handle.trigger(a)},_mouseUp:function(a){this.options.handle.trigger(a)},_mouseMove:function(a){this.options.handle.trigger(a)},_onMoving:function(a,b){this._display(b.value)},_onUpdate:function(){"show"===this.options.show&&this.update()},_onSwitch:function(a,b){this.options.isLeft=b,this._toggleClass(),this._positionLabels()},pair:function(a){null===this._positionner&&(this._positionner=new b(this.element,a,this.widgetName,{show:this.options.show,durationIn:this.options.durationIn,durationOut:this.options.durationOut,delayOut:this.options.delayOut}),a[this.widgetName]("positionner",this._positionner))},positionner:function(a){return"undefined"!=typeof a&&(this._positionner=a),this._positionner},update:function(){this._positionner.cache=null,this._display(this._handle("value")),"show"===this.options.show&&this._positionLabels()}})}(jQuery),function(a){a.widget("ui.dateRangeSlider",a.ui.rangeSlider,{options:{bounds:{min:new Date(2010,0,1).valueOf(),max:new Date(2012,0,1).valueOf()},defaultValues:{min:new Date(2010,1,11).valueOf(),max:new Date(2011,1,11).valueOf()}},_create:function(){a.ui.rangeSlider.prototype._create.apply(this),this.element.addClass("ui-dateRangeSlider")},destroy:function(){this.element.removeClass("ui-dateRangeSlider"),a.ui.rangeSlider.prototype.destroy.apply(this)},_setDefaultValues:function(){this._values={min:this.options.defaultValues.min.valueOf(),max:this.options.defaultValues.max.valueOf()}},_setRulerParameters:function(){this.ruler.ruler({min:new Date(this.options.bounds.min),max:new Date(this.options.bounds.max),scales:this.options.scales})},_setOption:function(b,c){("defaultValues"===b||"bounds"===b)&&"undefined"!=typeof c&&null!==c&&this._isValidDate(c.min)&&this._isValidDate(c.max)?a.ui.rangeSlider.prototype._setOption.apply(this,[b,{min:c.min.valueOf(),max:c.max.valueOf()}]):a.ui.rangeSlider.prototype._setOption.apply(this,this._toArray(arguments))},_handleType:function(){return"dateRangeSliderHandle"},option:function(b){if("bounds"===b||"defaultValues"===b){var c=a.ui.rangeSlider.prototype.option.apply(this,arguments);return{min:new Date(c.min),max:new Date(c.max)}}return a.ui.rangeSlider.prototype.option.apply(this,this._toArray(arguments))},_defaultFormatter:function(a){var b=a.getMonth()+1,c=a.getDate();return""+a.getFullYear()+"-"+(10>b?"0"+b:b)+"-"+(10>c?"0"+c:c)},_getFormatter:function(){var a=this.options.formatter;return(this.options.formatter===!1||null===this.options.formatter)&&(a=this._defaultFormatter),function(a){return function(b){return a(new Date(b))}}(a)},values:function(b,c){var d=null;return d=this._isValidDate(b)&&this._isValidDate(c)?a.ui.rangeSlider.prototype.values.apply(this,[b.valueOf(),c.valueOf()]):a.ui.rangeSlider.prototype.values.apply(this,this._toArray(arguments)),{min:new Date(d.min),max:new Date(d.max)}},min:function(b){return this._isValidDate(b)?new Date(a.ui.rangeSlider.prototype.min.apply(this,[b.valueOf()])):new Date(a.ui.rangeSlider.prototype.min.apply(this))},max:function(b){return this._isValidDate(b)?new Date(a.ui.rangeSlider.prototype.max.apply(this,[b.valueOf()])):new Date(a.ui.rangeSlider.prototype.max.apply(this))},bounds:function(b,c){var d;return d=this._isValidDate(b)&&this._isValidDate(c)?a.ui.rangeSlider.prototype.bounds.apply(this,[b.valueOf(),c.valueOf()]):a.ui.rangeSlider.prototype.bounds.apply(this,this._toArray(arguments)),{min:new Date(d.min),max:new Date(d.max)}},_isValidDate:function(a){return"undefined"!=typeof a&&a instanceof Date},_toArray:function(a){return Array.prototype.slice.call(a)}})}(jQuery),function(a){a.widget("ui.dateRangeSliderHandle",a.ui.rangeSliderHandle,{_steps:!1,_boundsValues:{},_create:function(){this._createBoundsValues(),a.ui.rangeSliderHandle.prototype._create.apply(this)},_getValueForPosition:function(a){var b=this._getRawValueForPositionAndBounds(a,this.options.bounds.min.valueOf(),this.options.bounds.max.valueOf());return this._constraintValue(new Date(b))},_setOption:function(b,c){return"step"===b?(this.options.step=c,this._createSteps(),this.update(),void 0):(a.ui.rangeSliderHandle.prototype._setOption.apply(this,[b,c]),"bounds"===b&&this._createBoundsValues(),void 0)},_createBoundsValues:function(){this._boundsValues={min:this.options.bounds.min.valueOf(),max:this.options.bounds.max.valueOf()}},_bounds:function(){return this._boundsValues},_createSteps:function(){if(this.options.step===!1||!this._isValidStep())return this._steps=!1,void 0;var a=new Date(this.options.bounds.min),b=new Date(this.options.bounds.max),c=a,d=0,e=new Date;for(this._steps=[];b>=c&&(1===d||e.valueOf()!==c.valueOf());)e=c,this._steps.push(c.valueOf()),c=this._addStep(a,d,this.options.step),d++;e.valueOf()===c.valueOf()&&(this._steps=!1)},_isValidStep:function(){return"object"==typeof this.options.step},_addStep:function(a,b,c){var d=new Date(a.valueOf());return d=this._addThing(d,"FullYear",b,c.years),d=this._addThing(d,"Month",b,c.months),d=this._addThing(d,"Date",b,7*c.weeks),d=this._addThing(d,"Date",b,c.days),d=this._addThing(d,"Hours",b,c.hours),d=this._addThing(d,"Minutes",b,c.minutes),d=this._addThing(d,"Seconds",b,c.seconds)},_addThing:function(a,b,c,d){return 0===c||0===(d||0)?a:(a["set"+b](a["get"+b]()+c*(d||0)),a)},_round:function(a){if(this._steps===!1)return a;for(var b,c,d=this.options.bounds.max.valueOf(),e=this.options.bounds.min.valueOf(),f=Math.max(0,(a-e)/(d-e)),g=Math.floor(this._steps.length*f);this._steps[g]>a;)g--;for(;g+1<this._steps.length&&this._steps[g+1]<=a;)g++;return g>=this._steps.length-1?this._steps[this._steps.length-1]:0===g?this._steps[0]:(b=this._steps[g],c=this._steps[g+1],c-a>a-b?b:c)},update:function(){this._createBoundsValues(),this._createSteps(),a.ui.rangeSliderHandle.prototype.update.apply(this)},add:function(a,b){return this._addStep(new Date(a),1,b).valueOf()},substract:function(a,b){return this._addStep(new Date(a),-1,b).valueOf()},stepsBetween:function(a,b){if(this.options.step===!1)return b-a;var c=Math.min(a,b),d=Math.max(a,b),e=0,f=!1,g=a>b;for(this.add(c,this.options.step)-c<0&&(f=!0);d>c;)f?d=this.add(d,this.options.step):c=this.add(c,this.options.step),e++;return g?-e:e},multiplyStep:function(a,b){var c={};for(var d in a)a.hasOwnProperty(d)&&(c[d]=a[d]*b);return c},stepRatio:function(){if(this.options.step===!1)return 1;var a=this._steps.length;return this.cache.parent.width/a}})}(jQuery),function(a){a.widget("ui.editRangeSlider",a.ui.rangeSlider,{options:{type:"text",round:1},_create:function(){a.ui.rangeSlider.prototype._create.apply(this),this.element.addClass("ui-editRangeSlider")},destroy:function(){this.element.removeClass("ui-editRangeSlider"),a.ui.rangeSlider.prototype.destroy.apply(this)},_setOption:function(b,c){("type"===b||"step"===b)&&this._setLabelOption(b,c),"type"===b&&(this.options[b]=null===this.labels.left?c:this._leftLabel("option",b)),a.ui.rangeSlider.prototype._setOption.apply(this,[b,c])},_setLabelOption:function(a,b){null!==this.labels.left&&(this._leftLabel("option",a,b),this._rightLabel("option",a,b))},_labelType:function(){return"editRangeSliderLabel"},_createLabel:function(b,c){var d=a.ui.rangeSlider.prototype._createLabel.apply(this,[b,c]);return null===b&&d.bind("valueChange",a.proxy(this._onValueChange,this)),d},_addPropertiesToParameter:function(a){return a.type=this.options.type,a.step=this.options.step,a.id=this.element.attr("id"),a},_getLabelConstructorParameters:function(b,c){var d=a.ui.rangeSlider.prototype._getLabelConstructorParameters.apply(this,[b,c]);return this._addPropertiesToParameter(d)},_getLabelRefreshParameters:function(b,c){var d=a.ui.rangeSlider.prototype._getLabelRefreshParameters.apply(this,[b,c]);return this._addPropertiesToParameter(d)},_onValueChange:function(a,b){var c=!1;c=b.isLeft?this._values.min!==this.min(b.value):this._values.max!==this.max(b.value),c&&this._trigger("userValuesChanged")}})}(jQuery),function(a){a.widget("ui.editRangeSliderLabel",a.ui.rangeSliderLabel,{options:{type:"text",step:!1,id:""},_input:null,_text:"",_create:function(){a.ui.rangeSliderLabel.prototype._create.apply(this),this._createInput()},_setOption:function(b,c){"type"===b?this._setTypeOption(c):"step"===b&&this._setStepOption(c),a.ui.rangeSliderLabel.prototype._setOption.apply(this,[b,c])},_createInput:function(){this._input=a("<input type='"+this.options.type+"' />").addClass("ui-editRangeSlider-inputValue").appendTo(this._valueContainer),this._setInputName(),this._input.bind("keyup",a.proxy(this._onKeyUp,this)),this._input.blur(a.proxy(this._onChange,this)),"number"===this.options.type&&(this.options.step!==!1&&this._input.attr("step",this.options.step),this._input.click(a.proxy(this._onChange,this))),this._input.val(this._text)},_setInputName:function(){var a=this.options.isLeft?"left":"right";this._input.attr("name",this.options.id+a)},_onSwitch:function(b,c){a.ui.rangeSliderLabel.prototype._onSwitch.apply(this,[b,c]),this._setInputName()},_destroyInput:function(){this._input.remove(),this._input=null},_onKeyUp:function(a){return 13===a.which?(this._onChange(a),!1):void 0},_onChange:function(){var a=this._returnCheckedValue(this._input.val());a!==!1&&this._triggerValue(a)},_triggerValue:function(a){var b=this.options.handle[this.options.handleType]("option","isLeft");this.element.trigger("valueChange",[{isLeft:b,value:a}])},_returnCheckedValue:function(a){var b=parseFloat(a);return isNaN(b)||isNaN(Number(a))?!1:b},_setTypeOption:function(a){"text"!==a&&"number"!==a||this.options.type===a||(this._destroyInput(),this.options.type=a,this._createInput())},_setStepOption:function(a){this.options.step=a,"number"===this.options.type&&this._input.attr("step",a!==!1?a:"any")},_displayText:function(a){this._input.val(a),this._text=a},enable:function(){a.ui.rangeSliderLabel.prototype.enable.apply(this),this._input.attr("disabled",null)},disable:function(){a.ui.rangeSliderLabel.prototype.disable.apply(this),this._input.attr("disabled","disabled")}})}(jQuery),function(a){var b={first:function(a){return a},next:function(a){return a+1},format:function(){},label:function(a){return Math.round(a)},stop:function(){return!1}};a.widget("ui.ruler",{options:{min:0,max:100,scales:[]},_create:function(){this.element.addClass("ui-ruler"),this._createScales()},destroy:function(){this.element.removeClass("ui-ruler"),this.element.empty()},_regenerate:function(){this.element.empty(),this._createScales()},_setOption:function(a,b){return"min"===a||"max"===a&&b!==this.options[a]?(this.options[a]=b,this._regenerate(),void 0):"scales"===a&&b instanceof Array?(this.options.scales=b,this._regenerate(),void 0):void 0},_createScales:function(){if(this.options.max!==this.options.min)for(var a=0;a<this.options.scales.length;a++)this._createScale(this.options.scales[a],a)},_createScale:function(c,d){var e=a.extend({},b,c),f=a("<div class='ui-ruler-scale' />").appendTo(this.element);f.addClass("ui-ruler-scale"+d),this._createTicks(f,e)},_createTicks:function(a,b){var c,d,e,f=b.first(this.options.min,this.options.max),g=this.options.max-this.options.min,h=!0;do c=f,f=b.next(c),d=(Math.min(f,this.options.max)-Math.max(c,this.options.min))/g,e=this._createTick(c,f,b),a.append(e),e.css("width",100*d+"%"),h&&c>this.options.min&&e.css("margin-left",100*(c-this.options.min)/g+"%"),h=!1;while(!this._stop(b,f))},_stop:function(a,b){return a.stop(b)||b>=this.options.max},_createTick:function(b,c,d){var e=a("<div class='ui-ruler-tick' style='display:inline-block' />"),f=a("<div class='ui-ruler-tick-inner' />").appendTo(e),g=a("<span class='ui-ruler-tick-label' />").appendTo(f);return g.text(d.label(b,c)),d.format(e,b,c),e}})}(jQuery);
                return $.fn.rangeSlider;
                  }).apply(root, arguments);
                });
                }(this));
                
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('widget/date_range_slider',["underscore", "jquery", "jqrangeslider", "backbone", "common/continuum_view", "common/has_properties"], function(_, $, $1, Backbone, continuum_view, HasProperties) {
                    var DateRangeSlider, DateRangeSliderView, DateRangeSliders, _ref, _ref1, _ref2;
                    DateRangeSliderView = (function(_super) {
                      __extends(DateRangeSliderView, _super);
                
                      function DateRangeSliderView() {
                        _ref = DateRangeSliderView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      DateRangeSliderView.prototype.initialize = function(options) {
                        var _this = this;
                        DateRangeSliderView.__super__.initialize.call(this, options);
                        this.render();
                        return this.listenTo(this.model, 'change', function() {
                          return _this.render;
                        });
                      };
                
                      DateRangeSliderView.prototype.render = function() {
                        var bounds_max, bounds_min, range_max, range_min, value_max, value_min, _ref1, _ref2, _ref3,
                          _this = this;
                        this.$el.empty();
                        _ref1 = this.mget("value"), value_min = _ref1[0], value_max = _ref1[1];
                        _ref2 = this.mget("range"), range_min = _ref2[0], range_max = _ref2[1];
                        _ref3 = this.mget("bounds"), bounds_min = _ref3[0], bounds_max = _ref3[1];
                        this.$el.dateRangeSlider({
                          defaultValues: {
                            min: new Date(value_min),
                            max: new Date(value_max)
                          },
                          bounds: {
                            min: new Date(bounds_min),
                            max: new Date(bounds_max)
                          },
                          range: {
                            min: _.isObject(range_min) ? range_min : false,
                            max: _.isObject(range_max) ? range_max : false
                          },
                          step: this.mget("step") || {},
                          enabled: this.mget("enabled"),
                          arrows: this.mget("arrows"),
                          valueLabels: this.mget("value_labels"),
                          wheelMode: this.mget("wheel_mode")
                        });
                        return this.$el.on("userValuesChanged", function(event, data) {
                          _this.mset('value', [data.values.min, data.values.max]);
                          return _this.model.save();
                        });
                      };
                
                      return DateRangeSliderView;
                
                    })(continuum_view.View);
                    DateRangeSlider = (function(_super) {
                      __extends(DateRangeSlider, _super);
                
                      function DateRangeSlider() {
                        _ref1 = DateRangeSlider.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      DateRangeSlider.prototype.type = "DateRangeSlider";
                
                      DateRangeSlider.prototype.default_view = DateRangeSliderView;
                
                      DateRangeSlider.prototype.defaults = function() {
                        return _.extend({}, DateRangeSlider.__super__.defaults.call(this), {
                          /*
                          value
                          range
                          bounds
                          step
                          formatter
                          scales
                          enabled
                          arrows
                          value_labels
                          wheel_mode
                          */
                
                        });
                      };
                
                      return DateRangeSlider;
                
                    })(HasProperties);
                    DateRangeSliders = (function(_super) {
                      __extends(DateRangeSliders, _super);
                
                      function DateRangeSliders() {
                        _ref2 = DateRangeSliders.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      DateRangeSliders.prototype.model = DateRangeSlider;
                
                      return DateRangeSliders;
                
                    })(Backbone.Collection);
                    return {
                      Model: DateRangeSlider,
                      Collection: new DateRangeSliders(),
                      View: DateRangeSliderView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=date_range_slider.js.map
                */;
                define('jquery_ui/datepicker',['jquery','./core'], function (jQuery) {
                /*!
                 * jQuery UI Datepicker 1.10.0
                 * http://jqueryui.com
                 *
                 * Copyright 2013 jQuery Foundation and other contributors
                 * Released under the MIT license.
                 * http://jquery.org/license
                 *
                 * http://api.jqueryui.com/datepicker/
                 *
                 * Depends:
                 *	jquery.ui.core.js
                 */
                (function( $, undefined ) {
                
                $.extend($.ui, { datepicker: { version: "1.10.0" } });
                
                var PROP_NAME = "datepicker",
                	dpuuid = new Date().getTime(),
                	instActive;
                
                /* Date picker manager.
                   Use the singleton instance of this class, $.datepicker, to interact with the date picker.
                   Settings for (groups of) date pickers are maintained in an instance object,
                   allowing multiple different settings on the same page. */
                
                function Datepicker() {
                	this._curInst = null; // The current instance in use
                	this._keyEvent = false; // If the last event was a key event
                	this._disabledInputs = []; // List of date picker inputs that have been disabled
                	this._datepickerShowing = false; // True if the popup picker is showing , false if not
                	this._inDialog = false; // True if showing within a "dialog", false if not
                	this._mainDivId = "ui-datepicker-div"; // The ID of the main datepicker division
                	this._inlineClass = "ui-datepicker-inline"; // The name of the inline marker class
                	this._appendClass = "ui-datepicker-append"; // The name of the append marker class
                	this._triggerClass = "ui-datepicker-trigger"; // The name of the trigger marker class
                	this._dialogClass = "ui-datepicker-dialog"; // The name of the dialog marker class
                	this._disableClass = "ui-datepicker-disabled"; // The name of the disabled covering marker class
                	this._unselectableClass = "ui-datepicker-unselectable"; // The name of the unselectable cell marker class
                	this._currentClass = "ui-datepicker-current-day"; // The name of the current day marker class
                	this._dayOverClass = "ui-datepicker-days-cell-over"; // The name of the day hover marker class
                	this.regional = []; // Available regional settings, indexed by language code
                	this.regional[""] = { // Default regional settings
                		closeText: "Done", // Display text for close link
                		prevText: "Prev", // Display text for previous month link
                		nextText: "Next", // Display text for next month link
                		currentText: "Today", // Display text for current month link
                		monthNames: ["January","February","March","April","May","June",
                			"July","August","September","October","November","December"], // Names of months for drop-down and formatting
                		monthNamesShort: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"], // For formatting
                		dayNames: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], // For formatting
                		dayNamesShort: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"], // For formatting
                		dayNamesMin: ["Su","Mo","Tu","We","Th","Fr","Sa"], // Column headings for days starting at Sunday
                		weekHeader: "Wk", // Column header for week of the year
                		dateFormat: "mm/dd/yy", // See format options on parseDate
                		firstDay: 0, // The first day of the week, Sun = 0, Mon = 1, ...
                		isRTL: false, // True if right-to-left language, false if left-to-right
                		showMonthAfterYear: false, // True if the year select precedes month, false for month then year
                		yearSuffix: "" // Additional text to append to the year in the month headers
                	};
                	this._defaults = { // Global defaults for all the date picker instances
                		showOn: "focus", // "focus" for popup on focus,
                			// "button" for trigger button, or "both" for either
                		showAnim: "fadeIn", // Name of jQuery animation for popup
                		showOptions: {}, // Options for enhanced animations
                		defaultDate: null, // Used when field is blank: actual date,
                			// +/-number for offset from today, null for today
                		appendText: "", // Display text following the input box, e.g. showing the format
                		buttonText: "...", // Text for trigger button
                		buttonImage: "", // URL for trigger button image
                		buttonImageOnly: false, // True if the image appears alone, false if it appears on a button
                		hideIfNoPrevNext: false, // True to hide next/previous month links
                			// if not applicable, false to just disable them
                		navigationAsDateFormat: false, // True if date formatting applied to prev/today/next links
                		gotoCurrent: false, // True if today link goes back to current selection instead
                		changeMonth: false, // True if month can be selected directly, false if only prev/next
                		changeYear: false, // True if year can be selected directly, false if only prev/next
                		yearRange: "c-10:c+10", // Range of years to display in drop-down,
                			// either relative to today's year (-nn:+nn), relative to currently displayed year
                			// (c-nn:c+nn), absolute (nnnn:nnnn), or a combination of the above (nnnn:-n)
                		showOtherMonths: false, // True to show dates in other months, false to leave blank
                		selectOtherMonths: false, // True to allow selection of dates in other months, false for unselectable
                		showWeek: false, // True to show week of the year, false to not show it
                		calculateWeek: this.iso8601Week, // How to calculate the week of the year,
                			// takes a Date and returns the number of the week for it
                		shortYearCutoff: "+10", // Short year values < this are in the current century,
                			// > this are in the previous century,
                			// string value starting with "+" for current year + value
                		minDate: null, // The earliest selectable date, or null for no limit
                		maxDate: null, // The latest selectable date, or null for no limit
                		duration: "fast", // Duration of display/closure
                		beforeShowDay: null, // Function that takes a date and returns an array with
                			// [0] = true if selectable, false if not, [1] = custom CSS class name(s) or "",
                			// [2] = cell title (optional), e.g. $.datepicker.noWeekends
                		beforeShow: null, // Function that takes an input field and
                			// returns a set of custom settings for the date picker
                		onSelect: null, // Define a callback function when a date is selected
                		onChangeMonthYear: null, // Define a callback function when the month or year is changed
                		onClose: null, // Define a callback function when the datepicker is closed
                		numberOfMonths: 1, // Number of months to show at a time
                		showCurrentAtPos: 0, // The position in multipe months at which to show the current month (starting at 0)
                		stepMonths: 1, // Number of months to step back/forward
                		stepBigMonths: 12, // Number of months to step back/forward for the big links
                		altField: "", // Selector for an alternate field to store selected dates into
                		altFormat: "", // The date format to use for the alternate field
                		constrainInput: true, // The input is constrained by the current date format
                		showButtonPanel: false, // True to show button panel, false to not show it
                		autoSize: false, // True to size the input for the date format, false to leave as is
                		disabled: false // The initial disabled state
                	};
                	$.extend(this._defaults, this.regional[""]);
                	this.dpDiv = bindHover($("<div id='" + this._mainDivId + "' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"));
                }
                
                $.extend(Datepicker.prototype, {
                	/* Class name added to elements to indicate already configured with a date picker. */
                	markerClassName: "hasDatepicker",
                
                	//Keep track of the maximum number of rows displayed (see #7043)
                	maxRows: 4,
                
                	// TODO rename to "widget" when switching to widget factory
                	_widgetDatepicker: function() {
                		return this.dpDiv;
                	},
                
                	/* Override the default settings for all instances of the date picker.
                	 * @param  settings  object - the new settings to use as defaults (anonymous object)
                	 * @return the manager object
                	 */
                	setDefaults: function(settings) {
                		extendRemove(this._defaults, settings || {});
                		return this;
                	},
                
                	/* Attach the date picker to a jQuery selection.
                	 * @param  target	element - the target input field or division or span
                	 * @param  settings  object - the new settings to use for this date picker instance (anonymous)
                	 */
                	_attachDatepicker: function(target, settings) {
                		var nodeName, inline, inst;
                		nodeName = target.nodeName.toLowerCase();
                		inline = (nodeName === "div" || nodeName === "span");
                		if (!target.id) {
                			this.uuid += 1;
                			target.id = "dp" + this.uuid;
                		}
                		inst = this._newInst($(target), inline);
                		inst.settings = $.extend({}, settings || {});
                		if (nodeName === "input") {
                			this._connectDatepicker(target, inst);
                		} else if (inline) {
                			this._inlineDatepicker(target, inst);
                		}
                	},
                
                	/* Create a new instance object. */
                	_newInst: function(target, inline) {
                		var id = target[0].id.replace(/([^A-Za-z0-9_\-])/g, "\\\\$1"); // escape jQuery meta chars
                		return {id: id, input: target, // associated target
                			selectedDay: 0, selectedMonth: 0, selectedYear: 0, // current selection
                			drawMonth: 0, drawYear: 0, // month being drawn
                			inline: inline, // is datepicker inline or not
                			dpDiv: (!inline ? this.dpDiv : // presentation div
                			bindHover($("<div class='" + this._inlineClass + " ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")))};
                	},
                
                	/* Attach the date picker to an input field. */
                	_connectDatepicker: function(target, inst) {
                		var input = $(target);
                		inst.append = $([]);
                		inst.trigger = $([]);
                		if (input.hasClass(this.markerClassName)) {
                			return;
                		}
                		this._attachments(input, inst);
                		input.addClass(this.markerClassName).keydown(this._doKeyDown).
                			keypress(this._doKeyPress).keyup(this._doKeyUp);
                		this._autoSize(inst);
                		$.data(target, PROP_NAME, inst);
                		//If disabled option is true, disable the datepicker once it has been attached to the input (see ticket #5665)
                		if( inst.settings.disabled ) {
                			this._disableDatepicker( target );
                		}
                	},
                
                	/* Make attachments based on settings. */
                	_attachments: function(input, inst) {
                		var showOn, buttonText, buttonImage,
                			appendText = this._get(inst, "appendText"),
                			isRTL = this._get(inst, "isRTL");
                
                		if (inst.append) {
                			inst.append.remove();
                		}
                		if (appendText) {
                			inst.append = $("<span class='" + this._appendClass + "'>" + appendText + "</span>");
                			input[isRTL ? "before" : "after"](inst.append);
                		}
                
                		input.unbind("focus", this._showDatepicker);
                
                		if (inst.trigger) {
                			inst.trigger.remove();
                		}
                
                		showOn = this._get(inst, "showOn");
                		if (showOn === "focus" || showOn === "both") { // pop-up date picker when in the marked field
                			input.focus(this._showDatepicker);
                		}
                		if (showOn === "button" || showOn === "both") { // pop-up date picker when button clicked
                			buttonText = this._get(inst, "buttonText");
                			buttonImage = this._get(inst, "buttonImage");
                			inst.trigger = $(this._get(inst, "buttonImageOnly") ?
                				$("<img/>").addClass(this._triggerClass).
                					attr({ src: buttonImage, alt: buttonText, title: buttonText }) :
                				$("<button type='button'></button>").addClass(this._triggerClass).
                					html(!buttonImage ? buttonText : $("<img/>").attr(
                					{ src:buttonImage, alt:buttonText, title:buttonText })));
                			input[isRTL ? "before" : "after"](inst.trigger);
                			inst.trigger.click(function() {
                				if ($.datepicker._datepickerShowing && $.datepicker._lastInput === input[0]) {
                					$.datepicker._hideDatepicker();
                				} else if ($.datepicker._datepickerShowing && $.datepicker._lastInput !== input[0]) {
                					$.datepicker._hideDatepicker();
                					$.datepicker._showDatepicker(input[0]);
                				} else {
                					$.datepicker._showDatepicker(input[0]);
                				}
                				return false;
                			});
                		}
                	},
                
                	/* Apply the maximum length for the date format. */
                	_autoSize: function(inst) {
                		if (this._get(inst, "autoSize") && !inst.inline) {
                			var findMax, max, maxI, i,
                				date = new Date(2009, 12 - 1, 20), // Ensure double digits
                				dateFormat = this._get(inst, "dateFormat");
                
                			if (dateFormat.match(/[DM]/)) {
                				findMax = function(names) {
                					max = 0;
                					maxI = 0;
                					for (i = 0; i < names.length; i++) {
                						if (names[i].length > max) {
                							max = names[i].length;
                							maxI = i;
                						}
                					}
                					return maxI;
                				};
                				date.setMonth(findMax(this._get(inst, (dateFormat.match(/MM/) ?
                					"monthNames" : "monthNamesShort"))));
                				date.setDate(findMax(this._get(inst, (dateFormat.match(/DD/) ?
                					"dayNames" : "dayNamesShort"))) + 20 - date.getDay());
                			}
                			inst.input.attr("size", this._formatDate(inst, date).length);
                		}
                	},
                
                	/* Attach an inline date picker to a div. */
                	_inlineDatepicker: function(target, inst) {
                		var divSpan = $(target);
                		if (divSpan.hasClass(this.markerClassName)) {
                			return;
                		}
                		divSpan.addClass(this.markerClassName).append(inst.dpDiv);
                		$.data(target, PROP_NAME, inst);
                		this._setDate(inst, this._getDefaultDate(inst), true);
                		this._updateDatepicker(inst);
                		this._updateAlternate(inst);
                		//If disabled option is true, disable the datepicker before showing it (see ticket #5665)
                		if( inst.settings.disabled ) {
                			this._disableDatepicker( target );
                		}
                		// Set display:block in place of inst.dpDiv.show() which won't work on disconnected elements
                		// http://bugs.jqueryui.com/ticket/7552 - A Datepicker created on a detached div has zero height
                		inst.dpDiv.css( "display", "block" );
                	},
                
                	/* Pop-up the date picker in a "dialog" box.
                	 * @param  input element - ignored
                	 * @param  date	string or Date - the initial date to display
                	 * @param  onSelect  function - the function to call when a date is selected
                	 * @param  settings  object - update the dialog date picker instance's settings (anonymous object)
                	 * @param  pos int[2] - coordinates for the dialog's position within the screen or
                	 *					event - with x/y coordinates or
                	 *					leave empty for default (screen centre)
                	 * @return the manager object
                	 */
                	_dialogDatepicker: function(input, date, onSelect, settings, pos) {
                		var id, browserWidth, browserHeight, scrollX, scrollY,
                			inst = this._dialogInst; // internal instance
                
                		if (!inst) {
                			this.uuid += 1;
                			id = "dp" + this.uuid;
                			this._dialogInput = $("<input type='text' id='" + id +
                				"' style='position: absolute; top: -100px; width: 0px;'/>");
                			this._dialogInput.keydown(this._doKeyDown);
                			$("body").append(this._dialogInput);
                			inst = this._dialogInst = this._newInst(this._dialogInput, false);
                			inst.settings = {};
                			$.data(this._dialogInput[0], PROP_NAME, inst);
                		}
                		extendRemove(inst.settings, settings || {});
                		date = (date && date.constructor === Date ? this._formatDate(inst, date) : date);
                		this._dialogInput.val(date);
                
                		this._pos = (pos ? (pos.length ? pos : [pos.pageX, pos.pageY]) : null);
                		if (!this._pos) {
                			browserWidth = document.documentElement.clientWidth;
                			browserHeight = document.documentElement.clientHeight;
                			scrollX = document.documentElement.scrollLeft || document.body.scrollLeft;
                			scrollY = document.documentElement.scrollTop || document.body.scrollTop;
                			this._pos = // should use actual width/height below
                				[(browserWidth / 2) - 100 + scrollX, (browserHeight / 2) - 150 + scrollY];
                		}
                
                		// move input on screen for focus, but hidden behind dialog
                		this._dialogInput.css("left", (this._pos[0] + 20) + "px").css("top", this._pos[1] + "px");
                		inst.settings.onSelect = onSelect;
                		this._inDialog = true;
                		this.dpDiv.addClass(this._dialogClass);
                		this._showDatepicker(this._dialogInput[0]);
                		if ($.blockUI) {
                			$.blockUI(this.dpDiv);
                		}
                		$.data(this._dialogInput[0], PROP_NAME, inst);
                		return this;
                	},
                
                	/* Detach a datepicker from its control.
                	 * @param  target	element - the target input field or division or span
                	 */
                	_destroyDatepicker: function(target) {
                		var nodeName,
                			$target = $(target),
                			inst = $.data(target, PROP_NAME);
                
                		if (!$target.hasClass(this.markerClassName)) {
                			return;
                		}
                
                		nodeName = target.nodeName.toLowerCase();
                		$.removeData(target, PROP_NAME);
                		if (nodeName === "input") {
                			inst.append.remove();
                			inst.trigger.remove();
                			$target.removeClass(this.markerClassName).
                				unbind("focus", this._showDatepicker).
                				unbind("keydown", this._doKeyDown).
                				unbind("keypress", this._doKeyPress).
                				unbind("keyup", this._doKeyUp);
                		} else if (nodeName === "div" || nodeName === "span") {
                			$target.removeClass(this.markerClassName).empty();
                		}
                	},
                
                	/* Enable the date picker to a jQuery selection.
                	 * @param  target	element - the target input field or division or span
                	 */
                	_enableDatepicker: function(target) {
                		var nodeName, inline,
                			$target = $(target),
                			inst = $.data(target, PROP_NAME);
                
                		if (!$target.hasClass(this.markerClassName)) {
                			return;
                		}
                
                		nodeName = target.nodeName.toLowerCase();
                		if (nodeName === "input") {
                			target.disabled = false;
                			inst.trigger.filter("button").
                				each(function() { this.disabled = false; }).end().
                				filter("img").css({opacity: "1.0", cursor: ""});
                		} else if (nodeName === "div" || nodeName === "span") {
                			inline = $target.children("." + this._inlineClass);
                			inline.children().removeClass("ui-state-disabled");
                			inline.find("select.ui-datepicker-month, select.ui-datepicker-year").
                				prop("disabled", false);
                		}
                		this._disabledInputs = $.map(this._disabledInputs,
                			function(value) { return (value === target ? null : value); }); // delete entry
                	},
                
                	/* Disable the date picker to a jQuery selection.
                	 * @param  target	element - the target input field or division or span
                	 */
                	_disableDatepicker: function(target) {
                		var nodeName, inline,
                			$target = $(target),
                			inst = $.data(target, PROP_NAME);
                
                		if (!$target.hasClass(this.markerClassName)) {
                			return;
                		}
                
                		nodeName = target.nodeName.toLowerCase();
                		if (nodeName === "input") {
                			target.disabled = true;
                			inst.trigger.filter("button").
                				each(function() { this.disabled = true; }).end().
                				filter("img").css({opacity: "0.5", cursor: "default"});
                		} else if (nodeName === "div" || nodeName === "span") {
                			inline = $target.children("." + this._inlineClass);
                			inline.children().addClass("ui-state-disabled");
                			inline.find("select.ui-datepicker-month, select.ui-datepicker-year").
                				prop("disabled", true);
                		}
                		this._disabledInputs = $.map(this._disabledInputs,
                			function(value) { return (value === target ? null : value); }); // delete entry
                		this._disabledInputs[this._disabledInputs.length] = target;
                	},
                
                	/* Is the first field in a jQuery collection disabled as a datepicker?
                	 * @param  target	element - the target input field or division or span
                	 * @return boolean - true if disabled, false if enabled
                	 */
                	_isDisabledDatepicker: function(target) {
                		if (!target) {
                			return false;
                		}
                		for (var i = 0; i < this._disabledInputs.length; i++) {
                			if (this._disabledInputs[i] === target) {
                				return true;
                			}
                		}
                		return false;
                	},
                
                	/* Retrieve the instance data for the target control.
                	 * @param  target  element - the target input field or division or span
                	 * @return  object - the associated instance data
                	 * @throws  error if a jQuery problem getting data
                	 */
                	_getInst: function(target) {
                		try {
                			return $.data(target, PROP_NAME);
                		}
                		catch (err) {
                			throw "Missing instance data for this datepicker";
                		}
                	},
                
                	/* Update or retrieve the settings for a date picker attached to an input field or division.
                	 * @param  target  element - the target input field or division or span
                	 * @param  name	object - the new settings to update or
                	 *				string - the name of the setting to change or retrieve,
                	 *				when retrieving also "all" for all instance settings or
                	 *				"defaults" for all global defaults
                	 * @param  value   any - the new value for the setting
                	 *				(omit if above is an object or to retrieve a value)
                	 */
                	_optionDatepicker: function(target, name, value) {
                		var settings, date, minDate, maxDate,
                			inst = this._getInst(target);
                
                		if (arguments.length === 2 && typeof name === "string") {
                			return (name === "defaults" ? $.extend({}, $.datepicker._defaults) :
                				(inst ? (name === "all" ? $.extend({}, inst.settings) :
                				this._get(inst, name)) : null));
                		}
                
                		settings = name || {};
                		if (typeof name === "string") {
                			settings = {};
                			settings[name] = value;
                		}
                
                		if (inst) {
                			if (this._curInst === inst) {
                				this._hideDatepicker();
                			}
                
                			date = this._getDateDatepicker(target, true);
                			minDate = this._getMinMaxDate(inst, "min");
                			maxDate = this._getMinMaxDate(inst, "max");
                			extendRemove(inst.settings, settings);
                			// reformat the old minDate/maxDate values if dateFormat changes and a new minDate/maxDate isn't provided
                			if (minDate !== null && settings.dateFormat !== undefined && settings.minDate === undefined) {
                				inst.settings.minDate = this._formatDate(inst, minDate);
                			}
                			if (maxDate !== null && settings.dateFormat !== undefined && settings.maxDate === undefined) {
                				inst.settings.maxDate = this._formatDate(inst, maxDate);
                			}
                			if ( "disabled" in settings ) {
                				if ( settings.disabled ) {
                					this._disableDatepicker(target);
                				} else {
                					this._enableDatepicker(target);
                				}
                			}
                			this._attachments($(target), inst);
                			this._autoSize(inst);
                			this._setDate(inst, date);
                			this._updateAlternate(inst);
                			this._updateDatepicker(inst);
                		}
                	},
                
                	// change method deprecated
                	_changeDatepicker: function(target, name, value) {
                		this._optionDatepicker(target, name, value);
                	},
                
                	/* Redraw the date picker attached to an input field or division.
                	 * @param  target  element - the target input field or division or span
                	 */
                	_refreshDatepicker: function(target) {
                		var inst = this._getInst(target);
                		if (inst) {
                			this._updateDatepicker(inst);
                		}
                	},
                
                	/* Set the dates for a jQuery selection.
                	 * @param  target element - the target input field or division or span
                	 * @param  date	Date - the new date
                	 */
                	_setDateDatepicker: function(target, date) {
                		var inst = this._getInst(target);
                		if (inst) {
                			this._setDate(inst, date);
                			this._updateDatepicker(inst);
                			this._updateAlternate(inst);
                		}
                	},
                
                	/* Get the date(s) for the first entry in a jQuery selection.
                	 * @param  target element - the target input field or division or span
                	 * @param  noDefault boolean - true if no default date is to be used
                	 * @return Date - the current date
                	 */
                	_getDateDatepicker: function(target, noDefault) {
                		var inst = this._getInst(target);
                		if (inst && !inst.inline) {
                			this._setDateFromField(inst, noDefault);
                		}
                		return (inst ? this._getDate(inst) : null);
                	},
                
                	/* Handle keystrokes. */
                	_doKeyDown: function(event) {
                		var onSelect, dateStr, sel,
                			inst = $.datepicker._getInst(event.target),
                			handled = true,
                			isRTL = inst.dpDiv.is(".ui-datepicker-rtl");
                
                		inst._keyEvent = true;
                		if ($.datepicker._datepickerShowing) {
                			switch (event.keyCode) {
                				case 9: $.datepicker._hideDatepicker();
                						handled = false;
                						break; // hide on tab out
                				case 13: sel = $("td." + $.datepicker._dayOverClass + ":not(." +
                									$.datepicker._currentClass + ")", inst.dpDiv);
                						if (sel[0]) {
                							$.datepicker._selectDay(event.target, inst.selectedMonth, inst.selectedYear, sel[0]);
                						}
                
                						onSelect = $.datepicker._get(inst, "onSelect");
                						if (onSelect) {
                							dateStr = $.datepicker._formatDate(inst);
                
                							// trigger custom callback
                							onSelect.apply((inst.input ? inst.input[0] : null), [dateStr, inst]);
                						} else {
                							$.datepicker._hideDatepicker();
                						}
                
                						return false; // don't submit the form
                				case 27: $.datepicker._hideDatepicker();
                						break; // hide on escape
                				case 33: $.datepicker._adjustDate(event.target, (event.ctrlKey ?
                							-$.datepicker._get(inst, "stepBigMonths") :
                							-$.datepicker._get(inst, "stepMonths")), "M");
                						break; // previous month/year on page up/+ ctrl
                				case 34: $.datepicker._adjustDate(event.target, (event.ctrlKey ?
                							+$.datepicker._get(inst, "stepBigMonths") :
                							+$.datepicker._get(inst, "stepMonths")), "M");
                						break; // next month/year on page down/+ ctrl
                				case 35: if (event.ctrlKey || event.metaKey) {
                							$.datepicker._clearDate(event.target);
                						}
                						handled = event.ctrlKey || event.metaKey;
                						break; // clear on ctrl or command +end
                				case 36: if (event.ctrlKey || event.metaKey) {
                							$.datepicker._gotoToday(event.target);
                						}
                						handled = event.ctrlKey || event.metaKey;
                						break; // current on ctrl or command +home
                				case 37: if (event.ctrlKey || event.metaKey) {
                							$.datepicker._adjustDate(event.target, (isRTL ? +1 : -1), "D");
                						}
                						handled = event.ctrlKey || event.metaKey;
                						// -1 day on ctrl or command +left
                						if (event.originalEvent.altKey) {
                							$.datepicker._adjustDate(event.target, (event.ctrlKey ?
                								-$.datepicker._get(inst, "stepBigMonths") :
                								-$.datepicker._get(inst, "stepMonths")), "M");
                						}
                						// next month/year on alt +left on Mac
                						break;
                				case 38: if (event.ctrlKey || event.metaKey) {
                							$.datepicker._adjustDate(event.target, -7, "D");
                						}
                						handled = event.ctrlKey || event.metaKey;
                						break; // -1 week on ctrl or command +up
                				case 39: if (event.ctrlKey || event.metaKey) {
                							$.datepicker._adjustDate(event.target, (isRTL ? -1 : +1), "D");
                						}
                						handled = event.ctrlKey || event.metaKey;
                						// +1 day on ctrl or command +right
                						if (event.originalEvent.altKey) {
                							$.datepicker._adjustDate(event.target, (event.ctrlKey ?
                								+$.datepicker._get(inst, "stepBigMonths") :
                								+$.datepicker._get(inst, "stepMonths")), "M");
                						}
                						// next month/year on alt +right
                						break;
                				case 40: if (event.ctrlKey || event.metaKey) {
                							$.datepicker._adjustDate(event.target, +7, "D");
                						}
                						handled = event.ctrlKey || event.metaKey;
                						break; // +1 week on ctrl or command +down
                				default: handled = false;
                			}
                		} else if (event.keyCode === 36 && event.ctrlKey) { // display the date picker on ctrl+home
                			$.datepicker._showDatepicker(this);
                		} else {
                			handled = false;
                		}
                
                		if (handled) {
                			event.preventDefault();
                			event.stopPropagation();
                		}
                	},
                
                	/* Filter entered characters - based on date format. */
                	_doKeyPress: function(event) {
                		var chars, chr,
                			inst = $.datepicker._getInst(event.target);
                
                		if ($.datepicker._get(inst, "constrainInput")) {
                			chars = $.datepicker._possibleChars($.datepicker._get(inst, "dateFormat"));
                			chr = String.fromCharCode(event.charCode == null ? event.keyCode : event.charCode);
                			return event.ctrlKey || event.metaKey || (chr < " " || !chars || chars.indexOf(chr) > -1);
                		}
                	},
                
                	/* Synchronise manual entry and field/alternate field. */
                	_doKeyUp: function(event) {
                		var date,
                			inst = $.datepicker._getInst(event.target);
                
                		if (inst.input.val() !== inst.lastVal) {
                			try {
                				date = $.datepicker.parseDate($.datepicker._get(inst, "dateFormat"),
                					(inst.input ? inst.input.val() : null),
                					$.datepicker._getFormatConfig(inst));
                
                				if (date) { // only if valid
                					$.datepicker._setDateFromField(inst);
                					$.datepicker._updateAlternate(inst);
                					$.datepicker._updateDatepicker(inst);
                				}
                			}
                			catch (err) {
                			}
                		}
                		return true;
                	},
                
                	/* Pop-up the date picker for a given input field.
                	 * If false returned from beforeShow event handler do not show.
                	 * @param  input  element - the input field attached to the date picker or
                	 *					event - if triggered by focus
                	 */
                	_showDatepicker: function(input) {
                		input = input.target || input;
                		if (input.nodeName.toLowerCase() !== "input") { // find from button/image trigger
                			input = $("input", input.parentNode)[0];
                		}
                
                		if ($.datepicker._isDisabledDatepicker(input) || $.datepicker._lastInput === input) { // already here
                			return;
                		}
                
                		var inst, beforeShow, beforeShowSettings, isFixed,
                			offset, showAnim, duration;
                
                		inst = $.datepicker._getInst(input);
                		if ($.datepicker._curInst && $.datepicker._curInst !== inst) {
                			$.datepicker._curInst.dpDiv.stop(true, true);
                			if ( inst && $.datepicker._datepickerShowing ) {
                				$.datepicker._hideDatepicker( $.datepicker._curInst.input[0] );
                			}
                		}
                
                		beforeShow = $.datepicker._get(inst, "beforeShow");
                		beforeShowSettings = beforeShow ? beforeShow.apply(input, [input, inst]) : {};
                		if(beforeShowSettings === false){
                			return;
                		}
                		extendRemove(inst.settings, beforeShowSettings);
                
                		inst.lastVal = null;
                		$.datepicker._lastInput = input;
                		$.datepicker._setDateFromField(inst);
                
                		if ($.datepicker._inDialog) { // hide cursor
                			input.value = "";
                		}
                		if (!$.datepicker._pos) { // position below input
                			$.datepicker._pos = $.datepicker._findPos(input);
                			$.datepicker._pos[1] += input.offsetHeight; // add the height
                		}
                
                		isFixed = false;
                		$(input).parents().each(function() {
                			isFixed |= $(this).css("position") === "fixed";
                			return !isFixed;
                		});
                
                		offset = {left: $.datepicker._pos[0], top: $.datepicker._pos[1]};
                		$.datepicker._pos = null;
                		//to avoid flashes on Firefox
                		inst.dpDiv.empty();
                		// determine sizing offscreen
                		inst.dpDiv.css({position: "absolute", display: "block", top: "-1000px"});
                		$.datepicker._updateDatepicker(inst);
                		// fix width for dynamic number of date pickers
                		// and adjust position before showing
                		offset = $.datepicker._checkOffset(inst, offset, isFixed);
                		inst.dpDiv.css({position: ($.datepicker._inDialog && $.blockUI ?
                			"static" : (isFixed ? "fixed" : "absolute")), display: "none",
                			left: offset.left + "px", top: offset.top + "px"});
                
                		if (!inst.inline) {
                			showAnim = $.datepicker._get(inst, "showAnim");
                			duration = $.datepicker._get(inst, "duration");
                			inst.dpDiv.zIndex($(input).zIndex()+1);
                			$.datepicker._datepickerShowing = true;
                
                			if ( $.effects && $.effects.effect[ showAnim ] ) {
                				inst.dpDiv.show(showAnim, $.datepicker._get(inst, "showOptions"), duration);
                			} else {
                				inst.dpDiv[showAnim || "show"](showAnim ? duration : null);
                			}
                
                			if (inst.input.is(":visible") && !inst.input.is(":disabled")) {
                				inst.input.focus();
                			}
                			$.datepicker._curInst = inst;
                		}
                	},
                
                	/* Generate the date picker content. */
                	_updateDatepicker: function(inst) {
                		this.maxRows = 4; //Reset the max number of rows being displayed (see #7043)
                		instActive = inst; // for delegate hover events
                		inst.dpDiv.empty().append(this._generateHTML(inst));
                		this._attachHandlers(inst);
                		inst.dpDiv.find("." + this._dayOverClass + " a").mouseover();
                
                		var origyearshtml,
                			numMonths = this._getNumberOfMonths(inst),
                			cols = numMonths[1],
                			width = 17;
                
                		inst.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");
                		if (cols > 1) {
                			inst.dpDiv.addClass("ui-datepicker-multi-" + cols).css("width", (width * cols) + "em");
                		}
                		inst.dpDiv[(numMonths[0] !== 1 || numMonths[1] !== 1 ? "add" : "remove") +
                			"Class"]("ui-datepicker-multi");
                		inst.dpDiv[(this._get(inst, "isRTL") ? "add" : "remove") +
                			"Class"]("ui-datepicker-rtl");
                
                		// #6694 - don't focus the input if it's already focused
                		// this breaks the change event in IE
                		if (inst === $.datepicker._curInst && $.datepicker._datepickerShowing && inst.input &&
                			inst.input.is(":visible") && !inst.input.is(":disabled") && inst.input[0] !== document.activeElement) {
                			inst.input.focus();
                		}
                
                		// deffered render of the years select (to avoid flashes on Firefox)
                		if( inst.yearshtml ){
                			origyearshtml = inst.yearshtml;
                			setTimeout(function(){
                				//assure that inst.yearshtml didn't change.
                				if( origyearshtml === inst.yearshtml && inst.yearshtml ){
                					inst.dpDiv.find("select.ui-datepicker-year:first").replaceWith(inst.yearshtml);
                				}
                				origyearshtml = inst.yearshtml = null;
                			}, 0);
                		}
                	},
                
                	/* Retrieve the size of left and top borders for an element.
                	 * @param  elem  (jQuery object) the element of interest
                	 * @return  (number[2]) the left and top borders
                	 */
                	_getBorders: function(elem) {
                		var convert = function(value) {
                			return {thin: 1, medium: 2, thick: 3}[value] || value;
                		};
                		return [parseFloat(convert(elem.css("border-left-width"))),
                			parseFloat(convert(elem.css("border-top-width")))];
                	},
                
                	/* Check positioning to remain on screen. */
                	_checkOffset: function(inst, offset, isFixed) {
                		var dpWidth = inst.dpDiv.outerWidth(),
                			dpHeight = inst.dpDiv.outerHeight(),
                			inputWidth = inst.input ? inst.input.outerWidth() : 0,
                			inputHeight = inst.input ? inst.input.outerHeight() : 0,
                			viewWidth = document.documentElement.clientWidth + (isFixed ? 0 : $(document).scrollLeft()),
                			viewHeight = document.documentElement.clientHeight + (isFixed ? 0 : $(document).scrollTop());
                
                		offset.left -= (this._get(inst, "isRTL") ? (dpWidth - inputWidth) : 0);
                		offset.left -= (isFixed && offset.left === inst.input.offset().left) ? $(document).scrollLeft() : 0;
                		offset.top -= (isFixed && offset.top === (inst.input.offset().top + inputHeight)) ? $(document).scrollTop() : 0;
                
                		// now check if datepicker is showing outside window viewport - move to a better place if so.
                		offset.left -= Math.min(offset.left, (offset.left + dpWidth > viewWidth && viewWidth > dpWidth) ?
                			Math.abs(offset.left + dpWidth - viewWidth) : 0);
                		offset.top -= Math.min(offset.top, (offset.top + dpHeight > viewHeight && viewHeight > dpHeight) ?
                			Math.abs(dpHeight + inputHeight) : 0);
                
                		return offset;
                	},
                
                	/* Find an object's position on the screen. */
                	_findPos: function(obj) {
                		var position,
                			inst = this._getInst(obj),
                			isRTL = this._get(inst, "isRTL");
                
                		while (obj && (obj.type === "hidden" || obj.nodeType !== 1 || $.expr.filters.hidden(obj))) {
                			obj = obj[isRTL ? "previousSibling" : "nextSibling"];
                		}
                
                		position = $(obj).offset();
                		return [position.left, position.top];
                	},
                
                	/* Hide the date picker from view.
                	 * @param  input  element - the input field attached to the date picker
                	 */
                	_hideDatepicker: function(input) {
                		var showAnim, duration, postProcess, onClose,
                			inst = this._curInst;
                
                		if (!inst || (input && inst !== $.data(input, PROP_NAME))) {
                			return;
                		}
                
                		if (this._datepickerShowing) {
                			showAnim = this._get(inst, "showAnim");
                			duration = this._get(inst, "duration");
                			postProcess = function() {
                				$.datepicker._tidyDialog(inst);
                			};
                
                			// DEPRECATED: after BC for 1.8.x $.effects[ showAnim ] is not needed
                			if ( $.effects && ( $.effects.effect[ showAnim ] || $.effects[ showAnim ] ) ) {
                				inst.dpDiv.hide(showAnim, $.datepicker._get(inst, "showOptions"), duration, postProcess);
                			} else {
                				inst.dpDiv[(showAnim === "slideDown" ? "slideUp" :
                					(showAnim === "fadeIn" ? "fadeOut" : "hide"))]((showAnim ? duration : null), postProcess);
                			}
                
                			if (!showAnim) {
                				postProcess();
                			}
                			this._datepickerShowing = false;
                
                			onClose = this._get(inst, "onClose");
                			if (onClose) {
                				onClose.apply((inst.input ? inst.input[0] : null), [(inst.input ? inst.input.val() : ""), inst]);
                			}
                
                			this._lastInput = null;
                			if (this._inDialog) {
                				this._dialogInput.css({ position: "absolute", left: "0", top: "-100px" });
                				if ($.blockUI) {
                					$.unblockUI();
                					$("body").append(this.dpDiv);
                				}
                			}
                			this._inDialog = false;
                		}
                	},
                
                	/* Tidy up after a dialog display. */
                	_tidyDialog: function(inst) {
                		inst.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar");
                	},
                
                	/* Close date picker if clicked elsewhere. */
                	_checkExternalClick: function(event) {
                		if (!$.datepicker._curInst) {
                			return;
                		}
                
                		var $target = $(event.target),
                			inst = $.datepicker._getInst($target[0]);
                
                		if ( ( ( $target[0].id !== $.datepicker._mainDivId &&
                				$target.parents("#" + $.datepicker._mainDivId).length === 0 &&
                				!$target.hasClass($.datepicker.markerClassName) &&
                				!$target.closest("." + $.datepicker._triggerClass).length &&
                				$.datepicker._datepickerShowing && !($.datepicker._inDialog && $.blockUI) ) ) ||
                			( $target.hasClass($.datepicker.markerClassName) && $.datepicker._curInst !== inst ) ) {
                				$.datepicker._hideDatepicker();
                		}
                	},
                
                	/* Adjust one of the date sub-fields. */
                	_adjustDate: function(id, offset, period) {
                		var target = $(id),
                			inst = this._getInst(target[0]);
                
                		if (this._isDisabledDatepicker(target[0])) {
                			return;
                		}
                		this._adjustInstDate(inst, offset +
                			(period === "M" ? this._get(inst, "showCurrentAtPos") : 0), // undo positioning
                			period);
                		this._updateDatepicker(inst);
                	},
                
                	/* Action for current link. */
                	_gotoToday: function(id) {
                		var date,
                			target = $(id),
                			inst = this._getInst(target[0]);
                
                		if (this._get(inst, "gotoCurrent") && inst.currentDay) {
                			inst.selectedDay = inst.currentDay;
                			inst.drawMonth = inst.selectedMonth = inst.currentMonth;
                			inst.drawYear = inst.selectedYear = inst.currentYear;
                		} else {
                			date = new Date();
                			inst.selectedDay = date.getDate();
                			inst.drawMonth = inst.selectedMonth = date.getMonth();
                			inst.drawYear = inst.selectedYear = date.getFullYear();
                		}
                		this._notifyChange(inst);
                		this._adjustDate(target);
                	},
                
                	/* Action for selecting a new month/year. */
                	_selectMonthYear: function(id, select, period) {
                		var target = $(id),
                			inst = this._getInst(target[0]);
                
                		inst["selected" + (period === "M" ? "Month" : "Year")] =
                		inst["draw" + (period === "M" ? "Month" : "Year")] =
                			parseInt(select.options[select.selectedIndex].value,10);
                
                		this._notifyChange(inst);
                		this._adjustDate(target);
                	},
                
                	/* Action for selecting a day. */
                	_selectDay: function(id, month, year, td) {
                		var inst,
                			target = $(id);
                
                		if ($(td).hasClass(this._unselectableClass) || this._isDisabledDatepicker(target[0])) {
                			return;
                		}
                
                		inst = this._getInst(target[0]);
                		inst.selectedDay = inst.currentDay = $("a", td).html();
                		inst.selectedMonth = inst.currentMonth = month;
                		inst.selectedYear = inst.currentYear = year;
                		this._selectDate(id, this._formatDate(inst,
                			inst.currentDay, inst.currentMonth, inst.currentYear));
                	},
                
                	/* Erase the input field and hide the date picker. */
                	_clearDate: function(id) {
                		var target = $(id);
                		this._selectDate(target, "");
                	},
                
                	/* Update the input field with the selected date. */
                	_selectDate: function(id, dateStr) {
                		var onSelect,
                			target = $(id),
                			inst = this._getInst(target[0]);
                
                		dateStr = (dateStr != null ? dateStr : this._formatDate(inst));
                		if (inst.input) {
                			inst.input.val(dateStr);
                		}
                		this._updateAlternate(inst);
                
                		onSelect = this._get(inst, "onSelect");
                		if (onSelect) {
                			onSelect.apply((inst.input ? inst.input[0] : null), [dateStr, inst]);  // trigger custom callback
                		} else if (inst.input) {
                			inst.input.trigger("change"); // fire the change event
                		}
                
                		if (inst.inline){
                			this._updateDatepicker(inst);
                		} else {
                			this._hideDatepicker();
                			this._lastInput = inst.input[0];
                			if (typeof(inst.input[0]) !== "object") {
                				inst.input.focus(); // restore focus
                			}
                			this._lastInput = null;
                		}
                	},
                
                	/* Update any alternate field to synchronise with the main field. */
                	_updateAlternate: function(inst) {
                		var altFormat, date, dateStr,
                			altField = this._get(inst, "altField");
                
                		if (altField) { // update alternate field too
                			altFormat = this._get(inst, "altFormat") || this._get(inst, "dateFormat");
                			date = this._getDate(inst);
                			dateStr = this.formatDate(altFormat, date, this._getFormatConfig(inst));
                			$(altField).each(function() { $(this).val(dateStr); });
                		}
                	},
                
                	/* Set as beforeShowDay function to prevent selection of weekends.
                	 * @param  date  Date - the date to customise
                	 * @return [boolean, string] - is this date selectable?, what is its CSS class?
                	 */
                	noWeekends: function(date) {
                		var day = date.getDay();
                		return [(day > 0 && day < 6), ""];
                	},
                
                	/* Set as calculateWeek to determine the week of the year based on the ISO 8601 definition.
                	 * @param  date  Date - the date to get the week for
                	 * @return  number - the number of the week within the year that contains this date
                	 */
                	iso8601Week: function(date) {
                		var time,
                			checkDate = new Date(date.getTime());
                
                		// Find Thursday of this week starting on Monday
                		checkDate.setDate(checkDate.getDate() + 4 - (checkDate.getDay() || 7));
                
                		time = checkDate.getTime();
                		checkDate.setMonth(0); // Compare with Jan 1
                		checkDate.setDate(1);
                		return Math.floor(Math.round((time - checkDate) / 86400000) / 7) + 1;
                	},
                
                	/* Parse a string value into a date object.
                	 * See formatDate below for the possible formats.
                	 *
                	 * @param  format string - the expected format of the date
                	 * @param  value string - the date in the above format
                	 * @param  settings Object - attributes include:
                	 *					shortYearCutoff  number - the cutoff year for determining the century (optional)
                	 *					dayNamesShort	string[7] - abbreviated names of the days from Sunday (optional)
                	 *					dayNames		string[7] - names of the days from Sunday (optional)
                	 *					monthNamesShort string[12] - abbreviated names of the months (optional)
                	 *					monthNames		string[12] - names of the months (optional)
                	 * @return  Date - the extracted date value or null if value is blank
                	 */
                	parseDate: function (format, value, settings) {
                		if (format == null || value == null) {
                			throw "Invalid arguments";
                		}
                
                		value = (typeof value === "object" ? value.toString() : value + "");
                		if (value === "") {
                			return null;
                		}
                
                		var iFormat, dim, extra,
                			iValue = 0,
                			shortYearCutoffTemp = (settings ? settings.shortYearCutoff : null) || this._defaults.shortYearCutoff,
                			shortYearCutoff = (typeof shortYearCutoffTemp !== "string" ? shortYearCutoffTemp :
                				new Date().getFullYear() % 100 + parseInt(shortYearCutoffTemp, 10)),
                			dayNamesShort = (settings ? settings.dayNamesShort : null) || this._defaults.dayNamesShort,
                			dayNames = (settings ? settings.dayNames : null) || this._defaults.dayNames,
                			monthNamesShort = (settings ? settings.monthNamesShort : null) || this._defaults.monthNamesShort,
                			monthNames = (settings ? settings.monthNames : null) || this._defaults.monthNames,
                			year = -1,
                			month = -1,
                			day = -1,
                			doy = -1,
                			literal = false,
                			date,
                			// Check whether a format character is doubled
                			lookAhead = function(match) {
                				var matches = (iFormat + 1 < format.length && format.charAt(iFormat + 1) === match);
                				if (matches) {
                					iFormat++;
                				}
                				return matches;
                			},
                			// Extract a number from the string value
                			getNumber = function(match) {
                				var isDoubled = lookAhead(match),
                					size = (match === "@" ? 14 : (match === "!" ? 20 :
                					(match === "y" && isDoubled ? 4 : (match === "o" ? 3 : 2)))),
                					digits = new RegExp("^\\d{1," + size + "}"),
                					num = value.substring(iValue).match(digits);
                				if (!num) {
                					throw "Missing number at position " + iValue;
                				}
                				iValue += num[0].length;
                				return parseInt(num[0], 10);
                			},
                			// Extract a name from the string value and convert to an index
                			getName = function(match, shortNames, longNames) {
                				var index = -1,
                					names = $.map(lookAhead(match) ? longNames : shortNames, function (v, k) {
                						return [ [k, v] ];
                					}).sort(function (a, b) {
                						return -(a[1].length - b[1].length);
                					});
                
                				$.each(names, function (i, pair) {
                					var name = pair[1];
                					if (value.substr(iValue, name.length).toLowerCase() === name.toLowerCase()) {
                						index = pair[0];
                						iValue += name.length;
                						return false;
                					}
                				});
                				if (index !== -1) {
                					return index + 1;
                				} else {
                					throw "Unknown name at position " + iValue;
                				}
                			},
                			// Confirm that a literal character matches the string value
                			checkLiteral = function() {
                				if (value.charAt(iValue) !== format.charAt(iFormat)) {
                					throw "Unexpected literal at position " + iValue;
                				}
                				iValue++;
                			};
                
                		for (iFormat = 0; iFormat < format.length; iFormat++) {
                			if (literal) {
                				if (format.charAt(iFormat) === "'" && !lookAhead("'")) {
                					literal = false;
                				} else {
                					checkLiteral();
                				}
                			} else {
                				switch (format.charAt(iFormat)) {
                					case "d":
                						day = getNumber("d");
                						break;
                					case "D":
                						getName("D", dayNamesShort, dayNames);
                						break;
                					case "o":
                						doy = getNumber("o");
                						break;
                					case "m":
                						month = getNumber("m");
                						break;
                					case "M":
                						month = getName("M", monthNamesShort, monthNames);
                						break;
                					case "y":
                						year = getNumber("y");
                						break;
                					case "@":
                						date = new Date(getNumber("@"));
                						year = date.getFullYear();
                						month = date.getMonth() + 1;
                						day = date.getDate();
                						break;
                					case "!":
                						date = new Date((getNumber("!") - this._ticksTo1970) / 10000);
                						year = date.getFullYear();
                						month = date.getMonth() + 1;
                						day = date.getDate();
                						break;
                					case "'":
                						if (lookAhead("'")){
                							checkLiteral();
                						} else {
                							literal = true;
                						}
                						break;
                					default:
                						checkLiteral();
                				}
                			}
                		}
                
                		if (iValue < value.length){
                			extra = value.substr(iValue);
                			if (!/^\s+/.test(extra)) {
                				throw "Extra/unparsed characters found in date: " + extra;
                			}
                		}
                
                		if (year === -1) {
                			year = new Date().getFullYear();
                		} else if (year < 100) {
                			year += new Date().getFullYear() - new Date().getFullYear() % 100 +
                				(year <= shortYearCutoff ? 0 : -100);
                		}
                
                		if (doy > -1) {
                			month = 1;
                			day = doy;
                			do {
                				dim = this._getDaysInMonth(year, month - 1);
                				if (day <= dim) {
                					break;
                				}
                				month++;
                				day -= dim;
                			} while (true);
                		}
                
                		date = this._daylightSavingAdjust(new Date(year, month - 1, day));
                		if (date.getFullYear() !== year || date.getMonth() + 1 !== month || date.getDate() !== day) {
                			throw "Invalid date"; // E.g. 31/02/00
                		}
                		return date;
                	},
                
                	/* Standard date formats. */
                	ATOM: "yy-mm-dd", // RFC 3339 (ISO 8601)
                	COOKIE: "D, dd M yy",
                	ISO_8601: "yy-mm-dd",
                	RFC_822: "D, d M y",
                	RFC_850: "DD, dd-M-y",
                	RFC_1036: "D, d M y",
                	RFC_1123: "D, d M yy",
                	RFC_2822: "D, d M yy",
                	RSS: "D, d M y", // RFC 822
                	TICKS: "!",
                	TIMESTAMP: "@",
                	W3C: "yy-mm-dd", // ISO 8601
                
                	_ticksTo1970: (((1970 - 1) * 365 + Math.floor(1970 / 4) - Math.floor(1970 / 100) +
                		Math.floor(1970 / 400)) * 24 * 60 * 60 * 10000000),
                
                	/* Format a date object into a string value.
                	 * The format can be combinations of the following:
                	 * d  - day of month (no leading zero)
                	 * dd - day of month (two digit)
                	 * o  - day of year (no leading zeros)
                	 * oo - day of year (three digit)
                	 * D  - day name short
                	 * DD - day name long
                	 * m  - month of year (no leading zero)
                	 * mm - month of year (two digit)
                	 * M  - month name short
                	 * MM - month name long
                	 * y  - year (two digit)
                	 * yy - year (four digit)
                	 * @ - Unix timestamp (ms since 01/01/1970)
                	 * ! - Windows ticks (100ns since 01/01/0001)
                	 * "..." - literal text
                	 * '' - single quote
                	 *
                	 * @param  format string - the desired format of the date
                	 * @param  date Date - the date value to format
                	 * @param  settings Object - attributes include:
                	 *					dayNamesShort	string[7] - abbreviated names of the days from Sunday (optional)
                	 *					dayNames		string[7] - names of the days from Sunday (optional)
                	 *					monthNamesShort string[12] - abbreviated names of the months (optional)
                	 *					monthNames		string[12] - names of the months (optional)
                	 * @return  string - the date in the above format
                	 */
                	formatDate: function (format, date, settings) {
                		if (!date) {
                			return "";
                		}
                
                		var iFormat,
                			dayNamesShort = (settings ? settings.dayNamesShort : null) || this._defaults.dayNamesShort,
                			dayNames = (settings ? settings.dayNames : null) || this._defaults.dayNames,
                			monthNamesShort = (settings ? settings.monthNamesShort : null) || this._defaults.monthNamesShort,
                			monthNames = (settings ? settings.monthNames : null) || this._defaults.monthNames,
                			// Check whether a format character is doubled
                			lookAhead = function(match) {
                				var matches = (iFormat + 1 < format.length && format.charAt(iFormat + 1) === match);
                				if (matches) {
                					iFormat++;
                				}
                				return matches;
                			},
                			// Format a number, with leading zero if necessary
                			formatNumber = function(match, value, len) {
                				var num = "" + value;
                				if (lookAhead(match)) {
                					while (num.length < len) {
                						num = "0" + num;
                					}
                				}
                				return num;
                			},
                			// Format a name, short or long as requested
                			formatName = function(match, value, shortNames, longNames) {
                				return (lookAhead(match) ? longNames[value] : shortNames[value]);
                			},
                			output = "",
                			literal = false;
                
                		if (date) {
                			for (iFormat = 0; iFormat < format.length; iFormat++) {
                				if (literal) {
                					if (format.charAt(iFormat) === "'" && !lookAhead("'")) {
                						literal = false;
                					} else {
                						output += format.charAt(iFormat);
                					}
                				} else {
                					switch (format.charAt(iFormat)) {
                						case "d":
                							output += formatNumber("d", date.getDate(), 2);
                							break;
                						case "D":
                							output += formatName("D", date.getDay(), dayNamesShort, dayNames);
                							break;
                						case "o":
                							output += formatNumber("o",
                								Math.round((new Date(date.getFullYear(), date.getMonth(), date.getDate()).getTime() - new Date(date.getFullYear(), 0, 0).getTime()) / 86400000), 3);
                							break;
                						case "m":
                							output += formatNumber("m", date.getMonth() + 1, 2);
                							break;
                						case "M":
                							output += formatName("M", date.getMonth(), monthNamesShort, monthNames);
                							break;
                						case "y":
                							output += (lookAhead("y") ? date.getFullYear() :
                								(date.getYear() % 100 < 10 ? "0" : "") + date.getYear() % 100);
                							break;
                						case "@":
                							output += date.getTime();
                							break;
                						case "!":
                							output += date.getTime() * 10000 + this._ticksTo1970;
                							break;
                						case "'":
                							if (lookAhead("'")) {
                								output += "'";
                							} else {
                								literal = true;
                							}
                							break;
                						default:
                							output += format.charAt(iFormat);
                					}
                				}
                			}
                		}
                		return output;
                	},
                
                	/* Extract all possible characters from the date format. */
                	_possibleChars: function (format) {
                		var iFormat,
                			chars = "",
                			literal = false,
                			// Check whether a format character is doubled
                			lookAhead = function(match) {
                				var matches = (iFormat + 1 < format.length && format.charAt(iFormat + 1) === match);
                				if (matches) {
                					iFormat++;
                				}
                				return matches;
                			};
                
                		for (iFormat = 0; iFormat < format.length; iFormat++) {
                			if (literal) {
                				if (format.charAt(iFormat) === "'" && !lookAhead("'")) {
                					literal = false;
                				} else {
                					chars += format.charAt(iFormat);
                				}
                			} else {
                				switch (format.charAt(iFormat)) {
                					case "d": case "m": case "y": case "@":
                						chars += "0123456789";
                						break;
                					case "D": case "M":
                						return null; // Accept anything
                					case "'":
                						if (lookAhead("'")) {
                							chars += "'";
                						} else {
                							literal = true;
                						}
                						break;
                					default:
                						chars += format.charAt(iFormat);
                				}
                			}
                		}
                		return chars;
                	},
                
                	/* Get a setting value, defaulting if necessary. */
                	_get: function(inst, name) {
                		return inst.settings[name] !== undefined ?
                			inst.settings[name] : this._defaults[name];
                	},
                
                	/* Parse existing date and initialise date picker. */
                	_setDateFromField: function(inst, noDefault) {
                		if (inst.input.val() === inst.lastVal) {
                			return;
                		}
                
                		var dateFormat = this._get(inst, "dateFormat"),
                			dates = inst.lastVal = inst.input ? inst.input.val() : null,
                			defaultDate = this._getDefaultDate(inst),
                			date = defaultDate,
                			settings = this._getFormatConfig(inst);
                
                		try {
                			date = this.parseDate(dateFormat, dates, settings) || defaultDate;
                		} catch (event) {
                			dates = (noDefault ? "" : dates);
                		}
                		inst.selectedDay = date.getDate();
                		inst.drawMonth = inst.selectedMonth = date.getMonth();
                		inst.drawYear = inst.selectedYear = date.getFullYear();
                		inst.currentDay = (dates ? date.getDate() : 0);
                		inst.currentMonth = (dates ? date.getMonth() : 0);
                		inst.currentYear = (dates ? date.getFullYear() : 0);
                		this._adjustInstDate(inst);
                	},
                
                	/* Retrieve the default date shown on opening. */
                	_getDefaultDate: function(inst) {
                		return this._restrictMinMax(inst,
                			this._determineDate(inst, this._get(inst, "defaultDate"), new Date()));
                	},
                
                	/* A date may be specified as an exact value or a relative one. */
                	_determineDate: function(inst, date, defaultDate) {
                		var offsetNumeric = function(offset) {
                				var date = new Date();
                				date.setDate(date.getDate() + offset);
                				return date;
                			},
                			offsetString = function(offset) {
                				try {
                					return $.datepicker.parseDate($.datepicker._get(inst, "dateFormat"),
                						offset, $.datepicker._getFormatConfig(inst));
                				}
                				catch (e) {
                					// Ignore
                				}
                
                				var date = (offset.toLowerCase().match(/^c/) ?
                					$.datepicker._getDate(inst) : null) || new Date(),
                					year = date.getFullYear(),
                					month = date.getMonth(),
                					day = date.getDate(),
                					pattern = /([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,
                					matches = pattern.exec(offset);
                
                				while (matches) {
                					switch (matches[2] || "d") {
                						case "d" : case "D" :
                							day += parseInt(matches[1],10); break;
                						case "w" : case "W" :
                							day += parseInt(matches[1],10) * 7; break;
                						case "m" : case "M" :
                							month += parseInt(matches[1],10);
                							day = Math.min(day, $.datepicker._getDaysInMonth(year, month));
                							break;
                						case "y": case "Y" :
                							year += parseInt(matches[1],10);
                							day = Math.min(day, $.datepicker._getDaysInMonth(year, month));
                							break;
                					}
                					matches = pattern.exec(offset);
                				}
                				return new Date(year, month, day);
                			},
                			newDate = (date == null || date === "" ? defaultDate : (typeof date === "string" ? offsetString(date) :
                				(typeof date === "number" ? (isNaN(date) ? defaultDate : offsetNumeric(date)) : new Date(date.getTime()))));
                
                		newDate = (newDate && newDate.toString() === "Invalid Date" ? defaultDate : newDate);
                		if (newDate) {
                			newDate.setHours(0);
                			newDate.setMinutes(0);
                			newDate.setSeconds(0);
                			newDate.setMilliseconds(0);
                		}
                		return this._daylightSavingAdjust(newDate);
                	},
                
                	/* Handle switch to/from daylight saving.
                	 * Hours may be non-zero on daylight saving cut-over:
                	 * > 12 when midnight changeover, but then cannot generate
                	 * midnight datetime, so jump to 1AM, otherwise reset.
                	 * @param  date  (Date) the date to check
                	 * @return  (Date) the corrected date
                	 */
                	_daylightSavingAdjust: function(date) {
                		if (!date) {
                			return null;
                		}
                		date.setHours(date.getHours() > 12 ? date.getHours() + 2 : 0);
                		return date;
                	},
                
                	/* Set the date(s) directly. */
                	_setDate: function(inst, date, noChange) {
                		var clear = !date,
                			origMonth = inst.selectedMonth,
                			origYear = inst.selectedYear,
                			newDate = this._restrictMinMax(inst, this._determineDate(inst, date, new Date()));
                
                		inst.selectedDay = inst.currentDay = newDate.getDate();
                		inst.drawMonth = inst.selectedMonth = inst.currentMonth = newDate.getMonth();
                		inst.drawYear = inst.selectedYear = inst.currentYear = newDate.getFullYear();
                		if ((origMonth !== inst.selectedMonth || origYear !== inst.selectedYear) && !noChange) {
                			this._notifyChange(inst);
                		}
                		this._adjustInstDate(inst);
                		if (inst.input) {
                			inst.input.val(clear ? "" : this._formatDate(inst));
                		}
                	},
                
                	/* Retrieve the date(s) directly. */
                	_getDate: function(inst) {
                		var startDate = (!inst.currentYear || (inst.input && inst.input.val() === "") ? null :
                			this._daylightSavingAdjust(new Date(
                			inst.currentYear, inst.currentMonth, inst.currentDay)));
                			return startDate;
                	},
                
                	/* Attach the onxxx handlers.  These are declared statically so
                	 * they work with static code transformers like Caja.
                	 */
                	_attachHandlers: function(inst) {
                		var stepMonths = this._get(inst, "stepMonths"),
                			id = "#" + inst.id.replace( /\\\\/g, "\\" );
                		inst.dpDiv.find("[data-handler]").map(function () {
                			var handler = {
                				prev: function () {
                					window["DP_jQuery_" + dpuuid].datepicker._adjustDate(id, -stepMonths, "M");
                				},
                				next: function () {
                					window["DP_jQuery_" + dpuuid].datepicker._adjustDate(id, +stepMonths, "M");
                				},
                				hide: function () {
                					window["DP_jQuery_" + dpuuid].datepicker._hideDatepicker();
                				},
                				today: function () {
                					window["DP_jQuery_" + dpuuid].datepicker._gotoToday(id);
                				},
                				selectDay: function () {
                					window["DP_jQuery_" + dpuuid].datepicker._selectDay(id, +this.getAttribute("data-month"), +this.getAttribute("data-year"), this);
                					return false;
                				},
                				selectMonth: function () {
                					window["DP_jQuery_" + dpuuid].datepicker._selectMonthYear(id, this, "M");
                					return false;
                				},
                				selectYear: function () {
                					window["DP_jQuery_" + dpuuid].datepicker._selectMonthYear(id, this, "Y");
                					return false;
                				}
                			};
                			$(this).bind(this.getAttribute("data-event"), handler[this.getAttribute("data-handler")]);
                		});
                	},
                
                	/* Generate the HTML for the current state of the date picker. */
                	_generateHTML: function(inst) {
                		var maxDraw, prevText, prev, nextText, next, currentText, gotoDate,
                			controls, buttonPanel, firstDay, showWeek, dayNames, dayNamesMin,
                			monthNames, monthNamesShort, beforeShowDay, showOtherMonths,
                			selectOtherMonths, defaultDate, html, dow, row, group, col, selectedDate,
                			cornerClass, calender, thead, day, daysInMonth, leadDays, curRows, numRows,
                			printDate, dRow, tbody, daySettings, otherMonth, unselectable,
                			tempDate = new Date(),
                			today = this._daylightSavingAdjust(
                				new Date(tempDate.getFullYear(), tempDate.getMonth(), tempDate.getDate())), // clear time
                			isRTL = this._get(inst, "isRTL"),
                			showButtonPanel = this._get(inst, "showButtonPanel"),
                			hideIfNoPrevNext = this._get(inst, "hideIfNoPrevNext"),
                			navigationAsDateFormat = this._get(inst, "navigationAsDateFormat"),
                			numMonths = this._getNumberOfMonths(inst),
                			showCurrentAtPos = this._get(inst, "showCurrentAtPos"),
                			stepMonths = this._get(inst, "stepMonths"),
                			isMultiMonth = (numMonths[0] !== 1 || numMonths[1] !== 1),
                			currentDate = this._daylightSavingAdjust((!inst.currentDay ? new Date(9999, 9, 9) :
                				new Date(inst.currentYear, inst.currentMonth, inst.currentDay))),
                			minDate = this._getMinMaxDate(inst, "min"),
                			maxDate = this._getMinMaxDate(inst, "max"),
                			drawMonth = inst.drawMonth - showCurrentAtPos,
                			drawYear = inst.drawYear;
                
                		if (drawMonth < 0) {
                			drawMonth += 12;
                			drawYear--;
                		}
                		if (maxDate) {
                			maxDraw = this._daylightSavingAdjust(new Date(maxDate.getFullYear(),
                				maxDate.getMonth() - (numMonths[0] * numMonths[1]) + 1, maxDate.getDate()));
                			maxDraw = (minDate && maxDraw < minDate ? minDate : maxDraw);
                			while (this._daylightSavingAdjust(new Date(drawYear, drawMonth, 1)) > maxDraw) {
                				drawMonth--;
                				if (drawMonth < 0) {
                					drawMonth = 11;
                					drawYear--;
                				}
                			}
                		}
                		inst.drawMonth = drawMonth;
                		inst.drawYear = drawYear;
                
                		prevText = this._get(inst, "prevText");
                		prevText = (!navigationAsDateFormat ? prevText : this.formatDate(prevText,
                			this._daylightSavingAdjust(new Date(drawYear, drawMonth - stepMonths, 1)),
                			this._getFormatConfig(inst)));
                
                		prev = (this._canAdjustMonth(inst, -1, drawYear, drawMonth) ?
                			"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click'" +
                			" title='" + prevText + "'><span class='ui-icon ui-icon-circle-triangle-" + ( isRTL ? "e" : "w") + "'>" + prevText + "</span></a>" :
                			(hideIfNoPrevNext ? "" : "<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+ prevText +"'><span class='ui-icon ui-icon-circle-triangle-" + ( isRTL ? "e" : "w") + "'>" + prevText + "</span></a>"));
                
                		nextText = this._get(inst, "nextText");
                		nextText = (!navigationAsDateFormat ? nextText : this.formatDate(nextText,
                			this._daylightSavingAdjust(new Date(drawYear, drawMonth + stepMonths, 1)),
                			this._getFormatConfig(inst)));
                
                		next = (this._canAdjustMonth(inst, +1, drawYear, drawMonth) ?
                			"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click'" +
                			" title='" + nextText + "'><span class='ui-icon ui-icon-circle-triangle-" + ( isRTL ? "w" : "e") + "'>" + nextText + "</span></a>" :
                			(hideIfNoPrevNext ? "" : "<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+ nextText + "'><span class='ui-icon ui-icon-circle-triangle-" + ( isRTL ? "w" : "e") + "'>" + nextText + "</span></a>"));
                
                		currentText = this._get(inst, "currentText");
                		gotoDate = (this._get(inst, "gotoCurrent") && inst.currentDay ? currentDate : today);
                		currentText = (!navigationAsDateFormat ? currentText :
                			this.formatDate(currentText, gotoDate, this._getFormatConfig(inst)));
                
                		controls = (!inst.inline ? "<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>" +
                			this._get(inst, "closeText") + "</button>" : "");
                
                		buttonPanel = (showButtonPanel) ? "<div class='ui-datepicker-buttonpane ui-widget-content'>" + (isRTL ? controls : "") +
                			(this._isInRange(inst, gotoDate) ? "<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'" +
                			">" + currentText + "</button>" : "") + (isRTL ? "" : controls) + "</div>" : "";
                
                		firstDay = parseInt(this._get(inst, "firstDay"),10);
                		firstDay = (isNaN(firstDay) ? 0 : firstDay);
                
                		showWeek = this._get(inst, "showWeek");
                		dayNames = this._get(inst, "dayNames");
                		dayNamesMin = this._get(inst, "dayNamesMin");
                		monthNames = this._get(inst, "monthNames");
                		monthNamesShort = this._get(inst, "monthNamesShort");
                		beforeShowDay = this._get(inst, "beforeShowDay");
                		showOtherMonths = this._get(inst, "showOtherMonths");
                		selectOtherMonths = this._get(inst, "selectOtherMonths");
                		defaultDate = this._getDefaultDate(inst);
                		html = "";
                		dow;
                		for (row = 0; row < numMonths[0]; row++) {
                			group = "";
                			this.maxRows = 4;
                			for (col = 0; col < numMonths[1]; col++) {
                				selectedDate = this._daylightSavingAdjust(new Date(drawYear, drawMonth, inst.selectedDay));
                				cornerClass = " ui-corner-all";
                				calender = "";
                				if (isMultiMonth) {
                					calender += "<div class='ui-datepicker-group";
                					if (numMonths[1] > 1) {
                						switch (col) {
                							case 0: calender += " ui-datepicker-group-first";
                								cornerClass = " ui-corner-" + (isRTL ? "right" : "left"); break;
                							case numMonths[1]-1: calender += " ui-datepicker-group-last";
                								cornerClass = " ui-corner-" + (isRTL ? "left" : "right"); break;
                							default: calender += " ui-datepicker-group-middle"; cornerClass = ""; break;
                						}
                					}
                					calender += "'>";
                				}
                				calender += "<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix" + cornerClass + "'>" +
                					(/all|left/.test(cornerClass) && row === 0 ? (isRTL ? next : prev) : "") +
                					(/all|right/.test(cornerClass) && row === 0 ? (isRTL ? prev : next) : "") +
                					this._generateMonthYearHeader(inst, drawMonth, drawYear, minDate, maxDate,
                					row > 0 || col > 0, monthNames, monthNamesShort) + // draw month headers
                					"</div><table class='ui-datepicker-calendar'><thead>" +
                					"<tr>";
                				thead = (showWeek ? "<th class='ui-datepicker-week-col'>" + this._get(inst, "weekHeader") + "</th>" : "");
                				for (dow = 0; dow < 7; dow++) { // days of the week
                					day = (dow + firstDay) % 7;
                					thead += "<th" + ((dow + firstDay + 6) % 7 >= 5 ? " class='ui-datepicker-week-end'" : "") + ">" +
                						"<span title='" + dayNames[day] + "'>" + dayNamesMin[day] + "</span></th>";
                				}
                				calender += thead + "</tr></thead><tbody>";
                				daysInMonth = this._getDaysInMonth(drawYear, drawMonth);
                				if (drawYear === inst.selectedYear && drawMonth === inst.selectedMonth) {
                					inst.selectedDay = Math.min(inst.selectedDay, daysInMonth);
                				}
                				leadDays = (this._getFirstDayOfMonth(drawYear, drawMonth) - firstDay + 7) % 7;
                				curRows = Math.ceil((leadDays + daysInMonth) / 7); // calculate the number of rows to generate
                				numRows = (isMultiMonth ? this.maxRows > curRows ? this.maxRows : curRows : curRows); //If multiple months, use the higher number of rows (see #7043)
                				this.maxRows = numRows;
                				printDate = this._daylightSavingAdjust(new Date(drawYear, drawMonth, 1 - leadDays));
                				for (dRow = 0; dRow < numRows; dRow++) { // create date picker rows
                					calender += "<tr>";
                					tbody = (!showWeek ? "" : "<td class='ui-datepicker-week-col'>" +
                						this._get(inst, "calculateWeek")(printDate) + "</td>");
                					for (dow = 0; dow < 7; dow++) { // create date picker days
                						daySettings = (beforeShowDay ?
                							beforeShowDay.apply((inst.input ? inst.input[0] : null), [printDate]) : [true, ""]);
                						otherMonth = (printDate.getMonth() !== drawMonth);
                						unselectable = (otherMonth && !selectOtherMonths) || !daySettings[0] ||
                							(minDate && printDate < minDate) || (maxDate && printDate > maxDate);
                						tbody += "<td class='" +
                							((dow + firstDay + 6) % 7 >= 5 ? " ui-datepicker-week-end" : "") + // highlight weekends
                							(otherMonth ? " ui-datepicker-other-month" : "") + // highlight days from other months
                							((printDate.getTime() === selectedDate.getTime() && drawMonth === inst.selectedMonth && inst._keyEvent) || // user pressed key
                							(defaultDate.getTime() === printDate.getTime() && defaultDate.getTime() === selectedDate.getTime()) ?
                							// or defaultDate is current printedDate and defaultDate is selectedDate
                							" " + this._dayOverClass : "") + // highlight selected day
                							(unselectable ? " " + this._unselectableClass + " ui-state-disabled": "") +  // highlight unselectable days
                							(otherMonth && !showOtherMonths ? "" : " " + daySettings[1] + // highlight custom dates
                							(printDate.getTime() === currentDate.getTime() ? " " + this._currentClass : "") + // highlight selected day
                							(printDate.getTime() === today.getTime() ? " ui-datepicker-today" : "")) + "'" + // highlight today (if different)
                							((!otherMonth || showOtherMonths) && daySettings[2] ? " title='" + daySettings[2] + "'" : "") + // cell title
                							(unselectable ? "" : " data-handler='selectDay' data-event='click' data-month='" + printDate.getMonth() + "' data-year='" + printDate.getFullYear() + "'") + ">" + // actions
                							(otherMonth && !showOtherMonths ? "&#xa0;" : // display for other months
                							(unselectable ? "<span class='ui-state-default'>" + printDate.getDate() + "</span>" : "<a class='ui-state-default" +
                							(printDate.getTime() === today.getTime() ? " ui-state-highlight" : "") +
                							(printDate.getTime() === currentDate.getTime() ? " ui-state-active" : "") + // highlight selected day
                							(otherMonth ? " ui-priority-secondary" : "") + // distinguish dates from other months
                							"' href='#'>" + printDate.getDate() + "</a>")) + "</td>"; // display selectable date
                						printDate.setDate(printDate.getDate() + 1);
                						printDate = this._daylightSavingAdjust(printDate);
                					}
                					calender += tbody + "</tr>";
                				}
                				drawMonth++;
                				if (drawMonth > 11) {
                					drawMonth = 0;
                					drawYear++;
                				}
                				calender += "</tbody></table>" + (isMultiMonth ? "</div>" +
                							((numMonths[0] > 0 && col === numMonths[1]-1) ? "<div class='ui-datepicker-row-break'></div>" : "") : "");
                				group += calender;
                			}
                			html += group;
                		}
                		html += buttonPanel;
                		inst._keyEvent = false;
                		return html;
                	},
                
                	/* Generate the month and year header. */
                	_generateMonthYearHeader: function(inst, drawMonth, drawYear, minDate, maxDate,
                			secondary, monthNames, monthNamesShort) {
                
                		var inMinYear, inMaxYear, month, years, thisYear, determineYear, year, endYear,
                			changeMonth = this._get(inst, "changeMonth"),
                			changeYear = this._get(inst, "changeYear"),
                			showMonthAfterYear = this._get(inst, "showMonthAfterYear"),
                			html = "<div class='ui-datepicker-title'>",
                			monthHtml = "";
                
                		// month selection
                		if (secondary || !changeMonth) {
                			monthHtml += "<span class='ui-datepicker-month'>" + monthNames[drawMonth] + "</span>";
                		} else {
                			inMinYear = (minDate && minDate.getFullYear() === drawYear);
                			inMaxYear = (maxDate && maxDate.getFullYear() === drawYear);
                			monthHtml += "<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>";
                			for ( month = 0; month < 12; month++) {
                				if ((!inMinYear || month >= minDate.getMonth()) && (!inMaxYear || month <= maxDate.getMonth())) {
                					monthHtml += "<option value='" + month + "'" +
                						(month === drawMonth ? " selected='selected'" : "") +
                						">" + monthNamesShort[month] + "</option>";
                				}
                			}
                			monthHtml += "</select>";
                		}
                
                		if (!showMonthAfterYear) {
                			html += monthHtml + (secondary || !(changeMonth && changeYear) ? "&#xa0;" : "");
                		}
                
                		// year selection
                		if ( !inst.yearshtml ) {
                			inst.yearshtml = "";
                			if (secondary || !changeYear) {
                				html += "<span class='ui-datepicker-year'>" + drawYear + "</span>";
                			} else {
                				// determine range of years to display
                				years = this._get(inst, "yearRange").split(":");
                				thisYear = new Date().getFullYear();
                				determineYear = function(value) {
                					var year = (value.match(/c[+\-].*/) ? drawYear + parseInt(value.substring(1), 10) :
                						(value.match(/[+\-].*/) ? thisYear + parseInt(value, 10) :
                						parseInt(value, 10)));
                					return (isNaN(year) ? thisYear : year);
                				};
                				year = determineYear(years[0]);
                				endYear = Math.max(year, determineYear(years[1] || ""));
                				year = (minDate ? Math.max(year, minDate.getFullYear()) : year);
                				endYear = (maxDate ? Math.min(endYear, maxDate.getFullYear()) : endYear);
                				inst.yearshtml += "<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";
                				for (; year <= endYear; year++) {
                					inst.yearshtml += "<option value='" + year + "'" +
                						(year === drawYear ? " selected='selected'" : "") +
                						">" + year + "</option>";
                				}
                				inst.yearshtml += "</select>";
                
                				html += inst.yearshtml;
                				inst.yearshtml = null;
                			}
                		}
                
                		html += this._get(inst, "yearSuffix");
                		if (showMonthAfterYear) {
                			html += (secondary || !(changeMonth && changeYear) ? "&#xa0;" : "") + monthHtml;
                		}
                		html += "</div>"; // Close datepicker_header
                		return html;
                	},
                
                	/* Adjust one of the date sub-fields. */
                	_adjustInstDate: function(inst, offset, period) {
                		var year = inst.drawYear + (period === "Y" ? offset : 0),
                			month = inst.drawMonth + (period === "M" ? offset : 0),
                			day = Math.min(inst.selectedDay, this._getDaysInMonth(year, month)) + (period === "D" ? offset : 0),
                			date = this._restrictMinMax(inst, this._daylightSavingAdjust(new Date(year, month, day)));
                
                		inst.selectedDay = date.getDate();
                		inst.drawMonth = inst.selectedMonth = date.getMonth();
                		inst.drawYear = inst.selectedYear = date.getFullYear();
                		if (period === "M" || period === "Y") {
                			this._notifyChange(inst);
                		}
                	},
                
                	/* Ensure a date is within any min/max bounds. */
                	_restrictMinMax: function(inst, date) {
                		var minDate = this._getMinMaxDate(inst, "min"),
                			maxDate = this._getMinMaxDate(inst, "max"),
                			newDate = (minDate && date < minDate ? minDate : date);
                		return (maxDate && newDate > maxDate ? maxDate : newDate);
                	},
                
                	/* Notify change of month/year. */
                	_notifyChange: function(inst) {
                		var onChange = this._get(inst, "onChangeMonthYear");
                		if (onChange) {
                			onChange.apply((inst.input ? inst.input[0] : null),
                				[inst.selectedYear, inst.selectedMonth + 1, inst]);
                		}
                	},
                
                	/* Determine the number of months to show. */
                	_getNumberOfMonths: function(inst) {
                		var numMonths = this._get(inst, "numberOfMonths");
                		return (numMonths == null ? [1, 1] : (typeof numMonths === "number" ? [1, numMonths] : numMonths));
                	},
                
                	/* Determine the current maximum date - ensure no time components are set. */
                	_getMinMaxDate: function(inst, minMax) {
                		return this._determineDate(inst, this._get(inst, minMax + "Date"), null);
                	},
                
                	/* Find the number of days in a given month. */
                	_getDaysInMonth: function(year, month) {
                		return 32 - this._daylightSavingAdjust(new Date(year, month, 32)).getDate();
                	},
                
                	/* Find the day of the week of the first of a month. */
                	_getFirstDayOfMonth: function(year, month) {
                		return new Date(year, month, 1).getDay();
                	},
                
                	/* Determines if we should allow a "next/prev" month display change. */
                	_canAdjustMonth: function(inst, offset, curYear, curMonth) {
                		var numMonths = this._getNumberOfMonths(inst),
                			date = this._daylightSavingAdjust(new Date(curYear,
                			curMonth + (offset < 0 ? offset : numMonths[0] * numMonths[1]), 1));
                
                		if (offset < 0) {
                			date.setDate(this._getDaysInMonth(date.getFullYear(), date.getMonth()));
                		}
                		return this._isInRange(inst, date);
                	},
                
                	/* Is the given date in the accepted range? */
                	_isInRange: function(inst, date) {
                		var yearSplit, currentYear,
                			minDate = this._getMinMaxDate(inst, "min"),
                			maxDate = this._getMinMaxDate(inst, "max"),
                			minYear = null,
                			maxYear = null,
                			years = this._get(inst, "yearRange");
                			if (years){
                				yearSplit = years.split(":");
                				currentYear = new Date().getFullYear();
                				minYear = parseInt(yearSplit[0], 10) + currentYear;
                				maxYear = parseInt(yearSplit[1], 10) + currentYear;
                			}
                
                		return ((!minDate || date.getTime() >= minDate.getTime()) &&
                			(!maxDate || date.getTime() <= maxDate.getTime()) &&
                			(!minYear || date.getFullYear() >= minYear) &&
                			(!maxYear || date.getFullYear() <= maxYear));
                	},
                
                	/* Provide the configuration settings for formatting/parsing. */
                	_getFormatConfig: function(inst) {
                		var shortYearCutoff = this._get(inst, "shortYearCutoff");
                		shortYearCutoff = (typeof shortYearCutoff !== "string" ? shortYearCutoff :
                			new Date().getFullYear() % 100 + parseInt(shortYearCutoff, 10));
                		return {shortYearCutoff: shortYearCutoff,
                			dayNamesShort: this._get(inst, "dayNamesShort"), dayNames: this._get(inst, "dayNames"),
                			monthNamesShort: this._get(inst, "monthNamesShort"), monthNames: this._get(inst, "monthNames")};
                	},
                
                	/* Format the given date for display. */
                	_formatDate: function(inst, day, month, year) {
                		if (!day) {
                			inst.currentDay = inst.selectedDay;
                			inst.currentMonth = inst.selectedMonth;
                			inst.currentYear = inst.selectedYear;
                		}
                		var date = (day ? (typeof day === "object" ? day :
                			this._daylightSavingAdjust(new Date(year, month, day))) :
                			this._daylightSavingAdjust(new Date(inst.currentYear, inst.currentMonth, inst.currentDay)));
                		return this.formatDate(this._get(inst, "dateFormat"), date, this._getFormatConfig(inst));
                	}
                });
                
                /*
                 * Bind hover events for datepicker elements.
                 * Done via delegate so the binding only occurs once in the lifetime of the parent div.
                 * Global instActive, set by _updateDatepicker allows the handlers to find their way back to the active picker.
                 */
                function bindHover(dpDiv) {
                	var selector = "button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";
                	return dpDiv.delegate(selector, "mouseout", function() {
                			$(this).removeClass("ui-state-hover");
                			if (this.className.indexOf("ui-datepicker-prev") !== -1) {
                				$(this).removeClass("ui-datepicker-prev-hover");
                			}
                			if (this.className.indexOf("ui-datepicker-next") !== -1) {
                				$(this).removeClass("ui-datepicker-next-hover");
                			}
                		})
                		.delegate(selector, "mouseover", function(){
                			if (!$.datepicker._isDisabledDatepicker( instActive.inline ? dpDiv.parent()[0] : instActive.input[0])) {
                				$(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");
                				$(this).addClass("ui-state-hover");
                				if (this.className.indexOf("ui-datepicker-prev") !== -1) {
                					$(this).addClass("ui-datepicker-prev-hover");
                				}
                				if (this.className.indexOf("ui-datepicker-next") !== -1) {
                					$(this).addClass("ui-datepicker-next-hover");
                				}
                			}
                		});
                }
                
                /* jQuery extend now ignores nulls! */
                function extendRemove(target, props) {
                	$.extend(target, props);
                	for (var name in props) {
                		if (props[name] == null) {
                			target[name] = props[name];
                		}
                	}
                	return target;
                }
                
                /* Invoke the datepicker functionality.
                   @param  options  string - a command, optionally followed by additional parameters or
                					Object - settings for attaching new datepicker functionality
                   @return  jQuery object */
                $.fn.datepicker = function(options){
                
                	/* Verify an empty collection wasn't passed - Fixes #6976 */
                	if ( !this.length ) {
                		return this;
                	}
                
                	/* Initialise the date picker. */
                	if (!$.datepicker.initialized) {
                		$(document).mousedown($.datepicker._checkExternalClick);
                		$.datepicker.initialized = true;
                	}
                
                	/* Append datepicker main container to body if not exist. */
                	if ($("#"+$.datepicker._mainDivId).length === 0) {
                		$("body").append($.datepicker.dpDiv);
                	}
                
                	var otherArgs = Array.prototype.slice.call(arguments, 1);
                	if (typeof options === "string" && (options === "isDisabled" || options === "getDate" || options === "widget")) {
                		return $.datepicker["_" + options + "Datepicker"].
                			apply($.datepicker, [this[0]].concat(otherArgs));
                	}
                	if (options === "option" && arguments.length === 2 && typeof arguments[1] === "string") {
                		return $.datepicker["_" + options + "Datepicker"].
                			apply($.datepicker, [this[0]].concat(otherArgs));
                	}
                	return this.each(function() {
                		typeof options === "string" ?
                			$.datepicker["_" + options + "Datepicker"].
                				apply($.datepicker, [this].concat(otherArgs)) :
                			$.datepicker._attachDatepicker(this, options);
                	});
                };
                
                $.datepicker = new Datepicker(); // singleton instance
                $.datepicker.initialized = false;
                $.datepicker.uuid = new Date().getTime();
                $.datepicker.version = "1.10.0";
                
                // Workaround for #4055
                // Add another global to avoid noConflict issues with inline event handlers
                window["DP_jQuery_" + dpuuid] = $;
                
                })(jQuery);
                
                });
                (function() {
                  var __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
                    __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('widget/date_picker',["underscore", "jquery", "jquery_ui/datepicker", "backbone", "common/continuum_view", "common/has_properties"], function(_, $, $1, Backbone, continuum_view, HasProperties) {
                    var DatePicker, DatePickerView, DatePickers, _ref, _ref1, _ref2;
                    DatePickerView = (function(_super) {
                      __extends(DatePickerView, _super);
                
                      function DatePickerView() {
                        this.onSelect = __bind(this.onSelect, this);
                        _ref = DatePickerView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      DatePickerView.prototype.initialize = function(options) {
                        DatePickerView.__super__.initialize.call(this, options);
                        return this.render();
                      };
                
                      DatePickerView.prototype.render = function() {
                        var $datepicker, $label;
                        this.$el.empty();
                        $label = $('<label>').text(this.mget("title"));
                        $datepicker = $("<div>").datepicker({
                          defaultDate: new Date(this.mget('value')),
                          minDate: this.mget('min_date') != null ? new Date(this.mget('min_date')) : null,
                          maxDate: this.mget('max_date') != null ? new Date(this.mget('max_date')) : null,
                          onSelect: this.onSelect
                        });
                        return this.$el.append([$label, $datepicker]);
                      };
                
                      DatePickerView.prototype.onSelect = function(dateText, ui) {
                        this.mset('value', new Date(dateText));
                        return this.model.save();
                      };
                
                      return DatePickerView;
                
                    })(continuum_view.View);
                    DatePicker = (function(_super) {
                      __extends(DatePicker, _super);
                
                      function DatePicker() {
                        _ref1 = DatePicker.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      DatePicker.prototype.type = "DatePicker";
                
                      DatePicker.prototype.default_view = DatePickerView;
                
                      DatePicker.prototype.defaults = function() {
                        return {
                          value: Date.now()
                        };
                      };
                
                      return DatePicker;
                
                    })(HasProperties);
                    DatePickers = (function(_super) {
                      __extends(DatePickers, _super);
                
                      function DatePickers() {
                        _ref2 = DatePickers.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      DatePickers.prototype.model = DatePicker;
                
                      return DatePickers;
                
                    })(Backbone.Collection);
                    return {
                      Model: DatePicker,
                      Collection: new DatePickers(),
                      View: DatePickerView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=date_picker.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('widget/panel',["underscore", "jquery", "backbone", "common/continuum_view", "common/has_properties"], function(_, $, Backbone, continuum_view, HasProperties) {
                    var Panel, PanelView, Panels, _ref, _ref1, _ref2;
                    PanelView = (function(_super) {
                      __extends(PanelView, _super);
                
                      function PanelView() {
                        _ref = PanelView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      PanelView.prototype.initialize = function(options) {
                        PanelView.__super__.initialize.call(this, options);
                        return this.render();
                      };
                
                      PanelView.prototype.render = function() {
                        return this.$el.empty();
                      };
                
                      return PanelView;
                
                    })(continuum_view.View);
                    Panel = (function(_super) {
                      __extends(Panel, _super);
                
                      function Panel() {
                        _ref1 = Panel.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      Panel.prototype.type = "Panel";
                
                      Panel.prototype.default_view = PanelView;
                
                      Panel.prototype.defaults = function() {
                        return {
                          title: "",
                          child: null,
                          closable: false
                        };
                      };
                
                      return Panel;
                
                    })(HasProperties);
                    Panels = (function(_super) {
                      __extends(Panels, _super);
                
                      function Panels() {
                        _ref2 = Panels.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      Panels.prototype.model = Panel;
                
                      return Panels;
                
                    })(Backbone.Collection);
                    return {
                      Model: Panel,
                      Collection: new Panels(),
                      View: PanelView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=panel.js.map
                */;
                define('bootstrap/tab',["jquery"], function(jQuery) {
                
                /* ========================================================================
                 * Bootstrap: tab.js v3.1.1
                 * http://getbootstrap.com/javascript/#tabs
                 * ========================================================================
                 * Copyright 2011-2014 Twitter, Inc.
                 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
                 * ======================================================================== */
                
                
                +function ($) {
                  
                
                  // TAB CLASS DEFINITION
                  // ====================
                
                  var Tab = function (element) {
                    this.element = $(element)
                  }
                
                  Tab.prototype.show = function () {
                    var $this    = this.element
                    var $ul      = $this.closest('ul:not(.bk-bs-dropdown-menu)')
                    var selector = $this.data('bk-bs-target')
                
                    if (!selector) {
                      selector = $this.attr('href')
                      selector = selector && selector.replace(/.*(?=#[^\s]*$)/, '') //strip for ie7
                    }
                
                    if ($this.parent('li').hasClass('bk-bs-active')) return
                
                    var previous = $ul.find('.bk-bs-active:last a')[0]
                    var e        = $.Event('show.bk-bs.tab', {
                      relatedTarget: previous
                    })
                
                    $this.trigger(e)
                
                    if (e.isDefaultPrevented()) return
                
                    var $target = $(selector)
                
                    this.activate($this.parent('li'), $ul)
                    this.activate($target, $target.parent(), function () {
                      $this.trigger({
                        type: 'shown.bk-bs.tab',
                        relatedTarget: previous
                      })
                    })
                  }
                
                  Tab.prototype.activate = function (element, container, callback) {
                    var $active    = container.find('> .bk-bs-active')
                    var transition = callback
                      && $.support.transition
                      && $active.hasClass('bk-bs-fade')
                
                    function next() {
                      $active
                        .removeClass('bk-bs-active')
                        .find('> .bk-bs-dropdown-menu > .bk-bs-active')
                        .removeClass('bk-bs-active')
                
                      element.addClass('bk-bs-active')
                
                      if (transition) {
                        element[0].offsetWidth // reflow for transition
                        element.addClass('bk-bs-in')
                      } else {
                        element.removeClass('bk-bs-fade')
                      }
                
                      if (element.parent('.bk-bs-dropdown-menu')) {
                        element.closest('li.bk-bs-dropdown').addClass('bk-bs-active')
                      }
                
                      callback && callback()
                    }
                
                    transition ?
                      $active
                        .one($.support.transition.end, next)
                        .emulateTransitionEnd(150) :
                      next()
                
                    $active.removeClass('bk-bs-in')
                  }
                
                
                  // TAB PLUGIN DEFINITION
                  // =====================
                
                  var old = $.fn.tab
                
                  $.fn.tab = function ( option ) {
                    return this.each(function () {
                      var $this = $(this)
                      var data  = $this.data('bk-bs.tab')
                
                      if (!data) $this.data('bk-bs.tab', (data = new Tab(this)))
                      if (typeof option == 'string') data[option]()
                    })
                  }
                
                  $.fn.tab.Constructor = Tab
                
                
                  // TAB NO CONFLICT
                  // ===============
                
                  $.fn.tab.noConflict = function () {
                    $.fn.tab = old
                    return this
                  }
                
                
                  // TAB DATA-API
                  // ============
                
                  $(document).on('click.bk-bs.tab.data-api', '[data-bk-bs-toggle="tab"], [data-bk-bs-toggle="pill"]', function (e) {
                    e.preventDefault()
                    $(this).tab('show')
                  })
                
                }(jQuery);
                
                });
                
                define('widget/tabs_template',[],function(){
                  var template = function(__obj) {
                  var _safe = function(value) {
                    if (typeof value === 'undefined' && value == null)
                      value = '';
                    var result = new String(value);
                    result.ecoSafe = true;
                    return result;
                  };
                  return (function() {
                    var __out = [], __self = this, _print = function(value) {
                      if (typeof value !== 'undefined' && value != null)
                        __out.push(value.ecoSafe ? value : __self.escape(value));
                    }, _capture = function(callback) {
                      var out = __out, result;
                      __out = [];
                      callback.call(this);
                      result = __out.join('');
                      __out = out;
                      return _safe(result);
                    };
                    (function() {
                      var i, tab, _i, _j, _len, _len1, _ref, _ref1;
                    
                      _print(_safe('<ul class="bk-bs-nav bk-bs-nav-tabs">\n  '));
                    
                      _ref = this.tabs;
                      for (i = _i = 0, _len = _ref.length; _i < _len; i = ++_i) {
                        tab = _ref[i];
                        _print(_safe('\n    <li class="'));
                        _print(this.active(i));
                        _print(_safe('">\n      <a href="#tab-'));
                        _print(tab.get('id'));
                        _print(_safe('">'));
                        _print(tab.get('title'));
                        _print(_safe('</a>\n    </li>\n  '));
                      }
                    
                      _print(_safe('\n</ul>\n<div class="bk-bs-tab-content">\n  '));
                    
                      _ref1 = this.tabs;
                      for (i = _j = 0, _len1 = _ref1.length; _j < _len1; i = ++_j) {
                        tab = _ref1[i];
                        _print(_safe('\n    <div class="bk-bs-tab-pane '));
                        _print(this.active(i));
                        _print(_safe('" id="tab-'));
                        _print(tab.get('id'));
                        _print(_safe('"></div>\n  '));
                      }
                    
                      _print(_safe('\n</div>\n'));
                    
                    }).call(this);
                    
                    return __out.join('');
                  }).call((function() {
                    var obj = {
                      escape: function(value) {
                        return ('' + value)
                          .replace(/&/g, '&amp;')
                          .replace(/</g, '&lt;')
                          .replace(/>/g, '&gt;')
                          .replace(/"/g, '&quot;');
                      },
                      safe: _safe
                    }, key;
                    for (key in __obj) obj[key] = __obj[key];
                    return obj;
                  })());
                };
                  return template;
                });
                
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('widget/tabs',["underscore", "jquery", "bootstrap/tab", "backbone", "common/continuum_view", "common/has_properties", "common/build_views", "./tabs_template"], function(_, $, $1, Backbone, continuum_view, HasProperties, build_views, tabs_template) {
                    var Tabs, TabsView, Tabses, _ref, _ref1, _ref2;
                    TabsView = (function(_super) {
                      __extends(TabsView, _super);
                
                      function TabsView() {
                        _ref = TabsView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      TabsView.prototype.initialize = function(options) {
                        TabsView.__super__.initialize.call(this, options);
                        this.views = {};
                        return this.render();
                      };
                
                      TabsView.prototype.render = function() {
                        var $panels, active, child, children, html, key, panel, tab, tabs, val, _i, _len, _ref1, _ref2, _ref3;
                        _ref1 = this.views;
                        for (key in _ref1) {
                          if (!__hasProp.call(_ref1, key)) continue;
                          val = _ref1[key];
                          val.$el.detach();
                        }
                        this.$el.empty();
                        tabs = this.mget('tabs');
                        active = this.mget("active");
                        children = (function() {
                          var _i, _len, _results;
                          _results = [];
                          for (_i = 0, _len = tabs.length; _i < _len; _i++) {
                            tab = tabs[_i];
                            _results.push(tab.get("child"));
                          }
                          return _results;
                        })();
                        build_views(this.views, children);
                        html = $(tabs_template({
                          tabs: tabs,
                          active: function(i) {
                            if (i === active) {
                              return 'bk-bs-active';
                            } else {
                              return '';
                            }
                          }
                        }));
                        html.find("> li > a").click(function(event) {
                          event.preventDefault();
                          return $(this).tab('show');
                        });
                        $panels = html.children(".bk-bs-tab-pane");
                        _ref2 = _.zip(children, $panels);
                        for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
                          _ref3 = _ref2[_i], child = _ref3[0], panel = _ref3[1];
                          $(panel).html(this.views[child.id].$el);
                        }
                        this.$el.append(html);
                        return this.$el.tabs;
                      };
                
                      return TabsView;
                
                    })(continuum_view.View);
                    Tabs = (function(_super) {
                      __extends(Tabs, _super);
                
                      function Tabs() {
                        _ref1 = Tabs.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      Tabs.prototype.type = "Tabs";
                
                      Tabs.prototype.default_view = TabsView;
                
                      Tabs.prototype.defaults = function() {
                        return {
                          tabs: [],
                          active: 0
                        };
                      };
                
                      return Tabs;
                
                    })(HasProperties);
                    Tabses = (function(_super) {
                      __extends(Tabses, _super);
                
                      function Tabses() {
                        _ref2 = Tabses.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      Tabses.prototype.model = Tabs;
                
                      return Tabses;
                
                    })(Backbone.Collection);
                    return {
                      Model: Tabs,
                      Collection: new Tabses(),
                      View: TabsView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=tabs.js.map
                */;
                define('widget/dialog_template',[],function(){
                  var template = function(__obj) {
                  var _safe = function(value) {
                    if (typeof value === 'undefined' && value == null)
                      value = '';
                    var result = new String(value);
                    result.ecoSafe = true;
                    return result;
                  };
                  return (function() {
                    var __out = [], __self = this, _print = function(value) {
                      if (typeof value !== 'undefined' && value != null)
                        __out.push(value.ecoSafe ? value : __self.escape(value));
                    }, _capture = function(callback) {
                      var out = __out, result;
                      __out = [];
                      callback.call(this);
                      result = __out.join('');
                      __out = out;
                      return _safe(result);
                    };
                    (function() {
                      var button, i, _i, _len, _ref;
                    
                      _print(_safe('<div class="bk-bs-modal" tabindex="-1">\n  <div class="bk-bs-modal-dialog">\n    <div class="bk-bs-modal-content">\n      <div class="bk-bs-modal-header">\n        '));
                    
                      if (this.closable) {
                        _print(_safe('\n          <button type="button" class="bk-bs-close" data-bk-bs-dismiss="modal">&times;</button>\n        '));
                      }
                    
                      _print(_safe('\n        <h4 class="bk-bs-modal-title">'));
                    
                      _print(this.title);
                    
                      _print(_safe('</h4>\n      </div>\n      <div class="bk-bs-modal-body">\n        '));
                    
                      _print(this.content);
                    
                      _print(_safe('\n      </div>\n      <div class="bk-bs-modal-footer">\n        '));
                    
                      _ref = this.buttons;
                      for (i = _i = 0, _len = _ref.length; _i < _len; i = ++_i) {
                        button = _ref[i];
                        _print(_safe('\n          '));
                        if (i === 0) {
                          _print(_safe('\n            <button type="button" class="bk-bs-btn bk-bs-btn-primary" data-bk-bs-dismiss="modal">'));
                          _print(button);
                          _print(_safe('</button>\n          '));
                        } else {
                          _print(_safe('\n            <button type="button" class="bk-bs-btn bk-bs-btn-default">'));
                          _print(button);
                          _print(_safe('</button>\n          '));
                        }
                        _print(_safe('\n        '));
                      }
                    
                      _print(_safe('\n      </div>\n    </div>\n  </div>\n</div>\n'));
                    
                    }).call(this);
                    
                    return __out.join('');
                  }).call((function() {
                    var obj = {
                      escape: function(value) {
                        return ('' + value)
                          .replace(/&/g, '&amp;')
                          .replace(/</g, '&lt;')
                          .replace(/>/g, '&gt;')
                          .replace(/"/g, '&quot;');
                      },
                      safe: _safe
                    }, key;
                    for (key in __obj) obj[key] = __obj[key];
                    return obj;
                  })());
                };
                  return template;
                });
                
                (function() {
                  var __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
                    __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('widget/dialog',["underscore", "backbone", "jquery", "bootstrap/modal", "common/has_properties", "common/continuum_view", "./dialog_template"], function(_, Backbone, $, $1, HasProperties, continuum_view, dialog_template) {
                    var Dialog, DialogView, Dialogs, _ref, _ref1, _ref2;
                    DialogView = (function(_super) {
                      __extends(DialogView, _super);
                
                      function DialogView() {
                        this.changeContent = __bind(this.changeContent, this);
                        this.changeVisibility = __bind(this.changeVisibility, this);
                        this.onHide = __bind(this.onHide, this);
                        _ref = DialogView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      DialogView.prototype.initialize = function(options) {
                        DialogView.__super__.initialize.call(this, options);
                        this.render();
                        this.listenTo(this.model, 'destroy', this.remove);
                        this.listenTo(this.model, 'change:visible', this.changeVisibility);
                        return this.listenTo(this.model, 'change:content', this.changeContent);
                      };
                
                      DialogView.prototype.render = function() {
                        this.$modal = $(dialog_template(this.model.attributes));
                        this.$modal.modal({
                          show: this.mget("visible")
                        });
                        this.$modal.on('hidden.bk-bs.modal', this.onHide);
                        return this.$el.html(this.$modal);
                      };
                
                      DialogView.prototype.onHide = function(event) {
                        return this.mset("visible", false, {
                          silent: true
                        });
                      };
                
                      DialogView.prototype.changeVisibility = function() {
                        return this.$modal.modal(this.mget("visible") ? "show" : "hide");
                      };
                
                      DialogView.prototype.changeContent = function() {
                        return this.$modal.find(".bk-bs-modal-body").text(this.mget("content"));
                      };
                
                      return DialogView;
                
                    })(continuum_view.View);
                    Dialog = (function(_super) {
                      __extends(Dialog, _super);
                
                      function Dialog() {
                        _ref1 = Dialog.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      Dialog.prototype.type = "Dialog";
                
                      Dialog.prototype.default_view = DialogView;
                
                      Dialog.prototype.defaults = function() {
                        return {
                          visible: false,
                          closable: true,
                          title: "",
                          content: "",
                          buttons: []
                        };
                      };
                
                      return Dialog;
                
                    })(HasProperties);
                    Dialogs = (function(_super) {
                      __extends(Dialogs, _super);
                
                      function Dialogs() {
                        _ref2 = Dialogs.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      Dialogs.prototype.model = Dialog;
                
                      return Dialogs;
                
                    })(Backbone.Collection);
                    return {
                      Model: Dialog,
                      Collection: new Dialogs(),
                      View: DialogView
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=dialog.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('transforms/binarysegment',["common/continuum_view", "backbone", "common/has_parent"], function(continuum_view, Backbone, HasParent) {
                    var BinarySegment, BinarySegmentView, BinarySegments, _ref, _ref1, _ref2;
                    BinarySegmentView = (function(_super) {
                      __extends(BinarySegmentView, _super);
                
                      function BinarySegmentView() {
                        _ref = BinarySegmentView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      BinarySegmentView.prototype.attributes = {
                        "class": "BinarySegmentView"
                      };
                
                      BinarySegmentView.prototype.initialize = function(options) {
                        BinarySegmentView.__super__.initialize.call(this, options);
                        return this.render_init();
                      };
                
                      BinarySegmentView.prototype.delegateEvents = function(events) {
                        BinarySegmentView.__super__.delegateEvents.call(this, events);
                        return "pass";
                      };
                
                      BinarySegmentView.prototype.render_init = function() {
                        return this.$el.html("");
                      };
                
                      return BinarySegmentView;
                
                    })(continuum_view.View);
                    BinarySegment = (function(_super) {
                      __extends(BinarySegment, _super);
                
                      function BinarySegment() {
                        _ref1 = BinarySegment.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      BinarySegment.prototype.type = "BinarySegment";
                
                      BinarySegment.prototype.default_view = BinarySegmentView;
                
                      return BinarySegment;
                
                    })(HasParent);
                    BinarySegments = (function(_super) {
                      __extends(BinarySegments, _super);
                
                      function BinarySegments() {
                        _ref2 = BinarySegments.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      BinarySegments.prototype.model = BinarySegment;
                
                      return BinarySegments;
                
                    })(Backbone.Collection);
                    return {
                      "Model": BinarySegment,
                      "Collection": new BinarySegments()
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=binarysegment.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('transforms/const',["common/continuum_view", "backbone", "common/has_parent"], function(continuum_view, Backbone, HasParent) {
                    var Const, ConstView, Consts, _ref, _ref1, _ref2;
                    ConstView = (function(_super) {
                      __extends(ConstView, _super);
                
                      function ConstView() {
                        _ref = ConstView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      ConstView.prototype.attributes = {
                        "class": "ConstView"
                      };
                
                      ConstView.prototype.initialize = function(options) {
                        ConstView.__super__.initialize.call(this, options);
                        return this.render_init();
                      };
                
                      ConstView.prototype.delegateEvents = function(events) {
                        ConstView.__super__.delegateEvents.call(this, events);
                        return "pass";
                      };
                
                      ConstView.prototype.render_init = function() {
                        return this.$el.html("");
                      };
                
                      return ConstView;
                
                    })(continuum_view.View);
                    Const = (function(_super) {
                      __extends(Const, _super);
                
                      function Const() {
                        _ref1 = Const.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      Const.prototype.type = "Const";
                
                      Const.prototype.default_view = ConstView;
                
                      return Const;
                
                    })(HasParent);
                    Consts = (function(_super) {
                      __extends(Consts, _super);
                
                      function Consts() {
                        _ref2 = Consts.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      Consts.prototype.model = Const;
                
                      return Consts;
                
                    })(Backbone.Collection);
                    return {
                      "Model": Const,
                      "Collection": new Consts()
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=const.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('transforms/contour',["common/continuum_view", "backbone", "common/has_parent"], function(continuum_view, Backbone, HasParent) {
                    var Contour, ContourView, Contours, _ref, _ref1, _ref2;
                    ContourView = (function(_super) {
                      __extends(ContourView, _super);
                
                      function ContourView() {
                        _ref = ContourView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      ContourView.prototype.attributes = {
                        "class": "ContourView"
                      };
                
                      ContourView.prototype.initialize = function(options) {
                        ContourView.__super__.initialize.call(this, options);
                        return this.render_init();
                      };
                
                      ContourView.prototype.delegateEvents = function(events) {
                        ContourView.__super__.delegateEvents.call(this, events);
                        return "pass";
                      };
                
                      ContourView.prototype.render_init = function() {
                        return this.$el.html("");
                      };
                
                      return ContourView;
                
                    })(continuum_view.View);
                    Contour = (function(_super) {
                      __extends(Contour, _super);
                
                      function Contour() {
                        _ref1 = Contour.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      Contour.prototype.type = "Contour";
                
                      Contour.prototype.default_view = ContourView;
                
                      return Contour;
                
                    })(HasParent);
                    Contours = (function(_super) {
                      __extends(Contours, _super);
                
                      function Contours() {
                        _ref2 = Contours.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      Contours.prototype.model = Contour;
                
                      return Contours;
                
                    })(Backbone.Collection);
                    return {
                      "Model": Contour,
                      "Collection": new Contours()
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=contour.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('transforms/count',["common/continuum_view", "backbone", "common/has_parent"], function(continuum_view, Backbone, HasParent) {
                    var Count, CountView, Counts, _ref, _ref1, _ref2;
                    CountView = (function(_super) {
                      __extends(CountView, _super);
                
                      function CountView() {
                        _ref = CountView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      CountView.prototype.attributes = {
                        "class": "CountView"
                      };
                
                      CountView.prototype.initialize = function(options) {
                        CountView.__super__.initialize.call(this, options);
                        return this.render_init();
                      };
                
                      CountView.prototype.delegateEvents = function(events) {
                        CountView.__super__.delegateEvents.call(this, events);
                        return "pass";
                      };
                
                      CountView.prototype.render_init = function() {
                        return this.$el.html("");
                      };
                
                      return CountView;
                
                    })(continuum_view.View);
                    Count = (function(_super) {
                      __extends(Count, _super);
                
                      function Count() {
                        _ref1 = Count.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      Count.prototype.type = "Count";
                
                      Count.prototype.default_view = CountView;
                
                      return Count;
                
                    })(HasParent);
                    Counts = (function(_super) {
                      __extends(Counts, _super);
                
                      function Counts() {
                        _ref2 = Counts.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      Counts.prototype.model = Count;
                
                      return Counts;
                
                    })(Backbone.Collection);
                    return {
                      "Model": Count,
                      "Collection": new Counts()
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=count.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('transforms/cuberoot',["common/continuum_view", "backbone", "common/has_parent"], function(continuum_view, Backbone, HasParent) {
                    var Cuberoot, CuberootView, Cuberoots, _ref, _ref1, _ref2;
                    CuberootView = (function(_super) {
                      __extends(CuberootView, _super);
                
                      function CuberootView() {
                        _ref = CuberootView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      CuberootView.prototype.attributes = {
                        "class": "CuberootView"
                      };
                
                      CuberootView.prototype.initialize = function(options) {
                        CuberootView.__super__.initialize.call(this, options);
                        return this.render_init();
                      };
                
                      CuberootView.prototype.delegateEvents = function(events) {
                        CuberootView.__super__.delegateEvents.call(this, events);
                        return "pass";
                      };
                
                      CuberootView.prototype.render_init = function() {
                        return this.$el.html("");
                      };
                
                      return CuberootView;
                
                    })(continuum_view.View);
                    Cuberoot = (function(_super) {
                      __extends(Cuberoot, _super);
                
                      function Cuberoot() {
                        _ref1 = Cuberoot.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      Cuberoot.prototype.type = "Cuberoot";
                
                      Cuberoot.prototype.default_view = CuberootView;
                
                      return Cuberoot;
                
                    })(HasParent);
                    Cuberoots = (function(_super) {
                      __extends(Cuberoots, _super);
                
                      function Cuberoots() {
                        _ref2 = Cuberoots.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      Cuberoots.prototype.model = Cuberoot;
                
                      return Cuberoots;
                
                    })(Backbone.Collection);
                    return {
                      "Model": Cuberoot,
                      "Collection": new Cuberoots()
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=cuberoot.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('transforms/id',["common/continuum_view", "backbone", "common/has_parent"], function(continuum_view, Backbone, HasParent) {
                    var Id, IdView, Ids, _ref, _ref1, _ref2;
                    IdView = (function(_super) {
                      __extends(IdView, _super);
                
                      function IdView() {
                        _ref = IdView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      IdView.prototype.attributes = {
                        "class": "IdView"
                      };
                
                      IdView.prototype.initialize = function(options) {
                        IdView.__super__.initialize.call(this, options);
                        return this.render_init();
                      };
                
                      IdView.prototype.delegateEvents = function(events) {
                        IdView.__super__.delegateEvents.call(this, events);
                        return "pass";
                      };
                
                      IdView.prototype.render_init = function() {
                        return this.$el.html("");
                      };
                
                      return IdView;
                
                    })(continuum_view.View);
                    Id = (function(_super) {
                      __extends(Id, _super);
                
                      function Id() {
                        _ref1 = Id.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      Id.prototype.type = "Id";
                
                      Id.prototype.default_view = IdView;
                
                      return Id;
                
                    })(HasParent);
                    Ids = (function(_super) {
                      __extends(Ids, _super);
                
                      function Ids() {
                        _ref2 = Ids.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      Ids.prototype.model = Id;
                
                      return Ids;
                
                    })(Backbone.Collection);
                    return {
                      "Model": Id,
                      "Collection": new Ids()
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=id.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('transforms/interpolate',["common/continuum_view", "backbone", "common/has_parent"], function(continuum_view, Backbone, HasParent) {
                    var Interpolate, InterpolateView, Interpolates, _ref, _ref1, _ref2;
                    InterpolateView = (function(_super) {
                      __extends(InterpolateView, _super);
                
                      function InterpolateView() {
                        _ref = InterpolateView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      InterpolateView.prototype.attributes = {
                        "class": "InterpolateView"
                      };
                
                      InterpolateView.prototype.initialize = function(options) {
                        InterpolateView.__super__.initialize.call(this, options);
                        return this.render_init();
                      };
                
                      InterpolateView.prototype.delegateEvents = function(events) {
                        InterpolateView.__super__.delegateEvents.call(this, events);
                        return "pass";
                      };
                
                      InterpolateView.prototype.render_init = function() {
                        return this.$el.html("");
                      };
                
                      return InterpolateView;
                
                    })(continuum_view.View);
                    Interpolate = (function(_super) {
                      __extends(Interpolate, _super);
                
                      function Interpolate() {
                        _ref1 = Interpolate.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      Interpolate.prototype.type = "Interpolate";
                
                      Interpolate.prototype.default_view = InterpolateView;
                
                      return Interpolate;
                
                    })(HasParent);
                    Interpolates = (function(_super) {
                      __extends(Interpolates, _super);
                
                      function Interpolates() {
                        _ref2 = Interpolates.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      Interpolates.prototype.model = Interpolate;
                
                      return Interpolates;
                
                    })(Backbone.Collection);
                    return {
                      "Model": Interpolate,
                      "Collection": new Interpolates()
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=interpolate.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('transforms/interpolatecolor',["common/continuum_view", "backbone", "common/has_parent"], function(continuum_view, Backbone, HasParent) {
                    var InterpolateColor, InterpolateColorView, InterpolateColors, _ref, _ref1, _ref2;
                    InterpolateColorView = (function(_super) {
                      __extends(InterpolateColorView, _super);
                
                      function InterpolateColorView() {
                        _ref = InterpolateColorView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      InterpolateColorView.prototype.attributes = {
                        "class": "InterpolateColorView"
                      };
                
                      InterpolateColorView.prototype.initialize = function(options) {
                        InterpolateColorView.__super__.initialize.call(this, options);
                        return this.render_init();
                      };
                
                      InterpolateColorView.prototype.delegateEvents = function(events) {
                        InterpolateColorView.__super__.delegateEvents.call(this, events);
                        return "pass";
                      };
                
                      InterpolateColorView.prototype.render_init = function() {
                        return this.$el.html("");
                      };
                
                      return InterpolateColorView;
                
                    })(continuum_view.View);
                    InterpolateColor = (function(_super) {
                      __extends(InterpolateColor, _super);
                
                      function InterpolateColor() {
                        _ref1 = InterpolateColor.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      InterpolateColor.prototype.type = "InterpolateColor";
                
                      InterpolateColor.prototype.default_view = InterpolateColorView;
                
                      return InterpolateColor;
                
                    })(HasParent);
                    InterpolateColors = (function(_super) {
                      __extends(InterpolateColors, _super);
                
                      function InterpolateColors() {
                        _ref2 = InterpolateColors.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      InterpolateColors.prototype.model = InterpolateColor;
                
                      return InterpolateColors;
                
                    })(Backbone.Collection);
                    return {
                      "Model": InterpolateColor,
                      "Collection": new InterpolateColors()
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=interpolatecolor.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('transforms/seq',["common/continuum_view", "backbone", "common/has_parent"], function(continuum_view, Backbone, HasParent) {
                    var Seq, SeqView, Seqs, _ref, _ref1, _ref2;
                    SeqView = (function(_super) {
                      __extends(SeqView, _super);
                
                      function SeqView() {
                        _ref = SeqView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      SeqView.prototype.attributes = {
                        "class": "SeqView"
                      };
                
                      SeqView.prototype.initialize = function(options) {
                        SeqView.__super__.initialize.call(this, options);
                        return this.render_init();
                      };
                
                      SeqView.prototype.delegateEvents = function(events) {
                        SeqView.__super__.delegateEvents.call(this, events);
                        return "pass";
                      };
                
                      SeqView.prototype.render_init = function() {
                        return this.$el.html("");
                      };
                
                      return SeqView;
                
                    })(continuum_view.View);
                    Seq = (function(_super) {
                      __extends(Seq, _super);
                
                      function Seq() {
                        _ref1 = Seq.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      Seq.prototype.type = "Seq";
                
                      Seq.prototype.default_view = SeqView;
                
                      return Seq;
                
                    })(HasParent);
                    Seqs = (function(_super) {
                      __extends(Seqs, _super);
                
                      function Seqs() {
                        _ref2 = Seqs.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      Seqs.prototype.model = Seq;
                
                      return Seqs;
                
                    })(Backbone.Collection);
                    return {
                      "Model": Seq,
                      "Collection": new Seqs()
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=seq.js.map
                */;
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('transforms/spread',["common/continuum_view", "backbone", "common/has_parent"], function(continuum_view, Backbone, HasParent) {
                    var Spread, SpreadView, Spreads, _ref, _ref1, _ref2;
                    SpreadView = (function(_super) {
                      __extends(SpreadView, _super);
                
                      function SpreadView() {
                        _ref = SpreadView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      SpreadView.prototype.attributes = {
                        "class": "SpreadView"
                      };
                
                      SpreadView.prototype.initialize = function(options) {
                        SpreadView.__super__.initialize.call(this, options);
                        return this.render_init();
                      };
                
                      SpreadView.prototype.delegateEvents = function(events) {
                        SpreadView.__super__.delegateEvents.call(this, events);
                        return "pass";
                      };
                
                      SpreadView.prototype.render_init = function() {
                        return this.$el.html("");
                      };
                
                      return SpreadView;
                
                    })(continuum_view.View);
                    Spread = (function(_super) {
                      __extends(Spread, _super);
                
                      function Spread() {
                        _ref1 = Spread.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      Spread.prototype.type = "Spread";
                
                      Spread.prototype.default_view = SpreadView;
                
                      return Spread;
                
                    })(HasParent);
                    Spreads = (function(_super) {
                      __extends(Spreads, _super);
                
                      function Spreads() {
                        _ref2 = Spreads.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      Spreads.prototype.model = Spread;
                
                      return Spreads;
                
                    })(Backbone.Collection);
                    return {
                      "Model": Spread,
                      "Collection": new Spreads()
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=spread.js.map
                */;
                (function() {
                  define('common/base',["underscore", "require", "common/custom", "common/canvas", "common/cartesian_frame", "common/gmap_plot", "common/grid_plot", "common/layout_box", "common/plot", "common/plot_context", "mapper/categorical_mapper", "mapper/linear_mapper", "mapper/log_mapper", "mapper/grid_mapper", "mapper/linear_color_mapper", "range/data_factor_range", "range/data_range1d", "range/factor_range", "range/range1d", "renderer/annotation/legend", "renderer/glyph/glyph_factory", "renderer/guide/categorical_axis", "renderer/guide/datetime_axis", "renderer/guide/grid", "renderer/guide/linear_axis", "renderer/guide/log_axis", "renderer/overlay/box_selection", "source/column_data_source", "source/server_data_source", "ticking/abstract_ticker", "ticking/adaptive_ticker", "ticking/basic_tick_formatter", "ticking/basic_ticker", "ticking/log_ticker", "ticking/log_tick_formatter", "ticking/categorical_tick_formatter", "ticking/categorical_ticker", "ticking/composite_ticker", "ticking/datetime_tick_formatter", "ticking/datetime_ticker", "ticking/days_ticker", "ticking/months_ticker", "ticking/single_interval_ticker", "ticking/years_ticker", "tool/box_select_tool", "tool/box_zoom_tool", "tool/click_tool", "tool/crosshair_tool", "tool/data_range_box_select_tool", "tool/embed_tool", "tool/hover_tool", "tool/pan_tool", "tool/preview_save_tool", "tool/reset_tool", "tool/resize_tool", "tool/wheel_zoom_tool", "tool/object_explorer_tool", "widget/data_slider", "widget/data_table", "widget/handson_table", "widget/table_column", "widget/pivot_table", "widget/object_explorer", "widget/pandas/ipython_remote_data", "widget/pandas/pandas_pivot_table", "widget/pandas/pandas_plot_source", 'widget/paragraph', 'widget/hbox', 'widget/vbox', 'widget/textinput', 'widget/vboxmodelform', 'widget/vboxform', 'widget/pretext', 'widget/selectbox', 'widget/slider', 'widget/crossfilter', 'widget/multiselect', 'widget/date_range_slider', 'widget/date_picker', 'widget/panel', 'widget/tabs', 'widget/dialog', 'transforms/binarysegment', 'transforms/const', 'transforms/contour', 'transforms/count', 'transforms/cuberoot', 'transforms/id', 'transforms/interpolate', 'transforms/interpolatecolor', 'transforms/seq', 'transforms/spread'], function(_, require) {
                    var Collections, Config, collection_overrides, locations, mod_cache, url;
                    require("common/custom").monkey_patch();
                    Config = {};
                    url = window.location.href;
                    if (url.indexOf('/bokeh') > 0) {
                      Config.prefix = url.slice(0, url.indexOf('/bokeh')) + "/";
                    } else {
                      Config.prefix = '/';
                    }
                    console.log('setting prefix to', Config.prefix);
                    locations = {
                      Plot: 'common/plot',
                      GMapPlot: 'common/gmap_plot',
                      GridPlot: 'common/grid_plot',
                      PlotContext: 'common/plot_context',
                      PlotList: 'common/plot_context',
                      Canvas: 'common/canvas',
                      LayoutBox: 'common/layout_box',
                      CartesianFrame: 'common/cartesian_frame',
                      DataFactorRange: 'range/data_factor_range',
                      DataRange1d: 'range/data_range1d',
                      FactorRange: 'range/factor_range',
                      Range1d: 'range/range1d',
                      Glyph: 'renderer/glyph/glyph_factory',
                      LinearAxis: 'renderer/guide/linear_axis',
                      LogAxis: 'renderer/guide/log_axis',
                      CategoricalAxis: 'renderer/guide/categorical_axis',
                      DatetimeAxis: 'renderer/guide/datetime_axis',
                      Grid: 'renderer/guide/grid',
                      Legend: 'renderer/annotation/legend',
                      BoxSelection: 'renderer/overlay/box_selection',
                      ColumnDataSource: 'source/column_data_source',
                      ServerDataSource: 'source/server_data_source',
                      AbstractTicker: 'ticking/abstract_ticker',
                      AdaptiveTicker: 'ticking/adaptive_ticker',
                      BasicTicker: 'ticking/basic_ticker',
                      BasicTickFormatter: 'ticking/basic_tick_formatter',
                      LogTicker: 'ticking/log_ticker',
                      LogTickFormatter: 'ticking/log_tick_formatter',
                      CategoricalTicker: 'ticking/categorical_ticker',
                      CategoricalTickFormatter: 'ticking/categorical_tick_formatter',
                      CompositeTicker: 'ticking/composite_ticker',
                      DatetimeTicker: 'ticking/datetime_ticker',
                      DatetimeTickFormatter: 'ticking/datetime_tick_formatter',
                      DaysTicker: 'ticking/days_ticker',
                      MonthsTicker: 'ticking/months_ticker',
                      SingleIntervalTicker: 'ticking/single_interval_ticker',
                      YearsTicker: 'ticking/years_ticker',
                      PanTool: 'tool/pan_tool',
                      WheelZoomTool: 'tool/wheel_zoom_tool',
                      ResizeTool: 'tool/resize_tool',
                      ClickTool: 'tool/click_tool',
                      CrosshairTool: 'tool/crosshair_tool',
                      BoxSelectTool: 'tool/box_select_tool',
                      BoxZoomTool: 'tool/box_zoom_tool',
                      HoverTool: 'tool/hover_tool',
                      DataRangeBoxSelectTool: 'tool/data_range_box_select_tool',
                      PreviewSaveTool: 'tool/preview_save_tool',
                      EmbedTool: 'tool/embed_tool',
                      ResetTool: 'tool/reset_tool',
                      ObjectExplorerTool: 'tool/object_explorer_tool',
                      DataSlider: 'widget/data_slider',
                      DataTable: 'widget/data_table',
                      HandsonTable: 'widget/handson_table',
                      TableColumn: 'widget/table_column',
                      PivotTable: 'widget/pivot_table',
                      ObjectExplorer: 'widget/object_explorer',
                      IPythonRemoteData: 'widget/pandas/ipython_remote_data',
                      PandasPivotTable: 'widget/pandas/pandas_pivot_table',
                      PandasPlotSource: 'widget/pandas/pandas_plot_source',
                      Paragraph: 'widget/paragraph',
                      HBox: 'widget/hbox',
                      VBox: 'widget/vbox',
                      VBoxModelForm: 'widget/vboxmodelform',
                      VBoxForm: 'widget/vboxform',
                      TextInput: 'widget/textinput',
                      PreText: 'widget/pretext',
                      Select: 'widget/selectbox',
                      Slider: 'widget/slider',
                      CrossFilter: 'widget/crossfilter',
                      MultiSelect: 'widget/multiselect',
                      DateRangeSlider: 'widget/date_range_slider',
                      DatePicker: 'widget/date_picker',
                      Panel: 'widget/panel',
                      Tabs: 'widget/tabs',
                      Dialog: 'widget/dialog',
                      BinarySegment: 'transforms/binarysegment',
                      Const: 'transforms/const',
                      Contour: 'transforms/contour',
                      Count: 'transforms/count',
                      Cuberoot: 'transforms/cuberoot',
                      Id: 'transforms/id',
                      Interpolate: 'transforms/interpolate',
                      InterpolateColor: 'transforms/interpolatecolor',
                      Seq: 'transforms/seq',
                      Spread: 'transforms/spread'
                    };
                    mod_cache = {};
                    collection_overrides = {};
                    Collections = function(typename) {
                      var mod, modulename;
                      if (collection_overrides[typename]) {
                        return collection_overrides[typename];
                      }
                      if (!locations[typename]) {
                        throw "./base: Unknown Collection " + typename;
                      }
                      modulename = locations[typename];
                      if (mod_cache[modulename] == null) {
                        mod = require(modulename);
                        if (mod != null) {
                          mod_cache[modulename] = mod;
                        } else {
                          throw Error("improperly implemented collection: " + modulename);
                        }
                      }
                      return mod_cache[modulename].Collection;
                    };
                    Collections.register = function(name, collection) {
                      return collection_overrides[name] = collection;
                    };
                    return {
                      "collection_overrides": collection_overrides,
                      "mod_cache": mod_cache,
                      "locations": locations,
                      "Collections": Collections,
                      "Config": Config
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=base.js.map
                */;
                (function() {
                  define('common/plotting',["underscore", "jquery", "./plot", "range/data_range1d", "range/factor_range", "range/range1d", "renderer/annotation/legend", "renderer/glyph/glyph_factory", "renderer/guide/categorical_axis", "renderer/guide/linear_axis", "renderer/guide/grid", "renderer/overlay/box_selection", "source/column_data_source", "tool/box_select_tool", "tool/box_zoom_tool", "tool/hover_tool", "tool/pan_tool", "tool/preview_save_tool", "tool/resize_tool", "tool/wheel_zoom_tool", "tool/reset_tool", "renderer/guide/datetime_axis"], function(_, $, Plot, DataRange1d, FactorRange, Range1d, Legend, GlyphFactory, CategoricalAxis, LinearAxis, Grid, BoxSelection, ColumnDataSource, BoxSelectTool, BoxZoomTool, HoverTool, PanTool, PreviewSaveTool, ResizeTool, WheelZoomTool, ResetTool, DatetimeAxis) {
                    var add_axes, add_grids, add_legend, add_tools, create_glyphs, create_range, create_sources, make_plot, show;
                    create_sources = function(data) {
                      var d, sources, _i, _len;
                      if (!_.isArray(data)) {
                        data = [data];
                      }
                      sources = [];
                      for (_i = 0, _len = data.length; _i < _len; _i++) {
                        d = data[_i];
                        if (d instanceof ColumnDataSource.Model) {
                          sources.push(d);
                        } else {
                          sources.push(ColumnDataSource.Collection.create({
                            data: d
                          }));
                        }
                      }
                      return sources;
                    };
                    create_range = function(range, sources, columns) {
                      var s;
                      if (range === 'auto') {
                        return DataRange1d.Collection.create({
                          sources: (function() {
                            var _i, _len, _results;
                            _results = [];
                            for (_i = 0, _len = sources.length; _i < _len; _i++) {
                              s = sources[_i];
                              _results.push({
                                source: s,
                                columns: columns
                              });
                            }
                            return _results;
                          })()
                        });
                      } else if ((range instanceof Range1d.Model) || (range instanceof FactorRange.Model)) {
                        return range;
                      } else {
                        if (typeof range[0] === "string") {
                          return FactorRange.Collection.create({
                            factors: range
                          });
                        } else {
                          return Range1d.Collection.create({
                            start: range[0],
                            end: range[1]
                          });
                        }
                      }
                    };
                    create_glyphs = function(plot, glyphspecs, sources, nonselection_glyphspecs) {
                      var glyph, glyphs, non_spec, source, spec, val, x, _i, _len, _ref;
                      glyphs = [];
                      if (!_.isArray(glyphspecs)) {
                        glyphspecs = [glyphspecs];
                      }
                      if (sources.length === 1) {
                        sources = (function() {
                          var _i, _len, _results;
                          _results = [];
                          for (_i = 0, _len = glyphspecs.length; _i < _len; _i++) {
                            x = glyphspecs[_i];
                            _results.push(sources[0]);
                          }
                          return _results;
                        })();
                      }
                      if (nonselection_glyphspecs == null) {
                        nonselection_glyphspecs = {
                          fill_alpha: 0.1,
                          line_alpha: 0.1
                        };
                      }
                      if (!_.isArray(nonselection_glyphspecs)) {
                        nonselection_glyphspecs = (function() {
                          var _i, _len, _results;
                          _results = [];
                          for (_i = 0, _len = glyphspecs.length; _i < _len; _i++) {
                            x = glyphspecs[_i];
                            _results.push(nonselection_glyphspecs);
                          }
                          return _results;
                        })();
                      }
                      _ref = _.zip(glyphspecs, nonselection_glyphspecs, sources);
                      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
                        val = _ref[_i];
                        spec = val[0], non_spec = val[1], source = val[2];
                        glyph = GlyphFactory.Collection.create({
                          data_source: source,
                          glyphspec: spec,
                          nonselection_glyphspec: non_spec
                        });
                        glyphs.push(glyph);
                      }
                      return glyphs;
                    };
                    add_axes = function(plot, xaxes_spec, yaxes_spec, xdr, ydr) {
                      var a, above, axis, below, left, loc, right, xax, xaxes, yax, yaxes, _i, _j, _k, _l, _len, _len1, _len2, _len3, _len4, _len5, _m, _n;
                      xaxes = [];
                      if (xaxes_spec) {
                        if (xaxes_spec === true) {
                          xaxes_spec = ['below', 'above'];
                        }
                        if (!_.isArray(xaxes_spec)) {
                          xaxes_spec = [xaxes_spec];
                        }
                        if (xaxes_spec[0] === "datetime") {
                          axis = DatetimeAxis.Collection.create({
                            axis_label: 'x',
                            location: 'below',
                            plot: plot
                          });
                          xaxes.push(axis);
                        } else if (xdr.type === "FactorRange") {
                          for (_i = 0, _len = xaxes_spec.length; _i < _len; _i++) {
                            loc = xaxes_spec[_i];
                            axis = CategoricalAxis.Collection.create({
                              axis_label: 'x',
                              location: loc,
                              plot: plot
                            });
                            xaxes.push(axis);
                          }
                        } else {
                          for (_j = 0, _len1 = xaxes_spec.length; _j < _len1; _j++) {
                            loc = xaxes_spec[_j];
                            axis = LinearAxis.Collection.create({
                              axis_label: 'x',
                              location: loc,
                              plot: plot
                            });
                            xaxes.push(axis);
                          }
                        }
                        for (_k = 0, _len2 = xaxes.length; _k < _len2; _k++) {
                          xax = xaxes[_k];
                          if (xax.get('location') === "below") {
                            below = plot.get('below');
                            below.push(xax);
                            plot.set('below', below);
                          } else if (xax.get('location') === "above") {
                            above = plot.get('above');
                            above.push(xax);
                            plot.set('above', above);
                          }
                        }
                      }
                      yaxes = [];
                      if (yaxes_spec) {
                        if (yaxes_spec === true) {
                          yaxes_spec = ['left', 'right'];
                        }
                        if (!_.isArray(yaxes_spec)) {
                          yaxes_spec = [yaxes_spec];
                        }
                        if (yaxes_spec[0] === "datetime") {
                          axis = DatetimeAxis.Collection.create({
                            axis_label: 'y',
                            location: 'left',
                            plot: plot
                          });
                          yaxes.push(axis);
                        } else if (ydr.type === "FactorRange") {
                          for (_l = 0, _len3 = yaxes_spec.length; _l < _len3; _l++) {
                            loc = yaxes_spec[_l];
                            axis = CategoricalAxis.Collection.create({
                              axis_label: 'y',
                              location: loc,
                              plot: plot
                            });
                            yaxes.push(axis);
                          }
                        } else {
                          for (_m = 0, _len4 = yaxes_spec.length; _m < _len4; _m++) {
                            loc = yaxes_spec[_m];
                            axis = LinearAxis.Collection.create({
                              axis_label: 'y',
                              location: loc,
                              plot: plot
                            });
                            yaxes.push(axis);
                          }
                        }
                        for (_n = 0, _len5 = yaxes.length; _n < _len5; _n++) {
                          yax = yaxes[_n];
                          if (yax.get('location') === "left") {
                            left = plot.get('left');
                            left.push(yax);
                            plot.set('left', left);
                          } else if (yax.get('location') === "right") {
                            right = plot.get('right');
                            right.push(yax);
                            plot.set('right', right);
                          }
                        }
                      }
                      plot.add_renderers((function() {
                        var _len6, _o, _results;
                        _results = [];
                        for (_o = 0, _len6 = xaxes.length; _o < _len6; _o++) {
                          a = xaxes[_o];
                          _results.push(a);
                        }
                        return _results;
                      })());
                      plot.add_renderers((function() {
                        var _len6, _o, _results;
                        _results = [];
                        for (_o = 0, _len6 = yaxes.length; _o < _len6; _o++) {
                          a = yaxes[_o];
                          _results.push(a);
                        }
                        return _results;
                      })());
                      return [xaxes, yaxes];
                    };
                    add_grids = function(plot, xgrid, ygrid, xaxes, yaxes) {
                      var g, grid, grids;
                      grids = [];
                      if (xgrid && xaxes.length > 0) {
                        grid = Grid.Collection.create({
                          dimension: 0,
                          plot: plot,
                          ticker: xaxes[0].get('ticker')
                        });
                        grids.push(grid);
                      }
                      if (ygrid && yaxes.length > 0) {
                        grid = Grid.Collection.create({
                          dimension: 1,
                          plot: plot,
                          ticker: yaxes[0].get('ticker')
                        });
                        grids.push(grid);
                        return plot.add_renderers((function() {
                          var _i, _len, _results;
                          _results = [];
                          for (_i = 0, _len = grids.length; _i < _len; _i++) {
                            g = grids[_i];
                            _results.push(g);
                          }
                          return _results;
                        })());
                      }
                    };
                    add_tools = function(plot, tools, glyphs, xdr, ydr) {
                      var added_tools, box_zoom_overlay, box_zoom_tool, g, hover_tool, pan_tool, preview_tool, reset_tool, resize_tool, select_overlay, select_tool, wheel_zoom_tool;
                      if (tools === false) {
                        return;
                      }
                      if (tools === true) {
                        tools = "pan,wheel_zoom,select,resize,preview,reset,box_zoom";
                      }
                      added_tools = [];
                      if (tools.indexOf("pan") > -1) {
                        pan_tool = PanTool.Collection.create({
                          dataranges: [xdr, ydr],
                          dimensions: ['width', 'height']
                        });
                        added_tools.push(pan_tool);
                      }
                      if (tools.indexOf("wheel_zoom") > -1) {
                        wheel_zoom_tool = WheelZoomTool.Collection.create({
                          dataranges: [xdr, ydr],
                          dimensions: ['width', 'height']
                        });
                        added_tools.push(wheel_zoom_tool);
                      }
                      if (tools.indexOf("hover") > -1) {
                        hover_tool = HoverTool.Collection.create({
                          plot: plot
                        });
                        added_tools.push(hover_tool);
                      }
                      if (tools.indexOf("select") > -1) {
                        select_tool = BoxSelectTool.Collection.create({
                          renderers: (function() {
                            var _i, _len, _results;
                            _results = [];
                            for (_i = 0, _len = glyphs.length; _i < _len; _i++) {
                              g = glyphs[_i];
                              _results.push(g);
                            }
                            return _results;
                          })()
                        });
                        select_overlay = BoxSelection.Collection.create({
                          tool: select_tool
                        });
                        added_tools.push(select_tool);
                        plot.add_renderers([select_overlay]);
                      }
                      if (tools.indexOf("resize") > -1) {
                        resize_tool = ResizeTool.Collection.create();
                        added_tools.push(resize_tool);
                      }
                      if (tools.indexOf("preview") > -1) {
                        preview_tool = PreviewSaveTool.Collection.create();
                        added_tools.push(preview_tool);
                      }
                      if (tools.indexOf("reset") > -1) {
                        reset_tool = ResetTool.Collection.create();
                        added_tools.push(reset_tool);
                      }
                      if (tools.indexOf("box_zoom") > -1) {
                        box_zoom_tool = BoxZoomTool.Collection.create();
                        box_zoom_overlay = BoxSelection.Collection.create({
                          tool: box_zoom_tool
                        });
                        added_tools.push(box_zoom_tool);
                        plot.add_renderers([box_zoom_overlay]);
                      }
                      return plot.set_obj('tools', added_tools);
                    };
                    add_legend = function(plot, legend, glyphs) {
                      var g, idx, legend_renderer, legends, _i, _len;
                      if (legend) {
                        legends = {};
                        for (idx = _i = 0, _len = glyphs.length; _i < _len; idx = ++_i) {
                          g = glyphs[idx];
                          legends[legend + String(idx)] = [g];
                        }
                        legend_renderer = Legend.Collection.create({
                          plot: plot,
                          orientation: "top_right",
                          legends: legends
                        });
                        return plot.add_renderers([legend_renderer]);
                      }
                    };
                    make_plot = function(glyphspecs, data, _arg) {
                      var dims, g, glyphs, legend, nonselected, plot, sources, title, tools, xaxes, xdr, xgrid, xrange, yaxes, ydr, ygrid, yrange, _ref;
                      nonselected = _arg.nonselected, title = _arg.title, dims = _arg.dims, xrange = _arg.xrange, yrange = _arg.yrange, xaxes = _arg.xaxes, yaxes = _arg.yaxes, xgrid = _arg.xgrid, ygrid = _arg.ygrid, xdr = _arg.xdr, ydr = _arg.ydr, tools = _arg.tools, legend = _arg.legend;
                      if (nonselected == null) {
                        nonselected = null;
                      }
                      if (title == null) {
                        title = "";
                      }
                      if (dims == null) {
                        dims = [400, 400];
                      }
                      if (xrange == null) {
                        xrange = 'auto';
                      }
                      if (yrange == null) {
                        yrange = 'auto';
                      }
                      if (xaxes == null) {
                        xaxes = true;
                      }
                      if (yaxes == null) {
                        yaxes = true;
                      }
                      if (xgrid == null) {
                        xgrid = true;
                      }
                      if (ygrid == null) {
                        ygrid = true;
                      }
                      if (tools == null) {
                        tools = true;
                      }
                      if (legend == null) {
                        legend = false;
                      }
                      sources = create_sources(data);
                      xdr = create_range(xrange, sources, ['x']);
                      ydr = create_range(yrange, sources, ['y']);
                      plot = Plot.Collection.create({
                        x_range: xdr,
                        y_range: ydr,
                        plot_width: dims[0],
                        plot_height: dims[1],
                        title: title
                      });
                      glyphs = create_glyphs(plot, glyphspecs, sources, nonselected);
                      plot.add_renderers((function() {
                        var _i, _len, _results;
                        _results = [];
                        for (_i = 0, _len = glyphs.length; _i < _len; _i++) {
                          g = glyphs[_i];
                          _results.push(g);
                        }
                        return _results;
                      })());
                      _ref = add_axes(plot, xaxes, yaxes, xdr, ydr), xaxes = _ref[0], yaxes = _ref[1];
                      add_grids(plot, xgrid, ygrid, xaxes, yaxes);
                      add_tools(plot, tools, glyphs, xdr, ydr);
                      add_legend(plot, legend, glyphs);
                      return plot;
                    };
                    show = function(plot, target_div) {
                      var div, myrender;
                      if (target_div == null) {
                        target_div = false;
                      }
                      div = $('<div class="plotdiv"></div>');
                      if (target_div) {
                        target_div = $(target_div);
                      } else {
                        target_div = $('body');
                      }
                      target_div.append(div);
                      myrender = function() {
                        var view;
                        view = new plot.default_view({
                          model: plot
                        });
                        window.pview = view;
                        div.append(view.$el);
                        return console.log("added plot: " + plot.get('title'));
                      };
                      return _.defer(myrender);
                    };
                    return {
                      "make_plot": make_plot,
                      "create_glyphs": create_glyphs,
                      "show": show
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=plotting.js.map
                */;
                (function() {
                  define('common/affine',[], function() {
                    var Affine;
                    return Affine = (function() {
                      function Affine(a, b, c, d, tx, ty) {
                        this.a = a != null ? a : 1;
                        this.b = b != null ? b : 0;
                        this.c = c != null ? c : 0;
                        this.d = d != null ? d : 1;
                        this.tx = tx != null ? tx : 0;
                        this.ty = ty != null ? ty : 0;
                      }
                
                      Affine.prototype.apply = function(x, y) {
                        return [this.a * x + this.b * y + this.tx, this.c * x + this.d * y + this.ty];
                      };
                
                      Affine.prototype.v_apply = function(xs, ys) {
                        var i, xres, yres, _i, _ref;
                        xres = new Float32Array(xs.length);
                        yres = new Float32Array(ys.length);
                        for (i = _i = 0, _ref = xs.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {
                          xres[i] = this.a * xs[i] + this.b * ys[i] + this.tx;
                          yres[i] = this.c * xs[i] + this.d * ys[i] + this.ty;
                        }
                        return [xres, yres];
                      };
                
                      Affine.prototype.is_identity = function() {
                        return this.a === 1 && this.b === 0 && this.c === 0 && this.d === 1 && this.tx === 0 && this.ty === 0;
                      };
                
                      Affine.prototype.translate = function(tx, ty) {
                        this.tx = this.a * tx + this.b * ty;
                        return this.ty = this.c * tx + this.d * ty;
                      };
                
                      Affine.prototype.scale = function(sx, sy) {
                        this.a *= sx;
                        this.b *= sy;
                        this.c *= sx;
                        return this.d *= sy;
                      };
                
                      Affine.prototype.rotate = function(alpha) {
                        var C, S, a, b, c, d;
                        C = Math.cos(alpha);
                        S = Math.sin(alpha);
                        a = C * this.a + S * this.b;
                        b = C * this.b - S * this.a;
                        c = C * this.c + S * this.d;
                        d = C * this.d - S * this.c;
                        this.a = a;
                        this.b = b;
                        this.c = c;
                        return this.d = d;
                      };
                
                      Affine.prototype.shear = function(kx, ky) {
                        var a, b, c, d;
                        a = this.a + kx * this.c;
                        b = this.b + kx * this.d;
                        c = this.c + ky * this.a;
                        d = this.d + ky * this.b;
                        this.a = a;
                        this.b = b;
                        this.c = c;
                        return this.d = d;
                      };
                
                      Affine.prototype.reflect_x = function(x0) {
                        this.tx = 2 * this.a * x0 + this.tx;
                        this.ty = 2 * this.c * x0 + this.ty;
                        this.a = -this.a;
                        return this.c = -this.c;
                      };
                
                      Affine.prototype.reflect_y = function(y0) {
                        this.tx = 2 * this.b * y0 + this.tx;
                        this.ty = 2 * this.d * y0 + this.ty;
                        this.b = -this.b;
                        return this.d = -this.d;
                      };
                
                      Affine.prototype.reflect_xy = function(x0, y0) {
                        this.tx = 2 * (this.a * x0 + this.b * y0) + this.tx;
                        this.ty = 2 * (this.c * x0 + this.d * y0) + this.ty;
                        this.a = -this.a;
                        this.b = -this.b;
                        this.c = -this.c;
                        return this.d = -this.d;
                      };
                
                      Affine.prototype.compose_right = function(m) {
                        var a, b, c, d, tx, ty;
                        a = this.a * m.a + this.b * m.c;
                        b = this.a * m.b + this.b * m.d;
                        c = this.c * m.a + this.d * m.c;
                        d = this.c * m.b + this.d * m.d;
                        tx = this.a * m.tx + this.b * m.ty + this.tx;
                        ty = this.c * m.tx + this.d * m.ty + this.ty;
                        this.a = a;
                        this.b = b;
                        this.c = c;
                        this.d = d;
                        this.tx = tx;
                        return this.ty = ty;
                      };
                
                      Affine.prototype.compose_left = function(m) {
                        var a, b, c, d, tx, ty;
                        a = m.a * this.a + m.b * this.c;
                        b = m.a * this.b + m.b * this.d;
                        c = m.c * this.a + m.d * this.c;
                        d = m.c * this.b + m.d * this.d;
                        tx = m.a * this.tx + m.b * this.ty + m.tx;
                        ty = m.c * this.tx + m.d * this.ty + m.ty;
                        this.a = a;
                        this.b = b;
                        this.c = c;
                        this.d = d;
                        this.tx = tx;
                        return this.ty = ty;
                      };
                
                      return Affine;
                
                    })();
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=affine.js.map
                */;
                (function() {
                  define('common/random',[], function() {
                    var Random;
                    return Random = (function() {
                      function Random(seed) {
                        this.seed = seed;
                        this.multiplier = 1664525;
                        this.modulo = 4294967296;
                        this.offset = 1013904223;
                        if (!((this.seed != null) && (0 <= seed && seed < this.modulo))) {
                          this.seed = (new Date().valueOf() * new Date().getMilliseconds()) % this.modulo;
                        }
                      }
                
                      Random.prototype.seed = function(seed) {
                        return this.seed = seed;
                      };
                
                      Random.prototype.randn = function() {
                        return this.seed = (this.multiplier * this.seed + this.offset) % this.modulo;
                      };
                
                      Random.prototype.randf = function() {
                        return this.randn() / this.modulo;
                      };
                
                      Random.prototype.rand = function(n) {
                        return Math.floor(this.randf() * n);
                      };
                
                      Random.prototype.rand2 = function(min, max) {
                        return min + this.rand(max - min);
                      };
                
                      return Random;
                
                    })();
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=random.js.map
                */;
                (function() {
                  var __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };
                
                  define('common/socket',["backbone", "underscore", "common/base", "common/load_models"], function(Backbone, _, base, load_models) {
                    var Config, WebSocketWrapper, result, submodels;
                    Config = base.Config;
                    WebSocketWrapper = (function() {
                      _.extend(WebSocketWrapper.prototype, Backbone.Events);
                
                      function WebSocketWrapper(ws_conn_string) {
                        this.onmessage = __bind(this.onmessage, this);
                        var _this = this;
                        this.auth = {};
                        this.ws_conn_string = ws_conn_string;
                        this._connected = $.Deferred();
                        this.connected = this._connected.promise();
                        if (window.MozWebSocket) {
                          this.s = new MozWebSocket(ws_conn_string);
                        } else {
                          this.s = new WebSocket(ws_conn_string);
                        }
                        this.s.onopen = function() {
                          return _this._connected.resolve();
                        };
                        this.s.onmessage = this.onmessage;
                      }
                
                      WebSocketWrapper.prototype.onmessage = function(msg) {
                        var data, index, topic;
                        data = msg.data;
                        index = data.indexOf(":");
                        index = data.indexOf(":", index + 1);
                        topic = data.substring(0, index);
                        data = data.substring(index + 1);
                        this.trigger("msg:" + topic, data);
                        return null;
                      };
                
                      WebSocketWrapper.prototype.send = function(msg) {
                        var _this = this;
                        return $.when(this.connected).done(function() {
                          return _this.s.send(msg);
                        });
                      };
                
                      WebSocketWrapper.prototype.subscribe = function(topic, auth) {
                        var msg;
                        this.auth[topic] = auth;
                        msg = JSON.stringify({
                          msgtype: 'subscribe',
                          topic: topic,
                          auth: auth
                        });
                        return this.send(msg);
                      };
                
                      return WebSocketWrapper;
                
                    })();
                    submodels = function(wswrapper, topic, apikey) {
                      wswrapper.subscribe(topic, apikey);
                      return wswrapper.on("msg:" + topic, function(msg) {
                        var clientid, model, msgobj, ref, _i, _len, _ref;
                        msgobj = JSON.parse(msg);
                        if (msgobj['msgtype'] === 'modelpush') {
                          load_models(msgobj['modelspecs']);
                        } else if (msgobj['msgtype'] === 'modeldel') {
                          _ref = msgobj['modelspecs'];
                          for (_i = 0, _len = _ref.length; _i < _len; _i++) {
                            ref = _ref[_i];
                            model = resolve_ref(ref['type'], ref['id']);
                            if (model) {
                              model.destroy({
                                'local': true
                              });
                            }
                          }
                        } else if (msgobj['msgtype'] === 'status' && msgobj['status'][0] === 'subscribesuccess') {
                          clientid = msgobj['status'][2];
                          Config.clientid = clientid;
                          $.ajaxSetup({
                            'headers': {
                              'Continuum-Clientid': clientid
                            }
                          });
                        } else {
                          console.log(msgobj);
                        }
                        return null;
                      });
                    };
                    result = {
                      WebSocketWrapper: WebSocketWrapper,
                      submodels: submodels
                    };
                    return result;
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=socket.js.map
                */;
                (function() {
                  define('server/serverutils',["common/base", "common/socket", "common/load_models", "backbone", "common/has_properties"], function(base, socket, load_models, Backbone, HasProperties) {
                    var Deferreds, Promises, WebSocketWrapper, exports, submodels, utility;
                    Deferreds = {};
                    Promises = {};
                    exports = {};
                    WebSocketWrapper = socket.WebSocketWrapper;
                    submodels = socket.submodels;
                    Deferreds._doc_loaded = $.Deferred();
                    Deferreds._doc_requested = $.Deferred();
                    Promises.doc_loaded = Deferreds._doc_loaded.promise();
                    Promises.doc_requested = Deferreds._doc_requested.promise();
                    Promises.doc_promises = {};
                    exports.wswrapper = null;
                    exports.plotcontext = null;
                    exports.plotcontextview = null;
                    exports.Promises = Promises;
                    utility = {
                      load_one_object_chain: function(docid, objid) {
                        var Config, resp, url;
                        if (exports.wswrapper == null) {
                          utility.make_websocket();
                          HasProperties.prototype.sync = Backbone.sync;
                        }
                        Config = require("common/base").Config;
                        url = "" + Config.prefix + "bokeh/objinfo/" + docid + "/" + objid;
                        console.log(url);
                        resp = $.get(url);
                        resp.done(function(data) {
                          var all_models, apikey;
                          all_models = data['all_models'];
                          load_models(all_models);
                          apikey = data['apikey'];
                          return submodels(exports.wswrapper, "bokehplot:" + docid, apikey);
                        });
                        return resp;
                      },
                      load_user: function() {
                        var response;
                        response = $.get('/bokeh/userinfo/', {});
                        return response;
                      },
                      load_doc_once: function(docid) {
                        var doc_prom;
                        if (_.has(Promises.doc_promises, docid)) {
                          console.log("already found " + docid + " in promises");
                          return Promises.doc_promises[docid];
                        } else {
                          console.log("" + docid + " not in promises, loading it");
                          doc_prom = utility.load_doc(docid);
                          Promises.doc_promises[docid] = doc_prom;
                          return doc_prom;
                        }
                      },
                      load_doc_by_title: function(title) {
                        var Config, response;
                        Config = require("common/base").Config;
                        response = $.get(Config.prefix + "bokeh/doc", {
                          title: title
                        }).done(function(data) {
                          var all_models, apikey, docid;
                          all_models = data['all_models'];
                          load_models(all_models);
                          apikey = data['apikey'];
                          docid = data['docid'];
                          return submodels(exports.wswrapper, "bokehplot:" + docid, apikey);
                        });
                        return response;
                      },
                      load_doc_static: function(docid, data) {
                        " loads data without making a websocket connection ";
                        var promise;
                        load_data(data['all_models']);
                        promise = jQuery.Deferred();
                        promise.resolve();
                        return promise;
                      },
                      load_doc: function(docid) {
                        var Config, response, wswrapper;
                        wswrapper = utility.make_websocket();
                        Config = require("common/base").Config;
                        response = $.get(Config.prefix + ("bokeh/bokehinfo/" + docid + "/"), {}).done(function(data) {
                          var all_models, apikey;
                          all_models = data['all_models'];
                          load_models(all_models);
                          apikey = data['apikey'];
                          return submodels(exports.wswrapper, "bokehplot:" + docid, apikey);
                        });
                        return response;
                      },
                      make_websocket: function() {
                        var Config, wswrapper;
                        Config = require("common/base").Config;
                        wswrapper = new WebSocketWrapper(Config.ws_conn_string);
                        exports.wswrapper = wswrapper;
                        return wswrapper;
                      },
                      render_plots: function(plot_context_ref, viewclass, viewoptions) {
                        var Collections, options, plotcontext, plotcontextview;
                        if (viewclass == null) {
                          viewclass = null;
                        }
                        if (viewoptions == null) {
                          viewoptions = {};
                        }
                        Collections = require("common/base").Collections;
                        plotcontext = Collections(plot_context_ref.type).get(plot_context_ref.id);
                        if (!viewclass) {
                          viewclass = plotcontext.default_view;
                        }
                        options = _.extend(viewoptions, {
                          model: plotcontext
                        });
                        plotcontextview = new viewclass(options);
                        plotcontext = plotcontext;
                        plotcontextview = plotcontextview;
                        plotcontextview.render();
                        exports.plotcontext = plotcontext;
                        return exports.plotcontextview = plotcontextview;
                      },
                      bokeh_connection: function(host, docid, protocol) {
                        if (_.isUndefined(protocol)) {
                          protocol = "https";
                        }
                        if (Promises.doc_requested.state() === "pending") {
                          Deferreds._doc_requested.resolve();
                          return $.get("" + protocol + "://" + host + "/bokeh/publicbokehinfo/" + docid, {}, function(data) {
                            console.log('instatiate_doc_single, docid', docid);
                            data = JSON.parse(data);
                            load_models(data['all_models']);
                            return Deferreds._doc_loaded.resolve(data);
                          });
                        }
                      }
                    };
                    exports.utility = utility;
                    return exports;
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=serverutils.js.map
                */;
                (function() {
                  define('server/embed',["jquery", "common/base", "common/load_models", "server/serverutils"], function($, base, load_models, serverutils) {
                    var add_plot_server, add_plot_static, inject_css, inject_plot;
                    inject_css = function(url) {
                      var link;
                      link = $("<link href='" + url + "' rel='stylesheet' type='text/css'>");
                      return $('body').append(link);
                    };
                    add_plot_static = function(element, info, all_models) {
                      var model, modelid, modeltype, view;
                      modelid = info['bokehModelid'];
                      load_models(all_models);
                      modeltype = info['bokehModeltype'];
                      model = base.Collections(modeltype).get(modelid);
                      view = new model.default_view({
                        model: model
                      });
                      return _.delay(function() {
                        return $(element).replaceWith(view.$el);
                      });
                    };
                    add_plot_server = function(element, info) {
                      var resp;
                      resp = serverutils.utility.load_one_object_chain(info["bokehDocid"], info["bokehModelid"]);
                      return resp.done(function(data) {
                        var model, view;
                        model = base.Collections(info["bokehModeltype"]).get(info["bokehModelid"]);
                        view = new model.default_view({
                          model: model
                        });
                        return _.delay(function() {
                          return $(element).replaceWith(view.$el);
                        });
                      });
                    };
                    inject_plot = function(element_id, all_models) {
                      var container, info, script;
                      console.log("Injecting plot for script tag with id: #" + element_id);
                      script = $("#" + element_id);
                      if (script.length === 0) {
                        throw "Error injecting plot: could not find script tag with id: " + element_id;
                      }
                      if (script.length > 1) {
                        throw "Error injecting plot: found too many script tags with id: " + element_id;
                      }
                      if (!document.body.contains(script[0])) {
                        throw "Error injecting plot: autoload script tag may only be under <body>";
                      }
                      info = script.data();
                      base.Config.ws_conn_string = info['bokehConnString'];
                      base.Config.prefix = info['bokehRootUrl'];
                      container = $('<div>', {
                        "class": 'bokeh-container'
                      });
                      container.insertBefore(script);
                      if (info.bokehData === "static") {
                        console.log(" - using static data");
                        return add_plot_static(container, info, all_models);
                      } else if (info.bokehData === "server") {
                        console.log(" - using server data");
                        return add_plot_server(container, info);
                      } else {
                        throw "Unknown bokehData value for inject_plot: " + info.bokehData;
                      }
                    };
                    return {
                      "inject_plot": inject_plot,
                      "add_plot_server": add_plot_server,
                      "add_plot_static": add_plot_static,
                      "inject_css": inject_css
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=embed.js.map
                */;
                define('server/usercontext/userdocstemplate',[],function(){
                  var template = function(__obj) {
                  var _safe = function(value) {
                    if (typeof value === 'undefined' && value == null)
                      value = '';
                    var result = new String(value);
                    result.ecoSafe = true;
                    return result;
                  };
                  return (function() {
                    var __out = [], __self = this, _print = function(value) {
                      if (typeof value !== 'undefined' && value != null)
                        __out.push(value.ecoSafe ? value : __self.escape(value));
                    }, _capture = function(callback) {
                      var out = __out, result;
                      __out = [];
                      callback.call(this);
                      result = __out.join('');
                      __out = out;
                      return _safe(result);
                    };
                    (function() {
                      _print(_safe('<div class="accordion">\n</div>\n'));
                    
                    }).call(this);
                    
                    return __out.join('');
                  }).call((function() {
                    var obj = {
                      escape: function(value) {
                        return ('' + value)
                          .replace(/&/g, '&amp;')
                          .replace(/</g, '&lt;')
                          .replace(/>/g, '&gt;')
                          .replace(/"/g, '&quot;');
                      },
                      safe: _safe
                    }, key;
                    for (key in __obj) obj[key] = __obj[key];
                    return obj;
                  })());
                };
                  return template;
                });
                
                define('server/usercontext/documentationtemplate',[],function(){
                  var template = function(__obj) {
                  var _safe = function(value) {
                    if (typeof value === 'undefined' && value == null)
                      value = '';
                    var result = new String(value);
                    result.ecoSafe = true;
                    return result;
                  };
                  return (function() {
                    var __out = [], __self = this, _print = function(value) {
                      if (typeof value !== 'undefined' && value != null)
                        __out.push(value.ecoSafe ? value : __self.escape(value));
                    }, _capture = function(callback) {
                      var out = __out, result;
                      __out = [];
                      callback.call(this);
                      result = __out.join('');
                      __out = out;
                      return _safe(result);
                    };
                    (function() {
                      _print(_safe('<p>\n  <b>\n    You have no Plots. Follow the instructions below to create some.\n  </b>\n</p>\n'));
                    
                    }).call(this);
                    
                    return __out.join('');
                  }).call((function() {
                    var obj = {
                      escape: function(value) {
                        return ('' + value)
                          .replace(/&/g, '&amp;')
                          .replace(/</g, '&lt;')
                          .replace(/>/g, '&gt;')
                          .replace(/"/g, '&quot;');
                      },
                      safe: _safe
                    }, key;
                    for (key in __obj) obj[key] = __obj[key];
                    return obj;
                  })());
                };
                  return template;
                });
                
                define('server/usercontext/wrappertemplate',[],function(){
                  var template = function(__obj) {
                  var _safe = function(value) {
                    if (typeof value === 'undefined' && value == null)
                      value = '';
                    var result = new String(value);
                    result.ecoSafe = true;
                    return result;
                  };
                  return (function() {
                    var __out = [], __self = this, _print = function(value) {
                      if (typeof value !== 'undefined' && value != null)
                        __out.push(value.ecoSafe ? value : __self.escape(value));
                    }, _capture = function(callback) {
                      var out = __out, result;
                      __out = [];
                      callback.call(this);
                      result = __out.join('');
                      __out = out;
                      return _safe(result);
                    };
                    (function() {
                      _print(_safe('<div class="panel panel-default">\n  <div class="panel-heading">\n    <h4 class="panel-title">\n      <a class="bokehdoclabel" href="#'));
                    
                      _print(this.bodyid);
                    
                      _print(_safe('" data-toggle="collapse">\n        Document: '));
                    
                      _print(this.model.get('title'));
                    
                      _print(_safe(' <span class="bokehdelete glyphicon glyphicon-trash"></i>\n      </a>\n    </h4>\n  </div>\n  <div id="'));
                    
                      _print(this.bodyid);
                    
                      _print(_safe('" class="panel-collapse collapse">\n    <div class="panel-body plots"></div>\n  </div>\n</div>\n'));
                    
                    }).call(this);
                    
                    return __out.join('');
                  }).call((function() {
                    var obj = {
                      escape: function(value) {
                        return ('' + value)
                          .replace(/&/g, '&amp;')
                          .replace(/</g, '&lt;')
                          .replace(/>/g, '&gt;')
                          .replace(/"/g, '&quot;');
                      },
                      safe: _safe
                    }, key;
                    for (key in __obj) obj[key] = __obj[key];
                    return obj;
                  })());
                };
                  return template;
                });
                
                (function() {
                  var __hasProp = {}.hasOwnProperty,
                    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };
                
                  define('server/usercontext/usercontext',["underscore", "jquery", "common/base", "../serverutils", "common/continuum_view", "./userdocstemplate", "./documentationtemplate", "./wrappertemplate", "common/has_parent", "common/build_views", "common/load_models"], function(_, $, base, serverutils, continuum_view, userdocstemplate, documentationtemplate, wrappertemplate, HasParent, build_views, load_models) {
                    var ContinuumView, Doc, DocView, UserDocs, UserDocsView, exports, utility, _ref, _ref1, _ref2, _ref3;
                    exports = {};
                    ContinuumView = continuum_view.View;
                    utility = serverutils.utility;
                    DocView = (function(_super) {
                      __extends(DocView, _super);
                
                      function DocView() {
                        _ref = DocView.__super__.constructor.apply(this, arguments);
                        return _ref;
                      }
                
                      DocView.prototype.template = wrappertemplate;
                
                      DocView.prototype.attributes = {
                        "class": 'panel-group'
                      };
                
                      DocView.prototype.events = {
                        "click .bokehdoclabel": "loaddoc",
                        "click .bokehdelete": "deldoc"
                      };
                
                      DocView.prototype.deldoc = function(e) {
                        e.preventDefault();
                        this.model.destroy();
                        return false;
                      };
                
                      DocView.prototype.loaddoc = function() {
                        return this.model.load();
                      };
                
                      DocView.prototype.initialize = function(options) {
                        DocView.__super__.initialize.call(this, options);
                        return this.render_init();
                      };
                
                      DocView.prototype.delegateEvents = function(events) {
                        DocView.__super__.delegateEvents.call(this, events);
                        return this.listenTo(this.model, 'loaded', this.render);
                      };
                
                      DocView.prototype.render_init = function() {
                        var html;
                        html = this.template({
                          model: this.model,
                          bodyid: _.uniqueId()
                        });
                        return this.$el.html(html);
                      };
                
                      DocView.prototype.render = function() {
                        var plot_context;
                        plot_context = this.model.get('plot_context');
                        this.plot_context_view = new plot_context.default_view({
                          model: plot_context
                        });
                        this.$el.find('.plots').append(this.plot_context_view.el);
                        return true;
                      };
                
                      return DocView;
                
                    })(ContinuumView);
                    UserDocsView = (function(_super) {
                      __extends(UserDocsView, _super);
                
                      function UserDocsView() {
                        _ref1 = UserDocsView.__super__.constructor.apply(this, arguments);
                        return _ref1;
                      }
                
                      UserDocsView.prototype.initialize = function(options) {
                        this.docs = options.docs;
                        this.collection = options.collection;
                        this.views = {};
                        UserDocsView.__super__.initialize.call(this, options);
                        return this.render();
                      };
                
                      UserDocsView.prototype.attributes = {
                        "class": 'usercontext'
                      };
                
                      UserDocsView.prototype.events = {
                        'click .bokehrefresh': function() {
                          return this.collection.fetch({
                            update: true
                          });
                        }
                      };
                
                      UserDocsView.prototype.delegateEvents = function(events) {
                        var _this = this;
                        UserDocsView.__super__.delegateEvents.call(this, events);
                        this.listenTo(this.collection, 'add', this.render);
                        this.listenTo(this.collection, 'remove', this.render);
                        this.listenTo(this.collection, 'add', function(model, collection, options) {
                          return _this.listenTo(model, 'loaded', function() {
                            return _this.listenTo(model.get('plot_context'), 'change', function() {
                              return _this.trigger('show');
                            });
                          });
                        });
                        return this.listenTo(this.collection, 'remove', function(model, collection, options) {
                          return _this.stopListening(model);
                        });
                      };
                
                      UserDocsView.prototype.render_docs = function() {
                        this.$el.html(documentationtemplate());
                        return this.$el.append(this.docs);
                      };
                
                      UserDocsView.prototype.render = function() {
                        var html, model, models, _i, _len;
                        if (this.collection.models.length === 0 && this.docs) {
                          return this.render_docs();
                        }
                        html = userdocstemplate();
                        _.map(_.values(this.views), function(view) {
                          return view.$el.detach();
                        });
                        models = this.collection.models.slice().reverse();
                        build_views(this.views, models, {});
                        this.$el.html(html);
                        for (_i = 0, _len = models.length; _i < _len; _i++) {
                          model = models[_i];
                          this.$el.find(".accordion").append(this.views[model.id].el);
                        }
                        return this;
                      };
                
                      return UserDocsView;
                
                    })(ContinuumView);
                    Doc = (function(_super) {
                      __extends(Doc, _super);
                
                      function Doc() {
                        _ref2 = Doc.__super__.constructor.apply(this, arguments);
                        return _ref2;
                      }
                
                      Doc.prototype.default_view = DocView;
                
                      Doc.prototype.idAttribute = 'docid';
                
                      Doc.prototype.defaults = {
                        docid: null,
                        title: null,
                        plot_context: null,
                        apikey: null
                      };
                
                      Doc.prototype.sync = function() {};
                
                      Doc.prototype.destroy = function(options) {
                        Doc.__super__.destroy.call(this, options);
                        return $.ajax({
                          url: "/bokeh/doc/" + (this.get('docid')) + "/",
                          type: 'delete'
                        });
                      };
                
                      Doc.prototype.load = function(use_title) {
                        var docid, resp, title,
                          _this = this;
                        if (this.loaded) {
                          return;
                        }
                        if (use_title) {
                          title = this.get('title');
                          resp = utility.load_doc_by_title(title);
                        } else {
                          docid = this.get('docid');
                          resp = utility.load_doc(docid);
                        }
                        return resp.done(function(data) {
                          _this.set('docid', data.docid);
                          _this.set('apikey', data['apikey']);
                          _this.set('plot_context', data['plot_context_ref']);
                          _this.trigger('loaded');
                          return _this.loaded = true;
                        });
                      };
                
                      return Doc;
                
                    })(HasParent);
                    UserDocs = (function(_super) {
                      __extends(UserDocs, _super);
                
                      function UserDocs() {
                        _ref3 = UserDocs.__super__.constructor.apply(this, arguments);
                        return _ref3;
                      }
                
                      UserDocs.prototype.model = Doc;
                
                      UserDocs.prototype.subscribe = function(wswrapper, username) {
                        wswrapper.subscribe("bokehuser:" + username, null);
                        return this.listenTo(wswrapper, "msg:bokehuser:" + username, function(msg) {
                          msg = JSON.parse(msg);
                          if (msg['msgtype'] === 'docchange') {
                            return this.fetch({
                              update: true
                            });
                          }
                        });
                      };
                
                      UserDocs.prototype.fetch = function(options) {
                        var resp, response, url,
                          _this = this;
                        if (_.isUndefined(options)) {
                          options = {};
                        }
                        url = base.Config.prefix + "bokeh/userinfo/";
                        resp = response = $.get(url, {});
                        resp.done(function(data) {
                          var docs;
                          docs = data['docs'];
                          if (options.update) {
                            return _this.set(docs, options);
                          } else {
                            return _this.reset(docs, options);
                          }
                        });
                        return resp;
                      };
                
                      return UserDocs;
                
                    })(Backbone.Collection);
                    exports.UserDocs = UserDocs;
                    exports.UserDocsView = UserDocsView;
                    exports.Doc = Doc;
                    exports.DocView = DocView;
                    return exports;
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=usercontext.js.map
                */;
                (function() {
                  define('server/serverrun',["common/base", "./serverutils", "./usercontext/usercontext", "common/has_properties"], function(base, serverutils, usercontext, HasProperties) {
                    var Config, Promises, load, load_one_object, reload, _render, _render_all, _render_one;
                    Config = base.Config;
                    Promises = serverutils.Promises;
                    Config.ws_conn_string = "ws://" + window.location.host + "/bokeh/sub";
                    reload = function() {
                      var ping_url;
                      Config = require("common/base").Config;
                      ping_url = "" + Config.prefix + "bokeh/ping";
                      $.get(ping_url).success(function() {
                        console.log('reloading');
                        return window.location.reload();
                      }).fail(_.delay((function() {
                        return reload();
                      }), 1000));
                      return null;
                    };
                    load_one_object = function(docid, objid) {
                      HasProperties.prototype.sync = Backbone.sync;
                      return $(function() {
                        var resp, wswrapper;
                        wswrapper = serverutils.utility.make_websocket();
                        resp = serverutils.utility.load_one_object_chain(docid, objid);
                        resp.done(function(data) {
                          var model, view;
                          model = base.Collections(data.type).get(objid);
                          view = new model.default_view({
                            model: model
                          });
                          return _render(view.el);
                        });
                        wswrapper.subscribe("debug:debug", "");
                        return wswrapper.on('msg:debug:debug', function(msg) {
                          if (msg === 'reload') {
                            return reload();
                          }
                        });
                      });
                    };
                    load = function(title) {
                      HasProperties.prototype.sync = Backbone.sync;
                      return $(function() {
                        var userdocs, wswrapper;
                        wswrapper = serverutils.utility.make_websocket();
                        userdocs = new usercontext.UserDocs();
                        userdocs.subscribe(wswrapper, 'defaultuser');
                        window.userdocs = userdocs;
                        load = userdocs.fetch();
                        load.done(function() {
                          if (title != null) {
                            return _render_one(userdocs, title);
                          } else {
                            return _render_all(userdocs);
                          }
                        });
                        console.log('subscribing to debug');
                        wswrapper.subscribe("debug:debug", "");
                        return wswrapper.on('msg:debug:debug', function(msg) {
                          if (msg === 'reload') {
                            return reload();
                          }
                        });
                      });
                    };
                    _render_all = function(userdocs) {
                      var userdocsview;
                      userdocsview = new usercontext.UserDocsView({
                        collection: userdocs
                      });
                      return _render(userdocsview.el);
                    };
                    _render_one = function(userdocs, title) {
                      var doc, msg;
                      doc = userdocs.find(function(doc) {
                        return doc.get('title') === title;
                      });
                      if (doc != null) {
                        doc.on('loaded', function() {
                          var plot_context, plot_context_view;
                          plot_context = doc.get('plot_context');
                          plot_context_view = new plot_context.default_view({
                            model: plot_context
                          });
                          return _render(plot_context_view.el);
                        });
                        return doc.load();
                      } else {
                        msg = "Document '" + title + "' wasn't found on this server.";
                        _render(msg);
                        return console.error(msg);
                      }
                    };
                    _render = function(html) {
                      return $('#PlotPane').append(html);
                    };
                    return {
                      load: load,
                      load_one_object: load_one_object
                    };
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=serverrun.js.map
                */;
                (function() {
                  define('main',['require','exports','module','underscore','jquery','backbone','common/base','common/base','common/cartesian_frame','common/canvas','common/gmap_plot','common/grid_plot','common/has_parent','common/has_properties','common/layout_box','common/plot','common/plotting','common/affine','common/build_views','common/bulk_save','common/continuum_view','common/grid_view_state','common/load_models','common/plot_context','common/plot_widget','common/random','common/svg_colors','mapper/linear_mapper','mapper/log_mapper','mapper/categorical_mapper','mapper/grid_mapper','mapper/linear_color_mapper','palettes/palettes','renderer/annotation/legend','renderer/glyph/glyph','renderer/glyph/glyph_factory','renderer/guide/categorical_axis','renderer/guide/datetime_axis','renderer/guide/grid','renderer/guide/linear_axis','renderer/guide/log_axis','renderer/overlay/box_selection','renderer/properties','server/embed','server/serverrun','server/serverutils','source/column_data_source','ticking/abstract_ticker','ticking/adaptive_ticker','ticking/basic_ticker','ticking/basic_tick_formatter','ticking/log_ticker','ticking/log_tick_formatter','ticking/categorical_ticker','ticking/categorical_tick_formatter','ticking/composite_ticker','ticking/datetime_ticker','ticking/datetime_tick_formatter','ticking/days_ticker','ticking/months_ticker','ticking/single_interval_ticker','ticking/years_ticker','tool/box_select_tool','tool/box_zoom_tool','tool/click_tool','tool/crosshair_tool','tool/data_range_box_select_tool','tool/embed_tool','tool/hover_tool','tool/pan_tool','tool/preview_save_tool','tool/reset_tool','tool/resize_tool','tool/wheel_zoom_tool','tool/object_explorer_tool','server/serverrun','server/serverrun','widget/data_slider','widget/hbox','widget/vbox','widget/vboxmodelform','widget/textinput','widget/crossfilter','widget/object_explorer'],function(require, exports, module) {
                    var Bokeh, glyph_factory, _oldJQ;
                    if (!window.Float64Array) {
                      console.warn("Float64Array is not supported. Using generic Array instead.");
                      window.Float64Array = Array;
                    }
                    Bokeh = {};
                    Bokeh.require = require;
                    Bokeh.version = '0.5.2';
                    Bokeh._ = require("underscore");
                    Bokeh.$ = require("jquery");
                    Bokeh.Backbone = require("backbone");
                    _oldJQ = window.$;
                    window.jQuery.noConflict();
                    if (typeof $ === "undefined") {
                      window.$ = _oldJQ;
                    }
                    Bokeh.Collections = require("common/base").Collections;
                    Bokeh.Config = require("common/base").Config;
                    Bokeh.CartesianFrame = require("common/cartesian_frame");
                    Bokeh.Canvas = require("common/canvas");
                    Bokeh.GMapPlot = require("common/gmap_plot");
                    Bokeh.GridPlot = require("common/grid_plot");
                    Bokeh.HasParent = require("common/has_parent");
                    Bokeh.HasProperties = require("common/has_properties");
                    Bokeh.LayoutBox = require("common/layout_box");
                    Bokeh.Plot = require("common/plot");
                    Bokeh.Plotting = require("common/plotting");
                    Bokeh.Affine = require("common/affine");
                    Bokeh.build_views = require("common/build_views");
                    Bokeh.bulk_save = require("common/bulk_save");
                    Bokeh.ContinuumView = require("common/continuum_view");
                    Bokeh.GridViewState = require("common/grid_view_state");
                    Bokeh.load_models = require("common/load_models");
                    Bokeh.PlotContext = require("common/plot_context");
                    Bokeh.PlotWidget = require("common/plot_widget");
                    Bokeh.Random = require("common/random");
                    Bokeh.SVGColors = require("common/svg_colors");
                    Bokeh.LinearMapper = require("mapper/linear_mapper");
                    Bokeh.LogMapper = require("mapper/log_mapper");
                    Bokeh.CategoricalMapper = require("mapper/categorical_mapper");
                    Bokeh.GridMapper = require("mapper/grid_mapper");
                    Bokeh.LinearColorMapper = require("mapper/linear_color_mapper");
                    Bokeh.Palettes = require("palettes/palettes");
                    Bokeh.Legend = require("renderer/annotation/legend");
                    Bokeh.Glyph = require("renderer/glyph/glyph");
                    glyph_factory = require("renderer/glyph/glyph_factory");
                    Bokeh.CategoricalAxis = require("renderer/guide/categorical_axis");
                    Bokeh.DatetimeAxis = require("renderer/guide/datetime_axis");
                    Bokeh.Grid = require("renderer/guide/grid");
                    Bokeh.LinearAxis = require("renderer/guide/linear_axis");
                    Bokeh.LogAxis = require("renderer/guide/log_axis");
                    Bokeh.BoxSelection = require("renderer/overlay/box_selection");
                    Bokeh.Properties = require("renderer/properties");
                    Bokeh.embed = require("server/embed");
                    Bokeh.serverrun = require("server/serverrun");
                    Bokeh.serverutils = require("server/serverutils");
                    Bokeh.ColumnDataSource = require("source/column_data_source");
                    Bokeh.AbstractTicker = require("ticking/abstract_ticker");
                    Bokeh.AdaptiveTicker = require("ticking/adaptive_ticker");
                    Bokeh.BasicTicker = require("ticking/basic_ticker");
                    Bokeh.BasicTickFormatter = require("ticking/basic_tick_formatter");
                    Bokeh.LogTicker = require("ticking/log_ticker");
                    Bokeh.LogTickFormatter = require("ticking/log_tick_formatter");
                    Bokeh.CategoricalTicker = require("ticking/categorical_ticker");
                    Bokeh.CategoricalTickFormatter = require("ticking/categorical_tick_formatter");
                    Bokeh.CompositeTicker = require("ticking/composite_ticker");
                    Bokeh.DatetimeTicker = require("ticking/datetime_ticker");
                    Bokeh.DatetimeTickFormatter = require("ticking/datetime_tick_formatter");
                    Bokeh.DaysTicker = require("ticking/days_ticker");
                    Bokeh.MonthsTicker = require("ticking/months_ticker");
                    Bokeh.SingleIntervalTicker = require("ticking/single_interval_ticker");
                    Bokeh.YearsTicker = require("ticking/years_ticker");
                    Bokeh.BoxSelectTool = require("tool/box_select_tool");
                    Bokeh.BoxZoomTool = require("tool/box_zoom_tool");
                    Bokeh.ClickTool = require("tool/click_tool");
                    Bokeh.CrosshairTool = require("tool/crosshair_tool");
                    Bokeh.DataRangeBoxSelectTool = require("tool/data_range_box_select_tool");
                    Bokeh.EmbedTool = require("tool/embed_tool");
                    Bokeh.HoverTool = require("tool/hover_tool");
                    Bokeh.PanTool = require("tool/pan_tool");
                    Bokeh.PreviewSaveTool = require("tool/preview_save_tool");
                    Bokeh.ResetTool = require("tool/reset_tool");
                    Bokeh.ResizeTool = require("tool/resize_tool");
                    Bokeh.WheelZoomTool = require("tool/wheel_zoom_tool");
                    Bokeh.ObjectExplorerTool = require("tool/object_explorer_tool");
                    Bokeh.one_object_page = require("server/serverrun").load_one_object;
                    Bokeh.server_page = require("server/serverrun").load;
                    Bokeh.DataSlider = require("widget/data_slider");
                    Bokeh.HBox = require("widget/hbox");
                    Bokeh.VBox = require("widget/vbox");
                    Bokeh.VBoxModelForm = require("widget/vboxmodelform");
                    Bokeh.TextInput = require("widget/textinput");
                    Bokeh.CrossFilter = require("widget/crossfilter");
                    Bokeh.ObjectExplorer = require("widget/object_explorer");
                    exports.Bokeh = Bokeh;
                    return Bokeh;
                  });
                
                }).call(this);
                
                /*
                //@ sourceMappingURL=main.js.map
                */;
                
                  //The modules for your project will be inlined above
                  //this snippet. Ask almond to synchronously require the
                  //module value for 'main' here and return it as the
                  //value to use for the public API for the built file.
                  return require('main');
                }));
                
                /* END /Users/davekensinger/miniconda3/lib/python3.4/site-packages/bokeh/server/static/js/bokeh.js */
        </script>

        <script type="text/javascript">
            $(function() {
                var modelid = "642d90e4-18a1-4677-9f8c-4be2e3fb36bb";
                var modeltype = "PlotContext";
                var elementid = "b3848b11-3445-4819-bb85-bba365839093";
                console.log("  modeltype:", modeltype);
                console.log("  modelid:", modelid);
                console.log("  elementid:", elementid);
                var all_models = [{"id": "6ab16b94-f88c-4446-a6d4-126dcdd647df", "type": "BasicTicker", "attributes": {"id": "6ab16b94-f88c-4446-a6d4-126dcdd647df", "num_minor_ticks": 5, "doc": "2ceaac75-dadf-454a-84b4-171b902efcaa"}}, {"id": "5d6cdcb2-98d1-4c99-a691-7ee7ff330654", "type": "BasicTickFormatter", "attributes": {"id": "5d6cdcb2-98d1-4c99-a691-7ee7ff330654", "doc": "2ceaac75-dadf-454a-84b4-171b902efcaa"}}, {"id": "1a9887e7-e8ce-4065-a667-adb66837851a", "type": "WheelZoomTool", "attributes": {"id": "1a9887e7-e8ce-4065-a667-adb66837851a", "plot": {"id": "db66da39-9624-4ece-8150-050082e7fc73", "type": "Plot"}, "dimensions": ["width", "height"], "doc": "2ceaac75-dadf-454a-84b4-171b902efcaa"}}, {"id": "6879359b-8446-4eb3-9727-caf7c15a37e7", "type": "LinearAxis", "attributes": {"id": "6879359b-8446-4eb3-9727-caf7c15a37e7", "plot": {"id": "db66da39-9624-4ece-8150-050082e7fc73", "type": "Plot"}, "ticker": {"id": "6ab16b94-f88c-4446-a6d4-126dcdd647df", "type": "BasicTicker"}, "formatter": {"id": "5d6cdcb2-98d1-4c99-a691-7ee7ff330654", "type": "BasicTickFormatter"}, "doc": "2ceaac75-dadf-454a-84b4-171b902efcaa"}}, {"id": "9d0b1960-0a39-400f-90cb-480278a4df44", "type": "LinearAxis", "attributes": {"id": "9d0b1960-0a39-400f-90cb-480278a4df44", "plot": {"id": "db66da39-9624-4ece-8150-050082e7fc73", "type": "Plot"}, "ticker": {"id": "6ab16b94-f88c-4446-a6d4-126dcdd647df", "type": "BasicTicker"}, "formatter": {"id": "5d6cdcb2-98d1-4c99-a691-7ee7ff330654", "type": "BasicTickFormatter"}, "doc": "2ceaac75-dadf-454a-84b4-171b902efcaa"}}, {"id": "ce87f780-8b61-4ec6-9601-cb123dc70f51", "type": "BoxSelectTool", "attributes": {"id": "ce87f780-8b61-4ec6-9601-cb123dc70f51", "plot": null, "doc": "2ceaac75-dadf-454a-84b4-171b902efcaa", "renderers": [{"id": "bf7d6088-2fc1-4d6e-9e9b-35eda07eb90c", "type": "Glyph"}]}}, {"id": "fedae5c5-c983-4195-a708-0dfd0e14350f", "type": "BoxSelection", "attributes": {"tool": {"id": "f5ce50cb-4b3b-41c4-8672-a8821d12b63e", "type": "BoxZoomTool"}, "id": "fedae5c5-c983-4195-a708-0dfd0e14350f", "doc": "2ceaac75-dadf-454a-84b4-171b902efcaa"}}, {"id": "0d3c4b50-a9d9-44fc-83ab-76b854d32bea", "type": "DataRange1d", "attributes": {"id": "0d3c4b50-a9d9-44fc-83ab-76b854d32bea", "doc": "2ceaac75-dadf-454a-84b4-171b902efcaa", "sources": [{"columns": ["x"], "source": {"id": "d110a2f9-3fd1-448b-a83c-027b388084e2", "type": "ColumnDataSource"}}]}}, {"id": "db66da39-9624-4ece-8150-050082e7fc73", "type": "Plot", "attributes": {"y_range": {"id": "2999aef9-d87e-418e-833a-7dbe75530eb1", "type": "DataRange1d"}, "left": [{"id": "9d0b1960-0a39-400f-90cb-480278a4df44", "type": "LinearAxis"}], "data_sources": [], "tools": [{"id": "ad340334-bf96-44ed-8f71-a9bcc807f3b3", "type": "PanTool"}, {"id": "1a9887e7-e8ce-4065-a667-adb66837851a", "type": "WheelZoomTool"}, {"id": "f5ce50cb-4b3b-41c4-8672-a8821d12b63e", "type": "BoxZoomTool"}, {"id": "6b0df771-ce0d-4b56-9edb-0f71f1f1790e", "type": "PreviewSaveTool"}, {"id": "d673cf4d-5698-493c-a52b-3db70bf6c6e8", "type": "ResizeTool"}, {"id": "ce87f780-8b61-4ec6-9601-cb123dc70f51", "type": "BoxSelectTool"}, {"id": "03f26cfd-912e-4855-92fc-42c095717d13", "type": "ResetTool"}], "above": [], "doc": "2ceaac75-dadf-454a-84b4-171b902efcaa", "below": [{"id": "6879359b-8446-4eb3-9727-caf7c15a37e7", "type": "LinearAxis"}], "title": "Plot", "x_range": {"id": "0d3c4b50-a9d9-44fc-83ab-76b854d32bea", "type": "DataRange1d"}, "id": "db66da39-9624-4ece-8150-050082e7fc73", "right": [], "renderers": [{"id": "6879359b-8446-4eb3-9727-caf7c15a37e7", "type": "LinearAxis"}, {"id": "304a4a18-08fe-49d3-902b-f3e3fddb9e5f", "type": "Grid"}, {"id": "9d0b1960-0a39-400f-90cb-480278a4df44", "type": "LinearAxis"}, {"id": "f3f64ff5-b999-40c7-ba0f-7c19088d39be", "type": "Grid"}, {"id": "fedae5c5-c983-4195-a708-0dfd0e14350f", "type": "BoxSelection"}, {"id": "a444fd6f-ad06-4aa6-8664-25ed9642dff0", "type": "BoxSelection"}, {"id": "bf7d6088-2fc1-4d6e-9e9b-35eda07eb90c", "type": "Glyph"}]}}, {"id": "ad340334-bf96-44ed-8f71-a9bcc807f3b3", "type": "PanTool", "attributes": {"id": "ad340334-bf96-44ed-8f71-a9bcc807f3b3", "plot": {"id": "db66da39-9624-4ece-8150-050082e7fc73", "type": "Plot"}, "dimensions": ["width", "height"], "doc": "2ceaac75-dadf-454a-84b4-171b902efcaa"}}, {"id": "304a4a18-08fe-49d3-902b-f3e3fddb9e5f", "type": "Grid", "attributes": {"id": "304a4a18-08fe-49d3-902b-f3e3fddb9e5f", "plot": {"id": "db66da39-9624-4ece-8150-050082e7fc73", "type": "Plot"}, "ticker": {"id": "6ab16b94-f88c-4446-a6d4-126dcdd647df", "type": "BasicTicker"}, "dimension": 0, "doc": "2ceaac75-dadf-454a-84b4-171b902efcaa"}}, {"id": "2999aef9-d87e-418e-833a-7dbe75530eb1", "type": "DataRange1d", "attributes": {"id": "2999aef9-d87e-418e-833a-7dbe75530eb1", "doc": "2ceaac75-dadf-454a-84b4-171b902efcaa", "sources": [{"columns": ["y"], "source": {"id": "d110a2f9-3fd1-448b-a83c-027b388084e2", "type": "ColumnDataSource"}}]}}, {"id": "d110a2f9-3fd1-448b-a83c-027b388084e2", "type": "ColumnDataSource", "attributes": {"id": "d110a2f9-3fd1-448b-a83c-027b388084e2", "column_names": ["_autoindex", "Series 1", "fill_color", "radius", "x", "y"], "cont_ranges": {}, "selected": [], "data": {"Series 1": [21.66152675360652, 94.64381864695534, 51.097395278626564, 46.898648187597516, 74.55394403375374, 32.563304228965265, 13.537556826920461, 36.0525907640476, 59.405911050084235, 55.33330526579836, 47.796453660959145, 33.27504828193552, 7.727082323368961, 43.43835585402505, 52.13701644103499, 14.08371158573285, 62.28350133497691, 71.78728201913154, 58.884195964273104, 95.58075973889818, 81.47203235424259, 15.640921746233838, 14.851330031931232, 6.64389391350122, 61.148298548514845, 89.6315116551837, 46.480510836185196, 29.676104408055526, 64.99305177190097, 40.30392172932372, 8.085030507131851, 35.89660320987509, 9.359390477145901, 87.92774406595477, 71.40638782630465, 2.1069380375215663, 24.376820628736738, 54.06374464372461, 5.458285070707958, 6.579103355795635, 71.80702353456161, 87.66161591259049, 84.31659915761131, 92.93458517222857, 13.323530520625837, 50.892273662853015, 16.729435293850624, 22.566706546394244, 48.66812109460314, 43.57298828914411, 56.05482920016556, 58.750297261819725, 93.27078177899195, 88.47829633210115, 69.27068855884941, 37.68093721480249, 59.313424501828436, 65.49923118753968, 69.77060098577121, 65.72931900699659, 19.394294614664542, 81.48113070163411, 44.18530994200873, 24.31768816821942, 42.185637034936185, 45.48972367890066, 80.72364845342798, 71.88686129825224, 58.56503503828889, 75.25526250902226, 1.0941742810210653, 28.036168955227613, 52.89513627036314, 63.92502458372231, 72.69309606339378, 69.44086043333758, 35.132038400299336, 99.96434931615808, 29.85829555457854, 75.88660891782426, 53.401840002057945, 12.169874215073717, 93.27329241139715, 64.02108386465852, 57.544986483822825, 41.6556988581153, 46.742116158185944, 62.09641819964015, 89.3377009345162, 19.86693236917212, 71.03483186040405, 79.344741218013, 1.3162777415581695, 17.948505931382506, 31.212065117517163, 42.61040636962594, 32.2670725389086, 41.480498104517416, 98.62960600902167, 31.585088286743336, 79.01355973902935, 42.47401602262606, 97.90284167184676, 46.58307991561674, 56.001854836483965, 62.63022741042798, 79.69846502904736, 14.982913385285734, 13.25608388908056, 3.2143332189766727, 7.543672549910818, 76.59683326379002, 16.105349900138933, 51.49065433953339, 11.731489114563043, 79.8110935256369, 65.13177885713716, 66.40765145306497, 59.9603743947134, 6.561267718006702, 10.847410326220519, 52.553140793933736, 12.276178090640745, 72.7361461063443, 42.03584633071182, 2.150853512624662, 33.210037793231685, 23.250764756997988, 55.831208050997326, 2.93494446556527, 73.03418639964173, 80.14758133239211, 47.29646032863876, 79.1929538170669, 12.531451705842079, 92.58976916074786, 25.17036342861051, 23.37426017738492, 6.009192327466684, 60.224337427702146, 73.34897754826392, 15.338046855791077, 46.80354702873052, 74.90578352783498, 48.431650188056864, 9.319704185327682, 72.00448562754907, 30.101817432056965, 25.89008576710582, 64.30000063288166, 28.1828478154174, 92.8468586468787, 79.05017541039204, 17.83912108125917, 39.80385734200746, 40.150417668384065, 40.05044739013479, 54.05238399737892, 63.758132115718944, 8.79687700502727, 96.3895319935934, 14.796949432210827, 34.1442570670861, 74.54000787246898, 0.9734273640592317, 39.47103925622058, 70.93505467451529, 26.885794280593135, 92.23113884011323, 69.02383190212085, 38.3818218866046, 24.065441601973447, 63.142888400603994, 44.46264526967486, 5.4488508959017246, 47.124920303348986, 37.82149552525284, 23.629183462048353, 53.85636374791298, 40.72540829186598, 92.91264604350799, 36.18500416468995, 70.50860813378631, 43.92831640369606, 64.17107359846935, 48.25418489962955, 52.52338216295206, 34.71613411551736, 91.23966420821023, 16.913265614864457, 16.957238630292526, 88.16327877318031, 52.37071896589104, 84.29536074473322, 33.73116444209, 40.425526275591025, 91.00730872568933, 10.015788040707863, 9.71457900801368, 77.97282781777454, 46.19054534828313, 42.63378903722109, 38.18548200161751, 46.84363500004386, 5.25719043989551, 51.56938275870172, 15.40932907619843, 95.39028000598142, 92.58224006510493, 79.7408102640708, 34.979397915985835, 54.61304071891551, 94.15336815541332, 14.077264062558047, 69.70572551142902, 8.49311614460888, 36.00717639997002, 19.541775796272177, 24.903353001638084, 31.763393651406126, 66.7766629762517, 21.498962739102133, 52.22123499563563, 88.30916025951436, 73.70868911854417, 90.03102627629127, 26.929083362484395, 19.571133194613676, 76.10994484769836, 82.50895847810227, 15.722639932947802, 16.75978524016106, 97.85509840403752, 51.64804533490687, 59.71192082775295, 24.647263356396653, 96.46435044323935, 56.212475046328294, 41.12455767965674, 54.035952447590155, 63.51915853301764, 52.90423553768815, 73.9289033169849, 17.692977764487814, 9.429276121524543, 80.89078128253388, 93.95765134867821, 7.583978561612459, 37.41376601470277, 95.96595625859675, 45.245993528828144, 71.10679580903387, 8.01233215891295, 92.76733225179932, 55.534290387937524, 12.715027718528592, 21.365745908284694, 99.0773061513664, 76.68644072068194, 32.428258048037065, 74.38698954920494, 10.490306800292082, 36.111353521556275, 77.99982496736233, 28.269731825860177, 48.7473853116114, 19.087388649322858, 99.09941157275617, 49.31840810477397, 31.791269928214007, 37.92476805067903, 81.51380685741222, 96.91902302110769, 60.84248496060298, 93.6873021400984, 32.26637932149764, 16.527574858465442, 21.767786495439267, 48.60058034986549, 58.319768350997904, 79.61723640153107, 27.403628097918354, 79.27476142481864, 18.277101890762015, 69.04248870594554, 18.318914350531422, 25.499631174377967, 34.46892075458664, 33.63008236509762, 58.64470865398194, 29.316803657029734, 10.655104895584856, 33.209303825522554, 56.130809564055674, 3.610856064199708, 81.59246959675488, 5.218460407890014, 91.1576577229445, 79.41417953301595, 53.32079457525346, 80.21262947617444, 24.908429238463704, 17.89553841197845, 71.66655818585038, 86.26682491310612, 45.21739222661709, 10.92506535664237, 43.012297685284686, 2.488269519305819, 67.64330305420579, 17.42169055601638, 77.01033768050381, 94.1865962895457, 41.23403988101948, 26.924454979841038, 77.11005259683759, 75.92128783837401, 78.82129380013569, 40.97679675088314, 63.1022131532781, 50.64107987913135, 38.126833552682186, 8.601387468856736, 20.397876420241822, 51.30136065188544, 1.1641627051203862, 54.97706560140813, 92.60968484465226, 99.62393922577807, 73.34390045505333, 3.780037057136032, 99.67583937412526, 47.459782855048594, 23.628961006948167, 48.99598337365995, 74.32986876711004, 35.798563027586574, 40.31717427661993, 47.42159605022962, 86.0090164501171, 37.4250497519657, 79.51569075289751, 21.506490235575814, 28.40751130437139, 51.63668280294903, 89.12206229819154, 45.75787010357564, 84.28297797744115, 79.64831899249441, 71.70901295501056, 33.074408266641086, 13.181040336690641, 57.265537293029546, 69.742726435984, 75.8187271637788, 37.66175052472034, 87.94765386498757, 90.76272885737147, 52.737694245782265, 8.738648632371849, 76.70138443995305, 96.88826562203644, 31.378453693001052, 24.035113216824634, 11.186425733705619, 31.581242225363415, 98.00879438384449, 7.67425204280584, 28.27250945486931, 26.899299901210348, 80.08878573796326, 98.4025463073726, 42.870011356070655, 99.12455137335984, 6.420137477634269, 31.976880017064968, 17.28730678101772, 19.10803669331863, 51.20767950875569, 99.11503414807721, 27.010572153208724, 96.52395117146084, 61.9805372508475, 17.457677808466343, 62.82312022443096, 64.5588180014478, 0.6573136004323077, 97.59700994345944, 13.27714091607709, 33.96430738179191, 6.180990178655832, 88.26692930808261, 70.52319247836724, 58.421532172634684, 43.428851691565505, 2.632789958384407, 91.38085731613648, 60.92085050945709, 41.89829637326925, 65.21699702430452, 59.32593542779162, 52.53894868190616, 37.74158553177431, 64.12249734383323, 95.8824721823626, 19.677421543443707, 34.412015526384245, 28.017690039085743, 75.97974158944916, 74.52792071736206, 82.11723651062375, 63.22281418806257, 65.3650370637424, 87.08451206330946, 91.28170415233873, 90.19658839260991, 19.753135925394094, 84.16636226797092, 11.864485402919023, 53.89079036403136, 88.07166006113512, 38.18660812536711, 97.2705324348297, 69.43963695294238, 32.922665637603096, 27.095172514057666, 40.19709052506041, 67.48912715620995, 71.00534119667691, 1.3096473359890837, 59.49413743317925, 65.73300947576104, 79.5899867504547, 54.69283883893388, 51.82072201774686, 36.3744669882563, 59.94210406736566, 38.47353067640646, 57.056746364700174, 83.5387004059186, 81.22992531653091, 37.18937506690738, 8.96432895125593, 55.586542677188945, 97.54449948889379, 44.74148880971862, 65.33436712897401, 90.96252603318192, 94.02676603559077, 5.075153987752246, 47.96083490060289, 3.4117214819965658, 44.99964478042244, 1.0168919547033584, 72.53384998787814, 64.96658519874322, 46.13615114715755, 11.747693330106523, 71.86205121808692, 3.7677917957798734, 18.669739469982517, 60.56222405551429, 21.568152385607963, 59.252250360494315, 15.891071112276201, 65.30240295553128, 60.81099326662959, 51.305318903809486, 78.40128139007022, 26.703421086293144, 45.34090585989296, 31.144106179474164, 32.105103383081904, 44.96095391515082, 86.23551518670925, 82.0229368616305, 3.5371017431691243, 18.14642412086014, 49.995955011169954, 33.54149966841406, 32.10321277347755, 10.555993786842677, 0.7391057279348856, 47.417504025298506, 34.2340779485396, 5.420170070749175, 65.8798352902846, 30.85937222787809, 97.37181300259479, 16.69905491578606, 61.81781425849419, 47.10183300157986, 96.10531742699361, 94.29481765501029, 33.531730881605924, 89.71718199653857, 4.548451868501813, 64.9865419178441, 1.4557579699103762, 59.15140558612483, 7.994125170837441, 78.70145117951584, 46.52886362791895, 99.70075363579032, 39.25347466265319, 95.09899874106475, 77.86516856397874, 31.56433579139144, 84.22191521259026, 14.481925449983867, 42.4134596663765, 36.85361404285713, 95.21963912811502, 5.93468682937468, 90.51548369490516, 6.42980949110391, 20.081519430534566, 17.656234684745222, 61.754629319288746, 94.97747182726123, 85.85202388971783, 34.870491931659885, 19.825262982902437, 73.04456585920674, 27.232245183587743, 77.81953523081697, 88.65814511418736, 24.592828329063742, 10.088316947874654, 42.43989709757678, 60.449607028121676, 71.49936596644896, 42.51994116624449, 99.05048992377907, 9.69674106488575, 7.167860101104983, 88.74861033547596, 77.71766558930018, 13.001563261566718, 96.08729542985337, 96.87053834422639, 2.290268485064584, 5.398182914175765, 34.19425099178076, 77.05284004077444, 93.09780911627321, 76.75556936341798, 28.419452710045146, 36.09978533161827, 56.88549491800673, 31.772963994872793, 50.99145737041542, 65.92742101602634, 48.55450400394684, 98.39017057473612, 31.790966280150425, 67.36164652394935, 98.77786148976125, 50.64591650615132, 21.785067055630247, 32.19530174441311, 7.892817747705427, 49.24371299663135, 90.16235674703793, 18.438280444488562, 78.45468011978046, 33.720895462643256, 12.285529584390087, 28.754843695774035, 69.02412483636589, 40.76784494618336, 9.144871360619277, 57.589302988533206, 58.539396777286825, 58.6402736925623, 44.054460102174765, 8.643141868557224, 3.6970219227801193, 14.123522758824391, 62.87065346769539, 73.06133397363257, 68.2287045979617, 30.421547165879048, 28.2601914689235, 27.732005290727436, 64.43370283179574, 7.679191374852001, 38.92425807146748, 96.77699501347693, 25.888189429848307, 8.606398299042638, 10.069452822643477, 87.89339292156403, 64.72151594330647, 67.23696530297758, 41.818494954636684, 30.202353989658903, 7.127322215183273, 55.023199359909306, 32.11440810337272, 61.60577986322917, 31.68975575167967, 64.84088875701057, 42.338947054537755, 87.09442693106789, 97.15936685276138, 94.92432977343631, 94.82114742132649, 30.39376299213865, 64.38425072056248, 54.80836864276867, 90.43254507930207, 80.42896713863182, 94.43199753542575, 84.43486505184971, 22.097682964418674, 15.292032657154364, 32.45679162634493, 14.274011699196286, 73.13178321180015, 96.53683979028558, 29.596562807755987, 60.09934222945673, 2.697206807021024, 79.15305911498847, 50.24318179859771, 12.909311587903261, 6.933734820106785, 34.825034363858954, 32.86343953962504, 74.88909520608976, 93.66928545140551, 32.013449239052335, 29.1621079949144, 41.86578745746764, 84.84246909275531, 14.03212463486888, 76.73371442602978, 26.581523397734962, 67.09050422273329, 82.71540068133744, 56.77861247363729, 88.75404018933814, 92.64246785364809, 29.9692217452574, 63.85885742645206, 44.89096883708443, 38.521365964887785, 4.750084774187258, 2.1694462773312995, 12.108898092355824, 91.76167794915912, 18.77198664239176, 60.77363491507798, 47.33333224776132, 5.45978406826555, 75.4411707318842, 77.39468060854225, 11.681069610901263, 98.77226903336846, 75.48813266874278, 5.361223429540973, 17.903501032150416, 39.97397934774081, 56.31450971268175, 91.32657301510969, 30.401112686329913, 21.223870369452456, 76.17403656206633, 93.63561659387867, 30.113688624537193, 9.477883220673423, 5.720479579247762, 18.34066400661254, 91.33608717428282, 58.80171043946489, 74.71566388597644, 67.75431370107692, 95.38945296623146, 93.99022231485257, 97.63480930579243, 35.29671599637636, 11.615278004424823, 59.69764043796059, 17.328559273510415, 47.84190339249059, 17.619241249162453, 59.88946088503655, 58.69764194210185, 35.49956398187549, 69.46013383493208, 99.87510302260645, 52.10694294589639, 28.27820882437412, 3.91612580462527, 29.874349965698578, 6.663744491895585, 53.63842733477361, 39.23835520560398, 15.55393216316573, 8.447607866572293, 81.7728510442955, 14.693059059995994, 65.6115007327343, 37.093084991351674, 33.69014849041195, 37.09402935993364, 94.79136291264119, 56.08072650407669, 65.62382792519801, 9.372260312638014, 21.992726807066255, 11.47287300544585, 60.398140803461196, 51.82243960399131, 84.67198571218182, 63.563831956456, 20.880616004913243, 53.289558273465396, 92.91448435585397, 3.004886939086171, 77.00892897108916, 85.19475362069258, 49.92456240192712, 89.6726999621545, 39.4752219613816, 96.23505577975652, 37.732420295928485, 84.39716256408309, 34.06676425689423, 38.31080375632527, 1.37446421486066, 48.013393010092145, 7.203986736514856, 90.00893934774886, 51.63058555928212, 39.920799370715656, 97.31399513026552, 77.05633587942465, 91.6722130872794, 69.65381764928328, 27.43635552896452, 72.03142350053038, 76.6187534515323, 77.6982797823892, 86.86114046716625, 4.758999143164555, 84.86069481501947, 77.86396146959986, 74.49600383333893, 17.598338056661923, 46.225418011891776, 9.171894838998861, 89.75214042674739, 61.90980245244556, 7.953893688021518, 23.99260265220864, 19.897101083806923, 20.458678649064975, 64.62022388605571, 42.10426516814027, 48.07973379561297, 40.556692043352406, 95.12209357496427, 63.00696776752452, 37.87381679878325, 56.04608009507926, 67.71867678128596, 98.35991834634856, 85.94557659232748, 15.752702535974283, 7.380222647289636, 34.36902370499444, 53.52920030579179, 93.43464843476305, 60.408253424501666, 47.27639508236925, 37.75767555196459, 54.638865923476146, 63.47831594613557, 72.47794000806203, 41.54607435424281, 82.08878167311644, 28.023081259372628, 23.541180002343598, 46.49548690055097, 45.602768296276565, 98.27654249483551, 4.431686265659673, 6.011541683594979, 81.16665357549158, 48.88017461958576, 38.71866112595873, 69.16199649293179, 82.15785855899593, 59.69075478393256, 69.79238790891347, 11.859052255965818, 31.1593559126372, 61.100496402157, 63.037175077285866, 93.8326977737792, 31.636378281969392, 66.0190402628903, 26.676126525862397, 3.480948020115937, 80.94483337609985, 42.67555218600301, 6.997688937509117, 37.07606007888332, 48.768549151340025, 27.84206079360939, 27.307319794242947, 96.03518686922928, 2.0782614894533924, 83.2503642361628, 16.735710901057942, 95.95558764086027, 41.59482796511597, 11.097720745618844, 36.227331212989135, 13.56505970366203, 53.66219096897, 44.75193337954874, 95.71089543019718, 48.39817559159562, 71.83130909402134, 37.60494706768378, 38.623204450885005, 43.59630374332056, 27.933714956418008, 98.34487016303574, 9.245396534200657, 39.36309110799437, 49.031210017967965, 28.44901412467934, 64.07694066940157, 22.299678845494654, 72.73678120759442, 40.03400814269769, 1.4765238072092512, 33.997635846207785, 78.75916768154849, 13.523773468736621, 14.848751389267822, 14.757875288193645, 1.8365161835663613, 69.71525544008284, 59.150691590428565, 63.30290014011394, 69.23538444861644, 79.16587278120657, 27.274950869147606, 28.342220946682882, 68.835874464702, 68.45517313287318, 77.63754032764783, 30.650073234609685, 34.80042566192396, 72.98317449067898, 82.16104190041312, 60.932723536058205, 15.354145562782772, 1.83971872691846, 33.72818811553399, 19.476262012937628, 70.18421343691298, 37.04655607631976, 23.895968469550553, 7.006666279229812, 91.07764346944865, 87.29633674434739, 38.49942395486271, 73.87778333053258, 43.94682992635843, 63.81126325393747, 70.15013445825934, 33.86058049660188, 37.5197890403841, 75.87587866510268, 99.17070183828513, 20.60319554169181, 13.64029639797295, 46.885069771199724, 78.25482772025906, 52.477669092694626, 37.863020484433186, 70.93321078178779, 27.24318425674892, 74.86689375085919, 45.90252589110606, 39.990117121467875, 50.36679802980252, 3.826851544033194, 21.364853866108547, 28.78096420155598, 52.842143520597894, 8.036741762722887, 90.92806866054791, 86.45962344645592, 83.15151336654716, 74.7077229337378, 58.843654677723244, 44.57198223503514, 1.5164883718330358, 86.08675382632546, 54.72812742855674, 88.94966405987176, 9.275892661552575, 75.41331227142605, 40.94758569567995, 31.25509589679025, 94.5436143711382, 89.86094314075316, 84.19699970544416, 49.50433626941809, 16.314499708574427, 1.6052841452761313, 0.37882709662336866, 21.24562313961693, 96.16484787062578, 92.35294503330503, 92.23340108072561, 60.96740513733979, 50.63254545519672, 6.465733869184353, 44.68307453702675, 39.21335445519449, 20.333729499662123, 1.5542346179095667, 32.73504606893244, 38.447569101128465, 17.464580781671014, 36.74076849468197, 14.411208548251553, 90.60325767059419, 68.49385707264823, 20.102640063195498, 39.19650212396271, 51.81971279851588, 86.41860686484529, 7.9079517681815865, 38.69496059132413, 90.18283723451172, 47.74507639196002, 24.71524385689382, 62.62445405914262, 45.897555255856595, 49.15860033358359, 97.80087660827014, 6.052338098373822, 52.77562669485191, 22.276314586047164, 32.40649816872465, 26.814618009494673, 90.74990593335053, 85.92430854535772, 13.98714125689784, 12.21267707027025, 37.7230656203911, 39.65668016137492, 84.2735917896664, 28.401714650991238, 93.08885492213189, 52.89264260491717, 3.9632424263727817, 28.863761616563387, 53.57043362567081, 11.412802155129608, 17.710879382962442, 68.94604002353412, 91.04162399668742, 61.93667617982291, 62.127728820446634, 62.53667601956712, 98.05429565642054, 25.870720301321825, 14.785954146148605, 17.46530293284151, 78.65833821979021, 87.81882940605338, 96.04512040184235, 66.99711229883319, 24.275251556425616, 24.321688541213238, 77.44011575421327, 40.69379653714896, 97.82187885860282, 22.879542464434376, 72.63946668448486, 29.921042972621347, 83.98678957790065, 21.17515438868478, 46.010719164009416, 1.8549610157702734, 0.936584626387349, 31.64426546548127, 83.46470375828223, 98.61336977118744, 32.57119544723118, 36.99405870534762, 16.013213604700738, 53.25161778794062, 17.452517826317326, 6.117876090864016, 60.99062827772047, 32.016040775392376, 16.355027718428715, 64.39035602084088, 47.99145759694464, 59.131412697604524, 98.96052622363693, 47.738535947895954, 99.96297429122433, 88.70998479209479, 76.06619217576728, 13.897613439186674, 88.81836312173085, 26.940947640089085, 36.70463362460224, 7.535842028274564, 41.78405017368883, 22.35053957896517, 11.76320064742643, 55.60638166107433, 81.4612350578125, 13.985007180445997, 77.8124122040744, 42.670748167046945, 76.95164451229186, 1.4430710539624636, 74.1546773199557, 17.420088127554113, 58.111328042211575, 55.92082797228496, 17.01573688790907, 83.29153920221142, 2.0899923843353485, 14.72719460472176, 21.328351001464206, 94.7145160137935, 14.548789374253545, 72.1268403658322, 72.90213555369243, 59.963746497411286, 87.82833896828048, 87.1563930662036, 97.24585215701704, 81.17076118593738, 84.29707330402387, 17.431337631829557, 25.628143404271675, 3.013435980650825, 22.731765861798014, 63.21731001998793, 38.38862574123911, 64.37832259723943, 27.41491941750782, 82.8091690253995, 56.802168572549746, 69.32999580880622, 35.40071553682053, 77.59904448345945, 37.24007543182207, 78.3644889162209, 23.036997568279006, 66.91024124695065, 56.6683352528156, 22.223769008604055, 63.85572407050486, 53.20327946026132, 81.58677260200301, 45.52492209241902, 82.71996958926547, 94.51781411845116, 67.77617363334413, 61.37465765956247, 21.74759379210771, 39.12581987599593, 68.30100117297452, 76.25203596880243, 78.17304316653613, 66.83323854841994, 11.769789175916067, 91.53539447220496, 97.02349291506022, 35.091199800627614, 51.18155587098617, 5.866333268231805, 52.15951808954233, 72.27250051197115, 94.85813560828151, 69.71820380303403, 16.526651084304035, 5.608331956942802, 5.913014003427364, 28.3390195046316, 11.967274579260268, 18.11158308780939, 68.76232438257055, 58.760952158937855, 9.527104151433097, 92.01341357448219, 12.974845070472341, 31.886503826410394, 44.92790074446845, 31.269626034078748, 60.21787821151141, 26.19946573877795, 27.97403982595662, 75.51773284792148, 35.79712537350632, 81.6999620930094, 51.519741974157995, 53.70851966827826, 24.21246008726832, 1.9248042935481102, 47.65345728502892, 31.051938522172197, 44.67306421821301, 18.157627254958886, 45.992246964679936, 4.743150145150333, 49.41259753404867, 21.985774966406634, 5.155169440076257, 50.1446539734956, 95.02626406901013, 10.344087127674928, 77.41506765577229, 59.32363977169884, 75.06193991713475, 68.29587978629668, 65.77172648272565, 88.35493075023535, 32.493374994474536, 69.55084918464277, 37.97554829619183, 38.0495183034977, 28.72028322750746, 84.22207283032458, 11.305749566453184, 17.338398482340335, 95.50750669808068, 8.980414281391202, 27.46382040732538, 22.55902893771434, 61.472537351978794, 45.68249640227713, 5.685629210411247, 79.99423173074199, 83.33206598516517, 23.217657612149758, 4.194906083656457, 83.47715878506799, 93.51765078616445, 38.28724272196652, 16.972427293416324, 1.9735119015716673, 12.310963146575881, 23.21651787134226, 41.72357643906894, 67.03244879455154, 24.475861524152275, 1.1509599104218005, 43.937910653502676, 60.963699034591755, 10.768417577840161, 49.89692321052471, 24.94056692170945, 44.324332944566535, 86.36367332501152, 5.964110130089118, 0.8141333854312038, 29.398825595545965, 91.28262293680814, 20.14252417760929, 89.54391013791478, 0.18594000501442887, 26.56291276022006, 96.54698664791934, 86.35385903735511, 22.52611298971019, 55.50795495661691, 93.49070246070198, 11.76526212546447, 25.3041004916269, 0.6832737746497619, 54.26378608097083, 23.094298091486287, 39.92888260202766, 28.159192177046222, 91.04056375685168, 90.48343654590386, 81.9247583850172, 18.860296524292618, 7.083312124173313, 89.42179476188502, 26.831480067564307, 44.0810325239526, 80.0369028296216, 41.63289076684722, 71.31257483460105, 77.44309264305271, 57.56862920566675, 23.077080308692743, 43.915997491570025, 66.37642703074856, 67.0131093210146, 95.50715735915799, 28.207493543322048, 3.8877262973796234, 38.45496059617144, 80.52350773555665, 90.45580033727632, 55.05345863495865, 55.42548668458503, 72.7235853330061, 79.65093945080484, 1.7841642431459914, 69.0965113230644, 97.0356441302066, 62.39280000921119, 54.923589092350234, 57.766544514469246, 65.26847744940191, 35.94679261401216, 93.68415638405698, 30.390028008740433, 81.62591909922939, 90.96319098419497, 31.575087130990052, 86.55577264331728, 81.58512642917626, 38.90925669043613, 91.27266612408206, 39.72755360863863, 2.611425791107369, 66.89641083328436, 16.66576085346151, 95.34736113387538, 77.88748602966054, 86.12983440248902, 89.90796941640193, 81.41299525602625, 30.030414468421508, 46.15756073922407, 54.43798030312497, 7.522670133568699, 10.357595499784477, 25.589596363080748, 86.69678751165264, 8.020410408506107, 7.0577924588720915, 75.89869528058546, 14.165104667040552, 2.5314393287388715, 28.88434202267399, 41.092617517493835, 33.636671187350856, 66.83059218841925, 58.970409277477245, 88.72581543144021, 73.35584813146119, 80.72476526721812, 96.24149555495674, 70.46027479616981, 22.179529488059945, 0.7450345385329737, 5.4059324216977345, 41.5436535553792, 28.47857056149863, 26.069079212692824, 96.54490097873625, 68.78238858021135, 43.74576312192031, 10.572686007009501, 25.810802538660226, 69.22464837855023, 71.67941542142118, 52.269431011391276, 93.8412413355277, 22.961834604131948, 84.08250814546686, 30.40820040472132, 98.70912484263748, 94.76327791386595, 26.40907511577385, 96.2157100915204, 91.58545375725642, 71.61307597755419, 61.45579525770359, 71.11961072294537, 73.75381270626949, 32.55287866916985, 54.84360278187999, 21.436200257940328, 75.38609736105299, 39.331437600407796, 35.6660640345294, 51.79875290785242, 42.74986214144635, 93.25650055710422, 49.712951449559604, 49.06478432885041, 64.45710110153968, 57.788084887319414, 44.436194774752956, 70.35531481154578, 50.82431564822223, 92.34123478202095, 2.108768449576459, 64.97113929188669, 50.87185059992122, 16.263903476701913, 9.476452866476293, 23.283684527011328, 89.59291869270155, 27.32063671630709, 38.26403233220235, 93.92630455471803, 66.90914981204787, 67.23112833461768, 98.49950982310625, 17.796645946706523, 12.078176918359718, 70.97490349086843, 43.163528756806876, 47.677820857834384, 87.9827365087319, 13.841575147882635, 16.776639738493383, 30.083434489465166, 32.57260816621855, 8.955569735222513, 97.27212872323808, 34.73115927065473, 46.26610044003192, 53.11894252263822, 80.4411877035556, 8.489727784235102, 42.81650000630193, 16.71888832675903, 32.97496624984873, 82.18406359544596, 4.3893911148025655, 61.890745618450396, 8.432602970997161, 8.71271190660725, 90.33309948865569, 40.82263235547296, 72.82341551668927, 12.756873389836276, 21.147834809093812, 58.802951174389726, 72.32809036295696, 98.37479612202247, 64.65651939863356, 96.55528346520713, 22.958094228170765, 58.058201232566944, 61.23946768197006, 10.159842040923461, 9.16858840546, 92.18975036598428, 69.18703837465769, 37.821856620419844, 59.537525332553166, 32.17899538523451, 30.127898695462886, 50.62993286435924, 81.00806903267109, 11.042919782720094, 53.83820268668102, 94.82332642845586, 52.281442001544974, 56.899083389972574, 40.97773841512732, 59.476356152178376, 43.502088981245954, 14.107515040809638, 99.93928690307105, 22.390619426904912, 69.33212806514027, 11.546234073027051, 1.115542951215176, 55.51434583857516, 81.73870138043199, 86.11738154607762, 38.98018429772938, 47.29734325847092, 18.257968599534692, 34.675052051800705, 13.121320539797242, 48.478048623621675, 86.17646364082471, 45.865909371182546, 77.61158505352438, 58.59568288538936, 24.164127450087626, 65.85442585132107, 4.4549317246610265, 84.4695509408945, 25.317041331501432, 61.7639106234204, 80.08010252936461, 78.69106759667505, 36.59228456434492, 47.616164620833764, 94.06700538706396, 27.57747646539499, 19.99274380643107, 82.09258108252249, 97.93464515186746, 56.642114560560174, 36.27438726835468, 18.41675147788696, 54.652102721165804, 41.74734411684528, 85.32409925149734, 58.16658404199955, 82.17476789257994, 10.866403510959977, 51.012726333421234, 1.7434683192823597, 15.690374489196124, 67.66556749811376, 66.61789236228842, 70.5668889965633, 0.8804978074780312, 47.037241836038234, 24.655335837571123, 75.36337357833551, 76.3539050787269, 41.948195513525555, 59.310480370604324, 49.848324402030066, 8.712800762422768, 69.2925770097753, 55.94038794372648, 95.09261929779143, 94.26034774225215, 49.72029027173184, 6.672871045011997, 17.41061529383463, 40.0874907057746, 37.2419774535362, 64.24944232040517, 3.894790037951801, 81.42302781478902, 90.36194412044075, 77.09255640995625, 71.78813190875866, 3.3244455258457206, 95.38994314833279, 77.09782148142011, 50.88614883011865, 96.53319091675723, 6.869254049202988, 67.48501868654844, 34.039698060903554, 97.8798716662991, 44.6452676725536, 13.368123545199639, 19.973477279565078, 15.118701973830294, 85.58735035415071, 32.00589678479516, 0.7268747446987134, 4.089780734138571, 70.43603028901292, 99.50939081647424, 55.10610416125621, 23.196412337371076, 33.32106343377775, 91.25683834444949, 49.855330747983885, 85.81100528343572, 34.446496703744266, 92.60411349026427, 55.81771026588312, 81.75447401171752, 68.79363344452777, 51.89737460835443, 51.95566022543265, 70.53470430223044, 11.147084654975359, 14.318042495426198, 64.91469754136853, 40.640809830224946, 20.142632078078737, 95.86868537732518, 85.10240811870175, 17.195250790596837, 99.82644765912019, 78.67020904329934, 15.792417705422901, 39.73598669143927, 82.14886380500258, 77.36011834753268, 53.25743658975413, 86.07003079558034, 81.78765519773162, 66.51495125707804, 32.88137721373173, 30.70969595708114, 66.15746063491655, 30.208501817360222, 6.48248828472412, 1.1885989701869382, 57.99251699264569, 61.462654595521094, 68.38067069727863, 76.48042663575266, 51.44033666513963, 28.40931189028567, 95.75662660638822, 75.89679946011748, 75.90067275314613, 60.75592318717188, 15.892047881626748, 49.605464102164966, 15.015363121495373, 11.031699086228564, 37.0073549945256, 78.86936034781623, 85.3370725170786, 71.67836308038667, 99.99629796168522, 44.062075239282386, 44.97244291983718, 98.02586096344615, 75.39745372821297, 99.28967392200532, 40.662338521799434, 37.239713749440774, 56.36018226836504, 1.0089335431270774, 76.79884788095401, 71.16356363447845, 19.80987197107069, 62.4027882161134, 79.24613629007385, 71.07457826147667, 5.364587645183305, 36.997381364810245, 56.526932019627495, 58.14965755722778, 62.68005524910586, 34.37308114085115, 59.46775487409217, 13.641900825898468, 32.690696130224964, 73.09890209896, 64.78001603586696, 59.909348278802085, 80.7629119688576, 68.93918642648657, 25.084699095625005, 7.004438301989458, 28.724388702351355, 50.82416068197335, 38.42470915447355, 85.01600722922157, 3.90753830183328, 38.78885060108328, 34.806231331441175, 67.60395899820652, 81.48689865141867, 74.59166926077948, 17.05381776289031, 24.716028717605308, 53.10897378808712, 32.53182291046656, 10.130142500780492, 44.662051293845614, 58.46905888752754, 97.03126490346845, 13.292372333254033, 57.345409624865596, 19.573717453792405, 10.636903337732884, 7.763813141250453, 94.32050024969239, 27.80398509134072, 84.54617733653161, 37.47633885832936, 34.74437935663192, 94.1381733630266, 71.85813280739943, 44.22847052422233, 49.188395267621146, 74.84930117736329, 88.67772475951296, 63.440830285343594, 55.64627399278857, 2.3774904849267364, 99.60022356471185, 39.46452390823333, 99.95322944456876, 50.437823618673264, 86.4611979499377, 88.46903101704746, 66.67216727217514, 29.73198029810168, 42.11820552826235, 21.216390133575747, 62.34846667783243, 0.5574116464797441, 51.357312440663414, 34.47242577994663, 16.1127785041695, 94.8362504201827, 72.77860648314143, 36.71693413537924, 49.61147168872174, 64.63022566206598, 72.11780195919417, 17.478119083100463, 85.80640984459944, 55.38949647504039, 63.55011815716852, 26.81898125609251, 85.05592905116663, 23.49732382715819, 36.27179672521018, 19.47912041828279, 96.30216058680764, 36.28957801098866, 54.92964068513626, 16.869081527924756, 1.3966469026369555, 47.65598244199659, 80.8588524325572, 36.669134228477375, 53.35865364338619, 63.170440534831855, 50.94906034798231, 59.79366887503752, 73.84728539585376, 68.42906185301653, 24.01213667193186, 65.66737682926853, 98.3636611986628, 9.201158466707415, 67.43968669717104, 49.419991885598535, 58.89529475407757, 90.62241917583813, 29.32050378271034, 80.03081830900277, 47.9826118333317, 83.34335960620933, 19.879321399744487, 6.789174704780798, 52.147640927362026, 68.45362880932679, 34.716876497332635, 86.83610510249775, 52.44980013541384, 89.29170568444137, 1.5644804074151475, 97.45766841006066, 16.035110018786046, 98.35399085850362, 70.11187850092567, 56.736872325300624, 51.61416755869656, 28.42528021335188, 2.9179853094172814, 36.557381710105794, 11.551194937078058, 89.87298047361894, 5.34179594979205, 86.77932644135906, 10.687034822861497, 62.4965440258724, 86.46279561915313, 29.33850207280405, 15.413450940119677, 68.01934115087663, 46.62262435419212, 94.3346474692051, 31.118910743604232, 70.8320479688479, 63.664117039604015, 2.183377448625967, 50.396406434816896, 24.527164968055025, 77.04132985518756, 54.56052685779805, 91.21528129541097, 64.81175219318564, 70.48268988431965, 47.68954605756498, 69.06339041883187, 80.11623683534064, 91.93799334488338, 31.825515639729616, 6.7481794995691065, 77.46508617799061, 91.36428499627623, 81.16945366058862, 59.98344350418707, 55.666144675224125, 24.448641748486043, 64.59966876714522, 20.668674090965666, 41.94589684096395, 61.68763532732754, 42.628915479848764, 87.65277657836421, 49.95799308797795, 38.00144445623885, 31.775584382533417, 89.82180598991795, 30.510654657054058, 2.0495034087890107, 50.35530049640972, 79.97389902584176, 6.325877646742661, 11.500599409888801, 53.078640516265764, 18.220302590424154, 53.57664751918158, 6.586515793752989, 29.603960543319495, 4.570301581821412, 16.993827742835098, 65.10221423977679, 82.0086519687149, 15.296539448187762, 10.68483121397329, 38.87458418082409, 67.4690469095338, 25.340492190294086, 51.08586055611166, 36.68877289205944, 38.1289747279424, 55.827914270723056, 84.171908024374, 80.69673957264948, 10.11874418280765, 13.709806738686892, 55.85975012359411, 13.386027212821983, 59.18734724849241, 82.67723473140649, 28.219095467034684, 20.995778393024246, 26.008113854135186, 23.85398952753176, 2.1354733281519267, 96.78575677987, 58.03274887402144, 13.803039670122763, 24.57360880548801, 23.603384131733694, 95.91043624411861, 19.32201640645844, 92.28029517600208, 50.38498147012894, 51.67215174019171, 81.93405385759954, 58.43474131163523, 19.0668932687695, 21.182316317234008, 55.380575137820365, 82.99544018597925, 58.77640959128569, 38.61455301207095, 54.065114123706735, 45.824062600268455, 12.16174441009803, 86.67582756797613, 42.228118538815416, 93.6177891320568, 83.55011386352228, 76.5107128151709, 88.59200164820993, 63.239778399923054, 93.27456211094741, 37.049149381683776, 68.093184443634, 71.91854513521582, 90.43111615537973, 39.870514808297465, 56.44490493923109, 16.88793723320574, 88.55383677301506, 33.621924147455736, 46.3971997351587, 34.496948347339575, 39.52880871091162, 69.735160108694, 30.58822989565838, 5.058968101762618, 65.74120689129407, 8.790692568710679, 54.87596752707299, 78.57434253475274, 73.15467198248406, 86.38884742365433, 82.84385643526937, 10.0657639540914, 25.483697404425754, 52.98464245187237, 45.56808736184493, 67.57721137429775, 11.357638907103762, 57.80072863725854, 34.849341590311724, 89.93518021809948, 37.57594459968707, 78.41020310571962, 53.78437283204216, 39.363923351074604, 43.262573651326534, 94.25269089802218, 76.81833570575607, 58.2463099027385, 62.798709071780756, 1.0041858216696897, 30.004494123725244, 4.015118238611226, 82.65501877223676, 80.08127706386823, 81.1247540938291, 30.569787134960112, 74.83206649265817, 58.42113413778469, 93.13689430251772, 84.68752686691373, 50.8635271189799, 45.2392362072363, 17.832008060858783, 41.81942914826612, 22.96115902328798, 19.242283807067796, 18.454318079183995, 70.49737566650232, 63.20330536113874, 7.458136183819253, 74.21012659639725, 17.68714830336312, 9.501817994194738, 35.811303635459716, 79.07177041459047, 47.974872766954725, 92.37124359598621, 22.778063859266805, 94.37879271943345, 11.995882640896383, 80.61218958923565, 93.49633664171465, 10.467117618882105, 50.244306265064, 2.6034215656994486, 4.9141276399831675, 88.89407136875816, 31.143258226282644, 13.89179962256305, 55.182124991943006, 96.15681902974225, 52.163959391338764, 19.355957362941677, 13.936546613326971, 36.107973167744525, 20.758054028705754, 0.3296340614533655, 22.365856350167558, 37.29149875105705, 60.11068507877643, 73.9776727509803, 45.47045208420239, 48.40108623108862, 70.73074915232915, 94.95018226746753, 69.06935785809392, 17.59734052757771, 83.55425965576056, 36.25116961968058, 84.87810675107555, 47.268204020259766, 26.11264152781274, 91.06317890470423, 84.01846665349548, 94.36608211544436, 51.84676792139694, 40.30999486737007, 46.410271386447064, 27.488529316016887, 90.45562331368858, 78.31232236355517, 56.65000741430044, 82.94538029576749, 85.87282613966936, 81.92418336140058, 31.172153419246328, 75.21981452261728, 96.47557199734142, 23.675951620183234, 93.92399268786795, 26.333728869513873, 68.87961134939673, 40.45498342236697, 90.55738889222344, 75.97231701972605, 24.49649717372936, 21.02026901974782, 25.962465809770595, 83.1192503465483, 33.54655589610049, 62.70235350600763, 56.51120909624437, 33.15497059453717, 11.509604109505734, 24.75944963489991, 30.73226983065087, 70.43626292513258, 52.207733191007, 39.18458110206042, 20.56396680067306, 82.24106827669212, 42.67645049829106, 34.658062786006305, 87.32516321661586, 54.90470675625446, 94.50163782880466, 53.236569250176835, 46.25606891596171, 47.738113766177534, 25.461882035342754, 4.94853136565504, 85.4287648716053, 81.94547711092514, 5.247702894403705, 35.086050536103954, 35.15162525074371, 66.83823893905569, 23.73630190200171, 12.320041911012014, 39.941880489567794, 24.772750410368626, 42.96351513075523, 58.53983306616771, 78.96359147451534, 23.967667052395846, 78.7846183205605, 74.27678880905071, 83.64377594409721, 84.24323493373423, 67.81797693036249, 18.492978848366825, 4.692952438511766, 85.45361339412825, 45.854131451948575, 36.87401719561234, 32.41759511911022, 79.82650363829363, 14.732218611688753, 94.72674480367026, 53.48081326741655, 78.19917680392268, 67.46701077560083, 8.500852843906358, 4.799776650904953, 50.240904265959216, 79.68597929418735, 78.01125811961316, 49.57900225305782, 18.22426107690961, 31.978991891348706, 52.77964045605516, 83.1328019229996, 56.57392521051114, 36.265656341387256, 31.931227466545753, 12.628625905786405, 74.16741543887464, 72.18416020937445, 6.994859411765997, 22.302796647822788, 34.67150609323364, 49.519040962143755, 5.348543543301155, 58.00010837398184, 10.5544879336526, 2.7529211952380783, 49.91534361189659, 75.29401525803114, 17.874228705795538, 68.77002720341662, 72.80541005440041, 10.121234214795061, 77.97429587752171, 53.858835848168674, 85.38513318280229, 51.73763277587621, 52.218941404152275, 38.05823332704211, 61.88945607766212, 73.41017732157891, 62.897405868318124, 67.45525633768817, 2.01655784582091, 63.42249414239556, 48.220982247268296, 96.46871614369816, 6.417004139957516, 7.391976794006306, 18.91649093406994, 91.06886921773058, 39.65712698127663, 59.187021116808715, 80.70249095797499, 34.65922360527045, 96.96641259530308, 88.87983443613327, 37.50545207324196, 2.4371717212823607, 6.313115420093041, 28.855985837474663, 36.87429205347734, 26.29502097633213, 23.773955593866624, 34.943779812680184, 7.370279218172793, 89.18679581407505, 68.22158218959706, 21.038021124664507, 73.58230330656347, 15.059415207817949, 33.45968024901088, 28.3787301594287, 30.456575327794543, 81.12471275493664, 50.73155564834836, 54.376651792740326, 13.055038054013979, 15.93342434637245, 81.02699958744577, 14.764846877601856, 65.29182049621419, 26.01260941231426, 86.69721375379076, 85.8841539013256, 46.089730244464235, 88.12247289315866, 89.31000944705563, 42.75264342117774, 97.01202320324056, 36.2441857438942, 77.83790119509705, 92.86485612240143, 89.24191499270275, 93.81890002681055, 87.07825928385158, 69.65377799770006, 96.49538232960836, 63.66330292579799, 90.88818661590878, 57.749696082629875, 38.8857515180389, 5.497441337678843, 56.87763628561883, 32.87914569595126, 91.62672192214875, 16.847437200975147, 42.6780193188257, 84.83046148658883, 88.0806327521573, 67.70889695102726, 96.25222727848367, 45.198958531492, 31.492631565723283, 73.28153826095085, 90.85544319354393, 45.68115175678238, 89.7687047409904, 11.784091264303331, 28.979927837998197, 76.37589636305444, 18.68692361965364, 14.000814742779399, 65.93783459817956, 72.347502043256, 16.463706707341295, 55.69387001420127, 34.320680209767005, 60.48781558949705, 69.00707281996331, 50.40203526580114, 71.75431459495438, 22.34673945269664, 51.818981112083904, 81.25899176445638, 86.67299824887445, 50.77235559584462, 36.228306891408145, 33.379343870225675, 98.4829353949105, 46.11428807891833, 73.39133923292302, 44.85590646249834, 91.63008185812524, 55.93095216670632, 47.975559489315046, 10.869862365895877, 89.39115862103401, 98.52684573992238, 98.66487395167107, 90.68558458095713, 40.01391340496967, 37.85673655494383, 31.16994240139772, 11.651691452756596, 96.71137995169914, 55.524210502393444, 66.53527056358496, 3.763019857586547, 35.345910258879684, 44.809010967942655, 78.35033250496046, 62.13137211048505, 68.82978042869793, 13.254153431154181, 66.90693471569541, 70.45990978124996, 62.33504872556459, 65.85830208311693, 82.3654107823533, 98.69060002044083, 41.70442457253753, 23.25293769830563, 82.02368690190052, 56.937263026006704, 18.87916878029159, 40.66270781414156, 27.422767544149362, 38.97796008629976, 27.496786693825236, 91.93237257514633, 53.729040197078284, 51.91038174277269, 28.736435458719512, 53.76392986163921, 39.758610699227226, 69.71677345803037, 35.04481836241457, 19.28693968740276, 33.99598021931586, 42.108005925190504, 92.72267978874872, 0.20048499812943543, 2.3673007031096094, 62.511172568768316, 21.084593157144205, 20.613459031502213, 6.6940030357451, 63.11908701259682, 31.643051255504417, 48.881543713280074, 73.42287660572349, 46.21304783435045, 59.65790774052104, 44.48012549706919, 8.78849429678491, 60.604915514564794, 87.35271146918457, 86.24131720764173, 68.67172058142205, 92.30734607329728, 65.1133316134644, 93.61628617806228, 6.041239372286123, 55.84238010234761, 49.77633669410242, 28.491695284673234, 4.579532113446138, 50.95409278987882, 8.482596195697834, 25.47161211639143, 81.34875978000925, 60.56924124471519, 71.454779316643, 10.639183091800298, 24.663688146005903, 81.32504290003763, 99.31848085675215, 88.02285094369032, 52.93179826452642, 17.587048458121835, 85.97326186062749, 65.74915732398634, 51.47750238991262, 71.86764975799534, 80.13352629146364, 67.27049288360544, 70.35619986754817, 63.545561224861935, 93.6908327940252, 88.03291299575588, 63.55557354040412, 46.88870258096035, 46.217441171150185, 48.1958172622936, 59.16286677383472, 62.71604977670865, 71.53651152209073, 46.65768971425326, 94.10511200537431, 66.11925215864336, 75.30947155108707, 97.24239054475215, 46.041395917079875, 20.91747357365851, 21.51481304992623, 25.233140972553713, 86.62057080369264, 78.95399316669753, 68.58934831413718, 15.816161551500485, 59.36599380603076, 58.26763048237393, 49.7812771530177, 93.57212316267237, 57.778160035020186, 36.26494565138657, 52.88785578613169, 82.00580836582526, 27.17524638745299, 10.155349096959698, 67.30378215666335, 36.92685169331559, 35.973622585895185, 65.162021189937, 95.67017540143807, 43.47015810270314, 69.82725452860407, 58.97306851229236, 40.50435900221413, 66.40089716926173, 52.56153507518104, 23.838861321966764, 21.498478744403492, 94.68460043343347, 31.195315884940676, 43.48955150387555, 91.51431602810959, 18.237700331080976, 64.83153011400698, 15.899312151490896, 10.46145980402926, 53.38441286397531, 0.5611270037480964, 80.7740207929353, 45.65382826025286, 27.217494240607543, 17.48523510861797, 9.411789425883743, 35.548515127588566, 58.18685860041274, 45.80178836769012, 2.2051356405278666, 70.8006406823126, 39.001883181339906, 75.6196949947981, 84.9483881752628, 20.63444831989838, 35.59374235903587, 55.12108891032222, 48.80809568827633, 85.49302107714641, 55.313898893018745, 45.450096050544765, 8.087669485024263, 94.93367143423127, 40.15273351924178, 92.57074590193616, 22.157640412102197, 3.695535994299215, 86.96425152378366, 69.46482988534949, 95.49420578940516, 79.05261299875256, 98.53990257586378, 36.54825605774694, 22.163639345612197, 96.18843487908833, 48.86553945995822, 60.10020206353989, 81.68502580506566, 96.44485025748367, 76.4747297946457, 79.77618241951912, 80.08419733345598, 79.9466379985477, 59.76971436665981, 60.009407140652016, 61.1290781105021, 29.69629640086888, 96.70357375751526, 54.16767505455472, 30.190282981509387, 26.68247155296648, 8.701209927388575, 94.01282632778023, 75.67749326087242, 42.75496403032656, 24.00338504117877, 85.97326843274388, 2.237879138779808, 27.362771497817462, 38.968432638644124, 90.82763509377511, 26.18532441564726, 10.792321703099695, 49.71785114571276, 31.228141489200024, 82.734490206784, 22.794320837998228, 50.44485398439708, 66.25494733135616, 6.850694794396805, 99.86181237413867, 38.83972058959664, 68.664588693605, 48.45517618661555, 35.64981705004704, 77.11862784358243, 25.103974568826715, 19.9321561628535, 94.06110544505813, 66.13722273052291, 0.4286831079174047, 1.776825536808413, 25.987836232439587, 48.36017447549983, 48.009680349640306, 32.632962957517684, 31.26736200927631, 17.255762038450595, 79.0318367738966, 3.977021445210649, 77.28530053076821, 87.42548812771261, 73.65448932264574, 20.04240247339303, 81.11441214767125, 60.29888033895169, 34.74597392164369, 23.278744481743473, 51.293639563287186, 39.18025125639024, 24.265237780516458, 86.20578265674601, 92.53709701007979, 95.21168215308697, 90.98722101459886, 65.6112967286486, 79.42915026839475, 92.08993896143123, 66.73549061504455, 21.36368383994033, 56.24632784128156, 30.210482848523988, 54.42186800217981, 33.837497275813064, 79.82878802541904, 52.046373370167046, 30.44736086461709, 86.47527666479048, 77.51810686305369, 50.86780606654696, 58.199306785060635, 14.794269701662488, 81.52858162951581, 44.07949272799133, 12.154517113444818, 46.933954968498895, 88.56227858789573, 69.38320852063666, 2.616634818688701, 37.07578316079506, 93.29206384306656, 71.53907293969678, 35.74432873408773, 4.955548650924724, 84.59777100890396, 47.58837647265368, 69.98809853918765, 95.8225432246451, 92.5591650417264, 22.424172761117024, 72.4929897919216, 75.68426775853796, 26.98295560745474, 50.07293854862947, 67.45617957409054, 54.46464144764659, 42.092876876632324, 13.907642443763379, 4.360732931141231, 4.92550608056116, 41.44046038101459, 32.985065441567954, 76.37327039873612, 84.24709376951961, 30.207027442722012, 95.12189036713959, 15.661586426898866, 50.62896777115481, 85.0991533900153, 57.47299666125535, 46.94814148459561, 65.57960003066233, 14.700582763731818, 69.1144985811631, 75.57866840616701, 87.63153671816984, 6.318187449145252, 4.873021234750774, 81.22434168213748, 23.76178588897615, 60.051138509646016, 41.61358226192727, 74.89985172847626, 37.04448262814674, 68.3264780865813, 18.212519385468095, 78.9463682092506, 72.95638396488006, 60.94343711846467, 40.31476300163314, 24.177275449406377, 96.60798289987706, 32.108168930438794, 0.1485675675403253, 80.02555699832298, 10.756465834790706, 70.82538042612228, 54.40125278205461, 46.745162186637366, 98.51139131432105, 99.71537591496161, 52.21420829839104, 34.41197082138593, 63.09820700032059, 88.3409863663566, 94.61156159725353, 88.58725547062328, 97.66677786140761, 26.397534373373155, 25.275480099446103, 41.09899004184686, 60.59558796137644, 94.61167496671385, 97.20030242998806, 76.55135335768945, 65.94323581404674, 90.99843865825075, 2.3295814140842586, 36.30781911457698, 52.137424911448306, 32.105125771135846, 40.46256799602608, 80.51648410551732, 34.833016477618195, 39.815265059406826, 91.29934467663642, 0.3924193653612962, 36.639642030220784, 12.645321681950206, 52.86410180598914, 65.57808062206497, 85.17771863480787, 9.272691344053763, 6.207235891488249, 13.238974008257088, 6.010889505554529, 12.025928704581467, 67.78441886001035, 6.67717258559154, 70.27750045206102, 97.68208199212938, 26.140649714319654, 22.404998781658648, 94.39307220754849, 29.910892676390322, 9.899988381917623, 95.40853766380611, 39.18734967235103, 55.76098356826337, 7.008716671282356, 65.72159521977606, 97.69100408590128, 30.148335005571692, 5.812107244291442, 6.863578870041708, 67.18843513090916, 55.87428685920138, 14.961036514931214, 64.79212384336626, 9.301309708279948, 77.65828917586119, 70.83284517802021, 60.719098656475914, 82.01181289164539, 45.003914344775865, 62.56497368312935, 34.207144180558046, 17.15962633727188, 80.85749067100741, 17.414802153443333, 43.5166603880002, 45.48661714314455, 22.165001212680625, 19.25034623160333, 23.935414157475442, 91.55189358852995, 90.30551898637292, 73.92541181684052, 27.64167939584079, 38.288083552317666, 61.84880047205791, 62.845753954322994, 50.321056165871525, 5.1752356158733415, 94.36816201174817, 49.61376698347819, 40.99971157230507, 57.40901397039724, 2.8359143123891206, 65.76941360241833, 90.03832381188383, 33.094814520254886, 79.17925304908347, 82.88484707041597, 51.06021368423859, 34.67482507245522, 74.10968859488437, 36.64952470477934, 15.999182676369305, 89.51550557928755, 67.96839680208033, 4.0463623866538345, 42.15318374805509, 81.79423948281318, 8.516642902927686, 48.07686362652365, 15.117665203537122, 6.968470958063488, 77.96981184896116, 3.9472274133889984, 83.29475256259865, 99.82307043253283, 27.903660518655016, 23.23315010052889, 94.89140749793373, 9.001865798001285, 68.65924626827817, 36.36958216905125, 12.731576670714395, 54.96034612581157, 18.806982792206394, 90.24073763068407, 31.38995371650398, 94.20685058059422, 65.23007526986173, 69.4763216056204, 46.17901204626295, 15.04097890815077, 94.37151260080353, 0.5648041116356861, 97.96648906182732, 40.90175781270753, 68.86800372352478, 74.87917095075838, 47.517068581310205, 46.6927267755888, 23.432111541943524, 12.748269030876303, 85.10154968987969, 12.205739737254506, 18.41901221459952, 14.089410556408266, 66.63021408457108, 64.94362511257405, 78.47058209919739, 27.692189488830156, 73.35330453495175, 10.285461405685936, 46.761187322869326, 69.171487986107, 51.68761354647858, 27.601264279103177, 3.7713952139925233, 66.74119358184706, 94.07841141908965, 55.767841762765926, 86.55851873291807, 85.4381461899853, 85.97230191382964, 10.362222036526415, 1.3724424357060339, 60.37665787952308, 3.198413434285585, 79.51035794711655, 91.66946708320111, 69.60568545821948, 72.82151343812299, 70.40186599485973, 32.68970960363614, 77.16652620956557, 62.293256929802624, 55.675554978979314, 83.66345503510504, 21.499749197303487, 18.293411835179064, 2.2083167892502087, 41.12718262998929, 19.50110137274983, 24.671815937962414, 64.39175174727747, 25.042569629015354, 76.34520459808364, 11.792838726289723, 79.11672755862918, 6.081315532204012, 41.337666393903106, 29.39769328483779, 44.19807609893439, 64.9191293172487, 6.534351359430635, 67.09524285666308, 15.514398604296886, 93.45390257464264, 50.24536243826672, 78.53306013991357, 19.52645397309286, 19.417765255331755, 23.714853972772865, 51.9603475408142, 44.50025505514563, 94.88331633720647, 83.47630988343374, 2.711090394286342, 66.2240781981991, 82.83209023873476, 85.56431106540533, 94.26333204310971, 93.57055288290147, 90.99979351519261, 48.50699192697697, 15.976941013489466, 82.31525436216491, 52.20031647130371, 90.5025802873594, 45.733534622401464, 95.79755239344246, 55.76566335207113, 56.852427341796975, 82.82891454460703, 4.9450346215686665, 39.54479839564192, 30.682764691228716, 98.44871921295108, 5.9754101944689335, 69.42851246254199, 13.964436483028763, 89.25297861072528, 92.90419247661613, 29.25670284587617, 94.23245354769217, 49.48925485530905, 39.37789461080179, 56.2283094022441, 22.045207672834433, 49.25957734625954, 47.33064859339363, 0.9281247108489876, 62.83652237895223, 99.03969357285611, 96.20653303687067, 70.56820297768482, 45.56025375412429, 74.06077907317325, 47.3530514986585, 60.37241977487523, 83.7861421027954, 93.39996490124351, 37.30125167260089, 7.455153156797412, 80.29310754418019, 39.06328228127, 34.443104290085316, 21.123497754392172, 94.38757979760359, 50.44885338714485, 43.855660176847344, 24.048662313413093, 3.7835964244350984, 71.02188317167426, 51.60421872748125, 15.30883291990499, 0.7765837200681136, 57.18401353206444, 74.26208827178816, 23.91046862199364, 99.35665192696453, 36.552943178079445, 60.39085038672523, 98.52705122418426, 72.13893485867064, 81.08709437356971, 86.96885115583109, 77.56766400503572, 58.047481269505774, 46.12569375479754, 56.85590676298935, 33.87171363929, 1.1337836151666947, 59.65632772191037, 85.13428635741131, 59.27806307085402, 90.44778509864749, 8.95426468869056, 59.05132590575963, 86.90456619119531, 26.18261564599428, 40.86469919968915, 65.91862372243783, 57.93328069247286, 4.888868517712119, 75.35044262081327, 1.2823249647782142, 21.083486798135564, 27.484233859538588, 17.83060471431589, 73.99669204633305, 72.89404493029444, 92.79832843113324, 0.12247764678335882, 93.35842390049423, 48.199073272887006, 52.322777662188415, 27.94117627010967, 75.57572977914644, 45.44815390455893, 50.29208372017525, 96.42020411172152, 37.198083116373496, 28.919328458365325, 72.91348766118838, 28.18008349670982, 81.9336296932956, 31.985343798607314, 40.70635660058844, 57.565450701692775, 27.38785697109668, 24.37615243918676, 93.78841634736511, 89.37383735549514, 36.893248176795325, 66.85197908608961, 16.407124753059897, 32.54818567514434, 82.91883403925921, 67.95034173184538, 61.78560755113427, 22.124378603482597, 69.1091751641951, 62.78817217559105, 61.628412062451076, 60.224696414682775, 0.5215261079899225, 92.62594901490897, 92.14851550597062, 9.862177944312634, 70.07430026760647, 76.16028519686155, 30.97191876624662, 21.73966282976705, 3.6385521056610193, 44.03996047165602, 65.35881839200403, 96.28832245865048, 52.19657067488883, 71.72480544377034, 6.665356465377304, 24.799652383183947, 77.36277933456424, 72.16715406169979, 36.660058553284195, 20.637789925263405, 93.91036274021933, 43.49201005302918, 60.611391243159474, 38.23911556557301, 76.33058501177953, 34.97615132253535, 25.762028132074267, 44.110414232734776, 27.992964360373694, 34.49814210291292, 86.98012930532018, 78.65681454241587, 95.6893712372059, 48.121131602251474, 25.513383278451464, 65.65255033250477, 49.40803396839487, 0.05736518907684118, 78.0511241356642, 63.60940599547561, 4.206156424122631, 23.78323282896645, 17.825517289263015, 14.87645765197917, 51.00917266350506, 70.61717303256698, 28.216372265861512, 78.41935595081172, 48.140843788311884, 98.19923130814452, 70.56163484575485, 90.9548031596311, 54.598178282377376, 8.08900389656555, 24.013215445790557, 36.080256525459575, 84.88703292652406, 45.939179149563614, 72.76666683519754, 0.018939150516350534, 12.033113042214138, 0.4444864252542424, 59.61483969210296, 24.539910285119383, 59.77831881582682, 62.294744572294746, 49.695625881998474, 16.65749069912693, 28.58068342315503, 4.407591014431034, 48.579438179790216, 19.19661252315752, 67.12807765132874, 7.664836461334723, 35.034088071379834, 30.004671284892346, 34.785554389627315, 3.6238244876346415, 72.8813751534421, 89.47863220093673, 43.085290954265865, 8.5002989449264, 61.88364555628696, 51.9454559570586, 58.519611809015196, 70.96423859952772, 46.28954046948864, 14.501823422760562, 45.94637303184804, 46.86500189005012, 16.752998107154017, 14.704992088128, 1.5857220098683178, 1.1998001587091967, 3.8399564637211725, 76.88459490753216, 13.997615416783093, 95.52503926692353, 30.027777516137977, 85.09127271188879, 13.187774584486622, 59.120916015277515, 89.92128272781406, 39.238787507179815, 50.43469702132064, 93.5244461231184, 92.70494717581647, 46.727110339001, 44.16169041801148, 62.25252741876709, 3.5077986718789034, 3.976216167479796, 35.33763398946902, 37.06155903205246, 6.231153887180707, 69.55681992129712, 6.000807934797225, 15.737520890758672, 92.34179662725441, 41.24934922504412, 78.37915256168499, 32.20605298340601, 41.434436706407936, 44.698357052519555, 24.544192812230914, 47.98942122896401, 82.74183883671388, 96.23617561291599, 91.19057241801913, 70.16489491918252, 64.62688653778935, 20.906563786295507, 89.61120664896156, 22.586356903923633, 69.1852311047725, 71.12184643327362, 90.17840363632152, 13.709079878544927, 15.900604493957449, 76.62540546291584, 56.85609428398985, 11.837718084567495, 58.40188577041654, 85.3435097442169, 81.21160629269859, 97.9729288461351, 77.46448186385851, 87.41414652670278, 23.637882989813253, 48.29794954272695, 97.35665236155924, 46.92353270392036, 28.09597614237067, 54.55080568341859, 83.55063292209442, 80.97850192695137, 12.381702850334797, 88.33833713898636, 37.19444270368266, 56.26460045865477, 86.99381274600125, 65.64928080767032, 43.792237342515385, 94.59998950477157, 76.08614645699096, 61.45348449156784, 1.243412619078954, 44.28425202921077, 69.00512723675978, 62.35428733003363, 77.99896346262123, 21.1624328725167, 71.91752774850183, 66.32283264063149, 71.48187894897175, 24.223335726137517, 7.774858787027494, 73.9159366101007, 56.3490170763859, 68.52953111612192, 9.430816994185776, 40.26362847654711, 55.512308482823634, 95.38672417505299, 57.383242765987184, 5.5621293540157986, 10.082125475618342, 78.04390249414298, 94.66665788839373, 96.09851249945814, 64.785074439656, 15.078001842351995, 42.95022159728434, 32.325937350372904, 63.29445976982636, 61.47508317403032, 62.36618677694927, 8.444085641619958, 85.8286033615711, 66.78374361194756, 54.88392169536056, 45.62163500022027, 17.469548231470633, 88.6298679481204, 41.585573755424676, 42.166685166596906, 23.523748685940927, 29.943843859125906, 31.887504591292824, 1.6545438309721439, 33.01714475952464, 24.35425392208138, 42.84139997647287, 93.32055797933072, 17.029994543393755, 31.901044985717775, 45.213477784785525, 13.573557822460003, 45.581389099541745, 73.6777574554594, 58.070279287827, 61.388663373665345, 59.54327090773292, 16.667890664642048, 41.32971037017129, 71.444320573034, 44.32722173379291, 97.88820032970862, 15.60306673731775, 40.763312703819345, 38.57719927320008, 45.419208660504125, 14.575039960734449, 11.3184309375992, 29.960003142892276, 56.90582493922219, 7.078369531583406, 85.52463721409275, 32.08561379694007, 68.28810233427997, 36.41214149970392, 11.744396609373208, 7.741468669737728, 63.20747286428703, 15.046574920709277, 15.52958849127939, 19.498025744619007, 43.74208730676651, 72.55878685314634, 90.66608489030277, 2.3545733574256156, 0.7484630590724795, 93.63000988107515, 42.54132210090851, 86.85516389473045, 91.35262643328784, 68.81800599207959, 6.806910857958504, 56.9655736645653, 33.61935737009929, 5.66217956356021, 43.71646354811596, 53.376333949518994, 77.37600909805292, 36.77950373836153, 6.025443038365863, 53.073565574229576, 9.702756649176624, 58.152512660508336, 69.46545365601375, 38.25855422865634, 82.63154626686958, 7.83628010077253, 82.74709131405274, 33.50264833374419, 38.68491379049524, 11.455802390633018, 60.077886651632305, 23.922463077735458, 0.0727753719498514, 34.07643148493463, 63.55952566101355, 91.08428961314544, 19.099342486180248, 26.551015322467954, 16.89633009271082, 74.68374473565538, 11.23777886286007, 10.99102351306862, 84.84225999968325, 53.487250370299336, 78.04773034210933, 81.58092556009781, 19.591152718069928, 40.93619000663238, 6.091204476674417, 72.7870830873604, 25.381280630764447, 14.048464556051265, 66.02129973960601, 61.68577923330153, 79.83534907739161, 60.3005546390618, 17.597919337928737, 99.89351681107894, 79.85360094408688, 6.119087128698442, 98.18791378873388, 55.19542022973907, 57.6609785038275, 26.495679840516427, 74.80102954072862, 56.99365388318094, 16.752560021382866, 42.18849837896936, 64.87209161495264, 21.38924626151355, 3.7945898452604765, 8.024291062876065, 39.90620815693963, 3.7010352232919153, 53.45297873967223, 3.266740898522058, 99.95356583079892, 62.995429983674114, 7.002474580450246, 63.65115161047633, 93.6380382636612, 44.17847063156982, 21.694806776929575, 56.71710328733231, 59.897863950999806, 21.58421001873496, 82.44548134116619, 40.4825190360383, 35.55580535810401, 48.08835524615432, 49.58775727132, 81.19896186201552, 32.41305708955188, 44.464293338148586, 78.20092953919907, 13.829277136827455, 64.98093580069971, 77.18367512010562, 32.11204719823093, 6.365413590382818, 17.087575242817255, 89.52905863787906, 55.32833123584213, 61.53240309848403, 97.2974312824083, 1.2448997812105844, 66.93560026709484, 35.110553956966605, 43.53654085994783, 21.59653584294886, 6.609541421570464, 75.10810668167139, 83.92064069013779, 1.8678327004817197, 85.78305924456261, 27.35443893272538, 23.280973416839203, 76.8773466926644, 1.5550773700755194, 71.60827397541914, 25.53335615567066, 55.25468800883182, 9.626409282730709, 68.14868032066308, 74.40729396626038, 48.54312743337403, 39.53299500828602, 11.933243246484615, 86.43037126347673, 79.23755648583575, 26.31181324003563, 41.21195722011407, 98.13182541412199, 10.89239067212281, 82.25986897872848, 6.310381971627354, 49.89725862044813, 60.48699426521695, 13.832354939991543, 50.10970568304556, 30.95695486038379, 23.868027349022768, 39.47925257804141, 96.12732815723093, 48.604620420164146, 50.633251608191365, 63.14460667220172, 13.576605483661929, 88.391954095941, 57.95299784534279, 94.75383434139493, 68.37432072264534, 89.86396041408699, 30.97367415878114, 47.23633403345664, 94.06799238858969, 22.6755135539214, 38.68645108203812, 98.2562447344007, 38.64273412106579, 64.10139569499445, 72.09772668295264, 12.957353924618943, 22.900370287714157, 89.06688246547645, 77.77456782056356, 32.5228424758482, 78.15919038439839, 59.45304501555311, 43.02968811102479, 0.30807322775011636, 2.6035134014051, 94.03905285026647, 55.470044066429836, 16.058739019824174, 73.96360607894631, 32.722435430967856, 96.5890517397972, 70.88480141760422, 35.61703020317487, 7.883045902685493, 8.570891493981525, 5.194780925505638, 76.09207813278931, 59.69643222642781, 42.73151201214416, 98.15829253400743, 37.29066257004974, 46.26542023069204, 48.30949795229561, 62.43501275742953, 56.62704392515621, 73.55661157689109, 19.939282014676973, 13.318725506169981, 53.300093463718554, 52.38544464407374, 16.516692139224542, 73.47942577015976, 14.204444110834158, 59.653410959754716, 51.99791207504176, 76.83703864622325, 96.31836099604593, 77.81526913954083, 33.66662480537165, 42.893001511827535, 83.95666854749327, 86.62329176869613, 75.62054549644682, 80.49003157092922, 92.34216237697868, 23.111096142751986, 19.347816786176843, 99.49273771772656, 68.4381746413109, 45.012323444971656, 31.463861277390926, 8.619957358160967, 26.162731220537083, 63.91936200183138, 33.88333364769333, 75.73551840369485, 10.352614965608065, 24.37114268772399, 97.54016130256956, 58.26862733640581, 73.56731122355639, 88.69747135797414, 83.55850132943162, 99.80615675681308, 37.65686305192576, 44.03854648290716, 45.17700828007264, 84.03381010061503, 60.802734576414665, 48.53719916974468, 54.55647237213452, 27.424507572448032, 45.63993448105133, 73.74881239145435, 76.7580010563544, 55.504338488574966, 25.662517431638975, 41.06392669744853, 49.35748260829998, 90.0272905079053, 87.80567577581286, 21.20214256277523, 59.261359134078205, 70.69905226968818, 15.919497583890818, 27.183317984859666, 75.40742992007942, 98.45286521923612, 63.30608289469279, 46.638406232580195, 44.517818903036975, 94.96546665428352, 35.011049287281296, 65.85352609569487, 28.579809640073616, 97.8037946989547, 98.58077181338963, 13.166495560974923, 89.70660002848071, 88.91821545940446, 90.75351548598182, 22.872183681638447, 68.62566651977615, 78.40514044120565, 12.780423501655513, 86.85888322057446, 0.7440771080926445, 15.706117433537791, 56.157468098958, 98.36200186295075, 73.54454803661935, 56.25955106661279, 25.457664869190577, 51.031641633891375, 28.110277652724523, 78.81611155010712, 15.803979889961406, 73.36053940397387, 92.70156101762196, 19.584911012367012, 77.18183581234699, 41.19593695774233, 71.75758976964958, 1.9381359586306712, 3.574037587942658, 34.51197160346039, 39.191136971612785, 31.910048049074668, 8.266192884581947, 16.503612550767286, 78.43619949472563, 83.68802974466136, 32.28946420483967, 30.782012112901114, 20.736301378800125, 45.51244628765699, 37.47690414701799, 88.39528438134533, 81.06723742065228, 59.91303171298069, 10.18780980555859, 7.678329744982948, 28.816790848879425, 84.47000820383607, 32.47431887776071, 81.31888745040247, 30.52747741933174, 85.35625465762263, 82.8410563670317, 54.52105647295977, 78.04768143745487, 94.88406961578362, 55.65436739498521, 52.042341073389565, 63.24426582372092, 14.034247533272303, 64.25502931970384, 45.163134744080345, 39.78484080461035, 79.56157239486085, 79.53635309843922, 57.453356703885994, 4.418825373158352, 11.477087414691955, 21.982438982463883, 32.15914800784718, 80.5594668301431, 91.61929639101028, 25.258071907705414, 91.14834702787232, 83.96621655619568, 46.69983755934639, 82.23068300945027, 2.330181797864339, 83.54296838567036, 10.596973922290164, 33.4491267811171, 84.38814111264664, 62.23636850178236, 95.24567928129224, 51.54810545865595, 15.381259251832835, 74.00641602934303, 89.27675555743943, 9.07724153347742, 38.47105995492666, 70.89132480397785, 4.960079518287852, 38.175168876644186, 60.13401863816242, 99.72594489485272, 74.85098959313768, 75.94944457471468, 27.972864723353496, 41.490373153888314, 0.7089426800739318, 3.811151652470013, 72.34167977943004, 7.554823424832257, 35.35798243319183, 84.51672252079749, 39.905944821529616, 29.82657019576518, 68.12002766034325, 79.34136513819614, 71.74766016418194, 98.29879599914818, 0.4495771738263543, 3.5416746083431483, 80.04033136881404, 59.549008282433455, 29.667935305718697, 41.53492679283105, 0.16001865628064715, 63.696605194913026, 23.394210630503707, 0.19768511802424893, 3.0333511046369055, 63.158415941755266, 78.82002018424049, 52.59871855637215, 87.99494983710777, 68.17234971722684, 92.95009979285065, 59.53324785568957, 22.47460768220353, 1.9811981797558054, 66.77680923119772, 57.69876865759187, 25.11859745171716, 36.444600364951384, 9.29057889991639, 74.30758021123634, 6.819757782646663, 23.386379132330624, 61.502887803654716, 40.512315226883025, 68.3876954113488, 38.27870300175551, 12.111489278814268, 39.217108513940794, 75.24465049719028, 17.459184684674135, 16.29612670387308, 53.96675024811862, 57.04179078948317, 56.68519734859162, 65.49659967679443, 59.99632748343671, 52.02637397241724, 91.08243803038792, 59.76008395442178, 14.71426566754863, 63.64024708225021, 95.60668478495306, 79.62854800164936, 68.21896306498232, 10.93266203479053, 40.12098003703587, 68.76675768292203, 14.843169503649477, 69.95508481739085, 12.78729874961021, 45.0322773879349, 8.87499395080562, 81.89554719341375, 67.5557383863227, 55.8682617356559, 40.97789514956697, 80.10121754196796, 45.45327610296561, 40.07024791341966, 79.63402928977052, 41.43996791540854, 30.116082531628308, 99.96155474623485, 25.159657532498038, 99.5883564607536, 20.827279021327083, 91.05411074422469, 95.45877391864677, 90.43917498388632, 72.98247924153964, 49.57483737706203, 74.17424141767562, 20.238915995945604, 86.66578086763802, 89.68500400422403, 30.365112914973135, 10.371841614869037, 25.52970967625584, 64.7634834180481, 89.58337387052522, 97.09973390903728, 27.6845328647951, 80.79710573701806, 29.809881598480093, 68.20889690866527, 41.886429971864956, 84.88830552678687, 54.272986572569636, 6.78975852924607, 81.60718712988385, 29.218682309193277, 12.51746141461153, 75.03791647323733, 0.5533306057148302, 3.753549356837249, 42.41426986972229, 73.5213690779069, 23.05965878136099, 9.859442970102494, 57.23082008035959, 33.84979288368992, 82.69023492074248, 7.641191900620203, 76.90141619149497, 59.416575736023304, 64.59111192650856, 59.92436798116441, 8.895904971719283, 11.67744869382572, 24.96854411605095, 8.83961062973233, 94.3077662256308, 29.9295052780437, 28.287822441461273, 78.07385246672064, 92.216008126574, 64.44423145540568, 26.62067219244405, 40.546420651731495, 95.53823059818599, 42.19728688249372, 44.757046883017026, 69.77040221015976, 64.75192513579545, 30.21835943169152, 1.640569094908928, 13.942376018208268, 49.66116835063893, 18.44206564466009, 99.73293779242887, 75.27104283401829, 66.6908854812409, 29.202025337827976, 57.45706407377051, 10.395038201804185, 43.01069325632433, 85.60759098321938, 85.90430317729519, 97.92399650811531, 68.45334025129752, 79.12157402702377, 69.68288052511154, 60.5726853304435, 20.13205459586549, 94.40155005741038, 57.930973288535625, 88.72018999132206, 48.67588093688426, 61.337553529226994, 70.76338187451769, 57.78669861550378, 63.14680130773102, 65.92209034991558, 4.619454149031821, 12.187603899329968, 39.67121072321809, 46.52100840867996, 22.826837762234163, 27.47517241003382, 53.625084229933165, 58.42840721141695, 0.7597463452053033, 91.32615963149578, 91.86697475474665, 83.47932785056736, 2.7553198164941284, 25.253371148400404, 12.088198215066036, 69.26418678084755, 77.522741156999, 62.432097613980766, 92.99615607405595, 14.061245845048786, 13.673311192567528, 91.35568880224425, 90.9982040428465, 20.4384009093026, 38.37898963178616, 54.83582443632841, 47.74920643626809, 13.773590670547842, 19.96596714308354, 1.0008489275989074, 3.756689736111707, 50.395096048783635, 65.42288146807705, 73.48801230091986, 74.59267831791368, 12.098641469136295, 0.2811952409985108, 11.830551646434762, 54.79015100909539, 32.24009068952213, 87.5294838109737, 49.925684746363075, 19.616453478285788, 45.72374623402871, 24.236933104597103, 95.13064298664574, 20.414282267690897, 89.27001234105363, 1.067959870816193, 70.17195167744282, 6.246105069764218, 45.1479508396571, 53.65388152350692, 54.07744457938733, 58.842992031954324, 12.22623042155705, 34.00192007583362, 25.688295153634666, 84.80297266131328, 84.60130986832101, 42.368882099222105, 22.094387918288515, 59.86480671460407, 98.87083226359938, 38.07633573611901, 94.33769067874937, 14.24590102252009, 23.33878351887896, 48.06531795350391, 24.128381261828714, 64.65442886594657, 22.572897812353567, 39.396475536403194, 92.50160781704098, 36.09003575458729, 22.93992889089269, 50.712826973326116, 64.36617528671587, 42.90124615217458, 54.00137699098517, 36.24432265438606, 61.35848237826564, 3.436882034448119, 59.20715272835931, 17.380695425317594, 15.230223885062555, 9.95754057047229, 16.640490326550673, 83.53509561454005, 87.4773584627613, 19.870766822526132, 69.09214853188645, 30.129646418741395, 98.12657385284602, 57.694533301727624, 40.56078960447049, 30.960997973033955, 99.12277932685227, 83.3366263840697, 49.30297516243719, 9.447213974924317, 73.22780318732485, 74.59549724545754, 46.780772650144165, 69.12151128046293, 89.33677787052316, 11.51441482206076, 40.417310100037426, 23.76681408920932, 9.086668634062466, 3.177327931628948, 26.900976035202582, 6.119220079007137, 72.37816821516871, 13.0068087855723, 32.3475719785627, 83.65297452562818, 68.03927247209405, 78.00578639949343, 73.89205700687377, 57.229683961036045, 52.49107929264565, 60.65391235048042, 96.98443743698496, 45.143188750005535, 82.296960512939, 7.595887062429718, 11.845368831930326, 90.18754292498296, 11.661749761363783, 3.4735496554550216, 24.32869692009071, 48.84373873728074, 67.71376771259774, 24.49429363838682, 28.743509434349946, 51.8788801088944, 25.86251222484284, 44.21184474234459, 66.38812190417632, 19.600164414157696, 16.69122967393337, 34.64164065916881, 30.649849656820905, 41.029242301438586, 17.681529802922448, 79.5105690001857, 65.07507068608017, 30.763471181589818, 73.95731768713065, 22.354275315433057, 34.88664829405226, 99.11768027690935, 28.73331446413838, 4.549152785954325, 97.7671013451811, 66.65550869285798, 54.15754602685111, 0.4827796675693996, 84.16660063881825, 31.654988123698892, 17.325671925334053, 46.370827210888635, 27.071477848417814, 85.65799554605552, 40.14442480942634, 78.26561675894753, 0.23310123020253704, 83.51832734855886, 13.30661157750127, 26.691644931054302, 27.214873650296568, 88.13472676792678, 51.125034469793185, 7.916569473427493, 21.27060776078622, 68.54786455873219, 40.24748976317378, 92.60577936728127, 60.73475518267386, 51.666866022873656, 77.55320357327537, 94.90168593344772, 33.44784661756819, 60.39962526290742, 87.83777846169045, 36.97613318843611, 76.49883456903392, 4.403291446954261, 77.00285102335044, 29.519634609542777, 90.5037951284184, 5.06509078833326, 90.12465535789765, 63.24840644027498, 29.951188171626285, 81.26034597573847, 76.63156026230199, 16.847898521002904, 23.531902357240742, 2.2879728640357477, 59.53672791277832, 5.076048171878056, 40.900932681840764, 71.65578114103022, 57.29194380037963, 44.35129042196425, 75.87640137814677, 50.41018907962872, 73.98237679312916, 54.17283813583934, 46.23666212489383, 84.07529053963202, 33.76657044906825, 28.04499249382809, 10.467026504224364, 28.58289858674604, 31.257027152075565, 0.060818610495128045, 94.24549605031521, 63.664433127081274, 83.67562034866896, 64.01912418925883, 37.15747262444833, 70.56540206096265, 4.289075950609611, 27.01108827494719, 91.05712648212264, 44.57830046944916, 77.16668768917937, 75.57487991504304, 43.854554666954535, 88.9759390197754, 89.3634565450664, 15.581446892033469, 29.51499541113988, 23.040668451177247, 35.03483637026387, 53.69511094308576, 76.73090306961244, 48.98446034111251, 82.21757152385685, 40.381246742174106, 31.33094445521295, 43.792651717046525, 33.96544520672765, 42.61604808644721, 71.72003106345949, 30.874196938265776, 48.942266982879005, 17.90979659153131, 10.710763141483604, 88.00635867472374, 32.70511322377473, 56.718370614910405, 17.306484209023743, 42.04009672437148, 21.964621055717014, 11.17788964608688, 80.4087612519002, 45.544873421910005, 90.38399661521609, 86.8719056963016, 14.535398266471732, 97.50767158205504, 68.59265544752525, 76.57904048656263, 25.54175373234575, 5.397952830737829, 98.98493834338305, 75.93677231841568, 11.545150246016156, 92.03165223521995, 62.2973519443638, 90.5820006864398, 92.03479679083972, 75.02472137073812, 93.91660204488585, 34.69356255870786, 22.616407244695345, 99.21027435510489, 39.99962930338642, 79.0914889013456, 71.13764311054672, 77.44077969251761, 27.840356088006025, 91.14425798626763, 46.17935613097326, 98.96885771460772, 95.65646507121166, 41.88271670724845, 29.698450124155706, 16.552206405538083, 64.03400751243774, 82.18224913979887, 38.66269766333594, 94.93865955674914, 51.485891920890445, 66.56291358570317, 94.90679431973545, 34.3162838124938, 10.58715995911016, 83.43361792619326, 86.31408577608151, 65.16570788619443, 58.965796918589106, 79.4504156372883, 72.96555799155153, 68.3923777931441, 41.02811426265271, 21.253646217935607, 88.48587312391506, 57.111205184584904, 74.68277668959156, 6.779670979707353, 43.48578507603025, 81.30425141175635, 91.8935809807351, 9.016748914344763, 49.67602417107295, 83.52866878771015, 90.4808151731252, 7.0341166798536525, 55.995766073810884, 33.929737120939876, 73.35436501504866, 33.005764712983435, 34.17093423596366, 90.75579649279516, 65.1227303563721, 82.45097655283728, 13.504030343066642, 5.4754813137757985, 71.92038943146667, 96.8386244532701, 81.63269353773455, 55.92064375398016, 43.74408315999829, 15.67127181482414, 94.1376032697244, 90.67348313318355, 57.363945348614344, 96.6495544690976, 95.27525078766959, 63.44171339948549, 49.53901845698954, 99.705146776801, 1.4933715547568505, 33.53014184338333, 59.728333965150156, 41.68536102326462, 60.20583005113301, 50.68063140646573, 7.096322800040522, 13.214535798578664, 39.45075254413499, 30.038653481346444, 32.05289835275613, 89.55231573901389, 33.05716282979665, 47.89843102240533, 74.61405017515243, 89.95265628954377, 65.39173495398917, 72.88694171018115, 43.9697222842554, 31.078058983316204, 90.40724592109977, 5.794209214577595, 32.06567254155992, 99.29364660980242, 77.8249145803374, 3.007327110389424, 53.65351664407224, 17.75178666457703, 58.11835088810439, 55.762291091896735, 7.881466217176336, 22.30280601131236, 13.620974194738833, 30.098620333885506, 53.49028873727752, 53.67486408189555, 94.48638751062317, 39.10094692511742, 98.20023719817299, 68.40745460272412, 72.5867684461766, 19.343141507705518, 18.98361726528662, 14.651204504881743, 6.370621589815451, 83.2831008951287, 77.36334869209543, 42.175189234719966, 80.30142807212474, 67.09025361619399, 31.736894326983723, 12.895295134816864, 27.1939196612456, 8.22621927563506, 60.191103861701166, 19.715324690817717, 3.2573010516258605, 75.8941103172249, 9.203118432333168, 77.93291512661723, 93.58470259147983, 99.7688854402324, 35.95404975236244, 61.76738006109779, 32.901213395648945, 22.160996127521425, 61.7051858777566, 5.008981699975934, 45.662284338733826, 96.9143262665095, 45.51632734129822, 12.260459375306132, 47.25384210055752, 8.589333596496896, 20.305046168517737, 69.72351890917213, 89.8011846685534, 77.66978463969953, 72.80504451079531, 28.863392792579578, 18.268079556776684, 99.89492595150128, 14.314707200533562, 35.693022571047194, 9.620836899630492, 40.1090410813694, 77.01822830607675, 42.53976260404677, 42.476551230815275, 59.661545547799136, 12.027230755655982, 64.36896814185509, 33.692602427625054, 20.91867250355054, 96.19717279297834, 3.7482467390844376, 29.768928493140823], "fill_color": ["#b84996", "#b8db96", "#808496", "#557b96", "#91b396", "#be5f96", "#4c3996", "#b06696", "#cb9496", "#c98c96", "#807d96", "#7e6096", "#e52d96", "#737496", "#508696", "#c43a96", "#479a96", "#72ad96", "#459396", "#c3dd96", "#abc096", "#503d96", "#8c3b96", "#632b96", "#3d9896", "#91d196", "#ad7a96", "#715996", "#989f96", "#a96e96", "#cd2e96", "#6b6596", "#5f3096", "#72cd96", "#74ac96", "#9a2296", "#784e96", "#6d8a96", "#672896", "#4c2b96", "#d3ad96", "#51cd96", "#46c696", "#c4d796", "#ea3896", "#808396", "#e43f96", "#994b96", "#7e7f96", "#b27596", "#eb8e96", "#399396", "#ebd896", "#7bce96", "#6aa896", "#416996", "#5d9496", "#aea096", "#34a996", "#61a196", "#e84496", "#e0c096", "#d77696", "#554e96", "#797296", "#7e7896", "#d7bf96", "#4ead96", "#889396", "#a6b496", "#d62096", "#4c5696", "#e78796", "#989d96", "#e0af96", "#a8a896", "#8e6496", "#59e596", "#9b5996", "#80b596", "#f08896", "#f13696", "#efd896", "#e19e96", "#be9196", "#5d7196", "#ed7b96", "#e19a96", "#4ad096", "#3a4596", "#f5ac96", "#6bbc96", "#a62096", "#f94196", "#bd5c96", "#f67396", "#f15e96", "#4b7096", "#9ae396", "#325d96", "#b0bc96", "#4b7296", "#7fe196", "#d07b96", "#508e96", "#469b96", "#d4bd96", "#bf3b96", "#c23896", "#702496", "#742d96", "#e5b796", "#c73e96", "#ee8496", "#5e3596", "#a3bd96", "#e7a096", "#43a296", "#d39596", "#962b96", "#893396", "#4a8796", "#6c3696", "#63af96", "#9c7296", "#762296", "#7c6096", "#384c96", "#da8d96", "#932396", "#9eb096", "#cabe96", "#857c96", "#3cbc96", "#af3796", "#a8d796", "#795096", "#764c96", "#702a96", "#6c9696", "#67b096", "#f63c96", "#4c7b96", "#94b396", "#ec7e96", "#c83096", "#daae96", "#b35a96", "#c65196", "#4d9e96", "#d95696", "#ddd796", "#6abc96", "#5b4196", "#4d6d96", "#bb6e96", "#da6e96", "#928a96", "#589d96", "#c32f96", "#9dde96", "#6b3b96", "#966296", "#f2b396", "#451f96", "#7b6c96", "#33ab96", "#925396", "#67d696", "#76a896", "#a86a96", "#874e96", "#799c96", "#ab7696", "#512896", "#687c96", "#4a6996", "#f04d96", "#f38996", "#5f6f96", "#63d796", "#b06696", "#b4ab96", "#497596", "#6f9e96", "#7f7e96", "#bd8796", "#f76396", "#efd496", "#643f96", "#393f96", "#bfce96", "#da8696", "#acc696", "#826196", "#d76e96", "#d1d496", "#ae3296", "#483196", "#4ab996", "#8d7a96", "#817396", "#396a96", "#ef7b96", "#932896", "#9d8596", "#d93c96", "#8fdc96", "#6cd796", "#7fbd96", "#7c6396", "#e38b96", "#57da96", "#c23a96", "#bea996", "#532e96", "#616696", "#914596", "#e44f96", "#825d96", "#65a396", "#ae4896", "#598696", "#d3ce96", "#37b196", "#57d296", "#525396", "#344596", "#aab696", "#f3c396", "#ee3d96", "#733f96", "#4ce196", "#ba8596", "#a29596", "#984f96", "#c2de96", "#398e96", "#4a7096", "#918a96", "#749d96", "#ca8796", "#8fb196", "#db4196", "#623096", "#4bbf96", "#76d996", "#502d96", "#ba6896", "#81dd96", "#737896", "#95ac96", "#792e96", "#cbd796", "#e28d96", "#bf3796", "#c04896", "#53e496", "#f5b796", "#675e96", "#83b296", "#ab3296", "#4c6696", "#b1b996", "#775696", "#e57f96", "#804496", "#8fe496", "#ea8096", "#ed5d96", "#f76996", "#51c196", "#dadf96", "#c19796", "#e3d996", "#9c5e96", "#973f96", "#994996", "#6f7f96", "#909296", "#77bd96", "#bf5496", "#38bc96", "#b64296", "#7ca896", "#6e4296", "#ed5096", "#666296", "#a46196", "#5a9396", "#975896", "#e93396", "#bd6096", "#5a8e96", "#452596", "#63c196", "#6c2896", "#78d496", "#f8bc96", "#858896", "#edbe96", "#954f96", "#844196", "#34ad96", "#77ca96", "#c27896", "#bc3396", "#be7496", "#e72296", "#64a596", "#a84096", "#a8b896", "#d2da96", "#c97096", "#675396", "#56b896", "#a7b596", "#86bb96", "#8d6f96", "#c69c96", "#8b8396", "#856a96", "#632f96", "#6c4696", "#5f8496", "#c62096", "#c68b96", "#78d796", "#85e596", "#47b096", "#aa2596", "#50e596", "#417c96", "#8a4d96", "#c97f96", "#63b296", "#b06596", "#456e96", "#ca7c96", "#edca96", "#c86896", "#72bd96", "#484996", "#5c5696", "#f68596", "#6bd096", "#dc7996", "#cdc696", "#71bd96", "#d3ad96", "#a96096", "#943896", "#ba9096", "#56a996", "#32b596", "#3c6996", "#f7cd96", "#99d396", "#5b8796", "#7d2f96", "#c8b796", "#a5df96", "#755c96", "#584e96", "#de3496", "#7a5d96", "#72e296", "#962d96", "#3f5696", "#f35396", "#86be96", "#95e296", "#3e7396", "#c0e496", "#d72a96", "#c95d96", "#854096", "#434496", "#c78496", "#81e496", "#885496", "#5bdf96", "#ce9996", "#de4096", "#d79b96", "#f29f96", "#591f96", "#85e196", "#423896", "#b96196", "#d02a96", "#c1ce96", "#f1ab96", "#b39296", "#7a7496", "#8c2396", "#7ed496", "#a69796", "#ba7196", "#c2a096", "#d39496", "#f38796", "#ab6996", "#b59e96", "#4ddd96", "#954596", "#646296", "#cf5696", "#b6b596", "#9eb396", "#90c296", "#589c96", "#e2a096", "#64cc96", "#98d496", "#acd296", "#564596", "#58c696", "#c03596", "#c18996", "#94ce96", "#da6a96", "#58e096", "#b3a896", "#ec5f96", "#565496", "#956e96", "#35a496", "#e2ac96", "#bd2096", "#849496", "#94a196", "#39bd96", "#448b96", "#d18596", "#dc6696", "#c59596", "#ce6a96", "#d49096", "#c1c596", "#c2c096", "#ae6896", "#722f96", "#b68d96", "#74e196", "#907796", "#b5a096", "#9cd396", "#8fda96", "#422896", "#5b7d96", "#442496", "#3c7796", "#3b2096", "#8eaf96", "#989f96", "#547a96", "#ca3596", "#caad96", "#e72596", "#6e4396", "#e39796", "#a54996", "#729496", "#343d96", "#86a096", "#3f9796", "#c08496", "#5bba96", "#ee5396", "#9b7896", "#de5c96", "#ca5e96", "#f97796", "#c8ca96", "#b5c296", "#6b2596", "#c14296", "#c48196", "#876196", "#555e96", "#803396", "#341f96", "#437c96", "#b66296", "#ed2896", "#a7a196", "#865b96", "#34e096", "#773f96", "#9d9996", "#3d7c96", "#b8de96", "#6cda96", "#4b6196", "#d9d196", "#402796", "#b49f96", "#5d2096", "#c59496", "#6e2d96", "#f7bb96", "#ec7b96", "#87e596", "#ac6c96", "#e5dc96", "#44b996", "#9f5d96", "#d7c696", "#773a96", "#947296", "#766796", "#a6dc96", "#ad2996", "#e7d396", "#4c2a96", "#e84696", "#b24196", "#6f9996", "#f9db96", "#72c996", "#4d6396", "#a94596", "#b5b096", "#7e5496", "#83b996", "#cecf96", "#3b4f96", "#603296", "#977296", "#c09696", "#d2ac96", "#467396", "#e9e496", "#813196", "#5d2c96", "#a8cf96", "#66b996", "#7d3896", "#aade96", "#c7df96", "#8d2296", "#e12896", "#d86296", "#93b896", "#37d896", "#ceb796", "#465696", "#4f6696", "#8c8f96", "#ee5d96", "#768396", "#7ba196", "#5c7f96", "#bce296", "#7c5d96", "#8ea496", "#cae396", "#4c8396", "#524996", "#4a5e96", "#b62d96", "#b78096", "#d8d296", "#6e4296", "#37ba96", "#b06196", "#753696", "#835796", "#c3a896", "#526f96", "#6c3096", "#c99196", "#e89396", "#6b9396", "#df7696", "#4e2f96", "#ab2596", "#a43a96", "#c09b96", "#4cb096", "#5aa696", "#5b5a96", "#825696", "#785596", "#ea9e96", "#4b2d96", "#ad6b96", "#5bdf96", "#375196", "#372f96", "#403296", "#84cd96", "#b09f96", "#b5a496", "#ad7196", "#905a96", "#6a2c96", "#aa8c96", "#b25e96", "#6f9996", "#c35d96", "#8f9f96", "#d47296", "#d1cc96", "#50e096", "#38db96", "#40db96", "#ef5a96", "#4d9e96", "#958b96", "#ecd296", "#79be96", "#bfda96", "#68c696", "#6a4a96", "#783c96", "#3d5e96", "#f33a96", "#b4b096", "#72df96", "#635996", "#359696", "#bf2396", "#c0bc96", "#b98296", "#e73796", "#b62b96", "#be6396", "#cc5f96", "#c5b396", "#96d996", "#eb5e96", "#4f5896", "#877196", "#63c796", "#e93a96", "#66b796", "#c35396", "#d3a496", "#70c396", "#ed8f96", "#e7cf96", "#89d796", "#d05996", "#769d96", "#bb7796", "#726b96", "#392796", "#8b2296", "#3a3696", "#3dd596", "#8d4396", "#529796", "#bb7c96", "#e62896", "#64b496", "#37b896", "#c73596", "#a3e396", "#bfb496", "#642896", "#4c4196", "#4f6d96", "#f88e96", "#3ed496", "#835a96", "#834896", "#f9b696", "#8cd996", "#f15a96", "#f23096", "#a02996", "#ce4296", "#36d496", "#f49396", "#c0b396", "#74a596", "#a6dc96", "#b1d996", "#9ce196", "#ac6496", "#ab3596", "#c39596", "#6f4096", "#b57d96", "#b04196", "#7e9596", "#ab9396", "#a36496", "#85a896", "#8be596", "#788696", "#865696", "#782596", "#dc5996", "#6b2b96", "#708996", "#a76c96", "#a53d96", "#632e96", "#c4c196", "#ad3b96", "#b5a196", "#9d6896", "#756196", "#a16896", "#32db96", "#c68e96", "#b3a196", "#d93096", "#534996", "#983496", "#5c9696", "#798596", "#ecc796", "#cf9d96", "#e44796", "#d58896", "#a5d796", "#6a2496", "#72b896", "#9dc896", "#7d8196", "#cdd196", "#e26c96", "#e0de96", "#556996", "#92c696", "#d06296", "#8b6a96", "#722096", "#6d7e96", "#362c96", "#61d296", "#4f8596", "#7f6d96", "#91e096", "#d4b896", "#5ad596", "#7ba996", "#5d5496", "#36ae96", "#e7b796", "#86b996", "#e3cb96", "#672796", "#c8c796", "#55b996", "#f4b296", "#b34196", "#a77a96", "#683096", "#8cd196", "#e29996", "#b52d96", "#e14d96", "#674596", "#dc4696", "#b39f96", "#f07296", "#6c7e96", "#376f96", "#84dc96", "#999c96", "#f46996", "#ed8e96", "#e4a596", "#a7e296", "#d1c996", "#6e3d96", "#872c96", "#b66296", "#b18996", "#ccd896", "#4d9696", "#677c96", "#e36996", "#c58b96", "#8e9c96", "#eeae96", "#7b7196", "#a7c296", "#b75696", "#334d96", "#b67a96", "#507996", "#52e296", "#ee2696", "#e82a96", "#6dc096", "#437f96", "#466b96", "#eea896", "#8fc296", "#e09596", "#e9a996", "#bd3596", "#335c96", "#439896", "#df9c96", "#e3d996", "#8e5d96", "#42a296", "#f85396", "#b92496", "#57bf96", "#a97396", "#792b96", "#6b6896", "#667f96", "#725596", "#a05496", "#b6de96", "#ba2296", "#edc496", "#3c3f96", "#88dd96", "#9a7196", "#b23496", "#856696", "#363996", "#4e8996", "#667796", "#cddd96", "#4a7e96", "#89ad96", "#476996", "#736b96", "#687596", "#905596", "#c7e296", "#d73096", "#7b6c96", "#8f8096", "#a65696", "#d29e96", "#af4a96", "#d1af96", "#456e96", "#4b2096", "#e86196", "#8abb96", "#cb3996", "#833b96", "#a13b96", "#642196", "#61a996", "#899496", "#ef9c96", "#f1a896", "#b6bc96", "#f95496", "#415696", "#4ca796", "#4ea696", "#bcb996", "#d25b96", "#336396", "#9caf96", "#72c296", "#ab9796", "#933c96", "#832196", "#5d6196", "#694496", "#85aa96", "#d96896", "#624d96", "#ef2c96", "#5dd496", "#a7cc96", "#a16a96", "#e0b196", "#5c7596", "#a19d96", "#33aa96", "#586196", "#7a6996", "#58b596", "#6be496", "#554796", "#543996", "#e87b96", "#4dba96", "#b58696", "#856996", "#3cab96", "#ad5496", "#62b396", "#407996", "#746d96", "#a68296", "#6d2596", "#b74896", "#815796", "#988796", "#3e2e96", "#34d396", "#89ca96", "#c5c496", "#a4b396", "#5d9396", "#b57796", "#7d2196", "#efca96", "#d28b96", "#d1cf96", "#423096", "#6db496", "#cb6f96", "#bc5c96", "#9adb96", "#54d196", "#4ac696", "#418196", "#443e96", "#582196", "#f51e96", "#c44896", "#62de96", "#ccd696", "#51d696", "#be9796", "#828396", "#a42a96", "#b07796", "#db6c96", "#454696", "#802196", "#ef5f96", "#916a96", "#374096", "#546796", "#8d3a96", "#c2d396", "#9fa696", "#b54696", "#3b6c96", "#d88596", "#3fca96", "#8c2d96", "#896b96", "#76d296", "#e37d96", "#7a4f96", "#9a9b96", "#3f7996", "#e18096", "#34e196", "#862a96", "#6b8796", "#6d4a96", "#685e96", "#935396", "#66d396", "#a8c996", "#cb3996", "#5f3696", "#eb6996", "#b76d96", "#d0c696", "#9b5696", "#4bd896", "#d18796", "#552596", "#835796", "#bf8996", "#de3496", "#724196", "#74a796", "#ead496", "#9a9996", "#b69a96", "#b89b96", "#f1e296", "#e25196", "#533b96", "#a84096", "#dabb96", "#95cd96", "#7ade96", "#3da396", "#e64e96", "#944e96", "#91b896", "#7c6f96", "#7de196", "#ab4b96", "#3caf96", "#785996", "#e6c596", "#584896", "#ca7a96", "#c52196", "#a71f96", "#855d96", "#f6c496", "#71e396", "#c05f96", "#c06796", "#9b3e96", "#d18896", "#bd4096", "#512a96", "#5e9796", "#995e96", "#833e96", "#f19e96", "#8b7d96", "#7c9496", "#75e396", "#907d96", "#72e596", "#a7cf96", "#f4b696", "#743996", "#f5cf96", "#555396", "#776796", "#3e2d96", "#717196", "#e54a96", "#f63596", "#bb8d96", "#f2c096", "#ce3996", "#bcb996", "#757396", "#4cb796", "#482096", "#6eb296", "#ee4096", "#8b9296", "#e08d96", "#d84096", "#72c496", "#712296", "#df3b96", "#f44896", "#a4db96", "#733b96", "#84ae96", "#f8af96", "#f99596", "#6fcd96", "#f0cc96", "#d8e096", "#3ec096", "#cec696", "#bb4096", "#ce5196", "#cf2496", "#444b96", "#569c96", "#6a6a96", "#6c9e96", "#415496", "#5ec396", "#f68f96", "#eaa896", "#366496", "#62b996", "#b66896", "#63ba96", "#c44c96", "#96a396", "#878f96", "#bb4a96", "#9d9d96", "#958896", "#79c196", "#f77996", "#b0c396", "#75db96", "#9fa596", "#4f9896", "#bb4996", "#dd6c96", "#e2a696", "#7fb696", "#90ba96", "#d8a396", "#d63596", "#32d596", "#49e096", "#b16496", "#7b8496", "#652996", "#c08696", "#3bae96", "#b1db96", "#9ea996", "#a23f96", "#a62996", "#8d2996", "#bb5696", "#773596", "#764296", "#eaa796", "#c99396", "#463196", "#58d696", "#cc3796", "#b75d96", "#c37796", "#5a5c96", "#5a9696", "#835296", "#f35596", "#d0b596", "#d56596", "#e4c196", "#9f8596", "#b78996", "#ca4e96", "#4d2196", "#857d96", "#c65c96", "#e47796", "#354296", "#337996", "#d52796", "#978096", "#3c4996", "#4d2896", "#5d8296", "#58dc96", "#a13296", "#82b896", "#469496", "#39b496", "#3ba696", "#c5a196", "#8fce96", "#715e96", "#9ca996", "#706996", "#cf6a96", "#765796", "#86c696", "#853496", "#6a4096", "#62dd96", "#d02f96", "#f45496", "#524b96", "#7c9896", "#a47996", "#d92996", "#4bbd96", "#8fc496", "#a44c96", "#c52696", "#58c496", "#c5d996", "#a46a96", "#f03f96", "#812196", "#5f3696", "#c74c96", "#d27196", "#e3a496", "#e04e96", "#b82096", "#807596", "#969796", "#df3396", "#348196", "#994f96", "#357696", "#80ca96", "#982996", "#6a1f96", "#eb5896", "#e6d496", "#744696", "#71d196", "#941e96", "#df5396", "#37df96", "#78ca96", "#a64b96", "#d48d96", "#59d896", "#af3596", "#5b5096", "#ec1f96", "#918a96", "#764c96", "#d76d96", "#3d5696", "#dad496", "#32d296", "#74c196", "#6a4396", "#3a2c96", "#d0d096", "#8a5396", "#577696", "#92be96", "#ac7196", "#67ac96", "#a0b896", "#e59196", "#954c96", "#ca7596", "#59a296", "#baa496", "#33dd96", "#945696", "#bb2596", "#966a96", "#b7bf96", "#c3d296", "#538c96", "#c58c96", "#64af96", "#e4bd96", "#902196", "#82a896", "#63e096", "#339a96", "#b08b96", "#499196", "#5ca096", "#c26596", "#dbd996", "#395a96", "#bdc196", "#dad396", "#645d96", "#38cb96", "#dac196", "#566b96", "#d8d496", "#8b6d96", "#a62396", "#baa396", "#403f96", "#7ddc96", "#f4b996", "#afca96", "#97d196", "#46c096", "#bf5a96", "#b67a96", "#6b8a96", "#592d96", "#423296", "#b65196", "#eacb96", "#a62e96", "#b32c96", "#eeb596", "#8e3a96", "#452396", "#a55796", "#b87096", "#f16196", "#33a396", "#a79396", "#4ccf96", "#e0b096", "#8ebf96", "#afde96", "#ddaa96", "#4a4a96", "#521f96", "#a62896", "#a77196", "#425696", "#7a5296", "#dedf96", "#d7a796", "#737596", "#5a3396", "#de5196", "#d8a896", "#63ad96", "#b28696", "#71d996", "#4f4b96", "#efc696", "#bb5a96", "#4de396", "#9ddb96", "#695296", "#76de96", "#5fd596", "#4aad96", "#ed9896", "#dbac96", "#72b196", "#ed5f96", "#ad8b96", "#a84896", "#52b496", "#396c96", "#3d6596", "#948596", "#ec7396", "#dbd896", "#4d8196", "#548096", "#eb9e96", "#919196", "#687696", "#ddaa96", "#9b8396", "#cbd696", "#7e2296", "#ee9f96", "#9c8396", "#9b3e96", "#923096", "#934c96", "#75d196", "#df5496", "#3e6a96", "#76d996", "#76a396", "#eaa496", "#ece296", "#af4196", "#5e3696", "#6cab96", "#827496", "#7a7d96", "#3bcd96", "#b53996", "#eb3f96", "#335a96", "#895f96", "#f82f96", "#45e096", "#606396", "#4b7a96", "#8a8896", "#bbbe96", "#ca2e96", "#e87396", "#883f96", "#b45f96", "#efc296", "#3c2696", "#799996", "#9b2e96", "#5e2f96", "#9cd296", "#366f96", "#bdaf96", "#cb3796", "#394896", "#6f9396", "#b4ae96", "#34e296", "#e79f96", "#bbdf96", "#c14b96", "#8c9296", "#e29896", "#a93296", "#f13096", "#a8d696", "#62a896", "#5e6996", "#a09596", "#c25e96", "#8f5a96", "#638396", "#88c096", "#7c3496", "#e88996", "#36db96", "#9f8696", "#f98f96", "#3d6f96", "#3e9496", "#487596", "#363a96", "#a0e596", "#bc4a96", "#bca896", "#933596", "#782096", "#ab8d96", "#f6c196", "#5dca96", "#b66b96", "#3f7c96", "#ef4296", "#af6396", "#d63896", "#b27e96", "#bdca96", "#9c7996", "#3ab996", "#969396", "#d14e96", "#65a196", "#ab2696", "#85c696", "#555096", "#d99996", "#bfbe96", "#e0bb96", "#a26796", "#f67d96", "#5bda96", "#df5596", "#d04596", "#62c296", "#e5e196", "#8a8f96", "#456696", "#914296", "#918b96", "#587196", "#56c896", "#979296", "#f0c296", "#683396", "#b88496", "#762196", "#b83d96", "#c7a596", "#46a396", "#49ab96", "#be1f96", "#f37c96", "#794f96", "#71b496", "#9eb696", "#dc7196", "#959496", "#f58196", "#cd2f96", "#dda896", "#d48d96", "#a4dc96", "#77da96", "#888196", "#a92b96", "#bb4096", "#4a6e96", "#746896", "#979e96", "#d42596", "#56c096", "#56d296", "#e6b896", "#68ad96", "#c52496", "#68dc96", "#91b896", "#6e8396", "#68df96", "#412b96", "#87a496", "#c36296", "#3be196", "#837796", "#643896", "#dc4596", "#b83c96", "#d3c996", "#545e96", "#a81f96", "#7a2696", "#efaa96", "#f8e596", "#5c8c96", "#a94c96", "#c96096", "#51d496", "#898196", "#3cc996", "#5f6296", "#a5d796", "#7c8d96", "#3cc196", "#bba796", "#bf8596", "#418596", "#c1ab96", "#993496", "#eb3a96", "#819f96", "#ca6f96", "#e14696", "#5cdd96", "#a0c896", "#9c4096", "#6fe596", "#9dbb96", "#f03d96", "#5d6d96", "#85c296", "#e9b896", "#ca8896", "#52ca96", "#cdc196", "#c0a396", "#f75f96", "#c55b96", "#51a296", "#925a96", "#f42a96", "#bc2096", "#339196", "#479896", "#71a696", "#a2b696", "#928496", "#a55696", "#f3dd96", "#48b596", "#90b596", "#ba9796", "#423d96", "#828196", "#413c96", "#bc3496", "#7f6896", "#d6bb96", "#8dc896", "#61ad96", "#39e596", "#ae7696", "#777796", "#bbe296", "#87b496", "#9ce496", "#a46f96", "#7d6896", "#508e96", "#cd2096", "#ceb796", "#3fac96", "#a14596", "#819a96", "#67bc96", "#3aac96", "#ae2896", "#6a6796", "#4d8f96", "#6e9296", "#499b96", "#406296", "#869496", "#6d3996", "#c35f96", "#9cb096", "#969f96", "#6a9596", "#a2bf96", "#5ea796", "#ab5096", "#e02c96", "#985796", "#888396", "#9b6a96", "#dcc896", "#922596", "#456b96", "#7d6396", "#baa596", "#95c096", "#91b396", "#774096", "#d74f96", "#7f8896", "#f75f96", "#f93296", "#d97796", "#ca9296", "#3ce096", "#433896", "#9e9096", "#d74596", "#e53396", "#342d96", "#4eda96", "#335596", "#bdc796", "#5c6896", "#ef6396", "#88da96", "#f2ad96", "#887696", "#d88096", "#c8b396", "#32cf96", "#b59c96", "#7d8d96", "#c22296", "#63e596", "#a26c96", "#3de596", "#938296", "#79ca96", "#a8ce96", "#8da396", "#c65996", "#9a7296", "#424896", "#c99a96", "#321f96", "#388496", "#e76296", "#e23e96", "#81db96", "#4daf96", "#676796", "#978196", "#9a9f96", "#b6ae96", "#814096", "#bac996", "#ce8c96", "#a19d96", "#735396", "#4dc896", "#b04c96", "#c36696", "#5a4496", "#c7de96", "#5c6696", "#c18b96", "#bb3f96", "#3c2096", "#e67d96", "#54bf96", "#446796", "#9e8896", "#8d9c96", "#ae8396", "#5b9596", "#90b196", "#9fa696", "#544e96", "#c3a196", "#e9e296", "#da3096", "#84a496", "#9d8096", "#dd9396", "#7cd396", "#ca5896", "#d1be96", "#ec7d96", "#4ec496", "#b94596", "#5f2b96", "#4a8696", "#82a696", "#d66396", "#a3cb96", "#8a8696", "#93d096", "#c72196", "#e9e096", "#c43e96", "#f5e296", "#6caa96", "#ef8f96", "#da8596", "#855696", "#492396", "#886796", "#6f3596", "#c7d196", "#af2896", "#88cb96", "#c43396", "#749a96", "#9dca96", "#445896", "#c43c96", "#40a696", "#647b96", "#7dda96", "#395c96", "#f6ab96", "#5c9d96", "#882296", "#c08296", "#844f96", "#d7b896", "#7a8b96", "#7ed496", "#769f96", "#3daa96", "#b97d96", "#68a896", "#a2be96", "#c7d596", "#955d96", "#6f2b96", "#bdb896", "#b9d496", "#c1c096", "#999596", "#528d96", "#ec4e96", "#ab9f96", "#734796", "#c67196", "#da9996", "#a17396", "#adcd96", "#ed8196", "#376a96", "#765d96", "#c0d196", "#8b5b96", "#b82296", "#f68296", "#cbbd96", "#9a2a96", "#dd3596", "#f18896", "#f54296", "#5f8996", "#a62b96", "#715996", "#c92796", "#de3f96", "#d2a096", "#67c296", "#f73c96", "#653396", "#3e6b96", "#33a496", "#775096", "#eb8496", "#c06796", "#496a96", "#e78d96", "#cac696", "#aebf96", "#c93296", "#5e3996", "#e78d96", "#b93896", "#589496", "#46c396", "#995696", "#7a4796", "#b15296", "#984d96", "#732296", "#6bdf96", "#f69296", "#4a3996", "#f14f96", "#d84d96", "#71dd96", "#954496", "#9dd696", "#d08296", "#698596", "#43c196", "#4e9296", "#5e4496", "#5c4896", "#938c96", "#c5c396", "#479396", "#a16b96", "#cf8a96", "#327996", "#463696", "#95cb96", "#607296", "#afd996", "#83c596", "#a6b796", "#aecf96", "#689c96", "#eed896", "#376896", "#50a696", "#6dad96", "#5dd296", "#8d6d96", "#f58e96", "#943f96", "#55cf96", "#e76196", "#c67a96", "#cd6296", "#566d96", "#c8a996", "#835b96", "#492896", "#3ea196", "#e22f96", "#f98b96", "#bdbb96", "#c6b096", "#e5ca96", "#7ec396", "#6d3296", "#865096", "#6e8796", "#af7996", "#3da596", "#5f3496", "#a19196", "#ea6396", "#81d196", "#cf6996", "#dfba96", "#af8996", "#346c96", "#a77496", "#76da96", "#88b796", "#e99296", "#ce9b96", "#8d2096", "#515a96", "#f52696", "#37c396", "#7ebe96", "#94c096", "#6e5b96", "#9eb396", "#339296", "#74d896", "#9cc796", "#ab8396", "#3f7896", "#e94196", "#387196", "#944b96", "#684496", "#784296", "#e5aa96", "#389c96", "#742c96", "#8db296", "#364196", "#513196", "#9a6596", "#6fbc96", "#487d96", "#cbd696", "#914b96", "#b2da96", "#f43596", "#b3bf96", "#59d896", "#c13296", "#a68296", "#6f2396", "#f22796", "#cdcf96", "#ae5c96", "#f13996", "#7e8c96", "#e3de96", "#d68696", "#474496", "#b33996", "#cc6696", "#f04796", "#a71e96", "#7c4a96", "#836896", "#a89696", "#adb196", "#927896", "#a07e96", "#3fab96", "#bfdb96", "#7ba896", "#324196", "#e7c596", "#646696", "#7fc796", "#cf7c96", "#715296", "#36d496", "#6ec696", "#5cda96", "#f28596", "#6b6e96", "#e07a96", "#a25496", "#5bd296", "#caba96", "#d48f96", "#45c396", "#edc996", "#ebc196", "#d05c96", "#9eb496", "#49de96", "#3b4d96", "#34d996", "#e65296", "#3aa796", "#506e96", "#cdd396", "#b5b596", "#b34e96", "#d64896", "#525196", "#e2c496", "#8e6196", "#3c9b96", "#f38f96", "#436096", "#c83596", "#ce4f96", "#885b96", "#79aa96", "#b98696", "#476c96", "#ee4796", "#dac296", "#de7396", "#9f6396", "#78cc96", "#498b96", "#c5db96", "#998896", "#b97a96", "#807d96", "#d95096", "#c62796", "#43c896", "#d8c196", "#4c2896", "#db6496", "#606496", "#dea396", "#324d96", "#a33696", "#836d96", "#8a4f96", "#687396", "#a69396", "#9abb96", "#3f4d96", "#a1bb96", "#52b296", "#82c596", "#c1c696", "#dea596", "#e54296", "#db2796", "#65c896", "#657996", "#626796", "#755e96", "#5dbd96", "#6b3b96", "#82db96", "#dd8896", "#baba96", "#55a496", "#882f96", "#9f2796", "#c58296", "#67bd96", "#e9ba96", "#368196", "#a84296", "#625d96", "#518796", "#90c496", "#678f96", "#6b6696", "#6a5d96", "#4a3796", "#c2b296", "#e5ae96", "#612b96", "#9b4a96", "#4f6396", "#f08196", "#682896", "#e19296", "#853396", "#c72396", "#508196", "#b0b496", "#8b4196", "#5fa796", "#c7af96", "#793296", "#47b996", "#ec8996", "#48c896", "#bf8596", "#7b8696", "#af6a96", "#e69996", "#cbb096", "#cf9b96", "#d0a496", "#b22296", "#b09c96", "#657e96", "#5bde96", "#332a96", "#3f2c96", "#b74396", "#d7d496", "#ed6d96", "#db9496", "#94bf96", "#786396", "#b2df96", "#b5cf96", "#426996", "#3c2296", "#802a96", "#e75796", "#b46796", "#b55296", "#a24d96", "#e66396", "#ad2c96", "#f2d096", "#5ca696", "#7c4896", "#f1b196", "#cf3c96", "#e66096", "#b35696", "#e15a96", "#43c096", "#be8396", "#328a96", "#7e3896", "#b03d96", "#f1c096", "#d33b96", "#b8a096", "#735296", "#cacb96", "#74c996", "#9d7a96", "#84ce96", "#d3d096", "#877396", "#c7e096", "#a16696", "#57b996", "#99d796", "#c7d096", "#4ad996", "#60cc96", "#eca996", "#eede96", "#489d96", "#4ed396", "#879196", "#eb6b96", "#ab2896", "#8b8f96", "#e85f96", "#ebd596", "#773f96", "#517396", "#edc796", "#7ece96", "#eea596", "#eede96", "#ad7896", "#715c96", "#43b096", "#a0d396", "#d77996", "#c1d196", "#5a3596", "#c25796", "#64b696", "#ae4396", "#ab3a96", "#4ea196", "#e7ae96", "#e63e96", "#738d96", "#826296", "#609696", "#7aa896", "#5c8296", "#dcad96", "#814a96", "#548596", "#abc096", "#6ecb96", "#928396", "#f36696", "#456096", "#84e296", "#347a96", "#72b096", "#a47796", "#a9d596", "#438d96", "#4d7d96", "#ca3396", "#efd096", "#69e396", "#cbe396", "#59d396", "#796e96", "#7d6996", "#6b5c96", "#c63596", "#a5df96", "#c88d96", "#89a396", "#ef2596", "#796496", "#877796", "#96ba96", "#c89a96", "#b9a796", "#5a3896", "#41a396", "#6daa96", "#429a96", "#3ca196", "#6fc296", "#58e396", "#a27196", "#9d4c96", "#c1c296", "#d48f96", "#4e4396", "#336f96", "#665496", "#de6b96", "#d85496", "#3dd596", "#d98996", "#a78596", "#575796", "#998996", "#a26d96", "#d6a996", "#926496", "#c74496", "#486196", "#707296", "#36d796", "#f81e96", "#4b2296", "#a99b96", "#5e4896", "#f74796", "#b52b96", "#f79c96", "#ca5d96", "#5d7f96", "#48b096", "#c57a96", "#f99596", "#d67696", "#f32f96", "#559796", "#cccc96", "#afca96", "#5ea796", "#e0d696", "#b2a096", "#ccd996", "#ea2a96", "#3f8d96", "#dd8196", "#a65696", "#aa2796", "#de8396", "#cd2e96", "#af5096", "#9ac096", "#819796", "#7eac96", "#d33396", "#7e4f96", "#6fc096", "#6ae496", "#f9ce96", "#c68796", "#db4196", "#3bc996", "#64a196", "#c58496", "#79ad96", "#f1be96", "#a0a496", "#b7aa96", "#729d96", "#59d996", "#ebce96", "#539d96", "#da7b96", "#e37a96", "#387e96", "#349496", "#ee9b96", "#dfad96", "#e27b96", "#f9da96", "#85a296", "#37b496", "#82e096", "#467a96", "#984796", "#a14996", "#985096", "#60cb96", "#dcbb96", "#34a796", "#e53d96", "#ab9496", "#649296", "#ad8196", "#6ed996", "#a99196", "#d36696", "#e88796", "#92c296", "#cf5496", "#673296", "#74a496", "#396796", "#736596", "#bfa096", "#6add96", "#9c7496", "#93a996", "#eb9396", "#b16f96", "#b7a296", "#688796", "#ea4d96", "#b64896", "#7edb96", "#375c96", "#9a7496", "#cad596", "#844296", "#d79f96", "#733d96", "#733296", "#758896", "#ec1f96", "#46bf96", "#327996", "#565496", "#814096", "#c03096", "#ec6596", "#8a9296", "#527996", "#6b2296", "#b0ab96", "#8c6c96", "#eeb596", "#a1c796", "#a24796", "#cb6596", "#748c96", "#db7f96", "#dec896", "#d58c96", "#817896", "#942e96", "#5edb96", "#4a6e96", "#39d796", "#424a96", "#dc2596", "#58cb96", "#50a896", "#54dc96", "#95bc96", "#a1e396", "#dd6796", "#514a96", "#55de96", "#de7f96", "#419696", "#4ac196", "#bbde96", "#8fb696", "#f6bd96", "#6abe96", "#bdbd96", "#899596", "#509696", "#619896", "#885996", "#7adf96", "#978a96", "#7d5a96", "#8d5396", "#3c2f96", "#9eda96", "#c1b596", "#377396", "#704e96", "#7fc996", "#d62296", "#be5496", "#6f6b96", "#47d396", "#775296", "#da3396", "#908196", "#c65c96", "#c3c396", "#744b96", "#db8296", "#aaa296", "#862b96", "#87e596", "#796b96", "#caa796", "#867e96", "#796596", "#94b896", "#415096", "#eb4596", "#84da96", "#64a296", "#eb1e96", "#492196", "#de5196", "#e97e96", "#e27e96", "#df5f96", "#a35c96", "#cc4096", "#c6bc96", "#782596", "#53b896", "#41cc96", "#73b196", "#e14696", "#62c096", "#799696", "#3f6396", "#864c96", "#5e8496", "#af6c96", "#f44e96", "#a9ca96", "#efd796", "#4fdc96", "#c3d396", "#8fa196", "#d8bc96", "#b3d696", "#39a396", "#594896", "#3d8e96", "#bd5a96", "#f68a96", "#3d6196", "#8dbd96", "#bf8696", "#bf5a96", "#c1ca96", "#73b996", "#cb8396", "#c39296", "#ab3b96", "#79c196", "#577696", "#e13696", "#cf7b96", "#65cf96", "#bba896", "#ba2396", "#c16896", "#59d896", "#a5ad96", "#336596", "#c52796", "#d0c796", "#567d96", "#48a996", "#dedd96", "#f0d796", "#ae4a96", "#d4ae96", "#73b596", "#d95396", "#918296", "#aca496", "#4b8a96", "#e27296", "#893996", "#582696", "#a12796", "#f97096", "#405f96", "#78b696", "#6fc696", "#975a96", "#93dc96", "#f03d96", "#e58396", "#bec896", "#799096", "#9c7b96", "#46a196", "#c93b96", "#5aa896", "#51b596", "#c8cd96", "#8e2a96", "#582796", "#45c096", "#3c4d96", "#839696", "#4c7196", "#92b396", "#666896", "#e9a696", "#8b4296", "#d4bb96", "#68af96", "#509796", "#e56e96", "#8f4e96", "#8cdf96", "#345e96", "#c91e96", "#6dbe96", "#973396", "#3cab96", "#898a96", "#357b96", "#b0e396", "#46e596", "#ef8696", "#596296", "#779c96", "#45ce96", "#cddb96", "#abcf96", "#bee196", "#f25296", "#8f5096", "#c17096", "#439796", "#d4db96", "#c1e096", "#3ab796", "#c1a196", "#4cd396", "#f42296", "#cd6696", "#858696", "#de5e96", "#e56e96", "#edbf96", "#9d6396", "#5a6d96", "#b2d496", "#f51e96", "#756796", "#9e3796", "#bb8796", "#58a196", "#f1c896", "#3f3096", "#322a96", "#6e3896", "#6b2a96", "#c43696", "#67a596", "#ad2b96", "#5baa96", "#3ee196", "#4a5296", "#da4a96", "#aeda96", "#345996", "#eb3196", "#c0dc96", "#826c96", "#3c8d96", "#ac2c96", "#b0a196", "#bae196", "#ed5a96", "#da2996", "#4e2b96", "#37a496", "#6c8d96", "#e73b96", "#e49f96", "#d43096", "#adb996", "#b7ab96", "#829796", "#5bc296", "#7d7896", "#959b96", "#436296", "#964096", "#4cbf96", "#9b4096", "#c67596", "#6c7896", "#de4a96", "#a74496", "#be4d96", "#a9d596", "#efd296", "#a1b196", "#515596", "#7c6a96", "#899996", "#b59b96", "#4d8296", "#a02896", "#6fda96", "#c68196", "#4e6f96", "#969096", "#962396", "#d3a196", "#b4d296", "#8b6096", "#b6bc96", "#82c396", "#738496", "#5e6396", "#b1b296", "#3a6796", "#7c3d96", "#60d196", "#aba596", "#c62696", "#367296", "#68c196", "#a32f96", "#a97e96", "#383c96", "#ac2b96", "#66b996", "#db2596", "#dfc496", "#ede596", "#af5596", "#c64c96", "#b3db96", "#3e3096", "#57a796", "#e06696", "#983796", "#7f8b96", "#4c4396", "#83d296", "#f85c96", "#afda96", "#67a096", "#6ea896", "#8b7a96", "#dc3c96", "#a5da96", "#381f96", "#55e196", "#5f6f96", "#43a796", "#70b396", "#a77d96", "#6c7b96", "#f24c96", "#d23796", "#78c896", "#5f3696", "#614296", "#663a96", "#e8a396", "#889f96", "#e8ba96", "#475596", "#cbb096", "#673296", "#e87b96", "#5ba896", "#338596", "#3f5596", "#9e2596", "#b8a396", "#d0da96", "#4d8d96", "#f9cb96", "#afc896", "#78c996", "#c03296", "#b02096", "#639696", "#6c2496", "#e2bd96", "#ebd596", "#99a996", "#4aaf96", "#e4aa96", "#bb5f96", "#73b896", "#a69a96", "#d98d96", "#93c596", "#4d4896", "#334296", "#c12296", "#9c7096", "#ba4596", "#d44f96", "#7f9e96", "#735096", "#46b696", "#6d3596", "#cbbc96", "#5d2a96", "#b07096", "#b75896", "#727696", "#bb9f96", "#bf2b96", "#c6a496", "#653d96", "#7ed896", "#da8296", "#a9bb96", "#5f4596", "#bb4496", "#c14d96", "#968596", "#477796", "#62db96", "#c6c496", "#b12396", "#9ba296", "#7ac396", "#71c996", "#c4da96", "#b1d996", "#6ad396", "#467f96", "#9d3d96", "#dfc296", "#6a8696", "#9ad396", "#817996", "#33dd96", "#bc8d96", "#d68f96", "#99c396", "#b92796", "#a16d96", "#5c5b96", "#6be296", "#962996", "#86a896", "#4e3996", "#aed096", "#67d796", "#565896", "#b4da96", "#478096", "#ca6c96", "#5d8e96", "#824a96", "#b48096", "#467c96", "#9f1f96", "#e99b96", "#82e496", "#4ede96", "#4bab96", "#a27996", "#7db296", "#f57c96", "#6b9696", "#bcc596", "#b0d896", "#476896", "#c92c96", "#41be96", "#c56c96", "#736296", "#b64896", "#81da96", "#698296", "#727596", "#f44e96", "#b82596", "#3fac96", "#958596", "#7d3c96", "#bd1f96", "#e59096", "#63b296", "#e04d96", "#85e496", "#cc6796", "#9c9696", "#9de396", "#f0ae96", "#cdc096", "#55cb96", "#53b996", "#8d9296", "#7f7a96", "#cb8f96", "#c16196", "#582096", "#799596", "#ccc896", "#5c9496", "#9dd296", "#452f96", "#d29496", "#52cb96", "#865296", "#636f96", "#eaa196", "#b89196", "#582796", "#c1b496", "#642096", "#8d4896", "#545496", "#784196", "#c9b196", "#6eaf96", "#b5d796", "#ab1e96", "#afd896", "#607e96", "#be8696", "#a25596", "#adb596", "#687896", "#528296", "#9dde96", "#d96896", "#c05796", "#a5af96", "#e05696", "#4cc196", "#dd5d96", "#dd6f96", "#f89196", "#5e5496", "#e44e96", "#4ed996", "#f1d096", "#4c6796", "#6fa396", "#b33e96", "#d55f96", "#8ac396", "#9aa596", "#d79996", "#a84a96", "#f4a896", "#b99b96", "#769996", "#f39696", "#591f96", "#58d796", "#4bd696", "#b33196", "#9eaa96", "#87b696", "#805b96", "#644996", "#952596", "#6d7696", "#bea096", "#aade96", "#758696", "#9bad96", "#e12b96", "#be4f96", "#bdb896", "#a7ae96", "#d46796", "#be4796", "#dbd996", "#717496", "#d19796", "#b96a96", "#67b696", "#e56396", "#455196", "#347696", "#e25596", "#546296", "#5bcb96", "#7dbb96", "#a5dd96", "#de7e96", "#e95196", "#38a196", "#508096", "#991e96", "#57ba96", "#c69d96", "#522696", "#4c4d96", "#8e4196", "#be3b96", "#778496", "#6cab96", "#ab5696", "#44ba96", "#d87e96", "#d1e296", "#acab96", "#b1d396", "#688b96", "#e32e96", "#9d4e96", "#7c6696", "#cec796", "#747996", "#a2af96", "#f41e96", "#613696", "#e21e96", "#759596", "#a74f96", "#429596", "#489a96", "#4f8196", "#5a3f96", "#855796", "#472696", "#777f96", "#374496", "#6da496", "#c92d96", "#736496", "#d15a96", "#e96396", "#c42596", "#d3af96", "#79d096", "#6d7496", "#f72f96", "#459996", "#978596", "#949396", "#62ab96", "#4e7a96", "#333b96", "#bc7996", "#d07b96", "#763f96", "#3e3b96", "#af2196", "#332096", "#352596", "#ecb796", "#603996", "#53dd96", "#e85a96", "#7cc896", "#e93896", "#e79496", "#3fd196", "#726c96", "#dd8296", "#5ed996", "#91d796", "#d87b96", "#797696", "#399a96", "#6f2596", "#ad2596", "#746496", "#e46896", "#d72a96", "#6fa996", "#c32a96", "#413d96", "#5bd696", "#8b7096", "#caba96", "#c55e96", "#7a7096", "#f27796", "#5d4f96", "#987d96", "#efc396", "#41de96", "#4dd496", "#74aa96", "#dc9f96", "#654796", "#d8d196", "#984b96", "#88a896", "#adac96", "#68d296", "#bd3996", "#563d96", "#70b796", "#438f96", "#e03596", "#aa9296", "#bac896", "#85c096", "#abe196", "#e1b896", "#69cc96", "#694d96", "#337e96", "#58e096", "#b77b96", "#ce5696", "#a98b96", "#e0c596", "#7dbf96", "#9f3696", "#c0ce96", "#d06896", "#508e96", "#a2cb96", "#63a196", "#ee7596", "#f8db96", "#61b696", "#f39896", "#8c2096", "#437696", "#b1a896", "#739a96", "#9bb996", "#4f4896", "#97ad96", "#77a296", "#9cac96", "#c24e96", "#eb2d96", "#4bb196", "#618e96", "#62a796", "#c93096", "#636e96", "#728d96", "#60dc96", "#379096", "#f72996", "#5f3296", "#95ba96", "#9cdb96", "#48de96", "#ab9f96", "#f03c96", "#ec7396", "#c95e96", "#749c96", "#759896", "#b29a96", "#6a2e96", "#86c996", "#f4a396", "#ef8b96", "#f37996", "#c14096", "#5acf96", "#3a7196", "#9d7296", "#974d96", "#9b5996", "#a35d96", "#b22196", "#3c6096", "#724e96", "#c47396", "#e8d896", "#3c4096", "#465d96", "#4c7896", "#363996", "#ed7996", "#34b196", "#5e9296", "#c29896", "#ce9596", "#d73f96", "#8e7096", "#d7ac96", "#807696", "#7be196", "#363d96", "#4b6f96", "#ae6b96", "#c97896", "#3c3b96", "#973496", "#765996", "#568f96", "#9f2c96", "#f3c996", "#335e96", "#e3a696", "#6e6696", "#6f3596", "#932d96", "#ac9c96", "#b73c96", "#7c3d96", "#734496", "#de7596", "#a8af96", "#7cd396", "#b92296", "#691f96", "#57d996", "#eb7396", "#b5cb96", "#9fd496", "#6ea796", "#852b96", "#3d8f96", "#336196", "#d02996", "#647596", "#e78896", "#f7b896", "#c76796", "#822a96", "#d18896", "#eb3196", "#3a9296", "#f4a896", "#ec6a96", "#7dc396", "#3b2d96", "#85c396", "#d56196", "#806b96", "#c03496", "#c89696", "#a34d96", "#ca1e96", "#ae6296", "#849d96", "#7ad496", "#f74496", "#c65396", "#8f3f96", "#4fb396", "#d83496", "#ec3396", "#63c796", "#528896", "#ebba96", "#54c196", "#634596", "#df6f96", "#792a96", "#e6af96", "#4e5096", "#693a96", "#5fa296", "#869996", "#bdbd96", "#e59696", "#504196", "#a8e596", "#f6bd96", "#862a96", "#88e296", "#858c96", "#d89196", "#8a5296", "#79b396", "#468f96", "#a93f96", "#cc7296", "#d79f96", "#634896", "#912596", "#992e96", "#f56d96", "#c12596", "#3d8896", "#f62496", "#61e596", "#949b96", "#f22c96", "#569d96", "#67d996", "#aa7696", "#6e4996", "#3e8f96", "#449596", "#794996", "#bcc296", "#4e6e96", "#db6596", "#507e96", "#af8196", "#e2c096", "#365e96", "#4a7696", "#7aba96", "#513996", "#3a9f96", "#95b896", "#7d5e96", "#8e2a96", "#d04096", "#7fd196", "#d38c96", "#a49996", "#96e096", "#392096", "#d3a396", "#7f6496", "#e67596", "#714996", "#912b96", "#9ab496", "#67c596", "#a72196", "#4fc996", "#4a5496", "#8e4c96", "#99b796", "#e72196", "#e3ad96", "#615196", "#768c96", "#bb3196", "#d4a696", "#34b296", "#b27f96", "#e26d96", "#e43596", "#61ca96", "#bcbc96", "#cf5296", "#c17096", "#3ee296", "#503396", "#86c296", "#872a96", "#758196", "#a19696", "#833996", "#868296", "#535b96", "#de4d96", "#f96c96", "#cbde96", "#cc7f96", "#388396", "#a79c96", "#773996", "#e1ce96", "#6a9196", "#47db96", "#42a696", "#5ad196", "#5a5b96", "#bd7c96", "#cfda96", "#8d4b96", "#7f6b96", "#34e296", "#d26b96", "#e19e96", "#e9ae96", "#ec3796", "#3e4b96", "#81d096", "#9db996", "#3c5f96", "#3fba96", "#a29496", "#7c7496", "#dd1e96", "#622396", "#8eda96", "#958c96", "#733e96", "#54b196", "#b15f96", "#cedf96", "#bdab96", "#ba6596", "#832d96", "#6e2f96", "#d42896", "#91b696", "#949596", "#767396", "#83e296", "#5d6896", "#f57a96", "#9f7e96", "#3c9a96", "#c18f96", "#f5b196", "#db4596", "#433896", "#c78896", "#a58696", "#933f96", "#3eb096", "#dd3a96", "#ad9596", "#e88596", "#66b796", "#44de96", "#9ab996", "#b16196", "#667396", "#77c596", "#47cb96", "#a8b596", "#69be96", "#34d696", "#5c4c96", "#464496", "#9ae496", "#eda696", "#547896", "#f85c96", "#732f96", "#755296", "#d19d96", "#b56196", "#69b596", "#f93296", "#9e4e96", "#a6e196", "#c89296", "#adb196", "#d3cf96", "#81c596", "#e8e596", "#4d6996", "#957696", "#8b7896", "#bbc696", "#5f9796", "#e07f96", "#b58b96", "#b65496", "#737996", "#37b196", "#6fb796", "#cf8d96", "#755196", "#dd7096", "#988096", "#6cd296", "#e7cd96", "#724896", "#ef9496", "#40ab96", "#4f3d96", "#5b5496", "#b4b496", "#82e296", "#f39c96", "#907b96", "#c47796", "#f7db96", "#606496", "#56a196", "#c05796", "#80e196", "#b1e396", "#c33896", "#93d196", "#8dcf96", "#e7d396", "#444b96", "#9ca796", "#daba96", "#a63796", "#3ccb96", "#e91f96", "#993d96", "#d28e96", "#b3e296", "#f3b196", "#aa8e96", "#865096", "#be8496", "#615696", "#debb96", "#d13d96", "#87b096", "#71d796", "#c14596", "#d3b896", "#a87096", "#d3ad96", "#d62196", "#ba2596", "#726396", "#cd6c96", "#ba5d96", "#6a2e96", "#c13f96", "#6aba96", "#f1c596", "#b25e96", "#eb5b96", "#b64796", "#ce7996", "#a06896", "#35ce96", "#ecc096", "#cf9596", "#783296", "#4b2d96", "#ed5796", "#71c696", "#5f5e96", "#3dc096", "#9f5b96", "#ddc896", "#d6c396", "#f28b96", "#b9ba96", "#dbdb96", "#f18d96", "#718696", "#e79c96", "#3c3a96", "#929e96", "#6b7896", "#a36d96", "#cebd96", "#debd96", "#b19096", "#eb2696", "#983496", "#aa4996", "#9b5e96", "#7fbf96", "#8ed596", "#f15096", "#91d496", "#78c596", "#577b96", "#e2c296", "#9d2296", "#d0c596", "#723396", "#666096", "#47c696", "#9d9a96", "#41dc96", "#448596", "#983c96", "#4db296", "#e6d096", "#643096", "#bd6a96", "#c0ab96", "#422796", "#f96a96", "#4c9696", "#bde596", "#f8b396", "#72b596", "#405596", "#807096", "#ef1f96", "#bd2596", "#60ae96", "#f82d96", "#366496", "#f5c796", "#7d6d96", "#4e5996", "#aea696", "#debc96", "#77ad96", "#47e296", "#ce1e96", "#5c2596", "#dabe96", "#ba9596", "#855996", "#747196", "#d21e96", "#7c9d96", "#a94c96", "#c41e96", "#dd2496", "#ce9c96", "#debb96", "#6d8796", "#96cd96", "#8ea696", "#47d796", "#509596", "#404a96", "#d02196", "#7da396", "#769196", "#d75096", "#766696", "#813096", "#c5b296", "#c02b96", "#464c96", "#419996", "#be6f96", "#5ba696", "#be6a96", "#5e3696", "#d96c96", "#f9b496", "#8b4096", "#473e96", "#928996", "#769096", "#cc8f96", "#63a096", "#e89596", "#a78696", "#7bd496", "#4d9596", "#443b96", "#4e9d96", "#e5dd96", "#6dbd96", "#75a696", "#d53396", "#3c6e96", "#aaa796", "#5d3b96", "#52a996", "#593796", "#bb7896", "#cc2f96", "#4cc196", "#c6a596", "#9c8d96", "#b46f96", "#90be96", "#ba7896", "#af6e96", "#8abd96", "#4d7096", "#aa5a96", "#f7e596", "#c75096", "#4be596", "#624796", "#afd496", "#71dc96", "#6fd296", "#88af96", "#ba8196", "#70b296", "#bc4696", "#c0cb96", "#59d196", "#415a96", "#823296", "#e45196", "#989f96", "#44d196", "#e5e096", "#935596", "#bebf96", "#e35996", "#f1a696", "#7c7196", "#65c796", "#878a96", "#ea2b96", "#c4c196", "#a15896", "#8b3796", "#c0b496", "#831f96", "#342596", "#ce7296", "#8db196", "#d34c96", "#503196", "#629096", "#7a6196", "#4ac396", "#592d96", "#9eb796", "#a69496", "#aa9f96", "#809596", "#9d2f96", "#453596", "#a84f96", "#f62f96", "#e5da96", "#925996", "#575696", "#44ba96", "#6ed696", "#a69e96", "#715396", "#c16f96", "#35dd96", "#967296", "#977796", "#efa996", "#689f96", "#3e5a96", "#e72196", "#c53996", "#498196", "#e54296", "#a1e596", "#8fb496", "#48a396", "#585896", "#6d9096", "#b03296", "#a27496", "#aac996", "#67c996", "#70e196", "#c6a696", "#5fbc96", "#54a996", "#bb9796", "#f94696", "#82da96", "#8b9196", "#c6cf96", "#a37f96", "#829896", "#4bab96", "#769196", "#709c96", "#44a196", "#962796", "#c03696", "#686d96", "#a27b96", "#4b4b96", "#ef5496", "#b88996", "#429296", "#8f1f96", "#c3d496", "#98d596", "#d9c496", "#bf2396", "#e15096", "#d23696", "#b7a896", "#8db996", "#829a96", "#84d796", "#d33a96", "#573996", "#5dd496", "#3fd396", "#7b4696", "#e76a96", "#518b96", "#dd7d96", "#363996", "#b94596", "#792096", "#872596", "#6c8296", "#e6a096", "#a0b096", "#d0b396", "#7d3696", "#441e96", "#343596", "#3a8b96", "#885e96", "#f4cd96", "#418196", "#a94596", "#d87996", "#af4e96", "#e9dc96", "#324696", "#d2d096", "#a72096", "#94aa96", "#8c2a96", "#4b7896", "#bd8996", "#448a96", "#4d9396", "#f93696", "#6f6296", "#7a5196", "#54c796", "#8fc796", "#967296", "#834a96", "#b79596", "#f1e396", "#f96a96", "#ebda96", "#8e3a96", "#434c96", "#517e96", "#6d4e96", "#ca9f96", "#4e4b96", "#b76c96", "#b7d796", "#f56696", "#584b96", "#ac8396", "#b09e96", "#757396", "#9f8a96", "#f86696", "#9a9896", "#392496", "#e09496", "#5c4096", "#4f3c96", "#e53196", "#783f96", "#51c596", "#56cc96", "#4f4596", "#76a896", "#8b5a96", "#a1e296", "#8a9196", "#e26f96", "#865b96", "#6fe496", "#98c496", "#f48096", "#563096", "#6fb096", "#b4b396", "#c17b96", "#76a896", "#8dd096", "#703596", "#596e96", "#a74d96", "#a53096", "#ee2496", "#365396", "#7f2a96", "#f6ae96", "#f03896", "#af5e96", "#d8c596", "#cea696", "#69ba96", "#c3b196", "#b99096", "#748696", "#c79796", "#96df96", "#ec7896", "#4fc296", "#b92d96", "#423596", "#40d296", "#d93596", "#9a2496", "#a34e96", "#c07f96", "#a3a596", "#924e96", "#985796", "#568596", "#675196", "#687696", "#e9a296", "#4b4596", "#cf3f96", "#a36396", "#ad5b96", "#a17096", "#584196", "#c1bd96", "#b4a096", "#605b96", "#4eb196", "#d04a96", "#e96396", "#84e496", "#595796", "#942796", "#6fe196", "#53a396", "#818a96", "#b11e96", "#34c696", "#945d96", "#724096", "#457a96", "#d55496", "#62c996", "#3c6e96", "#33ba96", "#761e96", "#63c596", "#623896", "#695396", "#3b5496", "#bbce96", "#558496", "#a82d96", "#ab4896", "#8ea796", "#ad6e96", "#3cd796", "#ef9796", "#f98596", "#efb996", "#9adb96", "#d76096", "#5d9696", "#8ccd96", "#a66796", "#d6b696", "#ef2696", "#c7b896", "#9c5996", "#6fd396", "#c72896", "#b2d296", "#4c9c96", "#e35996", "#8dc096", "#47b796", "#bb3f96", "#924d96", "#d82296", "#569596", "#812896", "#556f96", "#77ad96", "#8a9096", "#837696", "#7cb596", "#d38296", "#c5b196", "#b78a96", "#a77a96", "#65c696", "#ad6196", "#865696", "#a83296", "#855796", "#495c96", "#9c1e96", "#eada96", "#889d96", "#79c596", "#e59e96", "#d46896", "#e2ab96", "#8c2696", "#805496", "#b9d496", "#e97796", "#5bb896", "#c1b596", "#6e7596", "#eacf96", "#a6d096", "#403d96", "#f35996", "#794c96", "#7b6496", "#418996", "#b6b796", "#bc7f96", "#f8c296", "#4f6e96", "#795c96", "#777596", "#c66196", "#897396", "#58ad96", "#ce5b96", "#517f96", "#c04196", "#943396", "#f7ce96", "#ea5f96", "#d48f96", "#634096", "#917296", "#be4996", "#9c3496", "#76be96", "#e57996", "#68d296", "#89cb96", "#c83b96", "#71e196", "#3fa796", "#5ab796", "#915196", "#e02896", "#b4e396", "#d7b596", "#643596", "#3dd696", "#729a96", "#a0d396", "#47d696", "#67b496", "#32d996", "#a26396", "#c94b96", "#6ae496", "#ad6d96", "#b1bc96", "#b9ac96", "#f0b896", "#665596", "#e9d496", "#577a96", "#d1e396", "#79dd96", "#667196", "#495996", "#b63f96", "#839e96", "#81c296", "#516b96", "#a0db96", "#f78496", "#e1a396", "#addb96", "#576296", "#ab3396", "#3ec496", "#aaca96", "#e0a096", "#8c9396", "#6fbc96", "#bbaf96", "#83a696", "#5b7096", "#484896", "#f4ce96", "#a39096", "#beb396", "#e62b96", "#bc7496", "#89c096", "#f2d596", "#a53096", "#f18196", "#a0c596", "#77d296", "#6a2c96", "#a78d96", "#506196", "#40b096", "#766096", "#526296", "#4ad396", "#f8a096", "#8bc296", "#b13996", "#4c2896", "#93ad96", "#96df96", "#f0c196", "#d28d96", "#967596", "#f93d96", "#5dda96", "#dfd396", "#b09096", "#4ddf96", "#99dc96", "#459c96", "#5e8196", "#97e596", "#642096", "#ca6196", "#c19596", "#c17196", "#989696", "#668396", "#3c2c96", "#4a3896", "#386c96", "#3a5a96", "#ac5e96", "#89d196", "#3f6096", "#6b7d96", "#35b396", "#b2d196", "#9ca096", "#8eaf96", "#b07596", "#5f5c96", "#e4d296", "#7e2996", "#705e96", "#99e496", "#dbb996", "#8c2496", "#cc8996", "#f34196", "#869296", "#e68d96", "#8a2d96", "#874a96", "#593996", "#6a5a96", "#448896", "#3b8996", "#efda96", "#3d6c96", "#93e296", "#eda696", "#d8af96", "#b74496", "#c54396", "#7e3b96", "#742a96", "#afc496", "#d8b896", "#e47296", "#e6be96", "#8da496", "#525d96", "#a13796", "#af5496", "#762e96", "#939696", "#a64596", "#4d2496", "#7cb596", "#4b3096", "#b9b996", "#b3d996", "#83e596", "#6c6596", "#b49996", "#e15f96", "#494a96", "#e39996", "#892896", "#bb7996", "#6bdf96", "#937996", "#673696", "#f77c96", "#c22f96", "#b74696", "#a1a996", "#69d196", "#37b996", "#64af96", "#915796", "#dd4296", "#c7e596", "#d93a96", "#de6596", "#4f3196", "#b96e96", "#b5b896", "#af7396", "#4d7296", "#8a9596", "#b63696", "#b49e96", "#f96196", "#ac4796", "#67de96", "#372596", "#5e5996"], "y": [21.66152675360652, 94.64381864695534, 51.097395278626564, 46.898648187597516, 74.55394403375374, 32.563304228965265, 13.537556826920461, 36.0525907640476, 59.405911050084235, 55.33330526579836, 47.796453660959145, 33.27504828193552, 7.727082323368961, 43.43835585402505, 52.13701644103499, 14.08371158573285, 62.28350133497691, 71.78728201913154, 58.884195964273104, 95.58075973889818, 81.47203235424259, 15.640921746233838, 14.851330031931232, 6.64389391350122, 61.148298548514845, 89.6315116551837, 46.480510836185196, 29.676104408055526, 64.99305177190097, 40.30392172932372, 8.085030507131851, 35.89660320987509, 9.359390477145901, 87.92774406595477, 71.40638782630465, 2.1069380375215663, 24.376820628736738, 54.06374464372461, 5.458285070707958, 6.579103355795635, 71.80702353456161, 87.66161591259049, 84.31659915761131, 92.93458517222857, 13.323530520625837, 50.892273662853015, 16.729435293850624, 22.566706546394244, 48.66812109460314, 43.57298828914411, 56.05482920016556, 58.750297261819725, 93.27078177899195, 88.47829633210115, 69.27068855884941, 37.68093721480249, 59.313424501828436, 65.49923118753968, 69.77060098577121, 65.72931900699659, 19.394294614664542, 81.48113070163411, 44.18530994200873, 24.31768816821942, 42.185637034936185, 45.48972367890066, 80.72364845342798, 71.88686129825224, 58.56503503828889, 75.25526250902226, 1.0941742810210653, 28.036168955227613, 52.89513627036314, 63.92502458372231, 72.69309606339378, 69.44086043333758, 35.132038400299336, 99.96434931615808, 29.85829555457854, 75.88660891782426, 53.401840002057945, 12.169874215073717, 93.27329241139715, 64.02108386465852, 57.544986483822825, 41.6556988581153, 46.742116158185944, 62.09641819964015, 89.3377009345162, 19.86693236917212, 71.03483186040405, 79.344741218013, 1.3162777415581695, 17.948505931382506, 31.212065117517163, 42.61040636962594, 32.2670725389086, 41.480498104517416, 98.62960600902167, 31.585088286743336, 79.01355973902935, 42.47401602262606, 97.90284167184676, 46.58307991561674, 56.001854836483965, 62.63022741042798, 79.69846502904736, 14.982913385285734, 13.25608388908056, 3.2143332189766727, 7.543672549910818, 76.59683326379002, 16.105349900138933, 51.49065433953339, 11.731489114563043, 79.8110935256369, 65.13177885713716, 66.40765145306497, 59.9603743947134, 6.561267718006702, 10.847410326220519, 52.553140793933736, 12.276178090640745, 72.7361461063443, 42.03584633071182, 2.150853512624662, 33.210037793231685, 23.250764756997988, 55.831208050997326, 2.93494446556527, 73.03418639964173, 80.14758133239211, 47.29646032863876, 79.1929538170669, 12.531451705842079, 92.58976916074786, 25.17036342861051, 23.37426017738492, 6.009192327466684, 60.224337427702146, 73.34897754826392, 15.338046855791077, 46.80354702873052, 74.90578352783498, 48.431650188056864, 9.319704185327682, 72.00448562754907, 30.101817432056965, 25.89008576710582, 64.30000063288166, 28.1828478154174, 92.8468586468787, 79.05017541039204, 17.83912108125917, 39.80385734200746, 40.150417668384065, 40.05044739013479, 54.05238399737892, 63.758132115718944, 8.79687700502727, 96.3895319935934, 14.796949432210827, 34.1442570670861, 74.54000787246898, 0.9734273640592317, 39.47103925622058, 70.93505467451529, 26.885794280593135, 92.23113884011323, 69.02383190212085, 38.3818218866046, 24.065441601973447, 63.142888400603994, 44.46264526967486, 5.4488508959017246, 47.124920303348986, 37.82149552525284, 23.629183462048353, 53.85636374791298, 40.72540829186598, 92.91264604350799, 36.18500416468995, 70.50860813378631, 43.92831640369606, 64.17107359846935, 48.25418489962955, 52.52338216295206, 34.71613411551736, 91.23966420821023, 16.913265614864457, 16.957238630292526, 88.16327877318031, 52.37071896589104, 84.29536074473322, 33.73116444209, 40.425526275591025, 91.00730872568933, 10.015788040707863, 9.71457900801368, 77.97282781777454, 46.19054534828313, 42.63378903722109, 38.18548200161751, 46.84363500004386, 5.25719043989551, 51.56938275870172, 15.40932907619843, 95.39028000598142, 92.58224006510493, 79.7408102640708, 34.979397915985835, 54.61304071891551, 94.15336815541332, 14.077264062558047, 69.70572551142902, 8.49311614460888, 36.00717639997002, 19.541775796272177, 24.903353001638084, 31.763393651406126, 66.7766629762517, 21.498962739102133, 52.22123499563563, 88.30916025951436, 73.70868911854417, 90.03102627629127, 26.929083362484395, 19.571133194613676, 76.10994484769836, 82.50895847810227, 15.722639932947802, 16.75978524016106, 97.85509840403752, 51.64804533490687, 59.71192082775295, 24.647263356396653, 96.46435044323935, 56.212475046328294, 41.12455767965674, 54.035952447590155, 63.51915853301764, 52.90423553768815, 73.9289033169849, 17.692977764487814, 9.429276121524543, 80.89078128253388, 93.95765134867821, 7.583978561612459, 37.41376601470277, 95.96595625859675, 45.245993528828144, 71.10679580903387, 8.01233215891295, 92.76733225179932, 55.534290387937524, 12.715027718528592, 21.365745908284694, 99.0773061513664, 76.68644072068194, 32.428258048037065, 74.38698954920494, 10.490306800292082, 36.111353521556275, 77.99982496736233, 28.269731825860177, 48.7473853116114, 19.087388649322858, 99.09941157275617, 49.31840810477397, 31.791269928214007, 37.92476805067903, 81.51380685741222, 96.91902302110769, 60.84248496060298, 93.6873021400984, 32.26637932149764, 16.527574858465442, 21.767786495439267, 48.60058034986549, 58.319768350997904, 79.61723640153107, 27.403628097918354, 79.27476142481864, 18.277101890762015, 69.04248870594554, 18.318914350531422, 25.499631174377967, 34.46892075458664, 33.63008236509762, 58.64470865398194, 29.316803657029734, 10.655104895584856, 33.209303825522554, 56.130809564055674, 3.610856064199708, 81.59246959675488, 5.218460407890014, 91.1576577229445, 79.41417953301595, 53.32079457525346, 80.21262947617444, 24.908429238463704, 17.89553841197845, 71.66655818585038, 86.26682491310612, 45.21739222661709, 10.92506535664237, 43.012297685284686, 2.488269519305819, 67.64330305420579, 17.42169055601638, 77.01033768050381, 94.1865962895457, 41.23403988101948, 26.924454979841038, 77.11005259683759, 75.92128783837401, 78.82129380013569, 40.97679675088314, 63.1022131532781, 50.64107987913135, 38.126833552682186, 8.601387468856736, 20.397876420241822, 51.30136065188544, 1.1641627051203862, 54.97706560140813, 92.60968484465226, 99.62393922577807, 73.34390045505333, 3.780037057136032, 99.67583937412526, 47.459782855048594, 23.628961006948167, 48.99598337365995, 74.32986876711004, 35.798563027586574, 40.31717427661993, 47.42159605022962, 86.0090164501171, 37.4250497519657, 79.51569075289751, 21.506490235575814, 28.40751130437139, 51.63668280294903, 89.12206229819154, 45.75787010357564, 84.28297797744115, 79.64831899249441, 71.70901295501056, 33.074408266641086, 13.181040336690641, 57.265537293029546, 69.742726435984, 75.8187271637788, 37.66175052472034, 87.94765386498757, 90.76272885737147, 52.737694245782265, 8.738648632371849, 76.70138443995305, 96.88826562203644, 31.378453693001052, 24.035113216824634, 11.186425733705619, 31.581242225363415, 98.00879438384449, 7.67425204280584, 28.27250945486931, 26.899299901210348, 80.08878573796326, 98.4025463073726, 42.870011356070655, 99.12455137335984, 6.420137477634269, 31.976880017064968, 17.28730678101772, 19.10803669331863, 51.20767950875569, 99.11503414807721, 27.010572153208724, 96.52395117146084, 61.9805372508475, 17.457677808466343, 62.82312022443096, 64.5588180014478, 0.6573136004323077, 97.59700994345944, 13.27714091607709, 33.96430738179191, 6.180990178655832, 88.26692930808261, 70.52319247836724, 58.421532172634684, 43.428851691565505, 2.632789958384407, 91.38085731613648, 60.92085050945709, 41.89829637326925, 65.21699702430452, 59.32593542779162, 52.53894868190616, 37.74158553177431, 64.12249734383323, 95.8824721823626, 19.677421543443707, 34.412015526384245, 28.017690039085743, 75.97974158944916, 74.52792071736206, 82.11723651062375, 63.22281418806257, 65.3650370637424, 87.08451206330946, 91.28170415233873, 90.19658839260991, 19.753135925394094, 84.16636226797092, 11.864485402919023, 53.89079036403136, 88.07166006113512, 38.18660812536711, 97.2705324348297, 69.43963695294238, 32.922665637603096, 27.095172514057666, 40.19709052506041, 67.48912715620995, 71.00534119667691, 1.3096473359890837, 59.49413743317925, 65.73300947576104, 79.5899867504547, 54.69283883893388, 51.82072201774686, 36.3744669882563, 59.94210406736566, 38.47353067640646, 57.056746364700174, 83.5387004059186, 81.22992531653091, 37.18937506690738, 8.96432895125593, 55.586542677188945, 97.54449948889379, 44.74148880971862, 65.33436712897401, 90.96252603318192, 94.02676603559077, 5.075153987752246, 47.96083490060289, 3.4117214819965658, 44.99964478042244, 1.0168919547033584, 72.53384998787814, 64.96658519874322, 46.13615114715755, 11.747693330106523, 71.86205121808692, 3.7677917957798734, 18.669739469982517, 60.56222405551429, 21.568152385607963, 59.252250360494315, 15.891071112276201, 65.30240295553128, 60.81099326662959, 51.305318903809486, 78.40128139007022, 26.703421086293144, 45.34090585989296, 31.144106179474164, 32.105103383081904, 44.96095391515082, 86.23551518670925, 82.0229368616305, 3.5371017431691243, 18.14642412086014, 49.995955011169954, 33.54149966841406, 32.10321277347755, 10.555993786842677, 0.7391057279348856, 47.417504025298506, 34.2340779485396, 5.420170070749175, 65.8798352902846, 30.85937222787809, 97.37181300259479, 16.69905491578606, 61.81781425849419, 47.10183300157986, 96.10531742699361, 94.29481765501029, 33.531730881605924, 89.71718199653857, 4.548451868501813, 64.9865419178441, 1.4557579699103762, 59.15140558612483, 7.994125170837441, 78.70145117951584, 46.52886362791895, 99.70075363579032, 39.25347466265319, 95.09899874106475, 77.86516856397874, 31.56433579139144, 84.22191521259026, 14.481925449983867, 42.4134596663765, 36.85361404285713, 95.21963912811502, 5.93468682937468, 90.51548369490516, 6.42980949110391, 20.081519430534566, 17.656234684745222, 61.754629319288746, 94.97747182726123, 85.85202388971783, 34.870491931659885, 19.825262982902437, 73.04456585920674, 27.232245183587743, 77.81953523081697, 88.65814511418736, 24.592828329063742, 10.088316947874654, 42.43989709757678, 60.449607028121676, 71.49936596644896, 42.51994116624449, 99.05048992377907, 9.69674106488575, 7.167860101104983, 88.74861033547596, 77.71766558930018, 13.001563261566718, 96.08729542985337, 96.87053834422639, 2.290268485064584, 5.398182914175765, 34.19425099178076, 77.05284004077444, 93.09780911627321, 76.75556936341798, 28.419452710045146, 36.09978533161827, 56.88549491800673, 31.772963994872793, 50.99145737041542, 65.92742101602634, 48.55450400394684, 98.39017057473612, 31.790966280150425, 67.36164652394935, 98.77786148976125, 50.64591650615132, 21.785067055630247, 32.19530174441311, 7.892817747705427, 49.24371299663135, 90.16235674703793, 18.438280444488562, 78.45468011978046, 33.720895462643256, 12.285529584390087, 28.754843695774035, 69.02412483636589, 40.76784494618336, 9.144871360619277, 57.589302988533206, 58.539396777286825, 58.6402736925623, 44.054460102174765, 8.643141868557224, 3.6970219227801193, 14.123522758824391, 62.87065346769539, 73.06133397363257, 68.2287045979617, 30.421547165879048, 28.2601914689235, 27.732005290727436, 64.43370283179574, 7.679191374852001, 38.92425807146748, 96.77699501347693, 25.888189429848307, 8.606398299042638, 10.069452822643477, 87.89339292156403, 64.72151594330647, 67.23696530297758, 41.818494954636684, 30.202353989658903, 7.127322215183273, 55.023199359909306, 32.11440810337272, 61.60577986322917, 31.68975575167967, 64.84088875701057, 42.338947054537755, 87.09442693106789, 97.15936685276138, 94.92432977343631, 94.82114742132649, 30.39376299213865, 64.38425072056248, 54.80836864276867, 90.43254507930207, 80.42896713863182, 94.43199753542575, 84.43486505184971, 22.097682964418674, 15.292032657154364, 32.45679162634493, 14.274011699196286, 73.13178321180015, 96.53683979028558, 29.596562807755987, 60.09934222945673, 2.697206807021024, 79.15305911498847, 50.24318179859771, 12.909311587903261, 6.933734820106785, 34.825034363858954, 32.86343953962504, 74.88909520608976, 93.66928545140551, 32.013449239052335, 29.1621079949144, 41.86578745746764, 84.84246909275531, 14.03212463486888, 76.73371442602978, 26.581523397734962, 67.09050422273329, 82.71540068133744, 56.77861247363729, 88.75404018933814, 92.64246785364809, 29.9692217452574, 63.85885742645206, 44.89096883708443, 38.521365964887785, 4.750084774187258, 2.1694462773312995, 12.108898092355824, 91.76167794915912, 18.77198664239176, 60.77363491507798, 47.33333224776132, 5.45978406826555, 75.4411707318842, 77.39468060854225, 11.681069610901263, 98.77226903336846, 75.48813266874278, 5.361223429540973, 17.903501032150416, 39.97397934774081, 56.31450971268175, 91.32657301510969, 30.401112686329913, 21.223870369452456, 76.17403656206633, 93.63561659387867, 30.113688624537193, 9.477883220673423, 5.720479579247762, 18.34066400661254, 91.33608717428282, 58.80171043946489, 74.71566388597644, 67.75431370107692, 95.38945296623146, 93.99022231485257, 97.63480930579243, 35.29671599637636, 11.615278004424823, 59.69764043796059, 17.328559273510415, 47.84190339249059, 17.619241249162453, 59.88946088503655, 58.69764194210185, 35.49956398187549, 69.46013383493208, 99.87510302260645, 52.10694294589639, 28.27820882437412, 3.91612580462527, 29.874349965698578, 6.663744491895585, 53.63842733477361, 39.23835520560398, 15.55393216316573, 8.447607866572293, 81.7728510442955, 14.693059059995994, 65.6115007327343, 37.093084991351674, 33.69014849041195, 37.09402935993364, 94.79136291264119, 56.08072650407669, 65.62382792519801, 9.372260312638014, 21.992726807066255, 11.47287300544585, 60.398140803461196, 51.82243960399131, 84.67198571218182, 63.563831956456, 20.880616004913243, 53.289558273465396, 92.91448435585397, 3.004886939086171, 77.00892897108916, 85.19475362069258, 49.92456240192712, 89.6726999621545, 39.4752219613816, 96.23505577975652, 37.732420295928485, 84.39716256408309, 34.06676425689423, 38.31080375632527, 1.37446421486066, 48.013393010092145, 7.203986736514856, 90.00893934774886, 51.63058555928212, 39.920799370715656, 97.31399513026552, 77.05633587942465, 91.6722130872794, 69.65381764928328, 27.43635552896452, 72.03142350053038, 76.6187534515323, 77.6982797823892, 86.86114046716625, 4.758999143164555, 84.86069481501947, 77.86396146959986, 74.49600383333893, 17.598338056661923, 46.225418011891776, 9.171894838998861, 89.75214042674739, 61.90980245244556, 7.953893688021518, 23.99260265220864, 19.897101083806923, 20.458678649064975, 64.62022388605571, 42.10426516814027, 48.07973379561297, 40.556692043352406, 95.12209357496427, 63.00696776752452, 37.87381679878325, 56.04608009507926, 67.71867678128596, 98.35991834634856, 85.94557659232748, 15.752702535974283, 7.380222647289636, 34.36902370499444, 53.52920030579179, 93.43464843476305, 60.408253424501666, 47.27639508236925, 37.75767555196459, 54.638865923476146, 63.47831594613557, 72.47794000806203, 41.54607435424281, 82.08878167311644, 28.023081259372628, 23.541180002343598, 46.49548690055097, 45.602768296276565, 98.27654249483551, 4.431686265659673, 6.011541683594979, 81.16665357549158, 48.88017461958576, 38.71866112595873, 69.16199649293179, 82.15785855899593, 59.69075478393256, 69.79238790891347, 11.859052255965818, 31.1593559126372, 61.100496402157, 63.037175077285866, 93.8326977737792, 31.636378281969392, 66.0190402628903, 26.676126525862397, 3.480948020115937, 80.94483337609985, 42.67555218600301, 6.997688937509117, 37.07606007888332, 48.768549151340025, 27.84206079360939, 27.307319794242947, 96.03518686922928, 2.0782614894533924, 83.2503642361628, 16.735710901057942, 95.95558764086027, 41.59482796511597, 11.097720745618844, 36.227331212989135, 13.56505970366203, 53.66219096897, 44.75193337954874, 95.71089543019718, 48.39817559159562, 71.83130909402134, 37.60494706768378, 38.623204450885005, 43.59630374332056, 27.933714956418008, 98.34487016303574, 9.245396534200657, 39.36309110799437, 49.031210017967965, 28.44901412467934, 64.07694066940157, 22.299678845494654, 72.73678120759442, 40.03400814269769, 1.4765238072092512, 33.997635846207785, 78.75916768154849, 13.523773468736621, 14.848751389267822, 14.757875288193645, 1.8365161835663613, 69.71525544008284, 59.150691590428565, 63.30290014011394, 69.23538444861644, 79.16587278120657, 27.274950869147606, 28.342220946682882, 68.835874464702, 68.45517313287318, 77.63754032764783, 30.650073234609685, 34.80042566192396, 72.98317449067898, 82.16104190041312, 60.932723536058205, 15.354145562782772, 1.83971872691846, 33.72818811553399, 19.476262012937628, 70.18421343691298, 37.04655607631976, 23.895968469550553, 7.006666279229812, 91.07764346944865, 87.29633674434739, 38.49942395486271, 73.87778333053258, 43.94682992635843, 63.81126325393747, 70.15013445825934, 33.86058049660188, 37.5197890403841, 75.87587866510268, 99.17070183828513, 20.60319554169181, 13.64029639797295, 46.885069771199724, 78.25482772025906, 52.477669092694626, 37.863020484433186, 70.93321078178779, 27.24318425674892, 74.86689375085919, 45.90252589110606, 39.990117121467875, 50.36679802980252, 3.826851544033194, 21.364853866108547, 28.78096420155598, 52.842143520597894, 8.036741762722887, 90.92806866054791, 86.45962344645592, 83.15151336654716, 74.7077229337378, 58.843654677723244, 44.57198223503514, 1.5164883718330358, 86.08675382632546, 54.72812742855674, 88.94966405987176, 9.275892661552575, 75.41331227142605, 40.94758569567995, 31.25509589679025, 94.5436143711382, 89.86094314075316, 84.19699970544416, 49.50433626941809, 16.314499708574427, 1.6052841452761313, 0.37882709662336866, 21.24562313961693, 96.16484787062578, 92.35294503330503, 92.23340108072561, 60.96740513733979, 50.63254545519672, 6.465733869184353, 44.68307453702675, 39.21335445519449, 20.333729499662123, 1.5542346179095667, 32.73504606893244, 38.447569101128465, 17.464580781671014, 36.74076849468197, 14.411208548251553, 90.60325767059419, 68.49385707264823, 20.102640063195498, 39.19650212396271, 51.81971279851588, 86.41860686484529, 7.9079517681815865, 38.69496059132413, 90.18283723451172, 47.74507639196002, 24.71524385689382, 62.62445405914262, 45.897555255856595, 49.15860033358359, 97.80087660827014, 6.052338098373822, 52.77562669485191, 22.276314586047164, 32.40649816872465, 26.814618009494673, 90.74990593335053, 85.92430854535772, 13.98714125689784, 12.21267707027025, 37.7230656203911, 39.65668016137492, 84.2735917896664, 28.401714650991238, 93.08885492213189, 52.89264260491717, 3.9632424263727817, 28.863761616563387, 53.57043362567081, 11.412802155129608, 17.710879382962442, 68.94604002353412, 91.04162399668742, 61.93667617982291, 62.127728820446634, 62.53667601956712, 98.05429565642054, 25.870720301321825, 14.785954146148605, 17.46530293284151, 78.65833821979021, 87.81882940605338, 96.04512040184235, 66.99711229883319, 24.275251556425616, 24.321688541213238, 77.44011575421327, 40.69379653714896, 97.82187885860282, 22.879542464434376, 72.63946668448486, 29.921042972621347, 83.98678957790065, 21.17515438868478, 46.010719164009416, 1.8549610157702734, 0.936584626387349, 31.64426546548127, 83.46470375828223, 98.61336977118744, 32.57119544723118, 36.99405870534762, 16.013213604700738, 53.25161778794062, 17.452517826317326, 6.117876090864016, 60.99062827772047, 32.016040775392376, 16.355027718428715, 64.39035602084088, 47.99145759694464, 59.131412697604524, 98.96052622363693, 47.738535947895954, 99.96297429122433, 88.70998479209479, 76.06619217576728, 13.897613439186674, 88.81836312173085, 26.940947640089085, 36.70463362460224, 7.535842028274564, 41.78405017368883, 22.35053957896517, 11.76320064742643, 55.60638166107433, 81.4612350578125, 13.985007180445997, 77.8124122040744, 42.670748167046945, 76.95164451229186, 1.4430710539624636, 74.1546773199557, 17.420088127554113, 58.111328042211575, 55.92082797228496, 17.01573688790907, 83.29153920221142, 2.0899923843353485, 14.72719460472176, 21.328351001464206, 94.7145160137935, 14.548789374253545, 72.1268403658322, 72.90213555369243, 59.963746497411286, 87.82833896828048, 87.1563930662036, 97.24585215701704, 81.17076118593738, 84.29707330402387, 17.431337631829557, 25.628143404271675, 3.013435980650825, 22.731765861798014, 63.21731001998793, 38.38862574123911, 64.37832259723943, 27.41491941750782, 82.8091690253995, 56.802168572549746, 69.32999580880622, 35.40071553682053, 77.59904448345945, 37.24007543182207, 78.3644889162209, 23.036997568279006, 66.91024124695065, 56.6683352528156, 22.223769008604055, 63.85572407050486, 53.20327946026132, 81.58677260200301, 45.52492209241902, 82.71996958926547, 94.51781411845116, 67.77617363334413, 61.37465765956247, 21.74759379210771, 39.12581987599593, 68.30100117297452, 76.25203596880243, 78.17304316653613, 66.83323854841994, 11.769789175916067, 91.53539447220496, 97.02349291506022, 35.091199800627614, 51.18155587098617, 5.866333268231805, 52.15951808954233, 72.27250051197115, 94.85813560828151, 69.71820380303403, 16.526651084304035, 5.608331956942802, 5.913014003427364, 28.3390195046316, 11.967274579260268, 18.11158308780939, 68.76232438257055, 58.760952158937855, 9.527104151433097, 92.01341357448219, 12.974845070472341, 31.886503826410394, 44.92790074446845, 31.269626034078748, 60.21787821151141, 26.19946573877795, 27.97403982595662, 75.51773284792148, 35.79712537350632, 81.6999620930094, 51.519741974157995, 53.70851966827826, 24.21246008726832, 1.9248042935481102, 47.65345728502892, 31.051938522172197, 44.67306421821301, 18.157627254958886, 45.992246964679936, 4.743150145150333, 49.41259753404867, 21.985774966406634, 5.155169440076257, 50.1446539734956, 95.02626406901013, 10.344087127674928, 77.41506765577229, 59.32363977169884, 75.06193991713475, 68.29587978629668, 65.77172648272565, 88.35493075023535, 32.493374994474536, 69.55084918464277, 37.97554829619183, 38.0495183034977, 28.72028322750746, 84.22207283032458, 11.305749566453184, 17.338398482340335, 95.50750669808068, 8.980414281391202, 27.46382040732538, 22.55902893771434, 61.472537351978794, 45.68249640227713, 5.685629210411247, 79.99423173074199, 83.33206598516517, 23.217657612149758, 4.194906083656457, 83.47715878506799, 93.51765078616445, 38.28724272196652, 16.972427293416324, 1.9735119015716673, 12.310963146575881, 23.21651787134226, 41.72357643906894, 67.03244879455154, 24.475861524152275, 1.1509599104218005, 43.937910653502676, 60.963699034591755, 10.768417577840161, 49.89692321052471, 24.94056692170945, 44.324332944566535, 86.36367332501152, 5.964110130089118, 0.8141333854312038, 29.398825595545965, 91.28262293680814, 20.14252417760929, 89.54391013791478, 0.18594000501442887, 26.56291276022006, 96.54698664791934, 86.35385903735511, 22.52611298971019, 55.50795495661691, 93.49070246070198, 11.76526212546447, 25.3041004916269, 0.6832737746497619, 54.26378608097083, 23.094298091486287, 39.92888260202766, 28.159192177046222, 91.04056375685168, 90.48343654590386, 81.9247583850172, 18.860296524292618, 7.083312124173313, 89.42179476188502, 26.831480067564307, 44.0810325239526, 80.0369028296216, 41.63289076684722, 71.31257483460105, 77.44309264305271, 57.56862920566675, 23.077080308692743, 43.915997491570025, 66.37642703074856, 67.0131093210146, 95.50715735915799, 28.207493543322048, 3.8877262973796234, 38.45496059617144, 80.52350773555665, 90.45580033727632, 55.05345863495865, 55.42548668458503, 72.7235853330061, 79.65093945080484, 1.7841642431459914, 69.0965113230644, 97.0356441302066, 62.39280000921119, 54.923589092350234, 57.766544514469246, 65.26847744940191, 35.94679261401216, 93.68415638405698, 30.390028008740433, 81.62591909922939, 90.96319098419497, 31.575087130990052, 86.55577264331728, 81.58512642917626, 38.90925669043613, 91.27266612408206, 39.72755360863863, 2.611425791107369, 66.89641083328436, 16.66576085346151, 95.34736113387538, 77.88748602966054, 86.12983440248902, 89.90796941640193, 81.41299525602625, 30.030414468421508, 46.15756073922407, 54.43798030312497, 7.522670133568699, 10.357595499784477, 25.589596363080748, 86.69678751165264, 8.020410408506107, 7.0577924588720915, 75.89869528058546, 14.165104667040552, 2.5314393287388715, 28.88434202267399, 41.092617517493835, 33.636671187350856, 66.83059218841925, 58.970409277477245, 88.72581543144021, 73.35584813146119, 80.72476526721812, 96.24149555495674, 70.46027479616981, 22.179529488059945, 0.7450345385329737, 5.4059324216977345, 41.5436535553792, 28.47857056149863, 26.069079212692824, 96.54490097873625, 68.78238858021135, 43.74576312192031, 10.572686007009501, 25.810802538660226, 69.22464837855023, 71.67941542142118, 52.269431011391276, 93.8412413355277, 22.961834604131948, 84.08250814546686, 30.40820040472132, 98.70912484263748, 94.76327791386595, 26.40907511577385, 96.2157100915204, 91.58545375725642, 71.61307597755419, 61.45579525770359, 71.11961072294537, 73.75381270626949, 32.55287866916985, 54.84360278187999, 21.436200257940328, 75.38609736105299, 39.331437600407796, 35.6660640345294, 51.79875290785242, 42.74986214144635, 93.25650055710422, 49.712951449559604, 49.06478432885041, 64.45710110153968, 57.788084887319414, 44.436194774752956, 70.35531481154578, 50.82431564822223, 92.34123478202095, 2.108768449576459, 64.97113929188669, 50.87185059992122, 16.263903476701913, 9.476452866476293, 23.283684527011328, 89.59291869270155, 27.32063671630709, 38.26403233220235, 93.92630455471803, 66.90914981204787, 67.23112833461768, 98.49950982310625, 17.796645946706523, 12.078176918359718, 70.97490349086843, 43.163528756806876, 47.677820857834384, 87.9827365087319, 13.841575147882635, 16.776639738493383, 30.083434489465166, 32.57260816621855, 8.955569735222513, 97.27212872323808, 34.73115927065473, 46.26610044003192, 53.11894252263822, 80.4411877035556, 8.489727784235102, 42.81650000630193, 16.71888832675903, 32.97496624984873, 82.18406359544596, 4.3893911148025655, 61.890745618450396, 8.432602970997161, 8.71271190660725, 90.33309948865569, 40.82263235547296, 72.82341551668927, 12.756873389836276, 21.147834809093812, 58.802951174389726, 72.32809036295696, 98.37479612202247, 64.65651939863356, 96.55528346520713, 22.958094228170765, 58.058201232566944, 61.23946768197006, 10.159842040923461, 9.16858840546, 92.18975036598428, 69.18703837465769, 37.821856620419844, 59.537525332553166, 32.17899538523451, 30.127898695462886, 50.62993286435924, 81.00806903267109, 11.042919782720094, 53.83820268668102, 94.82332642845586, 52.281442001544974, 56.899083389972574, 40.97773841512732, 59.476356152178376, 43.502088981245954, 14.107515040809638, 99.93928690307105, 22.390619426904912, 69.33212806514027, 11.546234073027051, 1.115542951215176, 55.51434583857516, 81.73870138043199, 86.11738154607762, 38.98018429772938, 47.29734325847092, 18.257968599534692, 34.675052051800705, 13.121320539797242, 48.478048623621675, 86.17646364082471, 45.865909371182546, 77.61158505352438, 58.59568288538936, 24.164127450087626, 65.85442585132107, 4.4549317246610265, 84.4695509408945, 25.317041331501432, 61.7639106234204, 80.08010252936461, 78.69106759667505, 36.59228456434492, 47.616164620833764, 94.06700538706396, 27.57747646539499, 19.99274380643107, 82.09258108252249, 97.93464515186746, 56.642114560560174, 36.27438726835468, 18.41675147788696, 54.652102721165804, 41.74734411684528, 85.32409925149734, 58.16658404199955, 82.17476789257994, 10.866403510959977, 51.012726333421234, 1.7434683192823597, 15.690374489196124, 67.66556749811376, 66.61789236228842, 70.5668889965633, 0.8804978074780312, 47.037241836038234, 24.655335837571123, 75.36337357833551, 76.3539050787269, 41.948195513525555, 59.310480370604324, 49.848324402030066, 8.712800762422768, 69.2925770097753, 55.94038794372648, 95.09261929779143, 94.26034774225215, 49.72029027173184, 6.672871045011997, 17.41061529383463, 40.0874907057746, 37.2419774535362, 64.24944232040517, 3.894790037951801, 81.42302781478902, 90.36194412044075, 77.09255640995625, 71.78813190875866, 3.3244455258457206, 95.38994314833279, 77.09782148142011, 50.88614883011865, 96.53319091675723, 6.869254049202988, 67.48501868654844, 34.039698060903554, 97.8798716662991, 44.6452676725536, 13.368123545199639, 19.973477279565078, 15.118701973830294, 85.58735035415071, 32.00589678479516, 0.7268747446987134, 4.089780734138571, 70.43603028901292, 99.50939081647424, 55.10610416125621, 23.196412337371076, 33.32106343377775, 91.25683834444949, 49.855330747983885, 85.81100528343572, 34.446496703744266, 92.60411349026427, 55.81771026588312, 81.75447401171752, 68.79363344452777, 51.89737460835443, 51.95566022543265, 70.53470430223044, 11.147084654975359, 14.318042495426198, 64.91469754136853, 40.640809830224946, 20.142632078078737, 95.86868537732518, 85.10240811870175, 17.195250790596837, 99.82644765912019, 78.67020904329934, 15.792417705422901, 39.73598669143927, 82.14886380500258, 77.36011834753268, 53.25743658975413, 86.07003079558034, 81.78765519773162, 66.51495125707804, 32.88137721373173, 30.70969595708114, 66.15746063491655, 30.208501817360222, 6.48248828472412, 1.1885989701869382, 57.99251699264569, 61.462654595521094, 68.38067069727863, 76.48042663575266, 51.44033666513963, 28.40931189028567, 95.75662660638822, 75.89679946011748, 75.90067275314613, 60.75592318717188, 15.892047881626748, 49.605464102164966, 15.015363121495373, 11.031699086228564, 37.0073549945256, 78.86936034781623, 85.3370725170786, 71.67836308038667, 99.99629796168522, 44.062075239282386, 44.97244291983718, 98.02586096344615, 75.39745372821297, 99.28967392200532, 40.662338521799434, 37.239713749440774, 56.36018226836504, 1.0089335431270774, 76.79884788095401, 71.16356363447845, 19.80987197107069, 62.4027882161134, 79.24613629007385, 71.07457826147667, 5.364587645183305, 36.997381364810245, 56.526932019627495, 58.14965755722778, 62.68005524910586, 34.37308114085115, 59.46775487409217, 13.641900825898468, 32.690696130224964, 73.09890209896, 64.78001603586696, 59.909348278802085, 80.7629119688576, 68.93918642648657, 25.084699095625005, 7.004438301989458, 28.724388702351355, 50.82416068197335, 38.42470915447355, 85.01600722922157, 3.90753830183328, 38.78885060108328, 34.806231331441175, 67.60395899820652, 81.48689865141867, 74.59166926077948, 17.05381776289031, 24.716028717605308, 53.10897378808712, 32.53182291046656, 10.130142500780492, 44.662051293845614, 58.46905888752754, 97.03126490346845, 13.292372333254033, 57.345409624865596, 19.573717453792405, 10.636903337732884, 7.763813141250453, 94.32050024969239, 27.80398509134072, 84.54617733653161, 37.47633885832936, 34.74437935663192, 94.1381733630266, 71.85813280739943, 44.22847052422233, 49.188395267621146, 74.84930117736329, 88.67772475951296, 63.440830285343594, 55.64627399278857, 2.3774904849267364, 99.60022356471185, 39.46452390823333, 99.95322944456876, 50.437823618673264, 86.4611979499377, 88.46903101704746, 66.67216727217514, 29.73198029810168, 42.11820552826235, 21.216390133575747, 62.34846667783243, 0.5574116464797441, 51.357312440663414, 34.47242577994663, 16.1127785041695, 94.8362504201827, 72.77860648314143, 36.71693413537924, 49.61147168872174, 64.63022566206598, 72.11780195919417, 17.478119083100463, 85.80640984459944, 55.38949647504039, 63.55011815716852, 26.81898125609251, 85.05592905116663, 23.49732382715819, 36.27179672521018, 19.47912041828279, 96.30216058680764, 36.28957801098866, 54.92964068513626, 16.869081527924756, 1.3966469026369555, 47.65598244199659, 80.8588524325572, 36.669134228477375, 53.35865364338619, 63.170440534831855, 50.94906034798231, 59.79366887503752, 73.84728539585376, 68.42906185301653, 24.01213667193186, 65.66737682926853, 98.3636611986628, 9.201158466707415, 67.43968669717104, 49.419991885598535, 58.89529475407757, 90.62241917583813, 29.32050378271034, 80.03081830900277, 47.9826118333317, 83.34335960620933, 19.879321399744487, 6.789174704780798, 52.147640927362026, 68.45362880932679, 34.716876497332635, 86.83610510249775, 52.44980013541384, 89.29170568444137, 1.5644804074151475, 97.45766841006066, 16.035110018786046, 98.35399085850362, 70.11187850092567, 56.736872325300624, 51.61416755869656, 28.42528021335188, 2.9179853094172814, 36.557381710105794, 11.551194937078058, 89.87298047361894, 5.34179594979205, 86.77932644135906, 10.687034822861497, 62.4965440258724, 86.46279561915313, 29.33850207280405, 15.413450940119677, 68.01934115087663, 46.62262435419212, 94.3346474692051, 31.118910743604232, 70.8320479688479, 63.664117039604015, 2.183377448625967, 50.396406434816896, 24.527164968055025, 77.04132985518756, 54.56052685779805, 91.21528129541097, 64.81175219318564, 70.48268988431965, 47.68954605756498, 69.06339041883187, 80.11623683534064, 91.93799334488338, 31.825515639729616, 6.7481794995691065, 77.46508617799061, 91.36428499627623, 81.16945366058862, 59.98344350418707, 55.666144675224125, 24.448641748486043, 64.59966876714522, 20.668674090965666, 41.94589684096395, 61.68763532732754, 42.628915479848764, 87.65277657836421, 49.95799308797795, 38.00144445623885, 31.775584382533417, 89.82180598991795, 30.510654657054058, 2.0495034087890107, 50.35530049640972, 79.97389902584176, 6.325877646742661, 11.500599409888801, 53.078640516265764, 18.220302590424154, 53.57664751918158, 6.586515793752989, 29.603960543319495, 4.570301581821412, 16.993827742835098, 65.10221423977679, 82.0086519687149, 15.296539448187762, 10.68483121397329, 38.87458418082409, 67.4690469095338, 25.340492190294086, 51.08586055611166, 36.68877289205944, 38.1289747279424, 55.827914270723056, 84.171908024374, 80.69673957264948, 10.11874418280765, 13.709806738686892, 55.85975012359411, 13.386027212821983, 59.18734724849241, 82.67723473140649, 28.219095467034684, 20.995778393024246, 26.008113854135186, 23.85398952753176, 2.1354733281519267, 96.78575677987, 58.03274887402144, 13.803039670122763, 24.57360880548801, 23.603384131733694, 95.91043624411861, 19.32201640645844, 92.28029517600208, 50.38498147012894, 51.67215174019171, 81.93405385759954, 58.43474131163523, 19.0668932687695, 21.182316317234008, 55.380575137820365, 82.99544018597925, 58.77640959128569, 38.61455301207095, 54.065114123706735, 45.824062600268455, 12.16174441009803, 86.67582756797613, 42.228118538815416, 93.6177891320568, 83.55011386352228, 76.5107128151709, 88.59200164820993, 63.239778399923054, 93.27456211094741, 37.049149381683776, 68.093184443634, 71.91854513521582, 90.43111615537973, 39.870514808297465, 56.44490493923109, 16.88793723320574, 88.55383677301506, 33.621924147455736, 46.3971997351587, 34.496948347339575, 39.52880871091162, 69.735160108694, 30.58822989565838, 5.058968101762618, 65.74120689129407, 8.790692568710679, 54.87596752707299, 78.57434253475274, 73.15467198248406, 86.38884742365433, 82.84385643526937, 10.0657639540914, 25.483697404425754, 52.98464245187237, 45.56808736184493, 67.57721137429775, 11.357638907103762, 57.80072863725854, 34.849341590311724, 89.93518021809948, 37.57594459968707, 78.41020310571962, 53.78437283204216, 39.363923351074604, 43.262573651326534, 94.25269089802218, 76.81833570575607, 58.2463099027385, 62.798709071780756, 1.0041858216696897, 30.004494123725244, 4.015118238611226, 82.65501877223676, 80.08127706386823, 81.1247540938291, 30.569787134960112, 74.83206649265817, 58.42113413778469, 93.13689430251772, 84.68752686691373, 50.8635271189799, 45.2392362072363, 17.832008060858783, 41.81942914826612, 22.96115902328798, 19.242283807067796, 18.454318079183995, 70.49737566650232, 63.20330536113874, 7.458136183819253, 74.21012659639725, 17.68714830336312, 9.501817994194738, 35.811303635459716, 79.07177041459047, 47.974872766954725, 92.37124359598621, 22.778063859266805, 94.37879271943345, 11.995882640896383, 80.61218958923565, 93.49633664171465, 10.467117618882105, 50.244306265064, 2.6034215656994486, 4.9141276399831675, 88.89407136875816, 31.143258226282644, 13.89179962256305, 55.182124991943006, 96.15681902974225, 52.163959391338764, 19.355957362941677, 13.936546613326971, 36.107973167744525, 20.758054028705754, 0.3296340614533655, 22.365856350167558, 37.29149875105705, 60.11068507877643, 73.9776727509803, 45.47045208420239, 48.40108623108862, 70.73074915232915, 94.95018226746753, 69.06935785809392, 17.59734052757771, 83.55425965576056, 36.25116961968058, 84.87810675107555, 47.268204020259766, 26.11264152781274, 91.06317890470423, 84.01846665349548, 94.36608211544436, 51.84676792139694, 40.30999486737007, 46.410271386447064, 27.488529316016887, 90.45562331368858, 78.31232236355517, 56.65000741430044, 82.94538029576749, 85.87282613966936, 81.92418336140058, 31.172153419246328, 75.21981452261728, 96.47557199734142, 23.675951620183234, 93.92399268786795, 26.333728869513873, 68.87961134939673, 40.45498342236697, 90.55738889222344, 75.97231701972605, 24.49649717372936, 21.02026901974782, 25.962465809770595, 83.1192503465483, 33.54655589610049, 62.70235350600763, 56.51120909624437, 33.15497059453717, 11.509604109505734, 24.75944963489991, 30.73226983065087, 70.43626292513258, 52.207733191007, 39.18458110206042, 20.56396680067306, 82.24106827669212, 42.67645049829106, 34.658062786006305, 87.32516321661586, 54.90470675625446, 94.50163782880466, 53.236569250176835, 46.25606891596171, 47.738113766177534, 25.461882035342754, 4.94853136565504, 85.4287648716053, 81.94547711092514, 5.247702894403705, 35.086050536103954, 35.15162525074371, 66.83823893905569, 23.73630190200171, 12.320041911012014, 39.941880489567794, 24.772750410368626, 42.96351513075523, 58.53983306616771, 78.96359147451534, 23.967667052395846, 78.7846183205605, 74.27678880905071, 83.64377594409721, 84.24323493373423, 67.81797693036249, 18.492978848366825, 4.692952438511766, 85.45361339412825, 45.854131451948575, 36.87401719561234, 32.41759511911022, 79.82650363829363, 14.732218611688753, 94.72674480367026, 53.48081326741655, 78.19917680392268, 67.46701077560083, 8.500852843906358, 4.799776650904953, 50.240904265959216, 79.68597929418735, 78.01125811961316, 49.57900225305782, 18.22426107690961, 31.978991891348706, 52.77964045605516, 83.1328019229996, 56.57392521051114, 36.265656341387256, 31.931227466545753, 12.628625905786405, 74.16741543887464, 72.18416020937445, 6.994859411765997, 22.302796647822788, 34.67150609323364, 49.519040962143755, 5.348543543301155, 58.00010837398184, 10.5544879336526, 2.7529211952380783, 49.91534361189659, 75.29401525803114, 17.874228705795538, 68.77002720341662, 72.80541005440041, 10.121234214795061, 77.97429587752171, 53.858835848168674, 85.38513318280229, 51.73763277587621, 52.218941404152275, 38.05823332704211, 61.88945607766212, 73.41017732157891, 62.897405868318124, 67.45525633768817, 2.01655784582091, 63.42249414239556, 48.220982247268296, 96.46871614369816, 6.417004139957516, 7.391976794006306, 18.91649093406994, 91.06886921773058, 39.65712698127663, 59.187021116808715, 80.70249095797499, 34.65922360527045, 96.96641259530308, 88.87983443613327, 37.50545207324196, 2.4371717212823607, 6.313115420093041, 28.855985837474663, 36.87429205347734, 26.29502097633213, 23.773955593866624, 34.943779812680184, 7.370279218172793, 89.18679581407505, 68.22158218959706, 21.038021124664507, 73.58230330656347, 15.059415207817949, 33.45968024901088, 28.3787301594287, 30.456575327794543, 81.12471275493664, 50.73155564834836, 54.376651792740326, 13.055038054013979, 15.93342434637245, 81.02699958744577, 14.764846877601856, 65.29182049621419, 26.01260941231426, 86.69721375379076, 85.8841539013256, 46.089730244464235, 88.12247289315866, 89.31000944705563, 42.75264342117774, 97.01202320324056, 36.2441857438942, 77.83790119509705, 92.86485612240143, 89.24191499270275, 93.81890002681055, 87.07825928385158, 69.65377799770006, 96.49538232960836, 63.66330292579799, 90.88818661590878, 57.749696082629875, 38.8857515180389, 5.497441337678843, 56.87763628561883, 32.87914569595126, 91.62672192214875, 16.847437200975147, 42.6780193188257, 84.83046148658883, 88.0806327521573, 67.70889695102726, 96.25222727848367, 45.198958531492, 31.492631565723283, 73.28153826095085, 90.85544319354393, 45.68115175678238, 89.7687047409904, 11.784091264303331, 28.979927837998197, 76.37589636305444, 18.68692361965364, 14.000814742779399, 65.93783459817956, 72.347502043256, 16.463706707341295, 55.69387001420127, 34.320680209767005, 60.48781558949705, 69.00707281996331, 50.40203526580114, 71.75431459495438, 22.34673945269664, 51.818981112083904, 81.25899176445638, 86.67299824887445, 50.77235559584462, 36.228306891408145, 33.379343870225675, 98.4829353949105, 46.11428807891833, 73.39133923292302, 44.85590646249834, 91.63008185812524, 55.93095216670632, 47.975559489315046, 10.869862365895877, 89.39115862103401, 98.52684573992238, 98.66487395167107, 90.68558458095713, 40.01391340496967, 37.85673655494383, 31.16994240139772, 11.651691452756596, 96.71137995169914, 55.524210502393444, 66.53527056358496, 3.763019857586547, 35.345910258879684, 44.809010967942655, 78.35033250496046, 62.13137211048505, 68.82978042869793, 13.254153431154181, 66.90693471569541, 70.45990978124996, 62.33504872556459, 65.85830208311693, 82.3654107823533, 98.69060002044083, 41.70442457253753, 23.25293769830563, 82.02368690190052, 56.937263026006704, 18.87916878029159, 40.66270781414156, 27.422767544149362, 38.97796008629976, 27.496786693825236, 91.93237257514633, 53.729040197078284, 51.91038174277269, 28.736435458719512, 53.76392986163921, 39.758610699227226, 69.71677345803037, 35.04481836241457, 19.28693968740276, 33.99598021931586, 42.108005925190504, 92.72267978874872, 0.20048499812943543, 2.3673007031096094, 62.511172568768316, 21.084593157144205, 20.613459031502213, 6.6940030357451, 63.11908701259682, 31.643051255504417, 48.881543713280074, 73.42287660572349, 46.21304783435045, 59.65790774052104, 44.48012549706919, 8.78849429678491, 60.604915514564794, 87.35271146918457, 86.24131720764173, 68.67172058142205, 92.30734607329728, 65.1133316134644, 93.61628617806228, 6.041239372286123, 55.84238010234761, 49.77633669410242, 28.491695284673234, 4.579532113446138, 50.95409278987882, 8.482596195697834, 25.47161211639143, 81.34875978000925, 60.56924124471519, 71.454779316643, 10.639183091800298, 24.663688146005903, 81.32504290003763, 99.31848085675215, 88.02285094369032, 52.93179826452642, 17.587048458121835, 85.97326186062749, 65.74915732398634, 51.47750238991262, 71.86764975799534, 80.13352629146364, 67.27049288360544, 70.35619986754817, 63.545561224861935, 93.6908327940252, 88.03291299575588, 63.55557354040412, 46.88870258096035, 46.217441171150185, 48.1958172622936, 59.16286677383472, 62.71604977670865, 71.53651152209073, 46.65768971425326, 94.10511200537431, 66.11925215864336, 75.30947155108707, 97.24239054475215, 46.041395917079875, 20.91747357365851, 21.51481304992623, 25.233140972553713, 86.62057080369264, 78.95399316669753, 68.58934831413718, 15.816161551500485, 59.36599380603076, 58.26763048237393, 49.7812771530177, 93.57212316267237, 57.778160035020186, 36.26494565138657, 52.88785578613169, 82.00580836582526, 27.17524638745299, 10.155349096959698, 67.30378215666335, 36.92685169331559, 35.973622585895185, 65.162021189937, 95.67017540143807, 43.47015810270314, 69.82725452860407, 58.97306851229236, 40.50435900221413, 66.40089716926173, 52.56153507518104, 23.838861321966764, 21.498478744403492, 94.68460043343347, 31.195315884940676, 43.48955150387555, 91.51431602810959, 18.237700331080976, 64.83153011400698, 15.899312151490896, 10.46145980402926, 53.38441286397531, 0.5611270037480964, 80.7740207929353, 45.65382826025286, 27.217494240607543, 17.48523510861797, 9.411789425883743, 35.548515127588566, 58.18685860041274, 45.80178836769012, 2.2051356405278666, 70.8006406823126, 39.001883181339906, 75.6196949947981, 84.9483881752628, 20.63444831989838, 35.59374235903587, 55.12108891032222, 48.80809568827633, 85.49302107714641, 55.313898893018745, 45.450096050544765, 8.087669485024263, 94.93367143423127, 40.15273351924178, 92.57074590193616, 22.157640412102197, 3.695535994299215, 86.96425152378366, 69.46482988534949, 95.49420578940516, 79.05261299875256, 98.53990257586378, 36.54825605774694, 22.163639345612197, 96.18843487908833, 48.86553945995822, 60.10020206353989, 81.68502580506566, 96.44485025748367, 76.4747297946457, 79.77618241951912, 80.08419733345598, 79.9466379985477, 59.76971436665981, 60.009407140652016, 61.1290781105021, 29.69629640086888, 96.70357375751526, 54.16767505455472, 30.190282981509387, 26.68247155296648, 8.701209927388575, 94.01282632778023, 75.67749326087242, 42.75496403032656, 24.00338504117877, 85.97326843274388, 2.237879138779808, 27.362771497817462, 38.968432638644124, 90.82763509377511, 26.18532441564726, 10.792321703099695, 49.71785114571276, 31.228141489200024, 82.734490206784, 22.794320837998228, 50.44485398439708, 66.25494733135616, 6.850694794396805, 99.86181237413867, 38.83972058959664, 68.664588693605, 48.45517618661555, 35.64981705004704, 77.11862784358243, 25.103974568826715, 19.9321561628535, 94.06110544505813, 66.13722273052291, 0.4286831079174047, 1.776825536808413, 25.987836232439587, 48.36017447549983, 48.009680349640306, 32.632962957517684, 31.26736200927631, 17.255762038450595, 79.0318367738966, 3.977021445210649, 77.28530053076821, 87.42548812771261, 73.65448932264574, 20.04240247339303, 81.11441214767125, 60.29888033895169, 34.74597392164369, 23.278744481743473, 51.293639563287186, 39.18025125639024, 24.265237780516458, 86.20578265674601, 92.53709701007979, 95.21168215308697, 90.98722101459886, 65.6112967286486, 79.42915026839475, 92.08993896143123, 66.73549061504455, 21.36368383994033, 56.24632784128156, 30.210482848523988, 54.42186800217981, 33.837497275813064, 79.82878802541904, 52.046373370167046, 30.44736086461709, 86.47527666479048, 77.51810686305369, 50.86780606654696, 58.199306785060635, 14.794269701662488, 81.52858162951581, 44.07949272799133, 12.154517113444818, 46.933954968498895, 88.56227858789573, 69.38320852063666, 2.616634818688701, 37.07578316079506, 93.29206384306656, 71.53907293969678, 35.74432873408773, 4.955548650924724, 84.59777100890396, 47.58837647265368, 69.98809853918765, 95.8225432246451, 92.5591650417264, 22.424172761117024, 72.4929897919216, 75.68426775853796, 26.98295560745474, 50.07293854862947, 67.45617957409054, 54.46464144764659, 42.092876876632324, 13.907642443763379, 4.360732931141231, 4.92550608056116, 41.44046038101459, 32.985065441567954, 76.37327039873612, 84.24709376951961, 30.207027442722012, 95.12189036713959, 15.661586426898866, 50.62896777115481, 85.0991533900153, 57.47299666125535, 46.94814148459561, 65.57960003066233, 14.700582763731818, 69.1144985811631, 75.57866840616701, 87.63153671816984, 6.318187449145252, 4.873021234750774, 81.22434168213748, 23.76178588897615, 60.051138509646016, 41.61358226192727, 74.89985172847626, 37.04448262814674, 68.3264780865813, 18.212519385468095, 78.9463682092506, 72.95638396488006, 60.94343711846467, 40.31476300163314, 24.177275449406377, 96.60798289987706, 32.108168930438794, 0.1485675675403253, 80.02555699832298, 10.756465834790706, 70.82538042612228, 54.40125278205461, 46.745162186637366, 98.51139131432105, 99.71537591496161, 52.21420829839104, 34.41197082138593, 63.09820700032059, 88.3409863663566, 94.61156159725353, 88.58725547062328, 97.66677786140761, 26.397534373373155, 25.275480099446103, 41.09899004184686, 60.59558796137644, 94.61167496671385, 97.20030242998806, 76.55135335768945, 65.94323581404674, 90.99843865825075, 2.3295814140842586, 36.30781911457698, 52.137424911448306, 32.105125771135846, 40.46256799602608, 80.51648410551732, 34.833016477618195, 39.815265059406826, 91.29934467663642, 0.3924193653612962, 36.639642030220784, 12.645321681950206, 52.86410180598914, 65.57808062206497, 85.17771863480787, 9.272691344053763, 6.207235891488249, 13.238974008257088, 6.010889505554529, 12.025928704581467, 67.78441886001035, 6.67717258559154, 70.27750045206102, 97.68208199212938, 26.140649714319654, 22.404998781658648, 94.39307220754849, 29.910892676390322, 9.899988381917623, 95.40853766380611, 39.18734967235103, 55.76098356826337, 7.008716671282356, 65.72159521977606, 97.69100408590128, 30.148335005571692, 5.812107244291442, 6.863578870041708, 67.18843513090916, 55.87428685920138, 14.961036514931214, 64.79212384336626, 9.301309708279948, 77.65828917586119, 70.83284517802021, 60.719098656475914, 82.01181289164539, 45.003914344775865, 62.56497368312935, 34.207144180558046, 17.15962633727188, 80.85749067100741, 17.414802153443333, 43.5166603880002, 45.48661714314455, 22.165001212680625, 19.25034623160333, 23.935414157475442, 91.55189358852995, 90.30551898637292, 73.92541181684052, 27.64167939584079, 38.288083552317666, 61.84880047205791, 62.845753954322994, 50.321056165871525, 5.1752356158733415, 94.36816201174817, 49.61376698347819, 40.99971157230507, 57.40901397039724, 2.8359143123891206, 65.76941360241833, 90.03832381188383, 33.094814520254886, 79.17925304908347, 82.88484707041597, 51.06021368423859, 34.67482507245522, 74.10968859488437, 36.64952470477934, 15.999182676369305, 89.51550557928755, 67.96839680208033, 4.0463623866538345, 42.15318374805509, 81.79423948281318, 8.516642902927686, 48.07686362652365, 15.117665203537122, 6.968470958063488, 77.96981184896116, 3.9472274133889984, 83.29475256259865, 99.82307043253283, 27.903660518655016, 23.23315010052889, 94.89140749793373, 9.001865798001285, 68.65924626827817, 36.36958216905125, 12.731576670714395, 54.96034612581157, 18.806982792206394, 90.24073763068407, 31.38995371650398, 94.20685058059422, 65.23007526986173, 69.4763216056204, 46.17901204626295, 15.04097890815077, 94.37151260080353, 0.5648041116356861, 97.96648906182732, 40.90175781270753, 68.86800372352478, 74.87917095075838, 47.517068581310205, 46.6927267755888, 23.432111541943524, 12.748269030876303, 85.10154968987969, 12.205739737254506, 18.41901221459952, 14.089410556408266, 66.63021408457108, 64.94362511257405, 78.47058209919739, 27.692189488830156, 73.35330453495175, 10.285461405685936, 46.761187322869326, 69.171487986107, 51.68761354647858, 27.601264279103177, 3.7713952139925233, 66.74119358184706, 94.07841141908965, 55.767841762765926, 86.55851873291807, 85.4381461899853, 85.97230191382964, 10.362222036526415, 1.3724424357060339, 60.37665787952308, 3.198413434285585, 79.51035794711655, 91.66946708320111, 69.60568545821948, 72.82151343812299, 70.40186599485973, 32.68970960363614, 77.16652620956557, 62.293256929802624, 55.675554978979314, 83.66345503510504, 21.499749197303487, 18.293411835179064, 2.2083167892502087, 41.12718262998929, 19.50110137274983, 24.671815937962414, 64.39175174727747, 25.042569629015354, 76.34520459808364, 11.792838726289723, 79.11672755862918, 6.081315532204012, 41.337666393903106, 29.39769328483779, 44.19807609893439, 64.9191293172487, 6.534351359430635, 67.09524285666308, 15.514398604296886, 93.45390257464264, 50.24536243826672, 78.53306013991357, 19.52645397309286, 19.417765255331755, 23.714853972772865, 51.9603475408142, 44.50025505514563, 94.88331633720647, 83.47630988343374, 2.711090394286342, 66.2240781981991, 82.83209023873476, 85.56431106540533, 94.26333204310971, 93.57055288290147, 90.99979351519261, 48.50699192697697, 15.976941013489466, 82.31525436216491, 52.20031647130371, 90.5025802873594, 45.733534622401464, 95.79755239344246, 55.76566335207113, 56.852427341796975, 82.82891454460703, 4.9450346215686665, 39.54479839564192, 30.682764691228716, 98.44871921295108, 5.9754101944689335, 69.42851246254199, 13.964436483028763, 89.25297861072528, 92.90419247661613, 29.25670284587617, 94.23245354769217, 49.48925485530905, 39.37789461080179, 56.2283094022441, 22.045207672834433, 49.25957734625954, 47.33064859339363, 0.9281247108489876, 62.83652237895223, 99.03969357285611, 96.20653303687067, 70.56820297768482, 45.56025375412429, 74.06077907317325, 47.3530514986585, 60.37241977487523, 83.7861421027954, 93.39996490124351, 37.30125167260089, 7.455153156797412, 80.29310754418019, 39.06328228127, 34.443104290085316, 21.123497754392172, 94.38757979760359, 50.44885338714485, 43.855660176847344, 24.048662313413093, 3.7835964244350984, 71.02188317167426, 51.60421872748125, 15.30883291990499, 0.7765837200681136, 57.18401353206444, 74.26208827178816, 23.91046862199364, 99.35665192696453, 36.552943178079445, 60.39085038672523, 98.52705122418426, 72.13893485867064, 81.08709437356971, 86.96885115583109, 77.56766400503572, 58.047481269505774, 46.12569375479754, 56.85590676298935, 33.87171363929, 1.1337836151666947, 59.65632772191037, 85.13428635741131, 59.27806307085402, 90.44778509864749, 8.95426468869056, 59.05132590575963, 86.90456619119531, 26.18261564599428, 40.86469919968915, 65.91862372243783, 57.93328069247286, 4.888868517712119, 75.35044262081327, 1.2823249647782142, 21.083486798135564, 27.484233859538588, 17.83060471431589, 73.99669204633305, 72.89404493029444, 92.79832843113324, 0.12247764678335882, 93.35842390049423, 48.199073272887006, 52.322777662188415, 27.94117627010967, 75.57572977914644, 45.44815390455893, 50.29208372017525, 96.42020411172152, 37.198083116373496, 28.919328458365325, 72.91348766118838, 28.18008349670982, 81.9336296932956, 31.985343798607314, 40.70635660058844, 57.565450701692775, 27.38785697109668, 24.37615243918676, 93.78841634736511, 89.37383735549514, 36.893248176795325, 66.85197908608961, 16.407124753059897, 32.54818567514434, 82.91883403925921, 67.95034173184538, 61.78560755113427, 22.124378603482597, 69.1091751641951, 62.78817217559105, 61.628412062451076, 60.224696414682775, 0.5215261079899225, 92.62594901490897, 92.14851550597062, 9.862177944312634, 70.07430026760647, 76.16028519686155, 30.97191876624662, 21.73966282976705, 3.6385521056610193, 44.03996047165602, 65.35881839200403, 96.28832245865048, 52.19657067488883, 71.72480544377034, 6.665356465377304, 24.799652383183947, 77.36277933456424, 72.16715406169979, 36.660058553284195, 20.637789925263405, 93.91036274021933, 43.49201005302918, 60.611391243159474, 38.23911556557301, 76.33058501177953, 34.97615132253535, 25.762028132074267, 44.110414232734776, 27.992964360373694, 34.49814210291292, 86.98012930532018, 78.65681454241587, 95.6893712372059, 48.121131602251474, 25.513383278451464, 65.65255033250477, 49.40803396839487, 0.05736518907684118, 78.0511241356642, 63.60940599547561, 4.206156424122631, 23.78323282896645, 17.825517289263015, 14.87645765197917, 51.00917266350506, 70.61717303256698, 28.216372265861512, 78.41935595081172, 48.140843788311884, 98.19923130814452, 70.56163484575485, 90.9548031596311, 54.598178282377376, 8.08900389656555, 24.013215445790557, 36.080256525459575, 84.88703292652406, 45.939179149563614, 72.76666683519754, 0.018939150516350534, 12.033113042214138, 0.4444864252542424, 59.61483969210296, 24.539910285119383, 59.77831881582682, 62.294744572294746, 49.695625881998474, 16.65749069912693, 28.58068342315503, 4.407591014431034, 48.579438179790216, 19.19661252315752, 67.12807765132874, 7.664836461334723, 35.034088071379834, 30.004671284892346, 34.785554389627315, 3.6238244876346415, 72.8813751534421, 89.47863220093673, 43.085290954265865, 8.5002989449264, 61.88364555628696, 51.9454559570586, 58.519611809015196, 70.96423859952772, 46.28954046948864, 14.501823422760562, 45.94637303184804, 46.86500189005012, 16.752998107154017, 14.704992088128, 1.5857220098683178, 1.1998001587091967, 3.8399564637211725, 76.88459490753216, 13.997615416783093, 95.52503926692353, 30.027777516137977, 85.09127271188879, 13.187774584486622, 59.120916015277515, 89.92128272781406, 39.238787507179815, 50.43469702132064, 93.5244461231184, 92.70494717581647, 46.727110339001, 44.16169041801148, 62.25252741876709, 3.5077986718789034, 3.976216167479796, 35.33763398946902, 37.06155903205246, 6.231153887180707, 69.55681992129712, 6.000807934797225, 15.737520890758672, 92.34179662725441, 41.24934922504412, 78.37915256168499, 32.20605298340601, 41.434436706407936, 44.698357052519555, 24.544192812230914, 47.98942122896401, 82.74183883671388, 96.23617561291599, 91.19057241801913, 70.16489491918252, 64.62688653778935, 20.906563786295507, 89.61120664896156, 22.586356903923633, 69.1852311047725, 71.12184643327362, 90.17840363632152, 13.709079878544927, 15.900604493957449, 76.62540546291584, 56.85609428398985, 11.837718084567495, 58.40188577041654, 85.3435097442169, 81.21160629269859, 97.9729288461351, 77.46448186385851, 87.41414652670278, 23.637882989813253, 48.29794954272695, 97.35665236155924, 46.92353270392036, 28.09597614237067, 54.55080568341859, 83.55063292209442, 80.97850192695137, 12.381702850334797, 88.33833713898636, 37.19444270368266, 56.26460045865477, 86.99381274600125, 65.64928080767032, 43.792237342515385, 94.59998950477157, 76.08614645699096, 61.45348449156784, 1.243412619078954, 44.28425202921077, 69.00512723675978, 62.35428733003363, 77.99896346262123, 21.1624328725167, 71.91752774850183, 66.32283264063149, 71.48187894897175, 24.223335726137517, 7.774858787027494, 73.9159366101007, 56.3490170763859, 68.52953111612192, 9.430816994185776, 40.26362847654711, 55.512308482823634, 95.38672417505299, 57.383242765987184, 5.5621293540157986, 10.082125475618342, 78.04390249414298, 94.66665788839373, 96.09851249945814, 64.785074439656, 15.078001842351995, 42.95022159728434, 32.325937350372904, 63.29445976982636, 61.47508317403032, 62.36618677694927, 8.444085641619958, 85.8286033615711, 66.78374361194756, 54.88392169536056, 45.62163500022027, 17.469548231470633, 88.6298679481204, 41.585573755424676, 42.166685166596906, 23.523748685940927, 29.943843859125906, 31.887504591292824, 1.6545438309721439, 33.01714475952464, 24.35425392208138, 42.84139997647287, 93.32055797933072, 17.029994543393755, 31.901044985717775, 45.213477784785525, 13.573557822460003, 45.581389099541745, 73.6777574554594, 58.070279287827, 61.388663373665345, 59.54327090773292, 16.667890664642048, 41.32971037017129, 71.444320573034, 44.32722173379291, 97.88820032970862, 15.60306673731775, 40.763312703819345, 38.57719927320008, 45.419208660504125, 14.575039960734449, 11.3184309375992, 29.960003142892276, 56.90582493922219, 7.078369531583406, 85.52463721409275, 32.08561379694007, 68.28810233427997, 36.41214149970392, 11.744396609373208, 7.741468669737728, 63.20747286428703, 15.046574920709277, 15.52958849127939, 19.498025744619007, 43.74208730676651, 72.55878685314634, 90.66608489030277, 2.3545733574256156, 0.7484630590724795, 93.63000988107515, 42.54132210090851, 86.85516389473045, 91.35262643328784, 68.81800599207959, 6.806910857958504, 56.9655736645653, 33.61935737009929, 5.66217956356021, 43.71646354811596, 53.376333949518994, 77.37600909805292, 36.77950373836153, 6.025443038365863, 53.073565574229576, 9.702756649176624, 58.152512660508336, 69.46545365601375, 38.25855422865634, 82.63154626686958, 7.83628010077253, 82.74709131405274, 33.50264833374419, 38.68491379049524, 11.455802390633018, 60.077886651632305, 23.922463077735458, 0.0727753719498514, 34.07643148493463, 63.55952566101355, 91.08428961314544, 19.099342486180248, 26.551015322467954, 16.89633009271082, 74.68374473565538, 11.23777886286007, 10.99102351306862, 84.84225999968325, 53.487250370299336, 78.04773034210933, 81.58092556009781, 19.591152718069928, 40.93619000663238, 6.091204476674417, 72.7870830873604, 25.381280630764447, 14.048464556051265, 66.02129973960601, 61.68577923330153, 79.83534907739161, 60.3005546390618, 17.597919337928737, 99.89351681107894, 79.85360094408688, 6.119087128698442, 98.18791378873388, 55.19542022973907, 57.6609785038275, 26.495679840516427, 74.80102954072862, 56.99365388318094, 16.752560021382866, 42.18849837896936, 64.87209161495264, 21.38924626151355, 3.7945898452604765, 8.024291062876065, 39.90620815693963, 3.7010352232919153, 53.45297873967223, 3.266740898522058, 99.95356583079892, 62.995429983674114, 7.002474580450246, 63.65115161047633, 93.6380382636612, 44.17847063156982, 21.694806776929575, 56.71710328733231, 59.897863950999806, 21.58421001873496, 82.44548134116619, 40.4825190360383, 35.55580535810401, 48.08835524615432, 49.58775727132, 81.19896186201552, 32.41305708955188, 44.464293338148586, 78.20092953919907, 13.829277136827455, 64.98093580069971, 77.18367512010562, 32.11204719823093, 6.365413590382818, 17.087575242817255, 89.52905863787906, 55.32833123584213, 61.53240309848403, 97.2974312824083, 1.2448997812105844, 66.93560026709484, 35.110553956966605, 43.53654085994783, 21.59653584294886, 6.609541421570464, 75.10810668167139, 83.92064069013779, 1.8678327004817197, 85.78305924456261, 27.35443893272538, 23.280973416839203, 76.8773466926644, 1.5550773700755194, 71.60827397541914, 25.53335615567066, 55.25468800883182, 9.626409282730709, 68.14868032066308, 74.40729396626038, 48.54312743337403, 39.53299500828602, 11.933243246484615, 86.43037126347673, 79.23755648583575, 26.31181324003563, 41.21195722011407, 98.13182541412199, 10.89239067212281, 82.25986897872848, 6.310381971627354, 49.89725862044813, 60.48699426521695, 13.832354939991543, 50.10970568304556, 30.95695486038379, 23.868027349022768, 39.47925257804141, 96.12732815723093, 48.604620420164146, 50.633251608191365, 63.14460667220172, 13.576605483661929, 88.391954095941, 57.95299784534279, 94.75383434139493, 68.37432072264534, 89.86396041408699, 30.97367415878114, 47.23633403345664, 94.06799238858969, 22.6755135539214, 38.68645108203812, 98.2562447344007, 38.64273412106579, 64.10139569499445, 72.09772668295264, 12.957353924618943, 22.900370287714157, 89.06688246547645, 77.77456782056356, 32.5228424758482, 78.15919038439839, 59.45304501555311, 43.02968811102479, 0.30807322775011636, 2.6035134014051, 94.03905285026647, 55.470044066429836, 16.058739019824174, 73.96360607894631, 32.722435430967856, 96.5890517397972, 70.88480141760422, 35.61703020317487, 7.883045902685493, 8.570891493981525, 5.194780925505638, 76.09207813278931, 59.69643222642781, 42.73151201214416, 98.15829253400743, 37.29066257004974, 46.26542023069204, 48.30949795229561, 62.43501275742953, 56.62704392515621, 73.55661157689109, 19.939282014676973, 13.318725506169981, 53.300093463718554, 52.38544464407374, 16.516692139224542, 73.47942577015976, 14.204444110834158, 59.653410959754716, 51.99791207504176, 76.83703864622325, 96.31836099604593, 77.81526913954083, 33.66662480537165, 42.893001511827535, 83.95666854749327, 86.62329176869613, 75.62054549644682, 80.49003157092922, 92.34216237697868, 23.111096142751986, 19.347816786176843, 99.49273771772656, 68.4381746413109, 45.012323444971656, 31.463861277390926, 8.619957358160967, 26.162731220537083, 63.91936200183138, 33.88333364769333, 75.73551840369485, 10.352614965608065, 24.37114268772399, 97.54016130256956, 58.26862733640581, 73.56731122355639, 88.69747135797414, 83.55850132943162, 99.80615675681308, 37.65686305192576, 44.03854648290716, 45.17700828007264, 84.03381010061503, 60.802734576414665, 48.53719916974468, 54.55647237213452, 27.424507572448032, 45.63993448105133, 73.74881239145435, 76.7580010563544, 55.504338488574966, 25.662517431638975, 41.06392669744853, 49.35748260829998, 90.0272905079053, 87.80567577581286, 21.20214256277523, 59.261359134078205, 70.69905226968818, 15.919497583890818, 27.183317984859666, 75.40742992007942, 98.45286521923612, 63.30608289469279, 46.638406232580195, 44.517818903036975, 94.96546665428352, 35.011049287281296, 65.85352609569487, 28.579809640073616, 97.8037946989547, 98.58077181338963, 13.166495560974923, 89.70660002848071, 88.91821545940446, 90.75351548598182, 22.872183681638447, 68.62566651977615, 78.40514044120565, 12.780423501655513, 86.85888322057446, 0.7440771080926445, 15.706117433537791, 56.157468098958, 98.36200186295075, 73.54454803661935, 56.25955106661279, 25.457664869190577, 51.031641633891375, 28.110277652724523, 78.81611155010712, 15.803979889961406, 73.36053940397387, 92.70156101762196, 19.584911012367012, 77.18183581234699, 41.19593695774233, 71.75758976964958, 1.9381359586306712, 3.574037587942658, 34.51197160346039, 39.191136971612785, 31.910048049074668, 8.266192884581947, 16.503612550767286, 78.43619949472563, 83.68802974466136, 32.28946420483967, 30.782012112901114, 20.736301378800125, 45.51244628765699, 37.47690414701799, 88.39528438134533, 81.06723742065228, 59.91303171298069, 10.18780980555859, 7.678329744982948, 28.816790848879425, 84.47000820383607, 32.47431887776071, 81.31888745040247, 30.52747741933174, 85.35625465762263, 82.8410563670317, 54.52105647295977, 78.04768143745487, 94.88406961578362, 55.65436739498521, 52.042341073389565, 63.24426582372092, 14.034247533272303, 64.25502931970384, 45.163134744080345, 39.78484080461035, 79.56157239486085, 79.53635309843922, 57.453356703885994, 4.418825373158352, 11.477087414691955, 21.982438982463883, 32.15914800784718, 80.5594668301431, 91.61929639101028, 25.258071907705414, 91.14834702787232, 83.96621655619568, 46.69983755934639, 82.23068300945027, 2.330181797864339, 83.54296838567036, 10.596973922290164, 33.4491267811171, 84.38814111264664, 62.23636850178236, 95.24567928129224, 51.54810545865595, 15.381259251832835, 74.00641602934303, 89.27675555743943, 9.07724153347742, 38.47105995492666, 70.89132480397785, 4.960079518287852, 38.175168876644186, 60.13401863816242, 99.72594489485272, 74.85098959313768, 75.94944457471468, 27.972864723353496, 41.490373153888314, 0.7089426800739318, 3.811151652470013, 72.34167977943004, 7.554823424832257, 35.35798243319183, 84.51672252079749, 39.905944821529616, 29.82657019576518, 68.12002766034325, 79.34136513819614, 71.74766016418194, 98.29879599914818, 0.4495771738263543, 3.5416746083431483, 80.04033136881404, 59.549008282433455, 29.667935305718697, 41.53492679283105, 0.16001865628064715, 63.696605194913026, 23.394210630503707, 0.19768511802424893, 3.0333511046369055, 63.158415941755266, 78.82002018424049, 52.59871855637215, 87.99494983710777, 68.17234971722684, 92.95009979285065, 59.53324785568957, 22.47460768220353, 1.9811981797558054, 66.77680923119772, 57.69876865759187, 25.11859745171716, 36.444600364951384, 9.29057889991639, 74.30758021123634, 6.819757782646663, 23.386379132330624, 61.502887803654716, 40.512315226883025, 68.3876954113488, 38.27870300175551, 12.111489278814268, 39.217108513940794, 75.24465049719028, 17.459184684674135, 16.29612670387308, 53.96675024811862, 57.04179078948317, 56.68519734859162, 65.49659967679443, 59.99632748343671, 52.02637397241724, 91.08243803038792, 59.76008395442178, 14.71426566754863, 63.64024708225021, 95.60668478495306, 79.62854800164936, 68.21896306498232, 10.93266203479053, 40.12098003703587, 68.76675768292203, 14.843169503649477, 69.95508481739085, 12.78729874961021, 45.0322773879349, 8.87499395080562, 81.89554719341375, 67.5557383863227, 55.8682617356559, 40.97789514956697, 80.10121754196796, 45.45327610296561, 40.07024791341966, 79.63402928977052, 41.43996791540854, 30.116082531628308, 99.96155474623485, 25.159657532498038, 99.5883564607536, 20.827279021327083, 91.05411074422469, 95.45877391864677, 90.43917498388632, 72.98247924153964, 49.57483737706203, 74.17424141767562, 20.238915995945604, 86.66578086763802, 89.68500400422403, 30.365112914973135, 10.371841614869037, 25.52970967625584, 64.7634834180481, 89.58337387052522, 97.09973390903728, 27.6845328647951, 80.79710573701806, 29.809881598480093, 68.20889690866527, 41.886429971864956, 84.88830552678687, 54.272986572569636, 6.78975852924607, 81.60718712988385, 29.218682309193277, 12.51746141461153, 75.03791647323733, 0.5533306057148302, 3.753549356837249, 42.41426986972229, 73.5213690779069, 23.05965878136099, 9.859442970102494, 57.23082008035959, 33.84979288368992, 82.69023492074248, 7.641191900620203, 76.90141619149497, 59.416575736023304, 64.59111192650856, 59.92436798116441, 8.895904971719283, 11.67744869382572, 24.96854411605095, 8.83961062973233, 94.3077662256308, 29.9295052780437, 28.287822441461273, 78.07385246672064, 92.216008126574, 64.44423145540568, 26.62067219244405, 40.546420651731495, 95.53823059818599, 42.19728688249372, 44.757046883017026, 69.77040221015976, 64.75192513579545, 30.21835943169152, 1.640569094908928, 13.942376018208268, 49.66116835063893, 18.44206564466009, 99.73293779242887, 75.27104283401829, 66.6908854812409, 29.202025337827976, 57.45706407377051, 10.395038201804185, 43.01069325632433, 85.60759098321938, 85.90430317729519, 97.92399650811531, 68.45334025129752, 79.12157402702377, 69.68288052511154, 60.5726853304435, 20.13205459586549, 94.40155005741038, 57.930973288535625, 88.72018999132206, 48.67588093688426, 61.337553529226994, 70.76338187451769, 57.78669861550378, 63.14680130773102, 65.92209034991558, 4.619454149031821, 12.187603899329968, 39.67121072321809, 46.52100840867996, 22.826837762234163, 27.47517241003382, 53.625084229933165, 58.42840721141695, 0.7597463452053033, 91.32615963149578, 91.86697475474665, 83.47932785056736, 2.7553198164941284, 25.253371148400404, 12.088198215066036, 69.26418678084755, 77.522741156999, 62.432097613980766, 92.99615607405595, 14.061245845048786, 13.673311192567528, 91.35568880224425, 90.9982040428465, 20.4384009093026, 38.37898963178616, 54.83582443632841, 47.74920643626809, 13.773590670547842, 19.96596714308354, 1.0008489275989074, 3.756689736111707, 50.395096048783635, 65.42288146807705, 73.48801230091986, 74.59267831791368, 12.098641469136295, 0.2811952409985108, 11.830551646434762, 54.79015100909539, 32.24009068952213, 87.5294838109737, 49.925684746363075, 19.616453478285788, 45.72374623402871, 24.236933104597103, 95.13064298664574, 20.414282267690897, 89.27001234105363, 1.067959870816193, 70.17195167744282, 6.246105069764218, 45.1479508396571, 53.65388152350692, 54.07744457938733, 58.842992031954324, 12.22623042155705, 34.00192007583362, 25.688295153634666, 84.80297266131328, 84.60130986832101, 42.368882099222105, 22.094387918288515, 59.86480671460407, 98.87083226359938, 38.07633573611901, 94.33769067874937, 14.24590102252009, 23.33878351887896, 48.06531795350391, 24.128381261828714, 64.65442886594657, 22.572897812353567, 39.396475536403194, 92.50160781704098, 36.09003575458729, 22.93992889089269, 50.712826973326116, 64.36617528671587, 42.90124615217458, 54.00137699098517, 36.24432265438606, 61.35848237826564, 3.436882034448119, 59.20715272835931, 17.380695425317594, 15.230223885062555, 9.95754057047229, 16.640490326550673, 83.53509561454005, 87.4773584627613, 19.870766822526132, 69.09214853188645, 30.129646418741395, 98.12657385284602, 57.694533301727624, 40.56078960447049, 30.960997973033955, 99.12277932685227, 83.3366263840697, 49.30297516243719, 9.447213974924317, 73.22780318732485, 74.59549724545754, 46.780772650144165, 69.12151128046293, 89.33677787052316, 11.51441482206076, 40.417310100037426, 23.76681408920932, 9.086668634062466, 3.177327931628948, 26.900976035202582, 6.119220079007137, 72.37816821516871, 13.0068087855723, 32.3475719785627, 83.65297452562818, 68.03927247209405, 78.00578639949343, 73.89205700687377, 57.229683961036045, 52.49107929264565, 60.65391235048042, 96.98443743698496, 45.143188750005535, 82.296960512939, 7.595887062429718, 11.845368831930326, 90.18754292498296, 11.661749761363783, 3.4735496554550216, 24.32869692009071, 48.84373873728074, 67.71376771259774, 24.49429363838682, 28.743509434349946, 51.8788801088944, 25.86251222484284, 44.21184474234459, 66.38812190417632, 19.600164414157696, 16.69122967393337, 34.64164065916881, 30.649849656820905, 41.029242301438586, 17.681529802922448, 79.5105690001857, 65.07507068608017, 30.763471181589818, 73.95731768713065, 22.354275315433057, 34.88664829405226, 99.11768027690935, 28.73331446413838, 4.549152785954325, 97.7671013451811, 66.65550869285798, 54.15754602685111, 0.4827796675693996, 84.16660063881825, 31.654988123698892, 17.325671925334053, 46.370827210888635, 27.071477848417814, 85.65799554605552, 40.14442480942634, 78.26561675894753, 0.23310123020253704, 83.51832734855886, 13.30661157750127, 26.691644931054302, 27.214873650296568, 88.13472676792678, 51.125034469793185, 7.916569473427493, 21.27060776078622, 68.54786455873219, 40.24748976317378, 92.60577936728127, 60.73475518267386, 51.666866022873656, 77.55320357327537, 94.90168593344772, 33.44784661756819, 60.39962526290742, 87.83777846169045, 36.97613318843611, 76.49883456903392, 4.403291446954261, 77.00285102335044, 29.519634609542777, 90.5037951284184, 5.06509078833326, 90.12465535789765, 63.24840644027498, 29.951188171626285, 81.26034597573847, 76.63156026230199, 16.847898521002904, 23.531902357240742, 2.2879728640357477, 59.53672791277832, 5.076048171878056, 40.900932681840764, 71.65578114103022, 57.29194380037963, 44.35129042196425, 75.87640137814677, 50.41018907962872, 73.98237679312916, 54.17283813583934, 46.23666212489383, 84.07529053963202, 33.76657044906825, 28.04499249382809, 10.467026504224364, 28.58289858674604, 31.257027152075565, 0.060818610495128045, 94.24549605031521, 63.664433127081274, 83.67562034866896, 64.01912418925883, 37.15747262444833, 70.56540206096265, 4.289075950609611, 27.01108827494719, 91.05712648212264, 44.57830046944916, 77.16668768917937, 75.57487991504304, 43.854554666954535, 88.9759390197754, 89.3634565450664, 15.581446892033469, 29.51499541113988, 23.040668451177247, 35.03483637026387, 53.69511094308576, 76.73090306961244, 48.98446034111251, 82.21757152385685, 40.381246742174106, 31.33094445521295, 43.792651717046525, 33.96544520672765, 42.61604808644721, 71.72003106345949, 30.874196938265776, 48.942266982879005, 17.90979659153131, 10.710763141483604, 88.00635867472374, 32.70511322377473, 56.718370614910405, 17.306484209023743, 42.04009672437148, 21.964621055717014, 11.17788964608688, 80.4087612519002, 45.544873421910005, 90.38399661521609, 86.8719056963016, 14.535398266471732, 97.50767158205504, 68.59265544752525, 76.57904048656263, 25.54175373234575, 5.397952830737829, 98.98493834338305, 75.93677231841568, 11.545150246016156, 92.03165223521995, 62.2973519443638, 90.5820006864398, 92.03479679083972, 75.02472137073812, 93.91660204488585, 34.69356255870786, 22.616407244695345, 99.21027435510489, 39.99962930338642, 79.0914889013456, 71.13764311054672, 77.44077969251761, 27.840356088006025, 91.14425798626763, 46.17935613097326, 98.96885771460772, 95.65646507121166, 41.88271670724845, 29.698450124155706, 16.552206405538083, 64.03400751243774, 82.18224913979887, 38.66269766333594, 94.93865955674914, 51.485891920890445, 66.56291358570317, 94.90679431973545, 34.3162838124938, 10.58715995911016, 83.43361792619326, 86.31408577608151, 65.16570788619443, 58.965796918589106, 79.4504156372883, 72.96555799155153, 68.3923777931441, 41.02811426265271, 21.253646217935607, 88.48587312391506, 57.111205184584904, 74.68277668959156, 6.779670979707353, 43.48578507603025, 81.30425141175635, 91.8935809807351, 9.016748914344763, 49.67602417107295, 83.52866878771015, 90.4808151731252, 7.0341166798536525, 55.995766073810884, 33.929737120939876, 73.35436501504866, 33.005764712983435, 34.17093423596366, 90.75579649279516, 65.1227303563721, 82.45097655283728, 13.504030343066642, 5.4754813137757985, 71.92038943146667, 96.8386244532701, 81.63269353773455, 55.92064375398016, 43.74408315999829, 15.67127181482414, 94.1376032697244, 90.67348313318355, 57.363945348614344, 96.6495544690976, 95.27525078766959, 63.44171339948549, 49.53901845698954, 99.705146776801, 1.4933715547568505, 33.53014184338333, 59.728333965150156, 41.68536102326462, 60.20583005113301, 50.68063140646573, 7.096322800040522, 13.214535798578664, 39.45075254413499, 30.038653481346444, 32.05289835275613, 89.55231573901389, 33.05716282979665, 47.89843102240533, 74.61405017515243, 89.95265628954377, 65.39173495398917, 72.88694171018115, 43.9697222842554, 31.078058983316204, 90.40724592109977, 5.794209214577595, 32.06567254155992, 99.29364660980242, 77.8249145803374, 3.007327110389424, 53.65351664407224, 17.75178666457703, 58.11835088810439, 55.762291091896735, 7.881466217176336, 22.30280601131236, 13.620974194738833, 30.098620333885506, 53.49028873727752, 53.67486408189555, 94.48638751062317, 39.10094692511742, 98.20023719817299, 68.40745460272412, 72.5867684461766, 19.343141507705518, 18.98361726528662, 14.651204504881743, 6.370621589815451, 83.2831008951287, 77.36334869209543, 42.175189234719966, 80.30142807212474, 67.09025361619399, 31.736894326983723, 12.895295134816864, 27.1939196612456, 8.22621927563506, 60.191103861701166, 19.715324690817717, 3.2573010516258605, 75.8941103172249, 9.203118432333168, 77.93291512661723, 93.58470259147983, 99.7688854402324, 35.95404975236244, 61.76738006109779, 32.901213395648945, 22.160996127521425, 61.7051858777566, 5.008981699975934, 45.662284338733826, 96.9143262665095, 45.51632734129822, 12.260459375306132, 47.25384210055752, 8.589333596496896, 20.305046168517737, 69.72351890917213, 89.8011846685534, 77.66978463969953, 72.80504451079531, 28.863392792579578, 18.268079556776684, 99.89492595150128, 14.314707200533562, 35.693022571047194, 9.620836899630492, 40.1090410813694, 77.01822830607675, 42.53976260404677, 42.476551230815275, 59.661545547799136, 12.027230755655982, 64.36896814185509, 33.692602427625054, 20.91867250355054, 96.19717279297834, 3.7482467390844376, 29.768928493140823], "x": [67.46127481170626, 67.12372306007487, 39.2558178587578, 17.718823233956282, 47.571446264599736, 70.03239941775796, 13.072418284287213, 63.27269073482738, 76.52823086399279, 75.9047096513044, 39.49644192937496, 38.33856748932504, 89.57180004354896, 32.53233070440735, 15.112671875261096, 73.1758156916364, 10.630314929374606, 32.457759394750596, 9.778738168560587, 72.81324442138359, 60.50372005355005, 15.11597501622809, 45.410049673940776, 24.840477144278395, 5.520118329779711, 47.70003729763498, 61.7960861262651, 31.67585352797572, 51.05943734716537, 59.541168710159845, 77.66355714613499, 28.517363299937372, 22.514701874021902, 32.1863921115305, 33.45707740473621, 52.454686992838276, 35.49429936136932, 29.59373872918041, 26.709777531676526, 13.410436457933727, 80.96061014168338, 15.61305377299954, 10.16396942749671, 73.25339852728241, 92.1171767217137, 39.2592103667225, 89.45658625878676, 51.94861039963735, 38.135332293029954, 64.14064983143227, 92.59990500276183, 3.6090193062649045, 92.7862186533929, 36.96101547457944, 28.286083149262765, 7.722804673032979, 21.87896618459608, 62.20655101913444, 1.0094895574583318, 23.55554853393639, 91.09779553411077, 87.12820809361834, 82.66673029375188, 17.905389643124558, 35.664133100459104, 38.09756300940187, 82.54813213716986, 14.451058210581058, 43.38921546753919, 58.39767100391546, 82.08197498378848, 13.441846440506843, 90.78427519647411, 51.20180594060516, 87.06535390090352, 59.3790386478832, 46.11146176675904, 19.690387274558407, 52.73875486197808, 39.32568932500112, 95.41580259166908, 95.80489764498738, 94.86536269406913, 87.58301613381767, 70.28413693826346, 21.64190786290858, 93.56188951180602, 87.91006493500163, 12.08764643724477, 4.252165580490952, 97.56488666072985, 28.844578426518364, 58.339491715960904, 99.98756400848873, 69.86689545686839, 98.43943897933497, 95.58221741207564, 12.998252569740076, 52.239872456758654, 0.4075309259009341, 63.02760580309188, 12.560545068203133, 38.660214331584086, 79.49002895297855, 15.24629781205994, 10.403233226868359, 81.15385721665614, 70.56952107729172, 72.20861350813124, 31.20525351263723, 33.28693086208304, 89.53920555254366, 74.87264610269439, 94.14161784780923, 22.318228290348962, 56.93454966541255, 90.51719590410372, 8.762643478328314, 80.5059480953482, 50.42869691427636, 43.94470466956175, 12.044291925759465, 29.354015263720235, 24.614528189047626, 53.25644297261364, 34.16315698697895, 37.417063500119326, 3.1134291584605567, 84.01022557228741, 48.880790469795464, 54.368764838616315, 76.21361537525132, 41.55977743659337, 5.4089074920892095, 62.53537873669098, 59.136999500069464, 35.62797312865198, 34.22454617414207, 31.391263214917974, 29.121024224934477, 26.975422991802823, 98.4900505532433, 13.230181332707913, 49.092033460780016, 93.08771944310506, 75.04849293058277, 84.40051577645805, 64.93415314210912, 74.22262757924784, 13.922121621688655, 83.8772734297452, 85.62993929382716, 28.2430396855601, 20.86022407347943, 13.784714786466978, 68.50416387459542, 84.32766715487591, 48.38276383909501, 19.32872148659396, 72.92422468573167, 53.53797173954793, 28.837170663375964, 50.327126895526476, 96.17007295441984, 9.523813230668432, 36.82464345573614, 0.8673383130349155, 48.14979020972766, 26.518488620984005, 34.015386867943285, 59.18101581240376, 42.943774518941346, 35.90591677030649, 60.70852071899324, 15.670903359999233, 27.476553762812006, 12.286074105713363, 95.05854692080943, 96.65366965698658, 22.607764830376787, 24.917780643595975, 63.04432601690839, 65.0253534639736, 11.602193002658279, 30.770645277700137, 38.74816378964145, 69.90049252767675, 98.95166950800925, 94.774276874416, 25.401126147001406, 3.807566280238195, 70.87255912612846, 84.42378266210213, 61.31964809645254, 40.03603407002865, 82.64777551004833, 79.98853226554658, 62.45487427433692, 11.268904938771463, 12.101525709062866, 45.588911283667755, 39.59292019852848, 3.9118183620997615, 94.82868179262086, 48.70978220583196, 53.50559360493742, 83.57038427896029, 46.70177439181135, 29.081413112033637, 38.61349119748111, 37.32338811429352, 88.98469655176446, 18.88368770483366, 72.08569718778608, 70.36860402063225, 16.50005463869456, 23.662567146867197, 47.5449175582303, 89.27851748911881, 40.01870605518828, 25.50203537560638, 62.15657175360418, 19.932686850516635, 80.92242874719655, 2.78014141246381, 18.723699306773867, 16.34719204077022, 1.482594723916053, 60.499265774124964, 96.5210861027502, 94.02945088295334, 32.60408812950276, 13.098700400591412, 68.12202554619716, 56.254930760313634, 51.154119478571644, 72.26263333881839, 3.6252173937553533, 12.028015400061653, 47.768538076156844, 33.27570477293681, 76.44621829126818, 46.926056160920574, 84.60468729698744, 24.352999841506584, 12.87886884574867, 34.14074300078707, 15.396788124172767, 68.35087129730123, 39.719575679609264, 32.84219916885308, 49.58533979480251, 35.86233510822463, 76.58695834898785, 88.18209863245076, 70.89592238978626, 71.44880184546736, 16.688119391928613, 97.62888141541279, 26.98273266195198, 40.894740584044875, 60.90929497464077, 13.445314392703523, 63.79986003736279, 34.78890254486523, 89.8348404369056, 39.102584440779545, 46.83498309558046, 92.24455485865228, 93.74291819712681, 98.70852697809227, 15.881400054693117, 84.33751507181567, 71.85827737622816, 88.82869813837738, 53.16172274249645, 50.964595360072536, 51.837682397661226, 30.976165212316676, 47.37612999126228, 34.76511052194582, 70.85550714487377, 3.149194905321806, 66.09220269853037, 37.29491799617721, 30.404080150751845, 93.99322361901274, 26.34681760091184, 57.176720400533, 20.49294571343171, 50.7134441251061, 91.73718595425862, 69.92501427157882, 20.451444924938777, 9.99464443238609, 24.89901500328655, 29.37152686928509, 35.32316474894495, 99.1621259836931, 41.83119433536502, 93.66970356694382, 49.900428946258224, 41.33469047709336, 1.1556991133028882, 34.555979184601945, 72.48012303955583, 69.03154188864549, 70.0451746549157, 90.60765454707305, 25.135340587818177, 59.0890305738806, 59.08163970733986, 80.3980784446163, 75.6891681380727, 26.65191602348569, 18.3509029634621, 58.68358375415836, 42.24371874556256, 45.829211985129305, 74.4634500709638, 44.8899901522559, 41.84456381550503, 24.514464521237876, 29.388804373056487, 22.80048134492294, 74.17783185242504, 74.29408037281007, 35.042138176524276, 41.97512598976072, 10.59422606671373, 60.28777201452257, 15.397934848500128, 7.754053279139928, 44.420067766309955, 75.56610084456142, 24.854662225009484, 63.220542371616574, 9.967467832632915, 76.45206975180699, 93.54830969234298, 75.44495852879453, 32.09570086387106, 11.493808290732277, 21.392420927809763, 98.24055666229776, 28.736843925650046, 85.0907328017616, 77.78103139972316, 31.511197806256376, 80.57831138061684, 59.62715191661998, 49.336346997254374, 68.17946580314963, 18.186660924681842, 0.29741823427162917, 5.464605902327446, 98.95398019580503, 51.63589821377936, 20.933022948630164, 37.59731397929272, 75.2313202156634, 57.56379427973347, 33.77973267656951, 19.201787137305793, 86.16619791029788, 36.32866872884713, 32.137329873238805, 50.14042859651438, 6.786356815287342, 96.69768150105564, 42.437112315600054, 49.75896523294825, 6.184599157134818, 71.42256837672028, 82.56647152921074, 75.50566288838397, 41.541914337633244, 8.614516404987693, 74.93558067837523, 39.61667539660931, 43.47053002420943, 20.733649040632518, 78.10948973438417, 86.32617279132647, 82.50111904876076, 96.12964527739891, 19.971000184750576, 41.76598220444491, 8.184329347374286, 67.96986441220542, 79.19350578630812, 71.6126230225723, 95.72105004600319, 64.85459221990826, 36.09819679136868, 45.25061424674246, 38.24250093695828, 58.08805532859106, 68.25656174619797, 72.42577700535823, 80.55430563795511, 96.85241933407067, 60.88148237733867, 65.80872235646669, 13.787922887446967, 49.97411592952776, 25.27593476149389, 78.51722408785979, 66.4421664013359, 54.48065861213964, 47.08510478201108, 19.120396963792064, 88.23407426185484, 25.452263657529283, 51.30843550055664, 61.02683926617875, 18.4573462888186, 19.34622955567611, 71.40347755915786, 71.92133134446304, 49.100519108560306, 84.13661832749226, 19.127672875694458, 64.89947498188023, 93.02320781691911, 18.383871716115006, 49.79585046781989, 1.6007913118536665, 88.4916083833461, 69.69832333386994, 41.20955811839836, 49.488251025009625, 3.9442754258823043, 9.025420984646937, 79.74638790289657, 85.2124384646658, 73.97743831101187, 78.43894065753635, 81.32666155813165, 71.55414476054523, 72.34390169317382, 62.115330905725244, 32.484893239844915, 66.32425330629921, 33.328317509496365, 47.26832375234251, 65.99662332444888, 53.356672074022235, 46.988078240586496, 8.019023298501171, 20.894259866516084, 9.418893095194914, 5.23323234313573, 4.524835912060587, 46.22575199062135, 51.00617064813912, 17.278627085229292, 76.05730914043197, 76.0224031041, 90.6104414969496, 30.477595137805835, 88.89815399364991, 57.60619168168425, 32.04997724079146, 1.2060306148552802, 42.178275420784026, 6.78526910811883, 71.05032860506468, 20.604206873619248, 94.43217238142215, 52.856950220452994, 86.47254919690634, 76.15964140702108, 99.8947915820214, 75.48639007760119, 65.59575654411105, 28.8209014369341, 71.83803415438675, 73.11206905323789, 42.79597536321764, 17.864336542750248, 39.48987282768018, 1.4983901352578322, 8.506500533728145, 66.00263912530922, 93.94637236991379, 58.983947832787685, 42.29091741787177, 1.2123095213701252, 34.82636935393592, 53.56961754154289, 5.6044552233042495, 67.30864492647459, 29.095574786549584, 12.595604945449567, 83.87292650709148, 7.019669338353307, 65.0036562507721, 21.500371066235502, 73.56941968626202, 30.184685524580836, 98.78351781912608, 93.11409540362607, 42.63428242512271, 61.09291137913597, 89.98768674569317, 9.155628928627735, 54.66391272987603, 82.52910200555394, 34.83942357336504, 49.282679123520836, 34.3964111152966, 58.2617607173802, 61.80900626771064, 90.93939661600608, 13.309027669432705, 91.40983729834699, 64.47554364780778, 30.835140362433233, 99.83263674765533, 32.33922465764204, 13.92384281028175, 59.764989326812646, 65.88654121970717, 38.40032985650442, 40.54816787684029, 78.46660416304852, 4.569639470367548, 23.264972956581907, 50.79585016379492, 71.4982701058341, 80.02332038630804, 10.23766336020968, 91.9139250943397, 39.736719426955645, 21.520627210575928, 59.35943864544632, 26.212646050789402, 37.55230953225656, 60.198973956945856, 74.93312438376597, 45.64259303515815, 87.6425735438617, 83.29478833234742, 48.73677401481567, 2.868599345683631, 78.10019920093151, 10.160259755521983, 14.841765733695366, 45.14283398176621, 94.1964054947416, 34.28889479307209, 36.97277079761698, 21.016964956099805, 69.12768883751356, 37.15995598481958, 46.389116939350316, 76.27573698355886, 13.02155598327267, 16.08236180010676, 12.496880288045242, 66.48331919701788, 66.65125846681859, 83.15487153839439, 30.04084508607926, 2.813796238145161, 63.24107147353048, 33.95231251524811, 40.74763603968713, 72.73833121375381, 16.450146403572507, 29.26243505358437, 75.84727858918538, 91.21472056782032, 28.893178420335662, 86.64167146464249, 14.046528542899795, 60.96714518520917, 57.384372972062344, 71.18394202494555, 13.380840374349656, 20.157687920920065, 20.661211006552584, 40.015030425523825, 35.22202256096387, 92.31344235003684, 12.661217291276506, 61.89629397974937, 20.751247670146654, 2.5467226104400553, 2.528665979904887, 7.3164064498751795, 41.18326583578824, 63.31847170542776, 65.60003500831577, 61.79117869116385, 47.21860416398861, 28.223207428435792, 60.32960723140387, 64.23150823347508, 30.973289025282213, 72.70327038060336, 46.79720381667717, 81.0146779357103, 79.67273295480801, 15.259346771304305, 3.149881073589922, 7.347709746055431, 94.75822622049466, 13.715247998769497, 49.555565170825574, 93.03266420931295, 35.8459045190267, 70.95563908428937, 27.49955345710401, 28.012680082027586, 35.27449264495838, 5.757404624958751, 96.51527919558161, 65.1980706007123, 32.13790246857208, 24.606781988284087, 1.9903727594633103, 70.83724163219553, 71.4585607779611, 67.74171077454248, 90.58186104989854, 66.35903289132486, 70.02856591511083, 77.0795208173817, 73.73082642589324, 50.29772306243863, 92.69425711633143, 14.671113274397129, 42.952771716268714, 24.906268333474102, 91.98558865247148, 26.47730530933203, 72.94789565020737, 80.65702145559077, 31.311103983905152, 93.82686465018291, 90.74396888883658, 43.72380298143492, 79.15131311152096, 34.07127573405614, 68.61583186713041, 32.44589682418686, 3.6168459173876566, 44.512414959329185, 4.051558873103501, 5.725629043910696, 45.947954471154816, 16.48753503207281, 68.60792828752909, 90.31810260897846, 25.018653968644422, 2.5490827792096993, 74.93178222059204, 56.756428005684825, 70.65417437467653, 25.377386019593196, 13.336612182154163, 14.587313017556458, 99.49183858427543, 6.153606885938068, 40.73110766486564, 40.56336729184805, 99.89753398153134, 45.14747224580407, 95.98737206426703, 96.494524419991, 55.364090475586224, 78.11175238145378, 2.123987626578794, 97.1510122881767, 71.39135794693175, 33.09696202958096, 58.45209128924371, 63.578292732782096, 53.40949794655844, 61.33746224328753, 60.52610609538307, 72.57080005781049, 30.720182178781762, 65.77270734067636, 63.0557475418872, 38.06596693101573, 60.57275467418414, 56.82091859517635, 41.504570672215756, 44.92430690269591, 35.279440217459154, 42.19100733200185, 35.35606685330479, 85.4371594013368, 28.585842909169877, 31.341004604969246, 58.69874680714662, 57.87620636421932, 24.623422032388408, 73.35389653046677, 61.525854625852396, 65.95012543349222, 53.966822181432185, 33.70155792175602, 55.60217472671665, 0.18093301703246967, 74.30760203047036, 64.56980281176519, 83.92877578302532, 16.69370065042791, 51.22467577627344, 21.486036726704118, 35.89438108676504, 93.48075568470358, 78.51039764395205, 89.41993863585324, 81.61738835192378, 57.63480774976229, 28.176352971626272, 32.060683746438755, 53.81805014785688, 37.90971616815902, 77.72977200184647, 88.17791426946674, 87.39864340137188, 17.749603532314538, 48.21139234839873, 79.43338565255308, 44.77849272557847, 32.25063001660289, 29.995083064868854, 2.235577834529623, 23.982906492827183, 14.930368337641253, 38.51086823445756, 47.883488215244576, 81.16380214626146, 20.109748520136307, 36.71136114044757, 21.674713908752352, 2.1970016268498704, 90.74955711014195, 42.27231583666013, 88.72968508836203, 26.689363171107118, 75.09940748722072, 17.614308091735133, 97.05462210865589, 64.97558332586242, 58.94514311836916, 27.282762556975104, 45.08231550712897, 88.381128187211, 65.84921626358718, 87.6982493941479, 26.700807558202932, 85.10551531161434, 64.85591487240009, 95.44405010348859, 29.114789224453897, 2.821673591255003, 41.42542028555064, 51.66475688126204, 97.03600210712665, 93.66195946143381, 89.04361409206999, 58.54153473598153, 79.79740770264077, 30.17577874060885, 42.56837256537624, 66.35372114604337, 63.76966866939732, 77.18285745772747, 13.946728841445166, 26.57767481501957, 88.90377015968691, 73.98924155949025, 46.17883239503183, 94.3703404320976, 36.70155377568025, 58.51536639983167, 66.62908238341794, 0.6448674222880313, 66.32910085240987, 15.198378900767317, 16.14775722619153, 94.04493614517109, 91.47848395717803, 29.612157686162565, 8.63650039909195, 10.316220735929027, 94.44481738114204, 46.61840593148997, 87.20421186673867, 91.73908902990675, 69.96878913663195, 0.6755377416348018, 8.987063810883066, 86.75822059314801, 88.6114281000614, 46.15212427709859, 8.40226632738359, 99.22793973382906, 67.6928600299822, 18.575443028415318, 59.74275781892982, 35.92399101150132, 28.572052149602246, 26.029158493654293, 32.080901691878985, 55.49831875732697, 66.28691634453146, 68.22526549298657, 93.61892924039749, 5.41591548659881, 43.396756358816745, 52.03290731467365, 64.33522906509272, 41.756547690305766, 2.4605219420557822, 14.241603426823623, 26.140526168485913, 77.89401161001491, 12.10494764296467, 43.840188010583944, 10.980066394280207, 32.770121805469834, 27.31425739234732, 47.00263766585087, 74.74247209679231, 82.8786053081074, 36.57113986966905, 46.87028079581212, 58.159473383056316, 80.10765144444531, 62.82080627729226, 79.82137079956094, 9.701576381589849, 12.838925614254348, 91.17821953707784, 44.161987505294256, 76.89559317791961, 40.57939527780415, 55.66254954582735, 25.1080456706129, 23.814933264730886, 43.675613158535256, 94.65109724649612, 95.94667911940536, 66.48581717626172, 99.74513005158225, 7.698947872849738, 13.160701593038182, 14.244966771560353, 69.3013202318333, 80.04340062262325, 0.7871763075007476, 53.00043468090956, 32.37910114967587, 60.691138657910024, 48.771252498891386, 40.80005386062182, 21.83892798377981, 27.77028702515092, 41.63474452685699, 83.77738981560987, 24.29845792954367, 94.9652090126874, 21.50820866526709, 58.843652381740185, 55.744151717324286, 87.4116487537772, 21.33478368766838, 55.63931351639268, 0.9749911885699181, 19.089721275674933, 36.21794950357388, 19.47594416200613, 28.538130477939795, 17.524415942800896, 17.062372504369815, 91.47634778415588, 13.741918331749957, 65.68930005252042, 41.91809154348374, 5.436512144619343, 61.56915375559342, 24.14016805855995, 7.277098263960136, 33.251365990727535, 58.36278765232543, 29.762522763941522, 66.98034581117804, 39.706029332719254, 51.034498714949514, 6.2372027375528605, 1.4760015310900987, 43.95119463843542, 73.54289927679652, 57.38126962299841, 21.86368872246861, 65.66800259271308, 37.514679213542024, 94.7500108463855, 80.34386256773519, 79.62158530409573, 8.140608642237213, 29.64910957973812, 76.7448587866345, 69.379795561374, 52.46399870636176, 17.12284463640763, 12.234572894597552, 7.7497438245852095, 9.288467360142427, 19.36174957750385, 97.8627071723533, 73.26964282258467, 24.122733876515834, 77.07247600786778, 15.746939160432227, 70.13806654350168, 40.29515287187825, 57.36589181035997, 63.28971844692644, 84.88638394003296, 9.812038626248142, 39.35937828883971, 94.85281611054297, 47.55431049887765, 2.8844136265680276, 17.182859596872156, 45.633934562130804, 72.15926054971143, 54.92745659972663, 65.52541298225566, 4.658443914621624, 83.20452828037814, 6.571847642015561, 45.47591304675126, 43.69430211555376, 34.37063585384637, 88.66784507164535, 36.46546822554455, 52.25838580008341, 6.850482279648995, 87.8920006522513, 1.079710388784827, 42.1785193537154, 28.693991964859155, 29.849935848979225, 27.499648824328883, 48.837481816375494, 26.254508318746893, 59.011807083768595, 76.80902410440314, 22.75463532396449, 92.60474744423594, 66.52447493674487, 79.3017463560163, 52.998441683875505, 12.638595850641455, 79.8730832947287, 17.988657788452432, 40.532139990590196, 70.98602933196251, 86.15175557422253, 32.41005166645884, 33.22670266286656, 92.18743252293797, 52.10589264169154, 66.32357666980033, 67.2579411766765, 95.53427922360746, 88.02655660894123, 16.757949380051485, 59.00474966043077, 84.15438304241437, 49.554048100271395, 36.30357022081324, 5.820364080550777, 90.05068862047574, 49.0313315238549, 47.60285927435817, 37.02330817684629, 37.68232611044898, 60.9986743149598, 5.198837385611055, 35.32235442047125, 90.06230277685496, 19.10910379197516, 76.24270403525846, 73.57342803429013, 58.980964685710134, 41.54987832869262, 98.32528862444812, 31.793375900370535, 71.41456144963165, 71.05862673078963, 52.75864836033206, 79.76242332891495, 69.90927853529472, 15.818122134078582, 22.089022764968934, 51.65564649794171, 40.83646325103661, 95.70185560623398, 44.94797122889164, 37.13043408161906, 33.84661710107034, 47.29795133357322, 32.04298586942021, 58.980557697736, 97.23803115611305, 33.40893924879027, 97.90792190154053, 17.962765265549898, 34.75748392301396, 6.251686140249591, 31.740029032869856, 89.87317183232071, 98.0906361506089, 68.96589711701051, 96.48180572068351, 78.12064584475323, 69.08002665425732, 33.99943244714404, 13.135524072192538, 11.411443665737087, 30.400607833415492, 94.3834978561963, 44.54827399121246, 87.40728453143996, 83.2299718925079, 32.07544818235482, 31.795365105640972, 86.90047323313375, 97.46806160817175, 57.41333351221878, 32.88054858390513, 41.00863582789053, 99.27640770804668, 99.59182002304934, 30.938865442446616, 95.36209859837713, 83.2035478008703, 6.393171872015313, 78.03668676683728, 68.77377353842348, 78.47319982048373, 78.57737531161905, 9.082914218834926, 18.318975112669577, 28.403140193590882, 29.425540591933174, 7.572246158842577, 22.495850036726484, 98.06173898421603, 92.12006122538648, 2.4694528342706246, 24.37803934861449, 66.31508343228582, 24.855283364490997, 73.4644485203033, 50.37722427232373, 42.92492303594874, 68.69569280214618, 53.91312354932158, 49.82156071219828, 35.85895860492167, 98.62598363919678, 63.358915356312906, 33.946064544178746, 54.901780392362994, 14.752058082754782, 68.58972380650354, 85.93162964794554, 88.22829613907484, 38.99948263934103, 47.32119030323386, 83.30220444364221, 82.24181518021558, 0.4945636813600385, 11.958045566189735, 63.74069373779297, 36.550463516916665, 25.82477125874706, 71.4964003030071, 4.691423846759102, 63.745498598344184, 54.051582208403616, 56.42031941841908, 58.29410853776056, 45.676835712709284, 68.54743319079317, 34.790764339988826, 34.10917431479732, 92.27254646436931, 75.93787105630663, 10.133145211571183, 19.48589869102334, 77.2070138343763, 66.84040482192472, 72.93136149149856, 20.400550359032486, 20.277224971804497, 40.64673374694513, 96.94779767947183, 79.37638255065951, 81.74098214203242, 89.30250463573705, 54.75365530568443, 66.70876282123587, 76.44640482513019, 13.508278539982266, 41.66511370052375, 74.47632876798741, 89.2298917121007, 1.540122187939541, 0.8290426036180243, 81.66889346352319, 50.54865787624468, 5.436138224615695, 13.962578717185359, 21.805945156196817, 19.030910720700955, 55.784467134718376, 40.17716065818715, 10.232909961096514, 3.605818261141791, 4.774701312294283, 73.82245753700593, 46.913367872886134, 31.781799691230116, 53.241599201406565, 31.360243567423296, 78.80308361868198, 34.123876189312085, 42.19361666440473, 41.78053957223442, 28.270909434970726, 24.2640252104529, 79.44042569375685, 97.46197724793774, 16.46288888138139, 37.00142951036528, 57.026423033466386, 83.81749147298592, 12.621244988615278, 46.675326058310716, 57.44916033547581, 73.69318444732161, 19.07201398341176, 73.65770010893364, 57.45931931342927, 95.16907037071415, 39.626431213843574, 22.9925908965815, 74.83248003107306, 80.01841158504602, 88.92934907754027, 87.27204542552667, 67.01833474579216, 39.16417295550326, 50.35459133424728, 86.85576882428416, 1.290472121781261, 51.9232431770172, 1.8445826356737194, 39.25985636682814, 51.36642652768465, 28.38598668540502, 92.82124661793104, 90.38886956615464, 33.4784102272546, 31.822785221235694, 49.2106565142279, 86.76207212461556, 2.952870461121826, 35.03425149232006, 58.41635896117442, 81.38635105159759, 19.52988807541289, 62.94961358323532, 20.95343497462562, 93.46141498611632, 47.624377129631014, 34.21151586328739, 82.65613587224475, 5.913782486991304, 84.08483524289217, 0.1735771666075303, 33.08381122247529, 28.102296640596936, 4.2328959277663, 79.24287374331134, 44.28764589428875, 18.61775306955249, 48.16165698456945, 61.48981669090156, 26.811115373833704, 55.254152512176425, 89.80401625614165, 49.82047209231683, 76.39226704295498, 19.799380063742177, 68.49739941090633, 0.8912989535479587, 49.458295349216286, 68.5049238155935, 50.259239022257006, 66.65302293352372, 72.72789431394551, 16.500539440692062, 73.75634401971989, 25.263081819187803, 89.22871193795375, 47.33318751469609, 40.01011656836091, 24.55534497531282, 0.5097009744776226, 63.138048359723456, 11.58393292794334, 21.03060619554188, 72.14090000514257, 84.50542753156107, 3.524958978033599, 69.58429168095985, 84.17189401506562, 25.469943521757955, 3.169646841620355, 84.09001706490648, 18.257051787765732, 83.08647773120506, 44.58702940049238, 58.15110830522423, 68.35491661954184, 7.333262787852856, 37.65965027212875, 97.09544439269989, 62.7002274335868, 50.59915526910164, 10.183123388843507, 70.62894177386569, 66.46422324479381, 28.678288873322387, 19.724622173858663, 8.448793904918805, 66.33292126176319, 92.15977291061733, 58.03591377477183, 64.55404704038992, 94.26887415570368, 46.1407306623031, 9.524566385324684, 57.70841497792843, 67.44310986104306, 95.91192705241028, 0.7064213716595491, 58.50977934155096, 13.324575361918335, 87.36353299233134, 46.36976091316133, 62.83290493636159, 85.74034926854426, 12.227976026368403, 16.388190319609375, 58.19900844467825, 58.66718993718185, 8.158596814075292, 36.099551009074936, 86.46739745437733, 82.81648490411058, 32.82588250319268, 20.102551219100416, 86.23110068432194, 83.45466689534045, 24.565213654385154, 64.23040411830378, 31.50033044505379, 14.915747577952388, 94.612508868185, 68.5954990024578, 13.75042475089896, 53.88887168505797, 27.919843809915655, 34.323195912993484, 22.94667229899323, 12.055663633722647, 93.65234274856108, 84.58798707904492, 32.38771251277255, 93.75804999176155, 61.798756379080245, 59.30677757094005, 16.407379367095288, 3.8397863568055746, 5.91850260599508, 49.073115689475024, 93.48192826986573, 84.98740732087863, 13.736965335074158, 17.02398583391862, 92.9107158823524, 47.82959442128188, 27.43775438528949, 85.72789955086239, 52.86355963585889, 76.888840142835, 38.147657991007335, 94.14887928409195, 53.47226611999052, 52.66790029747609, 48.114989006293186, 48.93396543773289, 33.58566098657519, 86.59652730886452, 6.308391065828689, 34.339677861291484, 34.159838187967125, 92.01787939897062, 93.3200131493113, 62.62941139203269, 22.138442983937367, 29.171839913221277, 40.24771834076947, 36.47421532837245, 4.784946644224108, 65.59108983766419, 92.94246252049679, 0.5796446663398624, 43.78856122441254, 99.03848908273433, 9.92788337017556, 23.18582402953534, 12.709862734211741, 44.27122843394571, 68.5592621453656, 76.33363512312485, 91.2795441414547, 43.42677223947341, 65.0639599522167, 94.5179798620934, 5.394962197048825, 35.51168377008891, 52.77567120842842, 22.159742114555804, 53.18661421183929, 2.039957247913715, 69.7275544838384, 76.946101311649, 3.8383042791758637, 30.623618349984483, 65.1616389317004, 1.251329804404433, 90.64716052944361, 68.98929312794704, 71.66414787826594, 45.26186724726069, 88.09873166443073, 59.99169154828478, 95.75101893910562, 59.49129259777006, 24.01884451655707, 22.400697762556533, 55.222702684772315, 72.41367440345032, 46.969326763236175, 24.842726953246384, 43.42392943415499, 37.38770566926729, 91.39364672812009, 2.453320730614361, 54.50676204506528, 99.5497033014818, 5.731543272098971, 6.102874030210669, 11.120563121411864, 2.481176787981876, 55.38407455676651, 69.33270420029068, 69.0537982435621, 48.515409955091, 35.169656291601235, 60.99356664439255, 98.22643011763076, 21.706093970087792, 66.30964748687758, 6.748968036875736, 94.59419564529985, 62.71597547932768, 82.42430687855597, 64.00865157197643, 69.85531823885141, 53.116483246877834, 4.074018324189255, 50.27532881459851, 79.6458281863094, 25.897554695534573, 60.95763668910141, 41.94448146279351, 17.617931190756252, 83.57033775694018, 70.55964780992362, 87.25885422802722, 56.498940987323024, 98.49112449041004, 20.506426507373256, 86.90825312934219, 79.37649359101843, 24.28559435298594, 89.71753771767382, 44.075972480214375, 9.718177471981315, 47.54274986422264, 47.701707543347695, 19.31370094630227, 18.170432783500935, 50.549048047333, 95.06765998543109, 27.27695270536905, 67.41384662684652, 34.27273386691766, 67.40514962111526, 74.61669171825183, 10.18406490913656, 11.811499918752554, 70.30477513073149, 96.68902204441247, 35.98416667117837, 31.95863711396375, 54.299154192068364, 85.4490543129788, 49.848665700721206, 97.92075334126778, 77.51589693520057, 85.90298240618861, 81.26867351087678, 57.488148531124786, 34.68253415333241, 43.21961419224394, 59.59403157414073, 68.91168561804942, 12.41732730245787, 33.47829011706332, 50.50850474866677, 81.24687852363171, 18.266681440431032, 18.286763465794454, 90.11935395395824, 27.173945195315554, 73.56059962339239, 27.382794812114685, 47.95120709189202, 30.36039665003145, 27.362738736860713, 7.706362940393241, 42.996685461442276, 72.80571139125827, 4.620518032282717, 40.83082013804198, 25.08525137541586, 85.48178473138393, 67.30670357687754, 80.51077424907565, 17.10929188036775, 59.135666396702916, 36.36843539870763, 94.8050761730689, 99.02713506239334, 21.265763768319236, 59.888477813122144, 75.94827328746496, 15.818176826764386, 43.67902055655713, 5.1154188508329534, 22.945901059279983, 57.92301551914502, 37.000461299889345, 5.129302303903415, 68.79869820220175, 70.73606089235032, 7.610868126095727, 71.7456806355123, 51.65691763939794, 92.87582430355083, 39.60411720326443, 76.17864072759767, 87.8696763869089, 21.003220293460345, 55.15898710058518, 53.18974724957922, 30.862903158602386, 53.69925422911523, 95.19963117234757, 21.55720598283303, 41.6907136805739, 91.56094273980482, 76.39567514441103, 16.350303966757394, 77.81534593816738, 71.37706839316392, 98.814497802859, 73.94625306535511, 15.531810015339698, 48.164815188051335, 97.46656483979285, 69.27845156760029, 0.8058413128091413, 10.975183447232585, 31.55573345060979, 56.183003032058544, 48.10360805572878, 57.78902971081359, 96.78297134353664, 11.389732133058084, 47.23280878558651, 68.17042614373742, 8.066396003918685, 40.43807501502976, 7.94134324576935, 69.21205265052197, 38.89449349449634, 82.30358075326389, 45.676752045016286, 23.61014869756961, 3.614785227790762, 62.233487441847615, 34.950425469431764, 68.91503618763683, 42.99719927844634, 53.496987060969744, 57.08393626759401, 37.94551621005135, 15.158709370136014, 77.91257297292181, 78.21726801260148, 6.802368377163715, 55.99698400883053, 39.86095247179242, 26.671355841320043, 4.474808884314796, 62.0236164693071, 28.39725933592089, 13.942708299968643, 30.469830106093564, 11.583211993412357, 7.128161197723593, 42.3042846699605, 29.706857036555967, 72.73434385970148, 53.155562401073055, 50.37133648979461, 28.46291150371586, 56.06048377942915, 22.464071526726826, 60.5321375154596, 87.31017482302738, 51.37155571956795, 43.37198976100347, 52.77029166807733, 85.23560969390603, 48.09886250795573, 9.61239802721292, 37.62474737606401, 68.22709311512688, 49.95132193163454, 47.61458837124841, 34.58419994474563, 82.97720247815465, 38.85544422755124, 98.76639303669346, 99.76875614637686, 83.93575241626888, 76.05692909860508, 5.455320004300912, 8.515696208756552, 54.07488268523778, 82.87654251230404, 89.8030001221386, 1.0924193252070835, 14.23161891723722, 0.8289257331113076, 69.61149061356245, 21.40660927291368, 94.7738867099441, 43.317796932503974, 96.18706273557636, 43.25227593207558, 83.48006132640421, 75.26030916137101, 0.020667418834952045, 65.51850260278627, 37.76879292742383, 72.18481800291725, 24.674193601578175, 56.03390156388017, 5.573615865668414, 48.925833535340935, 35.784569172302184, 59.38688675577993, 45.68958567938567, 74.2826704603697, 52.446941308422645, 8.247866843044127, 75.79594947631391, 0.4148776264581988, 3.1965288307843176, 90.98907710519128, 88.05112845707968, 39.72641095012376, 13.9139226767519, 26.64770101552889, 50.59314108255541, 52.13382840487826, 66.31338003383983, 39.94304315217169, 68.21600913760498, 78.34398347419163, 55.86799109430278, 32.77211203289397, 13.725933081563923, 63.321974273924766, 72.82125358424868, 20.233765569628147, 74.72250104198521, 21.20024928684957, 71.75569119836184, 68.8919350254955, 5.461203921472779, 90.23240373726989, 17.162623935712972, 9.416854407388897, 54.28104455120607, 45.93951764846066, 62.2340861695556, 20.643602861180142, 47.23689954128516, 54.592883892864364, 17.467796837453452, 72.80605193508188, 91.58010492664323, 84.1895018031667, 41.1936776847403, 53.504495680818074, 85.65409479874089, 37.33203753074903, 76.09956688956852, 79.55635686792314, 93.41299687465062, 14.325365832662552, 67.79159783873183, 22.97535241712858, 12.127083867601396, 40.38780980097295, 82.34382297016305, 56.6044069436271, 44.080493406178554, 48.801531063608884, 74.70049163403043, 91.513092496255, 73.24609726729496, 97.81898734829663, 29.389575078173337, 94.60455758276728, 84.38702212020259, 41.820193802454384, 11.647167353809785, 43.27910949878452, 30.554414999669245, 74.51845918234848, 62.7656801134712, 43.16173251805685, 73.27754706791151, 33.47882923954625, 53.97065826882758, 9.389322415763779, 73.49702643484373, 7.089863656037276, 25.41462667462201, 37.85850456495019, 3.7343066796028612, 98.1224667602005, 21.196310363098704, 43.40821657392648, 71.00711664083225, 41.368038007247854, 82.95710519661101, 36.224137017731515, 38.12864291641783, 34.38419287951112, 5.585007021030308, 67.97058621286911, 27.433755433087537, 56.01647564728724, 74.66752164675619, 49.61145255466287, 30.755278678964014, 69.76648877662754, 67.51732574983116, 71.72032440118178, 51.65891862050371, 16.072329004707953, 93.06189021279594, 60.728183933506166, 32.62367470521311, 74.3711435044702, 84.00827011405593, 55.78384155854623, 61.73369043416926, 93.78209884031926, 2.6260290321405644, 34.250569109298844, 71.15712783072382, 44.94087898407608, 67.0417242548377, 98.04935818705619, 76.50513191977673, 52.17736566396366, 85.65761717705959, 95.65192278718845, 97.86411785766096, 22.655264672125064, 58.04909327549004, 31.671995732571332, 75.79667348078713, 86.3024897202454, 80.1643272419675, 26.531469352679725, 98.69125430110724, 25.793395394405504, 6.299189266195704, 0.96999999778834, 34.751229504971725, 92.84408774395865, 71.35414996788273, 11.514725523580104, 90.5103375973753, 76.39846035915326, 62.01169063174841, 75.6361474532403, 22.341674329190674, 90.8900831158538, 67.5962997752919, 19.321720273530417, 10.135813541193484, 51.55778096679741, 36.12213220017693, 63.85855587908941, 51.11538706345844, 32.63994786178308, 28.60286838740278, 98.13654625474744, 12.459034721940998, 95.92797224599722, 83.47463916290322, 31.513552326794738, 49.701292522630006, 53.69850086998839, 79.3382556853664, 27.994041781932456, 8.92169821107992, 14.309571559340718, 22.258987354259617, 21.3763087606618, 48.91748000921314, 73.58601423644187, 10.93946326660651, 55.61514098333544, 78.97558693811999, 0.20111709198187278, 10.349538221439214, 49.53633000082578, 23.001623022436945, 62.89939969270322, 40.75678163265892, 58.31313150738847, 62.19077269399973, 27.07844496881825, 94.43732154019031, 2.8788625642704235, 15.247167084215107, 29.795765297388442, 21.878877870634806, 45.651008880746005, 97.86112133615741, 49.16416151794885, 17.77419644546441, 90.86251087891199, 74.41534394764788, 77.98993748227095, 18.067540305690976, 75.46354722465377, 40.69432725121571, 11.866274601518146, 6.084083491416159, 88.0758540517649, 99.71678085978526, 69.92420256393353, 74.34626483739447, 89.69759292850225, 38.16925740029817, 29.956435922734336, 42.219501309728535, 30.37864691828255, 62.59297078003733, 5.959113849290443, 22.77713350421937, 55.626331619473525, 92.46652996552316, 39.53442896939604, 78.73855423753311, 86.63236823818514, 62.779405529854216, 1.2022371628275796, 58.6475939396173, 34.31553809638478, 43.49957227100111, 91.64328436599118, 78.40943643082686, 45.52632734234424, 15.84579007503486, 97.71796593405502, 2.9341205231557366, 38.07020207468378, 49.496410052244755, 30.193806439270055, 54.449103371582055, 0.901206011421174, 33.205963783030654, 53.21036368302418, 60.7316860396234, 6.524007494620743, 91.74023782200045, 3.1663001474694585, 49.20849005401391, 27.241000148960193, 35.398416873887975, 89.5990035209383, 3.3564242406373457, 33.0819003527547, 45.920685926302426, 2.1105542193938787, 15.855120493767815, 52.10655306526982, 30.531791964931077, 11.365365725174348, 76.79322334439219, 47.88844055296428, 64.04934363554025, 97.31182421620584, 64.69910393964852, 19.62579071915227, 71.59252181900683, 58.284831005627154, 30.76069332675041, 96.29290601525622, 77.99698424560867, 62.26536639413678, 95.69030377868464, 38.10267325509973, 88.73965232456095, 82.44838901877469, 10.828766496148978, 64.5312949020244, 77.24284181951442, 95.05731758982068, 58.80627002420666, 37.102761402735595, 40.97131636314336, 59.089427119371365, 61.82407531748528, 48.19223095669535, 55.49487089460625, 6.751630253323637, 70.85284754574906, 36.51986002939419, 0.2666592531893941, 90.92599404075213, 25.371312965902316, 38.822917178483976, 78.7964674518043, 31.800092254540225, 2.276536297529974, 30.18744840142318, 21.300350976082527, 96.46708401603836, 28.769712473731946, 87.06577055728964, 56.30985435146017, 20.768022237521322, 76.11432273640322, 81.37671971490876, 9.67844094792698, 93.74004053907144, 92.92752319038702, 79.14645554517824, 54.49133553337479, 11.952964319473658, 4.8798869697546765, 1.3172955953071885, 90.00682210775284, 4.262993791731661, 15.101543073009926, 77.50680191866262, 65.79235000171205, 64.92326571797051, 82.14057333706354, 16.375264027261128, 88.1577065371285, 46.090548351952556, 5.084076849487495, 96.609584469588, 8.569427482822467, 75.12914384111443, 78.27221716547815, 43.42534142086827, 35.64761580440866, 67.60854392260144, 10.947133499586181, 94.27474930330968, 84.20301651371746, 86.06084366115766, 54.90329636622692, 35.4567664269701, 11.947145805342352, 73.6531408789346, 51.713336432872445, 67.97806891946317, 39.153457749460706, 83.56498897618367, 74.20002348564371, 8.637340405736527, 83.25824289457209, 13.235817155611972, 84.92160969870595, 23.075116873380995, 86.47250645072681, 0.23239398498370312, 56.64170431414875, 40.95708259836477, 44.38983015046307, 27.086523881597024, 58.46951203483973, 52.491713235395984, 6.705456145715505, 55.98775061065175, 16.317077708624872, 40.35061035020853, 71.91477613975613, 86.28227664592102, 89.76403544641857, 84.78199956079607, 25.858237425529452, 25.81987465546406, 24.077683462491084, 33.82060256796833, 21.518203916784316, 28.623250545578916, 40.19258215002078, 85.79348213445435, 68.0768902694254, 17.539856632194663, 43.42399740849925, 54.676159516248646, 73.76274385563865, 26.859510787471596, 91.88510858706434, 2.4915002769069106, 59.42168381111084, 24.463832576298095, 15.740244101917767, 47.38141186054886, 26.757511850512017, 28.610765764222034, 28.288598412503152, 12.485208718627938, 72.09830161679871, 89.72876837582234, 23.88737019471573, 52.543560816264836, 14.7564477719341, 95.46196831386709, 27.444755282656697, 87.83767508032948, 41.790620332015635, 74.58061939843591, 15.163161153668325, 63.182341940454464, 44.52550108522739, 22.70584385186253, 74.60354066434608, 35.7575513700566, 10.9092165038306, 93.23883941275646, 11.311583162753225, 70.7481857080748, 36.83583131288888, 62.56918024566222, 90.23930699740328, 76.75743584904308, 78.51187286543663, 79.43499615239047, 64.23669184828728, 63.42278700252194, 25.93222088953243, 20.775055777607953, 0.5200198433438219, 6.585341596792926, 66.58798264650999, 82.66614665768016, 93.84151254752229, 84.7955462744938, 49.03536474609508, 35.25623127816253, 64.39861469173866, 65.53013731854895, 8.028573139299322, 5.484812974086251, 39.17065459109183, 90.98912581730612, 65.13106017642339, 65.58286576290348, 56.23449254045695, 90.47871825333684, 61.66940609753026, 96.0334440101391, 21.397653618268254, 37.12044017429401, 95.69283314587639, 78.92577788281748, 90.27642253278255, 64.68568688110993, 87.5161640594763, 8.794289040669302, 70.17581136793697, 0.46239605760376445, 38.00416801437394, 63.175149478172266, 95.90743585890749, 80.84038039672075, 67.28857211342816, 32.83971377914647, 76.44652556751652, 33.436439265846175, 53.60057971439986, 41.42018016211221, 80.78340753940762, 42.81758708399451, 74.76735301125306, 55.924564528103204, 18.852545488648133, 51.761473687254345, 74.53184550042941, 12.2156430038601, 23.08981782401641, 93.36065607986555, 94.3235467516203, 11.49905028946262, 14.192246126885976, 42.94785104088705, 92.85083312688222, 60.59242057559542, 44.97677100502629, 91.06431913466321, 92.99756049178873, 34.553554824300726, 15.628943059332812, 93.64928217362085, 38.08597883503442, 94.48075150799586, 94.0281923896896, 61.8009224525675, 31.89245499432546, 8.643674773611965, 55.15813166018201, 82.82115304852773, 71.75022207882694, 20.481539452506205, 72.422086085578, 25.126672403557826, 62.09447545892601, 60.71965254349095, 14.150710633550334, 90.81416193482441, 90.31814129829428, 32.58054935609531, 40.291354104055785, 23.20707167183541, 36.08484237413131, 21.293888729783216, 85.13205005779416, 39.663202533228144, 17.32726156667882, 60.81799746902572, 30.219176340033506, 48.42124918585975, 96.58166289244136, 9.832286564504622, 41.46873111079154, 1.2214115151369276, 32.181311881321186, 57.137949195191005, 59.7762286839989, 8.814097968388623, 13.94556542900187, 76.08717330436767, 94.83053748070505, 27.673716151274697, 76.59585618219414, 19.662326571797493, 35.546333064965054, 37.87660339168517, 28.680414672464096, 74.08942422809292, 57.69956898968912, 75.49621358986195, 43.87678396679575, 94.53345682740698, 35.78055759314442, 42.912293524474435, 50.25219466405068, 75.15905600137849, 67.8583297053442, 20.434949064334173, 7.754459880855125, 29.950733427817834, 8.019619340438776, 5.276362581722083, 30.98750085566597, 19.165299606478538, 56.08497174206191, 53.636989966462934, 71.62409635730725, 81.08362540964178, 14.41603098716796, 0.9851307921188268, 26.37500322643387, 86.24735773198572, 83.31608671854292, 5.992197921802889, 83.68788306633054, 58.949867255204126, 18.971543658893985, 51.82017049962283, 56.38590975893612, 82.01522669051468, 48.41647891783146, 74.5189719718388, 11.406075549113325, 31.110076060172254, 2.487940763058172, 99.41496416168863, 12.958300287704095, 59.76104172103486, 22.035237960221345, 98.86947839615947, 65.88741006901249, 98.5307307276304, 76.46129324542386, 21.96144654266805, 11.320385061836047, 73.58121644472835, 99.65191406226008, 82.38022779540938, 96.56683249422255, 17.816953361121524, 77.19156557495414, 62.69913242167261, 22.28960371095181, 87.1547638091527, 64.42961114137121, 77.2570149855078, 92.35224312155977, 6.684976456216518, 85.68392560810199, 58.27536831516888, 60.076213500441845, 86.04867414406759, 77.66413022927297, 62.96500941027634, 52.38880400113517, 39.514938982756206, 38.02007157836981, 80.58907857268407, 38.24698929111048, 30.904248227399112, 28.204038324546865, 99.74536571738022, 74.0123982482466, 84.6124424278176, 4.580682897991251, 25.26809846101441, 73.78783267151547, 35.75978806402161, 95.92534479130622, 55.34745088223985, 66.57529777244953, 32.05888052517162, 19.6247689204469, 92.98905389444306, 16.830047993931007, 84.19418638292521, 88.8771720323091, 3.391022078089412, 1.100254828181324, 94.40361494797747, 86.73958591388897, 88.06822043703077, 99.92347605000928, 41.70944552340432, 2.6894476659496402, 40.06214754477836, 10.13019039646441, 51.45838373462694, 55.70674891794841, 51.481734808169634, 23.13289245584088, 85.40940237737695, 1.2062829638582184, 89.54757403684674, 60.80486942219705, 25.14922386044931, 61.582015060191495, 30.401477416326863, 59.726691815757384, 80.73926404661137, 91.22211313534044, 48.222432090716396, 78.89504470650533, 26.90222639881119, 33.20779704553707, 3.809684651351264, 32.609894790772856, 70.52614697608276, 28.067975855985484, 53.04713205088958, 48.864695595683635, 92.8129859285174, 63.66392538927161, 66.5454222098903, 27.478222581147193, 92.29313457272758, 66.28759344928005, 38.1592140536538, 2.7346961033797967, 52.143937723396206, 76.03377499487662, 41.1101954870433, 82.50096008563152, 32.70577517587229, 32.797309546024586, 33.75790472404368, 93.13983723855087, 10.0285864966697, 0.22241556436723986, 18.18406559662017, 39.707966207411815, 71.41821883500023, 93.30882029218756, 44.23704518602026, 16.480025304794232, 28.911557090415197, 63.46570406412183, 45.25424771560061, 94.31223637429622, 55.63373153479743, 56.418536597, 76.69705740165922, 33.327792638675625, 84.9339174435733, 86.33707856380958, 81.86142038599996, 39.61051537773108, 49.113711537757524, 22.465423434800424, 12.06175419671256, 3.744381439030209, 8.216507834466702, 85.44410361980368, 19.26185191659918, 15.249441795762442, 17.356179564073095, 49.98002863118219, 55.70343292011232, 85.56029649255757, 15.922071967533213, 17.578682358254326, 86.45146030527685, 7.595029921649232, 12.193672144623303, 68.79494854863404, 46.95643549452666, 98.30778253694031, 28.397513695889188, 69.90232871551136, 43.79501405886709, 15.47073834653081, 23.841381663741224, 43.351671405737754, 36.10243402107975, 50.889638436982175, 37.70444494357643, 45.68654066858006, 5.461523841229132, 54.406151287639744, 71.68814643941404, 2.936234239594826, 31.39383955231804, 38.523390828913136, 82.45019282925685, 70.3649444531688, 30.749330131693497, 10.721584654221218, 34.840858988511094, 84.14625610127551, 47.02827386455739, 74.39681070627472, 72.81755233748754, 33.097822321016594, 84.51320568684328, 60.305599797370824, 42.0599791931783, 42.988464425797766, 35.507156434397125, 76.33448618506493, 42.134329652511035, 35.83964001922594, 49.301331860417804, 7.750683770234456, 92.63202936097935, 41.27674998597293, 25.178517151116953, 92.77645343309892, 11.996737016549819, 86.34880672153878, 91.74185411939659, 88.43736716282247, 86.87571639403066, 56.69152625723359, 77.08819799993333, 74.38671297699412, 35.419708290951576, 16.914370662727475, 7.53530158496083, 32.98761288911783, 87.75687373090192, 24.29877061377834, 35.82452267064604, 6.549875322086141, 42.2260317524643, 22.13908991512763, 62.84580070797643, 97.14139962747866, 59.69287156517395, 94.72272338196692, 14.615014547874871, 72.87681145544627, 46.97347907261202, 83.32876106438276, 64.95356892277063, 3.66028029623946, 19.830396877234556, 5.739513691995068, 69.66409592238368, 98.14145349722338, 5.970537887047667, 45.505751914042136, 70.87417380481897, 70.56274876963009, 71.97392042121068, 32.7002358528454, 76.95144539614783, 72.81964669227406, 60.62326400266973, 35.776925205882236, 18.744393460866927, 87.51777440517729, 78.81720834682775, 25.9079666085815, 68.92733439922782, 68.05930878230072, 71.71477067512768, 19.548702251507933, 57.661183535688764, 0.923639636064788, 73.90945347170299, 79.0119713008728, 18.459755418303068, 11.243904682394689, 86.10875438968267, 95.0280279750541, 62.01948353889186, 81.22803800672162, 32.846542009522516, 83.86539024575454, 47.69889941820386, 61.10688665501751, 12.709664591552539, 88.38712214519539, 43.57188831558152, 19.42764778527376, 55.58827714331985, 99.79164762952438, 7.197381874153974, 35.323867795812234, 30.890863170551665, 50.898779088327075, 48.968723165077144, 95.15529797453321, 89.51454017276002, 70.37042610179994, 35.71280750168114, 53.499786282515274, 10.021167480544547, 75.65724351338463, 20.243679639611845, 15.763507838405488, 75.24533584382559, 46.33508911435332, 19.357876755177184, 9.84596389248198, 5.203868176570325, 40.51197948322541, 13.498106446503389, 48.00544784451625, 26.0337350654801, 91.90517999864112, 44.89983254801759, 81.17847145202727, 27.289532246735305, 15.26950184495881, 89.51266432773079, 46.72501381695763, 45.3991554390231, 1.456148012216063, 75.73624962864153, 29.940580194167133, 50.789585699956575, 5.054318378412126, 43.53909049966531, 1.8179896531095197, 63.447791571502854, 10.463669482260652, 94.6061665368577, 19.792339255955106, 34.86812797780916, 9.81390849993291, 77.80072313393715, 60.867436631842075, 70.25914545147953, 96.2084749946649, 46.870624891333, 71.9233355184172, 8.784421487799133, 81.4949153863697, 71.86939717240513, 4.267111045195337, 71.67772852609924, 13.269838429489711, 97.17853246912551, 77.91467195460585, 41.770710564963, 86.32168247652284, 89.87984298850235, 93.85207907595753, 53.83490482952925, 20.37648984898822, 64.28648655222831, 97.95561116073202, 33.658378343882255, 54.04432957992219, 68.98007497170418, 19.044331264988823, 95.98461112018768, 6.827637182304269, 0.4978468416638293, 30.10235771005426, 28.864733218585236, 73.39898102019767, 26.680286460494663, 61.868592354703914, 20.624785290993263, 6.132051418305718, 12.119087339495394, 84.21539710281478, 62.43047652986474, 1.42314389853343, 92.66783350712754, 71.01193411160791, 40.02352548356913, 5.4217659995351, 61.363243032136616, 63.46083787858488, 68.05262128054075, 93.74717095490149, 84.02068307200058, 14.0385997371257, 2.9402939759308966, 29.062156599431844, 90.58170333498755, 89.19696581780265, 81.38402438883449, 61.893198007663344, 66.64826604185173, 40.19652905549446, 20.768950004438036, 37.912778442514764, 49.96838638945881, 8.809105528909832, 50.19827521215122, 13.49982075033298, 52.721029583049514, 74.12098822134392, 29.398362554616032, 86.31904759754175, 58.530311094850575, 70.19314279004688, 59.71642467573118, 94.5932801859036, 55.78145022999449, 15.94866067852967, 37.06367025335071, 43.605133670910575, 65.71069640636829, 13.858061185299842, 55.38058962512768, 30.717845179102788, 74.07516148747563, 14.434762220303199, 50.031477657891955, 50.484483164414584, 80.99403709101948, 65.41503973242246, 44.942435145861815, 66.38242360758444, 40.22391853161491, 32.95446408684417, 22.014058950360194, 63.55683840304731, 4.472655679462889, 37.12068127570512, 23.27603422286756, 60.82978028807376, 74.49748889864152, 2.192198062319517, 27.222293937081254, 56.88732878182444, 59.730564820944075, 3.3198523061137464, 61.33329909968842, 26.182554138454705, 84.72856906520417, 86.79361324009358, 93.82724058768058, 62.992220823852385, 74.13489526385769, 64.80110260823201, 6.112111001024301, 18.546399633189303, 87.0350563842561, 51.12770952886818, 38.795540364734485, 13.030211560871152, 40.9853772068137, 99.13531472656476, 62.85893305724901, 26.69493969149592, 30.441892260217827, 44.72637451098929, 85.14955252470907, 57.88720685835686, 3.313459350702097, 17.96578402248358, 22.755508893356268, 8.8082546875762, 31.41213718474434, 58.710806544146834, 29.48030236176029, 96.21109796747189, 80.16590387802728, 35.283701729712334, 22.877427851707665, 23.52406168301142, 26.401160075452466, 91.25153274952122, 43.45580922459285, 91.39370982586983, 10.757096391816, 76.6286031313729, 26.755988639170937, 91.06479418105977, 20.9597762872911, 0.9020350360573692, 6.952353928720001, 54.04655278992326, 67.4147102154879, 79.25996249397421, 13.762933980336612, 99.71460768088673, 62.998594565739175, 35.40241794032757, 71.17579460329378, 63.15815124208605, 24.777541601894182, 29.142591370312974, 88.11873805768886, 92.81036269836477, 51.929430865763315, 12.444321563600546, 89.03812997886172, 68.63069146974132, 32.877091639389356, 58.00658479883592, 83.71174591241422, 48.89300170551073, 13.856543093255846, 0.8637773960505801, 71.59395589407812, 53.46013462555217, 68.40475986194684, 81.00315153311617, 38.50047132983055, 32.52688124241696, 10.317382527940245, 29.929448819632242, 76.54876230211354, 21.741848334736822, 63.40642708494537, 66.59063079395496, 32.18304105766512, 68.80221929835629, 70.91808934919418, 74.26656407638352, 25.906104391204877, 38.24244133661292, 84.08711050404759, 59.89581138921761, 22.70743995044009, 68.81785308175334, 71.60068996771007, 50.0456545905239, 10.761237968471526, 24.261178015487673, 74.14462699725284, 63.50644710755704, 52.6797433715322, 36.04910582495285, 31.5667129847918, 73.10228057025363, 63.684967754409385, 28.255194628017154, 10.002181759220374, 53.796730106369104, 86.60088325383578, 28.34711900199437, 52.32383456436993, 39.59540306083539, 0.9479946016829222, 69.48558863186689, 82.15119642148909, 51.57725938198857, 67.514976702196, 55.886373553729854, 21.0106713512192, 28.805861136438104, 50.3572469126224, 42.16454274491962, 14.1758144898964, 62.4094668087267, 26.693991897007564, 18.04281008269195, 65.1172648937212, 10.51156023742429, 76.30435060103696, 21.968848028850164, 40.471476573284036, 65.03663430290507, 10.205118957169878, 54.912026481199916, 91.7153340494269, 40.13053972293864, 14.089059839901308, 12.993546492889552, 56.31665741139944, 37.79055545512365, 97.9947892487719, 28.78713085607465, 69.1037646530079, 63.06211127510151, 10.85025816407288, 75.97697267160197, 7.900385316102843, 73.69924950627521, 32.71326835010948, 66.16544396969097, 39.68013707473778, 27.739589647416317, 32.13312249153423, 97.4832779701641, 67.40548776108609, 6.548987183680932, 49.90066249565683, 37.70918272648227, 69.66675427643055, 89.92834258514047, 24.648704475410288, 87.2737015023043, 41.88487731426116, 77.29675797447854, 53.39020144148966, 53.551896454007064, 95.44606775481358, 77.61826773505601, 17.757322894393766, 16.849519931582012, 45.98492817436989, 38.71751374176452, 76.60121266526788, 71.77436863116591, 19.015363128480455, 35.92867280975424, 77.24125908327869, 21.46600050230727, 53.58464595924334, 9.811894646098484, 80.3255242429031, 16.405558294542956, 42.13363460327927, 24.521119671050318, 92.29371713868296, 67.23562766456038, 19.196492930530816, 71.99123504732346, 25.250066375421298, 45.81169851713398, 17.284486300467915, 35.13044934348623, 75.93023830214611, 30.441647748986288, 65.6100489018849, 60.92780411521337, 62.89079629350891, 23.030221204361478, 70.09471670315493, 56.08907113980658, 61.623061696220795, 27.02489461105967, 16.480210762400972, 53.61650522884437, 83.61824977047773, 71.40250028687991, 57.891253974760204, 87.24057988978507, 13.17915048655851, 85.54696076341804, 85.63650883163412, 99.31807860311116, 22.450407588181708, 89.16265767521104, 14.156789346665155, 95.81272162378373, 13.492974513314305, 30.682651693438302, 64.9892292733843, 81.56329540769921, 44.29038069033362, 52.456947829219324, 82.73937639045599, 59.28436975814749, 97.28886708778808, 67.58810483923106, 34.16315738458445, 96.6190790850671, 19.651798269073062, 19.484764526843435, 12.780651044919134, 64.6267267726773, 54.165649675983296, 42.51872042578816, 39.15260128341299, 25.066951266035396, 49.685076586942586, 29.67038267784612, 70.18354194300281, 60.049545149714234, 33.67763282944891, 52.53370677195607, 87.8837690634484, 70.22494849865173, 69.52374735109755, 58.65204545508934, 81.10224328513766, 70.3262715185436, 84.55708854963137, 31.62688506985991, 79.63128276521655, 67.89980000633481, 26.83444298123282, 89.89477486926299, 9.715498378866794, 1.1137877489338366, 88.29355612790556, 17.195013881912036, 20.95822176299992, 37.594363978624244, 57.70432274859354, 86.07895390012142, 91.8209890781766, 3.3568755346247703, 15.303446748847005, 51.710404314376966, 18.712043002840183, 74.3636595220724, 16.44946218567631, 13.215533639846932, 46.36388918208887, 70.05623968568997, 34.79788659644842, 29.341617960109623, 60.597429974967476, 9.292708632801617, 83.43271225825933, 79.59958328849027, 61.12501127786716, 63.85914478020298, 27.10071668921904, 88.74072029757573, 53.67111533114629, 37.34953535129186, 78.04554658051116, 33.30799287553803, 56.297579676905286, 97.43861536907797, 23.6171569479517, 88.09199016871486, 33.90806853642477, 58.964850812617506, 8.027814041215509, 11.06765164937531, 14.612679785156146, 20.482025625736387, 41.60533855425661, 10.838232866499498, 34.83856028823112, 2.5063623473412955, 29.88255753676855, 75.64328895271818, 32.82557830535053, 79.97632654396516, 91.89902183784031, 73.37865112687491, 80.85786132765028, 35.55142266991243, 29.58602155395399, 98.59415358075664, 9.794528316507789, 50.628711653549004, 49.48828913685759, 24.216781139791486, 14.390229241850705, 0.7552827661648776, 69.08461646287465, 79.36027166095651, 34.24022467163432, 6.034596988817809, 62.828775864880434, 0.7759595243524764, 1.7040523621366876, 93.22527764065663, 23.187445330740896, 16.888265850529795, 91.08503543862868, 37.12089689361332, 91.79695401331395, 90.86648792193124, 6.804630023137737, 32.33363311332948, 85.9165438384814, 22.275721129184834, 47.72237850383919, 83.14159952441015, 35.65516908357641, 3.6557191299255387, 30.849779799403876, 61.706740097788945, 33.39775003252923, 89.10010279422688, 82.99292717918749, 30.788671228944654, 72.74271967737978, 7.666027481143944, 20.824934996355903, 44.882986034521025, 76.04436919774786, 73.96251421722542, 36.034021984861695, 96.09773098095089, 21.669383856042767, 51.249207565362035, 94.75213749823611, 7.659665398981808, 13.62452053893809, 33.35097669578022, 85.23726916367387, 25.50340824784073, 83.49428025695435, 51.49945837903142, 43.12174055254094, 61.50893339003783, 27.382272816343967, 69.67974146875325, 18.274533905140146, 31.46390190850369, 8.719184113703582, 87.17014031130849, 60.10447736763258, 68.36283447406507, 41.51838839355641, 60.64381306187838, 87.55021909978564, 27.756560626794126, 27.5474240330008, 0.565444000128934, 19.25078555008354, 66.9584266461003, 78.41250151635772, 59.59169563584492, 87.08527817597721, 37.58830877966079, 54.8662486116796, 71.4146468697395, 79.1500389895949, 15.137058261965075, 56.079832079318614, 24.584995157158186, 94.28862707101511, 99.03299825551852, 23.668101742127966, 96.83923871338183, 45.182249742834045, 8.872242978160937, 63.51021146225937, 32.565087837878245, 52.67896439481614, 14.605271258819908, 50.78992932625221, 34.56095111831262, 53.088287902258436, 72.11804326242202, 92.59552404771063, 12.815201032553015, 23.669933711355206, 24.34085295842936, 75.66291415117446, 24.842501723223542, 32.473077002263764, 23.16011565547278, 2.6562969333618014, 98.50849116647412, 22.928012229035666, 49.78493657831519, 53.20795174945337, 11.425368203825004, 60.76804453834864, 95.31254251230231, 93.26064871910718, 75.52553437144057, 33.25252696773112, 33.913372591771896, 64.34399217435372, 28.233857587346, 42.16776632032254, 97.45349408988736, 94.60659067060534, 96.62624587341855, 71.53430740241959, 20.007616672349837, 4.461519324324891, 53.73858639265245, 50.56814420274988, 52.55318709344344, 56.715047496077254, 64.10842651356342, 5.196142255155722, 32.36516597225243, 73.13078336636639, 91.25403899647043, 5.326496922211477, 10.477398196819166, 13.483553663551028, 2.0128930662322797, 93.92707146063572, 1.3990291735043958, 22.46057992281957, 72.13385701814651, 78.473813084093, 82.61060005480442, 46.04464289531792, 82.8228542729205, 39.405558024992956, 36.55607991127183, 2.1569154939770407, 12.866056906912027, 62.34666102423835, 75.73279166224546, 5.149584205403778, 50.576580883460394, 34.08992262517587, 18.236262748751177, 54.96389996404653, 96.87320752506041, 0.8798451733822876, 88.91076756461132, 30.008560996942023, 30.915067264575235, 48.56845721315142, 61.43268544681811, 66.73641907806349, 37.32789085745273, 32.92561330657079, 86.23246374725129, 59.14052865789273, 37.47113038811823, 67.68928279925582, 27.929527629412966, 18.82324548789356, 92.57427926802599, 65.6226787479346, 54.71559733257272, 30.33752040747778, 41.563388908349175, 5.902719439291248, 0.882195988822021, 79.46478523341995, 25.17485454420999, 90.70583398066215, 98.70747396845864, 74.6373034155294, 40.15079336592326, 79.93591989539036, 92.52025362783003, 4.479474826341157, 97.14849572994643, 93.42561001085382, 37.571620976006784, 4.890295220073648, 41.72798602976017, 81.67048423950968, 39.19348814603409, 71.29951831700487, 75.097446740733, 56.97280492249875, 76.41999166385648, 62.03588449141606, 41.4444287004166, 36.294648208842496, 98.88967009148301, 74.35619435571488, 46.5232158516499, 14.952485884667865, 83.0567062652983, 93.43639692715034, 24.9547104534259, 16.116062276273624, 92.53996743639365, 17.038891619151563, 24.761244693795003, 86.68707476645325, 35.51897314118483, 90.1453281153058, 14.448312299317823, 27.65210125710702, 22.7165255629181, 42.1004089022237, 69.72006796910549, 89.82678390548458, 15.027538264346763, 59.055807634442424, 98.34955651468682, 42.20229949372223, 43.084507285386174, 41.97911335713215, 83.39521178511696, 44.22972477247246, 35.52027076170361, 10.43484220351052, 59.64903956937798, 77.24187917043254, 82.79778411330942, 24.657509494803755, 47.6685720763367, 51.84965123062315, 97.81592184243863, 71.98746128456321, 5.85440512619938, 98.46337934988799, 23.640966356017902, 49.25959721244959, 96.33391736939923, 18.121681268201318, 26.540780877518277, 60.163340213828185, 30.370704332375865, 6.081272834783102, 9.436469696174077, 35.96105779640322, 69.27210174385779, 14.29301782840884, 84.67678946803984, 15.301716758773154, 62.832496601656594, 88.0843632828715, 2.166728942346441, 12.475295076837678, 36.182113385673595, 15.783022859196805, 4.496250769713994, 49.95312496959927, 37.76461348714463, 46.48223842895103, 79.17607043403049, 38.7263420719887, 80.7839696880534, 57.21514737860709, 50.42221178749959, 3.9208050038598397, 80.93563410374016, 38.53836672528506, 90.26878438732714, 31.833287046467586, 47.67829444391168, 52.30228324934482, 26.656754536364947, 58.69735304302443, 14.982266090246089, 12.418325182622302, 46.27206157088597, 51.96575919412122, 90.74062637825146, 88.6478048837774, 23.79237616894898, 34.283541935847964, 68.63969502914775, 81.45566717352392, 1.305701937558501, 64.05808255119203, 88.36386530082052, 89.39192172903853, 23.911498148069633, 69.38472553120417, 78.71538422670565, 71.60363661258258, 6.138804936786668, 15.408367609765982, 42.316169901877224, 42.80373595386525, 33.9264361593981, 55.511530852497714, 40.78403395725299, 42.03816154479537, 16.96258609493183, 86.48574090243895, 99.6843578374285, 76.74651204392214, 77.1847489276179, 3.2637218316332373, 58.537223459111246, 34.625435886298085, 87.62985860939246, 28.42393061832943, 10.793437775822435, 8.05825826209542, 20.422074106833186, 20.140327063333775, 69.83039250394654, 78.88768085357661, 45.91177093954087, 38.564133065569195, 1.205182912890257, 80.33864793350064, 87.78437380555695, 91.57334609365446, 93.48288072665939, 6.329688304368764, 39.78430930117547, 53.79262625227403, 5.296336647448352, 6.680808051772802, 56.344785255827745, 37.24522234402389, 85.7333293395607, 24.383233420307736, 46.250926693369976, 49.710772107160274, 32.54140458114988, 17.31452512052636, 63.50018173696841, 78.14564732454657, 69.6841354086108, 68.1953099991502, 40.62088888795241, 30.363359102625644, 81.45676532450311, 47.65780198030131, 49.40151898365733, 34.02945321691995, 40.793508973467155, 21.518892198457518, 97.63615330686393, 54.630620457566394, 5.394205218127324, 71.55940912906945, 97.83415421923168, 84.54535500757557, 8.691408633753351, 74.59310095010834, 57.97942941729708, 48.5637791252598, 6.305857507406665, 85.56877875704055, 61.774871033085965, 91.15456867332628, 26.084593334911276, 9.486140971866153, 52.21992596384955, 63.89735165406088, 26.10672898726307, 34.9946510949602, 10.812902971684546, 59.315285177533994, 27.70526666005789, 1.3793509583091668, 21.109098666629468, 10.285648262945735, 52.071766489498586, 93.92376183558565, 17.467256270292374, 99.39686810853492, 32.79664636219729, 33.584823400391414, 79.69124582028742, 65.55479357622836, 27.582450872832563, 99.97074558339054, 54.108602943250006, 58.33851531219694, 75.11133473226016, 61.5306749310515, 80.60186597358027, 39.855096381564934, 91.04888896960901, 13.673799656279229, 49.81936627612436, 44.71863029425492, 68.94621998000129, 22.765089802256632, 87.37322239039652, 65.80336393186653, 66.49140171103281, 32.72236276201211, 2.994278115798754, 30.843058058457085, 78.91637992490539, 33.65473366660642, 85.6773776050988, 51.211454913958946, 29.284520519944323, 90.78050171361333, 32.04911374148023, 94.93166341407058, 7.016739975176001, 14.627788169775169, 20.726038011046555, 65.20977591179548, 40.02901494155709, 96.5670913702772, 47.40500902002236, 73.15667041441402, 98.68936938837025, 23.390928842017324, 18.264643341703014, 71.02953312119259, 39.403029292861234, 63.51726954678144, 72.96508004909204, 48.78772704556409, 45.78206387844082, 90.75978539950145, 9.295303975922064, 53.08015876359477, 84.28216522343634, 58.48283739179879, 5.310861515411103, 91.57840794720653, 51.85835806291315, 80.43160060644736, 64.89882705276466, 96.63558472780812, 60.455955040354816, 42.26627157311501, 70.25918814304262, 23.645894690555956, 86.41142009691217, 79.58855063327181, 42.57953993112271, 31.60003426612206, 71.56129693564368, 80.74896757917318, 59.44388031502849, 80.57335163149212, 82.49015646475837, 68.44201171549082, 32.18864813864035, 77.85570991829469, 68.22853866347901, 28.46424938455151, 71.971180741219, 28.453101956176884, 95.56323505453506, 64.39153365749806, 92.64574336776124, 66.40837777479932, 78.12250963140237, 55.32420177454459, 1.511746747619136, 93.25008749329527, 78.51315504482153, 35.33785575451445, 12.704366526840161, 93.8616049757034, 31.675886532832898, 22.77044823343276, 5.882291384749783, 54.5963767280332, 85.59418860202734, 82.21579265938476, 96.43144873301507, 67.74984527352389, 84.6637726976868, 95.69919000344268, 31.73372996369831, 90.91223087298752, 5.299981722234293, 48.11155905000029, 28.96370176166433, 56.82752724062631, 78.43385770133673, 86.13024797131236, 63.535806147159335, 92.81798684936517, 51.471570973447015, 60.433555953783916, 52.54109199602822, 38.552809382873306, 46.092504797571735, 95.81499887763104, 47.85382567521711, 35.09478897141185, 18.974490992920323, 88.0313524292627, 53.60803610766794, 79.06604041419588, 32.432383928804285, 26.408315454604935, 10.500930709212163, 53.50623190884944, 7.7702636682802195, 9.371418725500558, 51.03105092220686, 13.527397967220455, 90.45609956451574, 25.431319674535512, 69.86010703371232, 71.15548713493995, 8.478906396459484, 99.78555858426368, 13.431554034625993, 69.6126998322982, 99.31336888913323, 32.30731184882125, 7.44375106809918, 39.438560645741475, 94.70680548539542, 69.58812981133242, 23.009967381117626, 99.33973130869283, 2.0889209846095547, 97.51683406091203, 37.657027561272784, 14.377385092573892, 62.41815593261562, 86.09616991357932, 34.582767050926854, 10.63344848584309, 78.42639316957987, 21.311113686766504, 84.14780255860708, 68.35557038329374, 41.567524023441905, 33.43677850857404, 80.44870009238917, 37.028791062740495, 59.96939157721199, 73.48008369297709, 85.59258310290173, 78.18378929411777, 86.42337497207869, 29.705621236412007, 50.07343699510069, 46.44210427002601, 10.865537844210005, 15.144544747416633, 7.01320656910005, 79.02561396579503, 37.9330947315968, 34.04837333729033, 82.64120626166813, 34.18462952164689, 39.63249164515092, 73.88435364953257, 71.28528443595279, 10.160568721400354, 7.910498823658141, 70.0352847652644, 20.824423045484174, 70.48808588139362, 22.281431046335687, 83.54693132155585, 99.73385648470364, 44.82502064234456, 10.917558040405284, 48.4221992466116, 34.44914184023579, 77.2349322232801, 24.980303797350857, 91.08336259340216, 58.82178759674033, 36.618974842817295, 13.918464015915266, 9.481045838962432, 14.3399221233666, 89.95202006522949, 29.772048043585897, 33.610182940831365, 81.65768238843485, 5.109974036820564, 60.021530533758735, 21.786921374765956, 16.10154626771201, 19.56406203806488, 68.66464831784896, 77.3464305330052, 13.083437421615818, 74.08117653706064, 53.15227751815394, 65.0618402211, 47.00054081626153, 68.47900693068705, 62.91120220632027, 44.44047975717707, 13.733466126823068, 60.33210837792533, 98.765600453517, 74.92429605872218, 12.772108441728736, 24.04054929268873, 62.88777678578216, 31.574949010029673, 30.532023578412627, 43.03711169094259, 68.06892949436025, 31.49168073890459, 69.25781898708789, 71.04259433943186, 19.563413834052245, 7.673638690702244, 40.09044953535336, 89.33944425197132, 51.0773510385784, 9.121716904188471, 89.90800548103076, 48.976926768810515, 70.37891365670039, 88.80235604905816, 95.87424822880031, 37.33030866826815, 25.590950988627835, 42.66422899442656, 92.2945980154772, 73.09653492698538, 55.99806387865096, 44.56892546792203, 71.21526939243891, 40.93552364447825, 1.2914183076090158, 78.08095536277723, 45.681786593931704, 80.709851651787, 15.064467022444884, 24.49573646985189, 36.47130118107545, 12.205310346446518, 19.87510490105915, 54.47250323259068, 58.19606306720026, 60.07443357632757, 39.08853783300367, 53.72170976796766, 9.572145067038118, 59.05448090231494, 98.10092734563665, 89.8858945321018, 48.46405532487024, 18.721723746653396, 9.361363013087365, 30.033079809841578, 58.49664935348383, 31.567835799573086, 71.67565975511175, 1.6032056219178137, 50.13889325171065, 50.55013886246209, 94.98643020184157, 27.258395051250915, 6.2017033085311475, 90.77913838958287, 73.77834401962338, 11.530388933545566, 89.87884573067588, 55.74095047019602, 46.92553234142274, 11.242673128015069, 19.28858943204733, 29.81281181686284, 63.262016414302614, 56.346424208715085, 60.07469578369744, 26.774947555802985, 31.35922862541006, 74.38550853318671, 22.660383285826125, 17.014804738419077, 68.70812990132909, 99.79660366757244, 40.19890094875762, 44.73089990526488, 74.0553885253045, 56.512666711710224, 40.46036871587759, 12.63191908840633, 34.07247871459488, 31.303423247902074, 9.455597493589906, 50.073838597963686, 71.15150974366935, 27.135299472631246, 56.42042474262085, 12.947502239486363, 94.94414118131446, 67.03817936693301, 8.456719935485157, 46.766056187104, 72.97571354960334, 51.073430272407464, 83.5709261067437, 70.9047675534972, 87.92763167860545, 80.25870158614829, 66.78164815788953, 45.51742013960223, 40.330204747279396, 41.43631896163167, 80.69837770024812, 18.962013605876148, 21.62728325844866, 6.962500119052672, 36.66612582697265, 90.67467510980254, 15.668692935858342, 85.89403465436322, 2.035527402585746, 67.99730413877315, 35.86074381569436, 42.70886435363778, 29.383749018883787, 90.23062081269182, 55.3841464019759, 79.25240408169866, 37.50739358215382, 9.08422946741162, 1.4438357343704022, 4.075867139185441, 43.08004167348366, 97.4943388176534, 7.874169976384882, 59.71898502173254, 83.34498434647023, 62.894711734916385, 91.82998912260301, 0.2197160085386396, 80.417347084319, 58.86781256611007, 49.147912693558226, 45.27709915743217, 12.83630118109964, 69.51997616904661, 9.305390428987215, 13.595941377557308, 99.74890332456688, 30.800986047450827, 36.45217748129308, 17.43547507915594, 46.65269358702447, 50.46477000150953, 40.85253479211198, 66.58509492436907, 95.74471010645861, 99.98427924035201, 92.59923371121297, 46.272686928721875, 8.968124993153426, 15.677408431416707, 29.51245067115773, 76.13160572843405, 14.31741308424389, 66.78922163389063, 66.76174615685443, 97.84067156913878, 19.037032717075252, 61.47671781400255, 63.145641702374775, 33.71975514933352, 54.69602331683089, 99.13717328549161, 52.33492315832782, 3.9534994823218983, 87.00544480415476, 21.490577348433536, 14.532660362995752, 89.5335620958207, 35.09155236862321, 15.63684473343283, 18.30479291093584, 14.50784958269491, 34.41838999022867, 44.622524670306596, 55.55788227759556, 44.46150636558175, 88.48913234284771, 42.25419175500163, 30.718928877020556, 51.3814339352057, 97.1789655376833, 18.042215050422538, 30.840276055743175, 65.00935682007271, 71.78944656611019, 34.10497758218616, 45.54842525500295, 31.06562982213694, 19.693554967647653, 58.69096382272389, 57.515135570652106, 94.26148369605592, 2.4909402546991033, 38.900110534742126, 98.18545893007214, 95.02991974641252, 62.8956179436347, 83.42778988627194, 78.4047292285954, 27.515993968573348, 72.62776067546223, 67.82692904083522, 33.26589496616701, 74.56025915964572, 50.26942600523257, 93.45339687870957, 14.709081105444909, 67.94463602605873, 8.207571338900465, 7.022201342664736, 83.78329465180849, 52.45929906263138, 56.94040402235472, 71.42062175476798, 56.64040662791465, 48.20735736072028, 51.252944075949515, 18.417459214673528, 26.555352927873045, 27.244484485406804, 91.84252942622896, 12.813912590308762, 78.66942722118732, 56.94562072404591, 61.699818061071475, 55.90594545437876, 19.397504942634537, 71.93377155044952, 65.12883521620047, 23.42911494914125, 14.088068222938531, 79.25243904620972, 91.97835177406279, 41.4471929786764, 19.82461308032476, 49.16053473529721, 30.53265872859666, 16.91971811420331, 39.98058270557778, 63.94374234759701, 1.2500681393600277, 49.096012890898024, 32.34844527548728, 9.648360164684277, 81.70465400277355, 24.266279507114795, 5.405860711620147, 0.5760297016155658, 34.28562353024378, 24.95507315783255, 24.33298681992936, 27.63288404753149, 4.765810112589275, 68.55806560137394, 17.658734455395997, 59.292155001211654, 60.98327362937728, 46.02786856046137, 61.96607694128272, 5.429903118741953, 94.78743146111194, 99.68266184757327, 94.99341936887915, 52.08046229940402, 82.98159905641953, 21.884599787464243, 45.07878497176533, 58.30326591933015, 82.3929078265044, 94.59833493704441, 74.97939826127227, 53.45683780088491, 30.892426925791128, 74.82357978358397, 64.298206662628, 13.327144901439725, 88.93043838494373, 45.75201362169893, 10.84735021027975, 68.6829279648455, 48.490484085588406, 83.43232934171805, 18.231072292747196, 39.73897027367644, 17.9492465912936, 34.85710278404092, 44.0295001165108, 40.734977929913065, 37.04122126052292, 80.5046251830322, 73.80551280681048, 66.68891403007852, 58.71243144267241, 25.811970136387618, 61.839913047569425, 42.196780792543166, 59.46260155270666, 41.74113066130065, 11.922751087050043, 53.32355071285496, 92.34125809546754, 43.43941159982451, 35.7083924602651, 89.9226414678097, 81.09023715291238, 88.38975335556458, 45.25255287682531, 39.22352307525323, 67.7802806713124, 91.56460782881317, 20.718634104635548, 71.86626406582627, 30.411654912176857, 92.49765217707395, 58.45797007738853, 7.333448557608446, 96.6554191399656, 35.82704459719292, 36.77299975940866, 7.91610041293358, 66.43731839941964, 69.4624230743868, 99.09759852341024, 14.794173356972106, 35.603750374522534, 34.71338808747878, 74.30630789004749, 43.77659291958853, 19.26823202042909, 78.37963627128963, 15.874204349832144, 71.23867605688969, 49.097125984513, 98.78525470560298, 92.18789414570311, 81.13397247235908, 24.889344500505274, 47.86099758688728, 70.26374653344205, 53.250567193194655, 34.31112359391124, 89.74546902948141, 27.444644974577372, 43.922570074157086, 75.23821694276707, 31.57754300822183, 6.706901996379388, 20.02362899664022, 47.99722682430237, 87.35475934675715, 65.09916487687977, 82.87387471957646, 25.342860632121823, 5.758121712889929, 32.10895203352217, 55.394248921786485, 10.901343410326891, 26.607602114221695, 0.27307234313768136, 56.23075317238845, 75.53291158474579, 28.278588518226577, 61.52545764893394, 63.664721025351234, 67.57340351984743, 95.03617859681536, 26.03960670451071, 91.97308338994056, 18.649703640409932, 79.72722079175662, 35.97723999963368, 26.314677632723406, 11.57385287128232, 66.42492547616823, 40.77982332936423, 39.545774279906674, 15.535329233346829, 55.086336771848956, 98.53226780065573, 87.74779727010434, 61.855879896416496, 18.97838744490218, 60.81691130595669, 6.403867872919921, 60.06328053697079, 87.344412973398, 45.36616601200958, 30.836468913817082, 68.5351592005746, 40.74422090018997, 20.721746216739746, 11.080938933189643, 97.18679376341971, 56.53820337433899, 70.02197871552926, 90.13802248968868, 69.42076598835479, 43.91145814668162, 96.25520664136751, 57.7698382480369, 95.5085464836434, 55.47116046469074, 34.65319313773616, 28.371746088429393, 58.804319886717515, 15.390543007093992, 7.370629860838673, 34.21960672602775, 16.371538384464934, 12.404382087947486, 99.15608813064732, 44.77664438507464, 63.594402330057406, 13.308272453566449, 48.880825688169594, 50.24654480650914, 95.10549352934216, 80.24821869150695, 50.43688768136745, 99.83670487460053, 21.687806349160567, 86.66270036102652, 63.37781333558854, 13.949834963204577, 51.86845244189499, 9.835327413726269, 22.213982822401157, 50.54714101307047, 25.256426214523252, 76.11205629602316, 71.7714205751767, 71.73118152897166, 51.203363546717576, 26.299199612922898, 5.050158581265574, 12.474633923200152, 3.3514365156106507, 4.131613276945401, 61.39365863045714, 43.9628595460141, 6.913744665812038, 28.76235553372234, 1.994625104982417, 64.0888467037933, 53.208243234845874, 46.12263371876336, 63.06491686472272, 22.670813045119974, 89.1599316032297, 38.12088253732293, 31.018258000179532, 51.80558147031745, 84.53549360617357, 45.186508337366085, 77.28211941620614, 96.65132748237843, 42.3126635543289, 90.19009950417187, 44.316329595182204, 42.77280598122574, 19.796962923069838, 28.04512539823247, 9.319387602550444, 4.554352901242476, 94.59344309566538, 5.99232170673023, 48.64480473022247, 93.89956292765407, 83.0518993493971, 66.66125474955459, 73.9748065830942, 38.11736020343247, 33.39221660220573, 62.89700444750871, 83.19226232834332, 89.42368252698644, 90.10648275336533, 45.7909849204167, 16.32874381431786, 55.76685908529414, 62.907409249147875, 34.46443675210258, 48.78537322574592, 58.49976809549199, 13.852487819553716, 37.30918040157598, 12.8195285761176, 67.78665494825363, 64.97516829791176, 40.91195505840135, 29.34355471572895, 65.25807868664035, 87.61595087562856, 11.669312376698649, 88.70794124362126, 43.749671304948656, 68.60042276034159, 28.659130471416063, 48.964482030856125, 26.897451068942136, 98.9061599147694, 72.1247498745059, 66.91868369025067, 55.663564040511424, 27.910993267684393, 2.5038495430268592, 25.474148161398034, 47.59363679819101, 85.74568186734182, 74.80280561306839, 83.90562132537671, 86.21276030476459, 14.70390886739671, 67.93744571060425, 65.83380446107022, 62.65422957445661, 13.83378992088714, 44.06672113312254, 66.39265043522589, 65.38227436639988, 99.74152745960116, 61.26666639743481, 26.792128588005994, 2.8635479017906973, 22.228977224743385], "radius": [1.00618969961345, 0.8996645885552634, 1.0738203795031076, 0.16542187013190074, 0.860113682353788, 0.8798074118525236, 0.23152563621246586, 1.0791306671731657, 0.6790370940775381, 0.19433246741431098, 0.2660555060944479, 0.3406793615592977, 1.1154415008013774, 0.17086278479657624, 1.4294821427227653, 1.2155536500286688, 1.1569742588056195, 1.340522667784545, 1.4611180029028632, 0.04771489135337231, 0.783272414722629, 0.05096323049354762, 0.27659560815875583, 0.3263426991471634, 0.8184151027417592, 0.18545841452073258, 0.7586186438174656, 0.17269641555256443, 0.6973155040559358, 1.0165858374583534, 1.1564428145587469, 1.0416255275457909, 0.7114229797299145, 0.07458351266682323, 0.33896204796156637, 1.0847519317444463, 1.3340676847544517, 0.5096373797386549, 0.4804826401445584, 0.1978265300502502, 1.4435570245693383, 0.508617295367102, 1.0402703423831792, 0.0587945462724801, 0.29906378016749746, 0.18755511474312186, 0.7392975871001343, 0.1279169432485346, 0.16908461634567895, 0.748087386110583, 1.2215086935822774, 0.6092623160035446, 0.8424248793836115, 1.2015360521244793, 0.2196741214066394, 0.6183803926258898, 1.237731991442202, 1.1058079836769583, 1.447576827365376, 0.17876828722255422, 0.18411582467791826, 0.5424464536767891, 0.9104920117928849, 0.3938398737053433, 0.9705798891849421, 0.7134095889246512, 1.174732225646545, 0.5817055159718272, 0.071586631359912, 1.3830689736830508, 0.11466314159407798, 1.3948705826928811, 1.3329811236692835, 0.6541081251842656, 0.7123959633168795, 0.16508057011695831, 0.9673360255391622, 0.8512494711710152, 0.29294512809913464, 0.23817476135684784, 1.4654500325650763, 1.2099245089478112, 0.6220758651123733, 1.0569057924329315, 1.452759546521992, 0.06021005031001658, 0.4039516785883751, 0.6706113926302502, 0.9707733077966789, 0.04525005837098839, 0.745382801297326, 0.027697487130916965, 1.2742770794022753, 1.3646570716932998, 1.1851566161277143, 0.719741559224267, 1.3320311300966572, 1.040356786965852, 1.2448835548228305, 1.2992320154716228, 0.5053583655501909, 0.8720286234901347, 0.4069105361717672, 0.17007441705717158, 1.2783820070316043, 0.4661346375517078, 0.14383056119449839, 1.108417809188614, 0.8979552622651701, 1.4803921089034002, 1.0417992968413639, 0.004095670818022312, 1.1532057633412545, 0.2025642935332282, 1.1504712820941463, 0.7033755121075853, 0.4081530975251019, 1.3292407196842086, 0.8982283477635119, 0.36124844359729413, 1.1137007265627061, 1.1695981611758512, 0.06705675535951788, 1.3488699480047748, 0.4324592574285394, 1.150702843160845, 1.2621905230134185, 0.8447302297123351, 0.23074433577041953, 1.233468479518145, 0.9902468628630934, 1.1102010695767859, 0.5291616111907925, 1.3227679207192602, 1.1998224573912974, 0.7044388949285829, 0.44935120042950727, 0.5431236163427245, 0.014505781319942845, 1.3859757612331483, 1.0438681598376398, 1.4127955728416801, 0.5021863223024234, 1.294574489020026, 1.3078927474492292, 0.5981853335304116, 0.2860852348784209, 0.10905445736497293, 1.0813177015120028, 0.3831477637910056, 1.2153144552136668, 0.9429567985095, 0.4298080144458992, 1.4628000922328424, 0.16673426886142717, 0.3810617345934341, 1.0068378084940197, 1.4352224314932174, 0.852884396478221, 1.1017032595712943, 0.48953060072905724, 1.247245730301858, 0.2432044253735538, 1.024207565130451, 0.6537687651126902, 1.3065138140648296, 0.12707297152935487, 1.1100484842216278, 0.39468420430822126, 1.0565299493796982, 1.2966068489215612, 0.6472896099590699, 0.6629878733652195, 1.3225860640304599, 0.18299856419950733, 0.6066347034180664, 0.6020941507547999, 0.32061346874683383, 0.7820978964740586, 0.600326734941255, 0.9620529292775339, 1.3098301496332678, 0.9501443510119454, 0.4824315201336936, 0.5085238351795163, 1.075027563249232, 1.4685046339070087, 0.11211124722516935, 0.47520412300483017, 1.203556319488312, 1.014300369641628, 1.025526553162601, 1.0220195717016411, 1.4333571319585954, 0.36031956375051405, 1.300695855573636, 1.118890987627483, 0.3830071736816683, 1.0080606074651042, 0.5588690688411142, 0.6897632149151988, 1.3133069491484919, 1.4191786548904783, 0.8783661156633553, 0.5938189022915115, 0.650375151831336, 0.618194180570738, 0.21242957225029097, 0.1917067557005655, 1.0414109590958658, 0.17956471391496848, 1.4041064529985978, 0.9927107873490424, 1.1186076248526484, 0.23360200614071364, 0.9008025756331921, 1.1428921863872181, 0.08740435743012759, 1.0504335750093223, 0.25354376971247833, 0.043429319777927744, 1.126387868245323, 1.4501501856495258, 1.3061565330071518, 1.38971224577835, 1.0772435488785879, 0.2435121102460996, 1.4821628738978483, 0.5329834060227959, 0.3499732869194978, 0.46616132696341483, 0.8019524201824466, 1.2178759428685417, 0.320308907844559, 1.030123535040038, 1.1396915941970542, 0.9100829901673819, 1.135907442956833, 1.3070040616711567, 0.54804368738935, 0.23079861391320705, 1.0049045459266526, 0.5841372114538615, 0.07748715088072089, 0.07413923043616294, 1.0480304177229958, 0.8940381954743488, 1.2058908749458332, 0.6196340491602026, 0.542353114398243, 0.04118552175582457, 0.6325692926030553, 1.1856212354542732, 0.8410825807768196, 0.5110559016042937, 1.2777345383340404, 0.9890523417363811, 1.3842542687232202, 0.03477011128938634, 0.7063664069374849, 0.2237476253879898, 0.4465356157991833, 1.287803401943263, 1.228910258949067, 1.4741150559978455, 0.09615752174646641, 0.08872191941790747, 0.8307732452676092, 0.8019092775751048, 0.06897551850610645, 1.3848485101471215, 1.0830064332008533, 0.9445161586381092, 1.4169648407179782, 0.4923532866756001, 1.385518514892352, 1.1204073471041898, 1.0791321675750178, 0.12625791315239743, 0.7280774497476854, 0.8934811748698221, 0.16326414658528754, 0.1535671564220949, 0.4420433423878184, 0.5045810171784907, 0.6886298862487166, 0.10140947253962501, 0.5091991680169756, 1.1965975257033916, 1.259738379583107, 0.4006076991264034, 1.3352745227475555, 0.615915080713028, 1.2420458014313152, 1.3492683329272688, 1.3804834508104666, 1.3318334898286004, 1.0190272987860292, 1.3206935442621153, 0.33473944637444114, 0.4507224267183657, 1.4824214306233459, 0.32672476869766637, 0.3927257642862302, 0.8434408585292992, 0.8641001876134708, 0.2057179130159194, 0.457193526466536, 0.7816378068615188, 1.32615325666568, 0.43371032282646216, 1.1579661339306906, 0.383324394391381, 0.7964036898616977, 1.1570288235338486, 1.0381593926425519, 0.008756581528201801, 0.9126041356492249, 1.2691015940556145, 0.15626730162902125, 0.4981155615861616, 0.8404288418360586, 0.9421795467005942, 1.1485095363709648, 0.13598165144153423, 1.1378345622742043, 1.1228119937664192, 0.5525702489731923, 1.1102922965526218, 0.9765818372210691, 0.7945924289880287, 1.1632860646658052, 0.012097155772058166, 1.054417268207275, 1.2232111111784316, 0.5483203136334784, 0.5141435192081275, 1.0920008828578494, 0.5450304110636857, 0.8219340109844042, 0.4297718987325571, 1.320859602838388, 0.595192189129131, 1.3745716056100366, 0.8289387562961387, 1.1111068067907715, 0.7726573297828501, 1.1767430993671413, 1.0850978561776539, 0.017686280157717116, 0.3516598508233281, 0.02228932664366179, 0.34695798827554547, 1.0083372222762148, 0.9805846717441257, 1.2848861808442713, 0.7143588713898503, 1.0852744720883292, 0.2961617711826866, 0.16218476561608242, 1.2939511342510732, 0.7742260187005925, 1.2985513335436907, 1.239522716619072, 1.333513717899848, 1.4095992211066277, 0.36210421116957214, 0.045771231665645395, 1.0729935048744408, 0.37354582319924856, 0.12440365336002995, 0.35228027060476097, 1.0068328542316478, 1.2773370271689033, 0.11190200260964278, 0.9053367425684367, 0.7737192630802293, 0.3252885513579131, 0.07260607845972089, 0.14413523235329845, 0.855897987805565, 0.3875780448796545, 0.5637122912581701, 0.7385234910157819, 0.6723540289196911, 1.342456212971012, 0.5515370197711, 1.4624785157667453, 0.8253687156549816, 0.22458442423242203, 0.39435892896835023, 0.7831941577342572, 0.9830462892677715, 1.163243900198902, 1.3477074576773465, 1.3495153846183987, 1.2907568314014173, 1.3741366600014757, 1.2537885677739615, 0.5317587428100929, 1.112796990818447, 1.346707282395267, 0.2908201236297425, 0.4164569765919163, 0.6229053503453731, 0.046581425579185765, 0.05090848433350165, 0.3461134580124253, 0.7318223527224699, 0.37485665295047504, 1.105791949194084, 1.218023735043126, 0.3375748125422776, 0.7726122815411126, 0.971360447749269, 1.4401972138085746, 0.07854316689787022, 0.14501339232687832, 1.445500904644597, 0.21104168029480463, 0.936688024340072, 1.4571508997595455, 0.46648177521244816, 0.8559532969148042, 0.39606700966512093, 0.4931054681026958, 0.6599579011369208, 0.8914132587054403, 1.380860461621773, 1.1382893614620082, 0.6216454725294924, 0.24308938608865838, 0.37256697420643053, 0.2069592010181947, 0.578287799722455, 0.7276864168159932, 1.3731219115606441, 0.14160070407238728, 0.5335366062960599, 0.12825452736878673, 0.6369096218000603, 0.09033157636228661, 0.015368342856347472, 0.6942372653992376, 0.20148784513973184, 0.8031926719911329, 0.6046245407619426, 0.023455238465266315, 1.3079226994166235, 0.6940393582419817, 0.44409926554061924, 1.0126504817438944, 0.8313933570623762, 1.3265234493810683, 0.1804431618593602, 0.6485687074779133, 0.7519444601376197, 1.253791253750379, 0.969376321816223, 1.1194041681187867, 1.3401135211725816, 1.3357907482764255, 1.2871409459237415, 1.012831258604042, 0.2943740173939707, 0.7474606587621258, 0.913830011135858, 0.07552244679313891, 0.14645075054960566, 0.8129809889356299, 0.0009089552411536972, 0.72569930078038, 1.366515733168061, 1.0760810758682533, 0.5129631464044433, 1.0657195392993695, 1.3676563535654989, 0.9354170243296687, 0.362663550638686, 0.35360095281432796, 0.12864369608971138, 1.3410011956493078, 0.3839463782977334, 1.2468108320407096, 0.8339769264299475, 1.1220643391151555, 0.78767664685793, 1.224458442239463, 0.518187540515689, 1.048315250832314, 0.6268959302666679, 1.060175687862686, 1.3616758135939673, 1.4663704587549802, 1.2284128915679533, 1.3754088933739275, 0.26941362732169255, 0.2050913490783114, 0.26326231981788584, 1.2095670677894936, 0.07236547491877776, 1.4704163642779229, 0.2811654665675429, 0.1493656469459756, 0.6098859553917594, 0.4401262645904074, 0.8685966718613826, 0.5465664454167749, 0.5261574939830208, 1.4930841467491336, 0.7267835093356148, 1.1430088507399205, 0.33042231734465705, 1.2696206516166737, 1.3522023811877115, 0.3957967666815379, 0.9276379042836809, 0.9213054911844785, 1.3822532286748117, 1.1490771307783023, 1.0211810398839707, 0.518172137749398, 1.3068374706223558, 0.7413958706953497, 0.7508775376608023, 0.2367660335191421, 0.5931138782066194, 0.3016393114224509, 0.2758976283139009, 1.0138918266945833, 1.4203955846987935, 1.0689565465669553, 1.4736713091930898, 0.9108813701738594, 0.9400567306983534, 0.22647808162837219, 0.7114443622173807, 0.9321203206826247, 1.39345188435129, 0.7506968596410724, 0.2861382842836249, 1.3542770098631167, 1.4927555328617057, 0.10644995827652226, 1.073203552018624, 0.8621119311118618, 0.7626171764023266, 0.6008108060657049, 0.8458048708350472, 1.141032340656609, 0.30634896759692787, 0.6492364922906442, 1.2114891531692624, 0.5207286354608741, 1.3510330047462429, 0.5513901088401271, 1.322119718462875, 1.0506424452533087, 1.427246219994635, 0.24124754078454114, 0.7865327236005376, 1.2960236178838047, 1.1106930592217243, 0.03842557802272428, 0.1395768074910791, 1.2734918840659113, 0.060046755354537906, 1.4465168599698774, 1.3437128291970215, 0.231708397301232, 0.8754953376062815, 0.8222059506134257, 0.5923677402329774, 0.6741236089276949, 0.04276769388802537, 0.4794863383093289, 0.744642933357941, 0.8063034465684574, 0.4276700704569196, 0.8935409388533908, 0.1349531061312848, 0.309154325423471, 0.6005588934596705, 0.8145169605097892, 1.4954005528903203, 0.11206072683026302, 0.14848412662117344, 0.3021870616532762, 0.7418172254621431, 1.0785532428177194, 0.6415595516818995, 0.7744807924773619, 1.3570020393583004, 0.7731858903929294, 0.13087054784111218, 0.577917735391141, 1.3470831492826623, 1.3467332216240204, 1.0132132710599855, 0.1041378198400249, 1.4267381270265505, 0.4495536177753008, 1.3345544393421511, 0.7412064427906893, 0.6818772071142777, 0.878817828639044, 0.7339326329116931, 0.6428308859382021, 1.2834467170400967, 0.47230542408057913, 0.9287222641643698, 0.26122650571970346, 1.1659746547577639, 0.7559111224154691, 0.638730167852155, 0.4523271287788795, 0.7422906742293436, 1.0951215521378166, 0.7059595274790751, 1.4644289666723866, 1.397478866442005, 0.5272408976745389, 1.3872676146386684, 0.892582279552411, 1.1779422820113814, 0.2140008373625692, 1.3786827433730713, 0.09882069467121163, 1.1808305877607965, 0.910028286998331, 0.41485844324260535, 0.9256939544822439, 1.165526846284662, 1.3174808953446902, 0.8212445993385302, 0.1468818194620602, 1.4008277262886706, 0.9774513946491354, 1.311901452716657, 0.045006847664213034, 0.8591413002303947, 0.12215034894030968, 0.9247469375489554, 0.5938224504435019, 0.5262463809603034, 1.0630255043377372, 1.049251116208154, 0.8940085015990613, 0.6991415295702155, 0.8556680348639426, 1.4539133262227244, 0.008815286425962576, 0.5298285763084889, 0.31729812371083715, 0.45319184984562916, 0.7037018811819358, 1.199631718760704, 0.9273943985152407, 1.3429909805085978, 1.2775737204811402, 1.1721912634592182, 0.9408704316607436, 0.11567968345207857, 0.443424940550689, 1.082685052277086, 0.28431201409839696, 0.8564598611590356, 0.8336789060699006, 1.330994241930496, 1.4860458046628207, 0.7238001261313403, 1.3058021319977722, 0.04434885710674141, 1.2893417340109687, 0.5421642568334294, 0.2472701325235307, 1.188769149488836, 0.4104107740684305, 0.7230365987931933, 0.4999468297672654, 0.5412602467010368, 0.41771093479256755, 1.49021439130582, 0.21896778895933544, 0.5798301536081503, 1.3777979884632519, 1.3388123340593512, 0.29601426613854037, 0.24750067100264284, 1.1889479488733712, 0.6220293601029083, 0.03279435904990269, 1.3260837984549099, 0.1086801518449455, 1.2099588664222283, 1.484860386849289, 1.2818800068927478, 0.4417462240350659, 1.1353944015072144, 0.3969150572164739, 1.0584611330549638, 0.4897978500637117, 0.48241121684915833, 1.0542149554164695, 0.8853815233319502, 0.8600991960974698, 0.6352202118317507, 1.0074783459266414, 0.4505537107273757, 1.3238438928143639, 0.34746235832818084, 1.40206135232655, 0.5904080373859337, 1.1329498767527282, 0.9163053487857178, 0.600356604896993, 0.6698925988352471, 1.139848021733636, 0.04007805475252785, 1.3768240540092171, 0.2802299724890373, 0.5498770555143864, 1.152232296383226, 1.2889854486767456, 1.0461970040543207, 0.4889729599988541, 1.0124697441278543, 0.7596500196297473, 0.05340882932837937, 0.4066107066444011, 0.3290473690621473, 0.9367029136211308, 0.5276158410031401, 1.3665446190137072, 0.8431729708891438, 0.6026513571436127, 1.3358078960492799, 0.13237995703491012, 0.3078129290864565, 1.3495134491260221, 0.8202904148676041, 0.4318065694686768, 1.4827533292378634, 0.6978087045987926, 1.3753475864709839, 1.1897264982769244, 1.400331676259766, 0.5110619824975715, 1.4111777238599659, 0.06448444393734187, 0.05364732037921682, 0.3508502672181626, 0.6211907081086305, 1.2683489603821554, 0.2489322542423314, 1.1685640318958015, 0.8520292821444084, 0.5840485644358987, 1.2632375038354031, 0.2527908451571382, 0.1425169727552727, 1.181300059055652, 0.1510948752752308, 0.9684745500733214, 0.1422671156576903, 0.4117426322685447, 1.279817307353258, 1.4680722687995975, 0.39739586445482555, 1.1123689741386873, 0.5070742490732738, 0.08955181369221754, 0.282290959670363, 0.8113146364124171, 0.6047939478865807, 1.072127714169764, 0.3360251229410483, 0.131292272531643, 0.94173478078739, 0.23781897069535474, 0.1256188722153601, 0.7020466222138951, 0.023817199759048058, 1.0187565626193669, 0.44967919666799006, 0.8834082521003974, 1.158770112445762, 0.7540075135713976, 0.288798314449256, 0.607033595975289, 0.3918434973673746, 1.303237168830726, 1.1003947125092477, 0.6812973217174468, 0.320246272619835, 1.4946758059166294, 0.8690282325306009, 1.2388840517234367, 0.8952749865884628, 0.7350328150842622, 0.8846042164846875, 0.8672019735939756, 0.6081256154049708, 0.1315099148186591, 0.6386511436212068, 0.5604676347413902, 0.09696551054377067, 0.9078820921774554, 0.32898952131641707, 0.6179629178944113, 0.6189631621268663, 1.3552698257369125, 0.3454880763401055, 1.2959341748693873, 0.08550863527307417, 0.028370594436934016, 0.5569440941904136, 0.6403553564773707, 1.0281850741851306, 0.08123455773928939, 0.2218517634380443, 1.418995489797392, 0.31647099146313334, 1.0522142628631952, 0.37486351584989097, 1.3572949744938985, 0.31443464455428705, 1.387663310808496, 0.8908404231167314, 1.3445686214059935, 0.5238274084888064, 1.300716029449864, 0.7598824630781619, 1.0877478301922172, 0.8006402389318334, 0.17573082196650103, 0.6665366215309125, 1.1900814310203112, 1.047537815140555, 0.23137560188470507, 0.5825394927830707, 0.26354619735076745, 0.6794396278868947, 0.03733528987563095, 1.00795477014414, 1.1371004624246956, 1.4803983260298212, 0.5912620592252599, 0.7931551188049304, 0.15502875981085973, 0.991067975057707, 0.12945414224303264, 1.2404905508640265, 0.9416805830394024, 0.03140049333221945, 0.8101270053456509, 0.4702944556262194, 0.8323672167042477, 0.6763219476963082, 1.1597423572833283, 1.4824305631241033, 1.4957550043841774, 1.1367637526965437, 1.2159060698961146, 0.810485760386287, 0.01852603367690203, 0.9603036746400474, 1.4997074030662387, 0.5091597382931624, 0.8179043264144625, 0.8757550463369357, 0.5179832101605658, 0.032501698072728014, 0.847781633511301, 0.42510638229113606, 0.3350052690375858, 0.4320443595411081, 0.3959559969269382, 0.28427649710849867, 0.03896840774382693, 0.6155402042053602, 1.0423948289637774, 0.0615529311904186, 1.3060640977239828, 0.5716617731431813, 0.39224507889189175, 0.5533353916277934, 1.251734713967708, 1.2161528116682434, 0.47206340140407643, 1.004503546981851, 0.9423366431688078, 1.3658878605856901, 0.012361828033377875, 0.765612985695036, 0.7092262482588656, 0.2521798245803989, 0.3451434589688466, 1.1542694449170257, 0.8621580595241041, 0.9364853636361317, 1.031620441437179, 0.8903286753255628, 1.0353288412348178, 0.40244489496910746, 1.0626770106035845, 0.4694665676170975, 1.3255844898715277, 1.2762231839422995, 0.7501272826689445, 0.6848031536152371, 0.6236163919902962, 1.1689355346121422, 0.11761324161271536, 0.24348612696056476, 1.2819032423370507, 1.0451396433240951, 1.006966091279953, 0.7393919635974235, 0.5616741305084176, 1.3742081975894767, 0.38058317998031915, 0.8010268309726114, 0.49922564900231703, 0.9131112274057767, 0.06822187299619975, 0.4722619542457058, 0.3071517476000973, 0.7296587744830823, 1.4865833037281266, 0.9865348296410409, 0.03582687051033401, 1.4265904280531478, 0.31093957652766047, 0.9603110240102865, 0.07694720951475797, 0.2199954154859412, 0.841859244992877, 0.8077662673920893, 0.695260984748405, 1.174953786833673, 0.6003622451448603, 1.1708228270133882, 0.4322908303238961, 0.2802979919244276, 0.3100861296854376, 0.26946018262133126, 0.3808685243888527, 1.2578425565603915, 1.126877663891835, 0.009132556143212955, 1.1735124786625832, 1.3722225671839041, 0.001204319027828915, 1.2321316492585235, 1.2628414172184794, 0.2020291976941287, 1.391088457235931, 0.8956405753245023, 1.265924409657362, 0.08643338256761485, 0.1568019809873642, 0.047878785542130986, 1.058957584764062, 1.3736969071693896, 1.0159418985926019, 1.1616274232078279, 1.0777578749569985, 0.33637155016715087, 0.6062892585955588, 0.9585964175051842, 1.1806811548189524, 1.2154283383552773, 0.984366464238764, 0.8197109779687733, 1.2518969663757114, 1.242932449741601, 1.415376815225426, 0.4600986537708806, 1.020748142075591, 1.0951089270098484, 1.1278053535726151, 0.8349430077539906, 0.20949926694244042, 0.013296304815883342, 1.3475269717942653, 0.5524685078530414, 0.9423010133778474, 1.2944298399522398, 0.16005303964045986, 1.26965644393646, 0.3098741542855462, 0.0121263454966411, 1.2957024748306591, 0.045745419920085795, 0.483426768148521, 0.4546845817331628, 0.473446881825552, 0.031401769541406443, 1.0357042242726737, 0.03638143468174776, 1.3684828056273803, 0.05726821326703274, 0.31082780886662253, 0.6888040375030728, 0.19496815722574545, 0.27919037951503756, 0.09605387189503783, 0.2140919803946676, 1.3401600314746247, 1.120956255697036, 0.41387402880389684, 0.2580251559771106, 0.1688906847230251, 0.4014047616919052, 1.2846801935081584, 0.5398411848523197, 1.0342901977084105, 0.8511206286042912, 0.022432519653251604, 0.7644963749000925, 0.22139692527917232, 0.7233618274161899, 0.9137149571497637, 0.1308033480333763, 0.3860455425967829, 0.8003014660728586, 0.058536593014468286, 0.9929452602437344, 1.0570132687285851, 0.8608496725324364, 0.8173961902225952, 0.660195336230748, 1.4041198712029137, 0.5526546933501109, 0.43552148303746063, 1.0009440476019356, 1.3148747986778468, 1.3524485641926178, 0.4664651316197628, 0.2681558317899291, 1.4171730965275844, 0.5817126665490084, 0.6882003239698022, 0.9377259107972284, 0.4139342640645722, 0.40385467630656247, 0.8972508798836544, 1.085205925818463, 0.003343292158449418, 0.39031351825505484, 0.9068831466394438, 1.0387842291211742, 0.04850715644130654, 0.6300306348919531, 1.1115781316336268, 0.9268874386061849, 1.2018207686857616, 0.9746466011458919, 0.40633430142877824, 1.1276339937607753, 0.3408756697724116, 0.9914443172654198, 0.49259690682174284, 1.187784359108487, 1.2319895008443749, 0.23389519504992806, 0.21752054646724228, 1.4364315760186355, 1.4952510877227974, 0.7959649554520564, 0.22830027852295587, 0.94054288935951, 0.4767165959816872, 0.3319796963558671, 1.4622227036146809, 1.377149306747078, 0.48609699099556813, 1.0844208486926463, 0.6774511862093581, 0.5134085862035729, 1.0235972738608274, 0.09754824488549435, 0.1029550032557302, 0.22276437884559996, 0.9327640951944587, 0.7144457313448952, 0.41913038139005504, 0.9960213489637999, 0.7388131283449967, 1.0013089340749275, 1.4896843471677066, 1.2205398654863724, 1.073917105538488, 0.5166747274795429, 0.7628977712833105, 1.2485667349965972, 0.9347697680891399, 0.20903699817439747, 0.8668960111011329, 0.30948730312827805, 0.5662802107958799, 0.06435252084552406, 0.7064944741167125, 0.09524573518638757, 1.2727126115236875, 0.006875792046179385, 0.9505843988148563, 0.0706249799837852, 0.9672975823898722, 1.3618825278662137, 0.43079978881499537, 1.0439523870852656, 1.1087177900078204, 0.7784030653963772, 0.43182721960383647, 1.3317510763226168, 0.8604296885049618, 1.4357917391241068, 0.7900877865805085, 0.690896084822469, 0.0596649156348783, 0.79592044049355, 0.2012166133053767, 1.3447870775882167, 0.22206447636825832, 0.3115396066977921, 1.216677599487741, 0.4047909772929562, 0.570221727406804, 1.4089451886735482, 0.8887464180391161, 0.9906849111879719, 1.4211576200662401, 0.8409089047094848, 0.6522541947154026, 1.1303075352499345, 1.3143044833596853, 0.8679177534235787, 0.23692010063104868, 1.4375085180197924, 0.5389535044189786, 1.0435703464596862, 0.7817368012955574, 1.4955149384406605, 1.089703324411667, 0.6118694566127227, 0.5644313200855657, 0.24596538735780998, 0.9947609096333441, 0.5854506283467634, 1.2995313727000561, 0.025669778134992605, 0.8739693017707681, 0.002012509980470145, 1.0823448861489269, 1.4712715392094005, 1.3809698119850908, 1.1776896832480686, 0.5713251268530597, 0.1075172714147069, 0.6962913291674027, 1.228664250568901, 0.8184795461745928, 1.0754635314222494, 1.3669080288627742, 0.7920544166770574, 0.7774005895022184, 0.044345771861251326, 0.015259645135280442, 0.7138637340937131, 0.5700371585365815, 0.6170724084864516, 0.9149421644280945, 1.1230859893434637, 0.35205802213609677, 0.7969808616748685, 0.02309258117067292, 1.360410297212704, 0.4424263009467887, 0.7437764005553507, 0.23281998281313487, 1.1468461510580303, 0.9136834955760391, 0.9258120810042767, 0.7400651199149733, 0.05746842726621809, 1.4530659583306342, 1.227980742977579, 0.5159577322381296, 0.9330947267609477, 0.18251396066524006, 0.530227781585129, 0.23696760544833556, 0.3376178160596232, 0.25904051784830645, 0.31503963706595056, 0.4345878058124642, 1.2775755773800552, 0.7425049027969661, 0.3036910567582267, 1.2207906958650263, 1.0808407396097155, 0.7461890058712679, 1.1459723513869473, 0.24356304458326106, 1.424081352606814, 0.7169477783486954, 0.10668620885485236, 1.0572368864780455, 0.8742870135807367, 1.1681125529035554, 1.13324377888977, 0.9422045015665634, 1.2516213559281928, 0.3906325180183195, 1.2505738823686114, 0.03179634762940803, 0.5702065261518248, 0.3817685927082246, 1.097743409908296, 1.1090447005085515, 0.5167776789533662, 0.6485292778264168, 0.9375347552176618, 0.31508593067999974, 0.8117221925230198, 0.16382513976893437, 0.8293070334484631, 0.07469820466082994, 0.7398071679114242, 1.4443711531965884, 1.2140059942334582, 1.0124056930128948, 0.9846744269062786, 1.001110034961869, 0.07779730337470386, 1.3520554553494206, 1.1988624089847475, 0.2450475726388972, 0.38865385072257647, 1.137254028976251, 0.37112209958062126, 0.0708592403874529, 1.4137111328987284, 0.08312481655416115, 1.3284270917912446, 1.1134601016486543, 1.4369940576100837, 0.7812399215449228, 0.5206282421550549, 0.5481475242408131, 0.506966704245237, 1.369621474347122, 0.14568962792518042, 0.22291115957336982, 0.9792290860419552, 0.026659048914566552, 1.3210163238565498, 0.17016414004393648, 0.39579327831337957, 1.2409478486985197, 1.0437552048174041, 0.3855809531249322, 0.32601939216348824, 0.09303773417130484, 0.3131834845998164, 1.4912185739660804, 0.6741438279047285, 0.47737189474582326, 0.8610166748372392, 0.9231468021925118, 0.6383095555445276, 1.213219294830802, 0.018059374915206816, 0.9698343688772408, 0.09402846507840384, 1.346082520271265, 0.5838234420426404, 0.48148459016375456, 1.0124300734549954, 0.8949641674821321, 0.35299143900242275, 0.23854645893865056, 1.0560046188214751, 1.1989903603956, 0.386385280920328, 0.605721814744922, 0.9893428882455135, 0.6638582080802462, 0.7814646311371017, 1.0507533417650414, 0.014437120010037496, 0.9962518321800944, 0.44712351924555965, 0.6703019110467946, 1.3855878295393131, 0.11318083389067973, 0.029652712844061124, 1.1288549940882007, 1.0624788896875372, 0.5169093434013086, 0.572692436053586, 0.6292585256160198, 0.46165995985982666, 1.1758810413634742, 0.21540451492158552, 0.9177035729564899, 1.4041800237639195, 1.085717855480507, 0.035468688337955245, 1.1032290458177856, 0.4696493479476253, 0.8885672193996128, 1.1675392514788732, 0.45292089508453554, 1.4320301009539267, 0.6970045661103301, 0.3170703896067006, 0.20442221729206556, 1.35442913538644, 1.3046705528656102, 1.220639377878555, 1.1384012394919811, 1.4737152224808876, 0.1985153073015834, 0.526253740727232, 0.4482728592433438, 1.3498619532004101, 0.09334056555630127, 0.881070081544361, 0.16676252719945922, 0.5214872790784972, 0.05088122956053265, 0.061254445521641054, 1.2756902271315838, 0.5218007399344511, 1.4716678002063759, 0.9444211133113969, 0.3082548432311095, 1.1007307768655723, 1.361855890957604, 1.3038763871172054, 1.149685962995891, 1.4613407036375232, 1.0550197577919498, 0.8308209598591592, 1.2472593264633918, 0.8451702392751688, 0.19722072973797228, 0.9127480728624672, 0.9523771430469817, 0.27950277639540577, 0.7979269722033285, 0.9777471766915615, 1.1557166259887295, 0.9988227683491269, 0.9156860365693551, 0.5181211950141884, 0.5791366327073534, 0.4044819945939288, 0.5794148720272521, 0.5698175705086169, 0.7367825268721065, 0.7655236304483757, 0.3049744019776096, 0.9314278470254553, 0.5868174481559217, 1.4526774643621443, 1.1633859559701287, 0.4154211959575835, 0.004032941032135751, 1.0129301919408058, 0.4958102630317343, 1.2402975808095384, 0.18341389120547752, 1.2907003397596486, 1.0027323808750204, 1.1970663371266164, 0.5483484361241697, 1.3255033244104613, 1.2114805563678344, 0.13549407328777058, 1.1722752851352614, 1.3254915201170867, 0.6873420125327274, 0.43375017769714785, 1.122408958983721, 0.22965263630403027, 0.6025449538124328, 1.1964731085957647, 1.17542700440858, 1.205544828667572, 1.0395239461596575, 0.3889884287692334, 1.1625725596140986, 0.00430374506277259, 0.13009690843593574, 0.28314914737773067, 0.7726914985121089, 0.013831023320098335, 1.1915619784220566, 0.19374618077271571, 0.3974938477105135, 0.2222524371392416, 0.421667351163513, 0.9631873154687078, 0.8858152305774252, 0.047692290228367795, 0.0011691763677189604, 0.39983978918729957, 1.2197440905790975, 0.375270907514241, 0.4716203845104718, 1.2666090638108711, 0.820956396172658, 0.193514386813105, 1.4508808898330359, 1.3302043413057432, 1.1588793332190788, 0.8762360861287779, 0.25828093949405745, 1.156239345258074, 0.12692586489201535, 0.29349612335194875, 0.9487366349570204, 0.45406551643864557, 0.3616593882293549, 0.25418756861831077, 0.5593428080554108, 1.1862351329885346, 1.4894250162351257, 0.41426253881209796, 0.2512797454230162, 1.4820096661006394, 0.13288994310806862, 0.05631881179780229, 0.6295049598160709, 0.18538326182414155, 0.08706257572516779, 0.7105598744921382, 0.3572851263516968, 1.1204692164606291, 0.22161406573429288, 0.582080950432446, 0.904184839360297, 0.45575750266433956, 1.275236200743643, 0.7081859788729719, 1.1432192326243278, 0.5955117874671074, 0.05762479692930922, 0.5231163989363274, 1.0056777156691348, 0.6215508111188801, 1.1468300213246154, 0.2734684697601097, 0.11550720521296354, 0.13933777850135987, 1.3683010068471286, 0.9040521655942468, 0.7514874646657272, 0.35020044722017396, 0.1432514175365978, 0.6779918630072459, 0.18943712412678965, 1.1487902032831125, 0.6370552161548946, 0.7725701073705658, 0.7712368110348109, 0.45418422526295116, 0.36384829269523883, 0.03119313215161057, 0.8185865880709495, 0.12136712985419357, 0.6962846039118775, 0.15649744874889537, 1.2792264540463303, 0.7222890162477736, 1.4166536925545394, 0.34557675398819426, 0.168657026744075, 0.5176282390188149, 1.1456782387377458, 1.0093524611009652, 0.9534332173173133, 0.5181007971911782, 0.6530815082821111, 0.9633357269657556, 0.7717797428499411, 1.0722251010950121, 0.3951411302598283, 1.3917259740364947, 0.11839286418213335, 0.9105174048175597, 0.3950218064119581, 0.6714735174497666, 0.6535573831808583, 1.2091102160846727, 1.067988339169258, 0.42166495057953524, 0.051215044831570744, 0.5418592908414654, 0.16804910591583777, 1.3870889733708065, 0.1545117239761895, 0.9892476220763495, 1.0266874966387056, 1.0723539911851803, 1.392052032298634, 1.149952020638024, 1.0537890286804728, 0.9235846926713618, 1.2612422404349686, 0.58504347357927, 0.478043019063197, 0.2687227521564023, 0.20049569957776026, 0.42908480282930667, 1.1813927413030125, 0.3666109291996534, 1.3647450116309474, 1.0084774593405057, 0.2981017283179224, 0.3181504123930485, 0.03102123371219978, 0.4629437533987397, 0.7719307311189532, 0.9637501203935837, 0.010198406952475814, 1.4145350030536799, 0.25964190388943426, 0.723177067980719, 1.153241508113729, 1.3836271373348317, 0.3162190992715223, 0.7077769040948227, 1.2672170641248663, 0.8190730627832301, 1.0950298016136744, 0.34424932645280854, 0.23114397615577276, 1.4891206680417355, 1.3174784281993324, 0.009415767556853805, 1.008149969397048, 0.49758169332117347, 0.3240460586611247, 0.9782886379403162, 0.7258677617781633, 0.4174192403953749, 0.8406568938802874, 1.2884000637873945, 0.4475666225574996, 1.3068037495847264, 0.6470793609716436, 0.2541291554262636, 0.052473656872467356, 0.525858656622942, 0.8133927871206156, 1.3342833945356076, 1.4129256099512384, 1.1750508172280913, 1.2359853457398176, 1.2459296724756568, 0.6451174182210144, 0.12200206350437992, 0.2734413852733693, 0.3047538089984066, 0.7227674159379042, 0.05966820664115763, 0.03932070282370237, 0.7587956366862725, 0.5522780177847534, 1.010248843613958, 0.5227695724274072, 0.5129377363612426, 0.12002591548990299, 0.9713115121422304, 0.8111034249758131, 0.0621012038195527, 0.7464523810705403, 1.4950869439698098, 1.1617729454816814, 0.7408194191397184, 0.7513757322924455, 0.7928093826595302, 1.2484434840137726, 0.2956723031389564, 0.14029834428273008, 0.5851416021061486, 0.37437249099947323, 0.26449153923197033, 0.8794846730320872, 0.17128026885200098, 1.0896114692701808, 0.06374052366221666, 0.7206397992921548, 0.3888685671924247, 0.3535717366925373, 0.6224094363910746, 0.13219835539053465, 0.39499177779991734, 1.1404724530155592, 0.8552389593147607, 1.0677492066682952, 0.5459573133214974, 0.5922442595463693, 0.6081907444995023, 1.1650488047985939, 0.6676289528344923, 0.7407423570472256, 1.1784544113377744, 0.9496009883008655, 0.6332551072747912, 1.4156494693815738, 0.23454855672841057, 1.3041643128258955, 0.6688579365354439, 0.09397621199838113, 0.773459820977019, 0.5671869323441456, 1.4987390672060779, 0.757267438564024, 1.3575041038453626, 0.10387548365612104, 0.7152639862634553, 1.368775072192594, 0.6715400129999317, 0.3816757617028091, 0.7591733990786931, 0.015367993316522555, 0.4146982984257706, 1.2093161873562295, 1.4864967488644112, 0.5572279835117134, 1.2678591423780583, 0.1849117305394018, 0.7846700655249668, 0.6785459008794299, 1.0795431089978809, 0.9381902579479748, 0.6586496516288755, 0.6931927670044977, 0.25042305851316626, 0.28170097269259226, 0.32691695875645926, 1.3186796243443857, 1.4143155382206467, 0.029687017606553956, 0.09760900551869867, 1.1317619696434782, 1.2258458203821045, 0.43479442732666995, 1.039437665583389, 0.9436941221129402, 0.09778778424135609, 0.5615480512776007, 0.5374088891814419, 1.1989044449294495, 1.0710486978434806, 1.3666243610216224, 1.2275675283271443, 0.5576295994161402, 1.3428524570846083, 0.7721098077218226, 1.0806450220641182, 0.6166116197490896, 0.5608994714137148, 1.240903096247594, 1.1792063588541208, 0.3529383613720697, 1.0150161428645554, 1.02351350763988, 0.08886585375009526, 1.1919341236468486, 1.4622143194912378, 1.2050037008564776, 1.2979812736758511, 1.2552373085499466, 0.8867731302181519, 1.1621406722894387, 0.8059623718640524, 1.298868227806472, 0.2391590647682793, 1.1062892387971583, 0.09960760538059032, 1.4834893538411116, 0.9713515133974073, 0.011957992504120052, 1.2552777215251252, 0.19224549293328613, 0.3092038320699959, 0.04974851586603246, 0.14444535041619028, 0.06658371110578021, 0.288240633677879, 0.2634783545851476, 0.5028719208482525, 1.0823667899397342, 1.0410614496566153, 0.5381312334523918, 0.40015358028332354, 0.914653215202097, 0.4321649065989679, 0.1367439775597023, 1.0832430751435769, 0.47167060389919196, 0.7887061052938612, 0.8433683671818031, 0.7082249063233197, 0.8644171690694513, 0.8719062017068463, 0.7489533416374843, 0.9126136319451678, 1.0511008510260489, 1.0660180533322792, 0.36345067438660833, 0.4537483062200557, 0.48306384377149925, 0.4151175294308741, 0.10434831035747627, 1.3879040489210606, 0.058560912487625905, 1.2091138002387134, 0.36094311395278195, 0.24393046468555368, 1.2419501144221903, 1.032310569208567, 1.2661360027374222, 0.7700258868921707, 1.1501001025148092, 0.8181469645282007, 0.6233539466974042, 0.1434396811295066, 0.5930851249290443, 0.5154299930369335, 0.9958599172697903, 0.7451911477235976, 0.9212447444859286, 0.7839190170841327, 0.11503149641172372, 1.4522296843958045, 0.4788554689607002, 1.3726164634744848, 0.35122755431225733, 1.2834036556131823, 0.4050082926131895, 0.7876625645983926, 1.0757005962204533, 1.341966330480202, 1.3383574479132347, 0.8602516782445935, 1.1036871373087633, 0.15927641365150697, 1.4525242151838331, 1.173897858552826, 1.334473005933053, 0.22446421060770183, 0.1619770423057142, 0.299078712910823, 1.4242602140847702, 0.7017013154478904, 0.2029968783708448, 1.4315885092904537, 1.308820842682015, 1.2034816706045302, 1.0273951270434296, 0.6961496505370284, 1.086754456602621, 0.9788381827038991, 0.6833643878078491, 0.8144492293261423, 0.4315531370438143, 0.6114652619444452, 1.2604045213563975, 0.17664306216364595, 0.723791220047308, 1.3365051222918374, 0.5475332786921061, 0.13952625968852111, 0.6991793675075327, 0.7676310104992341, 0.23077342518232813, 1.1315375400725094, 1.1842744084210093, 0.5041691976875861, 0.687977171235086, 0.5888002220542048, 0.6075603470226058, 0.8627829099530093, 0.47046218600492096, 0.35059367230227106, 1.4843198723437847, 1.0882116154193837, 1.4943426871211005, 0.5970932052053949, 1.1987464533003993, 0.4619537436771695, 0.8229765498123955, 0.20403207616486457, 0.2843250524629858, 0.14272548128678636, 1.0034501587635187, 0.3877270789820383, 1.1252891494424238, 0.691178661074161, 0.7898044790575152, 0.18587969591334585, 0.5276194174468041, 1.3415483900598273, 0.7965735100607163, 0.9709563794615832, 1.173035176342668, 0.8419086334910324, 1.2582031262200912, 0.2803572232136488, 0.16403545949293302, 0.5810268790283737, 1.1167136093045733, 1.386019513881229, 1.4037145541840674, 1.2213970078788077, 0.5234146593474902, 0.4561718150884985, 1.4845547008028266, 0.5494373705784519, 1.2689566792159634, 1.0884118983000395, 0.6404430065661554, 0.5877707668542953, 0.2791290882469409, 1.4560313206993671, 1.3491104413487414, 0.4985935504321884, 1.2261232348151632, 0.8469753697412364, 0.969637465943525, 0.062306665045187226, 0.17999290442850813, 1.1186975106052999, 0.28190214869369523, 0.15466021841223715, 0.3796423969990733, 1.021830780100344, 0.578621080616794, 1.356198135939908, 0.46379382168823835, 1.1243801855704327, 1.0922546270213191, 0.47791324864490664, 0.0982146351328666, 0.8781451199300421, 0.09939623851373125, 0.4978044490572949, 1.3234137595791668, 0.09666996767790847, 0.19273304128347002, 0.9335536899415493, 0.9743527810709203, 1.42776709877213, 0.3396078126449219, 1.2942823413206894, 0.9213921494357473, 0.5153669173651563, 0.6424660867861137, 0.013921204288398936, 1.1822092024980861, 0.22236266691502787, 0.16355179462072117, 1.3779854159725113, 1.121603212298403, 0.9956694495642091, 0.3079451844830512, 0.7330615602129047, 0.6607227820401995, 0.44448073177808517, 1.1195625714355546, 1.1244612159244551, 0.5350431633712609, 0.1986761109450892, 0.4309467024977892, 0.34907637168764966, 0.6642245259416177, 0.33819052611485384, 1.3030586071573427, 1.1428912149087354, 1.4607361881495233, 1.4380484421706867, 1.4942236047202992, 0.14760916759812687, 1.220866815950444, 1.4482732482326752, 0.6235461413803705, 0.5723427322694967, 0.48099769428961886, 1.106334217116927, 1.4098162418891573, 0.8944595202412587, 0.9612730681044541, 0.09063952412965215, 0.60993883003746, 0.644727462255469, 0.731577152712775, 1.4694218280615448, 1.1575626697034673, 1.0874628132660225, 0.5302157772612883, 0.7548008915427065, 1.4834581682205639, 1.419655660366177, 0.2884956999567296, 0.6778366714004546, 1.1417118004346634, 0.920394184371472, 0.49083025579463724, 0.8182052232277743, 1.321094215769449, 0.6309633643688872, 1.4212691948731662, 1.1331670656683883, 1.0974761447132422, 1.1340442927810297, 0.13927876923385135, 0.8576984053030573, 0.7426482459332977, 0.9804438213775233, 0.7996590237347097, 1.4379545706988455, 0.9912938250072261, 0.6305968730096935, 0.8281596393390743, 0.48589450104800985, 0.5234195973067114, 1.2210234480995057, 0.7717685489758975, 0.023277005728197964, 0.5234170996801092, 1.2901892850226935, 0.8653847542218723, 0.2749096951007464, 1.3919947968899318, 1.075626878577162, 1.020554554494002, 0.3745906685449374, 1.4536653947004063, 1.4245296354052233, 1.2634585063628598, 1.0902016134742587, 1.1494705615369876, 0.6560406230663687, 0.9807107093815917, 0.8557251972728022, 1.1859733141630613, 1.0574635621837547, 1.3251985872027796, 0.4145957929092294, 1.367092730658774, 1.448250232763242, 0.828398699753442, 0.031090904968866184, 0.00047897769218058217, 0.5685120604772333, 0.6223139502372584, 0.3510528560002984, 1.45302300358138, 1.0126793061047286, 0.8285198720736084, 1.494475347042956, 0.99193325671619, 0.09571763396039051, 1.1608553886584951, 0.9425870837540549, 1.334957282829523, 0.006692768762334267, 0.8087469882462863, 1.3438778136238179, 0.9367885737533856, 0.029388686065693337, 0.713070635387095, 0.0016023015991346035, 0.8359065923565836, 0.4782486385859393, 0.9322980176929794, 1.4514485001541468, 0.8500894021536609, 0.03771074962942811, 1.113018220883363, 0.43255534746207996, 1.1691062161743762, 1.0264078034166535, 0.31955867912213043, 1.1151197007635774, 0.7984084474697777, 1.4992245173246657, 1.4776474632434204, 1.4482407047050956, 1.2586217940942215, 0.926882358525217, 1.1463772213197978, 0.42838705187897475, 0.31869813097683314, 0.9569290725836479, 0.2851349627697489, 1.286338929638625, 1.0531637241667324, 1.1116092352336802, 1.4223148007934623, 0.6120432366750752, 0.0680653411088103, 0.8883625008563394, 0.05171512069056028, 1.3800489884660667, 0.24151171591013126, 0.09821725002149057, 1.4877464876315836, 0.47397150192195203, 0.21820395532128845, 1.1107639962432596, 0.9422568955119512, 0.5097660927828861, 0.07568401270047209, 0.7984278923889322, 0.7987883989973281, 1.4238578096378518, 0.1272618396569225, 0.3108831675760972, 0.862391523782756, 1.1382352349962734, 0.6671167654080654, 1.1335682650558103, 0.3712507088533987, 0.4284284733946032, 1.4492827615982717, 0.2139163814432385, 1.1348418038196464, 0.505739704790912, 1.4369950620156493, 0.47939670724715194, 0.7478008505328841, 0.0956528839034948, 0.5114090749702771, 0.3015027540824605, 0.35781460319383873, 0.04999995163213028, 1.3311631610692183, 1.163371096086249, 1.4573031728641095, 0.304490687174527, 1.4370096694183339, 0.23969885364158805, 1.2071733153383062, 1.0753252781125098, 0.6091203289396708, 0.9301907321864151, 0.7909556956020933, 0.9604444999238677, 0.1941709003151127, 1.398242459640165, 1.1819876149472963, 1.4756550075070742, 1.276043240099238, 0.18646255586794763, 0.8480656412156717, 1.3085582407334218, 0.007482125911121518, 0.0544761909931914, 1.287444192228838, 0.27906738943596127, 0.8529800354753978, 1.2927083125196621, 0.06045405422272021, 1.2112594999324942, 0.8317604674521424, 1.4832720257842942, 1.0840277186706626, 1.4044571904618919, 0.6318372197720711, 1.3280190209799487, 1.103679187552753, 1.4686194830451458, 1.2587856108669273, 1.478689490949146, 1.3578025185746962, 0.10721506368467332, 0.7886375426430028, 1.347747172878324, 0.10677436473224983, 1.4332959043032123, 0.44239289599568227, 0.014948800636364112, 1.2804626157936239, 0.010223543804937507, 0.29904573372436527, 0.24526572293021826, 0.7806162742739475, 0.9858852453230296, 0.5269446522009631, 1.037155265165323, 0.6817765622998437, 0.7351821437603121, 0.37142224037263527, 0.4950219844288245, 1.1336748958688267, 0.830208048790932, 0.6875766890853865, 0.4232653350810855, 0.6423818244243138, 1.0954946441362712, 0.6517794765700395, 1.1377189045447036, 1.346742355914517, 0.09180320748576104, 1.3234493646461696, 0.8509347659110942, 1.4419619692240662, 0.40862267546458064, 1.203295680889183, 0.09571767776706364, 0.847854389993278, 0.029352607335461967, 1.2992081483555413, 0.5344179697571652, 0.8055505858247052, 1.1106199415852114, 1.0722109186919637, 1.0702432648795166, 0.010911061097526042, 1.1027498289872832, 1.0991269360685703, 0.6170126889829507, 1.1136513514932436, 0.05437981938479308, 0.8283048614481932, 0.5393857211242311, 1.1213386042929576, 1.0553428096821271, 0.24327608846339643, 0.9120118306565204, 0.6714144219457272, 0.27435791292895384, 0.23783840417455077, 0.4197655966677124, 0.8592900296212245, 1.277752277451724, 0.7358765169884218, 0.7196161208728484, 1.1672875603798225, 1.0626345952307994, 0.06290864195868157, 0.33304351044654434, 0.7672535935588833, 1.4496520898695384, 1.348437077609702, 0.6758170391804783, 1.165878065933776, 0.02918844420341632, 1.1773439655767306, 0.881616520275688, 0.1416970255075955, 0.7561018986991068, 1.4807950690440062, 0.3630027771050116, 1.2873175301325444, 0.29277023158873455, 0.20722111097009221, 0.48927351566369454, 0.944769636735281, 0.628691239967764, 0.11760031567524498, 1.156037433660324, 0.37796513559308836, 1.2013994310074458, 0.5110137941962503, 1.0439450097349432, 0.6574179228811814, 0.4559575134981054, 0.9869712071860421, 0.9887507915126534, 1.3417964881285782, 1.1269082736443994, 0.5102668243797497, 0.355209495221835, 0.00924366380284053, 1.186096015922698, 0.6968613979490137, 0.6591037038480433, 0.9321673719708066, 0.8719063677377679, 0.048046845422030526, 0.4216954691655762, 0.4625899334236475, 0.5264718273070115, 0.11746190681324692, 1.498666004572781, 0.6759716333167218, 1.2871166213511949, 0.9213544213113583, 0.02487898196214211, 0.5193643174029012, 1.0488041686328455, 0.10151366873407008, 0.9222126644365278, 0.20545587564311057, 1.1071276207999075, 0.7048603179281129, 0.616469178103025, 1.393399120727236, 0.7682370759200612, 0.0550471165502493, 0.03391717303033637, 0.45922046175976294, 1.2943970474438726, 0.04723623947842209, 0.8598568026891059, 0.5947162670268606, 0.2154464429628356, 1.3778155083009056, 0.08658183999071162, 1.4676068711621095, 0.013231529300825218, 1.046067684899016, 0.1180614477760989, 0.9074731306631469, 0.5106249847092181, 1.0228399026890267, 0.81497688074387, 0.5713511839847811, 1.2993272200523778, 1.2433041078561988, 0.6685648823369998, 0.9837357785597315, 0.29278371443634293, 1.056522234633757, 0.41117240334036603, 1.2366345443611773, 1.389462832429016, 0.02938332794574494, 0.22303039011291692, 0.5367247815192892, 1.3620607999271597, 0.5932276942650596, 1.0109779591475268, 0.4888631704413628, 1.3972194708394683, 0.15467844727245678, 1.4967363805622327, 0.9499032151781657, 1.0862628869045308, 0.7713208084081806, 0.4390381686478739, 0.8276557102956903, 1.1261614931283621, 1.4743280934698708, 0.610526940147949, 1.0358171315203286, 0.6596755703456223, 1.004616334337367, 0.5093026080305196, 0.9795515231928039, 1.1276506671519613, 0.9544988406990231, 1.4782257330464286, 1.091229822554796, 0.37204664105168367, 0.051775059906140175, 0.621337982424083, 0.21563865239919622, 1.014498447861039, 0.7561152175089139, 1.2603713682638236, 0.40502932796750957, 0.8865206875002283, 0.1653200208364125, 0.705176629827879, 0.6234614262845259, 0.8921220790252228, 0.807753744684031, 0.9929066245542411, 1.0799895112243276, 0.538537168700641, 0.6540688488421547, 1.1773176102780116, 1.3683092275125537, 0.5914598755109, 0.27123207555287837, 0.42396775419983657, 1.1770771046712274, 0.20794869081060852, 0.5739839784143546, 0.8651696474517262, 0.03600095659211672, 0.437646298563247, 1.3771226313154867, 0.8699641426107021, 0.8280803362105258, 1.2297698309830056, 0.4975321691080802, 0.9654379547243557, 0.7188675462349301, 0.027112749102602307, 0.8626044982669523, 0.46463288470615244, 0.0658944849068484, 0.13407475664632285, 1.1426529609576233, 1.1491847463450031, 1.3301848664118214, 0.9515661998171143, 0.31940784451086485, 0.7530136540396082, 0.4572011910948933, 0.2661032067004838, 0.94867789905804, 0.8871380200259809, 0.1173436403751828, 0.46512324180761755, 0.7955263376960895, 0.5960596458203986, 0.1494025150535881, 0.7752821767200806, 0.31962724235756873, 1.31574728338443, 0.46192279288054156, 0.15253265422212514, 0.4509149125686291, 0.7769988540520516, 0.49292324867103265, 0.728124437112495, 0.7859025606649128, 1.3742216926943926, 0.9773385288494527, 0.08227559852843458, 0.07283846011221312, 0.5378947829205267, 1.3767908466118697, 1.1642084589145867, 0.6770708791972135, 1.2379369400566962, 0.27511391065330526, 0.9663367113966093, 0.9107442382369823, 0.5173173347736457, 1.3785606416205067, 1.193556316495313, 0.40608203003364995, 0.46835644870277365, 1.456769424314932, 0.3687234205494054, 1.4687849373534236, 0.8298085341104924, 1.2149203907609394, 1.012946457919949, 0.5678194581359663, 0.35014434954598855, 1.065751453795074, 0.6182688036887074, 1.0444033072289722, 1.0876921860081068, 0.45518868566511733, 0.1780789166800107, 0.8023855877657067, 1.3130871669053135, 1.4080988172939994, 0.7936114172201454, 1.0223644903895073, 0.7090579371962602, 1.0037184583662, 0.8227254480568738, 1.1507214279966087, 0.1927987951374665, 0.5049999598854833, 0.5466248549493566, 0.7042009470440739, 0.36610337443242963, 1.3844970263034395, 1.198562998972154, 0.8180912523419139, 0.43859163679157587, 0.9330270694005616, 0.614135518805692, 0.7093632224442883, 0.7480635044521726, 1.3007249070256397, 0.1668011352598729, 1.4888538780578533, 0.4445016430342853, 0.7274872134791547, 0.29764554448432845, 0.09141375557701786, 0.8456077385451446, 0.12899840676766838, 1.0381188006346074, 0.9106931062538974, 0.546268654145857, 0.4346265188645965, 0.2335837271823497, 0.3452604702887125, 0.4117327833596827, 0.8808080454905903, 1.165627232324932, 0.9325129523389191, 0.7696135363977582, 1.0283037123700236, 0.1635506088939912, 1.3267059343053873, 1.3000264914542266, 1.2026409151184736, 0.47441557140088875, 1.1174407371533257, 0.5716398529837912, 1.1066050024611624, 0.7245643148573082, 0.9074762865092612, 1.1776755899112037, 1.4716543617907578, 0.808758346902494, 0.7633368578616622, 0.012208275705645755, 0.670547232572828, 0.9366935871291013, 1.4898597577315316, 0.713641717862906, 0.7441360936104779, 0.23435143451172058, 0.42356877299025963, 0.26567495393655416, 0.863318774708643, 0.6846611943080683, 1.4329036554117487, 0.7748373891801679, 0.5877118453377289, 1.4522479556107672, 0.7021280205316802, 0.20991009127956883, 0.8849027734566195, 0.8022315838849565, 0.9850402074934375, 0.7080411299307129, 0.7772420857043474, 1.2081184921807306, 1.3011967784203453, 0.8688075499395531, 0.023202892500333527, 0.7712735946425874, 0.7408329823754023, 1.4976863635049538, 0.08244545949550203, 0.33401435917364797, 0.7067232061049947, 0.08898539129972471, 0.08940967921076687, 0.47583236011577157, 1.4723669777450632, 0.8972977784096647, 0.4450294217410128, 0.24897996969575614, 1.3046740175136113, 0.7397320721954223, 1.315307995793792, 0.2599945518711346, 0.1683000940436748, 0.6421876739813471, 0.469598156088207, 1.2228957655067352, 0.5037649399418223, 1.355074503685021, 1.408873415900711, 0.974274063360834, 1.07668461391847, 1.1610756537703875, 0.9433316988938849, 0.9639967851379074, 0.8210046357155366, 1.3437628644069535, 0.6905557966451932, 0.43272637142310305, 0.9745886915458172, 0.5648977601012969, 1.216015203806923, 0.4514389495833169, 0.7932944085798648, 0.8974246251322654, 0.04354270839047236, 0.5932340686195251, 0.9698508798545187, 0.11729982736910582, 0.8664365577972246, 0.313279475818281, 1.295848035218732, 0.3861607760440975, 0.582115090219403, 0.9885064194899531, 1.0953622007429136, 1.4499377791624422, 0.181581075341128, 0.9069764899322013, 0.957436558032975, 0.6478157132776483, 1.4078705964965315, 0.4156581609546276, 1.0218432252625678, 0.17969974224051194, 0.7447713458910765, 0.008832701182606983, 1.0465689720352913, 0.6395080421211341, 0.762635891855705, 0.4977765197666991, 1.2695768683958388, 1.0468124108457442, 0.8976113169328939, 1.3545819197062987, 1.0947897153214856, 0.9858582779554705, 0.7677168263457201, 1.0839172101505812, 0.6633853061441268, 0.045477744673729115, 1.3517577568274595, 0.31948782770762524, 0.04704246906925663, 0.08374690317505845, 0.5830895496460231, 0.04015053558384435, 0.00990475732458268, 0.30260156233482066, 1.3344439960718781, 1.088567173741766, 0.9073967337737983, 0.8754173065004085, 1.2395224316854412, 0.21879109689417597, 0.2507157482246372, 1.0952753782362346, 0.8787427964996449, 0.291749507116499, 0.9916363664125545, 1.4055281771332133, 0.8358564578532826, 0.5288245428825676, 1.4485582438590163, 1.4752623387365298, 1.3601150932654251, 0.9033412002622194, 0.2610385110885259, 1.2271010459104965, 0.7207255256597687, 0.6205635421758906, 0.6167001247896584, 1.3163889396357265, 0.5175387392432604, 1.474723857333665, 1.0667620674204616, 0.49615869390663375, 0.19409092447076298, 0.9392423899321006, 0.48160443500219524, 1.0767708403418783, 0.17884489285242045, 1.311870574779215, 0.42484265839663193, 1.1122771909902285, 1.4054818215266498, 0.4359948335098837, 0.9955203769611238, 0.20862020202764975, 0.6727544439018404, 1.4495586915821972, 1.1354805511121386, 0.11713283768445737, 1.411947938889048, 0.3011262706013003, 1.1125213190199004, 0.6870001408769499, 1.2586894095635133, 1.4124985386379791, 0.9520440581552101, 0.3771341467520337, 0.38726840766628273, 0.596739424030384, 0.8899546155239559, 1.2962940143806865, 0.9861369302697853, 0.28395504369097174, 1.0518669992751817, 0.555175204081528, 0.07978905199422609, 0.6758430351196023, 0.2539132393209935, 0.7629014477858648, 1.418833622150549, 0.49505808177028243, 0.7617066431454955, 1.2392262387020638, 0.21192323563419901, 0.11938377694843622, 1.0078115312912477, 1.0652181026764715, 0.03764012943332784, 0.39616353677853844, 1.349372163469704, 1.2446925551015566, 1.2302742908245419, 0.05484763574442797, 1.2047762941501263, 0.1828149146907015, 0.3548641874593036, 0.15438018756157995, 1.142457042018983, 0.29711839618552366, 0.3380700575360743, 1.1266381143177306, 1.2151554060069634, 0.5795827039691859, 0.9739306119770303, 0.9486337851602864, 0.884037156572549, 1.0470412921637897, 1.3166826641277707, 0.26963286469008013, 0.5176908171731417, 0.05375110756652024, 0.14303480372811123, 0.5162871323230228, 0.016722138249151863, 1.4283686879460626, 0.9749765027864843, 1.2843997932430822, 0.8638462791882424, 0.1607337625743156, 1.2669752889033647, 0.7995021731547352, 1.3937362775474849, 0.8227416664117955, 0.9462923415635753, 1.0624093685018163, 0.8606975690555507, 0.697868930430686, 0.4588201460380437, 0.02291193282111903, 0.9920171615831869, 0.8893478724850001, 0.454400651597963, 0.4466207672189801, 0.8683369443537149, 0.7180098229766172, 0.311010299579093, 0.40559158246820337, 0.5373132833367443, 0.11724113715365209, 0.6905684870457601, 1.2578902884357932, 1.4503019885569393, 0.7299042341234284, 1.2137121134312232, 1.0050735876765506, 0.6390439002400301, 0.04348480163778845, 1.2927509346363593, 0.7236208961897532, 0.32902533630514247, 0.9408531865637413, 1.2317868091342346, 1.1295640327555332, 0.8876329053761391, 0.8152119189582325, 1.2243439664757352, 0.2949208983715714, 0.9559663325854941, 1.0956779979385203, 0.6882264029279141, 0.4596414114912863, 0.5849909287096662, 0.2647720064046402, 0.2552545433190287, 1.1851547612636253, 0.9876677712158475, 0.43530557593570435, 1.4087922735643643, 0.9722138802091618, 1.3457364005841062, 1.3345917026404528, 0.969622558928111, 0.5020971030958877, 1.0359869457608513, 1.4944632593632412, 1.1406238811739848, 0.21475581320871256, 0.5565908777624297, 0.5643163948880614, 0.195073441270332, 0.6012179035724416, 0.8331477607027399, 0.19080474185090807, 0.8716070617287973, 0.6900197771684485, 0.3768389120084497, 0.8084962141574437, 0.711310676660053, 1.1408018617090274, 0.8348061892636609, 0.048159319452657945, 1.3882561979506909, 1.2723017259265033, 1.2311058483255848, 0.5426132625074633, 0.29486147081093345, 0.6881081796073539, 0.9414176969570667, 0.3588098755209406, 1.4960247284423578, 1.3588749816104337, 0.6562248802984678, 0.3671787012700393, 1.077866147911561, 0.09980949618819113, 0.2610377436938256, 0.30820826853193384, 1.2740477071220797, 0.40026334735384106, 1.0631026599973705, 0.34725235612848454, 1.2816068748717704, 0.3885969727306688, 0.7607877255169333, 0.15655237012292883, 1.3060627979936454, 1.452631165005978, 0.445415547197672, 0.4645456218691719, 1.045022422134234, 0.7367076928471931, 0.04764562675992767, 1.4397701218350694, 1.0916509396882876, 1.364236436465776, 1.4916825484939866, 1.0842108032920916, 0.09346043791171116, 1.0889830046300244, 0.8632711374750035, 0.9225494157908545, 1.2726990607771604, 0.6321303605511608, 0.6065979919662436, 1.4613119936568302, 0.27329768472671845, 0.26576549295142665, 0.9130707581388329, 0.4538259429432493, 0.11805849983255012, 0.2954873735588245, 1.400701516850928, 1.245881696340632, 0.783451376369944, 0.6113135346961625, 0.6030334580568673, 0.10298450508793872, 1.197233479241062, 0.11381315916392731, 1.110426389904125, 0.29765055049198386, 1.4796792207517044, 1.3698297899036387, 1.0602576502031869, 1.3511194447965347, 0.6070694616078065, 1.2909818201532812, 1.2918728528694485, 0.6162879558128385, 1.3236649097863136, 0.43444130489444555, 0.7077440507631061, 0.8943018656780158, 1.09553608485312, 0.5506916446579617, 1.3926281827237073, 1.2202401039548947, 1.4681273341547383, 0.4119089381533907, 0.03009959097459497, 1.4223614980740644, 0.578222958565249, 0.16151333161477566, 0.10898300197734873, 0.8374467729248447, 0.6561192619643409, 0.5614612385956201, 0.6060150894709708, 0.9866772710814447, 0.1558997593236055, 1.3736257685590565, 1.0442321930886798, 1.1118755651678007, 0.31207873201302755, 1.0186804592227565, 0.3267451310058463, 0.7101938826665901, 0.4612754524068683, 0.14157406106941628, 0.8005165626319574, 0.07464187761830104, 0.6389615663493147, 0.15529533185589195, 0.1769980511047325, 0.44912763508669984, 0.037786443283179205, 0.39681969851882504, 0.7563633838301358, 1.450822741995244, 0.719373563128392, 0.9399685807018017, 0.43859252716807356, 1.1587553991548132, 0.4810673838055457, 0.3811977550268228, 1.40795588561364, 1.0052468574864974, 0.42209405037379977, 0.44630809118871817, 0.5413708205185601, 0.9338135668139185, 0.03308636756169664, 1.0060140409720582, 1.2155634463434875, 1.3128804592242753, 0.8497551799075371, 1.4141589617853731, 0.6095007240184203, 1.354430691449714, 0.44717008944199416, 0.9390782806158626, 1.2380749509001523, 0.8696999407679185, 0.8961534778314193, 0.6896768591541068, 1.4747218894886096, 0.9513898055244998, 0.8831619052039001, 0.05987986788763289, 1.4668033738841049, 1.1632587754646413, 0.7514967588506933, 0.0523128521305134, 1.3787429691665827, 1.2751557839995105, 0.6876022897705867, 0.9651672081569423, 1.02267816071791, 0.6379336187818024, 1.0395592886689258, 0.3510851610568862, 1.1103958922665849, 0.8343394082646058, 0.7961120456754096, 0.81464317360248, 0.9840918107454688, 1.3753956171917614, 1.1001756922597257, 0.5301894621092129, 1.3681097328035863, 0.26926126861290944, 1.4903607047842082, 0.04024309902625778, 1.1733038585408244, 1.0005774108349335, 0.9613357198343664, 1.2885812561920027, 1.0212408477915214, 0.711026770706307, 0.49065088190255124, 1.2396718333447614, 0.3445392022317117, 0.027542671630174986, 1.2573528101602829, 0.4537136087701679, 0.9858780497108666, 0.03817811404061683, 1.0690655960856998, 1.0050711548355538, 1.230532535595867, 0.5898685798883507, 0.30519237471459726, 0.31836312901131136, 1.3001096547457398, 0.5359548706814512, 1.1460443749602773, 0.40489325376678714, 0.5286442822476947, 0.042832520912663596, 1.2215281388526975, 0.4594276097292381, 0.2720212781012413, 1.1865852964715398, 1.4521980297569252, 0.6952235320720976, 0.12366313564482673, 0.8725376111041134, 0.5047604585153309, 1.4295332288224611, 1.034049427237965, 0.8103068852003554, 0.07579685141358938, 1.2453860035438982, 0.22326807412084404, 0.3893656635292587, 0.5650640133169271, 0.8727556725212124, 0.6224574196971291, 1.2717698275784115, 1.2380172074794584, 0.3931935630798664, 0.030626359088097688, 0.5105383546755782, 1.125136331068799, 0.2845580284221995, 1.1521088069301983, 1.3021624691750375, 0.04101107631510542, 1.0678817883355731, 1.483096254710298, 0.5058297835730394, 0.42603196537727966, 0.361444372517905, 0.9006089712541214, 1.3983127845027712, 0.5645641661068648, 0.7368116506572887, 1.4923971131639404, 1.059291418970679, 0.6013695395163333, 1.0112986133341568, 0.23854900480150143, 0.6292294732284947, 1.4678778805900663, 0.32845832059510155, 0.44379755335488075, 0.15579461127589772, 0.37196095539429674, 0.9270136241124975, 0.7213694207801145, 0.6439552764728849, 0.18918959996098217, 0.7351922187851154, 0.8877263915834711, 1.2538332867549575, 1.113124406165069, 0.006184401081994195, 0.9526908515042525, 0.29178370289267586, 1.2904353789549878, 1.327026260539019, 0.3341180761147064, 0.7357588601131906, 0.49301061243730243, 0.07488530705103108, 0.6116615391003555, 0.7037361276732355, 1.4468462554365984, 1.3034704373874184, 1.4709053201896392, 0.8840987642582165, 0.6111250556660492, 1.4655253404970883, 0.6204296607445434, 0.49048257282061636, 0.7153134958943429, 0.9825790003122965, 0.4006713154680568, 1.3785168600888063, 0.08056304708407092, 0.24757982183976568, 0.892183697269578, 0.8874634062778459, 0.08889650302670693, 1.0414796684879857, 1.1751082435594211, 1.2094951835287626, 0.8424977511649814, 0.6995035091569293, 1.2136357933131192, 1.4877619930083572, 0.23562634855652997, 0.708160836303207, 0.8097193814018998, 0.4215527303297768, 0.12192547238960949, 1.1334201190259199, 0.9387962702896657, 1.134004414179754, 0.830637421259865, 0.5471421799136785, 0.5402197488750669, 0.5148636635937813, 0.11901026653595692, 0.9244774542115922, 0.41637879230770347, 0.540759085023328, 1.3298312791639457, 0.5059351240209976, 1.4863805496857305, 1.3257539905191358, 0.24038067037234234, 0.6318121788498916, 0.2790637834480357, 1.3791508812373614, 0.9073525630707178, 0.8044657418081, 1.0317714946746324, 0.9674574880213012, 1.2340742750302962, 1.2610496161467286, 0.3672632174656242, 0.37732449203806373, 0.08065375610875714, 0.6173527229587628, 0.4528261635851415, 0.4632994860547832, 0.32933365290397587, 1.4167449515818717, 0.7645837068331771, 1.1832797783745859, 1.3443103097502487, 0.7574857682503633, 1.07474899355165, 0.05086782672348561, 1.0736152128487815, 0.13456155776088718, 0.2908799966443061, 1.4381417465766089, 0.40130679761727983, 0.9084138783223212, 1.3331623894786702, 0.1392738305073551, 0.15060320314514203, 1.365568194181298, 1.0907699260610362, 1.0453028939943603, 0.8924851427773226, 1.4727498913966728, 0.9465836783001264, 1.1537859098135899, 1.3824710933779059, 0.3421742626543459, 0.950693813658176, 1.0343823314148184, 0.822229171836887, 0.08276457568679824, 1.30902170650636, 0.4178458931411378, 0.7458403420650299, 1.3525939993446419, 1.272263236584459, 1.1635351748900291, 0.03373382624306537, 0.3497751001380776, 0.10541745723966855, 1.085837905333943, 0.5300846858363517, 0.5613817570019859, 0.023231722885590667, 1.4939885293185098, 0.7097576265247383, 0.8444658290744966, 0.2958896517205862, 0.4249470201158667, 0.3868037470860032, 0.32911891200296123, 1.2768962802143826, 0.4342144233978269, 1.3666114331603325, 1.2351706008165593, 0.22258665350898926, 0.7629925295410281, 0.7783826441279577, 1.1425847997338021, 0.9168468090175794, 1.1049818072886293, 1.2445354634771313, 0.9290076631851018, 0.5602615222222171, 0.822316539257314, 0.5848326834108956, 1.4112719761169035, 0.3430763788527217, 1.0220124756270665, 1.3135448825148064, 1.1966240094974547, 1.3575576377711576, 0.9229238930718846, 1.29609455772962, 0.5203254359906018, 1.0480419924853472, 0.579613035641465, 0.538235908661798, 0.4580860655812528, 0.024891602004549707, 1.2337613996976313, 0.4460996421012682, 1.4842991925254805, 0.0075007670056140285, 0.5538444751146305, 0.4700009968212239, 1.0396964121057608, 1.420529547421548, 0.8183037636920492, 1.1377259601962297, 0.5605368727840753, 1.4670134757441158, 1.4020898979367278, 0.6051518665886303, 0.6715067465980948, 0.48419976788739916, 0.5409726389284235, 0.9792667857195331, 0.3139353536227987, 1.1490598460547994, 1.4484877102933091, 1.1666697586568855, 1.4079122570777862, 1.0701854246850595, 0.801737772724888, 0.017018094486692448, 1.3072312933335826, 1.2963342217237415, 0.6011783144565868, 0.07548676793923542, 1.1568321958472194, 1.411431355134456, 1.1593488538088443, 0.47610890554405505, 1.0840902824621623, 1.4065180138345732, 0.45225478574863803, 1.4985118462857052, 0.1051614201784633, 1.0061421886124144, 1.3788829904647755, 1.1528744729166525, 1.1330934328635294, 0.5322873329654351, 1.1284383774835298, 0.050208211996994045, 0.2664670191409775, 1.4187406271780933, 0.8237229911676305, 1.0200158104459278, 0.10848357899356392, 0.3551774861211338, 1.0247389904774902, 0.8571290481735787, 0.2809794003916749, 1.2441010686440572, 0.7495265090642416, 0.7275429034130871, 0.2567044314762943, 0.26315821203187667, 1.2838091043175144, 1.288528356767368, 1.1853321543622501, 0.7854266230790392, 0.8458401124188746, 1.098967191429836, 0.2928488596496657, 1.179403224906534, 0.3874148906710385, 1.1279680340550455, 0.7261602282093178, 1.3609160606045545, 0.12231317696190913, 0.8866618808265412, 0.7223211980876052, 0.7066114243017461, 0.352012063958981, 0.16577051081351218, 0.21315592681262285, 0.34612168990731473, 0.23333869860748796, 0.20318647839259651, 0.6097282551371348, 0.35536522618985245, 1.1907118117696978, 0.32892614058445213, 0.2454771153360566, 0.5553009443990867, 1.4142139964184892, 0.009102933894255705, 1.4307033706540369, 1.347345909218428, 0.887919991395717, 0.46734655535244446, 0.04513605296230194, 0.954307658384517, 0.6389389812827533, 1.0311028500090955, 1.0356357775570284, 0.6413655770945934, 0.3373527128346329, 1.1125056844499492, 0.40596113869385586, 1.202997494802307, 0.6780657378301589, 0.1725588950579377, 0.5368672550157783, 0.2727967955314121, 1.37905182880578, 1.2806384521311283, 0.011131086609477536, 1.384310793615361, 1.4593587114207052, 1.3268450564092058, 1.0382164315745464, 1.1105625431724184, 0.4018171826785917, 0.7904876182773835, 1.0456852930141844, 0.6317690900063682, 0.02816175371489743, 0.5370940692247523, 0.21239077463566114, 0.5642376158078674, 0.8040903155042378, 0.16631295188736778, 1.3234816486359777, 0.6075965592482186, 1.2625431001598602, 1.1525653409313144, 0.5619049417921036, 0.7447163516379183, 0.4560454060165396, 1.243081389822628, 0.4034180844661701, 0.8298236666686316, 1.2092393010242042, 0.35631493362599354, 0.23668818038588613, 0.3477093652998205, 0.7604178831364292, 0.26510003393575615, 0.21647448202117248, 1.3741848096176659, 1.3892102718870356, 0.6749516281362233, 0.6979537067070234, 0.8506437180438564, 1.0838678097424899, 1.0430524804463843, 1.3275625720588162, 0.2520598912336687, 0.379826951400465, 0.45842564733493163, 1.4816848803876557, 1.3868060314876713, 0.36860040083636064, 1.0361605017756563, 0.7422863364230028, 0.8581987341527828, 1.2454256901025278, 1.253316271917244, 0.20008838705386106, 0.30025580005112645, 1.4908757194736264, 0.9332491408472878, 0.0706938236459893, 1.380515918356044, 1.2792341087692136, 1.384934293423241, 1.3877969896514197, 0.7172885113976851, 0.3783455119923528, 0.22558335307396266, 1.055454595759286, 0.6087046524770054, 0.9571016113979787, 0.7827283346271253, 1.1907460588770142, 1.2639611566528082, 0.9410248823127288, 0.24220471024457285, 0.5677298304214194, 1.3608653011486838, 1.3914745470007943, 0.47281598083581705, 0.34934511743010593, 0.39980437883410874, 0.6616454583323246, 0.08888951711697257, 0.10584733816310926, 1.3294444386983884, 0.35963282313840345, 0.7830624205948855, 1.2977951227156947, 1.2358580448924978, 0.7769229255625337, 0.20648867604022386, 1.0352218941442217, 1.4752160543455917, 0.7807558154542977, 0.9254949600747737, 0.7515212037876312, 0.3735508985887854, 0.7905708996114964, 0.9940395277305318, 1.425996282372941, 0.695623516635377, 0.08665883435092908, 0.8248115952925692, 1.1431592214827901, 0.9520411137867092, 0.35068986264405366, 1.082189033735938, 0.789258301381236, 0.5888756652081378, 1.075644378409189, 1.4331598758445794, 0.08018427695181723, 0.6289636051933851, 1.0105115921874417, 0.19575391079010368, 1.2086882350987218, 0.5628458400092408, 0.42271791502778, 1.447900235410859, 1.3379397930985117, 0.023471557119514874, 0.03889481570804715, 0.704241824021091, 1.0474462583334778, 1.166534047009308, 1.3658350477360768, 0.3287511498028112, 0.22480330079314603, 0.2917483958158973, 0.2167501204179439, 0.3259446827780683, 0.39254029307703, 1.1804234331678525, 0.08591774640519523, 0.5201371663222825, 0.6225903657199926, 1.1802273889871502, 0.3225134433056531, 1.3777054597767797, 0.5204182971942319, 1.2128352421300783, 1.0596451291831905, 0.3441314766913253, 0.17626541116502736, 0.32616643987601474, 1.405365548005358, 0.8123265221202607, 0.5822843616322095, 0.32573730209873897, 1.0045709365457127, 0.04441353769027889, 1.421071828599786, 1.1857071421224192, 0.21823287570461075, 0.020715745627314874, 1.4570793809225, 0.9382344205109018, 0.6880954406423694, 0.6680674264361655, 0.7676341322941641, 1.2527198976223874, 1.0280826768115858, 0.06531678315957024, 0.22758474738005752, 0.527755549787077, 0.43299550798509007, 1.0348488449624296, 0.2706853159453443, 1.4748560449374981, 0.7648402715837403, 0.38151127317014266, 0.7799771469657213, 0.5065376437146234, 0.4996793845219771, 0.9975926415533364, 0.8070702672037269, 0.5051151785796175, 0.7276605934223997, 0.07123855424129416, 0.06713722130074767, 1.1393914117051116, 1.1370791965085314, 1.2453363975295242, 1.0285051198429997, 0.13353392742253467, 0.4008110223946961, 0.22631635795070837, 0.1773197529000511, 0.14481075181645003, 0.029874279144873617, 0.5857768069426784, 0.8682213449829934, 0.7953914244105128, 1.1405969262394873, 0.9409857154675556, 0.37914662179519615, 0.3224976017453964, 0.16108336880534846, 0.5890281090339459, 0.06360627936440794, 1.028932069593579, 0.6969206203282338, 1.1299772404296866, 0.30217824595467857, 1.0912915070457707, 0.6001865719447531, 0.2512981083245592, 0.4503979167033087, 0.9012468829528506, 1.261244090713887, 0.744168950537524, 0.10940067594017461, 0.5829867234052466, 1.2047910957376764, 0.7026021419010351, 1.1210094129336812, 0.7482048995978261, 0.3447855466653314, 0.6048192438759377, 0.39720667973486445, 0.48359707092393217, 0.9804137221648468, 1.3337891631507406, 1.3662874585303486, 0.855895657157563, 1.312663643228126, 0.19110730601317039, 1.2971844280472462, 1.3016085558778503, 0.6564957001683023, 0.6076465557549067, 0.44550953435945284, 0.058510357822470105, 0.37691366319561653, 0.9149981735851931, 0.5745100653729778, 0.967888738030558, 0.03388993773401383, 0.21889248285317153, 0.43495057668875947, 0.7647374144063863, 1.35423580301167, 0.4111263868102961, 0.7388540811330593, 1.42426968338161, 0.2484359898215291, 1.4785979833182856, 0.044124950161513965, 0.6585178806365238, 0.15413322309445437, 0.5832969238176513, 1.200914798470675, 1.2246587558459188, 0.8747160570727996, 0.05988848659563584, 1.4398710651209603, 1.3325636433714434, 0.47522227043459275, 0.6984182938407422, 0.05523120160597683, 0.7336951909587616, 0.303569416119126, 0.38068444498033255, 0.34411095708385714, 0.653764675408725, 1.3803938168429184, 1.201117463949767, 1.0412288112741357, 0.8750792047391782, 1.4055844788318619, 0.0817660800962059, 1.0184777298669032, 1.0798684310203002, 0.8674480786519752, 0.46841748802529676, 0.22069130563258582, 0.6762799708713945, 1.3521664856599942, 0.39385145665339466, 0.6697905762883476, 1.0597042442064606, 1.0506720234401619, 0.46801740579386614, 0.18639542295754508, 1.1659916015451786, 0.9464859136294234, 1.035676157299158, 0.9179029512019481, 1.4522801335681033, 0.9180922607496309, 0.5009864663418683, 0.22810939159015842, 1.1011014533635446, 0.5394135630040873, 1.3891210360608996, 0.5967077659957076, 0.7885866988702159, 0.34121172149959766, 0.8503345271180013, 0.6839810919104654, 0.1152148049454747, 1.1147783759854624, 0.8403396809845023, 0.7651779747212266, 0.22132396543328947, 0.8375210335691046, 0.5831051391410228, 0.43143155400009775, 0.9778711845667576, 0.33766115972393207, 0.11129848086685079, 0.050874747469564496, 1.3431667688483753, 1.1919911895064679, 0.7172723405571211, 0.6001610651548537, 1.0900434603324296, 0.3119061862224774, 0.24266975735991753, 0.24462319939070104, 0.5988894610739617, 1.1769449771699463, 0.8621295695648821, 1.0179092976087036, 0.4372504278538262, 0.34994574396542033, 1.229408821606437, 1.4510729667720748, 0.4351838941978539, 0.8051874317046545, 0.6876564240071801, 0.12514468151300323, 1.2534169683925638, 0.2809885859621202, 1.3767776282745272, 0.9530801534033728, 1.3662189816490742, 0.614752229395966, 0.8317559138194671, 1.2214944353936426, 0.8171762919797116, 0.4124953891769815, 1.1691462740942211, 0.9203106342100997, 0.20393528506547998, 0.30772860939471086, 0.9137710976691846, 1.0427158558298957, 0.034927518508941546, 0.047781698319613375, 1.273783801901711, 1.2489447667603422, 1.1163464580042004, 1.21594251058116, 0.386762079276991, 1.1893144048360886, 0.3605197594757144, 0.14465179491555857, 0.9913176059895534, 0.22842482819667342, 0.3061741189040977, 0.6486073099876973, 1.3891248771401756, 1.4599681451728392, 0.7454832548976628, 1.072570412237019, 0.8070908676200774, 0.37548711543932756, 1.3964213758143034, 0.00817431969786997, 0.0078018515564926005, 0.3930654071470895, 1.0975106323724406, 1.4666040309571138, 1.3572995020083578e-05, 0.012480783210200186, 0.5067286819909501, 0.5353034774869431, 0.4276114475294957, 0.6853581125984944, 1.4678908116570355, 0.43688488677183723, 0.11063188086271591, 0.2992123262538075, 1.4792470076443136, 0.24322496780125552, 0.8423901734474665, 0.571555817056677, 0.6890698204881402, 0.34752306747191664, 0.31948230814463874, 0.5091852175332408, 0.6520257419748429, 0.6925887795639458, 0.4317076274528594, 1.4424505411581774, 0.9220850890681241, 0.030492626345812568, 0.3935839012984003, 0.35091145847394417, 1.2928104136122083, 0.07294332628699973, 1.3130078130496161, 0.1415423610858137, 0.6542361578164619, 1.4396735387601138, 0.3245256952277834, 1.1891885604197274, 1.373174038279388, 0.5324454719882524, 0.0168157039774684, 0.7433926060792544, 0.25560621481930584, 0.02456759129947872, 1.150441009537749, 0.014153014432410294, 0.9845244161927501, 0.603628279119889, 0.0864138332576948, 0.3580786113559871, 0.6543061326012622, 1.2429886869639002, 0.47390505174686326, 0.23600878806622871, 0.8109272645121502, 0.8011380877612729, 1.4983938148980476, 0.2042532950175741, 0.8453560023517206, 1.0317084790328888, 0.11098064990240286, 1.2272106479019356, 0.3486041791797505, 0.5209252644745934, 1.2923404546485093, 1.1241893048536777, 0.0037374168998555723, 0.12106925246771272, 1.0825962554531372, 0.5230923206966831, 1.3049737530852787, 1.3284181050637287, 0.5328390582146094, 0.3265730492797788, 0.5204928379887976, 0.262935219368046, 0.9233273172348022, 0.3619834574528798, 0.838266935151121, 0.7499142861030449, 0.6431274635068022, 0.6865988689710312, 0.16173161900855892, 0.38505686419829016, 1.4152493212229411, 0.6347550173473848, 1.1519162685126638, 0.37428379384362537, 1.4800009621596961, 0.656762315453401, 1.090640946875906, 0.15514250392224005, 1.4607569014437436, 0.6773610341934584, 0.9121601680457695, 0.31271469406105395, 1.0416579789996157, 0.2096115993706812, 1.2707710026589698, 0.01286776422081809, 0.0720913535963395, 0.12786265391734936, 1.365268717735952, 0.5891565324638568, 1.3490126433783278, 1.096895154957032, 0.9130927217071214, 0.3130608155188345, 0.8039035187037402, 0.5205599847050251, 0.7422776208673334, 1.450871661576259, 0.29708573958362466, 0.21794816150044088, 0.30959705251965874, 0.5067364708357711, 1.0068146943361864, 0.7050531926802057, 1.0556962704784358, 1.349217861449972, 1.2227682771021855, 1.130061785586932, 0.39039944700097906, 0.6536956175538178, 0.5899962153626678, 0.212219936500407, 0.5853544323902989, 0.8564344007663809, 0.3819287248453727, 0.622560825933934, 0.25609398093487445, 0.026768814545813868, 0.9055966294134348, 0.7251574026254087, 0.4179606887365618, 0.7382073468502898, 0.7410020796914517, 0.1667914804481458, 0.03343351180792614, 1.4073285698605975, 0.945392861277505, 0.9530071089500153, 0.7288592518902555, 0.862377760897246, 0.2793251469279067, 0.9867869438133015, 0.33388944058351966, 0.6194152470436534, 0.6344163660433015, 0.308763986972292, 0.8485167664231301, 0.2524052924454038, 0.9443714636643765, 0.10046524861253808, 0.6958068914323344, 0.33067236041911785, 0.9512488324046273, 0.9188123485769386, 0.1013169964623179, 1.1833712364654736, 0.45088956373246614, 0.7181982708145838, 0.28490950160343465, 0.7616909200739304, 0.058235242500983275, 0.9938337449366175, 1.3840215914999088, 1.1978574917389944, 0.6193997700959328, 1.0053872610499022, 0.39181839306111416, 0.9665417693452076, 1.2349240270198845, 0.959427583453399, 0.4603352580314502, 0.4874931546037028, 1.47343530943964, 1.2977334995805276, 1.3857134722879185, 1.3326242476544383, 0.03293957432713718, 1.1277822930478199, 1.3245726912464506, 0.7474684411123594, 0.05976213755789184, 0.012454175746266893, 0.2177129359307967, 0.6485141103111237, 1.288649295708346, 1.033599536377033, 0.8439648851343001, 1.466122728916245, 0.22986748193017964, 1.4648353319752236, 0.47280512595404095, 0.1532321073720465, 0.19989902945731025, 0.9105057260961849, 1.4722303773623309, 1.428368581178352, 0.9348902686973111, 1.003842599886683, 0.8464381584562435, 0.7305579068066745, 1.3101560377737493, 0.00021644791383590434, 1.0772201494304394, 1.4449597586135199, 0.27811336685605936, 1.0463296948693332, 1.334915121856184, 1.3518431193377827, 1.2979114353116095, 0.2846921038924613, 1.2936070394160277, 1.005704053556315, 0.7794626533960116, 0.7637297197057266, 0.3276939537943652, 0.0015417010843757906, 1.2133280141521614, 1.2776085210305062, 1.3415081301145806, 1.0925672138511469, 1.3641530695713442, 0.48673876881100386, 0.6662259987801373, 0.46859734156694316, 0.2437431397666664, 0.2067262584709893, 1.016655289126155, 0.7887422848531869, 0.0245949732079197, 0.7639092200773341, 0.5681565967626916, 0.5676561452589751, 1.3315522610074573, 0.3491440879115562, 0.5903015622371122, 1.1405432844385994, 0.1678414455990001, 0.5268388465530895, 0.8375856538189616, 1.262848738291686, 0.09871110649044562, 0.4851175691991264, 0.01858211463021675, 0.5858342171662595, 1.0016878916075398, 0.5364489537682362, 1.3311730393718277, 0.7134192954920485, 1.2074142153804293, 0.3355941238465485, 0.05983615027253236, 0.27725815303299867, 0.83149651642823, 0.7453713137926568, 0.04534702710881228, 0.42047646015207457, 0.2944360398918236, 0.22736785267304283, 0.14527300729296277, 1.2773237514621343, 0.6662745041882904, 0.3678598155145709, 1.4053696078757405, 1.1793683029951567, 1.0741406155522957, 0.7092246639078928, 0.015319803870641358, 1.4295688874307553, 1.1720370671889708, 1.316174970157503, 0.16761447707921445, 0.1064967344937387, 0.06703697111258267, 0.3638427655814893, 0.37940245744267387, 0.23876252619204613, 0.12355055613976829, 1.1727224975092008, 1.1382697485808007, 0.5763834693452934, 0.3757818926128679, 1.3511074824312141, 0.11709424082887626, 0.0744348656006284, 1.4603544295961983, 0.46083006885888717, 0.043456672630492854, 0.6451836178645749, 1.2921659896019566, 0.8805541742314476, 0.8788392489356258, 0.560997039206089, 0.9486439472339403, 0.8873463069640251, 1.22378050854416, 0.7292388202505631, 1.4940468184029478, 0.8365582923753094, 0.15266671243090318, 0.46990274074130994, 1.31503614093226, 0.9921735288400739, 1.4616849610528733, 0.5561128983605114, 0.05422405825361465, 1.293714558747463, 1.3156197662868636, 1.4329199284547727, 1.4772793750545965, 0.9323674109730273, 1.0050939167323185, 1.4302162296874825, 1.1072142065099186, 1.0415381327934456, 0.8446185434220717, 0.03826170690832903, 0.33678716916121093, 1.016488813031121, 1.286604632623137, 1.271410544461606, 1.4115230878797083, 0.03636713574204564, 0.4892781082298394, 0.06065260619984708, 0.7884369025193774, 0.23490629404773028, 0.8675545504621454, 0.18340367317291129, 0.17467587324404366, 1.1825092322906325, 0.3102928410529723, 1.273565051804025, 0.5449092652224319, 0.13583574577728702, 0.9059578005693596, 0.09252838222864346, 0.4440756455036837, 0.6598435223487076, 0.45488841538878405, 0.6567621889921185, 0.517350145243328, 0.9615410694521649, 0.2307180280646159, 0.7605418543250186, 0.48309182141667384, 0.7624024958634568, 1.2970085113160534, 0.1514860172659197, 1.4151617788056567, 0.5334213789941169, 0.901288114368255, 0.9831889658788553, 0.7607335537024238, 1.4783046358101333, 0.3109001943350558, 0.416960026640573, 1.2986398406811481, 0.8023929759199393, 0.01223858984287135, 0.6197577319912171, 0.8993995401570003, 0.5542954759965494, 1.2907274994248474, 1.229172763101096, 0.25330706119362156, 0.9618063926579508, 0.3178901056735603, 0.21981869007910515, 0.5563508472366063, 0.716929032340144, 0.06712972193902539, 0.623770449464613, 1.1384419441734765, 0.8750419309614015, 1.4471953341433026, 0.33269279621047493, 0.39884491667084976, 0.1621961950111671, 0.16178839393374644, 0.6481696561816297, 1.2043432192160473, 0.19710210729013034, 0.49617635552116096, 1.150984682055036, 0.8450705902909363, 1.1379126211146975, 0.5751589294734852, 0.5493441854684413, 0.3402485352323167, 0.18223742458370779, 1.493317616848949, 0.6109866251027465, 0.3317165186666653, 0.7469868061203064, 1.323516623669446, 0.4895236570597562, 0.21862121781186905, 1.29137606334899, 0.3397562108044611, 0.7389614541053695, 0.9827027039183905, 1.3013533649050855, 0.7324716418918659, 0.9113166921778095, 1.4009715495408828, 1.3824378694182569, 1.037590828620792, 1.4818762094179094, 0.8672643969308358, 0.4428197449174514, 1.3538322417094528, 1.108957927186282, 0.7399636090473156, 0.40805547672946546, 0.45452262576728547, 0.792759578466697, 0.0712077095676591, 0.8082351069800633, 0.17818453492133302, 0.9310019244314061, 1.376448637735551], "_autoindex": [67.46127481170626, 67.12372306007487, 39.2558178587578, 17.718823233956282, 47.571446264599736, 70.03239941775796, 13.072418284287213, 63.27269073482738, 76.52823086399279, 75.9047096513044, 39.49644192937496, 38.33856748932504, 89.57180004354896, 32.53233070440735, 15.112671875261096, 73.1758156916364, 10.630314929374606, 32.457759394750596, 9.778738168560587, 72.81324442138359, 60.50372005355005, 15.11597501622809, 45.410049673940776, 24.840477144278395, 5.520118329779711, 47.70003729763498, 61.7960861262651, 31.67585352797572, 51.05943734716537, 59.541168710159845, 77.66355714613499, 28.517363299937372, 22.514701874021902, 32.1863921115305, 33.45707740473621, 52.454686992838276, 35.49429936136932, 29.59373872918041, 26.709777531676526, 13.410436457933727, 80.96061014168338, 15.61305377299954, 10.16396942749671, 73.25339852728241, 92.1171767217137, 39.2592103667225, 89.45658625878676, 51.94861039963735, 38.135332293029954, 64.14064983143227, 92.59990500276183, 3.6090193062649045, 92.7862186533929, 36.96101547457944, 28.286083149262765, 7.722804673032979, 21.87896618459608, 62.20655101913444, 1.0094895574583318, 23.55554853393639, 91.09779553411077, 87.12820809361834, 82.66673029375188, 17.905389643124558, 35.664133100459104, 38.09756300940187, 82.54813213716986, 14.451058210581058, 43.38921546753919, 58.39767100391546, 82.08197498378848, 13.441846440506843, 90.78427519647411, 51.20180594060516, 87.06535390090352, 59.3790386478832, 46.11146176675904, 19.690387274558407, 52.73875486197808, 39.32568932500112, 95.41580259166908, 95.80489764498738, 94.86536269406913, 87.58301613381767, 70.28413693826346, 21.64190786290858, 93.56188951180602, 87.91006493500163, 12.08764643724477, 4.252165580490952, 97.56488666072985, 28.844578426518364, 58.339491715960904, 99.98756400848873, 69.86689545686839, 98.43943897933497, 95.58221741207564, 12.998252569740076, 52.239872456758654, 0.4075309259009341, 63.02760580309188, 12.560545068203133, 38.660214331584086, 79.49002895297855, 15.24629781205994, 10.403233226868359, 81.15385721665614, 70.56952107729172, 72.20861350813124, 31.20525351263723, 33.28693086208304, 89.53920555254366, 74.87264610269439, 94.14161784780923, 22.318228290348962, 56.93454966541255, 90.51719590410372, 8.762643478328314, 80.5059480953482, 50.42869691427636, 43.94470466956175, 12.044291925759465, 29.354015263720235, 24.614528189047626, 53.25644297261364, 34.16315698697895, 37.417063500119326, 3.1134291584605567, 84.01022557228741, 48.880790469795464, 54.368764838616315, 76.21361537525132, 41.55977743659337, 5.4089074920892095, 62.53537873669098, 59.136999500069464, 35.62797312865198, 34.22454617414207, 31.391263214917974, 29.121024224934477, 26.975422991802823, 98.4900505532433, 13.230181332707913, 49.092033460780016, 93.08771944310506, 75.04849293058277, 84.40051577645805, 64.93415314210912, 74.22262757924784, 13.922121621688655, 83.8772734297452, 85.62993929382716, 28.2430396855601, 20.86022407347943, 13.784714786466978, 68.50416387459542, 84.32766715487591, 48.38276383909501, 19.32872148659396, 72.92422468573167, 53.53797173954793, 28.837170663375964, 50.327126895526476, 96.17007295441984, 9.523813230668432, 36.82464345573614, 0.8673383130349155, 48.14979020972766, 26.518488620984005, 34.015386867943285, 59.18101581240376, 42.943774518941346, 35.90591677030649, 60.70852071899324, 15.670903359999233, 27.476553762812006, 12.286074105713363, 95.05854692080943, 96.65366965698658, 22.607764830376787, 24.917780643595975, 63.04432601690839, 65.0253534639736, 11.602193002658279, 30.770645277700137, 38.74816378964145, 69.90049252767675, 98.95166950800925, 94.774276874416, 25.401126147001406, 3.807566280238195, 70.87255912612846, 84.42378266210213, 61.31964809645254, 40.03603407002865, 82.64777551004833, 79.98853226554658, 62.45487427433692, 11.268904938771463, 12.101525709062866, 45.588911283667755, 39.59292019852848, 3.9118183620997615, 94.82868179262086, 48.70978220583196, 53.50559360493742, 83.57038427896029, 46.70177439181135, 29.081413112033637, 38.61349119748111, 37.32338811429352, 88.98469655176446, 18.88368770483366, 72.08569718778608, 70.36860402063225, 16.50005463869456, 23.662567146867197, 47.5449175582303, 89.27851748911881, 40.01870605518828, 25.50203537560638, 62.15657175360418, 19.932686850516635, 80.92242874719655, 2.78014141246381, 18.723699306773867, 16.34719204077022, 1.482594723916053, 60.499265774124964, 96.5210861027502, 94.02945088295334, 32.60408812950276, 13.098700400591412, 68.12202554619716, 56.254930760313634, 51.154119478571644, 72.26263333881839, 3.6252173937553533, 12.028015400061653, 47.768538076156844, 33.27570477293681, 76.44621829126818, 46.926056160920574, 84.60468729698744, 24.352999841506584, 12.87886884574867, 34.14074300078707, 15.396788124172767, 68.35087129730123, 39.719575679609264, 32.84219916885308, 49.58533979480251, 35.86233510822463, 76.58695834898785, 88.18209863245076, 70.89592238978626, 71.44880184546736, 16.688119391928613, 97.62888141541279, 26.98273266195198, 40.894740584044875, 60.90929497464077, 13.445314392703523, 63.79986003736279, 34.78890254486523, 89.8348404369056, 39.102584440779545, 46.83498309558046, 92.24455485865228, 93.74291819712681, 98.70852697809227, 15.881400054693117, 84.33751507181567, 71.85827737622816, 88.82869813837738, 53.16172274249645, 50.964595360072536, 51.837682397661226, 30.976165212316676, 47.37612999126228, 34.76511052194582, 70.85550714487377, 3.149194905321806, 66.09220269853037, 37.29491799617721, 30.404080150751845, 93.99322361901274, 26.34681760091184, 57.176720400533, 20.49294571343171, 50.7134441251061, 91.73718595425862, 69.92501427157882, 20.451444924938777, 9.99464443238609, 24.89901500328655, 29.37152686928509, 35.32316474894495, 99.1621259836931, 41.83119433536502, 93.66970356694382, 49.900428946258224, 41.33469047709336, 1.1556991133028882, 34.555979184601945, 72.48012303955583, 69.03154188864549, 70.0451746549157, 90.60765454707305, 25.135340587818177, 59.0890305738806, 59.08163970733986, 80.3980784446163, 75.6891681380727, 26.65191602348569, 18.3509029634621, 58.68358375415836, 42.24371874556256, 45.829211985129305, 74.4634500709638, 44.8899901522559, 41.84456381550503, 24.514464521237876, 29.388804373056487, 22.80048134492294, 74.17783185242504, 74.29408037281007, 35.042138176524276, 41.97512598976072, 10.59422606671373, 60.28777201452257, 15.397934848500128, 7.754053279139928, 44.420067766309955, 75.56610084456142, 24.854662225009484, 63.220542371616574, 9.967467832632915, 76.45206975180699, 93.54830969234298, 75.44495852879453, 32.09570086387106, 11.493808290732277, 21.392420927809763, 98.24055666229776, 28.736843925650046, 85.0907328017616, 77.78103139972316, 31.511197806256376, 80.57831138061684, 59.62715191661998, 49.336346997254374, 68.17946580314963, 18.186660924681842, 0.29741823427162917, 5.464605902327446, 98.95398019580503, 51.63589821377936, 20.933022948630164, 37.59731397929272, 75.2313202156634, 57.56379427973347, 33.77973267656951, 19.201787137305793, 86.16619791029788, 36.32866872884713, 32.137329873238805, 50.14042859651438, 6.786356815287342, 96.69768150105564, 42.437112315600054, 49.75896523294825, 6.184599157134818, 71.42256837672028, 82.56647152921074, 75.50566288838397, 41.541914337633244, 8.614516404987693, 74.93558067837523, 39.61667539660931, 43.47053002420943, 20.733649040632518, 78.10948973438417, 86.32617279132647, 82.50111904876076, 96.12964527739891, 19.971000184750576, 41.76598220444491, 8.184329347374286, 67.96986441220542, 79.19350578630812, 71.6126230225723, 95.72105004600319, 64.85459221990826, 36.09819679136868, 45.25061424674246, 38.24250093695828, 58.08805532859106, 68.25656174619797, 72.42577700535823, 80.55430563795511, 96.85241933407067, 60.88148237733867, 65.80872235646669, 13.787922887446967, 49.97411592952776, 25.27593476149389, 78.51722408785979, 66.4421664013359, 54.48065861213964, 47.08510478201108, 19.120396963792064, 88.23407426185484, 25.452263657529283, 51.30843550055664, 61.02683926617875, 18.4573462888186, 19.34622955567611, 71.40347755915786, 71.92133134446304, 49.100519108560306, 84.13661832749226, 19.127672875694458, 64.89947498188023, 93.02320781691911, 18.383871716115006, 49.79585046781989, 1.6007913118536665, 88.4916083833461, 69.69832333386994, 41.20955811839836, 49.488251025009625, 3.9442754258823043, 9.025420984646937, 79.74638790289657, 85.2124384646658, 73.97743831101187, 78.43894065753635, 81.32666155813165, 71.55414476054523, 72.34390169317382, 62.115330905725244, 32.484893239844915, 66.32425330629921, 33.328317509496365, 47.26832375234251, 65.99662332444888, 53.356672074022235, 46.988078240586496, 8.019023298501171, 20.894259866516084, 9.418893095194914, 5.23323234313573, 4.524835912060587, 46.22575199062135, 51.00617064813912, 17.278627085229292, 76.05730914043197, 76.0224031041, 90.6104414969496, 30.477595137805835, 88.89815399364991, 57.60619168168425, 32.04997724079146, 1.2060306148552802, 42.178275420784026, 6.78526910811883, 71.05032860506468, 20.604206873619248, 94.43217238142215, 52.856950220452994, 86.47254919690634, 76.15964140702108, 99.8947915820214, 75.48639007760119, 65.59575654411105, 28.8209014369341, 71.83803415438675, 73.11206905323789, 42.79597536321764, 17.864336542750248, 39.48987282768018, 1.4983901352578322, 8.506500533728145, 66.00263912530922, 93.94637236991379, 58.983947832787685, 42.29091741787177, 1.2123095213701252, 34.82636935393592, 53.56961754154289, 5.6044552233042495, 67.30864492647459, 29.095574786549584, 12.595604945449567, 83.87292650709148, 7.019669338353307, 65.0036562507721, 21.500371066235502, 73.56941968626202, 30.184685524580836, 98.78351781912608, 93.11409540362607, 42.63428242512271, 61.09291137913597, 89.98768674569317, 9.155628928627735, 54.66391272987603, 82.52910200555394, 34.83942357336504, 49.282679123520836, 34.3964111152966, 58.2617607173802, 61.80900626771064, 90.93939661600608, 13.309027669432705, 91.40983729834699, 64.47554364780778, 30.835140362433233, 99.83263674765533, 32.33922465764204, 13.92384281028175, 59.764989326812646, 65.88654121970717, 38.40032985650442, 40.54816787684029, 78.46660416304852, 4.569639470367548, 23.264972956581907, 50.79585016379492, 71.4982701058341, 80.02332038630804, 10.23766336020968, 91.9139250943397, 39.736719426955645, 21.520627210575928, 59.35943864544632, 26.212646050789402, 37.55230953225656, 60.198973956945856, 74.93312438376597, 45.64259303515815, 87.6425735438617, 83.29478833234742, 48.73677401481567, 2.868599345683631, 78.10019920093151, 10.160259755521983, 14.841765733695366, 45.14283398176621, 94.1964054947416, 34.28889479307209, 36.97277079761698, 21.016964956099805, 69.12768883751356, 37.15995598481958, 46.389116939350316, 76.27573698355886, 13.02155598327267, 16.08236180010676, 12.496880288045242, 66.48331919701788, 66.65125846681859, 83.15487153839439, 30.04084508607926, 2.813796238145161, 63.24107147353048, 33.95231251524811, 40.74763603968713, 72.73833121375381, 16.450146403572507, 29.26243505358437, 75.84727858918538, 91.21472056782032, 28.893178420335662, 86.64167146464249, 14.046528542899795, 60.96714518520917, 57.384372972062344, 71.18394202494555, 13.380840374349656, 20.157687920920065, 20.661211006552584, 40.015030425523825, 35.22202256096387, 92.31344235003684, 12.661217291276506, 61.89629397974937, 20.751247670146654, 2.5467226104400553, 2.528665979904887, 7.3164064498751795, 41.18326583578824, 63.31847170542776, 65.60003500831577, 61.79117869116385, 47.21860416398861, 28.223207428435792, 60.32960723140387, 64.23150823347508, 30.973289025282213, 72.70327038060336, 46.79720381667717, 81.0146779357103, 79.67273295480801, 15.259346771304305, 3.149881073589922, 7.347709746055431, 94.75822622049466, 13.715247998769497, 49.555565170825574, 93.03266420931295, 35.8459045190267, 70.95563908428937, 27.49955345710401, 28.012680082027586, 35.27449264495838, 5.757404624958751, 96.51527919558161, 65.1980706007123, 32.13790246857208, 24.606781988284087, 1.9903727594633103, 70.83724163219553, 71.4585607779611, 67.74171077454248, 90.58186104989854, 66.35903289132486, 70.02856591511083, 77.0795208173817, 73.73082642589324, 50.29772306243863, 92.69425711633143, 14.671113274397129, 42.952771716268714, 24.906268333474102, 91.98558865247148, 26.47730530933203, 72.94789565020737, 80.65702145559077, 31.311103983905152, 93.82686465018291, 90.74396888883658, 43.72380298143492, 79.15131311152096, 34.07127573405614, 68.61583186713041, 32.44589682418686, 3.6168459173876566, 44.512414959329185, 4.051558873103501, 5.725629043910696, 45.947954471154816, 16.48753503207281, 68.60792828752909, 90.31810260897846, 25.018653968644422, 2.5490827792096993, 74.93178222059204, 56.756428005684825, 70.65417437467653, 25.377386019593196, 13.336612182154163, 14.587313017556458, 99.49183858427543, 6.153606885938068, 40.73110766486564, 40.56336729184805, 99.89753398153134, 45.14747224580407, 95.98737206426703, 96.494524419991, 55.364090475586224, 78.11175238145378, 2.123987626578794, 97.1510122881767, 71.39135794693175, 33.09696202958096, 58.45209128924371, 63.578292732782096, 53.40949794655844, 61.33746224328753, 60.52610609538307, 72.57080005781049, 30.720182178781762, 65.77270734067636, 63.0557475418872, 38.06596693101573, 60.57275467418414, 56.82091859517635, 41.504570672215756, 44.92430690269591, 35.279440217459154, 42.19100733200185, 35.35606685330479, 85.4371594013368, 28.585842909169877, 31.341004604969246, 58.69874680714662, 57.87620636421932, 24.623422032388408, 73.35389653046677, 61.525854625852396, 65.95012543349222, 53.966822181432185, 33.70155792175602, 55.60217472671665, 0.18093301703246967, 74.30760203047036, 64.56980281176519, 83.92877578302532, 16.69370065042791, 51.22467577627344, 21.486036726704118, 35.89438108676504, 93.48075568470358, 78.51039764395205, 89.41993863585324, 81.61738835192378, 57.63480774976229, 28.176352971626272, 32.060683746438755, 53.81805014785688, 37.90971616815902, 77.72977200184647, 88.17791426946674, 87.39864340137188, 17.749603532314538, 48.21139234839873, 79.43338565255308, 44.77849272557847, 32.25063001660289, 29.995083064868854, 2.235577834529623, 23.982906492827183, 14.930368337641253, 38.51086823445756, 47.883488215244576, 81.16380214626146, 20.109748520136307, 36.71136114044757, 21.674713908752352, 2.1970016268498704, 90.74955711014195, 42.27231583666013, 88.72968508836203, 26.689363171107118, 75.09940748722072, 17.614308091735133, 97.05462210865589, 64.97558332586242, 58.94514311836916, 27.282762556975104, 45.08231550712897, 88.381128187211, 65.84921626358718, 87.6982493941479, 26.700807558202932, 85.10551531161434, 64.85591487240009, 95.44405010348859, 29.114789224453897, 2.821673591255003, 41.42542028555064, 51.66475688126204, 97.03600210712665, 93.66195946143381, 89.04361409206999, 58.54153473598153, 79.79740770264077, 30.17577874060885, 42.56837256537624, 66.35372114604337, 63.76966866939732, 77.18285745772747, 13.946728841445166, 26.57767481501957, 88.90377015968691, 73.98924155949025, 46.17883239503183, 94.3703404320976, 36.70155377568025, 58.51536639983167, 66.62908238341794, 0.6448674222880313, 66.32910085240987, 15.198378900767317, 16.14775722619153, 94.04493614517109, 91.47848395717803, 29.612157686162565, 8.63650039909195, 10.316220735929027, 94.44481738114204, 46.61840593148997, 87.20421186673867, 91.73908902990675, 69.96878913663195, 0.6755377416348018, 8.987063810883066, 86.75822059314801, 88.6114281000614, 46.15212427709859, 8.40226632738359, 99.22793973382906, 67.6928600299822, 18.575443028415318, 59.74275781892982, 35.92399101150132, 28.572052149602246, 26.029158493654293, 32.080901691878985, 55.49831875732697, 66.28691634453146, 68.22526549298657, 93.61892924039749, 5.41591548659881, 43.396756358816745, 52.03290731467365, 64.33522906509272, 41.756547690305766, 2.4605219420557822, 14.241603426823623, 26.140526168485913, 77.89401161001491, 12.10494764296467, 43.840188010583944, 10.980066394280207, 32.770121805469834, 27.31425739234732, 47.00263766585087, 74.74247209679231, 82.8786053081074, 36.57113986966905, 46.87028079581212, 58.159473383056316, 80.10765144444531, 62.82080627729226, 79.82137079956094, 9.701576381589849, 12.838925614254348, 91.17821953707784, 44.161987505294256, 76.89559317791961, 40.57939527780415, 55.66254954582735, 25.1080456706129, 23.814933264730886, 43.675613158535256, 94.65109724649612, 95.94667911940536, 66.48581717626172, 99.74513005158225, 7.698947872849738, 13.160701593038182, 14.244966771560353, 69.3013202318333, 80.04340062262325, 0.7871763075007476, 53.00043468090956, 32.37910114967587, 60.691138657910024, 48.771252498891386, 40.80005386062182, 21.83892798377981, 27.77028702515092, 41.63474452685699, 83.77738981560987, 24.29845792954367, 94.9652090126874, 21.50820866526709, 58.843652381740185, 55.744151717324286, 87.4116487537772, 21.33478368766838, 55.63931351639268, 0.9749911885699181, 19.089721275674933, 36.21794950357388, 19.47594416200613, 28.538130477939795, 17.524415942800896, 17.062372504369815, 91.47634778415588, 13.741918331749957, 65.68930005252042, 41.91809154348374, 5.436512144619343, 61.56915375559342, 24.14016805855995, 7.277098263960136, 33.251365990727535, 58.36278765232543, 29.762522763941522, 66.98034581117804, 39.706029332719254, 51.034498714949514, 6.2372027375528605, 1.4760015310900987, 43.95119463843542, 73.54289927679652, 57.38126962299841, 21.86368872246861, 65.66800259271308, 37.514679213542024, 94.7500108463855, 80.34386256773519, 79.62158530409573, 8.140608642237213, 29.64910957973812, 76.7448587866345, 69.379795561374, 52.46399870636176, 17.12284463640763, 12.234572894597552, 7.7497438245852095, 9.288467360142427, 19.36174957750385, 97.8627071723533, 73.26964282258467, 24.122733876515834, 77.07247600786778, 15.746939160432227, 70.13806654350168, 40.29515287187825, 57.36589181035997, 63.28971844692644, 84.88638394003296, 9.812038626248142, 39.35937828883971, 94.85281611054297, 47.55431049887765, 2.8844136265680276, 17.182859596872156, 45.633934562130804, 72.15926054971143, 54.92745659972663, 65.52541298225566, 4.658443914621624, 83.20452828037814, 6.571847642015561, 45.47591304675126, 43.69430211555376, 34.37063585384637, 88.66784507164535, 36.46546822554455, 52.25838580008341, 6.850482279648995, 87.8920006522513, 1.079710388784827, 42.1785193537154, 28.693991964859155, 29.849935848979225, 27.499648824328883, 48.837481816375494, 26.254508318746893, 59.011807083768595, 76.80902410440314, 22.75463532396449, 92.60474744423594, 66.52447493674487, 79.3017463560163, 52.998441683875505, 12.638595850641455, 79.8730832947287, 17.988657788452432, 40.532139990590196, 70.98602933196251, 86.15175557422253, 32.41005166645884, 33.22670266286656, 92.18743252293797, 52.10589264169154, 66.32357666980033, 67.2579411766765, 95.53427922360746, 88.02655660894123, 16.757949380051485, 59.00474966043077, 84.15438304241437, 49.554048100271395, 36.30357022081324, 5.820364080550777, 90.05068862047574, 49.0313315238549, 47.60285927435817, 37.02330817684629, 37.68232611044898, 60.9986743149598, 5.198837385611055, 35.32235442047125, 90.06230277685496, 19.10910379197516, 76.24270403525846, 73.57342803429013, 58.980964685710134, 41.54987832869262, 98.32528862444812, 31.793375900370535, 71.41456144963165, 71.05862673078963, 52.75864836033206, 79.76242332891495, 69.90927853529472, 15.818122134078582, 22.089022764968934, 51.65564649794171, 40.83646325103661, 95.70185560623398, 44.94797122889164, 37.13043408161906, 33.84661710107034, 47.29795133357322, 32.04298586942021, 58.980557697736, 97.23803115611305, 33.40893924879027, 97.90792190154053, 17.962765265549898, 34.75748392301396, 6.251686140249591, 31.740029032869856, 89.87317183232071, 98.0906361506089, 68.96589711701051, 96.48180572068351, 78.12064584475323, 69.08002665425732, 33.99943244714404, 13.135524072192538, 11.411443665737087, 30.400607833415492, 94.3834978561963, 44.54827399121246, 87.40728453143996, 83.2299718925079, 32.07544818235482, 31.795365105640972, 86.90047323313375, 97.46806160817175, 57.41333351221878, 32.88054858390513, 41.00863582789053, 99.27640770804668, 99.59182002304934, 30.938865442446616, 95.36209859837713, 83.2035478008703, 6.393171872015313, 78.03668676683728, 68.77377353842348, 78.47319982048373, 78.57737531161905, 9.082914218834926, 18.318975112669577, 28.403140193590882, 29.425540591933174, 7.572246158842577, 22.495850036726484, 98.06173898421603, 92.12006122538648, 2.4694528342706246, 24.37803934861449, 66.31508343228582, 24.855283364490997, 73.4644485203033, 50.37722427232373, 42.92492303594874, 68.69569280214618, 53.91312354932158, 49.82156071219828, 35.85895860492167, 98.62598363919678, 63.358915356312906, 33.946064544178746, 54.901780392362994, 14.752058082754782, 68.58972380650354, 85.93162964794554, 88.22829613907484, 38.99948263934103, 47.32119030323386, 83.30220444364221, 82.24181518021558, 0.4945636813600385, 11.958045566189735, 63.74069373779297, 36.550463516916665, 25.82477125874706, 71.4964003030071, 4.691423846759102, 63.745498598344184, 54.051582208403616, 56.42031941841908, 58.29410853776056, 45.676835712709284, 68.54743319079317, 34.790764339988826, 34.10917431479732, 92.27254646436931, 75.93787105630663, 10.133145211571183, 19.48589869102334, 77.2070138343763, 66.84040482192472, 72.93136149149856, 20.400550359032486, 20.277224971804497, 40.64673374694513, 96.94779767947183, 79.37638255065951, 81.74098214203242, 89.30250463573705, 54.75365530568443, 66.70876282123587, 76.44640482513019, 13.508278539982266, 41.66511370052375, 74.47632876798741, 89.2298917121007, 1.540122187939541, 0.8290426036180243, 81.66889346352319, 50.54865787624468, 5.436138224615695, 13.962578717185359, 21.805945156196817, 19.030910720700955, 55.784467134718376, 40.17716065818715, 10.232909961096514, 3.605818261141791, 4.774701312294283, 73.82245753700593, 46.913367872886134, 31.781799691230116, 53.241599201406565, 31.360243567423296, 78.80308361868198, 34.123876189312085, 42.19361666440473, 41.78053957223442, 28.270909434970726, 24.2640252104529, 79.44042569375685, 97.46197724793774, 16.46288888138139, 37.00142951036528, 57.026423033466386, 83.81749147298592, 12.621244988615278, 46.675326058310716, 57.44916033547581, 73.69318444732161, 19.07201398341176, 73.65770010893364, 57.45931931342927, 95.16907037071415, 39.626431213843574, 22.9925908965815, 74.83248003107306, 80.01841158504602, 88.92934907754027, 87.27204542552667, 67.01833474579216, 39.16417295550326, 50.35459133424728, 86.85576882428416, 1.290472121781261, 51.9232431770172, 1.8445826356737194, 39.25985636682814, 51.36642652768465, 28.38598668540502, 92.82124661793104, 90.38886956615464, 33.4784102272546, 31.822785221235694, 49.2106565142279, 86.76207212461556, 2.952870461121826, 35.03425149232006, 58.41635896117442, 81.38635105159759, 19.52988807541289, 62.94961358323532, 20.95343497462562, 93.46141498611632, 47.624377129631014, 34.21151586328739, 82.65613587224475, 5.913782486991304, 84.08483524289217, 0.1735771666075303, 33.08381122247529, 28.102296640596936, 4.2328959277663, 79.24287374331134, 44.28764589428875, 18.61775306955249, 48.16165698456945, 61.48981669090156, 26.811115373833704, 55.254152512176425, 89.80401625614165, 49.82047209231683, 76.39226704295498, 19.799380063742177, 68.49739941090633, 0.8912989535479587, 49.458295349216286, 68.5049238155935, 50.259239022257006, 66.65302293352372, 72.72789431394551, 16.500539440692062, 73.75634401971989, 25.263081819187803, 89.22871193795375, 47.33318751469609, 40.01011656836091, 24.55534497531282, 0.5097009744776226, 63.138048359723456, 11.58393292794334, 21.03060619554188, 72.14090000514257, 84.50542753156107, 3.524958978033599, 69.58429168095985, 84.17189401506562, 25.469943521757955, 3.169646841620355, 84.09001706490648, 18.257051787765732, 83.08647773120506, 44.58702940049238, 58.15110830522423, 68.35491661954184, 7.333262787852856, 37.65965027212875, 97.09544439269989, 62.7002274335868, 50.59915526910164, 10.183123388843507, 70.62894177386569, 66.46422324479381, 28.678288873322387, 19.724622173858663, 8.448793904918805, 66.33292126176319, 92.15977291061733, 58.03591377477183, 64.55404704038992, 94.26887415570368, 46.1407306623031, 9.524566385324684, 57.70841497792843, 67.44310986104306, 95.91192705241028, 0.7064213716595491, 58.50977934155096, 13.324575361918335, 87.36353299233134, 46.36976091316133, 62.83290493636159, 85.74034926854426, 12.227976026368403, 16.388190319609375, 58.19900844467825, 58.66718993718185, 8.158596814075292, 36.099551009074936, 86.46739745437733, 82.81648490411058, 32.82588250319268, 20.102551219100416, 86.23110068432194, 83.45466689534045, 24.565213654385154, 64.23040411830378, 31.50033044505379, 14.915747577952388, 94.612508868185, 68.5954990024578, 13.75042475089896, 53.88887168505797, 27.919843809915655, 34.323195912993484, 22.94667229899323, 12.055663633722647, 93.65234274856108, 84.58798707904492, 32.38771251277255, 93.75804999176155, 61.798756379080245, 59.30677757094005, 16.407379367095288, 3.8397863568055746, 5.91850260599508, 49.073115689475024, 93.48192826986573, 84.98740732087863, 13.736965335074158, 17.02398583391862, 92.9107158823524, 47.82959442128188, 27.43775438528949, 85.72789955086239, 52.86355963585889, 76.888840142835, 38.147657991007335, 94.14887928409195, 53.47226611999052, 52.66790029747609, 48.114989006293186, 48.93396543773289, 33.58566098657519, 86.59652730886452, 6.308391065828689, 34.339677861291484, 34.159838187967125, 92.01787939897062, 93.3200131493113, 62.62941139203269, 22.138442983937367, 29.171839913221277, 40.24771834076947, 36.47421532837245, 4.784946644224108, 65.59108983766419, 92.94246252049679, 0.5796446663398624, 43.78856122441254, 99.03848908273433, 9.92788337017556, 23.18582402953534, 12.709862734211741, 44.27122843394571, 68.5592621453656, 76.33363512312485, 91.2795441414547, 43.42677223947341, 65.0639599522167, 94.5179798620934, 5.394962197048825, 35.51168377008891, 52.77567120842842, 22.159742114555804, 53.18661421183929, 2.039957247913715, 69.7275544838384, 76.946101311649, 3.8383042791758637, 30.623618349984483, 65.1616389317004, 1.251329804404433, 90.64716052944361, 68.98929312794704, 71.66414787826594, 45.26186724726069, 88.09873166443073, 59.99169154828478, 95.75101893910562, 59.49129259777006, 24.01884451655707, 22.400697762556533, 55.222702684772315, 72.41367440345032, 46.969326763236175, 24.842726953246384, 43.42392943415499, 37.38770566926729, 91.39364672812009, 2.453320730614361, 54.50676204506528, 99.5497033014818, 5.731543272098971, 6.102874030210669, 11.120563121411864, 2.481176787981876, 55.38407455676651, 69.33270420029068, 69.0537982435621, 48.515409955091, 35.169656291601235, 60.99356664439255, 98.22643011763076, 21.706093970087792, 66.30964748687758, 6.748968036875736, 94.59419564529985, 62.71597547932768, 82.42430687855597, 64.00865157197643, 69.85531823885141, 53.116483246877834, 4.074018324189255, 50.27532881459851, 79.6458281863094, 25.897554695534573, 60.95763668910141, 41.94448146279351, 17.617931190756252, 83.57033775694018, 70.55964780992362, 87.25885422802722, 56.498940987323024, 98.49112449041004, 20.506426507373256, 86.90825312934219, 79.37649359101843, 24.28559435298594, 89.71753771767382, 44.075972480214375, 9.718177471981315, 47.54274986422264, 47.701707543347695, 19.31370094630227, 18.170432783500935, 50.549048047333, 95.06765998543109, 27.27695270536905, 67.41384662684652, 34.27273386691766, 67.40514962111526, 74.61669171825183, 10.18406490913656, 11.811499918752554, 70.30477513073149, 96.68902204441247, 35.98416667117837, 31.95863711396375, 54.299154192068364, 85.4490543129788, 49.848665700721206, 97.92075334126778, 77.51589693520057, 85.90298240618861, 81.26867351087678, 57.488148531124786, 34.68253415333241, 43.21961419224394, 59.59403157414073, 68.91168561804942, 12.41732730245787, 33.47829011706332, 50.50850474866677, 81.24687852363171, 18.266681440431032, 18.286763465794454, 90.11935395395824, 27.173945195315554, 73.56059962339239, 27.382794812114685, 47.95120709189202, 30.36039665003145, 27.362738736860713, 7.706362940393241, 42.996685461442276, 72.80571139125827, 4.620518032282717, 40.83082013804198, 25.08525137541586, 85.48178473138393, 67.30670357687754, 80.51077424907565, 17.10929188036775, 59.135666396702916, 36.36843539870763, 94.8050761730689, 99.02713506239334, 21.265763768319236, 59.888477813122144, 75.94827328746496, 15.818176826764386, 43.67902055655713, 5.1154188508329534, 22.945901059279983, 57.92301551914502, 37.000461299889345, 5.129302303903415, 68.79869820220175, 70.73606089235032, 7.610868126095727, 71.7456806355123, 51.65691763939794, 92.87582430355083, 39.60411720326443, 76.17864072759767, 87.8696763869089, 21.003220293460345, 55.15898710058518, 53.18974724957922, 30.862903158602386, 53.69925422911523, 95.19963117234757, 21.55720598283303, 41.6907136805739, 91.56094273980482, 76.39567514441103, 16.350303966757394, 77.81534593816738, 71.37706839316392, 98.814497802859, 73.94625306535511, 15.531810015339698, 48.164815188051335, 97.46656483979285, 69.27845156760029, 0.8058413128091413, 10.975183447232585, 31.55573345060979, 56.183003032058544, 48.10360805572878, 57.78902971081359, 96.78297134353664, 11.389732133058084, 47.23280878558651, 68.17042614373742, 8.066396003918685, 40.43807501502976, 7.94134324576935, 69.21205265052197, 38.89449349449634, 82.30358075326389, 45.676752045016286, 23.61014869756961, 3.614785227790762, 62.233487441847615, 34.950425469431764, 68.91503618763683, 42.99719927844634, 53.496987060969744, 57.08393626759401, 37.94551621005135, 15.158709370136014, 77.91257297292181, 78.21726801260148, 6.802368377163715, 55.99698400883053, 39.86095247179242, 26.671355841320043, 4.474808884314796, 62.0236164693071, 28.39725933592089, 13.942708299968643, 30.469830106093564, 11.583211993412357, 7.128161197723593, 42.3042846699605, 29.706857036555967, 72.73434385970148, 53.155562401073055, 50.37133648979461, 28.46291150371586, 56.06048377942915, 22.464071526726826, 60.5321375154596, 87.31017482302738, 51.37155571956795, 43.37198976100347, 52.77029166807733, 85.23560969390603, 48.09886250795573, 9.61239802721292, 37.62474737606401, 68.22709311512688, 49.95132193163454, 47.61458837124841, 34.58419994474563, 82.97720247815465, 38.85544422755124, 98.76639303669346, 99.76875614637686, 83.93575241626888, 76.05692909860508, 5.455320004300912, 8.515696208756552, 54.07488268523778, 82.87654251230404, 89.8030001221386, 1.0924193252070835, 14.23161891723722, 0.8289257331113076, 69.61149061356245, 21.40660927291368, 94.7738867099441, 43.317796932503974, 96.18706273557636, 43.25227593207558, 83.48006132640421, 75.26030916137101, 0.020667418834952045, 65.51850260278627, 37.76879292742383, 72.18481800291725, 24.674193601578175, 56.03390156388017, 5.573615865668414, 48.925833535340935, 35.784569172302184, 59.38688675577993, 45.68958567938567, 74.2826704603697, 52.446941308422645, 8.247866843044127, 75.79594947631391, 0.4148776264581988, 3.1965288307843176, 90.98907710519128, 88.05112845707968, 39.72641095012376, 13.9139226767519, 26.64770101552889, 50.59314108255541, 52.13382840487826, 66.31338003383983, 39.94304315217169, 68.21600913760498, 78.34398347419163, 55.86799109430278, 32.77211203289397, 13.725933081563923, 63.321974273924766, 72.82125358424868, 20.233765569628147, 74.72250104198521, 21.20024928684957, 71.75569119836184, 68.8919350254955, 5.461203921472779, 90.23240373726989, 17.162623935712972, 9.416854407388897, 54.28104455120607, 45.93951764846066, 62.2340861695556, 20.643602861180142, 47.23689954128516, 54.592883892864364, 17.467796837453452, 72.80605193508188, 91.58010492664323, 84.1895018031667, 41.1936776847403, 53.504495680818074, 85.65409479874089, 37.33203753074903, 76.09956688956852, 79.55635686792314, 93.41299687465062, 14.325365832662552, 67.79159783873183, 22.97535241712858, 12.127083867601396, 40.38780980097295, 82.34382297016305, 56.6044069436271, 44.080493406178554, 48.801531063608884, 74.70049163403043, 91.513092496255, 73.24609726729496, 97.81898734829663, 29.389575078173337, 94.60455758276728, 84.38702212020259, 41.820193802454384, 11.647167353809785, 43.27910949878452, 30.554414999669245, 74.51845918234848, 62.7656801134712, 43.16173251805685, 73.27754706791151, 33.47882923954625, 53.97065826882758, 9.389322415763779, 73.49702643484373, 7.089863656037276, 25.41462667462201, 37.85850456495019, 3.7343066796028612, 98.1224667602005, 21.196310363098704, 43.40821657392648, 71.00711664083225, 41.368038007247854, 82.95710519661101, 36.224137017731515, 38.12864291641783, 34.38419287951112, 5.585007021030308, 67.97058621286911, 27.433755433087537, 56.01647564728724, 74.66752164675619, 49.61145255466287, 30.755278678964014, 69.76648877662754, 67.51732574983116, 71.72032440118178, 51.65891862050371, 16.072329004707953, 93.06189021279594, 60.728183933506166, 32.62367470521311, 74.3711435044702, 84.00827011405593, 55.78384155854623, 61.73369043416926, 93.78209884031926, 2.6260290321405644, 34.250569109298844, 71.15712783072382, 44.94087898407608, 67.0417242548377, 98.04935818705619, 76.50513191977673, 52.17736566396366, 85.65761717705959, 95.65192278718845, 97.86411785766096, 22.655264672125064, 58.04909327549004, 31.671995732571332, 75.79667348078713, 86.3024897202454, 80.1643272419675, 26.531469352679725, 98.69125430110724, 25.793395394405504, 6.299189266195704, 0.96999999778834, 34.751229504971725, 92.84408774395865, 71.35414996788273, 11.514725523580104, 90.5103375973753, 76.39846035915326, 62.01169063174841, 75.6361474532403, 22.341674329190674, 90.8900831158538, 67.5962997752919, 19.321720273530417, 10.135813541193484, 51.55778096679741, 36.12213220017693, 63.85855587908941, 51.11538706345844, 32.63994786178308, 28.60286838740278, 98.13654625474744, 12.459034721940998, 95.92797224599722, 83.47463916290322, 31.513552326794738, 49.701292522630006, 53.69850086998839, 79.3382556853664, 27.994041781932456, 8.92169821107992, 14.309571559340718, 22.258987354259617, 21.3763087606618, 48.91748000921314, 73.58601423644187, 10.93946326660651, 55.61514098333544, 78.97558693811999, 0.20111709198187278, 10.349538221439214, 49.53633000082578, 23.001623022436945, 62.89939969270322, 40.75678163265892, 58.31313150738847, 62.19077269399973, 27.07844496881825, 94.43732154019031, 2.8788625642704235, 15.247167084215107, 29.795765297388442, 21.878877870634806, 45.651008880746005, 97.86112133615741, 49.16416151794885, 17.77419644546441, 90.86251087891199, 74.41534394764788, 77.98993748227095, 18.067540305690976, 75.46354722465377, 40.69432725121571, 11.866274601518146, 6.084083491416159, 88.0758540517649, 99.71678085978526, 69.92420256393353, 74.34626483739447, 89.69759292850225, 38.16925740029817, 29.956435922734336, 42.219501309728535, 30.37864691828255, 62.59297078003733, 5.959113849290443, 22.77713350421937, 55.626331619473525, 92.46652996552316, 39.53442896939604, 78.73855423753311, 86.63236823818514, 62.779405529854216, 1.2022371628275796, 58.6475939396173, 34.31553809638478, 43.49957227100111, 91.64328436599118, 78.40943643082686, 45.52632734234424, 15.84579007503486, 97.71796593405502, 2.9341205231557366, 38.07020207468378, 49.496410052244755, 30.193806439270055, 54.449103371582055, 0.901206011421174, 33.205963783030654, 53.21036368302418, 60.7316860396234, 6.524007494620743, 91.74023782200045, 3.1663001474694585, 49.20849005401391, 27.241000148960193, 35.398416873887975, 89.5990035209383, 3.3564242406373457, 33.0819003527547, 45.920685926302426, 2.1105542193938787, 15.855120493767815, 52.10655306526982, 30.531791964931077, 11.365365725174348, 76.79322334439219, 47.88844055296428, 64.04934363554025, 97.31182421620584, 64.69910393964852, 19.62579071915227, 71.59252181900683, 58.284831005627154, 30.76069332675041, 96.29290601525622, 77.99698424560867, 62.26536639413678, 95.69030377868464, 38.10267325509973, 88.73965232456095, 82.44838901877469, 10.828766496148978, 64.5312949020244, 77.24284181951442, 95.05731758982068, 58.80627002420666, 37.102761402735595, 40.97131636314336, 59.089427119371365, 61.82407531748528, 48.19223095669535, 55.49487089460625, 6.751630253323637, 70.85284754574906, 36.51986002939419, 0.2666592531893941, 90.92599404075213, 25.371312965902316, 38.822917178483976, 78.7964674518043, 31.800092254540225, 2.276536297529974, 30.18744840142318, 21.300350976082527, 96.46708401603836, 28.769712473731946, 87.06577055728964, 56.30985435146017, 20.768022237521322, 76.11432273640322, 81.37671971490876, 9.67844094792698, 93.74004053907144, 92.92752319038702, 79.14645554517824, 54.49133553337479, 11.952964319473658, 4.8798869697546765, 1.3172955953071885, 90.00682210775284, 4.262993791731661, 15.101543073009926, 77.50680191866262, 65.79235000171205, 64.92326571797051, 82.14057333706354, 16.375264027261128, 88.1577065371285, 46.090548351952556, 5.084076849487495, 96.609584469588, 8.569427482822467, 75.12914384111443, 78.27221716547815, 43.42534142086827, 35.64761580440866, 67.60854392260144, 10.947133499586181, 94.27474930330968, 84.20301651371746, 86.06084366115766, 54.90329636622692, 35.4567664269701, 11.947145805342352, 73.6531408789346, 51.713336432872445, 67.97806891946317, 39.153457749460706, 83.56498897618367, 74.20002348564371, 8.637340405736527, 83.25824289457209, 13.235817155611972, 84.92160969870595, 23.075116873380995, 86.47250645072681, 0.23239398498370312, 56.64170431414875, 40.95708259836477, 44.38983015046307, 27.086523881597024, 58.46951203483973, 52.491713235395984, 6.705456145715505, 55.98775061065175, 16.317077708624872, 40.35061035020853, 71.91477613975613, 86.28227664592102, 89.76403544641857, 84.78199956079607, 25.858237425529452, 25.81987465546406, 24.077683462491084, 33.82060256796833, 21.518203916784316, 28.623250545578916, 40.19258215002078, 85.79348213445435, 68.0768902694254, 17.539856632194663, 43.42399740849925, 54.676159516248646, 73.76274385563865, 26.859510787471596, 91.88510858706434, 2.4915002769069106, 59.42168381111084, 24.463832576298095, 15.740244101917767, 47.38141186054886, 26.757511850512017, 28.610765764222034, 28.288598412503152, 12.485208718627938, 72.09830161679871, 89.72876837582234, 23.88737019471573, 52.543560816264836, 14.7564477719341, 95.46196831386709, 27.444755282656697, 87.83767508032948, 41.790620332015635, 74.58061939843591, 15.163161153668325, 63.182341940454464, 44.52550108522739, 22.70584385186253, 74.60354066434608, 35.7575513700566, 10.9092165038306, 93.23883941275646, 11.311583162753225, 70.7481857080748, 36.83583131288888, 62.56918024566222, 90.23930699740328, 76.75743584904308, 78.51187286543663, 79.43499615239047, 64.23669184828728, 63.42278700252194, 25.93222088953243, 20.775055777607953, 0.5200198433438219, 6.585341596792926, 66.58798264650999, 82.66614665768016, 93.84151254752229, 84.7955462744938, 49.03536474609508, 35.25623127816253, 64.39861469173866, 65.53013731854895, 8.028573139299322, 5.484812974086251, 39.17065459109183, 90.98912581730612, 65.13106017642339, 65.58286576290348, 56.23449254045695, 90.47871825333684, 61.66940609753026, 96.0334440101391, 21.397653618268254, 37.12044017429401, 95.69283314587639, 78.92577788281748, 90.27642253278255, 64.68568688110993, 87.5161640594763, 8.794289040669302, 70.17581136793697, 0.46239605760376445, 38.00416801437394, 63.175149478172266, 95.90743585890749, 80.84038039672075, 67.28857211342816, 32.83971377914647, 76.44652556751652, 33.436439265846175, 53.60057971439986, 41.42018016211221, 80.78340753940762, 42.81758708399451, 74.76735301125306, 55.924564528103204, 18.852545488648133, 51.761473687254345, 74.53184550042941, 12.2156430038601, 23.08981782401641, 93.36065607986555, 94.3235467516203, 11.49905028946262, 14.192246126885976, 42.94785104088705, 92.85083312688222, 60.59242057559542, 44.97677100502629, 91.06431913466321, 92.99756049178873, 34.553554824300726, 15.628943059332812, 93.64928217362085, 38.08597883503442, 94.48075150799586, 94.0281923896896, 61.8009224525675, 31.89245499432546, 8.643674773611965, 55.15813166018201, 82.82115304852773, 71.75022207882694, 20.481539452506205, 72.422086085578, 25.126672403557826, 62.09447545892601, 60.71965254349095, 14.150710633550334, 90.81416193482441, 90.31814129829428, 32.58054935609531, 40.291354104055785, 23.20707167183541, 36.08484237413131, 21.293888729783216, 85.13205005779416, 39.663202533228144, 17.32726156667882, 60.81799746902572, 30.219176340033506, 48.42124918585975, 96.58166289244136, 9.832286564504622, 41.46873111079154, 1.2214115151369276, 32.181311881321186, 57.137949195191005, 59.7762286839989, 8.814097968388623, 13.94556542900187, 76.08717330436767, 94.83053748070505, 27.673716151274697, 76.59585618219414, 19.662326571797493, 35.546333064965054, 37.87660339168517, 28.680414672464096, 74.08942422809292, 57.69956898968912, 75.49621358986195, 43.87678396679575, 94.53345682740698, 35.78055759314442, 42.912293524474435, 50.25219466405068, 75.15905600137849, 67.8583297053442, 20.434949064334173, 7.754459880855125, 29.950733427817834, 8.019619340438776, 5.276362581722083, 30.98750085566597, 19.165299606478538, 56.08497174206191, 53.636989966462934, 71.62409635730725, 81.08362540964178, 14.41603098716796, 0.9851307921188268, 26.37500322643387, 86.24735773198572, 83.31608671854292, 5.992197921802889, 83.68788306633054, 58.949867255204126, 18.971543658893985, 51.82017049962283, 56.38590975893612, 82.01522669051468, 48.41647891783146, 74.5189719718388, 11.406075549113325, 31.110076060172254, 2.487940763058172, 99.41496416168863, 12.958300287704095, 59.76104172103486, 22.035237960221345, 98.86947839615947, 65.88741006901249, 98.5307307276304, 76.46129324542386, 21.96144654266805, 11.320385061836047, 73.58121644472835, 99.65191406226008, 82.38022779540938, 96.56683249422255, 17.816953361121524, 77.19156557495414, 62.69913242167261, 22.28960371095181, 87.1547638091527, 64.42961114137121, 77.2570149855078, 92.35224312155977, 6.684976456216518, 85.68392560810199, 58.27536831516888, 60.076213500441845, 86.04867414406759, 77.66413022927297, 62.96500941027634, 52.38880400113517, 39.514938982756206, 38.02007157836981, 80.58907857268407, 38.24698929111048, 30.904248227399112, 28.204038324546865, 99.74536571738022, 74.0123982482466, 84.6124424278176, 4.580682897991251, 25.26809846101441, 73.78783267151547, 35.75978806402161, 95.92534479130622, 55.34745088223985, 66.57529777244953, 32.05888052517162, 19.6247689204469, 92.98905389444306, 16.830047993931007, 84.19418638292521, 88.8771720323091, 3.391022078089412, 1.100254828181324, 94.40361494797747, 86.73958591388897, 88.06822043703077, 99.92347605000928, 41.70944552340432, 2.6894476659496402, 40.06214754477836, 10.13019039646441, 51.45838373462694, 55.70674891794841, 51.481734808169634, 23.13289245584088, 85.40940237737695, 1.2062829638582184, 89.54757403684674, 60.80486942219705, 25.14922386044931, 61.582015060191495, 30.401477416326863, 59.726691815757384, 80.73926404661137, 91.22211313534044, 48.222432090716396, 78.89504470650533, 26.90222639881119, 33.20779704553707, 3.809684651351264, 32.609894790772856, 70.52614697608276, 28.067975855985484, 53.04713205088958, 48.864695595683635, 92.8129859285174, 63.66392538927161, 66.5454222098903, 27.478222581147193, 92.29313457272758, 66.28759344928005, 38.1592140536538, 2.7346961033797967, 52.143937723396206, 76.03377499487662, 41.1101954870433, 82.50096008563152, 32.70577517587229, 32.797309546024586, 33.75790472404368, 93.13983723855087, 10.0285864966697, 0.22241556436723986, 18.18406559662017, 39.707966207411815, 71.41821883500023, 93.30882029218756, 44.23704518602026, 16.480025304794232, 28.911557090415197, 63.46570406412183, 45.25424771560061, 94.31223637429622, 55.63373153479743, 56.418536597, 76.69705740165922, 33.327792638675625, 84.9339174435733, 86.33707856380958, 81.86142038599996, 39.61051537773108, 49.113711537757524, 22.465423434800424, 12.06175419671256, 3.744381439030209, 8.216507834466702, 85.44410361980368, 19.26185191659918, 15.249441795762442, 17.356179564073095, 49.98002863118219, 55.70343292011232, 85.56029649255757, 15.922071967533213, 17.578682358254326, 86.45146030527685, 7.595029921649232, 12.193672144623303, 68.79494854863404, 46.95643549452666, 98.30778253694031, 28.397513695889188, 69.90232871551136, 43.79501405886709, 15.47073834653081, 23.841381663741224, 43.351671405737754, 36.10243402107975, 50.889638436982175, 37.70444494357643, 45.68654066858006, 5.461523841229132, 54.406151287639744, 71.68814643941404, 2.936234239594826, 31.39383955231804, 38.523390828913136, 82.45019282925685, 70.3649444531688, 30.749330131693497, 10.721584654221218, 34.840858988511094, 84.14625610127551, 47.02827386455739, 74.39681070627472, 72.81755233748754, 33.097822321016594, 84.51320568684328, 60.305599797370824, 42.0599791931783, 42.988464425797766, 35.507156434397125, 76.33448618506493, 42.134329652511035, 35.83964001922594, 49.301331860417804, 7.750683770234456, 92.63202936097935, 41.27674998597293, 25.178517151116953, 92.77645343309892, 11.996737016549819, 86.34880672153878, 91.74185411939659, 88.43736716282247, 86.87571639403066, 56.69152625723359, 77.08819799993333, 74.38671297699412, 35.419708290951576, 16.914370662727475, 7.53530158496083, 32.98761288911783, 87.75687373090192, 24.29877061377834, 35.82452267064604, 6.549875322086141, 42.2260317524643, 22.13908991512763, 62.84580070797643, 97.14139962747866, 59.69287156517395, 94.72272338196692, 14.615014547874871, 72.87681145544627, 46.97347907261202, 83.32876106438276, 64.95356892277063, 3.66028029623946, 19.830396877234556, 5.739513691995068, 69.66409592238368, 98.14145349722338, 5.970537887047667, 45.505751914042136, 70.87417380481897, 70.56274876963009, 71.97392042121068, 32.7002358528454, 76.95144539614783, 72.81964669227406, 60.62326400266973, 35.776925205882236, 18.744393460866927, 87.51777440517729, 78.81720834682775, 25.9079666085815, 68.92733439922782, 68.05930878230072, 71.71477067512768, 19.548702251507933, 57.661183535688764, 0.923639636064788, 73.90945347170299, 79.0119713008728, 18.459755418303068, 11.243904682394689, 86.10875438968267, 95.0280279750541, 62.01948353889186, 81.22803800672162, 32.846542009522516, 83.86539024575454, 47.69889941820386, 61.10688665501751, 12.709664591552539, 88.38712214519539, 43.57188831558152, 19.42764778527376, 55.58827714331985, 99.79164762952438, 7.197381874153974, 35.323867795812234, 30.890863170551665, 50.898779088327075, 48.968723165077144, 95.15529797453321, 89.51454017276002, 70.37042610179994, 35.71280750168114, 53.499786282515274, 10.021167480544547, 75.65724351338463, 20.243679639611845, 15.763507838405488, 75.24533584382559, 46.33508911435332, 19.357876755177184, 9.84596389248198, 5.203868176570325, 40.51197948322541, 13.498106446503389, 48.00544784451625, 26.0337350654801, 91.90517999864112, 44.89983254801759, 81.17847145202727, 27.289532246735305, 15.26950184495881, 89.51266432773079, 46.72501381695763, 45.3991554390231, 1.456148012216063, 75.73624962864153, 29.940580194167133, 50.789585699956575, 5.054318378412126, 43.53909049966531, 1.8179896531095197, 63.447791571502854, 10.463669482260652, 94.6061665368577, 19.792339255955106, 34.86812797780916, 9.81390849993291, 77.80072313393715, 60.867436631842075, 70.25914545147953, 96.2084749946649, 46.870624891333, 71.9233355184172, 8.784421487799133, 81.4949153863697, 71.86939717240513, 4.267111045195337, 71.67772852609924, 13.269838429489711, 97.17853246912551, 77.91467195460585, 41.770710564963, 86.32168247652284, 89.87984298850235, 93.85207907595753, 53.83490482952925, 20.37648984898822, 64.28648655222831, 97.95561116073202, 33.658378343882255, 54.04432957992219, 68.98007497170418, 19.044331264988823, 95.98461112018768, 6.827637182304269, 0.4978468416638293, 30.10235771005426, 28.864733218585236, 73.39898102019767, 26.680286460494663, 61.868592354703914, 20.624785290993263, 6.132051418305718, 12.119087339495394, 84.21539710281478, 62.43047652986474, 1.42314389853343, 92.66783350712754, 71.01193411160791, 40.02352548356913, 5.4217659995351, 61.363243032136616, 63.46083787858488, 68.05262128054075, 93.74717095490149, 84.02068307200058, 14.0385997371257, 2.9402939759308966, 29.062156599431844, 90.58170333498755, 89.19696581780265, 81.38402438883449, 61.893198007663344, 66.64826604185173, 40.19652905549446, 20.768950004438036, 37.912778442514764, 49.96838638945881, 8.809105528909832, 50.19827521215122, 13.49982075033298, 52.721029583049514, 74.12098822134392, 29.398362554616032, 86.31904759754175, 58.530311094850575, 70.19314279004688, 59.71642467573118, 94.5932801859036, 55.78145022999449, 15.94866067852967, 37.06367025335071, 43.605133670910575, 65.71069640636829, 13.858061185299842, 55.38058962512768, 30.717845179102788, 74.07516148747563, 14.434762220303199, 50.031477657891955, 50.484483164414584, 80.99403709101948, 65.41503973242246, 44.942435145861815, 66.38242360758444, 40.22391853161491, 32.95446408684417, 22.014058950360194, 63.55683840304731, 4.472655679462889, 37.12068127570512, 23.27603422286756, 60.82978028807376, 74.49748889864152, 2.192198062319517, 27.222293937081254, 56.88732878182444, 59.730564820944075, 3.3198523061137464, 61.33329909968842, 26.182554138454705, 84.72856906520417, 86.79361324009358, 93.82724058768058, 62.992220823852385, 74.13489526385769, 64.80110260823201, 6.112111001024301, 18.546399633189303, 87.0350563842561, 51.12770952886818, 38.795540364734485, 13.030211560871152, 40.9853772068137, 99.13531472656476, 62.85893305724901, 26.69493969149592, 30.441892260217827, 44.72637451098929, 85.14955252470907, 57.88720685835686, 3.313459350702097, 17.96578402248358, 22.755508893356268, 8.8082546875762, 31.41213718474434, 58.710806544146834, 29.48030236176029, 96.21109796747189, 80.16590387802728, 35.283701729712334, 22.877427851707665, 23.52406168301142, 26.401160075452466, 91.25153274952122, 43.45580922459285, 91.39370982586983, 10.757096391816, 76.6286031313729, 26.755988639170937, 91.06479418105977, 20.9597762872911, 0.9020350360573692, 6.952353928720001, 54.04655278992326, 67.4147102154879, 79.25996249397421, 13.762933980336612, 99.71460768088673, 62.998594565739175, 35.40241794032757, 71.17579460329378, 63.15815124208605, 24.777541601894182, 29.142591370312974, 88.11873805768886, 92.81036269836477, 51.929430865763315, 12.444321563600546, 89.03812997886172, 68.63069146974132, 32.877091639389356, 58.00658479883592, 83.71174591241422, 48.89300170551073, 13.856543093255846, 0.8637773960505801, 71.59395589407812, 53.46013462555217, 68.40475986194684, 81.00315153311617, 38.50047132983055, 32.52688124241696, 10.317382527940245, 29.929448819632242, 76.54876230211354, 21.741848334736822, 63.40642708494537, 66.59063079395496, 32.18304105766512, 68.80221929835629, 70.91808934919418, 74.26656407638352, 25.906104391204877, 38.24244133661292, 84.08711050404759, 59.89581138921761, 22.70743995044009, 68.81785308175334, 71.60068996771007, 50.0456545905239, 10.761237968471526, 24.261178015487673, 74.14462699725284, 63.50644710755704, 52.6797433715322, 36.04910582495285, 31.5667129847918, 73.10228057025363, 63.684967754409385, 28.255194628017154, 10.002181759220374, 53.796730106369104, 86.60088325383578, 28.34711900199437, 52.32383456436993, 39.59540306083539, 0.9479946016829222, 69.48558863186689, 82.15119642148909, 51.57725938198857, 67.514976702196, 55.886373553729854, 21.0106713512192, 28.805861136438104, 50.3572469126224, 42.16454274491962, 14.1758144898964, 62.4094668087267, 26.693991897007564, 18.04281008269195, 65.1172648937212, 10.51156023742429, 76.30435060103696, 21.968848028850164, 40.471476573284036, 65.03663430290507, 10.205118957169878, 54.912026481199916, 91.7153340494269, 40.13053972293864, 14.089059839901308, 12.993546492889552, 56.31665741139944, 37.79055545512365, 97.9947892487719, 28.78713085607465, 69.1037646530079, 63.06211127510151, 10.85025816407288, 75.97697267160197, 7.900385316102843, 73.69924950627521, 32.71326835010948, 66.16544396969097, 39.68013707473778, 27.739589647416317, 32.13312249153423, 97.4832779701641, 67.40548776108609, 6.548987183680932, 49.90066249565683, 37.70918272648227, 69.66675427643055, 89.92834258514047, 24.648704475410288, 87.2737015023043, 41.88487731426116, 77.29675797447854, 53.39020144148966, 53.551896454007064, 95.44606775481358, 77.61826773505601, 17.757322894393766, 16.849519931582012, 45.98492817436989, 38.71751374176452, 76.60121266526788, 71.77436863116591, 19.015363128480455, 35.92867280975424, 77.24125908327869, 21.46600050230727, 53.58464595924334, 9.811894646098484, 80.3255242429031, 16.405558294542956, 42.13363460327927, 24.521119671050318, 92.29371713868296, 67.23562766456038, 19.196492930530816, 71.99123504732346, 25.250066375421298, 45.81169851713398, 17.284486300467915, 35.13044934348623, 75.93023830214611, 30.441647748986288, 65.6100489018849, 60.92780411521337, 62.89079629350891, 23.030221204361478, 70.09471670315493, 56.08907113980658, 61.623061696220795, 27.02489461105967, 16.480210762400972, 53.61650522884437, 83.61824977047773, 71.40250028687991, 57.891253974760204, 87.24057988978507, 13.17915048655851, 85.54696076341804, 85.63650883163412, 99.31807860311116, 22.450407588181708, 89.16265767521104, 14.156789346665155, 95.81272162378373, 13.492974513314305, 30.682651693438302, 64.9892292733843, 81.56329540769921, 44.29038069033362, 52.456947829219324, 82.73937639045599, 59.28436975814749, 97.28886708778808, 67.58810483923106, 34.16315738458445, 96.6190790850671, 19.651798269073062, 19.484764526843435, 12.780651044919134, 64.6267267726773, 54.165649675983296, 42.51872042578816, 39.15260128341299, 25.066951266035396, 49.685076586942586, 29.67038267784612, 70.18354194300281, 60.049545149714234, 33.67763282944891, 52.53370677195607, 87.8837690634484, 70.22494849865173, 69.52374735109755, 58.65204545508934, 81.10224328513766, 70.3262715185436, 84.55708854963137, 31.62688506985991, 79.63128276521655, 67.89980000633481, 26.83444298123282, 89.89477486926299, 9.715498378866794, 1.1137877489338366, 88.29355612790556, 17.195013881912036, 20.95822176299992, 37.594363978624244, 57.70432274859354, 86.07895390012142, 91.8209890781766, 3.3568755346247703, 15.303446748847005, 51.710404314376966, 18.712043002840183, 74.3636595220724, 16.44946218567631, 13.215533639846932, 46.36388918208887, 70.05623968568997, 34.79788659644842, 29.341617960109623, 60.597429974967476, 9.292708632801617, 83.43271225825933, 79.59958328849027, 61.12501127786716, 63.85914478020298, 27.10071668921904, 88.74072029757573, 53.67111533114629, 37.34953535129186, 78.04554658051116, 33.30799287553803, 56.297579676905286, 97.43861536907797, 23.6171569479517, 88.09199016871486, 33.90806853642477, 58.964850812617506, 8.027814041215509, 11.06765164937531, 14.612679785156146, 20.482025625736387, 41.60533855425661, 10.838232866499498, 34.83856028823112, 2.5063623473412955, 29.88255753676855, 75.64328895271818, 32.82557830535053, 79.97632654396516, 91.89902183784031, 73.37865112687491, 80.85786132765028, 35.55142266991243, 29.58602155395399, 98.59415358075664, 9.794528316507789, 50.628711653549004, 49.48828913685759, 24.216781139791486, 14.390229241850705, 0.7552827661648776, 69.08461646287465, 79.36027166095651, 34.24022467163432, 6.034596988817809, 62.828775864880434, 0.7759595243524764, 1.7040523621366876, 93.22527764065663, 23.187445330740896, 16.888265850529795, 91.08503543862868, 37.12089689361332, 91.79695401331395, 90.86648792193124, 6.804630023137737, 32.33363311332948, 85.9165438384814, 22.275721129184834, 47.72237850383919, 83.14159952441015, 35.65516908357641, 3.6557191299255387, 30.849779799403876, 61.706740097788945, 33.39775003252923, 89.10010279422688, 82.99292717918749, 30.788671228944654, 72.74271967737978, 7.666027481143944, 20.824934996355903, 44.882986034521025, 76.04436919774786, 73.96251421722542, 36.034021984861695, 96.09773098095089, 21.669383856042767, 51.249207565362035, 94.75213749823611, 7.659665398981808, 13.62452053893809, 33.35097669578022, 85.23726916367387, 25.50340824784073, 83.49428025695435, 51.49945837903142, 43.12174055254094, 61.50893339003783, 27.382272816343967, 69.67974146875325, 18.274533905140146, 31.46390190850369, 8.719184113703582, 87.17014031130849, 60.10447736763258, 68.36283447406507, 41.51838839355641, 60.64381306187838, 87.55021909978564, 27.756560626794126, 27.5474240330008, 0.565444000128934, 19.25078555008354, 66.9584266461003, 78.41250151635772, 59.59169563584492, 87.08527817597721, 37.58830877966079, 54.8662486116796, 71.4146468697395, 79.1500389895949, 15.137058261965075, 56.079832079318614, 24.584995157158186, 94.28862707101511, 99.03299825551852, 23.668101742127966, 96.83923871338183, 45.182249742834045, 8.872242978160937, 63.51021146225937, 32.565087837878245, 52.67896439481614, 14.605271258819908, 50.78992932625221, 34.56095111831262, 53.088287902258436, 72.11804326242202, 92.59552404771063, 12.815201032553015, 23.669933711355206, 24.34085295842936, 75.66291415117446, 24.842501723223542, 32.473077002263764, 23.16011565547278, 2.6562969333618014, 98.50849116647412, 22.928012229035666, 49.78493657831519, 53.20795174945337, 11.425368203825004, 60.76804453834864, 95.31254251230231, 93.26064871910718, 75.52553437144057, 33.25252696773112, 33.913372591771896, 64.34399217435372, 28.233857587346, 42.16776632032254, 97.45349408988736, 94.60659067060534, 96.62624587341855, 71.53430740241959, 20.007616672349837, 4.461519324324891, 53.73858639265245, 50.56814420274988, 52.55318709344344, 56.715047496077254, 64.10842651356342, 5.196142255155722, 32.36516597225243, 73.13078336636639, 91.25403899647043, 5.326496922211477, 10.477398196819166, 13.483553663551028, 2.0128930662322797, 93.92707146063572, 1.3990291735043958, 22.46057992281957, 72.13385701814651, 78.473813084093, 82.61060005480442, 46.04464289531792, 82.8228542729205, 39.405558024992956, 36.55607991127183, 2.1569154939770407, 12.866056906912027, 62.34666102423835, 75.73279166224546, 5.149584205403778, 50.576580883460394, 34.08992262517587, 18.236262748751177, 54.96389996404653, 96.87320752506041, 0.8798451733822876, 88.91076756461132, 30.008560996942023, 30.915067264575235, 48.56845721315142, 61.43268544681811, 66.73641907806349, 37.32789085745273, 32.92561330657079, 86.23246374725129, 59.14052865789273, 37.47113038811823, 67.68928279925582, 27.929527629412966, 18.82324548789356, 92.57427926802599, 65.6226787479346, 54.71559733257272, 30.33752040747778, 41.563388908349175, 5.902719439291248, 0.882195988822021, 79.46478523341995, 25.17485454420999, 90.70583398066215, 98.70747396845864, 74.6373034155294, 40.15079336592326, 79.93591989539036, 92.52025362783003, 4.479474826341157, 97.14849572994643, 93.42561001085382, 37.571620976006784, 4.890295220073648, 41.72798602976017, 81.67048423950968, 39.19348814603409, 71.29951831700487, 75.097446740733, 56.97280492249875, 76.41999166385648, 62.03588449141606, 41.4444287004166, 36.294648208842496, 98.88967009148301, 74.35619435571488, 46.5232158516499, 14.952485884667865, 83.0567062652983, 93.43639692715034, 24.9547104534259, 16.116062276273624, 92.53996743639365, 17.038891619151563, 24.761244693795003, 86.68707476645325, 35.51897314118483, 90.1453281153058, 14.448312299317823, 27.65210125710702, 22.7165255629181, 42.1004089022237, 69.72006796910549, 89.82678390548458, 15.027538264346763, 59.055807634442424, 98.34955651468682, 42.20229949372223, 43.084507285386174, 41.97911335713215, 83.39521178511696, 44.22972477247246, 35.52027076170361, 10.43484220351052, 59.64903956937798, 77.24187917043254, 82.79778411330942, 24.657509494803755, 47.6685720763367, 51.84965123062315, 97.81592184243863, 71.98746128456321, 5.85440512619938, 98.46337934988799, 23.640966356017902, 49.25959721244959, 96.33391736939923, 18.121681268201318, 26.540780877518277, 60.163340213828185, 30.370704332375865, 6.081272834783102, 9.436469696174077, 35.96105779640322, 69.27210174385779, 14.29301782840884, 84.67678946803984, 15.301716758773154, 62.832496601656594, 88.0843632828715, 2.166728942346441, 12.475295076837678, 36.182113385673595, 15.783022859196805, 4.496250769713994, 49.95312496959927, 37.76461348714463, 46.48223842895103, 79.17607043403049, 38.7263420719887, 80.7839696880534, 57.21514737860709, 50.42221178749959, 3.9208050038598397, 80.93563410374016, 38.53836672528506, 90.26878438732714, 31.833287046467586, 47.67829444391168, 52.30228324934482, 26.656754536364947, 58.69735304302443, 14.982266090246089, 12.418325182622302, 46.27206157088597, 51.96575919412122, 90.74062637825146, 88.6478048837774, 23.79237616894898, 34.283541935847964, 68.63969502914775, 81.45566717352392, 1.305701937558501, 64.05808255119203, 88.36386530082052, 89.39192172903853, 23.911498148069633, 69.38472553120417, 78.71538422670565, 71.60363661258258, 6.138804936786668, 15.408367609765982, 42.316169901877224, 42.80373595386525, 33.9264361593981, 55.511530852497714, 40.78403395725299, 42.03816154479537, 16.96258609493183, 86.48574090243895, 99.6843578374285, 76.74651204392214, 77.1847489276179, 3.2637218316332373, 58.537223459111246, 34.625435886298085, 87.62985860939246, 28.42393061832943, 10.793437775822435, 8.05825826209542, 20.422074106833186, 20.140327063333775, 69.83039250394654, 78.88768085357661, 45.91177093954087, 38.564133065569195, 1.205182912890257, 80.33864793350064, 87.78437380555695, 91.57334609365446, 93.48288072665939, 6.329688304368764, 39.78430930117547, 53.79262625227403, 5.296336647448352, 6.680808051772802, 56.344785255827745, 37.24522234402389, 85.7333293395607, 24.383233420307736, 46.250926693369976, 49.710772107160274, 32.54140458114988, 17.31452512052636, 63.50018173696841, 78.14564732454657, 69.6841354086108, 68.1953099991502, 40.62088888795241, 30.363359102625644, 81.45676532450311, 47.65780198030131, 49.40151898365733, 34.02945321691995, 40.793508973467155, 21.518892198457518, 97.63615330686393, 54.630620457566394, 5.394205218127324, 71.55940912906945, 97.83415421923168, 84.54535500757557, 8.691408633753351, 74.59310095010834, 57.97942941729708, 48.5637791252598, 6.305857507406665, 85.56877875704055, 61.774871033085965, 91.15456867332628, 26.084593334911276, 9.486140971866153, 52.21992596384955, 63.89735165406088, 26.10672898726307, 34.9946510949602, 10.812902971684546, 59.315285177533994, 27.70526666005789, 1.3793509583091668, 21.109098666629468, 10.285648262945735, 52.071766489498586, 93.92376183558565, 17.467256270292374, 99.39686810853492, 32.79664636219729, 33.584823400391414, 79.69124582028742, 65.55479357622836, 27.582450872832563, 99.97074558339054, 54.108602943250006, 58.33851531219694, 75.11133473226016, 61.5306749310515, 80.60186597358027, 39.855096381564934, 91.04888896960901, 13.673799656279229, 49.81936627612436, 44.71863029425492, 68.94621998000129, 22.765089802256632, 87.37322239039652, 65.80336393186653, 66.49140171103281, 32.72236276201211, 2.994278115798754, 30.843058058457085, 78.91637992490539, 33.65473366660642, 85.6773776050988, 51.211454913958946, 29.284520519944323, 90.78050171361333, 32.04911374148023, 94.93166341407058, 7.016739975176001, 14.627788169775169, 20.726038011046555, 65.20977591179548, 40.02901494155709, 96.5670913702772, 47.40500902002236, 73.15667041441402, 98.68936938837025, 23.390928842017324, 18.264643341703014, 71.02953312119259, 39.403029292861234, 63.51726954678144, 72.96508004909204, 48.78772704556409, 45.78206387844082, 90.75978539950145, 9.295303975922064, 53.08015876359477, 84.28216522343634, 58.48283739179879, 5.310861515411103, 91.57840794720653, 51.85835806291315, 80.43160060644736, 64.89882705276466, 96.63558472780812, 60.455955040354816, 42.26627157311501, 70.25918814304262, 23.645894690555956, 86.41142009691217, 79.58855063327181, 42.57953993112271, 31.60003426612206, 71.56129693564368, 80.74896757917318, 59.44388031502849, 80.57335163149212, 82.49015646475837, 68.44201171549082, 32.18864813864035, 77.85570991829469, 68.22853866347901, 28.46424938455151, 71.971180741219, 28.453101956176884, 95.56323505453506, 64.39153365749806, 92.64574336776124, 66.40837777479932, 78.12250963140237, 55.32420177454459, 1.511746747619136, 93.25008749329527, 78.51315504482153, 35.33785575451445, 12.704366526840161, 93.8616049757034, 31.675886532832898, 22.77044823343276, 5.882291384749783, 54.5963767280332, 85.59418860202734, 82.21579265938476, 96.43144873301507, 67.74984527352389, 84.6637726976868, 95.69919000344268, 31.73372996369831, 90.91223087298752, 5.299981722234293, 48.11155905000029, 28.96370176166433, 56.82752724062631, 78.43385770133673, 86.13024797131236, 63.535806147159335, 92.81798684936517, 51.471570973447015, 60.433555953783916, 52.54109199602822, 38.552809382873306, 46.092504797571735, 95.81499887763104, 47.85382567521711, 35.09478897141185, 18.974490992920323, 88.0313524292627, 53.60803610766794, 79.06604041419588, 32.432383928804285, 26.408315454604935, 10.500930709212163, 53.50623190884944, 7.7702636682802195, 9.371418725500558, 51.03105092220686, 13.527397967220455, 90.45609956451574, 25.431319674535512, 69.86010703371232, 71.15548713493995, 8.478906396459484, 99.78555858426368, 13.431554034625993, 69.6126998322982, 99.31336888913323, 32.30731184882125, 7.44375106809918, 39.438560645741475, 94.70680548539542, 69.58812981133242, 23.009967381117626, 99.33973130869283, 2.0889209846095547, 97.51683406091203, 37.657027561272784, 14.377385092573892, 62.41815593261562, 86.09616991357932, 34.582767050926854, 10.63344848584309, 78.42639316957987, 21.311113686766504, 84.14780255860708, 68.35557038329374, 41.567524023441905, 33.43677850857404, 80.44870009238917, 37.028791062740495, 59.96939157721199, 73.48008369297709, 85.59258310290173, 78.18378929411777, 86.42337497207869, 29.705621236412007, 50.07343699510069, 46.44210427002601, 10.865537844210005, 15.144544747416633, 7.01320656910005, 79.02561396579503, 37.9330947315968, 34.04837333729033, 82.64120626166813, 34.18462952164689, 39.63249164515092, 73.88435364953257, 71.28528443595279, 10.160568721400354, 7.910498823658141, 70.0352847652644, 20.824423045484174, 70.48808588139362, 22.281431046335687, 83.54693132155585, 99.73385648470364, 44.82502064234456, 10.917558040405284, 48.4221992466116, 34.44914184023579, 77.2349322232801, 24.980303797350857, 91.08336259340216, 58.82178759674033, 36.618974842817295, 13.918464015915266, 9.481045838962432, 14.3399221233666, 89.95202006522949, 29.772048043585897, 33.610182940831365, 81.65768238843485, 5.109974036820564, 60.021530533758735, 21.786921374765956, 16.10154626771201, 19.56406203806488, 68.66464831784896, 77.3464305330052, 13.083437421615818, 74.08117653706064, 53.15227751815394, 65.0618402211, 47.00054081626153, 68.47900693068705, 62.91120220632027, 44.44047975717707, 13.733466126823068, 60.33210837792533, 98.765600453517, 74.92429605872218, 12.772108441728736, 24.04054929268873, 62.88777678578216, 31.574949010029673, 30.532023578412627, 43.03711169094259, 68.06892949436025, 31.49168073890459, 69.25781898708789, 71.04259433943186, 19.563413834052245, 7.673638690702244, 40.09044953535336, 89.33944425197132, 51.0773510385784, 9.121716904188471, 89.90800548103076, 48.976926768810515, 70.37891365670039, 88.80235604905816, 95.87424822880031, 37.33030866826815, 25.590950988627835, 42.66422899442656, 92.2945980154772, 73.09653492698538, 55.99806387865096, 44.56892546792203, 71.21526939243891, 40.93552364447825, 1.2914183076090158, 78.08095536277723, 45.681786593931704, 80.709851651787, 15.064467022444884, 24.49573646985189, 36.47130118107545, 12.205310346446518, 19.87510490105915, 54.47250323259068, 58.19606306720026, 60.07443357632757, 39.08853783300367, 53.72170976796766, 9.572145067038118, 59.05448090231494, 98.10092734563665, 89.8858945321018, 48.46405532487024, 18.721723746653396, 9.361363013087365, 30.033079809841578, 58.49664935348383, 31.567835799573086, 71.67565975511175, 1.6032056219178137, 50.13889325171065, 50.55013886246209, 94.98643020184157, 27.258395051250915, 6.2017033085311475, 90.77913838958287, 73.77834401962338, 11.530388933545566, 89.87884573067588, 55.74095047019602, 46.92553234142274, 11.242673128015069, 19.28858943204733, 29.81281181686284, 63.262016414302614, 56.346424208715085, 60.07469578369744, 26.774947555802985, 31.35922862541006, 74.38550853318671, 22.660383285826125, 17.014804738419077, 68.70812990132909, 99.79660366757244, 40.19890094875762, 44.73089990526488, 74.0553885253045, 56.512666711710224, 40.46036871587759, 12.63191908840633, 34.07247871459488, 31.303423247902074, 9.455597493589906, 50.073838597963686, 71.15150974366935, 27.135299472631246, 56.42042474262085, 12.947502239486363, 94.94414118131446, 67.03817936693301, 8.456719935485157, 46.766056187104, 72.97571354960334, 51.073430272407464, 83.5709261067437, 70.9047675534972, 87.92763167860545, 80.25870158614829, 66.78164815788953, 45.51742013960223, 40.330204747279396, 41.43631896163167, 80.69837770024812, 18.962013605876148, 21.62728325844866, 6.962500119052672, 36.66612582697265, 90.67467510980254, 15.668692935858342, 85.89403465436322, 2.035527402585746, 67.99730413877315, 35.86074381569436, 42.70886435363778, 29.383749018883787, 90.23062081269182, 55.3841464019759, 79.25240408169866, 37.50739358215382, 9.08422946741162, 1.4438357343704022, 4.075867139185441, 43.08004167348366, 97.4943388176534, 7.874169976384882, 59.71898502173254, 83.34498434647023, 62.894711734916385, 91.82998912260301, 0.2197160085386396, 80.417347084319, 58.86781256611007, 49.147912693558226, 45.27709915743217, 12.83630118109964, 69.51997616904661, 9.305390428987215, 13.595941377557308, 99.74890332456688, 30.800986047450827, 36.45217748129308, 17.43547507915594, 46.65269358702447, 50.46477000150953, 40.85253479211198, 66.58509492436907, 95.74471010645861, 99.98427924035201, 92.59923371121297, 46.272686928721875, 8.968124993153426, 15.677408431416707, 29.51245067115773, 76.13160572843405, 14.31741308424389, 66.78922163389063, 66.76174615685443, 97.84067156913878, 19.037032717075252, 61.47671781400255, 63.145641702374775, 33.71975514933352, 54.69602331683089, 99.13717328549161, 52.33492315832782, 3.9534994823218983, 87.00544480415476, 21.490577348433536, 14.532660362995752, 89.5335620958207, 35.09155236862321, 15.63684473343283, 18.30479291093584, 14.50784958269491, 34.41838999022867, 44.622524670306596, 55.55788227759556, 44.46150636558175, 88.48913234284771, 42.25419175500163, 30.718928877020556, 51.3814339352057, 97.1789655376833, 18.042215050422538, 30.840276055743175, 65.00935682007271, 71.78944656611019, 34.10497758218616, 45.54842525500295, 31.06562982213694, 19.693554967647653, 58.69096382272389, 57.515135570652106, 94.26148369605592, 2.4909402546991033, 38.900110534742126, 98.18545893007214, 95.02991974641252, 62.8956179436347, 83.42778988627194, 78.4047292285954, 27.515993968573348, 72.62776067546223, 67.82692904083522, 33.26589496616701, 74.56025915964572, 50.26942600523257, 93.45339687870957, 14.709081105444909, 67.94463602605873, 8.207571338900465, 7.022201342664736, 83.78329465180849, 52.45929906263138, 56.94040402235472, 71.42062175476798, 56.64040662791465, 48.20735736072028, 51.252944075949515, 18.417459214673528, 26.555352927873045, 27.244484485406804, 91.84252942622896, 12.813912590308762, 78.66942722118732, 56.94562072404591, 61.699818061071475, 55.90594545437876, 19.397504942634537, 71.93377155044952, 65.12883521620047, 23.42911494914125, 14.088068222938531, 79.25243904620972, 91.97835177406279, 41.4471929786764, 19.82461308032476, 49.16053473529721, 30.53265872859666, 16.91971811420331, 39.98058270557778, 63.94374234759701, 1.2500681393600277, 49.096012890898024, 32.34844527548728, 9.648360164684277, 81.70465400277355, 24.266279507114795, 5.405860711620147, 0.5760297016155658, 34.28562353024378, 24.95507315783255, 24.33298681992936, 27.63288404753149, 4.765810112589275, 68.55806560137394, 17.658734455395997, 59.292155001211654, 60.98327362937728, 46.02786856046137, 61.96607694128272, 5.429903118741953, 94.78743146111194, 99.68266184757327, 94.99341936887915, 52.08046229940402, 82.98159905641953, 21.884599787464243, 45.07878497176533, 58.30326591933015, 82.3929078265044, 94.59833493704441, 74.97939826127227, 53.45683780088491, 30.892426925791128, 74.82357978358397, 64.298206662628, 13.327144901439725, 88.93043838494373, 45.75201362169893, 10.84735021027975, 68.6829279648455, 48.490484085588406, 83.43232934171805, 18.231072292747196, 39.73897027367644, 17.9492465912936, 34.85710278404092, 44.0295001165108, 40.734977929913065, 37.04122126052292, 80.5046251830322, 73.80551280681048, 66.68891403007852, 58.71243144267241, 25.811970136387618, 61.839913047569425, 42.196780792543166, 59.46260155270666, 41.74113066130065, 11.922751087050043, 53.32355071285496, 92.34125809546754, 43.43941159982451, 35.7083924602651, 89.9226414678097, 81.09023715291238, 88.38975335556458, 45.25255287682531, 39.22352307525323, 67.7802806713124, 91.56460782881317, 20.718634104635548, 71.86626406582627, 30.411654912176857, 92.49765217707395, 58.45797007738853, 7.333448557608446, 96.6554191399656, 35.82704459719292, 36.77299975940866, 7.91610041293358, 66.43731839941964, 69.4624230743868, 99.09759852341024, 14.794173356972106, 35.603750374522534, 34.71338808747878, 74.30630789004749, 43.77659291958853, 19.26823202042909, 78.37963627128963, 15.874204349832144, 71.23867605688969, 49.097125984513, 98.78525470560298, 92.18789414570311, 81.13397247235908, 24.889344500505274, 47.86099758688728, 70.26374653344205, 53.250567193194655, 34.31112359391124, 89.74546902948141, 27.444644974577372, 43.922570074157086, 75.23821694276707, 31.57754300822183, 6.706901996379388, 20.02362899664022, 47.99722682430237, 87.35475934675715, 65.09916487687977, 82.87387471957646, 25.342860632121823, 5.758121712889929, 32.10895203352217, 55.394248921786485, 10.901343410326891, 26.607602114221695, 0.27307234313768136, 56.23075317238845, 75.53291158474579, 28.278588518226577, 61.52545764893394, 63.664721025351234, 67.57340351984743, 95.03617859681536, 26.03960670451071, 91.97308338994056, 18.649703640409932, 79.72722079175662, 35.97723999963368, 26.314677632723406, 11.57385287128232, 66.42492547616823, 40.77982332936423, 39.545774279906674, 15.535329233346829, 55.086336771848956, 98.53226780065573, 87.74779727010434, 61.855879896416496, 18.97838744490218, 60.81691130595669, 6.403867872919921, 60.06328053697079, 87.344412973398, 45.36616601200958, 30.836468913817082, 68.5351592005746, 40.74422090018997, 20.721746216739746, 11.080938933189643, 97.18679376341971, 56.53820337433899, 70.02197871552926, 90.13802248968868, 69.42076598835479, 43.91145814668162, 96.25520664136751, 57.7698382480369, 95.5085464836434, 55.47116046469074, 34.65319313773616, 28.371746088429393, 58.804319886717515, 15.390543007093992, 7.370629860838673, 34.21960672602775, 16.371538384464934, 12.404382087947486, 99.15608813064732, 44.77664438507464, 63.594402330057406, 13.308272453566449, 48.880825688169594, 50.24654480650914, 95.10549352934216, 80.24821869150695, 50.43688768136745, 99.83670487460053, 21.687806349160567, 86.66270036102652, 63.37781333558854, 13.949834963204577, 51.86845244189499, 9.835327413726269, 22.213982822401157, 50.54714101307047, 25.256426214523252, 76.11205629602316, 71.7714205751767, 71.73118152897166, 51.203363546717576, 26.299199612922898, 5.050158581265574, 12.474633923200152, 3.3514365156106507, 4.131613276945401, 61.39365863045714, 43.9628595460141, 6.913744665812038, 28.76235553372234, 1.994625104982417, 64.0888467037933, 53.208243234845874, 46.12263371876336, 63.06491686472272, 22.670813045119974, 89.1599316032297, 38.12088253732293, 31.018258000179532, 51.80558147031745, 84.53549360617357, 45.186508337366085, 77.28211941620614, 96.65132748237843, 42.3126635543289, 90.19009950417187, 44.316329595182204, 42.77280598122574, 19.796962923069838, 28.04512539823247, 9.319387602550444, 4.554352901242476, 94.59344309566538, 5.99232170673023, 48.64480473022247, 93.89956292765407, 83.0518993493971, 66.66125474955459, 73.9748065830942, 38.11736020343247, 33.39221660220573, 62.89700444750871, 83.19226232834332, 89.42368252698644, 90.10648275336533, 45.7909849204167, 16.32874381431786, 55.76685908529414, 62.907409249147875, 34.46443675210258, 48.78537322574592, 58.49976809549199, 13.852487819553716, 37.30918040157598, 12.8195285761176, 67.78665494825363, 64.97516829791176, 40.91195505840135, 29.34355471572895, 65.25807868664035, 87.61595087562856, 11.669312376698649, 88.70794124362126, 43.749671304948656, 68.60042276034159, 28.659130471416063, 48.964482030856125, 26.897451068942136, 98.9061599147694, 72.1247498745059, 66.91868369025067, 55.663564040511424, 27.910993267684393, 2.5038495430268592, 25.474148161398034, 47.59363679819101, 85.74568186734182, 74.80280561306839, 83.90562132537671, 86.21276030476459, 14.70390886739671, 67.93744571060425, 65.83380446107022, 62.65422957445661, 13.83378992088714, 44.06672113312254, 66.39265043522589, 65.38227436639988, 99.74152745960116, 61.26666639743481, 26.792128588005994, 2.8635479017906973, 22.228977224743385]}, "discrete_ranges": {}, "doc": "2ceaac75-dadf-454a-84b4-171b902efcaa"}}, {"id": "a444fd6f-ad06-4aa6-8664-25ed9642dff0", "type": "BoxSelection", "attributes": {"tool": {"id": "ce87f780-8b61-4ec6-9601-cb123dc70f51", "type": "BoxSelectTool"}, "id": "a444fd6f-ad06-4aa6-8664-25ed9642dff0", "doc": "2ceaac75-dadf-454a-84b4-171b902efcaa"}}, {"id": "f5ce50cb-4b3b-41c4-8672-a8821d12b63e", "type": "BoxZoomTool", "attributes": {"id": "f5ce50cb-4b3b-41c4-8672-a8821d12b63e", "plot": {"id": "db66da39-9624-4ece-8150-050082e7fc73", "type": "Plot"}, "doc": "2ceaac75-dadf-454a-84b4-171b902efcaa"}}, {"id": "d673cf4d-5698-493c-a52b-3db70bf6c6e8", "type": "ResizeTool", "attributes": {"id": "d673cf4d-5698-493c-a52b-3db70bf6c6e8", "plot": {"id": "db66da39-9624-4ece-8150-050082e7fc73", "type": "Plot"}, "doc": "2ceaac75-dadf-454a-84b4-171b902efcaa"}}, {"id": "f3f64ff5-b999-40c7-ba0f-7c19088d39be", "type": "Grid", "attributes": {"id": "f3f64ff5-b999-40c7-ba0f-7c19088d39be", "plot": {"id": "db66da39-9624-4ece-8150-050082e7fc73", "type": "Plot"}, "ticker": {"id": "6ab16b94-f88c-4446-a6d4-126dcdd647df", "type": "BasicTicker"}, "dimension": 1, "doc": "2ceaac75-dadf-454a-84b4-171b902efcaa"}}, {"id": "642d90e4-18a1-4677-9f8c-4be2e3fb36bb", "type": "PlotContext", "attributes": {"id": "642d90e4-18a1-4677-9f8c-4be2e3fb36bb", "children": [{"id": "db66da39-9624-4ece-8150-050082e7fc73", "type": "Plot"}], "doc": "2ceaac75-dadf-454a-84b4-171b902efcaa"}}, {"id": "03f26cfd-912e-4855-92fc-42c095717d13", "type": "ResetTool", "attributes": {"id": "03f26cfd-912e-4855-92fc-42c095717d13", "plot": {"id": "db66da39-9624-4ece-8150-050082e7fc73", "type": "Plot"}, "doc": "2ceaac75-dadf-454a-84b4-171b902efcaa"}}, {"id": "bf7d6088-2fc1-4d6e-9e9b-35eda07eb90c", "type": "Glyph", "attributes": {"id": "bf7d6088-2fc1-4d6e-9e9b-35eda07eb90c", "data_source": {"id": "d110a2f9-3fd1-448b-a83c-027b388084e2", "type": "ColumnDataSource"}, "doc": "2ceaac75-dadf-454a-84b4-171b902efcaa", "ydata_range": null, "xdata_range": null, "server_data_source": null, "nonselection_glyphspec": {"x": {"units": "data", "field": "x"}, "line_alpha": {"units": "data", "value": 0.1}, "y": {"units": "data", "field": "y"}, "type": "circle", "valign": null, "start_angle_units": "deg", "line_cap": "butt", "halign": null, "line_width": {"units": "data", "field": "line_width"}, "line_join": "miter", "angle_units": "deg", "line_color": {"value": "#1f77b4"}, "fill_color": {"value": "#1f77b4"}, "length_units": "screen", "line_dash_offset": 0, "size": {"units": "screen", "default": 4, "field": null}, "radius_units": "data", "end_angle_units": "deg", "fill_alpha": {"units": "data", "value": 0.1}, "visible": null, "line_dash": [], "margin": null}, "name": null, "glyphspec": {"radius": {"units": "data", "default": 4, "field": "radius"}, "fill_color": {"units": "data", "field": "fill_color"}, "line_alpha": {"units": "data", "value": 1.0}, "y": {"units": "data", "field": "y"}, "type": "circle", "x": {"units": "data", "field": "x"}, "fill_alpha": {"units": "data", "value": 0.6}, "line_color": {"value": null}, "radius_units": "data", "line_width": {"units": "data", "field": "line_width"}}}}, {"id": "6b0df771-ce0d-4b56-9edb-0f71f1f1790e", "type": "PreviewSaveTool", "attributes": {"id": "6b0df771-ce0d-4b56-9edb-0f71f1f1790e", "plot": {"id": "db66da39-9624-4ece-8150-050082e7fc73", "type": "Plot"}, "doc": "2ceaac75-dadf-454a-84b4-171b902efcaa"}}];
                Bokeh.load_models(all_models);
                var model = Bokeh.Collections(modeltype).get(modelid);
                var view = new model.default_view({model: model, el: '#b3848b11-3445-4819-bb85-bba365839093'});
            });
        </script>
    </head>
    <body>
        <div class="plotdiv" id="b3848b11-3445-4819-bb85-bba365839093"></div>
    </body>
</html>